{
  "cve_id": "CVE-2019-3808",
  "cve_desc": "A flaw was found in Moodle versions 3.6 to 3.6.1, 3.5 to 3.5.3, 3.4 to 3.4.6, 3.1 to 3.1.15 and earlier unsupported versions. The 'manage groups' capability did not have the 'XSS risk' flag assigned to it, but does have that access in certain places. Note that the capability is intended for use by trusted users, and is only assigned to teachers and managers by default.",
  "repo": "moodle/moodle",
  "patch_hash": "6360f87cdca744a6a71c315853f6d811a3e54e26",
  "patch_info": {
    "commit_hash": "6360f87cdca744a6a71c315853f6d811a3e54e26",
    "repo": "moodle/moodle",
    "commit_url": "https://github.com/moodle/moodle/commit/6360f87cdca744a6a71c315853f6d811a3e54e26",
    "files": [
      "lib/db/access.php",
      "version.php"
    ],
    "message": "MDL-64395 groups: Added XSS Risk to the manage groups capability",
    "before_after_code_files": [
      "lib/db/access.php||lib/db/access.php",
      "version.php||version.php"
    ]
  },
  "patch_diff": {
    "lib/db/access.php||lib/db/access.php": [
      "File: lib/db/access.php -> lib/db/access.php",
      "--- Hunk 1 ---",
      "[Context before]",
      "1123:     ),",
      "1125:     'moodle/course:managegroups' => array(",
      "1127:         'captype' => 'write',",
      "1128:         'contextlevel' => CONTEXT_COURSE,",
      "",
      "[Removed Lines]",
      "[None]",
      "",
      "[Added Lines]",
      "1126:         'riskbitmask' => RISK_XSS,",
      "",
      "---------------"
    ],
    "version.php||version.php": [
      "File: version.php -> version.php",
      "--- Hunk 1 ---",
      "[Context before]",
      "30: defined('MOODLE_INTERNAL') || die();",
      "",
      "[Removed Lines]",
      "32: $version  = 2018122000.01;              // YYYYMMDD      = weekly release date of this DEV branch.",
      "",
      "[Added Lines]",
      "32: $version  = 2018122000.02;              // YYYYMMDD      = weekly release date of this DEV branch.",
      "",
      "---------------"
    ]
  },
  "candidates": [
    {
      "candidate_hash": "8df868e9e0dc684c9746c91b2fa7ff21417264d4",
      "candidate_info": {
        "commit_hash": "8df868e9e0dc684c9746c91b2fa7ff21417264d4",
        "repo": "moodle/moodle",
        "commit_url": "https://github.com/moodle/moodle/commit/8df868e9e0dc684c9746c91b2fa7ff21417264d4",
        "files": [
          "version.php"
        ],
        "message": "weekly release 3.6dev",
        "before_after_code_files": [
          "version.php||version.php"
        ]
      },
      "candidate_patch_features": {
        "candidate_earlier_than_patch": 1,
        "same_branch_evolution": 1,
        "olp_code_files": {
          "patch": [
            "version.php||version.php"
          ],
          "candidate": [
            "version.php||version.php"
          ]
        }
      },
      "candidate_diff": {
        "version.php||version.php": [
          "File: version.php -> version.php",
          "--- Hunk 1 ---",
          "[Context before]",
          "30: defined('MOODLE_INTERNAL') || die();",
          "38: $branch   = '36';                       // This version's branch.",
          "39: $maturity = MATURITY_ALPHA;             // This version's maturity level.",
          "",
          "[Removed Lines]",
          "32: $version  = 2018081700.00;              // YYYYMMDD      = weekly release date of this DEV branch.",
          "36: $release  = '3.6dev (Build: 20180817)'; // Human-friendly version name",
          "",
          "[Added Lines]",
          "32: $version  = 2018082400.00;              // YYYYMMDD      = weekly release date of this DEV branch.",
          "36: $release  = '3.6dev (Build: 20180824)'; // Human-friendly version name",
          "",
          "---------------"
        ]
      }
    },
    {
      "candidate_hash": "bc342f101a3a5cd3e94cb5d56b86ce44e23d9b96",
      "candidate_info": {
        "commit_hash": "bc342f101a3a5cd3e94cb5d56b86ce44e23d9b96",
        "repo": "moodle/moodle",
        "commit_url": "https://github.com/moodle/moodle/commit/bc342f101a3a5cd3e94cb5d56b86ce44e23d9b96",
        "files": [
          "version.php"
        ],
        "message": "on-demand release 3.7dev+",
        "before_after_code_files": [
          "version.php||version.php"
        ]
      },
      "candidate_patch_features": {
        "candidate_earlier_than_patch": 0,
        "same_branch_evolution": 1,
        "olp_code_files": {
          "patch": [
            "version.php||version.php"
          ],
          "candidate": [
            "version.php||version.php"
          ]
        }
      },
      "candidate_diff": {
        "version.php||version.php": [
          "File: version.php -> version.php",
          "--- Hunk 1 ---",
          "[Context before]",
          "30: defined('MOODLE_INTERNAL') || die();",
          "38: $branch   = '37';                       // This version's branch.",
          "39: $maturity = MATURITY_ALPHA;             // This version's maturity level.",
          "",
          "[Removed Lines]",
          "32: $version  = 2019042200.02;              // YYYYMMDD      = weekly release date of this DEV branch.",
          "36: $release  = '3.7dev+ (Build: 20190418)'; // Human-friendly version name",
          "",
          "[Added Lines]",
          "32: $version  = 2019042300.00;              // YYYYMMDD      = weekly release date of this DEV branch.",
          "36: $release  = '3.7dev+ (Build: 20190423)'; // Human-friendly version name",
          "",
          "---------------"
        ]
      }
    },
    {
      "candidate_hash": "13ef95e3dee013156c54ba81b872fd868d95321e",
      "candidate_info": {
        "commit_hash": "13ef95e3dee013156c54ba81b872fd868d95321e",
        "repo": "moodle/moodle",
        "commit_url": "https://github.com/moodle/moodle/commit/13ef95e3dee013156c54ba81b872fd868d95321e",
        "files": [
          "admin/registration/confirmregistration.php",
          "admin/registration/forms.php",
          "admin/registration/index.php",
          "admin/registration/renewregistration.php",
          "admin/renderer.php",
          "admin/tool/lp/classes/output/manage_competency_frameworks_page.php",
          "admin/tool/usertours/classes/manager.php",
          "index.php",
          "lang/en/admin.php",
          "lang/en/deprecated.txt",
          "lang/en/hub.php",
          "lib/classes/hub/api.php",
          "lib/classes/hub/registration.php",
          "lib/classes/hub/site_registration_form.php",
          "lib/classes/hub/site_unregistration_form.php",
          "lib/db/upgrade.php",
          "lib/db/upgradelib.php",
          "lib/moodlelib.php",
          "lib/tests/upgradelib_test.php",
          "theme/boost/lang/en/theme_boost.php",
          "theme/classic/lang/en/theme_classic.php",
          "version.php"
        ],
        "message": "Merge branch 'MDL-66118-master-byebyemoodlenet' of git://github.com/mudrd8mz/moodle",
        "before_after_code_files": [
          "admin/registration/confirmregistration.php||admin/registration/confirmregistration.php",
          "admin/registration/forms.php||admin/registration/forms.php",
          "admin/registration/index.php||admin/registration/index.php",
          "admin/registration/renewregistration.php||admin/registration/renewregistration.php",
          "admin/renderer.php||admin/renderer.php",
          "admin/tool/lp/classes/output/manage_competency_frameworks_page.php||admin/tool/lp/classes/output/manage_competency_frameworks_page.php",
          "admin/tool/usertours/classes/manager.php||admin/tool/usertours/classes/manager.php",
          "index.php||index.php",
          "lang/en/admin.php||lang/en/admin.php",
          "lang/en/hub.php||lang/en/hub.php",
          "lib/classes/hub/api.php||lib/classes/hub/api.php",
          "lib/classes/hub/registration.php||lib/classes/hub/registration.php",
          "lib/classes/hub/site_registration_form.php||lib/classes/hub/site_registration_form.php",
          "lib/classes/hub/site_unregistration_form.php||lib/classes/hub/site_unregistration_form.php",
          "lib/db/upgrade.php||lib/db/upgrade.php",
          "lib/db/upgradelib.php||lib/db/upgradelib.php",
          "lib/moodlelib.php||lib/moodlelib.php",
          "lib/tests/upgradelib_test.php||lib/tests/upgradelib_test.php",
          "theme/boost/lang/en/theme_boost.php||theme/boost/lang/en/theme_boost.php",
          "theme/classic/lang/en/theme_classic.php||theme/classic/lang/en/theme_classic.php",
          "version.php||version.php"
        ]
      },
      "candidate_patch_features": {
        "candidate_earlier_than_patch": 0,
        "same_branch_evolution": 1,
        "olp_code_files": {
          "patch": [
            "version.php||version.php"
          ],
          "candidate": [
            "version.php||version.php"
          ]
        }
      },
      "candidate_diff": {
        "admin/registration/confirmregistration.php||admin/registration/confirmregistration.php": [
          "File: admin/registration/confirmregistration.php -> admin/registration/confirmregistration.php"
        ],
        "admin/registration/forms.php||admin/registration/forms.php": [
          "File: admin/registration/forms.php -> admin/registration/forms.php",
          "--- Hunk 1 ---",
          "[Context before]",
          "33: defined('MOODLE_INTERNAL') || die();",
          "",
          "[Removed Lines]",
          "35: debugging('Support for alternative hubs has been removed from Moodle in 3.4. For communication with moodle.net ' .",
          "36:     'see lib/classes/hub/ .', DEBUG_DEVELOPER);",
          "",
          "[Added Lines]",
          "35: debugging('Support for alternative hubs has been removed from Moodle in 3.4.', DEBUG_DEVELOPER);",
          "",
          "---------------"
        ],
        "admin/registration/index.php||admin/registration/index.php": [
          "File: admin/registration/index.php -> admin/registration/index.php",
          "--- Hunk 1 ---",
          "[Context before]",
          "33: admin_externalpage_setup('registrationmoodleorg');",
          "37: if ($unregistration && \\core\\hub\\registration::is_registered()) {",
          "45:         if (!\\core\\hub\\registration::is_registered()) {",
          "46:             redirect(new moodle_url('/admin/registration/index.php'));",
          "47:         }",
          "48:     }",
          "50:     echo $OUTPUT->header();",
          "53:     echo $OUTPUT->footer();",
          "54:     exit;",
          "55: }",
          "",
          "[Removed Lines]",
          "35: $unregistration = optional_param('unregistration', 0, PARAM_INT);",
          "38:     $siteunregistrationform = new \\core\\hub\\site_unregistration_form();",
          "40:     if ($siteunregistrationform->is_cancelled()) {",
          "41:         redirect(new moodle_url('/admin/registration/index.php'));",
          "42:     } else if ($data = $siteunregistrationform->get_data()) {",
          "43:         \\core\\hub\\registration::unregister($data->unpublishalladvertisedcourses,",
          "44:             $data->unpublishalluploadedcourses);",
          "51:     echo $OUTPUT->heading(get_string('unregisterfrom', 'hub', 'Moodle.net'), 3, 'main');",
          "52:     $siteunregistrationform->display();",
          "",
          "[Added Lines]",
          "35: $unregistration = optional_param('unregistration', false, PARAM_BOOL);",
          "36: $confirm = optional_param('confirm', false, PARAM_BOOL);",
          "39:     if ($confirm) {",
          "40:         require_sesskey();",
          "41:         \\core\\hub\\registration::unregister(false, false);",
          "49:     echo $OUTPUT->confirm(",
          "50:         get_string('registerwithmoodleorgremove', 'core_hub'),",
          "51:         new moodle_url(new moodle_url('/admin/registration/index.php', ['unregistration' => 1, 'confirm' => 1])),",
          "52:         new moodle_url(new moodle_url('/admin/registration/index.php'))",
          "53:     );",
          "",
          "---------------",
          "--- Hunk 2 ---",
          "[Context before]",
          "106: if (\\core\\hub\\registration::is_registered()) {",
          "108: } else if ($isinitialregistration) {",
          "110: } else {",
          "112: }",
          "114: $renderer = $PAGE->get_renderer('core', 'admin');",
          "",
          "[Removed Lines]",
          "107:     echo $OUTPUT->heading(get_string('updatesite', 'hub', 'Moodle.net'));",
          "109:     echo $OUTPUT->heading(get_string('completeregistration', 'hub'));",
          "111:     echo $OUTPUT->heading(get_string('registerwithmoodleorg', 'admin'));",
          "",
          "[Added Lines]",
          "108:     echo $OUTPUT->heading(get_string('registerwithmoodleorgupdate', 'core_hub'));",
          "110:     echo $OUTPUT->heading(get_string('registerwithmoodleorgcomplete', 'core_hub'));",
          "112:     echo $OUTPUT->heading(get_string('registerwithmoodleorg', 'core_hub'));",
          "",
          "---------------",
          "--- Hunk 3 ---",
          "[Context before]",
          "119: if (\\core\\hub\\registration::is_registered()) {",
          "121:     $unregisterhuburl = new moodle_url(\"/admin/registration/index.php\", ['unregistration' => 1]);",
          "123: } else if ($isinitialregistration) {",
          "125: }",
          "126: echo $OUTPUT->footer();",
          "",
          "[Removed Lines]",
          "122:     echo html_writer::div(html_writer::link($unregisterhuburl, get_string('unregister', 'hub')), 'unregister');",
          "124:     echo html_writer::div(html_writer::link(new moodle_url($returnurl), get_string('skipregistration', 'hub')), 'skipregistration');",
          "",
          "[Added Lines]",
          "123:     echo html_writer::div(html_writer::link($unregisterhuburl, get_string('unregister', 'hub')), 'unregister mt-2');",
          "125:     echo html_writer::div(html_writer::link(new moodle_url($returnurl), get_string('skipregistration', 'hub')),",
          "126:         'skipregistration mt-2');",
          "",
          "---------------"
        ],
        "admin/registration/renewregistration.php||admin/registration/renewregistration.php": [
          "File: admin/registration/renewregistration.php -> admin/registration/renewregistration.php",
          "--- Hunk 1 ---",
          "[Context before]",
          "57: echo $OUTPUT->header();",
          "58: echo $OUTPUT->heading(get_string('renewregistration', 'hub'), 3, 'main');",
          "61: $deletedregmsg = get_string('previousregistrationdeleted', 'hub', $hublink);",
          "",
          "[Removed Lines]",
          "59: $hublink = html_writer::tag('a', 'Moodle.net', array('href' => HUB_MOODLEORGHUBURL));",
          "",
          "[Added Lines]",
          "59: $hublink = html_writer::tag('a', HUB_MOODLEORGHUBURL, array('href' => HUB_MOODLEORGHUBURL));",
          "",
          "---------------"
        ],
        "admin/renderer.php||admin/renderer.php": [
          "File: admin/renderer.php -> admin/renderer.php",
          "--- Hunk 1 ---",
          "[Context before]",
          "2114:     public function moodleorg_registration_message() {",
          "2116:     }",
          "2117: }",
          "",
          "[Removed Lines]",
          "2115:         return format_text(get_string('registermoodlenet', 'admin'), FORMAT_HTML, ['noclean' => true]);",
          "",
          "[Added Lines]",
          "2116:         $out = format_text(get_string('registerwithmoodleorginfo', 'core_hub'), FORMAT_MARKDOWN);",
          "2118:         $out .= html_writer::link(",
          "2119:             new moodle_url('/admin/settings.php', ['section' => 'moodleservices']),",
          "2120:             $this->output->pix_icon('i/info', '').' '.get_string('registerwithmoodleorginfoapp', 'core_hub'),",
          "2121:             ['class' => 'btn btn-link', 'role' => 'opener', 'target' => '_href']",
          "2122:         );",
          "2124:         $out .= html_writer::link(",
          "2125:             HUB_MOODLEORGHUBURL,",
          "2126:             $this->output->pix_icon('i/stats', '').' '.get_string('registerwithmoodleorginfostats', 'core_hub'),",
          "2127:             ['class' => 'btn btn-link', 'role' => 'opener', 'target' => '_href']",
          "2128:         );",
          "2130:         $out .= html_writer::link(",
          "2131:             HUB_MOODLEORGHUBURL.'/sites',",
          "2132:             $this->output->pix_icon('i/location', '').' '.get_string('registerwithmoodleorginfosites', 'core_hub'),",
          "2133:             ['class' => 'btn btn-link', 'role' => 'opener', 'target' => '_href']",
          "2134:         );",
          "2136:         return $this->output->box($out);",
          "",
          "---------------"
        ],
        "admin/tool/lp/classes/output/manage_competency_frameworks_page.php||admin/tool/lp/classes/output/manage_competency_frameworks_page.php": [
          "File: admin/tool/lp/classes/output/manage_competency_frameworks_page.php -> admin/tool/lp/classes/output/manage_competency_frameworks_page.php",
          "--- Hunk 1 ---",
          "[Context before]",
          "75:             );",
          "76:             $this->navigation[] = $addpage;",
          "77:             $competenciesrepository = new single_button(",
          "79:                 get_string('competencyframeworksrepository', 'tool_lp'),",
          "80:                 'get'",
          "81:             );",
          "",
          "[Removed Lines]",
          "78:                 new moodle_url('https://moodle.net/competencies'),",
          "",
          "[Added Lines]",
          "78:                 new moodle_url('https://archive.moodle.net/competencies'),",
          "",
          "---------------"
        ],
        "admin/tool/usertours/classes/manager.php||admin/tool/usertours/classes/manager.php": [
          "File: admin/tool/usertours/classes/manager.php -> admin/tool/usertours/classes/manager.php",
          "--- Hunk 1 ---",
          "[Context before]",
          "266:                 'title' => get_string('importtour', 'tool_usertours'),",
          "267:             ],",
          "268:             (object) [",
          "270:                 'linkproperties' => [",
          "271:                         'target' => '_blank',",
          "272:                     ],",
          "",
          "[Removed Lines]",
          "269:                 'link'  => new \\moodle_url('https://moodle.net/tours'),",
          "",
          "[Added Lines]",
          "269:                 'link'  => new \\moodle_url('https://archive.moodle.net/tours'),",
          "",
          "---------------"
        ],
        "index.php||index.php": [
          "File: index.php -> index.php",
          "--- Hunk 1 ---",
          "[Context before]",
          "92: course_view(context_course::instance(SITEID));",
          "106: $PAGE->set_pagetype('site-index');",
          "107: $PAGE->set_docs_path('');",
          "108: $editing = $PAGE->user_is_editing();",
          "",
          "[Removed Lines]",
          "95: if (file_exists($CFG->dirroot.'/local/hub/lib.php') and get_config('local_hub', 'hubenabled')) {",
          "96:     require_once($CFG->dirroot.'/local/hub/lib.php');",
          "97:     $hub = new local_hub();",
          "98:     $continue = $hub->display_homepage();",
          "101:     if (empty($continue)) {",
          "102:         exit;",
          "103:     }",
          "104: }",
          "",
          "[Added Lines]",
          "[None]",
          "",
          "---------------"
        ],
        "lang/en/admin.php||lang/en/admin.php": [
          "File: lang/en/admin.php -> lang/en/admin.php",
          "--- Hunk 1 ---",
          "[Context before]",
          "1013: $string['recaptchaprivatekey'] = 'ReCAPTCHA secret key';",
          "1014: $string['recaptchapublickey'] = 'ReCAPTCHA site key';",
          "1015: $string['register'] = 'Register your site';",
          "1021: $string['registration'] = 'Registration';",
          "1022: $string['registration_help'] = 'By registering:",
          "",
          "[Removed Lines]",
          "1016: $string['registermoodlenet'] = '<p>We\\'d love to stay in touch and provide you with important things for your Moodle site!</p><p>By registering:</p><ul><li>You can subscribe to receive notifications of new Moodle releases, security alerts and other important news.</li><li>You can access and activate mobile push notifications from your Moodle site through our free <a href=\"https://download.moodle.org/mobile/\">Moodle app</a>.</li><li>You are contributing to our <a href=\"https://moodle.net/stats/\">Moodle statistics</a> of the worldwide community, which help us improve Moodle and our community sites.</li><li>If you wish, your site can be included in the <a href=\"https://moodle.net/sites/\">list of registered Moodle sites</a> in your country.</li></ul>';",
          "1017: $string['registermoodleorg'] = 'When you register your site';",
          "1018: $string['registermoodleorgli1'] = 'You are added to a low-volume mailing list for important notifications such as security alerts and new releases of Moodle.';",
          "1019: $string['registermoodleorgli2'] = 'Statistics about your site will be added to the {$a} of the worldwide Moodle community.';",
          "1020: $string['registerwithmoodleorg'] = 'Register your site';",
          "",
          "[Added Lines]",
          "[None]",
          "",
          "---------------",
          "--- Hunk 2 ---",
          "[Context before]",
          "1434: $string['configallowblockstodock'] = 'If enabled and supported by the selected theme users can choose to move blocks to a special dock.';",
          "1436: $string['configuserquota'] = 'The maximum number of bytes that a user can store in their own private file area. {$a->bytes} bytes == {$a->displaysize}';",
          "",
          "[Removed Lines]",
          "[None]",
          "",
          "[Added Lines]",
          "1432: $string['registermoodlenet'] = '<p>We\\'d love to stay in touch and provide you with important things for your Moodle site!</p><p>By registering:</p><ul><li>You can subscribe to receive notifications of new Moodle releases, security alerts and other important news.</li><li>You can access and activate mobile push notifications from your Moodle site through our free <a href=\"https://download.moodle.org/mobile/\">Moodle app</a>.</li><li>You are contributing to our <a href=\"https://stats.moodle.org\">Moodle statistics</a> of the worldwide community, which help us improve Moodle and our community sites.</li><li>If you wish, your site can be included in the <a href=\"https://stats.moodle.org/sites/\">list of registered Moodle sites</a> in your country.</li></ul>';",
          "1433: $string['registermoodleorg'] = 'When you register your site';",
          "1434: $string['registermoodleorgli1'] = 'You are added to a low-volume mailing list for important notifications such as security alerts and new releases of Moodle.';",
          "1435: $string['registermoodleorgli2'] = 'Statistics about your site will be added to the {$a} of the worldwide Moodle community.';",
          "1436: $string['registerwithmoodleorg'] = 'Register your site';",
          "",
          "---------------"
        ],
        "lang/en/hub.php||lang/en/hub.php": [
          "File: lang/en/hub.php -> lang/en/hub.php",
          "--- Hunk 1 ---",
          "[Context before]",
          "33: $string['audienceadmins'] = 'Moodle administrators';",
          "34: $string['badgesnumber'] = 'Number of badges ({$a})';",
          "35: $string['communityremoved'] = 'That course link has been removed from your list';",
          "37: $string['confirmregistration'] = 'Confirm registration';",
          "38: $string['coursename'] = 'Name';",
          "39: $string['coursepublished'] = 'This course has been shared successfully on \\'{$a}\\'.';",
          "",
          "[Removed Lines]",
          "36: $string['completeregistration'] = 'Complete registration with Moodle.net';",
          "",
          "[Added Lines]",
          "[None]",
          "",
          "---------------",
          "--- Hunk 2 ---",
          "[Context before]",
          "55: $string['emailalert'] = 'Email notifications';",
          "56: $string['emailalert_help'] = 'If this is enabled the hub administrator will send you emails about security issues and other important news.';",
          "57: $string['enrollable'] = 'Enrollable';",
          "59: $string['errorws'] = '{$a}';",
          "60: $string['errorwstokenreset'] = '{$a}. Registration token on this site has been reset. You can now register your site again.';",
          "61: $string['errorregistrationupdate'] = 'An error occurred during registration update ({$a})';",
          "",
          "[Removed Lines]",
          "58: $string['errorotherhubsnotsupported'] = 'This page can no longer be used for registration with sites other than Moodle.net';",
          "",
          "[Added Lines]",
          "57: $string['errorotherhubsnotsupported'] = 'This page can no longer be used for registration with custom sites directories.';",
          "",
          "---------------",
          "--- Hunk 3 ---",
          "[Context before]",
          "86: $string['operation'] = 'Actions';",
          "87: $string['participantnumberaverage'] = 'Average number of participants ({$a})';",
          "88: $string['policyagreed'] = 'Privacy notice and data processing agreement';",
          "90: $string['postaladdress'] = 'Postal address';",
          "91: $string['postaladdress_help'] = 'Postal address of this site, or of the entity represented by this site.';",
          "92: $string['postsnumber'] = 'Number of posts ({$a})';",
          "",
          "[Removed Lines]",
          "89: $string['policyagreeddesc'] = 'I agree to the <a href=\"{$a}\" target=\"_blank\">Privacy notice and data processing agreement</a> for Moodle.net';",
          "",
          "[Added Lines]",
          "88: $string['policyagreeddesc'] = 'I agree to the <a href=\"{$a}\" target=\"_blank\">Privacy notice and data processing agreement</a>';",
          "",
          "---------------",
          "--- Hunk 4 ---",
          "[Context before]",
          "97: $string['registrationinfo'] = 'Registration information';",
          "98: $string['registereduserdevices'] = 'Number of users with registered mobile devices ({$a})';",
          "99: $string['registeredactiveuserdevices'] = 'Number of active users with registered mobile devices which are receiving notifications ({$a})';",
          "101: $string['registrationconfirmed'] = 'Site registration confirmed';",
          "102: $string['registrationconfirmedon'] = 'Thank you for registering your site. Registration information will be kept up to date by the \\'Site registration\\' scheduled task.';",
          "103: $string['renewregistration'] = 'Renew registration';",
          "",
          "[Removed Lines]",
          "100: $string['registersite'] = 'Register with {$a}';",
          "",
          "[Added Lines]",
          "99: $string['registerwithmoodleorg'] = 'Register your site';",
          "100: $string['registerwithmoodleorgupdate'] = 'Update your site registration';",
          "101: $string['registerwithmoodleorgcomplete'] = 'Complete your site registration';",
          "102: $string['registerwithmoodleorginfo'] = 'We\\'d love to stay in touch and provide you with important things for your Moodle site! By registering:",
          "108: $string['registerwithmoodleorginfoapp'] = 'About the Moodle app';",
          "109: $string['registerwithmoodleorginfostats'] = 'Moodle statistics';",
          "110: $string['registerwithmoodleorginfosites'] = 'Other sites in my country';",
          "111: $string['registerwithmoodleorgremove'] = 'You are going to unregister your site. If you continue, you will no longer have access to important notifications and security alerts. Your users will not be able to receive push notifications from your site to their Moodle mobile app. Are you sure you want to unregister your site?';",
          "",
          "---------------",
          "--- Hunk 5 ---",
          "[Context before]",
          "151: $string['subject_help'] = 'Select the main subject area which the course covers.';",
          "152: $string['type'] = 'Shared';",
          "153: $string['unregister'] = 'Unregister';",
          "156: $string['update'] = 'Update';",
          "158: $string['usedifferentemail'] = 'Use different email';",
          "161: $string['usersnumber'] = 'Number of users ({$a})';",
          "162: $string['wrongtoken'] = 'The registration failed for some unknown reason (network?). Please try again.';",
          "",
          "[Removed Lines]",
          "154: $string['unregisterfrom'] = 'Unregister from {$a}';",
          "155: $string['unregistrationerror'] = 'An error occurred when the site tried to unregister from Moodle.net: {$a}';",
          "157: $string['updatesite'] = 'Update registration on {$a}';",
          "159: $string['unregisterexplained'] = 'If the site with URL {$a} is registered on Moodle.net its registration will be removed.';",
          "160: $string['urlalreadyregistered'] = 'Your site seems to be already registered on Moodle.net, which means something has gone wrong. Please contact the Moodle.net administrator to reset your registration so you can try again.';",
          "",
          "[Added Lines]",
          "165: $string['unregistrationerror'] = 'An error occurred while attempting to unregister the site: {$a}';",
          "167: $string['updatesiteregistration'] = 'Update registration';",
          "169: $string['urlalreadyregistered'] = 'Your site seems to be already registered, which means something has gone wrong. Please contact the sites directory administrator to reset your registration so you can try again.';",
          "",
          "---------------",
          "--- Hunk 6 ---",
          "[Context before]",
          "168: $string['advertiseon'] = 'Share this course on {$a}';",
          "169: $string['readvertiseon'] = 'Update advertising information on {$a}';",
          "170: $string['advertisepublication_help'] = 'This course will be listed on Moodle.net as a course that people can enrol in and participate. Email-based self-registration should be enabled on the site and you need to enable self enrolment in this course.';",
          "171: $string['courseunpublished'] = 'The course {$a->courseshortname} is no longer shared on {$a->hubname}.';",
          "172: $string['courseurl'] = 'Course URL';",
          "173: $string['courseurl_help'] = 'It is the URL of your course. This URL is displayed as a link in a search result.';",
          "",
          "[Removed Lines]",
          "[None]",
          "",
          "[Added Lines]",
          "180: $string['completeregistration'] = 'Complete registration with Moodle.net';",
          "",
          "---------------",
          "--- Hunk 7 ---",
          "[Context before]",
          "201: $string['publisheremail_help'] = 'The publisher email address allows the hub administrator to alert the publisher about any changes to the status of the published course.';",
          "202: $string['publishername'] = 'Publisher';",
          "203: $string['publishername_help'] = 'The publisher is the person or organisation that is the official publisher of the course.  Unless you are publishing it on behalf of someone else, it will usually be you.';",
          "204: $string['removefromhub'] = 'Remove from Moodle.net';",
          "205: $string['screenshots'] = 'Screenshots';",
          "206: $string['screenshots_help'] = 'Any screenshots of the course will be displayed in search results.';",
          "",
          "[Removed Lines]",
          "[None]",
          "",
          "[Added Lines]",
          "214: $string['registersite'] = 'Register with {$a}';",
          "",
          "---------------",
          "--- Hunk 8 ---",
          "[Context before]",
          "219: $string['unpublishalluploadedcourses'] = 'Remove all courses that were shared on Moodle.net for people to download';",
          "220: $string['unpublishconfirmation'] = 'Do you really want to remove the course \"{$a->courseshortname}\" from \"{$a->hubname}\"';",
          "221: $string['unpublishcourse'] = 'Stop sharing {$a}';",
          "",
          "[Removed Lines]",
          "222: $string['updatestatus'] = 'Check it now.';",
          "",
          "[Added Lines]",
          "234: $string['updatestatus'] = 'Check it now.';",
          "235: $string['unregisterfrom'] = 'Unregister from {$a}';",
          "236: $string['unregisterexplained'] = 'If the site with URL {$a} is registered, then its registration will be removed.';",
          "",
          "---------------"
        ],
        "lib/classes/hub/api.php||lib/classes/hub/api.php": [
          "File: lib/classes/hub/api.php -> lib/classes/hub/api.php"
        ],
        "lib/classes/hub/registration.php||lib/classes/hub/registration.php": [
          "File: lib/classes/hub/registration.php -> lib/classes/hub/registration.php",
          "--- Hunk 1 ---",
          "[Context before]",
          "158:         require_once($CFG->dirroot . \"/course/lib.php\");",
          "160:         $siteinfo = array();",
          "162:         foreach (self::FORM_FIELDS as $field) {",
          "164:             if ($siteinfo[$field] === false) {",
          "165:                 $siteinfo[$field] = array_key_exists($field, $defaults) ? $defaults[$field] : null;",
          "166:             }",
          "",
          "[Removed Lines]",
          "161:         $cleanhuburl = clean_param(HUB_MOODLEORGHUBURL, PARAM_ALPHANUMEXT);",
          "163:             $siteinfo[$field] = get_config('hub', 'site_'.$field.'_' . $cleanhuburl);",
          "",
          "[Added Lines]",
          "162:             $siteinfo[$field] = get_config('hub', 'site_'.$field);",
          "",
          "---------------",
          "--- Hunk 2 ---",
          "[Context before]",
          "266:     public static function save_site_info($formdata) {",
          "268:         foreach (self::FORM_FIELDS as $field) {",
          "270:         }",
          "274:     }",
          "",
          "[Removed Lines]",
          "267:         $cleanhuburl = clean_param(HUB_MOODLEORGHUBURL, PARAM_ALPHANUMEXT);",
          "269:             set_config('site_' . $field . '_' . $cleanhuburl, $formdata->$field, 'hub');",
          "273:         set_config('site_regupdateversion_' . $cleanhuburl, max(array_keys(self::CONFIRM_NEW_FIELDS)), 'hub');",
          "",
          "[Added Lines]",
          "267:             set_config('site_' . $field, $formdata->$field, 'hub');",
          "271:         set_config('site_regupdateversion', max(array_keys(self::CONFIRM_NEW_FIELDS)), 'hub');",
          "",
          "---------------",
          "--- Hunk 3 ---",
          "[Context before]",
          "397:             $hub->token = get_site_identifier();",
          "398:             $hub->secret = $hub->token;",
          "399:             $hub->huburl = HUB_MOODLEORGHUBURL;",
          "401:             $hub->confirmed = 0;",
          "402:             $hub->timemodified = time();",
          "403:             $hub->id = $DB->insert_record('registration_hubs', $hub);",
          "",
          "[Removed Lines]",
          "400:             $hub->hubname = 'Moodle.net';",
          "",
          "[Added Lines]",
          "398:             $hub->hubname = 'moodle';",
          "",
          "---------------",
          "--- Hunk 4 ---",
          "[Context before]",
          "555:             return $fieldsneedconfirm;",
          "556:         }",
          "560:         foreach (self::CONFIRM_NEW_FIELDS as $version => $fields) {",
          "561:             if ($version > $lastupdated) {",
          "562:                 $fieldsneedconfirm = array_merge($fieldsneedconfirm, $fields);",
          "",
          "[Removed Lines]",
          "558:         $cleanhuburl = clean_param(HUB_MOODLEORGHUBURL, PARAM_ALPHANUMEXT);",
          "559:         $lastupdated = (int)get_config('hub', 'site_regupdateversion_' . $cleanhuburl);",
          "",
          "[Added Lines]",
          "556:         $lastupdated = (int)get_config('hub', 'site_regupdateversion');",
          "",
          "---------------"
        ],
        "lib/classes/hub/site_registration_form.php||lib/classes/hub/site_registration_form.php": [
          "File: lib/classes/hub/site_registration_form.php -> lib/classes/hub/site_registration_form.php",
          "--- Hunk 1 ---",
          "[Context before]",
          "161:         $mform->addElement('static', 'urlstring', get_string('siteurl', 'hub'), $siteinfo['url']);",
          "162:         $mform->addHelpButton('urlstring', 'siteurl', 'hub');",
          "165:         $mform->addElement('static', 'siteinfosummary', get_string('sendfollowinginfo', 'hub'), registration::get_stats_summary($siteinfo));",
          "168:         if (registration::is_registered()) {",
          "170:             $mform->addElement('hidden', 'update', true);",
          "171:             $mform->setType('update', PARAM_BOOL);",
          "172:         } else {",
          "174:         }",
          "176:         $this->add_action_buttons(false, $buttonlabel);",
          "",
          "[Removed Lines]",
          "169:             $buttonlabel = get_string('updatesite', 'hub', 'Moodle.net');",
          "173:             $buttonlabel = get_string('registersite', 'hub', 'Moodle.net');",
          "",
          "[Added Lines]",
          "169:             $buttonlabel = get_string('updatesiteregistration', 'core_hub');",
          "173:             $buttonlabel = get_string('register', 'core_admin');",
          "",
          "---------------"
        ],
        "lib/classes/hub/site_unregistration_form.php||lib/classes/hub/site_unregistration_form.php": [
          "File: lib/classes/hub/site_unregistration_form.php -> lib/classes/hub/site_unregistration_form.php",
          "--- Hunk 1 ---",
          "[Context before]",
          "[No context available]",
          "",
          "[Removed Lines]",
          "[None]",
          "",
          "[Added Lines]",
          "[None]",
          "",
          "---------------"
        ],
        "lib/db/upgrade.php||lib/db/upgrade.php": [
          "File: lib/db/upgrade.php -> lib/db/upgrade.php",
          "--- Hunk 1 ---",
          "[Context before]",
          "3556:         upgrade_main_savepoint(true, 2019092700.01);",
          "3557:     }",
          "3559:     return true;",
          "3560: }",
          "",
          "[Removed Lines]",
          "[None]",
          "",
          "[Added Lines]",
          "3559:     if ($oldversion < 2019100800.02) {",
          "3561:         $DB->execute(\"UPDATE {registration_hubs}",
          "3562:                          SET hubname = ?, huburl = ?",
          "3563:                        WHERE huburl = ?\", ['moodle', 'https://stats.moodle.org', 'https://moodle.net']);",
          "3566:         $hubconfig = get_config('hub');",
          "3568:         if (!empty($hubconfig)) {",
          "3569:             foreach (upgrade_convert_hub_config_site_param_names($hubconfig, 'https://moodle.net') as $name => $value) {",
          "3570:                 set_config($name, $value, 'hub');",
          "3571:             }",
          "3572:         }",
          "3574:         upgrade_main_savepoint(true, 2019100800.02);",
          "3575:     }",
          "",
          "---------------"
        ],
        "lib/db/upgradelib.php||lib/db/upgradelib.php": [
          "File: lib/db/upgradelib.php -> lib/db/upgradelib.php",
          "--- Hunk 1 ---",
          "[Context before]",
          "609:         $DB->execute($updatesql, $params + ['modelid' => $model->id]);",
          "610:     }",
          "",
          "[Removed Lines]",
          "611: }",
          "",
          "[Added Lines]",
          "620: function upgrade_convert_hub_config_site_param_names(stdClass $hubconfig, string $huburl): stdClass {",
          "622:     $cleanhuburl = clean_param($huburl, PARAM_ALPHANUMEXT);",
          "623:     $converted = [];",
          "625:     foreach ($hubconfig as $oldname => $value) {",
          "626:         if (preg_match('/^site_([a-z]+)([A-Za-z0-9_-]*)/', $oldname, $matches)) {",
          "627:             $newname = 'site_'.$matches[1];",
          "629:             if ($oldname === $newname) {",
          "631:                 $converted[$newname] = $value;",
          "633:             } else if (!array_key_exists($newname, $converted)) {",
          "635:                 $converted[$newname] = $value;",
          "636:                 $converted[$oldname] = null;",
          "638:             } else if ($matches[2] === '_'.$cleanhuburl) {",
          "640:                 $converted[$newname] = $value;",
          "641:                 $converted[$oldname] = null;",
          "643:             } else {",
          "645:                 $converted[$oldname] = null;",
          "646:             }",
          "648:         } else {",
          "650:             $converted[$oldname] = $value;",
          "651:         }",
          "652:     }",
          "654:     return (object) $converted;",
          "655: }",
          "",
          "---------------"
        ],
        "lib/moodlelib.php||lib/moodlelib.php": [
          "File: lib/moodlelib.php -> lib/moodlelib.php",
          "--- Hunk 1 ---",
          "[Context before]",
          "487: define('HOMEPAGE_USER', 2);",
          "",
          "[Removed Lines]",
          "492: define('HUB_HUBDIRECTORYURL', \"https://hubdirectory.moodle.org\");",
          "498: define('HUB_MOODLEORGHUBURL', \"https://moodle.net\");",
          "499: define('HUB_OLDMOODLEORGHUBURL', \"http://hub.moodle.org\");",
          "",
          "[Added Lines]",
          "492: defined('HUB_MOODLEORGHUBURL') || define('HUB_MOODLEORGHUBURL', 'https://stats.moodle.org');",
          "",
          "---------------"
        ],
        "lib/tests/upgradelib_test.php||lib/tests/upgradelib_test.php": [
          "File: lib/tests/upgradelib_test.php -> lib/tests/upgradelib_test.php",
          "--- Hunk 1 ---",
          "[Context before]",
          "1124:         $this->assertEquals(1, $DB->count_records('analytics_prediction_actions',",
          "1125:             ['actionname' => \\core_analytics\\prediction::ACTION_INCORRECTLY_FLAGGED]));",
          "1126:     }",
          "1127: }",
          "",
          "[Removed Lines]",
          "[None]",
          "",
          "[Added Lines]",
          "1131:     public function test_upgrade_convert_hub_config_site_param_names() {",
          "1133:         $config = (object) [",
          "1135:             'site_name_httpsmoodlenet' => 'Foo Site',",
          "1136:             'site_language_httpsmoodlenet' => 'en',",
          "1137:             'site_emailalert_httpsmoodlenet' => 1,",
          "1139:             'site_name_httphubmoodleorg' => 'Bar Site',",
          "1140:             'site_description_httphubmoodleorg' => 'Old description',",
          "1142:             'site_emailalert' => 0,",
          "1144:             'custom' => 'Do not touch this',",
          "1146:             'site_foo_httpfirsthuborg' => 'First',",
          "1147:             'site_foo_httpanotherhubcom' => 'Another',",
          "1148:             'site_foo_httpyetanotherhubcom' => 'Yet another',",
          "1150:             'site_bar_httpfirsthuborg' => 'First',",
          "1151:             'site_bar_httpanotherhubcom' => 'Another',",
          "1152:             'site_bar_httpsmoodlenet' => 'One hub to rule them all!',",
          "1153:             'site_bar_httpyetanotherhubcom' => 'Yet another',",
          "1154:         ];",
          "1156:         $converted = upgrade_convert_hub_config_site_param_names($config, 'https://moodle.net');",
          "1159:         $this->assertSame($converted->site_name, 'Foo Site');",
          "1160:         $this->assertSame($converted->site_bar, 'One hub to rule them all!');",
          "1161:         $this->assertNull($converted->site_name_httpsmoodlenet);",
          "1162:         $this->assertNull($converted->site_bar_httpfirsthuborg);",
          "1163:         $this->assertNull($converted->site_bar_httpanotherhubcom);",
          "1164:         $this->assertNull($converted->site_bar_httpyetanotherhubcom);",
          "1166:         $this->assertSame($converted->site_foo, 'First');",
          "1167:         $this->assertNull($converted->site_foo_httpfirsthuborg);",
          "1168:         $this->assertNull($converted->site_foo_httpanotherhubcom);",
          "1169:         $this->assertNull($converted->site_foo_httpyetanotherhubcom);",
          "1171:         $this->assertSame($converted->site_emailalert, 0);",
          "1173:         $this->assertSame($converted->custom, 'Do not touch this');",
          "1174:     }",
          "",
          "---------------"
        ],
        "theme/boost/lang/en/theme_boost.php||theme/boost/lang/en/theme_boost.php": [
          "File: theme/boost/lang/en/theme_boost.php -> theme/boost/lang/en/theme_boost.php",
          "--- Hunk 1 ---",
          "[Context before]",
          "40: $string['nobootswatch'] = 'None';",
          "41: $string['pluginname'] = 'Boost';",
          "42: $string['presetfiles'] = 'Additional theme preset files';",
          "44: $string['preset'] = 'Theme preset';",
          "45: $string['preset_desc'] = 'Pick a preset to broadly change the look of the theme.';",
          "46: $string['privacy:metadata'] = 'The Boost theme does not store any personal data about any user.';",
          "",
          "[Removed Lines]",
          "43: $string['presetfiles_desc'] = 'Preset files can be used to dramatically alter the appearance of the theme. See <a href=\"https://docs.moodle.org/dev/Boost_Presets\">Boost presets</a> for information on creating and sharing your own preset files, and see the <a href=\"https://moodle.net/boost\">Presets repository</a> for presets that others have shared.';",
          "",
          "[Added Lines]",
          "43: $string['presetfiles_desc'] = 'Preset files can be used to dramatically alter the appearance of the theme. See <a href=\"https://docs.moodle.org/dev/Boost_Presets\">Boost presets</a> for information on creating and sharing your own preset files, and see the <a href=\"https://archive.moodle.net/boost\">Presets repository</a> for presets that others have shared.';",
          "",
          "---------------"
        ],
        "theme/classic/lang/en/theme_classic.php||theme/classic/lang/en/theme_classic.php": [
          "File: theme/classic/lang/en/theme_classic.php -> theme/classic/lang/en/theme_classic.php",
          "--- Hunk 1 ---",
          "[Context before]",
          "32: $string['navbardarkdesc'] = 'Swaps text and background colours for the navbar at the top of the page between dark and light.';",
          "33: $string['pluginname'] = 'Classic';",
          "34: $string['presetfiles'] = 'Additional theme preset files';",
          "36: $string['preset'] = 'Theme preset';",
          "37: $string['preset_desc'] = 'Pick a preset to broadly change the look of the theme.';",
          "38: $string['region-side-post'] = 'Right';",
          "",
          "[Removed Lines]",
          "35: $string['presetfiles_desc'] = 'Preset files can be used to dramatically alter the appearance of the theme. See <a href=https://docs.moodle.org/dev/Boost_Presets>Boost presets</a> for information on creating and sharing your own preset files, and see the <a href=https://moodle.net/boost>Presets repository</a> for presets that others have shared.';",
          "",
          "[Added Lines]",
          "35: $string['presetfiles_desc'] = 'Preset files can be used to dramatically alter the appearance of the theme. See <a href=\"https://docs.moodle.org/dev/Boost_Presets\">Boost presets</a> for information on creating and sharing your own preset files, and see the <a href=\"https://archive.moodle.net/boost\">Presets repository</a> for presets that others have shared.';",
          "",
          "---------------"
        ],
        "version.php||version.php": [
          "File: version.php -> version.php",
          "--- Hunk 1 ---",
          "[Context before]",
          "30: defined('MOODLE_INTERNAL') || die();",
          "",
          "[Removed Lines]",
          "32: $version  = 2019100800.01;              // YYYYMMDD      = weekly release date of this DEV branch.",
          "",
          "[Added Lines]",
          "32: $version  = 2019100800.02;              // YYYYMMDD      = weekly release date of this DEV branch.",
          "",
          "---------------"
        ]
      }
    },
    {
      "candidate_hash": "f3c2624fbc406a2a87ae451e057924339b246ddd",
      "candidate_info": {
        "commit_hash": "f3c2624fbc406a2a87ae451e057924339b246ddd",
        "repo": "moodle/moodle",
        "commit_url": "https://github.com/moodle/moodle/commit/f3c2624fbc406a2a87ae451e057924339b246ddd",
        "files": [
          "version.php"
        ],
        "message": "weekly release 3.7.1+",
        "before_after_code_files": [
          "version.php||version.php"
        ]
      },
      "candidate_patch_features": {
        "candidate_earlier_than_patch": 0,
        "same_branch_evolution": 1,
        "olp_code_files": {
          "patch": [
            "version.php||version.php"
          ],
          "candidate": [
            "version.php||version.php"
          ]
        }
      },
      "candidate_diff": {
        "version.php||version.php": [
          "File: version.php -> version.php",
          "--- Hunk 1 ---",
          "[Context before]",
          "30: defined('MOODLE_INTERNAL') || die();",
          "38: $branch   = '37';                       // This version's branch.",
          "39: $maturity = MATURITY_STABLE;             // This version's maturity level.",
          "",
          "[Removed Lines]",
          "32: $version  = 2019052001.09;              // 20190520      = branching date YYYYMMDD - do not modify!",
          "36: $release  = '3.7.1+ (Build: 20190824)'; // Human-friendly version name",
          "",
          "[Added Lines]",
          "32: $version  = 2019052001.10;              // 20190520      = branching date YYYYMMDD - do not modify!",
          "36: $release  = '3.7.1+ (Build: 20190830)'; // Human-friendly version name",
          "",
          "---------------"
        ]
      }
    },
    {
      "candidate_hash": "932078700567451fc8844996766bd1403ab54a11",
      "candidate_info": {
        "commit_hash": "932078700567451fc8844996766bd1403ab54a11",
        "repo": "moodle/moodle",
        "commit_url": "https://github.com/moodle/moodle/commit/932078700567451fc8844996766bd1403ab54a11",
        "files": [
          "admin/cli/install.php",
          "admin/tool/mobile/tests/externallib_test.php",
          "install.php",
          "lib/db/upgrade.php",
          "lib/phpunit/tests/basic_test.php",
          "lib/setup.php",
          "lib/tests/outputcomponents_test.php",
          "lib/upgrade.txt",
          "version.php"
        ],
        "message": "MDL-46267 core: Remove $CFG->httpswwwroot\n\n* It's unnecessary since $CFG->loginhttps has already been removed and\n  it's no longer being used in core anymore.",
        "before_after_code_files": [
          "admin/cli/install.php||admin/cli/install.php",
          "admin/tool/mobile/tests/externallib_test.php||admin/tool/mobile/tests/externallib_test.php",
          "install.php||install.php",
          "lib/db/upgrade.php||lib/db/upgrade.php",
          "lib/phpunit/tests/basic_test.php||lib/phpunit/tests/basic_test.php",
          "lib/setup.php||lib/setup.php",
          "lib/tests/outputcomponents_test.php||lib/tests/outputcomponents_test.php",
          "version.php||version.php"
        ]
      },
      "candidate_patch_features": {
        "candidate_earlier_than_patch": 0,
        "same_branch_evolution": 1,
        "olp_code_files": {
          "patch": [
            "version.php||version.php"
          ],
          "candidate": [
            "version.php||version.php"
          ]
        }
      },
      "candidate_diff": {
        "admin/cli/install.php||admin/cli/install.php": [
          "File: admin/cli/install.php -> admin/cli/install.php",
          "--- Hunk 1 ---",
          "[Context before]",
          "157: $CFG->dirroot              = dirname(dirname(__DIR__));",
          "158: $CFG->libdir               = \"$CFG->dirroot/lib\";",
          "159: $CFG->wwwroot              = \"http://localhost\";",
          "161: $CFG->docroot              = 'http://docs.moodle.org';",
          "162: $CFG->running_installer    = true;",
          "163: $CFG->early_install_lang   = true;",
          "",
          "[Removed Lines]",
          "160: $CFG->httpswwwroot         = $CFG->wwwroot;",
          "",
          "[Added Lines]",
          "[None]",
          "",
          "---------------",
          "--- Hunk 2 ---",
          "[Context before]",
          "389:     }",
          "390: }",
          "391: $CFG->wwwroot       = $wwwroot;",
          "396: $CFG->dataroot = $options['dataroot'];",
          "",
          "[Removed Lines]",
          "392: $CFG->httpswwwroot  = $CFG->wwwroot;",
          "",
          "[Added Lines]",
          "[None]",
          "",
          "---------------"
        ],
        "admin/tool/mobile/tests/externallib_test.php||admin/tool/mobile/tests/externallib_test.php": [
          "File: admin/tool/mobile/tests/externallib_test.php -> admin/tool/mobile/tests/externallib_test.php",
          "--- Hunk 1 ---",
          "[Context before]",
          "72:         $expected = array(",
          "73:             'wwwroot' => $CFG->wwwroot,",
          "75:             'sitename' => external_format_string($SITE->fullname, $context->id, true),",
          "76:             'guestlogin' => $CFG->guestloginbutton,",
          "77:             'rememberusername' => $CFG->rememberusername,",
          "",
          "[Removed Lines]",
          "74:             'httpswwwroot' => $CFG->httpswwwroot,",
          "",
          "[Added Lines]",
          "74:             'httpswwwroot' => $CFG->wwwroot,",
          "",
          "---------------"
        ],
        "install.php||install.php": [
          "File: install.php -> install.php",
          "--- Hunk 1 ---",
          "[Context before]",
          "160: $CFG->dirroot              = __DIR__;",
          "161: $CFG->libdir               = \"$CFG->dirroot/lib\";",
          "162: $CFG->wwwroot              = install_guess_wwwroot(); // can not be changed - ppl must use the real address when installing",
          "164: $CFG->dataroot             = $config->dataroot;",
          "165: $CFG->tempdir              = $CFG->dataroot.'/temp';",
          "166: $CFG->backuptempdir        = $CFG->tempdir.'/backup';",
          "",
          "[Removed Lines]",
          "163: $CFG->httpswwwroot         = $CFG->wwwroot;",
          "",
          "[Added Lines]",
          "[None]",
          "",
          "---------------"
        ],
        "lib/db/upgrade.php||lib/db/upgrade.php": [
          "File: lib/db/upgrade.php -> lib/db/upgrade.php",
          "--- Hunk 1 ---",
          "[Context before]",
          "3416:         upgrade_main_savepoint(true, 2019070400.01);",
          "3417:     }",
          "3419:     return true;",
          "3420: }",
          "",
          "[Removed Lines]",
          "[None]",
          "",
          "[Added Lines]",
          "3419:     if ($oldversion < 2019072200.00) {",
          "3420:         unset_config('httpswwwroot');",
          "3422:         upgrade_main_savepoint(true, 2019072200.00);",
          "3423:     }",
          "",
          "---------------"
        ],
        "lib/phpunit/tests/basic_test.php||lib/phpunit/tests/basic_test.php": [
          "File: lib/phpunit/tests/basic_test.php -> lib/phpunit/tests/basic_test.php",
          "--- Hunk 1 ---",
          "[Context before]",
          "53:     public function test_bootstrap() {",
          "54:         global $CFG;",
          "58:         $this->assertEquals($CFG->prefix, $CFG->phpunit_prefix);",
          "59:     }",
          "",
          "[Removed Lines]",
          "56:         $this->assertTrue(isset($CFG->httpswwwroot));",
          "57:         $this->assertEquals($CFG->httpswwwroot, $CFG->wwwroot);",
          "",
          "[Added Lines]",
          "[None]",
          "",
          "---------------"
        ],
        "lib/setup.php||lib/setup.php": [
          "File: lib/setup.php -> lib/setup.php",
          "--- Hunk 1 ---",
          "[Context before]",
          "535: global $SCRIPT;",
          "541: require_once($CFG->libdir .'/setuplib.php');        // Functions that MUST be loaded first",
          "543: if (NO_OUTPUT_BUFFERING) {",
          "",
          "[Removed Lines]",
          "539: $CFG->httpswwwroot = $CFG->wwwroot;",
          "",
          "[Added Lines]",
          "[None]",
          "",
          "---------------"
        ],
        "lib/tests/outputcomponents_test.php||lib/tests/outputcomponents_test.php": [
          "File: lib/tests/outputcomponents_test.php -> lib/tests/outputcomponents_test.php"
        ],
        "version.php||version.php": [
          "File: version.php -> version.php",
          "--- Hunk 1 ---",
          "[Context before]",
          "30: defined('MOODLE_INTERNAL') || die();",
          "",
          "[Removed Lines]",
          "32: $version  = 2019071800.00;              // YYYYMMDD      = weekly release date of this DEV branch.",
          "",
          "[Added Lines]",
          "32: $version  = 2019072200.00;              // YYYYMMDD      = weekly release date of this DEV branch.",
          "",
          "---------------"
        ]
      }
    }
  ]
}