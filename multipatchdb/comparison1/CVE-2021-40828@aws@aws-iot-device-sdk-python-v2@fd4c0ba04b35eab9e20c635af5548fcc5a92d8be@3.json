{
  "cve_id": "CVE-2021-40828",
  "cve_desc": "Connections initialized by the AWS IoT Device SDK v2 for Java (versions prior to 1.3.3), Python (versions prior to 1.5.18), C++ (versions prior to 1.12.7) and Node.js (versions prior to 1.5.1) did not verify server certificate hostname during TLS handshake when overriding Certificate Authorities (CA) in their trust stores on Windows. This issue has been addressed in aws-c-io submodule versions 0.9.13 onward. This issue affects: Amazon Web Services AWS IoT Device SDK v2 for Java versions prior to 1.3.3 on Microsoft Windows. Amazon Web Services AWS IoT Device SDK v2 for Python versions prior to 1.5.18 on Microsoft Windows. Amazon Web Services AWS IoT Device SDK v2 for C++ versions prior to 1.12.7 on Microsoft Windows. Amazon Web Services AWS IoT Device SDK v2 for Node.js versions prior to 1.5.3 on Microsoft Windows.",
  "repo": "aws/aws-iot-device-sdk-python-v2",
  "patch_hash": "fd4c0ba04b35eab9e20c635af5548fcc5a92d8be",
  "patch_info": {
    "commit_hash": "fd4c0ba04b35eab9e20c635af5548fcc5a92d8be",
    "repo": "aws/aws-iot-device-sdk-python-v2",
    "commit_url": "https://github.com/aws/aws-iot-device-sdk-python-v2/commit/fd4c0ba04b35eab9e20c635af5548fcc5a92d8be",
    "files": [
      "setup.py"
    ],
    "message": "Update to latest CRT (#208)\n\n* On Windows, always perform an SNI check even with an overridden root CA\n* On Windows, properly honor the verify_peer = false option\n* Fix instability with raspberry PI and input stream seeking by doing a better job of modeling file seek offset type and size.",
    "before_after_code_files": [
      "setup.py||setup.py"
    ]
  },
  "patch_diff": {
    "setup.py||setup.py": [
      "File: setup.py -> setup.py",
      "--- Hunk 1 ---",
      "[Context before]",
      "40:         \"Operating System :: OS Independent\",",
      "41:     ],",
      "42:     install_requires=[",
      "44:     ],",
      "45:     python_requires='>=3.6',",
      "46: )",
      "",
      "[Removed Lines]",
      "43:         'awscrt==0.11.20',",
      "",
      "[Added Lines]",
      "43:         'awscrt==0.11.22',",
      "",
      "---------------"
    ]
  },
  "candidates": [
    {
      "candidate_hash": "a97b97f63267d68b3502bfdba81b7c85941de030",
      "candidate_info": {
        "commit_hash": "a97b97f63267d68b3502bfdba81b7c85941de030",
        "repo": "aws/aws-iot-device-sdk-python-v2",
        "commit_url": "https://github.com/aws/aws-iot-device-sdk-python-v2/commit/a97b97f63267d68b3502bfdba81b7c85941de030",
        "files": [
          "setup.py"
        ],
        "message": "Fix raspberry pi installs (#177)\n\nInstalls from source were broken due to missing files.\nInstalls from source were broken on machines with small amounts of RAM.",
        "before_after_code_files": [
          "setup.py||setup.py"
        ]
      },
      "candidate_patch_features": {
        "candidate_earlier_than_patch": 1,
        "same_branch_evolution": 1,
        "olp_code_files": {
          "patch": [
            "setup.py||setup.py"
          ],
          "candidate": [
            "setup.py||setup.py"
          ]
        }
      },
      "candidate_diff": {
        "setup.py||setup.py": [
          "File: setup.py -> setup.py",
          "--- Hunk 1 ---",
          "[Context before]",
          "19:         \"Operating System :: OS Independent\",",
          "20:     ],",
          "21:     install_requires=[",
          "23:     ],",
          "24:     python_requires='>=3.5',",
          "25: )",
          "",
          "[Removed Lines]",
          "22:         'awscrt==0.11.4',",
          "",
          "[Added Lines]",
          "22:         'awscrt==0.11.8',",
          "",
          "---------------"
        ]
      }
    },
    {
      "candidate_hash": "53a75c3ffa008e093c0904e88b8e3cbfd4c90f00",
      "candidate_info": {
        "commit_hash": "53a75c3ffa008e093c0904e88b8e3cbfd4c90f00",
        "repo": "aws/aws-iot-device-sdk-python-v2",
        "commit_url": "https://github.com/aws/aws-iot-device-sdk-python-v2/commit/53a75c3ffa008e093c0904e88b8e3cbfd4c90f00",
        "files": [
          "setup.py"
        ],
        "message": "Improved support for Apple Silicon aka M1 aka arm64 aka Universal2 (#314)\n\nUse latest version of awscrt, which has wheels that work properly on M1 macs",
        "before_after_code_files": [
          "setup.py||setup.py"
        ]
      },
      "candidate_patch_features": {
        "candidate_earlier_than_patch": 0,
        "same_branch_evolution": 1,
        "olp_code_files": {
          "patch": [
            "setup.py||setup.py"
          ],
          "candidate": [
            "setup.py||setup.py"
          ]
        }
      },
      "candidate_diff": {
        "setup.py||setup.py": [
          "File: setup.py -> setup.py",
          "--- Hunk 1 ---",
          "[Context before]",
          "40:         \"Operating System :: OS Independent\",",
          "41:     ],",
          "42:     install_requires=[",
          "44:     ],",
          "45:     python_requires='>=3.6',",
          "46: )",
          "",
          "[Removed Lines]",
          "43:         'awscrt==0.13.9',",
          "",
          "[Added Lines]",
          "43:         'awscrt==0.13.11',",
          "",
          "---------------"
        ]
      }
    },
    {
      "candidate_hash": "4d03f3ff05c2a1ab717ef742bbed6652f2a1e631",
      "candidate_info": {
        "commit_hash": "4d03f3ff05c2a1ab717ef742bbed6652f2a1e631",
        "repo": "aws/aws-iot-device-sdk-python-v2",
        "commit_url": "https://github.com/aws/aws-iot-device-sdk-python-v2/commit/4d03f3ff05c2a1ab717ef742bbed6652f2a1e631",
        "files": [
          "setup.py"
        ],
        "message": "Update CRT to pull in ECS credentials provider fix (#273)",
        "before_after_code_files": [
          "setup.py||setup.py"
        ]
      },
      "candidate_patch_features": {
        "candidate_earlier_than_patch": 0,
        "same_branch_evolution": 1,
        "olp_code_files": {
          "patch": [
            "setup.py||setup.py"
          ],
          "candidate": [
            "setup.py||setup.py"
          ]
        }
      },
      "candidate_diff": {
        "setup.py||setup.py": [
          "File: setup.py -> setup.py",
          "--- Hunk 1 ---",
          "[Context before]",
          "40:         \"Operating System :: OS Independent\",",
          "41:     ],",
          "42:     install_requires=[",
          "44:     ],",
          "45:     python_requires='>=3.6',",
          "46: )",
          "",
          "[Removed Lines]",
          "43:         'awscrt==0.13.0',",
          "",
          "[Added Lines]",
          "43:         'awscrt==0.13.2',",
          "",
          "---------------"
        ]
      }
    },
    {
      "candidate_hash": "15a25be7d18ab61543a7937828bc9592e3c44493",
      "candidate_info": {
        "commit_hash": "15a25be7d18ab61543a7937828bc9592e3c44493",
        "repo": "aws/aws-iot-device-sdk-python-v2",
        "commit_url": "https://github.com/aws/aws-iot-device-sdk-python-v2/commit/15a25be7d18ab61543a7937828bc9592e3c44493",
        "files": [
          "setup.py"
        ],
        "message": "update awscrt to 0.8.0 (#100)\n\n-    API CHANGE: awscrt.auth.AwsSigningConfig.signed_body_value is now a string instead of an enum.\n -   API CHANGE: Added check for iOS platform\n -   BUGFIX: websocket no longer hangs if CLOSE frame cannot be sent.\n  -  BUGFIX: Fixes a crash when shutting down an mqtt connection with an incomplete request with no callback from aws-c-mqtt\n\n\nCo-authored-by: Dengke Tang <dengket@amazon.com>",
        "before_after_code_files": [
          "setup.py||setup.py"
        ]
      },
      "candidate_patch_features": {
        "candidate_earlier_than_patch": 1,
        "same_branch_evolution": 1,
        "olp_code_files": {
          "patch": [
            "setup.py||setup.py"
          ],
          "candidate": [
            "setup.py||setup.py"
          ]
        }
      },
      "candidate_diff": {
        "setup.py||setup.py": [
          "File: setup.py -> setup.py",
          "--- Hunk 1 ---",
          "[Context before]",
          "13:     url='https://github.com/aws/aws-iot-device-sdk-python-v2',",
          "14:     packages = ['awsiot'],",
          "15:     install_requires=[",
          "17:         'futures;python_version<\"3.2\"',",
          "18:         'typing;python_version<\"3.5\"',",
          "19:     ],",
          "",
          "[Removed Lines]",
          "16:         'awscrt==0.6.2',",
          "",
          "[Added Lines]",
          "16:         'awscrt==0.8.0',",
          "",
          "---------------"
        ]
      }
    },
    {
      "candidate_hash": "80f1a9d427f5107a5db632231757173b7290a051",
      "candidate_info": {
        "commit_hash": "80f1a9d427f5107a5db632231757173b7290a051",
        "repo": "aws/aws-iot-device-sdk-python-v2",
        "commit_url": "https://github.com/aws/aws-iot-device-sdk-python-v2/commit/80f1a9d427f5107a5db632231757173b7290a051",
        "files": [
          "setup.py"
        ],
        "message": "latest-awscrt (#158)",
        "before_after_code_files": [
          "setup.py||setup.py"
        ]
      },
      "candidate_patch_features": {
        "candidate_earlier_than_patch": 1,
        "same_branch_evolution": 1,
        "olp_code_files": {
          "patch": [
            "setup.py||setup.py"
          ],
          "candidate": [
            "setup.py||setup.py"
          ]
        }
      },
      "candidate_diff": {
        "setup.py||setup.py": [
          "File: setup.py -> setup.py",
          "--- Hunk 1 ---",
          "[Context before]",
          "19:         \"Operating System :: OS Independent\",",
          "20:     ],",
          "21:     install_requires=[",
          "23:     ],",
          "24:     python_requires='>=3.5',",
          "25: )",
          "",
          "[Removed Lines]",
          "22:         'awscrt==0.10.6',",
          "",
          "[Added Lines]",
          "22:         'awscrt==0.10.7',",
          "",
          "---------------"
        ]
      }
    }
  ]
}