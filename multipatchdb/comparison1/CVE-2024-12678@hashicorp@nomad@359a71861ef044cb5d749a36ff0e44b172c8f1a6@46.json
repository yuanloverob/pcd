{
  "cve_id": "CVE-2024-12678",
  "cve_desc": "Nomad Community and Nomad Enterprise (\"Nomad\") allocations are vulnerable to privilege escalation within a namespace through unredacted workload identity tokens. This vulnerability, identified as CVE-2024-12678, is fixed in Nomad Community Edition 1.9.4 and Nomad Enterprise 1.9.4, 1.8.8, and 1.7.16.",
  "repo": "hashicorp/nomad",
  "patch_hash": "359a71861ef044cb5d749a36ff0e44b172c8f1a6",
  "patch_info": {
    "commit_hash": "359a71861ef044cb5d749a36ff0e44b172c8f1a6",
    "repo": "hashicorp/nomad",
    "commit_url": "https://github.com/hashicorp/nomad/commit/359a71861ef044cb5d749a36ff0e44b172c8f1a6",
    "files": [
      ".changelog/24683.txt",
      "command/agent/node_endpoint.go",
      "nomad/alloc_endpoint.go",
      "nomad/structs/structs.go"
    ],
    "message": "Backport of sec: fix alloc workload identity namespace permission into release/1.9.x (#24685)\n\nCo-authored-by: Deniz Onur Duzgun <59659739+dduzgun-security@users.noreply.github.com>",
    "before_after_code_files": [
      "command/agent/node_endpoint.go||command/agent/node_endpoint.go",
      "nomad/alloc_endpoint.go||nomad/alloc_endpoint.go",
      "nomad/structs/structs.go||nomad/structs/structs.go"
    ]
  },
  "patch_diff": {
    "command/agent/node_endpoint.go||command/agent/node_endpoint.go": [
      "File: command/agent/node_endpoint.go -> command/agent/node_endpoint.go",
      "--- Hunk 1 ---",
      "[Context before]",
      "105:   out.Allocs = make([]*structs.Allocation, 0)",
      "106:  }",
      "107:  for _, alloc := range out.Allocs {",
      "108:   alloc.SetEventDisplayMessages()",
      "109:  }",
      "110:  return out.Allocs, nil",
      "",
      "[Removed Lines]",
      "[None]",
      "",
      "[Added Lines]",
      "108:   alloc = alloc.Sanitize()",
      "",
      "---------------"
    ],
    "nomad/alloc_endpoint.go||nomad/alloc_endpoint.go": [
      "File: nomad/alloc_endpoint.go -> nomad/alloc_endpoint.go",
      "--- Hunk 1 ---",
      "[Context before]",
      "172:    }",
      "176:    if out != nil {",
      "178:     if !aclObj.AllowClientOp() && !allowNsOp(aclObj, out.Namespace) {",
      "179:      return structs.NewErrUnknownAllocation(args.AllocID)",
      "",
      "[Removed Lines]",
      "175:    reply.Alloc = out",
      "",
      "[Added Lines]",
      "176:     out = out.Sanitize()",
      "177:     reply.Alloc = out",
      "",
      "---------------"
    ],
    "nomad/structs/structs.go||nomad/structs/structs.go": [
      "File: nomad/structs/structs.go -> nomad/structs/structs.go",
      "--- Hunk 1 ---",
      "[Context before]",
      "11199:  return a.ID",
      "11200: }",
      "",
      "[Removed Lines]",
      "[None]",
      "",
      "[Added Lines]",
      "11205: func (a *Allocation) Sanitize() *Allocation {",
      "11206:  if a == nil {",
      "11207:   return nil",
      "11208:  }",
      "11210:  if a.SignedIdentities == nil {",
      "11211:   return a",
      "11212:  }",
      "11214:  clean := a.Copy()",
      "11215:  clean.SignedIdentities = nil",
      "11216:  return clean",
      "11217: }",
      "",
      "---------------"
    ]
  },
  "candidates": [
    {
      "candidate_hash": "9a5e60698750121d200a2271133a996b878fbf8a",
      "candidate_info": {
        "commit_hash": "9a5e60698750121d200a2271133a996b878fbf8a",
        "repo": "hashicorp/nomad",
        "commit_url": "https://github.com/hashicorp/nomad/commit/9a5e60698750121d200a2271133a996b878fbf8a",
        "files": [
          ".changelog/23671.txt",
          "command/commands.go",
          "command/operator_gossip.go",
          "command/operator_root.go"
        ],
        "message": "cli: Added synopsis for operator root and operator gossip command\n\nCo-authored-by: Rajeev <rajeevhegde11@gmail.com>",
        "before_after_code_files": [
          "command/commands.go||command/commands.go",
          "command/operator_gossip.go||command/operator_gossip.go",
          "command/operator_root.go||command/operator_root.go"
        ]
      },
      "candidate_patch_features": {
        "candidate_earlier_than_patch": 1,
        "same_pr": 1,
        "olp_pr_links": [
          "https://github.com/hashicorp/nomad/pull/25471"
        ],
        "olp_code_files": {
          "patch": [],
          "candidate": []
        }
      },
      "candidate_diff": {
        "command/commands.go||command/commands.go": [
          "File: command/commands.go -> command/commands.go",
          "--- Hunk 1 ---",
          "[Context before]",
          "731:     Meta: meta,",
          "732:    }, nil",
          "733:   },",
          "734:   \"operator gossip keyring\": func() (cli.Command, error) {",
          "735:    return &OperatorGossipKeyringCommand{",
          "736:     Meta: meta,",
          "",
          "[Removed Lines]",
          "[None]",
          "",
          "[Added Lines]",
          "734:   \"operator gossip\": func() (cli.Command, error) {",
          "735:    return &OperatorGossipCommand{",
          "736:     Meta: meta,",
          "737:    }, nil",
          "738:   },",
          "",
          "---------------",
          "--- Hunk 2 ---",
          "[Context before]",
          "819:     Meta: meta,",
          "820:    }, nil",
          "821:   },",
          "822:   \"operator root keyring\": func() (cli.Command, error) {",
          "823:    return &OperatorRootKeyringCommand{",
          "824:     Meta: meta,",
          "",
          "[Removed Lines]",
          "[None]",
          "",
          "[Added Lines]",
          "827:   \"operator root\": func() (cli.Command, error) {",
          "828:    return &OperatorRootCommand{",
          "829:     Meta: meta,",
          "830:    }, nil",
          "831:   },",
          "",
          "---------------"
        ],
        "command/operator_gossip.go||command/operator_gossip.go": [
          "File: command/operator_gossip.go -> command/operator_gossip.go",
          "--- Hunk 1 ---",
          "[Context before]",
          "[No context available]",
          "",
          "[Removed Lines]",
          "[None]",
          "",
          "[Added Lines]",
          "4: package command",
          "6: import (",
          "7:  \"strings\"",
          "9:  \"github.com/mitchellh/cli\"",
          "10: )",
          "12: type OperatorGossipCommand struct {",
          "13:  Meta",
          "14: }",
          "16: func (*OperatorGossipCommand) Help() string {",
          "17:  helpText := `",
          "18: Usage: nomad operator gossip <subcommand> [options] [args]",
          "20:   This command is accessed by using one of the subcommands below.",
          "21: `",
          "22:  return strings.TrimSpace(helpText)",
          "23: }",
          "25: func (*OperatorGossipCommand) Synopsis() string {",
          "26:  return \"Provides access to the Gossip protocol\"",
          "27: }",
          "29: func (f *OperatorGossipCommand) Name() string { return \"operator gossip\" }",
          "31: func (f *OperatorGossipCommand) Run(_ []string) int {",
          "32:  return cli.RunResultHelp",
          "33: }",
          "",
          "---------------"
        ],
        "command/operator_root.go||command/operator_root.go": [
          "File: command/operator_root.go -> command/operator_root.go",
          "--- Hunk 1 ---",
          "[Context before]",
          "[No context available]",
          "",
          "[Removed Lines]",
          "[None]",
          "",
          "[Added Lines]",
          "4: package command",
          "6: import (",
          "7:  \"strings\"",
          "9:  \"github.com/mitchellh/cli\"",
          "10: )",
          "12: type OperatorRootCommand struct {",
          "13:  Meta",
          "14: }",
          "16: func (*OperatorRootCommand) Help() string {",
          "17:  helpText := `",
          "18: Usage: nomad operator root <subcommand> [options] [args]",
          "20:   This command is accessed by using one of the subcommands below.",
          "21: `",
          "23:  return strings.TrimSpace(helpText)",
          "24: }",
          "26: func (*OperatorRootCommand) Synopsis() string {",
          "27:  return \"Provides access to root encryption keys\"",
          "28: }",
          "30: func (f *OperatorRootCommand) Name() string { return \"operator root\" }",
          "32: func (f *OperatorRootCommand) Run(_ []string) int {",
          "33:  return cli.RunResultHelp",
          "34: }",
          "",
          "---------------"
        ]
      }
    },
    {
      "candidate_hash": "82aba3625eb4d9f742a052509fb3bf16b5b2e175",
      "candidate_info": {
        "commit_hash": "82aba3625eb4d9f742a052509fb3bf16b5b2e175",
        "repo": "hashicorp/nomad",
        "commit_url": "https://github.com/hashicorp/nomad/commit/82aba3625eb4d9f742a052509fb3bf16b5b2e175",
        "files": [
          "go.mod",
          "go.sum"
        ],
        "message": "chore(deps): bump github.com/aws/aws-sdk-go-v2/config (#25067)\n\nBumps [github.com/aws/aws-sdk-go-v2/config](https://github.com/aws/aws-sdk-go-v2) from 1.29.4 to 1.29.6.\n- [Release notes](https://github.com/aws/aws-sdk-go-v2/releases)\n- [Changelog](https://github.com/aws/aws-sdk-go-v2/blob/main/changelog-template.json)\n- [Commits](https://github.com/aws/aws-sdk-go-v2/compare/config/v1.29.4...config/v1.29.6)\n\n---\nupdated-dependencies:\n- dependency-name: github.com/aws/aws-sdk-go-v2/config\n  dependency-type: direct:production\n  update-type: version-update:semver-patch\n...\n\nSigned-off-by: dependabot[bot] <support@github.com>\nCo-authored-by: dependabot[bot] <49699333+dependabot[bot]@users.noreply.github.com>",
        "before_after_code_files": [
          "go.mod||go.mod",
          "go.sum||go.sum"
        ]
      },
      "candidate_patch_features": {
        "candidate_earlier_than_patch": 0,
        "same_pr": 1,
        "olp_pr_links": [
          "https://github.com/hashicorp/nomad/pull/25471"
        ],
        "olp_code_files": {
          "patch": [],
          "candidate": []
        }
      },
      "candidate_diff": {
        "go.mod||go.mod": [
          "File: go.mod -> go.mod",
          "--- Hunk 1 ---",
          "[Context before]",
          "18:  github.com/Microsoft/go-winio v0.6.1",
          "19:  github.com/armon/circbuf v0.0.0-20150827004946-bbbad097214e",
          "20:  github.com/armon/go-metrics v0.5.3",
          "24:  github.com/aws/aws-sdk-go-v2/service/ecs v1.53.0",
          "25:  github.com/aws/smithy-go v1.22.2",
          "26:  github.com/brianvoe/gofakeit/v6 v6.20.1",
          "",
          "[Removed Lines]",
          "21:  github.com/aws/aws-sdk-go-v2 v1.36.0",
          "22:  github.com/aws/aws-sdk-go-v2/config v1.29.4",
          "23:  github.com/aws/aws-sdk-go-v2/feature/ec2/imds v1.16.27",
          "",
          "[Added Lines]",
          "21:  github.com/aws/aws-sdk-go-v2 v1.36.1",
          "22:  github.com/aws/aws-sdk-go-v2/config v1.29.6",
          "23:  github.com/aws/aws-sdk-go-v2/feature/ec2/imds v1.16.28",
          "",
          "---------------",
          "--- Hunk 2 ---",
          "[Context before]",
          "186:  github.com/apparentlymart/go-textseg/v15 v15.0.0 // indirect",
          "187:  github.com/armon/go-radix v1.0.0 // indirect",
          "188:  github.com/aws/aws-sdk-go v1.55.6 // indirect",
          "192:  github.com/aws/aws-sdk-go-v2/internal/ini v1.8.2 // indirect",
          "193:  github.com/aws/aws-sdk-go-v2/service/internal/accept-encoding v1.12.2 // indirect",
          "198:  github.com/beorn7/perks v1.0.1 // indirect",
          "199:  github.com/bgentry/go-netrc v0.0.0-20140422174119-9fd32a8b3d3d // indirect",
          "200:  github.com/bgentry/speakeasy v0.1.0 // indirect",
          "",
          "[Removed Lines]",
          "189:  github.com/aws/aws-sdk-go-v2/credentials v1.17.57 // indirect",
          "190:  github.com/aws/aws-sdk-go-v2/internal/configsources v1.3.31 // indirect",
          "191:  github.com/aws/aws-sdk-go-v2/internal/endpoints/v2 v2.6.31 // indirect",
          "194:  github.com/aws/aws-sdk-go-v2/service/internal/presigned-url v1.12.12 // indirect",
          "195:  github.com/aws/aws-sdk-go-v2/service/sso v1.24.14 // indirect",
          "196:  github.com/aws/aws-sdk-go-v2/service/ssooidc v1.28.13 // indirect",
          "197:  github.com/aws/aws-sdk-go-v2/service/sts v1.33.12 // indirect",
          "",
          "[Added Lines]",
          "189:  github.com/aws/aws-sdk-go-v2/credentials v1.17.59 // indirect",
          "190:  github.com/aws/aws-sdk-go-v2/internal/configsources v1.3.32 // indirect",
          "191:  github.com/aws/aws-sdk-go-v2/internal/endpoints/v2 v2.6.32 // indirect",
          "194:  github.com/aws/aws-sdk-go-v2/service/internal/presigned-url v1.12.13 // indirect",
          "195:  github.com/aws/aws-sdk-go-v2/service/sso v1.24.15 // indirect",
          "196:  github.com/aws/aws-sdk-go-v2/service/ssooidc v1.28.14 // indirect",
          "197:  github.com/aws/aws-sdk-go-v2/service/sts v1.33.14 // indirect",
          "",
          "---------------"
        ],
        "go.sum||go.sum": [
          "File: go.sum -> go.sum",
          "--- Hunk 1 ---",
          "[Context before]",
          "742: github.com/aws/aws-sdk-go v1.44.122/go.mod h1:y4AeaBuwd2Lk+GepC1E9v0qOiTws0MIWAX4oIKwKHZo=",
          "743: github.com/aws/aws-sdk-go v1.55.6 h1:cSg4pvZ3m8dgYcgqB97MrcdjUmZ1BeMYKUxMMB89IPk=",
          "744: github.com/aws/aws-sdk-go v1.55.6/go.mod h1:eRwEWoyTWFMVYVQzKMNHWP5/RV4xIUGMQfXQHfHkpNU=",
          "757: github.com/aws/aws-sdk-go-v2/internal/ini v1.8.2 h1:Pg9URiobXy85kgFev3og2CuOZ8JZUBENF+dcgWBaYNk=",
          "758: github.com/aws/aws-sdk-go-v2/internal/ini v1.8.2/go.mod h1:FbtygfRFze9usAadmnGJNc8KsP346kEe+y2/oyhGAGc=",
          "759: github.com/aws/aws-sdk-go-v2/service/ecs v1.53.0 h1:TCQZX4ztlcWXAcZouKh9qJMcVaH/qTidFTfsvJwUI30=",
          "760: github.com/aws/aws-sdk-go-v2/service/ecs v1.53.0/go.mod h1:Ghi1OWUv4+VMEULWiHsKH2gNA3KAcMoLWsvU0eRXvIA=",
          "761: github.com/aws/aws-sdk-go-v2/service/internal/accept-encoding v1.12.2 h1:D4oz8/CzT9bAEYtVhSBmFj2dNOtaHOtMKc2vHBwYizA=",
          "762: github.com/aws/aws-sdk-go-v2/service/internal/accept-encoding v1.12.2/go.mod h1:Za3IHqTQ+yNcRHxu1OFucBh0ACZT4j4VQFF0BqpZcLY=",
          "771: github.com/aws/smithy-go v1.22.2 h1:6D9hW43xKFrRx/tXXfAlIZc4JI+yQe6snnWcQyxSyLQ=",
          "772: github.com/aws/smithy-go v1.22.2/go.mod h1:irrKGvNn1InZwb2d7fkIRNucdfwR8R+Ts3wxYa/cJHg=",
          "773: github.com/benbjohnson/clock v1.1.0/go.mod h1:J11/hYXuz8f4ySSvYwY0FKfm+ezbsZBKZxNJlLklBHA=",
          "",
          "[Removed Lines]",
          "745: github.com/aws/aws-sdk-go-v2 v1.36.0 h1:b1wM5CcE65Ujwn565qcwgtOTT1aT4ADOHHgglKjG7fk=",
          "746: github.com/aws/aws-sdk-go-v2 v1.36.0/go.mod h1:5PMILGVKiW32oDzjj6RU52yrNrDPUHcbZQYr1sM7qmM=",
          "747: github.com/aws/aws-sdk-go-v2/config v1.29.4 h1:ObNqKsDYFGr2WxnoXKOhCvTlf3HhwtoGgc+KmZ4H5yg=",
          "748: github.com/aws/aws-sdk-go-v2/config v1.29.4/go.mod h1:j2/AF7j/qxVmsNIChw1tWfsVKOayJoGRDjg1Tgq7NPk=",
          "749: github.com/aws/aws-sdk-go-v2/credentials v1.17.57 h1:kFQDsbdBAR3GZsB8xA+51ptEnq9TIj3tS4MuP5b+TcQ=",
          "750: github.com/aws/aws-sdk-go-v2/credentials v1.17.57/go.mod h1:2kerxPUUbTagAr/kkaHiqvj/bcYHzi2qiJS/ZinllU0=",
          "751: github.com/aws/aws-sdk-go-v2/feature/ec2/imds v1.16.27 h1:7lOW8NUwE9UZekS1DYoiPdVAqZ6A+LheHWb+mHbNOq8=",
          "752: github.com/aws/aws-sdk-go-v2/feature/ec2/imds v1.16.27/go.mod h1:w1BASFIPOPUae7AgaH4SbjNbfdkxuggLyGfNFTn8ITY=",
          "753: github.com/aws/aws-sdk-go-v2/internal/configsources v1.3.31 h1:lWm9ucLSRFiI4dQQafLrEOmEDGry3Swrz0BIRdiHJqQ=",
          "754: github.com/aws/aws-sdk-go-v2/internal/configsources v1.3.31/go.mod h1:Huu6GG0YTfbPphQkDSo4dEGmQRTKb9k9G7RdtyQWxuI=",
          "755: github.com/aws/aws-sdk-go-v2/internal/endpoints/v2 v2.6.31 h1:ACxDklUKKXb48+eg5ROZXi1vDgfMyfIA/WyvqHcHI0o=",
          "756: github.com/aws/aws-sdk-go-v2/internal/endpoints/v2 v2.6.31/go.mod h1:yadnfsDwqXeVaohbGc/RaD287PuyRw2wugkh5ZL2J6k=",
          "763: github.com/aws/aws-sdk-go-v2/service/internal/presigned-url v1.12.12 h1:O+8vD2rGjfihBewr5bT+QUfYUHIxCVgG61LHoT59shM=",
          "764: github.com/aws/aws-sdk-go-v2/service/internal/presigned-url v1.12.12/go.mod h1:usVdWJaosa66NMvmCrr08NcWDBRv4E6+YFG2pUdw1Lk=",
          "765: github.com/aws/aws-sdk-go-v2/service/sso v1.24.14 h1:c5WJ3iHz7rLIgArznb3JCSQT3uUMiz9DLZhIX+1G8ok=",
          "766: github.com/aws/aws-sdk-go-v2/service/sso v1.24.14/go.mod h1:+JJQTxB6N4niArC14YNtxcQtwEqzS3o9Z32n7q33Rfs=",
          "767: github.com/aws/aws-sdk-go-v2/service/ssooidc v1.28.13 h1:f1L/JtUkVODD+k1+IiSJUUv8A++2qVr+Xvb3xWXETMU=",
          "768: github.com/aws/aws-sdk-go-v2/service/ssooidc v1.28.13/go.mod h1:tvqlFoja8/s0o+UruA1Nrezo/df0PzdunMDDurUfg6U=",
          "769: github.com/aws/aws-sdk-go-v2/service/sts v1.33.12 h1:fqg6c1KVrc3SYWma/egWue5rKI4G2+M4wMQN2JosNAA=",
          "770: github.com/aws/aws-sdk-go-v2/service/sts v1.33.12/go.mod h1:7Yn+p66q/jt38qMoVfNvjbm3D89mGBnkwDcijgtih8w=",
          "",
          "[Added Lines]",
          "745: github.com/aws/aws-sdk-go-v2 v1.36.1 h1:iTDl5U6oAhkNPba0e1t1hrwAo02ZMqbrGq4k5JBWM5E=",
          "746: github.com/aws/aws-sdk-go-v2 v1.36.1/go.mod h1:5PMILGVKiW32oDzjj6RU52yrNrDPUHcbZQYr1sM7qmM=",
          "747: github.com/aws/aws-sdk-go-v2/config v1.29.6 h1:fqgqEKK5HaZVWLQoLiC9Q+xDlSp+1LYidp6ybGE2OGg=",
          "748: github.com/aws/aws-sdk-go-v2/config v1.29.6/go.mod h1:Ft+WLODzDQmCTHDvqAH1JfC2xxbZ0MxpZAcJqmE1LTQ=",
          "749: github.com/aws/aws-sdk-go-v2/credentials v1.17.59 h1:9btwmrt//Q6JcSdgJOLI98sdr5p7tssS9yAsGe8aKP4=",
          "750: github.com/aws/aws-sdk-go-v2/credentials v1.17.59/go.mod h1:NM8fM6ovI3zak23UISdWidyZuI1ghNe2xjzUZAyT+08=",
          "751: github.com/aws/aws-sdk-go-v2/feature/ec2/imds v1.16.28 h1:KwsodFKVQTlI5EyhRSugALzsV6mG/SGrdjlMXSZSdso=",
          "752: github.com/aws/aws-sdk-go-v2/feature/ec2/imds v1.16.28/go.mod h1:EY3APf9MzygVhKuPXAc5H+MkGb8k/DOSQjWS0LgkKqI=",
          "753: github.com/aws/aws-sdk-go-v2/internal/configsources v1.3.32 h1:BjUcr3X3K0wZPGFg2bxOWW3VPN8rkE3/61zhP+IHviA=",
          "754: github.com/aws/aws-sdk-go-v2/internal/configsources v1.3.32/go.mod h1:80+OGC/bgzzFFTUmcuwD0lb4YutwQeKLFpmt6hoWapU=",
          "755: github.com/aws/aws-sdk-go-v2/internal/endpoints/v2 v2.6.32 h1:m1GeXHVMJsRsUAqG6HjZWx9dj7F5TR+cF1bjyfYyBd4=",
          "756: github.com/aws/aws-sdk-go-v2/internal/endpoints/v2 v2.6.32/go.mod h1:IitoQxGfaKdVLNg0hD8/DXmAqNy0H4K2H2Sf91ti8sI=",
          "763: github.com/aws/aws-sdk-go-v2/service/internal/presigned-url v1.12.13 h1:SYVGSFQHlchIcy6e7x12bsrxClCXSP5et8cqVhL8cuw=",
          "764: github.com/aws/aws-sdk-go-v2/service/internal/presigned-url v1.12.13/go.mod h1:kizuDaLX37bG5WZaoxGPQR/LNFXpxp0vsUnqfkWXfNE=",
          "765: github.com/aws/aws-sdk-go-v2/service/sso v1.24.15 h1:/eE3DogBjYlvlbhd2ssWyeuovWunHLxfgw3s/OJa4GQ=",
          "766: github.com/aws/aws-sdk-go-v2/service/sso v1.24.15/go.mod h1:2PCJYpi7EKeA5SkStAmZlF6fi0uUABuhtF8ILHjGc3Y=",
          "767: github.com/aws/aws-sdk-go-v2/service/ssooidc v1.28.14 h1:M/zwXiL2iXUrHputuXgmO94TVNmcenPHxgLXLutodKE=",
          "768: github.com/aws/aws-sdk-go-v2/service/ssooidc v1.28.14/go.mod h1:RVwIw3y/IqxC2YEXSIkAzRDdEU1iRabDPaYjpGCbCGQ=",
          "769: github.com/aws/aws-sdk-go-v2/service/sts v1.33.14 h1:TzeR06UCMUq+KA3bDkujxK1GVGy+G8qQN/QVYzGLkQE=",
          "770: github.com/aws/aws-sdk-go-v2/service/sts v1.33.14/go.mod h1:dspXf/oYWGWo6DEvj98wpaTeqt5+DMidZD0A9BYTizc=",
          "",
          "---------------"
        ]
      }
    },
    {
      "candidate_hash": "9e67c2fccd5a9cea69816cd2e80f14e5184e361b",
      "candidate_info": {
        "commit_hash": "9e67c2fccd5a9cea69816cd2e80f14e5184e361b",
        "repo": "hashicorp/nomad",
        "commit_url": "https://github.com/hashicorp/nomad/commit/9e67c2fccd5a9cea69816cd2e80f14e5184e361b",
        "files": [
          "website/content/partials/virt-beta-callout.mdx",
          "website/content/plugins/drivers/virt/index.mdx",
          "website/content/plugins/drivers/virt/install.mdx",
          "website/content/plugins/drivers/virt/task-config.mdx"
        ],
        "message": "backport of commit 4693f0be2e9908b769f08a531e545d1615dabee4 (#25221)\n\nCo-authored-by: Aimee Ukasick <aimee.ukasick@hashicorp.com>",
        "before_after_code_files": [
          "website/content/partials/virt-beta-callout.mdx||website/content/partials/virt-beta-callout.mdx",
          "website/content/plugins/drivers/virt/index.mdx||website/content/plugins/drivers/virt/index.mdx",
          "website/content/plugins/drivers/virt/install.mdx||website/content/plugins/drivers/virt/install.mdx",
          "website/content/plugins/drivers/virt/task-config.mdx||website/content/plugins/drivers/virt/task-config.mdx"
        ]
      },
      "candidate_patch_features": {
        "candidate_earlier_than_patch": 0,
        "same_pr": 1,
        "olp_pr_links": [
          "https://github.com/hashicorp/nomad/pull/25471"
        ],
        "olp_code_files": {
          "patch": [],
          "candidate": []
        }
      },
      "candidate_diff": {
        "website/content/partials/virt-beta-callout.mdx||website/content/partials/virt-beta-callout.mdx": [
          "File: website/content/partials/virt-beta-callout.mdx -> website/content/partials/virt-beta-callout.mdx",
          "--- Hunk 1 ---",
          "[Context before]",
          "[No context available]",
          "",
          "[Removed Lines]",
          "1: ~> Beta Feature: The Virt task driver is in beta and under active development.",
          "2: Refer to the [repo README](https://github.com/hashicorp/nomad-driver-virt) for",
          "3: the latest updates. Do not use this driver in production environments.",
          "",
          "[Added Lines]",
          "1: <Note title=\"Beta Feature\">",
          "3: The Virt task driver is under active development. Refer to the [repo",
          "4: README](https://github.com/hashicorp/nomad-driver-virt) for the latest updates. Do not use this driver in production environments.",
          "6: </Note>",
          "",
          "---------------"
        ],
        "website/content/plugins/drivers/virt/index.mdx||website/content/plugins/drivers/virt/index.mdx": [
          "File: website/content/plugins/drivers/virt/index.mdx -> website/content/plugins/drivers/virt/index.mdx",
          "--- Hunk 1 ---",
          "[Context before]",
          "8: # Virt task driver plugin",
          "12: Name: `virt`",
          "14: The Virt task driver utilizes the [libvirt][] API to run and manage virtual",
          "",
          "[Removed Lines]",
          "10: @include 'virt-beta-callout.mdx'",
          "",
          "[Added Lines]",
          "[None]",
          "",
          "---------------",
          "--- Hunk 2 ---",
          "[Context before]",
          "16: variety of Nomad features including [workload identity][], [task templates][],",
          "17: and [service discovery][].",
          "19: ## Driver Capabilities",
          "21: The Virt task driver implements these driver [capabilities][capabilities].",
          "",
          "[Removed Lines]",
          "[None]",
          "",
          "[Added Lines]",
          "17: @include 'virt-beta-callout.mdx'",
          "",
          "---------------"
        ],
        "website/content/plugins/drivers/virt/install.mdx||website/content/plugins/drivers/virt/install.mdx": [
          "File: website/content/plugins/drivers/virt/install.mdx -> website/content/plugins/drivers/virt/install.mdx",
          "--- Hunk 1 ---",
          "[Context before]",
          "8: # Install the Virt task driver plugin",
          "12: The Virt task driver plugin for Linux operating systems is not bundled with",
          "13: Nomad. You must install the driver into each Nomad client's [configured plugin",
          "14: directory][plugin_dir].",
          "16: ## Prerequisites",
          "18: Your Nomad client must meet these requirements:",
          "",
          "[Removed Lines]",
          "10: @include 'virt-beta-callout.mdx'",
          "",
          "[Added Lines]",
          "14: @include 'virt-beta-callout.mdx'",
          "",
          "---------------"
        ],
        "website/content/plugins/drivers/virt/task-config.mdx||website/content/plugins/drivers/virt/task-config.mdx": [
          "File: website/content/plugins/drivers/virt/task-config.mdx -> website/content/plugins/drivers/virt/task-config.mdx",
          "--- Hunk 1 ---",
          "[Context before]",
          "1: ---",
          "2: layout: docs",
          "3: page_title: Configure a Virt job task",
          "5: ---",
          "7: # Configure a Virt job task",
          "9: @include 'virt-beta-callout.mdx'",
          "11: ## Parameters",
          "",
          "[Removed Lines]",
          "4: description: Learn how to use the Virt task driver in your Nomad job specification. Configure a base virtual machine (VM) image, network interface,  and parameters for bootstrapping the VM instance.",
          "",
          "[Added Lines]",
          "4: description: Learn how to use the Virt task driver in your Nomad job specification. Configure a base virtual machine (VM) image, network interface, and parameters for bootstrapping the VM instance.",
          "9: This page provides reference information on how to use the Virt task driver in your Nomad job specification. Configure a base virtual machine (VM) image, network interface, and parameters for bootstrapping the VM instance.",
          "",
          "---------------"
        ]
      }
    },
    {
      "candidate_hash": "c2eefd5c8fd0895f0cfd04184a88ca83d8abd049",
      "candidate_info": {
        "commit_hash": "c2eefd5c8fd0895f0cfd04184a88ca83d8abd049",
        "repo": "hashicorp/nomad",
        "commit_url": "https://github.com/hashicorp/nomad/commit/c2eefd5c8fd0895f0cfd04184a88ca83d8abd049",
        "files": [
          "ui/package.json",
          "ui/yarn.lock"
        ],
        "message": "backport of commit cb7bd0f4d579ecd9ed87e8b00a36480ff7360e6e (#25415)\n\nCo-authored-by: Phil Renaud <phil.renaud@hashicorp.com>",
        "before_after_code_files": [
          "ui/yarn.lock||ui/yarn.lock"
        ]
      },
      "candidate_patch_features": {
        "candidate_earlier_than_patch": 0,
        "same_pr": 1,
        "olp_pr_links": [
          "https://github.com/hashicorp/nomad/pull/25471"
        ],
        "olp_code_files": {
          "patch": [],
          "candidate": []
        }
      },
      "candidate_diff": {
        "ui/yarn.lock||ui/yarn.lock": [
          "File: ui/yarn.lock -> ui/yarn.lock",
          "--- Hunk 1 ---",
          "[Context before]",
          "4458:   dependencies:",
          "4459:     safe-buffer \"5.1.2\"",
          "4461: big.js@^5.2.2:",
          "4462:   version \"5.2.2\"",
          "4463:   resolved \"https://registry.yarnpkg.com/big.js/-/big.js-5.2.2.tgz#65f0af382f578bcdc742bd9c281e9cb2d7768328\"",
          "",
          "[Removed Lines]",
          "[None]",
          "",
          "[Added Lines]",
          "4461: better-path-resolve@1.0.0:",
          "4462:   version \"1.0.0\"",
          "4463:   resolved \"https://registry.yarnpkg.com/better-path-resolve/-/better-path-resolve-1.0.0.tgz#13a35a1104cdd48a7b74bf8758f96a1ee613f99d\"",
          "4464:   integrity sha512-pbnl5XzGBdrFU/wT4jqmJVPn2B6UHPBOhzMQkY/SPUPB6QtUXtmBHBIwCbXJol93mOpGMnQyP/+BB19q04xj7g==",
          "4465:   dependencies:",
          "4466:     is-windows \"^1.0.0\"",
          "",
          "---------------",
          "--- Hunk 2 ---",
          "[Context before]",
          "6660:   dependencies:",
          "6661:     \"@embroider/addon-shim\" \"^1.8.7\"",
          "6664:   version \"2.7.3\"",
          "6665:   resolved \"https://registry.yarnpkg.com/ember-auto-import/-/ember-auto-import-2.7.3.tgz#08421f35cd9628327e1dd5d9df40673a1d7beb71\"",
          "6666:   integrity sha512-EQzStGYxNvTPYWCFh0X57HFAzAvA2rHHRgBeWNDKHQ/rENNlHw0c0e0i1XebwEfv+yGHOodE4dN+f/mrYkQXLw==",
          "",
          "[Removed Lines]",
          "6663: ember-auto-import@^1.10.1, ember-auto-import@^1.2.19, ember-auto-import@^1.6.0, ember-auto-import@^2.2.4, ember-auto-import@^2.4.0, ember-auto-import@^2.4.2, ember-auto-import@^2.5.0, ember-auto-import@^2.6.0, ember-auto-import@^2.6.3:",
          "",
          "[Added Lines]",
          "6670: ember-auto-import@^1.10.1, ember-auto-import@^1.2.19, ember-auto-import@^1.6.0, ember-auto-import@^2.2.4, ember-auto-import@^2.4.2, ember-auto-import@^2.5.0, ember-auto-import@^2.6.0, ember-auto-import@^2.6.3, ember-auto-import@^2.7.3:",
          "6671:   version \"2.10.0\"",
          "6672:   resolved \"https://registry.yarnpkg.com/ember-auto-import/-/ember-auto-import-2.10.0.tgz#2a29b82335eba4375d115570cbe836666ed2e7cc\"",
          "6673:   integrity sha512-bcBFDYVTFHyqyq8BNvsj6UO3pE6Uqou/cNmee0WaqBgZ+1nQqFz0UE26usrtnFAT+YaFZSkqF2H36QW84k0/cg==",
          "6674:   dependencies:",
          "6675:     \"@babel/core\" \"^7.16.7\"",
          "6676:     \"@babel/plugin-proposal-class-properties\" \"^7.16.7\"",
          "6677:     \"@babel/plugin-proposal-decorators\" \"^7.16.7\"",
          "6678:     \"@babel/plugin-proposal-private-methods\" \"^7.16.7\"",
          "6679:     \"@babel/plugin-transform-class-static-block\" \"^7.16.7\"",
          "6680:     \"@babel/preset-env\" \"^7.16.7\"",
          "6681:     \"@embroider/macros\" \"^1.0.0\"",
          "6682:     \"@embroider/shared-internals\" \"^2.0.0\"",
          "6683:     babel-loader \"^8.0.6\"",
          "6684:     babel-plugin-ember-modules-api-polyfill \"^3.5.0\"",
          "6685:     babel-plugin-ember-template-compilation \"^2.0.1\"",
          "6686:     babel-plugin-htmlbars-inline-precompile \"^5.2.1\"",
          "6687:     babel-plugin-syntax-dynamic-import \"^6.18.0\"",
          "6688:     broccoli-debug \"^0.6.4\"",
          "6689:     broccoli-funnel \"^3.0.8\"",
          "6690:     broccoli-merge-trees \"^4.2.0\"",
          "6691:     broccoli-plugin \"^4.0.0\"",
          "6692:     broccoli-source \"^3.0.0\"",
          "6693:     css-loader \"^5.2.0\"",
          "6694:     debug \"^4.3.1\"",
          "6695:     fs-extra \"^10.0.0\"",
          "6696:     fs-tree-diff \"^2.0.0\"",
          "6697:     handlebars \"^4.3.1\"",
          "6698:     is-subdir \"^1.2.0\"",
          "6699:     js-string-escape \"^1.0.1\"",
          "6700:     lodash \"^4.17.19\"",
          "6701:     mini-css-extract-plugin \"^2.5.2\"",
          "6702:     minimatch \"^3.0.0\"",
          "6703:     parse5 \"^6.0.1\"",
          "6704:     pkg-entry-points \"^1.1.0\"",
          "6705:     resolve \"^1.20.0\"",
          "6706:     resolve-package-path \"^4.0.3\"",
          "6707:     semver \"^7.3.4\"",
          "6708:     style-loader \"^2.0.0\"",
          "6709:     typescript-memoize \"^1.0.0-alpha.3\"",
          "6710:     walk-sync \"^3.0.0\"",
          "6712: ember-auto-import@^2.4.0:",
          "",
          "---------------",
          "--- Hunk 3 ---",
          "[Context before]",
          "10115:   dependencies:",
          "10116:     has-tostringtag \"^1.0.0\"",
          "10118: is-symbol@^1.0.2, is-symbol@^1.0.3:",
          "10119:   version \"1.0.4\"",
          "10120:   resolved \"https://registry.yarnpkg.com/is-symbol/-/is-symbol-1.0.4.tgz#a6dac93b635b063ca6872236de88910a57af139c\"",
          "",
          "[Removed Lines]",
          "[None]",
          "",
          "[Added Lines]",
          "10167: is-subdir@^1.2.0:",
          "10168:   version \"1.2.0\"",
          "10169:   resolved \"https://registry.yarnpkg.com/is-subdir/-/is-subdir-1.2.0.tgz#b791cd28fab5202e91a08280d51d9d7254fd20d4\"",
          "10170:   integrity sha512-2AT6j+gXe/1ueqbW6fLZJiIw3F8iXGJtt0yDrZaBhAZEG1raiTxKWU+IPqMCzQAXOUCKdA4UDMgacKH25XG2Cw==",
          "10171:   dependencies:",
          "10172:     better-path-resolve \"1.0.0\"",
          "",
          "---------------",
          "--- Hunk 4 ---",
          "[Context before]",
          "10153:   dependencies:",
          "10154:     call-bind \"^1.0.2\"",
          "10157:   version \"1.0.2\"",
          "10158:   resolved \"https://registry.yarnpkg.com/is-windows/-/is-windows-1.0.2.tgz#d1850eb9791ecd18e6182ce12a30f396634bb19d\"",
          "10159:   integrity sha512-eXK1UInq2bPmjyX6e3VHIzMLobc4J94i4AWn+Hpq3OU5KkrRC96OAcR3PRJ/pGu6m8TRnBHP9dkXQVsT/COVIA==",
          "",
          "[Removed Lines]",
          "10156: is-windows@^1.0.1, is-windows@^1.0.2:",
          "",
          "[Added Lines]",
          "10212: is-windows@^1.0.0, is-windows@^1.0.1, is-windows@^1.0.2:",
          "",
          "---------------",
          "--- Hunk 5 ---",
          "[Context before]",
          "11905:   dependencies:",
          "11906:     find-up \"^5.0.0\"",
          "11908: pkg-up@^2.0.0:",
          "11909:   version \"2.0.0\"",
          "11910:   resolved \"https://registry.yarnpkg.com/pkg-up/-/pkg-up-2.0.0.tgz#c819ac728059a461cab1c3889a2be3c49a004d7f\"",
          "",
          "[Removed Lines]",
          "[None]",
          "",
          "[Added Lines]",
          "11964: pkg-entry-points@^1.1.0:",
          "11965:   version \"1.1.1\"",
          "11966:   resolved \"https://registry.yarnpkg.com/pkg-entry-points/-/pkg-entry-points-1.1.1.tgz#d5cd87f934e873bf73143ed1d0baf637e5f8fda4\"",
          "11967:   integrity sha512-BhZa7iaPmB4b3vKIACoppyUoYn8/sFs17VJJtzrzPZvEnN2nqrgg911tdL65lA2m1ml6UI3iPeYbZQ4VXpn1mA==",
          "",
          "---------------"
        ]
      }
    },
    {
      "candidate_hash": "8481c1d45de61e84248a5dfc85f83a46b52bafef",
      "candidate_info": {
        "commit_hash": "8481c1d45de61e84248a5dfc85f83a46b52bafef",
        "repo": "hashicorp/nomad",
        "commit_url": "https://github.com/hashicorp/nomad/commit/8481c1d45de61e84248a5dfc85f83a46b52bafef",
        "files": [
          "go.mod",
          "go.sum"
        ],
        "message": "chore(deps): bump github.com/hashicorp/go-kms-wrapping/wrappers/transit/v2 (#25196)\n\nBumps [github.com/hashicorp/go-kms-wrapping/wrappers/transit/v2](https://github.com/hashicorp/go-kms-wrapping) from 2.0.12 to 2.0.13.\n- [Commits](https://github.com/hashicorp/go-kms-wrapping/compare/v2.0.12...v2.0.13)\n\n---\nupdated-dependencies:\n- dependency-name: github.com/hashicorp/go-kms-wrapping/wrappers/transit/v2\n  dependency-type: direct:production\n  update-type: version-update:semver-patch\n...\n\nSigned-off-by: dependabot[bot] <support@github.com>\nCo-authored-by: dependabot[bot] <49699333+dependabot[bot]@users.noreply.github.com>",
        "before_after_code_files": [
          "go.mod||go.mod",
          "go.sum||go.sum"
        ]
      },
      "candidate_patch_features": {
        "candidate_earlier_than_patch": 0,
        "same_pr": 1,
        "olp_pr_links": [
          "https://github.com/hashicorp/nomad/pull/25471"
        ],
        "olp_code_files": {
          "patch": [],
          "candidate": []
        }
      },
      "candidate_diff": {
        "go.mod||go.mod": [
          "File: go.mod -> go.mod",
          "--- Hunk 1 ---",
          "[Context before]",
          "65:  github.com/hashicorp/go-kms-wrapping/wrappers/awskms/v2 v2.0.10",
          "66:  github.com/hashicorp/go-kms-wrapping/wrappers/azurekeyvault/v2 v2.0.13",
          "67:  github.com/hashicorp/go-kms-wrapping/wrappers/gcpckms/v2 v2.0.12",
          "69:  github.com/hashicorp/go-memdb v1.3.4",
          "70:  github.com/hashicorp/go-msgpack/v2 v2.1.2",
          "71:  github.com/hashicorp/go-multierror v1.1.1",
          "",
          "[Removed Lines]",
          "68:  github.com/hashicorp/go-kms-wrapping/wrappers/transit/v2 v2.0.12",
          "",
          "[Added Lines]",
          "68:  github.com/hashicorp/go-kms-wrapping/wrappers/transit/v2 v2.0.13",
          "",
          "---------------"
        ],
        "go.sum||go.sum": [
          "File: go.sum -> go.sum",
          "--- Hunk 1 ---",
          "[Context before]",
          "1209: github.com/hashicorp/go-kms-wrapping/wrappers/azurekeyvault/v2 v2.0.13/go.mod h1:fWxrv9YkAMqtsISde5mcutoMvuiH4kyg1AlDzzmqRh8=",
          "1210: github.com/hashicorp/go-kms-wrapping/wrappers/gcpckms/v2 v2.0.12 h1:PCqWzT/Hii0KL07JsBZ3lJbv/wx02IAHYlhWQq8rxRY=",
          "1211: github.com/hashicorp/go-kms-wrapping/wrappers/gcpckms/v2 v2.0.12/go.mod h1:HSaOaX/lv3ShCdilUYbOTPnSvmoZ9xtQhgw+8hYcZkg=",
          "1214: github.com/hashicorp/go-memdb v1.3.4 h1:XSL3NR682X/cVk2IeV0d70N4DZ9ljI885xAEU8IoK3c=",
          "1215: github.com/hashicorp/go-memdb v1.3.4/go.mod h1:uBTr1oQbtuMgd1SSGoR8YV27eT3sBHbYiNm53bMpgSg=",
          "1216: github.com/hashicorp/go-metrics v0.5.4 h1:8mmPiIJkTPPEbAiV97IxdAGNdRdaWwVap1BU6elejKY=",
          "",
          "[Removed Lines]",
          "1212: github.com/hashicorp/go-kms-wrapping/wrappers/transit/v2 v2.0.12 h1:E8pzzF7i44OZCYDol+U7VbTBmHe65/6dx1nYxS0P1k0=",
          "1213: github.com/hashicorp/go-kms-wrapping/wrappers/transit/v2 v2.0.12/go.mod h1:YRqguGarF7kbHeojTPkanH3qvjbEP2pelq5b0ifaQ1M=",
          "",
          "[Added Lines]",
          "1212: github.com/hashicorp/go-kms-wrapping/wrappers/transit/v2 v2.0.13 h1:UuDeq3nr0e+H9CrZM3dvpDGkWFSJYTtuTqVekn2za2k=",
          "1213: github.com/hashicorp/go-kms-wrapping/wrappers/transit/v2 v2.0.13/go.mod h1:E2dYgXYNkvKe84PIxD9eJqqhFRA4guCTDweJR4i0gds=",
          "",
          "---------------"
        ]
      }
    }
  ]
}