{
  "cve_id": "CVE-2021-40831",
  "cve_desc": "The AWS IoT Device SDK v2 for Java, Python, C++ and Node.js appends a user supplied Certificate Authority (CA) to the root CAs instead of overriding it on macOS systems. Additionally, SNI validation is also not enabled when the CA has been \u201coverridden\u201d. TLS handshakes will thus succeed if the peer can be verified either from the user-supplied CA or the system\u2019s default trust-store. Attackers with access to a host\u2019s trust stores or are able to compromise a certificate authority already in the host's trust store (note: the attacker must also be able to spoof DNS in this case) may be able to use this issue to bypass CA pinning. An attacker could then spoof the MQTT broker, and either drop traffic and/or respond with the attacker's data, but they would not be able to forward this data on to the MQTT broker because the attacker would still need the user's private keys to authenticate against the MQTT broker. The 'aws_tls_ctx_options_override_default_trust_store_*' function within the aws-c-io submodule has been updated to address this behavior. This issue affects: Amazon Web Services AWS IoT Device SDK v2 for Java versions prior to 1.5.0 on macOS. Amazon Web Services AWS IoT Device SDK v2 for Python versions prior to 1.7.0 on macOS. Amazon Web Services AWS IoT Device SDK v2 for C++ versions prior to 1.14.0 on macOS. Amazon Web Services AWS IoT Device SDK v2 for Node.js versions prior to 1.6.0 on macOS. Amazon Web Services AWS-C-IO 0.10.7 on macOS.",
  "repo": "aws/aws-iot-device-sdk-java-v2",
  "patch_hash": "46375e9b1bfb34109b9ff3b1eff9c770f9daa186",
  "patch_info": {
    "commit_hash": "46375e9b1bfb34109b9ff3b1eff9c770f9daa186",
    "repo": "aws/aws-iot-device-sdk-java-v2",
    "commit_url": "https://github.com/aws/aws-iot-device-sdk-java-v2/commit/46375e9b1bfb34109b9ff3b1eff9c770f9daa186",
    "files": [
      "README.md",
      "android/app/build.gradle",
      "android/iotdevicesdk/build.gradle",
      "sdk/pom.xml"
    ],
    "message": "Fix CA override functions (#176)\n\nUpdate to aws-crt 0.14.0. This fixes the issue where \"overrideDefaultTrustStore\" functions did not actually override the system trust store on Linux and Apple platforms.",
    "before_after_code_files": [
      "android/app/build.gradle||android/app/build.gradle",
      "android/iotdevicesdk/build.gradle||android/iotdevicesdk/build.gradle"
    ]
  },
  "patch_diff": {
    "android/app/build.gradle||android/app/build.gradle": [
      "File: android/app/build.gradle -> android/app/build.gradle",
      "--- Hunk 1 ---",
      "[Context before]",
      "50: dependencies {",
      "51:     implementation fileTree(dir: 'libs', include: ['*.jar'])",
      "52:     implementation project(\":iotdevicesdk\")",
      "54:     implementation \"org.jetbrains.kotlin:kotlin-stdlib-jdk7:$kotlin_version\"",
      "55:     implementation 'androidx.appcompat:appcompat:1.1.0'",
      "56:     implementation 'androidx.core:core:1.2.0'",
      "",
      "[Removed Lines]",
      "53:     implementation 'software.amazon.awssdk.crt:android:0.11.5'",
      "",
      "[Added Lines]",
      "53:     implementation 'software.amazon.awssdk.crt:android:0.14.0'",
      "",
      "---------------"
    ],
    "android/iotdevicesdk/build.gradle||android/iotdevicesdk/build.gradle": [
      "File: android/iotdevicesdk/build.gradle -> android/iotdevicesdk/build.gradle",
      "--- Hunk 1 ---",
      "[Context before]",
      "88: dependencies {",
      "89:     implementation fileTree(dir: 'libs', include: ['*.jar'])",
      "91:     implementation 'com.google.code.gson:gson:2.8.5'",
      "92:     implementation 'androidx.appcompat:appcompat:1.1.0'",
      "93:     testImplementation 'junit:junit:4.12'",
      "",
      "[Removed Lines]",
      "90:     implementation 'software.amazon.awssdk.crt:android:0.11.5'",
      "",
      "[Added Lines]",
      "90:     implementation 'software.amazon.awssdk.crt:android:0.14.0'",
      "",
      "---------------"
    ]
  },
  "candidates": [
    {
      "candidate_hash": "d9a303112a9d4cab0b3c54160ea34cb69682c18e",
      "candidate_info": {
        "commit_hash": "d9a303112a9d4cab0b3c54160ea34cb69682c18e",
        "repo": "aws/aws-iot-device-sdk-java-v2",
        "commit_url": "https://github.com/aws/aws-iot-device-sdk-java-v2/commit/d9a303112a9d4cab0b3c54160ea34cb69682c18e",
        "files": [
          "android/app/build.gradle",
          "android/build.gradle",
          "android/gradle/wrapper/gradle-wrapper.properties",
          "android/iotdevicesdk/build.gradle"
        ],
        "message": "added greengrass sources to android build; change android tools versions and use maven crt for android build",
        "before_after_code_files": [
          "android/app/build.gradle||android/app/build.gradle",
          "android/build.gradle||android/build.gradle",
          "android/gradle/wrapper/gradle-wrapper.properties||android/gradle/wrapper/gradle-wrapper.properties",
          "android/iotdevicesdk/build.gradle||android/iotdevicesdk/build.gradle"
        ]
      },
      "candidate_patch_features": {
        "candidate_earlier_than_patch": 0,
        "same_branch_evolution": 1,
        "olp_code_files": {
          "patch": [
            "android/app/build.gradle||android/app/build.gradle",
            "android/iotdevicesdk/build.gradle||android/iotdevicesdk/build.gradle"
          ],
          "candidate": [
            "android/app/build.gradle||android/app/build.gradle",
            "android/iotdevicesdk/build.gradle||android/iotdevicesdk/build.gradle"
          ]
        }
      },
      "candidate_diff": {
        "android/app/build.gradle||android/app/build.gradle": [
          "File: android/app/build.gradle -> android/app/build.gradle",
          "--- Hunk 1 ---",
          "[Context before]",
          "5: android {",
          "6:     compileSdkVersion 29",
          "9:     defaultConfig {",
          "10:         applicationId \"software.amazon.awssdk.iotsamples\"",
          "",
          "[Removed Lines]",
          "7:     buildToolsVersion \"29.0.3\"",
          "",
          "[Added Lines]",
          "8:     buildToolsVersion \"30.0.2\"",
          "",
          "---------------",
          "--- Hunk 2 ---",
          "[Context before]",
          "12:         targetSdkVersion 29",
          "13:         versionCode 1",
          "14:         versionName \"1.0\"",
          "17:         testInstrumentationRunner \"androidx.test.runner.AndroidJUnitRunner\"",
          "18:     }",
          "",
          "[Removed Lines]",
          "15:         ndkVersion \"21.0.6113669\"",
          "",
          "[Added Lines]",
          "17:         ndkVersion \"23.1.7779620\"",
          "",
          "---------------",
          "--- Hunk 3 ---",
          "[Context before]",
          "37:         sourceCompatibility = 1.8",
          "38:         targetCompatibility = 1.8",
          "39:     }",
          "41: }",
          "",
          "[Removed Lines]",
          "[None]",
          "",
          "[Added Lines]",
          "42:     ndkVersion '23.1.7779620'",
          "",
          "---------------",
          "--- Hunk 4 ---",
          "[Context before]",
          "50: dependencies {",
          "51:     implementation fileTree(dir: 'libs', include: ['*.jar'])",
          "52:     implementation project(\":iotdevicesdk\")",
          "54:     implementation \"org.jetbrains.kotlin:kotlin-stdlib-jdk7:$kotlin_version\"",
          "55:     implementation 'androidx.appcompat:appcompat:1.1.0'",
          "56:     implementation 'androidx.core:core:1.2.0'",
          "",
          "[Removed Lines]",
          "53:     implementation 'software.amazon.awssdk.crt:android:0.15.8'",
          "",
          "[Added Lines]",
          "57:     implementation 'software.amazon.awssdk.crt:aws-crt-android:0.15.11'",
          "",
          "---------------"
        ],
        "android/build.gradle||android/build.gradle": [
          "File: android/build.gradle -> android/build.gradle",
          "--- Hunk 1 ---",
          "[Context before]",
          "8:         mavenCentral()",
          "9:     }",
          "10:     dependencies {",
          "12:         classpath \"org.jetbrains.kotlin:kotlin-gradle-plugin:$kotlin_version\"",
          "",
          "[Removed Lines]",
          "11:         classpath 'com.android.tools.build:gradle:4.0.0'",
          "",
          "[Added Lines]",
          "11:         classpath 'com.android.tools.build:gradle:7.0.4'",
          "",
          "---------------",
          "--- Hunk 2 ---",
          "[Context before]",
          "20:     repositories {",
          "21:         google()",
          "22:         jcenter()",
          "24:     }",
          "25: }",
          "",
          "[Removed Lines]",
          "[None]",
          "",
          "[Added Lines]",
          "23:         mavenCentral()",
          "",
          "---------------"
        ],
        "android/gradle/wrapper/gradle-wrapper.properties||android/gradle/wrapper/gradle-wrapper.properties": [
          "File: android/gradle/wrapper/gradle-wrapper.properties -> android/gradle/wrapper/gradle-wrapper.properties",
          "--- Hunk 1 ---",
          "[Context before]",
          "3: distributionPath=wrapper/dists",
          "4: zipStoreBase=GRADLE_USER_HOME",
          "5: zipStorePath=wrapper/dists",
          "",
          "[Removed Lines]",
          "6: distributionUrl=https\\://services.gradle.org/distributions/gradle-6.1.1-all.zip",
          "",
          "[Added Lines]",
          "6: distributionUrl=https\\://services.gradle.org/distributions/gradle-7.0.2-all.zip",
          "",
          "---------------"
        ],
        "android/iotdevicesdk/build.gradle||android/iotdevicesdk/build.gradle": [
          "File: android/iotdevicesdk/build.gradle -> android/iotdevicesdk/build.gradle",
          "--- Hunk 1 ---",
          "[Context before]",
          "44: android {",
          "45:     compileSdkVersion 29",
          "48:     defaultConfig {",
          "49:         minSdkVersion 26",
          "50:         targetSdkVersion 29",
          "54:         testInstrumentationRunner \"androidx.test.runner.AndroidJUnitRunner\"",
          "55:         consumerProguardFiles 'consumer-rules.pro'",
          "56:     }",
          "58:     sourceSets {",
          "61:         }",
          "62:     }",
          "64:     buildTypes {",
          "68:         release {",
          "69:             minifyEnabled false",
          "70:             proguardFiles getDefaultProguardFile('proguard-android-optimize.txt'), 'proguard-rules.pro'",
          "72:         }",
          "73:     }",
          "",
          "[Removed Lines]",
          "46:     buildToolsVersion \"29.0.3\"",
          "51:         versionCode = gitVersionCode()",
          "52:         versionName = gitVersionName()",
          "53:         ndkVersion \"21.0.6113669\"",
          "59:         main {",
          "60:             java.srcDir '../../sdk/src/main/java'",
          "65:         debug {",
          "66:             versionNameSuffix = gitVersionTag()",
          "67:         }",
          "71:             versionNameSuffix \"\"",
          "",
          "[Added Lines]",
          "47:     buildToolsVersion \"30.0.2\"",
          "53:         ndkVersion \"23.1.7779620\"",
          "59:         main.java {",
          "60:             srcDirs = ['../../sdk/src/main/java',",
          "61:                        '../../sdk/greengrass/event-stream-rpc-model/src/main/java',",
          "62:                        '../../sdk/greengrass/event-stream-rpc-client/src/main/java',",
          "63:                        '../../sdk/greengrass/greengrass-client/src/event-stream-rpc-java/client',",
          "64:                        '../../sdk/greengrass/greengrass-client/src/event-stream-rpc-java/model'",
          "65:             ]",
          "",
          "---------------",
          "--- Hunk 2 ---",
          "[Context before]",
          "88: dependencies {",
          "89:     implementation fileTree(dir: 'libs', include: ['*.jar'])",
          "91:     implementation 'com.google.code.gson:gson:2.8.5'",
          "92:     implementation 'androidx.appcompat:appcompat:1.1.0'",
          "93:     testImplementation 'junit:junit:4.12'",
          "",
          "[Removed Lines]",
          "90:     implementation 'software.amazon.awssdk.crt:android:0.15.8'",
          "",
          "[Added Lines]",
          "93:     implementation 'software.amazon.awssdk.crt:aws-crt-android:0.15.11'",
          "",
          "---------------"
        ]
      }
    },
    {
      "candidate_hash": "4d4c28f56eb5c9213c23d33defef3a5b68386294",
      "candidate_info": {
        "commit_hash": "4d4c28f56eb5c9213c23d33defef3a5b68386294",
        "repo": "aws/aws-iot-device-sdk-java-v2",
        "commit_url": "https://github.com/aws/aws-iot-device-sdk-java-v2/commit/4d4c28f56eb5c9213c23d33defef3a5b68386294",
        "files": [
          "README.md",
          "android/iotdevicesdk/build.gradle",
          "sdk/pom.xml"
        ],
        "message": "Update to latest version of CRT to get latest EventStream updates (#284)\n\n* Update to latest version of CRT to get latest EventStream updates\n* Testing if CI is working",
        "before_after_code_files": [
          "android/iotdevicesdk/build.gradle||android/iotdevicesdk/build.gradle"
        ]
      },
      "candidate_patch_features": {
        "candidate_earlier_than_patch": 0,
        "same_branch_evolution": 1,
        "olp_code_files": {
          "patch": [
            "android/iotdevicesdk/build.gradle||android/iotdevicesdk/build.gradle"
          ],
          "candidate": [
            "android/iotdevicesdk/build.gradle||android/iotdevicesdk/build.gradle"
          ]
        }
      },
      "candidate_diff": {
        "android/iotdevicesdk/build.gradle||android/iotdevicesdk/build.gradle": [
          "File: android/iotdevicesdk/build.gradle -> android/iotdevicesdk/build.gradle",
          "--- Hunk 1 ---",
          "[Context before]",
          "91: }",
          "93: dependencies {",
          "95:     implementation 'org.slf4j:slf4j-api:1.7.30'",
          "96:     implementation 'com.google.code.gson:gson:2.9.0'",
          "97:     implementation 'androidx.appcompat:appcompat:1.1.0'",
          "",
          "[Removed Lines]",
          "94:     api 'software.amazon.awssdk.crt:aws-crt-android:0.16.13'",
          "",
          "[Added Lines]",
          "94:     api 'software.amazon.awssdk.crt:aws-crt-android:0.16.14'",
          "",
          "---------------"
        ]
      }
    },
    {
      "candidate_hash": "55cdd8db97570a4eb3dfcf69dbac08073290e9ed",
      "candidate_info": {
        "commit_hash": "55cdd8db97570a4eb3dfcf69dbac08073290e9ed",
        "repo": "aws/aws-iot-device-sdk-java-v2",
        "commit_url": "https://github.com/aws/aws-iot-device-sdk-java-v2/commit/55cdd8db97570a4eb3dfcf69dbac08073290e9ed",
        "files": [
          "android/app/build.gradle",
          "android/iotdevicesdk/build.gradle"
        ],
        "message": "Feature android (#240)\n\n* Updating Android gradle files according to ver. 1.8.0\n\nCo-authored-by: Vitaly Khalmansky <vkhalmansky@klika-tech.com>\nCo-authored-by: Michael Graeb <graebm@amazon.com>\nCo-authored-by: Bret Ambrose <bretambrose@gmail.com>",
        "before_after_code_files": [
          "android/app/build.gradle||android/app/build.gradle",
          "android/iotdevicesdk/build.gradle||android/iotdevicesdk/build.gradle"
        ]
      },
      "candidate_patch_features": {
        "candidate_earlier_than_patch": 0,
        "same_branch_evolution": 1,
        "olp_code_files": {
          "patch": [
            "android/app/build.gradle||android/app/build.gradle",
            "android/iotdevicesdk/build.gradle||android/iotdevicesdk/build.gradle"
          ],
          "candidate": [
            "android/app/build.gradle||android/app/build.gradle",
            "android/iotdevicesdk/build.gradle||android/iotdevicesdk/build.gradle"
          ]
        }
      },
      "candidate_diff": {
        "android/app/build.gradle||android/app/build.gradle": [
          "File: android/app/build.gradle -> android/app/build.gradle",
          "--- Hunk 1 ---",
          "[Context before]",
          "48: dependencies {",
          "49:     implementation fileTree(dir: 'libs', include: ['*.jar'])",
          "50:     implementation project(\":iotdevicesdk\")",
          "53:     implementation \"org.jetbrains.kotlin:kotlin-stdlib-jdk7:$kotlin_version\"",
          "54:     implementation 'androidx.appcompat:appcompat:1.1.0'",
          "55:     implementation 'androidx.core:core:1.2.0'",
          "",
          "[Removed Lines]",
          "51:     implementation 'software.amazon.awssdk.crt:aws-crt-android:0.15.11'",
          "",
          "[Added Lines]",
          "[None]",
          "",
          "---------------"
        ],
        "android/iotdevicesdk/build.gradle||android/iotdevicesdk/build.gradle": [
          "File: android/iotdevicesdk/build.gradle -> android/iotdevicesdk/build.gradle",
          "--- Hunk 1 ---",
          "[Context before]",
          "91: }",
          "93: dependencies {",
          "95:     implementation 'com.google.code.gson:gson:2.8.5'",
          "96:     implementation 'androidx.appcompat:appcompat:1.1.0'",
          "97:     testImplementation 'junit:junit:4.12'",
          "",
          "[Removed Lines]",
          "94:     implementation 'software.amazon.awssdk.crt:aws-crt-android:0.15.11'",
          "",
          "[Added Lines]",
          "94:     api 'software.amazon.awssdk.crt:aws-crt-android:0.16.0'",
          "95:  implementation 'org.slf4j:slf4j-api:1.7.30'",
          "",
          "---------------"
        ]
      }
    },
    {
      "candidate_hash": "8d4205fef79298c8626820eb5da42b99328b3bb7",
      "candidate_info": {
        "commit_hash": "8d4205fef79298c8626820eb5da42b99328b3bb7",
        "repo": "aws/aws-iot-device-sdk-java-v2",
        "commit_url": "https://github.com/aws/aws-iot-device-sdk-java-v2/commit/8d4205fef79298c8626820eb5da42b99328b3bb7",
        "files": [
          "README.md",
          "android/app/build.gradle",
          "android/iotdevicesdk/build.gradle",
          "sdk/pom.xml",
          "sdk/src/main/java/software/amazon/awssdk/iot/AwsIotMqttConnectionBuilder.java"
        ],
        "message": "update CRT and expose timeout for request (#145)",
        "before_after_code_files": [
          "android/app/build.gradle||android/app/build.gradle",
          "android/iotdevicesdk/build.gradle||android/iotdevicesdk/build.gradle",
          "sdk/src/main/java/software/amazon/awssdk/iot/AwsIotMqttConnectionBuilder.java||sdk/src/main/java/software/amazon/awssdk/iot/AwsIotMqttConnectionBuilder.java"
        ]
      },
      "candidate_patch_features": {
        "candidate_earlier_than_patch": 1,
        "same_branch_evolution": 1,
        "olp_code_files": {
          "patch": [
            "android/app/build.gradle||android/app/build.gradle",
            "android/iotdevicesdk/build.gradle||android/iotdevicesdk/build.gradle"
          ],
          "candidate": [
            "android/app/build.gradle||android/app/build.gradle",
            "android/iotdevicesdk/build.gradle||android/iotdevicesdk/build.gradle"
          ]
        }
      },
      "candidate_diff": {
        "android/app/build.gradle||android/app/build.gradle": [
          "File: android/app/build.gradle -> android/app/build.gradle",
          "--- Hunk 1 ---",
          "[Context before]",
          "50: dependencies {",
          "51:     implementation fileTree(dir: 'libs', include: ['*.jar'])",
          "52:     implementation project(\":iotdevicesdk\")",
          "54:     implementation \"org.jetbrains.kotlin:kotlin-stdlib-jdk7:$kotlin_version\"",
          "55:     implementation 'androidx.appcompat:appcompat:1.1.0'",
          "56:     implementation 'androidx.core:core:1.2.0'",
          "",
          "[Removed Lines]",
          "53:     implementation 'software.amazon.awssdk.crt:android:0.10.10'",
          "",
          "[Added Lines]",
          "53:     implementation 'software.amazon.awssdk.crt:android:0.11.2'",
          "",
          "---------------"
        ],
        "android/iotdevicesdk/build.gradle||android/iotdevicesdk/build.gradle": [
          "File: android/iotdevicesdk/build.gradle -> android/iotdevicesdk/build.gradle",
          "--- Hunk 1 ---",
          "[Context before]",
          "88: dependencies {",
          "89:     implementation fileTree(dir: 'libs', include: ['*.jar'])",
          "91:     implementation 'com.google.code.gson:gson:2.8.5'",
          "92:     implementation 'androidx.appcompat:appcompat:1.1.0'",
          "93:     testImplementation 'junit:junit:4.12'",
          "",
          "[Removed Lines]",
          "90:     implementation 'software.amazon.awssdk.crt:android:0.10.10'",
          "",
          "[Added Lines]",
          "90:     implementation 'software.amazon.awssdk.crt:android:0.11.2'",
          "",
          "---------------"
        ],
        "sdk/src/main/java/software/amazon/awssdk/iot/AwsIotMqttConnectionBuilder.java||sdk/src/main/java/software/amazon/awssdk/iot/AwsIotMqttConnectionBuilder.java": [
          "File: sdk/src/main/java/software/amazon/awssdk/iot/AwsIotMqttConnectionBuilder.java -> sdk/src/main/java/software/amazon/awssdk/iot/AwsIotMqttConnectionBuilder.java",
          "--- Hunk 1 ---",
          "[Context before]",
          "228:         return this;",
          "229:     }",
          "",
          "[Removed Lines]",
          "[None]",
          "",
          "[Added Lines]",
          "238:     public AwsIotMqttConnectionBuilder withProtocolOperationTimeoutMs(int protocolOperationTimeoutMs) {",
          "239:         this.config.setProtocolOperationTimeoutMs(protocolOperationTimeoutMs);",
          "240:         return this;",
          "241:     }",
          "",
          "---------------"
        ]
      }
    },
    {
      "candidate_hash": "9c646ab362b930a7c6763c51b00dcd17c5d3d5b1",
      "candidate_info": {
        "commit_hash": "9c646ab362b930a7c6763c51b00dcd17c5d3d5b1",
        "repo": "aws/aws-iot-device-sdk-java-v2",
        "commit_url": "https://github.com/aws/aws-iot-device-sdk-java-v2/commit/9c646ab362b930a7c6763c51b00dcd17c5d3d5b1",
        "files": [
          "android/app/build.gradle",
          "android/build.gradle",
          "android/gradle/wrapper/gradle-wrapper.properties",
          "android/iotdevicesdk/build.gradle"
        ],
        "message": "Changes required to build latest version for android (#208)\n\n*Issue #, if available:*\nWe trying to use that SDK on Android but files related to gradle build for Android looks abandoned.\n\n*Description of changes:*\nChanges required to build latest version for android\n * added all greengrass sources to android build\n * change compile SDK version to 30.\n * change build tool version to 30.0.2\n * change target API level to 30\n * change NDK version to 23.1.7779620\n * added mavenLocal() explicitly \n * change dependency to android version of CRT software.amazon.awssdk.crt:aws-crt-android:0.15.11\n * change gradle version to 7.0.4\n * set artifact id to aws-iot-device-sdk-android to avoid misunderstanding",
        "before_after_code_files": [
          "android/app/build.gradle||android/app/build.gradle",
          "android/build.gradle||android/build.gradle",
          "android/gradle/wrapper/gradle-wrapper.properties||android/gradle/wrapper/gradle-wrapper.properties",
          "android/iotdevicesdk/build.gradle||android/iotdevicesdk/build.gradle"
        ]
      },
      "candidate_patch_features": {
        "candidate_earlier_than_patch": 0,
        "same_branch_evolution": 1,
        "olp_code_files": {
          "patch": [
            "android/app/build.gradle||android/app/build.gradle",
            "android/iotdevicesdk/build.gradle||android/iotdevicesdk/build.gradle"
          ],
          "candidate": [
            "android/app/build.gradle||android/app/build.gradle",
            "android/iotdevicesdk/build.gradle||android/iotdevicesdk/build.gradle"
          ]
        }
      },
      "candidate_diff": {
        "android/app/build.gradle||android/app/build.gradle": [
          "File: android/app/build.gradle -> android/app/build.gradle",
          "--- Hunk 1 ---",
          "[Context before]",
          "3: apply plugin: 'kotlin-android-extensions'",
          "5: android {",
          "9:     defaultConfig {",
          "10:         applicationId \"software.amazon.awssdk.iotsamples\"",
          "11:         minSdkVersion 26",
          "13:         versionCode 1",
          "14:         versionName \"1.0\"",
          "17:         testInstrumentationRunner \"androidx.test.runner.AndroidJUnitRunner\"",
          "18:     }",
          "",
          "[Removed Lines]",
          "6:     compileSdkVersion 29",
          "7:     buildToolsVersion \"29.0.3\"",
          "12:         targetSdkVersion 29",
          "15:         ndkVersion \"21.0.6113669\"",
          "",
          "[Added Lines]",
          "6:     compileSdkVersion 30",
          "7:     buildToolsVersion \"30.0.2\"",
          "12:         targetSdkVersion 30",
          "15:         ndkVersion \"23.1.7779620\"",
          "",
          "---------------",
          "--- Hunk 2 ---",
          "[Context before]",
          "37:         sourceCompatibility = 1.8",
          "38:         targetCompatibility = 1.8",
          "39:     }",
          "41: }",
          "43: repositories {",
          "44:     mavenCentral()",
          "48: }",
          "50: dependencies {",
          "51:     implementation fileTree(dir: 'libs', include: ['*.jar'])",
          "52:     implementation project(\":iotdevicesdk\")",
          "54:     implementation \"org.jetbrains.kotlin:kotlin-stdlib-jdk7:$kotlin_version\"",
          "55:     implementation 'androidx.appcompat:appcompat:1.1.0'",
          "56:     implementation 'androidx.core:core:1.2.0'",
          "",
          "[Removed Lines]",
          "45:     maven {",
          "46:         url System.getenv('HOME') + \"/.m2/repository\"",
          "47:     }",
          "53:     implementation 'software.amazon.awssdk.crt:android:0.15.8'",
          "",
          "[Added Lines]",
          "40:     ndkVersion '23.1.7779620'",
          "44:     mavenLocal()",
          "51:     implementation 'software.amazon.awssdk.crt:aws-crt-android:0.15.11'",
          "",
          "---------------"
        ],
        "android/build.gradle||android/build.gradle": [
          "File: android/build.gradle -> android/build.gradle",
          "--- Hunk 1 ---",
          "[Context before]",
          "8:         mavenCentral()",
          "9:     }",
          "10:     dependencies {",
          "12:         classpath \"org.jetbrains.kotlin:kotlin-gradle-plugin:$kotlin_version\"",
          "",
          "[Removed Lines]",
          "11:         classpath 'com.android.tools.build:gradle:4.0.0'",
          "",
          "[Added Lines]",
          "11:         classpath \"com.android.tools.build:gradle:7.0.4\"",
          "",
          "---------------",
          "--- Hunk 2 ---",
          "[Context before]",
          "20:     repositories {",
          "21:         google()",
          "22:         jcenter()",
          "24:     }",
          "25: }",
          "",
          "[Removed Lines]",
          "[None]",
          "",
          "[Added Lines]",
          "23:         mavenCentral()",
          "",
          "---------------"
        ],
        "android/gradle/wrapper/gradle-wrapper.properties||android/gradle/wrapper/gradle-wrapper.properties": [
          "File: android/gradle/wrapper/gradle-wrapper.properties -> android/gradle/wrapper/gradle-wrapper.properties",
          "--- Hunk 1 ---",
          "[Context before]",
          "3: distributionPath=wrapper/dists",
          "4: zipStoreBase=GRADLE_USER_HOME",
          "5: zipStorePath=wrapper/dists",
          "",
          "[Removed Lines]",
          "6: distributionUrl=https\\://services.gradle.org/distributions/gradle-6.1.1-all.zip",
          "",
          "[Added Lines]",
          "6: distributionUrl=https\\://services.gradle.org/distributions/gradle-7.0.2-all.zip",
          "",
          "---------------"
        ],
        "android/iotdevicesdk/build.gradle||android/iotdevicesdk/build.gradle": [
          "File: android/iotdevicesdk/build.gradle -> android/iotdevicesdk/build.gradle",
          "--- Hunk 1 ---",
          "[Context before]",
          "42: }",
          "44: android {",
          "48:     defaultConfig {",
          "49:         minSdkVersion 26",
          "51:         versionCode = gitVersionCode()",
          "52:         versionName = gitVersionName()",
          "54:         testInstrumentationRunner \"androidx.test.runner.AndroidJUnitRunner\"",
          "55:         consumerProguardFiles 'consumer-rules.pro'",
          "56:     }",
          "58:     sourceSets {",
          "61:         }",
          "62:     }",
          "64:     buildTypes {",
          "68:         release {",
          "69:             minifyEnabled false",
          "70:             proguardFiles getDefaultProguardFile('proguard-android-optimize.txt'), 'proguard-rules.pro'",
          "72:         }",
          "73:     }",
          "",
          "[Removed Lines]",
          "45:     compileSdkVersion 29",
          "46:     buildToolsVersion \"29.0.3\"",
          "50:         targetSdkVersion 29",
          "53:         ndkVersion \"21.0.6113669\"",
          "59:         main {",
          "60:             java.srcDir '../../sdk/src/main/java'",
          "65:         debug {",
          "66:             versionNameSuffix = gitVersionTag()",
          "67:         }",
          "71:             versionNameSuffix \"\"",
          "",
          "[Added Lines]",
          "45:     compileSdkVersion 30",
          "46:     buildToolsVersion \"30.0.2\"",
          "50:         targetSdkVersion 30",
          "53:         ndkVersion \"23.1.7779620\"",
          "59:         main.java {",
          "60:             srcDirs = ['../../sdk/src/main/java',",
          "61:                        '../../sdk/greengrass/event-stream-rpc-model/src/main/java',",
          "62:                        '../../sdk/greengrass/event-stream-rpc-client/src/main/java',",
          "63:                        '../../sdk/greengrass/event-stream-rpc-server/src/main/java',",
          "64:                        '../../sdk/greengrass/greengrass-client/src/event-stream-rpc-java/client',",
          "65:                        '../../sdk/greengrass/greengrass-client/src/event-stream-rpc-java/model'",
          "66:             ]",
          "74:         }",
          "75:         debug {",
          "76:             minifyEnabled false",
          "77:             proguardFiles getDefaultProguardFile('proguard-android-optimize.txt'), 'proguard-rules.pro'",
          "",
          "---------------",
          "--- Hunk 2 ---",
          "[Context before]",
          "76:         sourceCompatibility = 1.8",
          "77:         targetCompatibility = 1.8",
          "78:     }",
          "79: }",
          "81: repositories {",
          "82:     mavenCentral()",
          "86: }",
          "88: dependencies {",
          "91:     implementation 'com.google.code.gson:gson:2.8.5'",
          "92:     implementation 'androidx.appcompat:appcompat:1.1.0'",
          "93:     testImplementation 'junit:junit:4.12'",
          "",
          "[Removed Lines]",
          "83:     maven {",
          "84:         url System.getenv('HOME') + \"/.m2/repository\"",
          "85:     }",
          "89:     implementation fileTree(dir: 'libs', include: ['*.jar'])",
          "90:     implementation 'software.amazon.awssdk.crt:android:0.15.8'",
          "",
          "[Added Lines]",
          "85:     ndkVersion '23.1.7779620'",
          "89:     mavenLocal()",
          "94:     implementation 'software.amazon.awssdk.crt:aws-crt-android:0.15.11'",
          "",
          "---------------",
          "--- Hunk 3 ---",
          "[Context before]",
          "128:                 from components.release",
          "130:                 groupId = 'software.amazon.awssdk.iotdevicesdk'",
          "132:                 version = android.defaultConfig.versionName",
          "133:             }",
          "134:             debug(MavenPublication) {",
          "135:                 from components.debug",
          "137:                 groupId = 'software.amazon.awssdk.iotdevicesdk'",
          "139:                 version = android.defaultConfig.versionName + '-SNAPSHOT'",
          "140:             }",
          "141:         }",
          "142:         repositories {",
          "143:             maven {",
          "",
          "[Removed Lines]",
          "131:                 artifactId = 'android'",
          "138:                 artifactId = 'android'",
          "",
          "[Added Lines]",
          "135:                 artifactId = 'aws-iot-device-sdk-android'",
          "144:                 artifactId = 'aws-iot-device-sdk-android'",
          "",
          "---------------",
          "--- Hunk 4 ---",
          "[Context before]",
          "145:                 def releaseRepo = \"https://aws.oss.sonatype.org/\"",
          "146:                 url = version.endsWith('SNAPSHOT') ? snapshotRepo : releaseRepo",
          "147:             }",
          "148:         }",
          "149:     }",
          "150: }",
          "",
          "[Removed Lines]",
          "[None]",
          "",
          "[Added Lines]",
          "155:             mavenLocal()",
          "",
          "---------------"
        ]
      }
    }
  ]
}