{
  "cve_id": "CVE-2021-26291",
  "cve_desc": "Apache Maven will follow repositories that are defined in a dependency\u2019s Project Object Model (pom) which may be surprising to some users, resulting in potential risk if a malicious actor takes over that repository or is able to insert themselves into a position to pretend to be that repository. Maven is changing the default behavior in 3.8.1+ to no longer follow http (non-SSL) repository references by default. More details available in the referenced urls. If you are currently using a repository manager to govern the repositories used by your builds, you are unaffected by the risks present in the legacy behavior, and are unaffected by this vulnerability and change to default behavior. See this link for more information about repository management: https://maven.apache.org/repository-management.html",
  "repo": "apache/maven",
  "patch_hash": "fa79cb22e456cc65522b5bab8c4240fe08c5775f",
  "patch_info": {
    "commit_hash": "fa79cb22e456cc65522b5bab8c4240fe08c5775f",
    "repo": "apache/maven",
    "commit_url": "https://github.com/apache/maven/commit/fa79cb22e456cc65522b5bab8c4240fe08c5775f",
    "files": [
      "maven-compat/src/main/java/org/apache/maven/repository/DefaultMirrorSelector.java",
      "maven-core/src/main/java/org/apache/maven/bridge/MavenRepositorySystem.java"
    ],
    "message": "[MNG-7116] add support for mirrorOf external:http:*",
    "before_after_code_files": [
      "maven-compat/src/main/java/org/apache/maven/repository/DefaultMirrorSelector.java||maven-compat/src/main/java/org/apache/maven/repository/DefaultMirrorSelector.java",
      "maven-core/src/main/java/org/apache/maven/bridge/MavenRepositorySystem.java||maven-core/src/main/java/org/apache/maven/bridge/MavenRepositorySystem.java"
    ]
  },
  "patch_diff": {
    "maven-compat/src/main/java/org/apache/maven/repository/DefaultMirrorSelector.java||maven-compat/src/main/java/org/apache/maven/repository/DefaultMirrorSelector.java": [
      "File: maven-compat/src/main/java/org/apache/maven/repository/DefaultMirrorSelector.java -> maven-compat/src/main/java/org/apache/maven/repository/DefaultMirrorSelector.java",
      "--- Hunk 1 ---",
      "[Context before]",
      "42:     private static final String EXTERNAL_WILDCARD = \"external:*\";",
      "44:     public Mirror getMirror( ArtifactRepository repository, List<Mirror> mirrors )",
      "45:     {",
      "46:         String repoId = repository.getId();",
      "",
      "[Removed Lines]",
      "[None]",
      "",
      "[Added Lines]",
      "44:     private static final String EXTERNAL_HTTP_WILDCARD = \"external:http:*\";",
      "",
      "---------------",
      "--- Hunk 2 ---",
      "[Context before]",
      "115:                     result = true;",
      "117:                 }",
      "118:                 else if ( WILDCARD.equals( repo ) )",
      "119:                 {",
      "120:                     result = true;",
      "",
      "[Removed Lines]",
      "[None]",
      "",
      "[Added Lines]",
      "126:                 else if ( EXTERNAL_HTTP_WILDCARD.equals( repo ) && isExternalHttpRepo( originalRepository ) )",
      "127:                 {",
      "128:                     result = true;",
      "130:                 }",
      "",
      "---------------",
      "--- Hunk 3 ---",
      "[Context before]",
      "136:         try",
      "137:         {",
      "138:             URL url = new URL( originalRepository.getUrl() );",
      "141:         }",
      "142:         catch ( MalformedURLException e )",
      "143:         {",
      "",
      "[Removed Lines]",
      "139:             return !( url.getHost().equals( \"localhost\" ) || url.getHost().equals( \"127.0.0.1\" )",
      "140:                             || url.getProtocol().equals( \"file\" ) );",
      "",
      "[Added Lines]",
      "152:             return !( isLocal( url.getHost() ) || url.getProtocol().equals( \"file\" ) );",
      "153:         }",
      "154:         catch ( MalformedURLException e )",
      "155:         {",
      "157:             return false;",
      "158:         }",
      "159:     }",
      "161:     private static boolean isLocal( String host )",
      "162:     {",
      "163:         return \"localhost\".equals( host ) || \"127.0.0.1\".equals( host );",
      "164:     }",
      "172:     static boolean isExternalHttpRepo( ArtifactRepository originalRepository )",
      "173:     {",
      "174:         try",
      "175:         {",
      "176:             URL url = new URL( originalRepository.getUrl() );",
      "177:             return ( \"http\".equalsIgnoreCase( url.getProtocol() ) || \"dav\".equalsIgnoreCase( url.getProtocol() )",
      "178:                 || \"dav:http\".equalsIgnoreCase( url.getProtocol() )",
      "179:                 || \"dav+http\".equalsIgnoreCase( url.getProtocol() ) ) && !isLocal( url.getHost() );",
      "",
      "---------------",
      "--- Hunk 4 ---",
      "[Context before]",
      "146:         }",
      "147:     }",
      "150:     {",
      "151:         return matchesLayout( RepositoryUtils.getLayout( repository ), mirror.getMirrorOfLayouts() );",
      "152:     }",
      "",
      "[Removed Lines]",
      "149:     static boolean matchesLayout( ArtifactRepository repository, Mirror mirror )",
      "",
      "[Added Lines]",
      "188:    static boolean matchesLayout( ArtifactRepository repository, Mirror mirror )",
      "",
      "---------------"
    ],
    "maven-core/src/main/java/org/apache/maven/bridge/MavenRepositorySystem.java||maven-core/src/main/java/org/apache/maven/bridge/MavenRepositorySystem.java": [
      "File: maven-core/src/main/java/org/apache/maven/bridge/MavenRepositorySystem.java -> maven-core/src/main/java/org/apache/maven/bridge/MavenRepositorySystem.java",
      "--- Hunk 1 ---",
      "[Context before]",
      "711:     private static final String EXTERNAL_WILDCARD = \"external:*\";",
      "713:     public static Mirror getMirror( ArtifactRepository repository, List<Mirror> mirrors )",
      "714:     {",
      "715:         String repoId = repository.getId();",
      "",
      "[Removed Lines]",
      "[None]",
      "",
      "[Added Lines]",
      "713:     private static final String EXTERNAL_HTTP_WILDCARD = \"external:http:*\";",
      "",
      "---------------",
      "--- Hunk 2 ---",
      "[Context before]",
      "782:                     result = true;",
      "784:                 }",
      "785:                 else if ( WILDCARD.equals( repo ) )",
      "786:                 {",
      "787:                     result = true;",
      "",
      "[Removed Lines]",
      "[None]",
      "",
      "[Added Lines]",
      "794:                 else if ( EXTERNAL_HTTP_WILDCARD.equals( repo ) && isExternalHttpRepo( originalRepository ) )",
      "795:                 {",
      "796:                     result = true;",
      "798:                 }",
      "",
      "---------------",
      "--- Hunk 3 ---",
      "[Context before]",
      "803:         try",
      "804:         {",
      "805:             URL url = new URL( originalRepository.getUrl() );",
      "808:         }",
      "809:         catch ( MalformedURLException e )",
      "810:         {",
      "",
      "[Removed Lines]",
      "806:             return !( url.getHost().equals( \"localhost\" ) || url.getHost().equals( \"127.0.0.1\" )",
      "807:                             || url.getProtocol().equals( \"file\" ) );",
      "",
      "[Added Lines]",
      "820:             return !( isLocal( url.getHost() ) || url.getProtocol().equals( \"file\" ) );",
      "821:         }",
      "822:         catch ( MalformedURLException e )",
      "823:         {",
      "825:             return false;",
      "826:         }",
      "827:     }",
      "829:     private static boolean isLocal( String host )",
      "830:     {",
      "831:         return \"localhost\".equals( host ) || \"127.0.0.1\".equals( host );",
      "832:     }",
      "840:     static boolean isExternalHttpRepo( ArtifactRepository originalRepository )",
      "841:     {",
      "842:         try",
      "843:         {",
      "844:             URL url = new URL( originalRepository.getUrl() );",
      "845:             return ( \"http\".equalsIgnoreCase( url.getProtocol() ) || \"dav\".equalsIgnoreCase( url.getProtocol() )",
      "846:                 || \"dav:http\".equalsIgnoreCase( url.getProtocol() )",
      "847:                 || \"dav+http\".equalsIgnoreCase( url.getProtocol() ) ) && !isLocal( url.getHost() );",
      "",
      "---------------"
    ]
  },
  "candidates": [
    {
      "candidate_hash": "68e02c27e167352028ab0f3433fffbbe26bd99c0",
      "candidate_info": {
        "commit_hash": "68e02c27e167352028ab0f3433fffbbe26bd99c0",
        "repo": "apache/maven",
        "commit_url": "https://github.com/apache/maven/commit/68e02c27e167352028ab0f3433fffbbe26bd99c0",
        "files": [
          "maven-embedder/src/main/java/org/apache/maven/cli/ResolveFile.java"
        ],
        "message": "[MNG-6071] Normalize relative paths for working directory",
        "before_after_code_files": [
          "maven-embedder/src/main/java/org/apache/maven/cli/ResolveFile.java||maven-embedder/src/main/java/org/apache/maven/cli/ResolveFile.java"
        ]
      },
      "candidate_patch_features": {
        "candidate_earlier_than_patch": 0,
        "same_pr": 1,
        "olp_pr_links": [
          "https://github.com/apache/maven/pull/762"
        ],
        "olp_code_files": {
          "patch": [],
          "candidate": []
        }
      },
      "candidate_diff": {
        "maven-embedder/src/main/java/org/apache/maven/cli/ResolveFile.java||maven-embedder/src/main/java/org/apache/maven/cli/ResolveFile.java": [
          "File: maven-embedder/src/main/java/org/apache/maven/cli/ResolveFile.java -> maven-embedder/src/main/java/org/apache/maven/cli/ResolveFile.java",
          "--- Hunk 1 ---",
          "[Context before]",
          "22: import java.io.File;",
          "",
          "[Removed Lines]",
          "[None]",
          "",
          "[Added Lines]",
          "23: import java.nio.file.Paths;",
          "",
          "---------------",
          "--- Hunk 2 ---",
          "[Context before]",
          "43:         }",
          "44:         else",
          "45:         {",
          "47:         }",
          "48:     }",
          "49: }",
          "",
          "[Removed Lines]",
          "46:             return new File( baseDirectory, file.getPath() ).getAbsoluteFile();",
          "",
          "[Added Lines]",
          "47:             return Paths.get( baseDirectory, file.getPath() ).normalize().toFile();",
          "",
          "---------------"
        ]
      }
    },
    {
      "candidate_hash": "f568170e361ee2f448227ec4c2bce5a2ab2aa99d",
      "candidate_info": {
        "commit_hash": "f568170e361ee2f448227ec4c2bce5a2ab2aa99d",
        "repo": "apache/maven",
        "commit_url": "https://github.com/apache/maven/commit/f568170e361ee2f448227ec4c2bce5a2ab2aa99d",
        "files": [
          "doap_Maven.rdf"
        ],
        "message": "Update DOAP with Maven 3.8.4 release",
        "before_after_code_files": [
          "doap_Maven.rdf||doap_Maven.rdf"
        ]
      },
      "candidate_patch_features": {
        "candidate_earlier_than_patch": 0,
        "same_pr": 1,
        "olp_pr_links": [
          "https://github.com/apache/maven/pull/762"
        ],
        "olp_code_files": {
          "patch": [],
          "candidate": []
        }
      },
      "candidate_diff": {
        "doap_Maven.rdf||doap_Maven.rdf": [
          "File: doap_Maven.rdf -> doap_Maven.rdf",
          "--- Hunk 1 ---",
          "[Context before]",
          "33:     <release>",
          "34:       <Version>",
          "35:         <name>Latest stable release</name>",
          "36:         <created>2021-09-27</created>",
          "37:         <revision>3.8.3</revision>",
          "38:         <file-release>http://archive.apache.org/dist/maven/maven-3/3.8.3/binaries/apache-maven-3.8.3-bin.zip</file-release>",
          "",
          "[Removed Lines]",
          "[None]",
          "",
          "[Added Lines]",
          "36:         <created>2021-11-14</created>",
          "37:         <revision>3.8.4</revision>",
          "38:         <file-release>http://archive.apache.org/dist/maven/maven-3/3.8.4/binaries/apache-maven-3.8.4-bin.zip</file-release>",
          "39:         <file-release>http://archive.apache.org/dist/maven/maven-3/3.8.4/binaries/apache-maven-3.8.4-bin.tar.gz</file-release>",
          "40:         <file-release>http://archive.apache.org/dist/maven/maven-3/3.8.4/source/apache-maven-3.8.4-src.zip</file-release>",
          "41:         <file-release>http://archive.apache.org/dist/maven/maven-3/3.8.4/source/apache-maven-3.8.4-src.tar.gz</file-release>",
          "42:       </Version>",
          "43:       <Version>",
          "44:         <name>Apache Maven 3.8.3</name>",
          "",
          "---------------"
        ]
      }
    },
    {
      "candidate_hash": "27755123e30d46a73ede29cef5b4c340fcdc3fab",
      "candidate_info": {
        "commit_hash": "27755123e30d46a73ede29cef5b4c340fcdc3fab",
        "repo": "apache/maven",
        "commit_url": "https://github.com/apache/maven/commit/27755123e30d46a73ede29cef5b4c340fcdc3fab",
        "files": [
          "maven-artifact/src/main/java/org/apache/maven/repository/legacy/metadata/ArtifactMetadata.java",
          "maven-repository-metadata/src/main/mdo/metadata.mdo",
          "maven-repository-metadata/src/site/apt/index.apt"
        ],
        "message": "[MNG-7385] improve repository metadata documentation",
        "before_after_code_files": [
          "maven-artifact/src/main/java/org/apache/maven/repository/legacy/metadata/ArtifactMetadata.java||maven-artifact/src/main/java/org/apache/maven/repository/legacy/metadata/ArtifactMetadata.java",
          "maven-repository-metadata/src/main/mdo/metadata.mdo||maven-repository-metadata/src/main/mdo/metadata.mdo",
          "maven-repository-metadata/src/site/apt/index.apt||maven-repository-metadata/src/site/apt/index.apt"
        ]
      },
      "candidate_patch_features": {
        "candidate_earlier_than_patch": 0,
        "same_pr": 1,
        "olp_pr_links": [
          "https://github.com/apache/maven/pull/762"
        ],
        "olp_code_files": {
          "patch": [],
          "candidate": []
        }
      },
      "candidate_diff": {
        "maven-artifact/src/main/java/org/apache/maven/repository/legacy/metadata/ArtifactMetadata.java||maven-artifact/src/main/java/org/apache/maven/repository/legacy/metadata/ArtifactMetadata.java": [
          "File: maven-artifact/src/main/java/org/apache/maven/repository/legacy/metadata/ArtifactMetadata.java -> maven-artifact/src/main/java/org/apache/maven/repository/legacy/metadata/ArtifactMetadata.java"
        ],
        "maven-repository-metadata/src/main/mdo/metadata.mdo||maven-repository-metadata/src/main/mdo/metadata.mdo": [
          "File: maven-repository-metadata/src/main/mdo/metadata.mdo -> maven-repository-metadata/src/main/mdo/metadata.mdo",
          "--- Hunk 1 ---",
          "[Context before]",
          "24:   <id>repository-metadata</id>",
          "25:   <name>Metadata</name>",
          "26:   <description><![CDATA[",
          "32:   </description>",
          "33:   <defaults>",
          "34:     <default>",
          "",
          "[Removed Lines]",
          "27:     <p>Per-directory repository metadata, for directories representing un-versioned artifact, snapshot artifact",
          "28:     or a group containing Maven plugins.</p>",
          "29:     <p>Notice that most metadata content has a meaning when the directory represents",
          "30:     an artifact (<code>groupId</code>, <code>artifactId</code>, <code>versioning</code>), but",
          "31:     <code>plugins</code> is used when the directory represents a group.</p>]]>",
          "",
          "[Added Lines]",
          "27:     <p>Per-directory repository metadata <code>repository-metadata.xml</code>.</p>",
          "28:     <p>A directory may represent 3 types of content: \"groupId\", \"groupId/artifactId\" or \"groupId/artifactId/version\".</p>",
          "29:     <p>Most metadata content has a meaning when the directory represents a \"groupId/artifactId\" (<code>groupId</code>, <code>artifactId</code>, <code>versioning</code>)<p>]]>",
          "",
          "---------------",
          "--- Hunk 2 ---",
          "[Context before]",
          "51:           <name>groupId</name>",
          "52:           <version>1.0.0+</version>",
          "53:           <type>String</type>",
          "55:         </field>",
          "56:         <field>",
          "57:           <name>artifactId</name>",
          "58:           <version>1.0.0+</version>",
          "59:           <type>String</type>",
          "67:         </field>",
          "68:         <field>",
          "69:           <name>versioning</name>",
          "",
          "[Removed Lines]",
          "54:           <description>The groupId that this directory represents, if any.</description>",
          "60:           <description>The artifactId that this directory represents, if any.</description>",
          "61:         </field>",
          "62:         <field>",
          "63:           <name>version</name>",
          "64:           <version>1.0.0+</version>",
          "65:           <type>String</type>",
          "66:           <description>The version that this directory represents, if any. It is used for artifact snapshots only.</description>",
          "",
          "[Added Lines]",
          "52:           <description>The groupId when this directory represents \"groupId/artifactId\" or \"groupId/artifactId/version\".</description>",
          "58:           <description>The artifactId when this directory represents \"groupId/artifactId\" or \"groupId/artifactId/version\".</description>",
          "",
          "---------------",
          "--- Hunk 3 ---",
          "[Context before]",
          "71:           <association>",
          "72:             <type>Versioning</type>",
          "73:           </association>",
          "75:         </field>",
          "76:         <field xdoc.separator=\"blank\">",
          "77:           <name>plugins</name>",
          "78:           <version>1.0.0+</version>",
          "80:           <association>",
          "81:             <type>Plugin</type>",
          "82:             <multiplicity>*</multiplicity>",
          "",
          "[Removed Lines]",
          "74:           <description>Versioning information for the artifact.</description>",
          "79:           <description>The set of plugin mappings for the group represented by this directory</description>",
          "",
          "[Added Lines]",
          "66:           <description>Versioning information when this directory represents \"groupId/artifactId\" or \"groupId/artifactId/version\".</description>",
          "67:         </field>",
          "68:         <field>",
          "69:           <name>version</name>",
          "70:           <version>1.0.0+</version>",
          "71:           <type>String</type>",
          "72:           <description><![CDATA[The base version (ie. ending in <code>-SNAPSHOT</code>) when this directory represents a \"groupId/artifactId/version\" for a SNAPSHOT.]]></description>",
          "77:           <description>The set of plugins when this directory represents a \"groupId\" (deprecated)</description>",
          "78:           <annotations>",
          "79:             <annotation>@Deprecated</annotation>",
          "80:           </annotations>",
          "",
          "---------------",
          "--- Hunk 4 ---",
          "[Context before]",
          "213:     <class java.clone=\"deep\">",
          "214:       <name>Versioning</name>",
          "215:       <version>1.0.0+</version>",
          "217:       <fields>",
          "218:         <field>",
          "219:           <name>latest</name>",
          "220:           <version>1.0.0+</version>",
          "221:           <type>String</type>",
          "223:         </field>",
          "224:         <field>",
          "225:           <name>release</name>",
          "226:           <version>1.0.0+</version>",
          "227:           <type>String</type>",
          "237:         </field>",
          "238:         <field>",
          "239:           <name>versions</name>",
          "240:           <version>1.0.0+</version>",
          "242:           <association>",
          "243:             <type>String</type>",
          "244:             <multiplicity>*</multiplicity>",
          "245:           </association>",
          "246:         </field>",
          "248:           <name>lastUpdated</name>",
          "249:           <version>1.0.0+</version>",
          "250:           <type>String</type>",
          "252:         </field>",
          "253:         <field>",
          "254:           <name>snapshotVersions</name>",
          "",
          "[Removed Lines]",
          "216:       <description>Versioning information for an artifact (un-versioned or snapshot)</description>",
          "222:           <description>What the latest version in the directory is, including snapshots</description>",
          "228:           <description>What the latest version in the directory is, of the releases only</description>",
          "229:         </field>",
          "230:         <field>",
          "231:           <name>snapshot</name>",
          "232:           <version>1.0.0+</version>",
          "233:           <association>",
          "234:             <type>Snapshot</type>",
          "235:           </association>",
          "236:           <description>The current snapshot data in use for this version (artifact snapshots only)</description>",
          "241:           <description>Versions available of the artifact (both releases and snapshots)</description>",
          "247:         <field>",
          "251:           <description>When the metadata was last updated</description>",
          "",
          "[Added Lines]",
          "217:       <description>Versioning information for \"groupId/artifactId\" or \"groupId/artifactId/version\" SNAPSHOT</description>",
          "223:           <description>What the last version added to the directory is, including both releases and snapshots (\"groupId/artifactId\" directory only)</description>",
          "229:           <description>What the last version added to the directory is, for the releases only (\"groupId/artifactId\" directory only)</description>",
          "234:           <description>Versions available of the artifact (both releases and snapshots) (\"groupId/artifactId\" directory only)</description>",
          "240:         <field xdoc.separator=\"blank\">",
          "244:           <description>When the metadata was last updated (both \"groupId/artifactId\" and \"groupId/artifactId/version\" directories)</description>",
          "245:         </field>",
          "246:         <field xdoc.separator=\"blank\">",
          "247:           <name>snapshot</name>",
          "248:           <version>1.0.0+</version>",
          "249:           <association>",
          "250:             <type>Snapshot</type>",
          "251:           </association>",
          "252:           <description>The current snapshot data in use for this version (\"groupId/artifactId/version\" only)</description>",
          "",
          "---------------",
          "--- Hunk 5 ---",
          "[Context before]",
          "283:     <class java.clone=\"deep\">",
          "284:       <name>Snapshot</name>",
          "285:       <version>1.0.0+</version>",
          "287:       <fields>",
          "288:         <field>",
          "289:           <name>timestamp</name>",
          "",
          "[Removed Lines]",
          "286:       <description>Snapshot data for the current artifact version</description>",
          "",
          "[Added Lines]",
          "287:       <description>Snapshot data for the last artifact corresponding to the SNAPSHOT base version</description>",
          "",
          "---------------",
          "--- Hunk 6 ---",
          "[Context before]",
          "322:           <name>extension</name>",
          "323:           <version>1.1.0+</version>",
          "324:           <type>String</type>",
          "326:         </field>",
          "327:         <field xml.tagName=\"value\">",
          "328:           <name>version</name>",
          "",
          "[Removed Lines]",
          "325:           <description>The file extension of thesub-artifact.</description>",
          "",
          "[Added Lines]",
          "326:           <description>The file extension of the sub-artifact.</description>",
          "",
          "---------------",
          "--- Hunk 7 ---",
          "[Context before]",
          "338:         </field>",
          "339:       </fields>",
          "340:     </class>",
          "341:     <class java.clone=\"deep\">",
          "342:       <name>Plugin</name>",
          "343:       <version>1.0.0+</version>",
          "345:       <comment>NOTE: plugin version is _NOT_ included here, since it is resolved using a separate algorithm in plugins' artifact.</comment>",
          "346:       <fields>",
          "347:         <field>",
          "",
          "[Removed Lines]",
          "344:       <description>Mapping information for a single plugin within this group</description>",
          "",
          "[Added Lines]",
          "346:       <description>Mapping information for a single plugin within this group (deprecated).</description>",
          "347:       <annotations>",
          "348:         <annotation>@Deprecated</annotation>",
          "349:       </annotations>",
          "",
          "---------------"
        ],
        "maven-repository-metadata/src/site/apt/index.apt||maven-repository-metadata/src/site/apt/index.apt": [
          "File: maven-repository-metadata/src/site/apt/index.apt -> maven-repository-metadata/src/site/apt/index.apt",
          "--- Hunk 1 ---",
          "[Context before]",
          "28:  This is strictly the model for Maven Repository Metadata, so really just plain objects.",
          "38:  []",
          "46:  []",
          "48:  The following are generated from this model:",
          "",
          "[Removed Lines]",
          "30:  Maven Repository Metadata is available in directories representing:",
          "32:  [[1]] an un-versioned artifact: it gives informations about available versions of the artifact,",
          "34:  [[2]] a snapshot artifact: it gives precise information on the snapshot,",
          "36:  [[3]] a group containing Maven plugins artifacts: it gives informations on plugins available in this group.",
          "40:  The metadata file name is:",
          "",
          "[Added Lines]",
          "30:  The metadata file name is:",
          "38:  Depending on what the directory represents (\"groupId\", \"groupId/artifactId\" or \"groupId/artifactId/version\"),",
          "39:  the Maven Repository Metadata file contains 3 different sets of metadata:",
          "41:  [[1]] in a \"groupId\" directory: a \"groupId\" directory may contain Maven plugins artifacts, which are described in metadata's <<<plugins>>> element,",
          "43:  [[2]] in a \"groupId/artifactId\" directory: metadata describes <<<groupId>>>, <<<artifactId>>> and <<<versioning>>> element that",
          "44:        gives data about available versions (<<<latest>>>, <<<release>>>, <<<versions>>> list and <<<lastUpdated>>>),",
          "46:  [[3]] in a \"groupId/artifactId/version\" snapshot artifact directory: metadata describes <<<groupId>>>, <<<artifactId>>>, <<<version>>> (base version, i.e. ending in <<<-SNAPSHOT>>>) and",
          "47:        <<<versioning>>> element that gives data about snaphot (<<<snapshot>>>, <<<lastUpdated>>> and <<<snapshotVersions>>> list). Notice that a",
          "48:        release artifact directory is not expected to provide metadata.",
          "58:  Notice: data about plugins in a directory representing a groupId is deprecated and will be removed in a future Maven version.",
          "59: ~~ logic behind this:",
          "60: ~~ 1. MNG-7266: maven-compat will be removed from future Maven version",
          "61: ~~ 2. this will remove the code that updates plugins data: see MNG-7375/MPLUGIN-384 https://maven.apache.org/ref/3.8.4/maven-compat/apidocs/org/apache/maven/artifact/repository/metadata/GroupRepositoryMetadata.html",
          "62: ~~ 3. this will lead to inconsistent data: removing it will be safer/more clear",
          "63: ~~ but this logic still remains to be confirmed by clear consensus of the whole team",
          "",
          "---------------"
        ]
      }
    },
    {
      "candidate_hash": "5220420212cd576725c19be09f8b351a9625d11a",
      "candidate_info": {
        "commit_hash": "5220420212cd576725c19be09f8b351a9625d11a",
        "repo": "apache/maven",
        "commit_url": "https://github.com/apache/maven/commit/5220420212cd576725c19be09f8b351a9625d11a",
        "files": [
          "doap_Maven.rdf"
        ],
        "message": "Update DOAP with Maven 3.8.5 release",
        "before_after_code_files": [
          "doap_Maven.rdf||doap_Maven.rdf"
        ]
      },
      "candidate_patch_features": {
        "candidate_earlier_than_patch": 0,
        "same_pr": 1,
        "olp_pr_links": [
          "https://github.com/apache/maven/pull/762"
        ],
        "olp_code_files": {
          "patch": [],
          "candidate": []
        }
      },
      "candidate_diff": {
        "doap_Maven.rdf||doap_Maven.rdf": [
          "File: doap_Maven.rdf -> doap_Maven.rdf",
          "--- Hunk 1 ---",
          "[Context before]",
          "33:     <release>",
          "34:       <Version>",
          "35:         <name>Latest stable release</name>",
          "36:         <created>2021-11-14</created>",
          "37:         <revision>3.8.4</revision>",
          "38:         <file-release>http://archive.apache.org/dist/maven/maven-3/3.8.4/binaries/apache-maven-3.8.4-bin.zip</file-release>",
          "",
          "[Removed Lines]",
          "[None]",
          "",
          "[Added Lines]",
          "36:         <created>2022-03-05</created>",
          "37:         <revision>3.8.5</revision>",
          "38:         <file-release>http://archive.apache.org/dist/maven/maven-3/3.8.5/binaries/apache-maven-3.8.5-bin.zip</file-release>",
          "39:         <file-release>http://archive.apache.org/dist/maven/maven-3/3.8.5/binaries/apache-maven-3.8.5-bin.tar.gz</file-release>",
          "40:         <file-release>http://archive.apache.org/dist/maven/maven-3/3.8.5/source/apache-maven-3.8.5-src.zip</file-release>",
          "41:         <file-release>http://archive.apache.org/dist/maven/maven-3/3.8.5/source/apache-maven-3.8.5-src.tar.gz</file-release>",
          "42:       </Version>",
          "43:       <Version>",
          "44:         <name>Apache Maven 3.8.4</name>",
          "",
          "---------------"
        ]
      }
    },
    {
      "candidate_hash": "484e502737a1de00776784516dcf5970734b53f9",
      "candidate_info": {
        "commit_hash": "484e502737a1de00776784516dcf5970734b53f9",
        "repo": "apache/maven",
        "commit_url": "https://github.com/apache/maven/commit/484e502737a1de00776784516dcf5970734b53f9",
        "files": [
          "maven-embedder/src/test/java/org/apache/maven/cli/MavenCliTest.java"
        ],
        "message": "[MNG-7127] fix MavenCliTest.testStyleColors test in JDK 16\n\nThe MavenCliTest.testStyleColors is not failing when the build\nis under JDK 8 or JDK 11.\n\nAfter changing to JDK 16, the test fails, this commit is to fix\nthe NullPointerException.\n\nTested on JDK 8, 11 adn 16 with:\n\n`mvn clean verify`",
        "before_after_code_files": [
          "maven-embedder/src/test/java/org/apache/maven/cli/MavenCliTest.java||maven-embedder/src/test/java/org/apache/maven/cli/MavenCliTest.java"
        ]
      },
      "candidate_patch_features": {
        "candidate_earlier_than_patch": 0,
        "same_pr": 1,
        "olp_pr_links": [
          "https://github.com/apache/maven/pull/762"
        ],
        "olp_code_files": {
          "patch": [],
          "candidate": []
        }
      },
      "candidate_diff": {
        "maven-embedder/src/test/java/org/apache/maven/cli/MavenCliTest.java||maven-embedder/src/test/java/org/apache/maven/cli/MavenCliTest.java": [
          "File: maven-embedder/src/test/java/org/apache/maven/cli/MavenCliTest.java -> maven-embedder/src/test/java/org/apache/maven/cli/MavenCliTest.java",
          "--- Hunk 1 ---",
          "[Context before]",
          "269:         MessageUtils.setColorEnabled( true );",
          "270:         request = new CliRequest( new String[] { \"-l\", \"target/temp/mvn.log\" }, null );",
          "271:         cli.cli( request );",
          "272:         cli.properties( request );",
          "273:         cli.logging( request );",
          "",
          "[Removed Lines]",
          "[None]",
          "",
          "[Added Lines]",
          "271:         request.workingDirectory = \"target/temp\";",
          "",
          "---------------",
          "--- Hunk 2 ---",
          "[Context before]",
          "290:         MessageUtils.setColorEnabled( false );",
          "291:         request = new CliRequest( new String[] { \"-Dstyle.color=always\", \"-B\", \"-l\", \"target/temp/mvn.log\" }, null );",
          "292:         cli.cli( request );",
          "293:         cli.properties( request );",
          "294:         cli.logging( request );",
          "",
          "[Removed Lines]",
          "[None]",
          "",
          "[Added Lines]",
          "293:         request.workingDirectory = \"target/temp\";",
          "",
          "---------------",
          "--- Hunk 3 ---",
          "[Context before]",
          "298:         {",
          "299:             MessageUtils.setColorEnabled( false );",
          "300:             request = new CliRequest( new String[] { \"-Dstyle.color=maybe\", \"-B\", \"-l\", \"target/temp/mvn.log\" }, null );",
          "301:             cli.cli( request );",
          "302:             cli.properties( request );",
          "303:             cli.logging( request );",
          "",
          "[Removed Lines]",
          "[None]",
          "",
          "[Added Lines]",
          "303:             request.workingDirectory = \"target/temp\";",
          "",
          "---------------"
        ]
      }
    }
  ]
}