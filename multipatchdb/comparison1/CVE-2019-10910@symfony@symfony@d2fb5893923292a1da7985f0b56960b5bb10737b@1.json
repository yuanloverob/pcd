{
  "cve_id": "CVE-2019-10910",
  "cve_desc": "In Symfony before 2.7.51, 2.8.x before 2.8.50, 3.x before 3.4.26, 4.x before 4.1.12, and 4.2.x before 4.2.7, when service ids allow user input, this could allow for SQL Injection and remote code execution. This is related to symfony/dependency-injection.",
  "repo": "symfony/symfony",
  "patch_hash": "d2fb5893923292a1da7985f0b56960b5bb10737b",
  "patch_info": {
    "commit_hash": "d2fb5893923292a1da7985f0b56960b5bb10737b",
    "repo": "symfony/symfony",
    "commit_url": "https://github.com/symfony/symfony/commit/d2fb5893923292a1da7985f0b56960b5bb10737b",
    "files": [
      "src/Symfony/Bridge/ProxyManager/LazyProxy/PhpDumper/ProxyDumper.php",
      "src/Symfony/Component/DependencyInjection/ContainerBuilder.php",
      "src/Symfony/Component/DependencyInjection/Dumper/PhpDumper.php",
      "src/Symfony/Component/DependencyInjection/Tests/ContainerBuilderTest.php",
      "src/Symfony/Component/DependencyInjection/Tests/Dumper/PhpDumperTest.php",
      "src/Symfony/Component/DependencyInjection/Tests/Fixtures/php/services33.php",
      "src/Symfony/Component/DependencyInjection/Tests/Fixtures/php/services_adawson.php",
      "src/Symfony/Component/DependencyInjection/Tests/Fixtures/php/services_inline_requires.php",
      "src/Symfony/Component/DependencyInjection/Tests/Fixtures/php/services_inline_self_ref.php",
      "src/Symfony/Component/DependencyInjection/Tests/Fixtures/php/services_rot13_env.php",
      "src/Symfony/Component/DependencyInjection/Tests/Fixtures/php/services_subscriber.php",
      "src/Symfony/Component/DependencyInjection/Tests/Fixtures/php/services_unsupported_characters.php"
    ],
    "message": "[DI] Check service IDs are valid",
    "before_after_code_files": [
      "src/Symfony/Bridge/ProxyManager/LazyProxy/PhpDumper/ProxyDumper.php||src/Symfony/Bridge/ProxyManager/LazyProxy/PhpDumper/ProxyDumper.php",
      "src/Symfony/Component/DependencyInjection/ContainerBuilder.php||src/Symfony/Component/DependencyInjection/ContainerBuilder.php",
      "src/Symfony/Component/DependencyInjection/Dumper/PhpDumper.php||src/Symfony/Component/DependencyInjection/Dumper/PhpDumper.php",
      "src/Symfony/Component/DependencyInjection/Tests/ContainerBuilderTest.php||src/Symfony/Component/DependencyInjection/Tests/ContainerBuilderTest.php",
      "src/Symfony/Component/DependencyInjection/Tests/Dumper/PhpDumperTest.php||src/Symfony/Component/DependencyInjection/Tests/Dumper/PhpDumperTest.php",
      "src/Symfony/Component/DependencyInjection/Tests/Fixtures/php/services33.php||src/Symfony/Component/DependencyInjection/Tests/Fixtures/php/services33.php",
      "src/Symfony/Component/DependencyInjection/Tests/Fixtures/php/services_adawson.php||src/Symfony/Component/DependencyInjection/Tests/Fixtures/php/services_adawson.php",
      "src/Symfony/Component/DependencyInjection/Tests/Fixtures/php/services_inline_requires.php||src/Symfony/Component/DependencyInjection/Tests/Fixtures/php/services_inline_requires.php",
      "src/Symfony/Component/DependencyInjection/Tests/Fixtures/php/services_inline_self_ref.php||src/Symfony/Component/DependencyInjection/Tests/Fixtures/php/services_inline_self_ref.php",
      "src/Symfony/Component/DependencyInjection/Tests/Fixtures/php/services_rot13_env.php||src/Symfony/Component/DependencyInjection/Tests/Fixtures/php/services_rot13_env.php",
      "src/Symfony/Component/DependencyInjection/Tests/Fixtures/php/services_subscriber.php||src/Symfony/Component/DependencyInjection/Tests/Fixtures/php/services_subscriber.php",
      "src/Symfony/Component/DependencyInjection/Tests/Fixtures/php/services_unsupported_characters.php||src/Symfony/Component/DependencyInjection/Tests/Fixtures/php/services_unsupported_characters.php"
    ]
  },
  "patch_diff": {
    "src/Symfony/Bridge/ProxyManager/LazyProxy/PhpDumper/ProxyDumper.php||src/Symfony/Bridge/ProxyManager/LazyProxy/PhpDumper/ProxyDumper.php": [
      "File: src/Symfony/Bridge/ProxyManager/LazyProxy/PhpDumper/ProxyDumper.php -> src/Symfony/Bridge/ProxyManager/LazyProxy/PhpDumper/ProxyDumper.php",
      "--- Hunk 1 ---",
      "[Context before]",
      "58:         $instantiation = 'return';",
      "60:         if ($definition->isShared()) {",
      "62:         }",
      "64:         if (null === $factoryCode) {",
      "",
      "[Removed Lines]",
      "61:             $instantiation .= sprintf(' $this->%s[\\'%s\\'] =', \\method_exists(ContainerBuilder::class, 'addClassResource') || ($definition->isPublic() && !$definition->isPrivate()) ? 'services' : 'privates', $id);",
      "",
      "[Added Lines]",
      "61:             $instantiation .= sprintf(' $this->%s[%s] =', \\method_exists(ContainerBuilder::class, 'addClassResource') || ($definition->isPublic() && !$definition->isPrivate()) ? 'services' : 'privates', var_export($id, true));",
      "",
      "---------------"
    ],
    "src/Symfony/Component/DependencyInjection/ContainerBuilder.php||src/Symfony/Component/DependencyInjection/ContainerBuilder.php": [
      "File: src/Symfony/Component/DependencyInjection/ContainerBuilder.php -> src/Symfony/Component/DependencyInjection/ContainerBuilder.php",
      "--- Hunk 1 ---",
      "[Context before]",
      "868:     {",
      "869:         $alias = $this->normalizeId($alias);",
      "871:         if (\\is_string($id)) {",
      "872:             $id = new Alias($this->normalizeId($id));",
      "873:         } elseif (!$id instanceof Alias) {",
      "",
      "[Removed Lines]",
      "[None]",
      "",
      "[Added Lines]",
      "871:         if ('' === $alias || '\\\\' === substr($alias, -1) || \\strlen($alias) !== strcspn($alias, \"\\0\\r\\n'\")) {",
      "872:             throw new InvalidArgumentException(sprintf('Invalid alias id: \"%s\"', $alias));",
      "873:         }",
      "",
      "---------------",
      "--- Hunk 2 ---",
      "[Context before]",
      "1022:         $id = $this->normalizeId($id);",
      "1024:         unset($this->aliasDefinitions[$id], $this->removedIds[$id]);",
      "1026:         return $this->definitions[$id] = $definition;",
      "",
      "[Removed Lines]",
      "[None]",
      "",
      "[Added Lines]",
      "1028:         if ('' === $id || '\\\\' === substr($id, -1) || \\strlen($id) !== strcspn($id, \"\\0\\r\\n'\")) {",
      "1029:             throw new InvalidArgumentException(sprintf('Invalid service id: \"%s\"', $id));",
      "1030:         }",
      "",
      "---------------"
    ],
    "src/Symfony/Component/DependencyInjection/Dumper/PhpDumper.php||src/Symfony/Component/DependencyInjection/Dumper/PhpDumper.php": [
      "File: src/Symfony/Component/DependencyInjection/Dumper/PhpDumper.php -> src/Symfony/Component/DependencyInjection/Dumper/PhpDumper.php",
      "--- Hunk 1 ---",
      "[Context before]",
      "483:         $instantiation = '';",
      "485:         if (!$isProxyCandidate && $definition->isShared()) {",
      "487:         } elseif (!$isSimpleInstance) {",
      "488:             $instantiation = '$instance';",
      "489:         }",
      "",
      "[Removed Lines]",
      "486:             $instantiation = \"\\$this->services['$id'] = \".($isSimpleInstance ? '' : '$instance');",
      "",
      "[Added Lines]",
      "486:             $instantiation = sprintf('$this->services[%s] = %s', $this->doExport($id), $isSimpleInstance ? '' : '$instance');",
      "",
      "---------------",
      "--- Hunk 2 ---",
      "[Context before]",
      "683:     protected function {$methodName}($lazyInitialization)",
      "684:     {",
      "",
      "[Removed Lines]",
      "[None]",
      "",
      "[Added Lines]",
      "682: EOF;",
      "683:             $code = str_replace('*/', ' ', $code).<<<EOF",
      "",
      "---------------",
      "--- Hunk 3 ---",
      "[Context before]",
      "694:         if ($this->getProxyDumper()->isProxyCandidate($definition)) {",
      "695:             $factoryCode = $asFile ? \"\\$this->load('%s.php', false)\" : '$this->%s(false)';",
      "697:         }",
      "699:         if ($definition->isDeprecated()) {",
      "",
      "[Removed Lines]",
      "696:             $code .= $this->getProxyDumper()->getProxyFactoryCode($definition, $id, sprintf($factoryCode, $methodName));",
      "",
      "[Added Lines]",
      "699:             $code .= $this->getProxyDumper()->getProxyFactoryCode($definition, $id, sprintf($factoryCode, $methodName, $this->doExport($id)));",
      "",
      "---------------",
      "--- Hunk 4 ---",
      "[Context before]",
      "768:         $code .= sprintf(<<<'EOTXT'",
      "772:         }",
      "774: EOTXT",
      "775:             ,",
      "776:             'services',",
      "778:         );",
      "780:         return $code;",
      "",
      "[Removed Lines]",
      "770:         if (isset($this->%s['%s'])) {",
      "771:             return $this->%1$s['%2$s'];",
      "777:             $id",
      "",
      "[Added Lines]",
      "773:         if (isset($this->%s[%s])) {",
      "774:             return $this->%1$s[%2$s];",
      "780:             $this->doExport($id)",
      "",
      "---------------",
      "--- Hunk 5 ---",
      "[Context before]",
      "1530:             if (!$this->container->hasDefinition($service)) {",
      "1531:                 return 'false';",
      "1532:             }",
      "1534:         }",
      "1535:         foreach (ContainerBuilder::getServiceConditionals($value) as $service) {",
      "1536:             if ($this->container->hasDefinition($service) && !$this->container->getDefinition($service)->isPublic()) {",
      "1537:                 continue;",
      "1538:             }",
      "1541:         }",
      "1543:         if (!$conditions) {",
      "",
      "[Removed Lines]",
      "1533:             $conditions[] = sprintf(\"isset(\\$this->services['%s'])\", $service);",
      "1540:             $conditions[] = sprintf(\"\\$this->has('%s')\", $service);",
      "",
      "[Added Lines]",
      "1536:             $conditions[] = sprintf('isset($this->services[%s])', $this->doExport($service));",
      "1543:             $conditions[] = sprintf('$this->has(%s)', $this->doExport($service));",
      "",
      "---------------",
      "--- Hunk 6 ---",
      "[Context before]",
      "1777:     private function dumpParameter($name)",
      "1778:     {",
      "1779:         if ($this->container->isCompiled() && $this->container->hasParameter($name)) {",
      "1780:             $value = $this->container->getParameter($name);",
      "1781:             $dumpedValue = $this->dumpValue($value, false);",
      "",
      "[Removed Lines]",
      "[None]",
      "",
      "[Added Lines]",
      "1782:         $name = (string) $name;",
      "",
      "---------------",
      "--- Hunk 7 ---",
      "[Context before]",
      "1785:             }",
      "1787:             if (!preg_match(\"/\\\\\\$this->(?:getEnv\\('(?:\\w++:)*+\\w++'\\)|targetDirs\\[\\d++\\])/\", $dumpedValue)) {",
      "1789:             }",
      "1790:         }",
      "1793:     }",
      "",
      "[Removed Lines]",
      "1788:                 return sprintf(\"\\$this->parameters['%s']\", $name);",
      "1792:         return sprintf(\"\\$this->getParameter('%s')\", $name);",
      "",
      "[Added Lines]",
      "1793:                 return sprintf('$this->parameters[%s]', $this->doExport($name));",
      "1797:         return sprintf('$this->getParameter(%s)', $this->doExport($name));",
      "",
      "---------------",
      "--- Hunk 8 ---",
      "[Context before]",
      "1814:         if ($this->container->hasDefinition($id) && $definition = $this->container->getDefinition($id)) {",
      "1815:             if ($definition->isSynthetic()) {",
      "1817:             } elseif (null !== $reference && ContainerInterface::IGNORE_ON_UNINITIALIZED_REFERENCE === $reference->getInvalidBehavior()) {",
      "1818:                 $code = 'null';",
      "1819:                 if (!$definition->isShared()) {",
      "",
      "[Removed Lines]",
      "1816:                 $code = sprintf('$this->get(\\'%s\\'%s)', $id, null !== $reference ? ', '.$reference->getInvalidBehavior() : '');",
      "",
      "[Added Lines]",
      "1821:                 $code = sprintf('$this->get(%s%s)', $this->doExport($id), null !== $reference ? ', '.$reference->getInvalidBehavior() : '');",
      "",
      "---------------",
      "--- Hunk 9 ---",
      "[Context before]",
      "1822:             } elseif ($this->isTrivialInstance($definition)) {",
      "1823:                 $code = substr($this->addNewInstance($definition, '', '', $id), 8, -2);",
      "1824:                 if ($definition->isShared()) {",
      "1826:                 }",
      "1827:                 $code = \"($code)\";",
      "1828:             } elseif ($this->asFiles && $definition->isShared() && !$this->isHotPath($definition)) {",
      "",
      "[Removed Lines]",
      "1825:                     $code = sprintf('$this->services[\\'%s\\'] = %s', $id, $code);",
      "",
      "[Added Lines]",
      "1830:                     $code = sprintf('$this->services[%s] = %s', $this->doExport($id), $code);",
      "",
      "---------------",
      "--- Hunk 10 ---",
      "[Context before]",
      "1833:         } elseif (null !== $reference && ContainerInterface::IGNORE_ON_UNINITIALIZED_REFERENCE === $reference->getInvalidBehavior()) {",
      "1834:             return 'null';",
      "1835:         } elseif (null !== $reference && ContainerInterface::EXCEPTION_ON_INVALID_REFERENCE !== $reference->getInvalidBehavior()) {",
      "1837:         } else {",
      "1839:         }",
      "1844:     }",
      "",
      "[Removed Lines]",
      "1836:             $code = sprintf('$this->get(\\'%s\\', /* ContainerInterface::NULL_ON_INVALID_REFERENCE */ %d)', $id, ContainerInterface::NULL_ON_INVALID_REFERENCE);",
      "1838:             $code = sprintf('$this->get(\\'%s\\')', $id);",
      "1843:         return \"\\${(\\$_ = isset(\\$this->services['$id']) ? \\$this->services['$id'] : $code) && false ?: '_'}\";",
      "",
      "[Added Lines]",
      "1841:             $code = sprintf('$this->get(%s, /* ContainerInterface::NULL_ON_INVALID_REFERENCE */ %d)', $this->doExport($id), ContainerInterface::NULL_ON_INVALID_REFERENCE);",
      "1843:             $code = sprintf('$this->get(%s)', $this->doExport($id));",
      "1848:         return sprintf(\"\\${(\\$_ = isset(\\$this->services[%s]) ? \\$this->services[%1\\$s] : %s) && false ?: '_'}\", $this->doExport($id), $code);",
      "",
      "---------------"
    ],
    "src/Symfony/Component/DependencyInjection/Tests/ContainerBuilderTest.php||src/Symfony/Component/DependencyInjection/Tests/ContainerBuilderTest.php": [
      "File: src/Symfony/Component/DependencyInjection/Tests/ContainerBuilderTest.php -> src/Symfony/Component/DependencyInjection/Tests/ContainerBuilderTest.php",
      "--- Hunk 1 ---",
      "[Context before]",
      "195:         $this->assertNotSame($builder->get('bar'), $builder->get('bar'));",
      "196:     }",
      "",
      "[Removed Lines]",
      "[None]",
      "",
      "[Added Lines]",
      "202:     public function testBadAliasId($id)",
      "203:     {",
      "204:         $builder = new ContainerBuilder();",
      "205:         $builder->setAlias($id, 'foo');",
      "206:     }",
      "212:     public function testBadDefinitionId($id)",
      "213:     {",
      "214:         $builder = new ContainerBuilder();",
      "215:         $builder->setDefinition($id, new Definition('Foo'));",
      "216:     }",
      "218:     public function provideBadId()",
      "219:     {",
      "220:         return [",
      "221:             [''],",
      "222:             [\"\\0\"],",
      "223:             [\"\\r\"],",
      "224:             [\"\\n\"],",
      "225:             [\"'\"],",
      "226:             ['ab\\\\'],",
      "227:         ];",
      "228:     }",
      "",
      "---------------"
    ],
    "src/Symfony/Component/DependencyInjection/Tests/Dumper/PhpDumperTest.php||src/Symfony/Component/DependencyInjection/Tests/Dumper/PhpDumperTest.php": [
      "File: src/Symfony/Component/DependencyInjection/Tests/Dumper/PhpDumperTest.php -> src/Symfony/Component/DependencyInjection/Tests/Dumper/PhpDumperTest.php",
      "--- Hunk 1 ---",
      "[Context before]",
      "234:     {",
      "235:         $class = 'Symfony_DI_PhpDumper_Test_Unsupported_Characters';",
      "236:         $container = new ContainerBuilder();",
      "237:         $container->register('bar$', 'FooClass')->setPublic(true);",
      "238:         $container->register('bar$!', 'FooClass')->setPublic(true);",
      "239:         $container->compile();",
      "240:         $dumper = new PhpDumper($container);",
      "243:         $this->assertTrue(method_exists($class, 'getBarService'));",
      "244:         $this->assertTrue(method_exists($class, 'getBar2Service'));",
      "245:     }",
      "",
      "[Removed Lines]",
      "241:         eval('?>'.$dumper->dump(['class' => $class]));",
      "",
      "[Added Lines]",
      "237:         $container->setParameter(\"'\", 'oh-no');",
      "238:         $container->register(\"foo*/oh-no\", 'FooClass')->setPublic(true);",
      "244:         $this->assertStringEqualsFile(self::$fixturesPath.'/php/services_unsupported_characters.php', $dumper->dump(['class' => $class]));",
      "246:         require_once self::$fixturesPath.'/php/services_unsupported_characters.php';",
      "248:         $this->assertTrue(method_exists($class, 'getFooOhNoService'));",
      "",
      "---------------"
    ],
    "src/Symfony/Component/DependencyInjection/Tests/Fixtures/php/services33.php||src/Symfony/Component/DependencyInjection/Tests/Fixtures/php/services33.php": [
      "File: src/Symfony/Component/DependencyInjection/Tests/Fixtures/php/services33.php -> src/Symfony/Component/DependencyInjection/Tests/Fixtures/php/services33.php",
      "--- Hunk 1 ---",
      "[Context before]",
      "67:     protected function getFooService()",
      "68:     {",
      "70:     }",
      "",
      "[Removed Lines]",
      "69:         return $this->services['Bar\\Foo'] = new \\Bar\\Foo();",
      "",
      "[Added Lines]",
      "69:         return $this->services['Bar\\\\Foo'] = new \\Bar\\Foo();",
      "",
      "---------------",
      "--- Hunk 2 ---",
      "[Context before]",
      "77:     protected function getFoo2Service()",
      "78:     {",
      "80:     }",
      "81: }",
      "",
      "[Removed Lines]",
      "79:         return $this->services['Foo\\Foo'] = new \\Foo\\Foo();",
      "",
      "[Added Lines]",
      "79:         return $this->services['Foo\\\\Foo'] = new \\Foo\\Foo();",
      "",
      "---------------"
    ],
    "src/Symfony/Component/DependencyInjection/Tests/Fixtures/php/services_adawson.php||src/Symfony/Component/DependencyInjection/Tests/Fixtures/php/services_adawson.php": [
      "File: src/Symfony/Component/DependencyInjection/Tests/Fixtures/php/services_adawson.php -> src/Symfony/Component/DependencyInjection/Tests/Fixtures/php/services_adawson.php",
      "--- Hunk 1 ---",
      "[Context before]",
      "89:     protected function getBusService()",
      "90:     {",
      "96:         return $instance;",
      "97:     }",
      "",
      "[Removed Lines]",
      "91:         $this->services['App\\Bus'] = $instance = new \\App\\Bus(${($_ = isset($this->services['App\\Db']) ? $this->services['App\\Db'] : $this->getDbService()) && false ?: '_'});",
      "93:         $instance->handler1 = ${($_ = isset($this->services['App\\Handler1']) ? $this->services['App\\Handler1'] : $this->getHandler1Service()) && false ?: '_'};",
      "94:         $instance->handler2 = ${($_ = isset($this->services['App\\Handler2']) ? $this->services['App\\Handler2'] : $this->getHandler2Service()) && false ?: '_'};",
      "",
      "[Added Lines]",
      "91:         $this->services['App\\\\Bus'] = $instance = new \\App\\Bus(${($_ = isset($this->services['App\\\\Db']) ? $this->services['App\\\\Db'] : $this->getDbService()) && false ?: '_'});",
      "93:         $instance->handler1 = ${($_ = isset($this->services['App\\\\Handler1']) ? $this->services['App\\\\Handler1'] : $this->getHandler1Service()) && false ?: '_'};",
      "94:         $instance->handler2 = ${($_ = isset($this->services['App\\\\Handler2']) ? $this->services['App\\\\Handler2'] : $this->getHandler2Service()) && false ?: '_'};",
      "",
      "---------------",
      "--- Hunk 2 ---",
      "[Context before]",
      "104:     protected function getDbService()",
      "105:     {",
      "110:         return $instance;",
      "111:     }",
      "",
      "[Removed Lines]",
      "106:         $this->services['App\\Db'] = $instance = new \\App\\Db();",
      "108:         $instance->schema = ${($_ = isset($this->services['App\\Schema']) ? $this->services['App\\Schema'] : $this->getSchemaService()) && false ?: '_'};",
      "",
      "[Added Lines]",
      "106:         $this->services['App\\\\Db'] = $instance = new \\App\\Db();",
      "108:         $instance->schema = ${($_ = isset($this->services['App\\\\Schema']) ? $this->services['App\\\\Schema'] : $this->getSchemaService()) && false ?: '_'};",
      "",
      "---------------",
      "--- Hunk 3 ---",
      "[Context before]",
      "118:     protected function getHandler1Service()",
      "119:     {",
      "124:         }",
      "127:     }",
      "",
      "[Removed Lines]",
      "120:         $a = ${($_ = isset($this->services['App\\Processor']) ? $this->services['App\\Processor'] : $this->getProcessorService()) && false ?: '_'};",
      "122:         if (isset($this->services['App\\Handler1'])) {",
      "123:             return $this->services['App\\Handler1'];",
      "126:         return $this->services['App\\Handler1'] = new \\App\\Handler1(${($_ = isset($this->services['App\\Db']) ? $this->services['App\\Db'] : $this->getDbService()) && false ?: '_'}, ${($_ = isset($this->services['App\\Schema']) ? $this->services['App\\Schema'] : $this->getSchemaService()) && false ?: '_'}, $a);",
      "",
      "[Added Lines]",
      "120:         $a = ${($_ = isset($this->services['App\\\\Processor']) ? $this->services['App\\\\Processor'] : $this->getProcessorService()) && false ?: '_'};",
      "122:         if (isset($this->services['App\\\\Handler1'])) {",
      "123:             return $this->services['App\\\\Handler1'];",
      "126:         return $this->services['App\\\\Handler1'] = new \\App\\Handler1(${($_ = isset($this->services['App\\\\Db']) ? $this->services['App\\\\Db'] : $this->getDbService()) && false ?: '_'}, ${($_ = isset($this->services['App\\\\Schema']) ? $this->services['App\\\\Schema'] : $this->getSchemaService()) && false ?: '_'}, $a);",
      "",
      "---------------",
      "--- Hunk 4 ---",
      "[Context before]",
      "134:     protected function getHandler2Service()",
      "135:     {",
      "140:         }",
      "143:     }",
      "",
      "[Removed Lines]",
      "136:         $a = ${($_ = isset($this->services['App\\Processor']) ? $this->services['App\\Processor'] : $this->getProcessorService()) && false ?: '_'};",
      "138:         if (isset($this->services['App\\Handler2'])) {",
      "139:             return $this->services['App\\Handler2'];",
      "142:         return $this->services['App\\Handler2'] = new \\App\\Handler2(${($_ = isset($this->services['App\\Db']) ? $this->services['App\\Db'] : $this->getDbService()) && false ?: '_'}, ${($_ = isset($this->services['App\\Schema']) ? $this->services['App\\Schema'] : $this->getSchemaService()) && false ?: '_'}, $a);",
      "",
      "[Added Lines]",
      "136:         $a = ${($_ = isset($this->services['App\\\\Processor']) ? $this->services['App\\\\Processor'] : $this->getProcessorService()) && false ?: '_'};",
      "138:         if (isset($this->services['App\\\\Handler2'])) {",
      "139:             return $this->services['App\\\\Handler2'];",
      "142:         return $this->services['App\\\\Handler2'] = new \\App\\Handler2(${($_ = isset($this->services['App\\\\Db']) ? $this->services['App\\\\Db'] : $this->getDbService()) && false ?: '_'}, ${($_ = isset($this->services['App\\\\Schema']) ? $this->services['App\\\\Schema'] : $this->getSchemaService()) && false ?: '_'}, $a);",
      "",
      "---------------",
      "--- Hunk 5 ---",
      "[Context before]",
      "150:     protected function getProcessorService()",
      "151:     {",
      "156:         }",
      "159:     }",
      "",
      "[Removed Lines]",
      "152:         $a = ${($_ = isset($this->services['App\\Registry']) ? $this->services['App\\Registry'] : $this->getRegistryService()) && false ?: '_'};",
      "154:         if (isset($this->services['App\\Processor'])) {",
      "155:             return $this->services['App\\Processor'];",
      "158:         return $this->services['App\\Processor'] = new \\App\\Processor($a, ${($_ = isset($this->services['App\\Db']) ? $this->services['App\\Db'] : $this->getDbService()) && false ?: '_'});",
      "",
      "[Added Lines]",
      "152:         $a = ${($_ = isset($this->services['App\\\\Registry']) ? $this->services['App\\\\Registry'] : $this->getRegistryService()) && false ?: '_'};",
      "154:         if (isset($this->services['App\\\\Processor'])) {",
      "155:             return $this->services['App\\\\Processor'];",
      "158:         return $this->services['App\\\\Processor'] = new \\App\\Processor($a, ${($_ = isset($this->services['App\\\\Db']) ? $this->services['App\\\\Db'] : $this->getDbService()) && false ?: '_'});",
      "",
      "---------------",
      "--- Hunk 6 ---",
      "[Context before]",
      "166:     protected function getRegistryService()",
      "167:     {",
      "172:         return $instance;",
      "173:     }",
      "",
      "[Removed Lines]",
      "168:         $this->services['App\\Registry'] = $instance = new \\App\\Registry();",
      "170:         $instance->processor = [0 => ${($_ = isset($this->services['App\\Db']) ? $this->services['App\\Db'] : $this->getDbService()) && false ?: '_'}, 1 => ${($_ = isset($this->services['App\\Bus']) ? $this->services['App\\Bus'] : $this->getBusService()) && false ?: '_'}];",
      "",
      "[Added Lines]",
      "168:         $this->services['App\\\\Registry'] = $instance = new \\App\\Registry();",
      "170:         $instance->processor = [0 => ${($_ = isset($this->services['App\\\\Db']) ? $this->services['App\\\\Db'] : $this->getDbService()) && false ?: '_'}, 1 => ${($_ = isset($this->services['App\\\\Bus']) ? $this->services['App\\\\Bus'] : $this->getBusService()) && false ?: '_'}];",
      "",
      "---------------",
      "--- Hunk 7 ---",
      "[Context before]",
      "180:     protected function getSchemaService()",
      "181:     {",
      "186:         }",
      "189:     }",
      "190: }",
      "",
      "[Removed Lines]",
      "182:         $a = ${($_ = isset($this->services['App\\Db']) ? $this->services['App\\Db'] : $this->getDbService()) && false ?: '_'};",
      "184:         if (isset($this->services['App\\Schema'])) {",
      "185:             return $this->services['App\\Schema'];",
      "188:         return $this->services['App\\Schema'] = new \\App\\Schema($a);",
      "",
      "[Added Lines]",
      "182:         $a = ${($_ = isset($this->services['App\\\\Db']) ? $this->services['App\\\\Db'] : $this->getDbService()) && false ?: '_'};",
      "184:         if (isset($this->services['App\\\\Schema'])) {",
      "185:             return $this->services['App\\\\Schema'];",
      "188:         return $this->services['App\\\\Schema'] = new \\App\\Schema($a);",
      "",
      "---------------"
    ],
    "src/Symfony/Component/DependencyInjection/Tests/Fixtures/php/services_inline_requires.php||src/Symfony/Component/DependencyInjection/Tests/Fixtures/php/services_inline_requires.php": [
      "File: src/Symfony/Component/DependencyInjection/Tests/Fixtures/php/services_inline_requires.php -> src/Symfony/Component/DependencyInjection/Tests/Fixtures/php/services_inline_requires.php",
      "--- Hunk 1 ---",
      "[Context before]",
      "88:     protected function getParentNotExistsService()",
      "89:     {",
      "91:     }",
      "",
      "[Removed Lines]",
      "90:         return $this->services['Symfony\\Component\\DependencyInjection\\Tests\\Fixtures\\ParentNotExists'] = new \\Symfony\\Component\\DependencyInjection\\Tests\\Fixtures\\ParentNotExists();",
      "",
      "[Added Lines]",
      "90:         return $this->services['Symfony\\\\Component\\\\DependencyInjection\\\\Tests\\\\Fixtures\\\\ParentNotExists'] = new \\Symfony\\Component\\DependencyInjection\\Tests\\Fixtures\\ParentNotExists();",
      "",
      "---------------",
      "--- Hunk 2 ---",
      "[Context before]",
      "98:     protected function getC1Service()",
      "99:     {",
      "101:     }",
      "",
      "[Removed Lines]",
      "100:         return $this->services['Symfony\\Component\\DependencyInjection\\Tests\\Fixtures\\includes\\HotPath\\C1'] = new \\Symfony\\Component\\DependencyInjection\\Tests\\Fixtures\\includes\\HotPath\\C1();",
      "",
      "[Added Lines]",
      "100:         return $this->services['Symfony\\\\Component\\\\DependencyInjection\\\\Tests\\\\Fixtures\\\\includes\\\\HotPath\\\\C1'] = new \\Symfony\\Component\\DependencyInjection\\Tests\\Fixtures\\includes\\HotPath\\C1();",
      "",
      "---------------",
      "--- Hunk 3 ---",
      "[Context before]",
      "110:         include_once $this->targetDirs[1].'/includes/HotPath/C2.php';",
      "111:         include_once $this->targetDirs[1].'/includes/HotPath/C3.php';",
      "114:     }",
      "",
      "[Removed Lines]",
      "113:         return $this->services['Symfony\\Component\\DependencyInjection\\Tests\\Fixtures\\includes\\HotPath\\C2'] = new \\Symfony\\Component\\DependencyInjection\\Tests\\Fixtures\\includes\\HotPath\\C2(${($_ = isset($this->services['Symfony\\Component\\DependencyInjection\\Tests\\Fixtures\\includes\\HotPath\\C3']) ? $this->services['Symfony\\Component\\DependencyInjection\\Tests\\Fixtures\\includes\\HotPath\\C3'] : ($this->services['Symfony\\Component\\DependencyInjection\\Tests\\Fixtures\\includes\\HotPath\\C3'] = new \\Symfony\\Component\\DependencyInjection\\Tests\\Fixtures\\includes\\HotPath\\C3())) && false ?: '_'});",
      "",
      "[Added Lines]",
      "113:         return $this->services['Symfony\\\\Component\\\\DependencyInjection\\\\Tests\\\\Fixtures\\\\includes\\\\HotPath\\\\C2'] = new \\Symfony\\Component\\DependencyInjection\\Tests\\Fixtures\\includes\\HotPath\\C2(${($_ = isset($this->services['Symfony\\\\Component\\\\DependencyInjection\\\\Tests\\\\Fixtures\\\\includes\\\\HotPath\\\\C3']) ? $this->services['Symfony\\\\Component\\\\DependencyInjection\\\\Tests\\\\Fixtures\\\\includes\\\\HotPath\\\\C3'] : ($this->services['Symfony\\\\Component\\\\DependencyInjection\\\\Tests\\\\Fixtures\\\\includes\\\\HotPath\\\\C3'] = new \\Symfony\\Component\\DependencyInjection\\Tests\\Fixtures\\includes\\HotPath\\C3())) && false ?: '_'});",
      "",
      "---------------",
      "--- Hunk 4 ---",
      "[Context before]",
      "122:     {",
      "123:         include_once $this->targetDirs[1].'/includes/HotPath/C3.php';",
      "126:     }",
      "128:     public function getParameter($name)",
      "",
      "[Removed Lines]",
      "125:         return $this->services['Symfony\\Component\\DependencyInjection\\Tests\\Fixtures\\includes\\HotPath\\C3'] = new \\Symfony\\Component\\DependencyInjection\\Tests\\Fixtures\\includes\\HotPath\\C3();",
      "",
      "[Added Lines]",
      "125:         return $this->services['Symfony\\\\Component\\\\DependencyInjection\\\\Tests\\\\Fixtures\\\\includes\\\\HotPath\\\\C3'] = new \\Symfony\\Component\\DependencyInjection\\Tests\\Fixtures\\includes\\HotPath\\C3();",
      "",
      "---------------"
    ],
    "src/Symfony/Component/DependencyInjection/Tests/Fixtures/php/services_inline_self_ref.php||src/Symfony/Component/DependencyInjection/Tests/Fixtures/php/services_inline_self_ref.php": [
      "File: src/Symfony/Component/DependencyInjection/Tests/Fixtures/php/services_inline_self_ref.php -> src/Symfony/Component/DependencyInjection/Tests/Fixtures/php/services_inline_self_ref.php",
      "--- Hunk 1 ---",
      "[Context before]",
      "69:         $b = new \\App\\Baz($a);",
      "70:         $b->bar = $a;",
      "74:         $a->foo = $instance;",
      "",
      "[Removed Lines]",
      "72:         $this->services['App\\Foo'] = $instance = new \\App\\Foo($b);",
      "",
      "[Added Lines]",
      "72:         $this->services['App\\\\Foo'] = $instance = new \\App\\Foo($b);",
      "",
      "---------------"
    ],
    "src/Symfony/Component/DependencyInjection/Tests/Fixtures/php/services_rot13_env.php||src/Symfony/Component/DependencyInjection/Tests/Fixtures/php/services_rot13_env.php": [
      "File: src/Symfony/Component/DependencyInjection/Tests/Fixtures/php/services_rot13_env.php -> src/Symfony/Component/DependencyInjection/Tests/Fixtures/php/services_rot13_env.php",
      "--- Hunk 1 ---",
      "[Context before]",
      "68:     protected function getRot13EnvVarProcessorService()",
      "69:     {",
      "71:     }",
      "",
      "[Removed Lines]",
      "70:         return $this->services['Symfony\\Component\\DependencyInjection\\Tests\\Dumper\\Rot13EnvVarProcessor'] = new \\Symfony\\Component\\DependencyInjection\\Tests\\Dumper\\Rot13EnvVarProcessor();",
      "",
      "[Added Lines]",
      "70:         return $this->services['Symfony\\\\Component\\\\DependencyInjection\\\\Tests\\\\Dumper\\\\Rot13EnvVarProcessor'] = new \\Symfony\\Component\\DependencyInjection\\Tests\\Dumper\\Rot13EnvVarProcessor();",
      "",
      "---------------",
      "--- Hunk 2 ---",
      "[Context before]",
      "78:     protected function getContainer_EnvVarProcessorsLocatorService()",
      "79:     {",
      "80:         return $this->services['container.env_var_processors_locator'] = new \\Symfony\\Component\\DependencyInjection\\ServiceLocator(['rot13' => function () {",
      "82:         }]);",
      "83:     }",
      "",
      "[Removed Lines]",
      "81:             return ${($_ = isset($this->services['Symfony\\Component\\DependencyInjection\\Tests\\Dumper\\Rot13EnvVarProcessor']) ? $this->services['Symfony\\Component\\DependencyInjection\\Tests\\Dumper\\Rot13EnvVarProcessor'] : ($this->services['Symfony\\Component\\DependencyInjection\\Tests\\Dumper\\Rot13EnvVarProcessor'] = new \\Symfony\\Component\\DependencyInjection\\Tests\\Dumper\\Rot13EnvVarProcessor())) && false ?: '_'};",
      "",
      "[Added Lines]",
      "81:             return ${($_ = isset($this->services['Symfony\\\\Component\\\\DependencyInjection\\\\Tests\\\\Dumper\\\\Rot13EnvVarProcessor']) ? $this->services['Symfony\\\\Component\\\\DependencyInjection\\\\Tests\\\\Dumper\\\\Rot13EnvVarProcessor'] : ($this->services['Symfony\\\\Component\\\\DependencyInjection\\\\Tests\\\\Dumper\\\\Rot13EnvVarProcessor'] = new \\Symfony\\Component\\DependencyInjection\\Tests\\Dumper\\Rot13EnvVarProcessor())) && false ?: '_'};",
      "",
      "---------------"
    ],
    "src/Symfony/Component/DependencyInjection/Tests/Fixtures/php/services_subscriber.php||src/Symfony/Component/DependencyInjection/Tests/Fixtures/php/services_subscriber.php": [
      "File: src/Symfony/Component/DependencyInjection/Tests/Fixtures/php/services_subscriber.php -> src/Symfony/Component/DependencyInjection/Tests/Fixtures/php/services_subscriber.php",
      "--- Hunk 1 ---",
      "[Context before]",
      "74:     protected function getTestServiceSubscriberService()",
      "75:     {",
      "77:     }",
      "",
      "[Removed Lines]",
      "76:         return $this->services['Symfony\\Component\\DependencyInjection\\Tests\\Fixtures\\TestServiceSubscriber'] = new \\Symfony\\Component\\DependencyInjection\\Tests\\Fixtures\\TestServiceSubscriber();",
      "",
      "[Added Lines]",
      "76:         return $this->services['Symfony\\\\Component\\\\DependencyInjection\\\\Tests\\\\Fixtures\\\\TestServiceSubscriber'] = new \\Symfony\\Component\\DependencyInjection\\Tests\\Fixtures\\TestServiceSubscriber();",
      "",
      "---------------",
      "--- Hunk 2 ---",
      "[Context before]",
      "84:     protected function getFooServiceService()",
      "85:     {",
      "86:         return $this->services['foo_service'] = new \\Symfony\\Component\\DependencyInjection\\Tests\\Fixtures\\TestServiceSubscriber((new \\Symfony\\Component\\DependencyInjection\\ServiceLocator(['Symfony\\\\Component\\\\DependencyInjection\\\\Tests\\\\Fixtures\\\\CustomDefinition' => function () {",
      "88:         }, 'Symfony\\\\Component\\\\DependencyInjection\\\\Tests\\\\Fixtures\\\\TestServiceSubscriber' => function () {",
      "90:         }, 'bar' => function () {",
      "92:         }, 'baz' => function () {",
      "94:         }]))->withContext('foo_service', $this));",
      "95:     }",
      "",
      "[Removed Lines]",
      "87:             $f = function (\\Symfony\\Component\\DependencyInjection\\Tests\\Fixtures\\CustomDefinition $v = null) { return $v; }; return $f(${($_ = isset($this->services['Symfony\\Component\\DependencyInjection\\Tests\\Fixtures\\CustomDefinition']) ? $this->services['Symfony\\Component\\DependencyInjection\\Tests\\Fixtures\\CustomDefinition'] : ($this->services['Symfony\\Component\\DependencyInjection\\Tests\\Fixtures\\CustomDefinition'] = new \\Symfony\\Component\\DependencyInjection\\Tests\\Fixtures\\CustomDefinition())) && false ?: '_'});",
      "89:             $f = function (\\Symfony\\Component\\DependencyInjection\\Tests\\Fixtures\\TestServiceSubscriber $v) { return $v; }; return $f(${($_ = isset($this->services['Symfony\\Component\\DependencyInjection\\Tests\\Fixtures\\TestServiceSubscriber']) ? $this->services['Symfony\\Component\\DependencyInjection\\Tests\\Fixtures\\TestServiceSubscriber'] : ($this->services['Symfony\\Component\\DependencyInjection\\Tests\\Fixtures\\TestServiceSubscriber'] = new \\Symfony\\Component\\DependencyInjection\\Tests\\Fixtures\\TestServiceSubscriber())) && false ?: '_'});",
      "91:             $f = function (\\Symfony\\Component\\DependencyInjection\\Tests\\Fixtures\\CustomDefinition $v) { return $v; }; return $f(${($_ = isset($this->services['Symfony\\Component\\DependencyInjection\\Tests\\Fixtures\\TestServiceSubscriber']) ? $this->services['Symfony\\Component\\DependencyInjection\\Tests\\Fixtures\\TestServiceSubscriber'] : ($this->services['Symfony\\Component\\DependencyInjection\\Tests\\Fixtures\\TestServiceSubscriber'] = new \\Symfony\\Component\\DependencyInjection\\Tests\\Fixtures\\TestServiceSubscriber())) && false ?: '_'});",
      "93:             $f = function (\\Symfony\\Component\\DependencyInjection\\Tests\\Fixtures\\CustomDefinition $v = null) { return $v; }; return $f(${($_ = isset($this->services['Symfony\\Component\\DependencyInjection\\Tests\\Fixtures\\CustomDefinition']) ? $this->services['Symfony\\Component\\DependencyInjection\\Tests\\Fixtures\\CustomDefinition'] : ($this->services['Symfony\\Component\\DependencyInjection\\Tests\\Fixtures\\CustomDefinition'] = new \\Symfony\\Component\\DependencyInjection\\Tests\\Fixtures\\CustomDefinition())) && false ?: '_'});",
      "",
      "[Added Lines]",
      "87:             $f = function (\\Symfony\\Component\\DependencyInjection\\Tests\\Fixtures\\CustomDefinition $v = null) { return $v; }; return $f(${($_ = isset($this->services['Symfony\\\\Component\\\\DependencyInjection\\\\Tests\\\\Fixtures\\\\CustomDefinition']) ? $this->services['Symfony\\\\Component\\\\DependencyInjection\\\\Tests\\\\Fixtures\\\\CustomDefinition'] : ($this->services['Symfony\\\\Component\\\\DependencyInjection\\\\Tests\\\\Fixtures\\\\CustomDefinition'] = new \\Symfony\\Component\\DependencyInjection\\Tests\\Fixtures\\CustomDefinition())) && false ?: '_'});",
      "89:             $f = function (\\Symfony\\Component\\DependencyInjection\\Tests\\Fixtures\\TestServiceSubscriber $v) { return $v; }; return $f(${($_ = isset($this->services['Symfony\\\\Component\\\\DependencyInjection\\\\Tests\\\\Fixtures\\\\TestServiceSubscriber']) ? $this->services['Symfony\\\\Component\\\\DependencyInjection\\\\Tests\\\\Fixtures\\\\TestServiceSubscriber'] : ($this->services['Symfony\\\\Component\\\\DependencyInjection\\\\Tests\\\\Fixtures\\\\TestServiceSubscriber'] = new \\Symfony\\Component\\DependencyInjection\\Tests\\Fixtures\\TestServiceSubscriber())) && false ?: '_'});",
      "91:             $f = function (\\Symfony\\Component\\DependencyInjection\\Tests\\Fixtures\\CustomDefinition $v) { return $v; }; return $f(${($_ = isset($this->services['Symfony\\\\Component\\\\DependencyInjection\\\\Tests\\\\Fixtures\\\\TestServiceSubscriber']) ? $this->services['Symfony\\\\Component\\\\DependencyInjection\\\\Tests\\\\Fixtures\\\\TestServiceSubscriber'] : ($this->services['Symfony\\\\Component\\\\DependencyInjection\\\\Tests\\\\Fixtures\\\\TestServiceSubscriber'] = new \\Symfony\\Component\\DependencyInjection\\Tests\\Fixtures\\TestServiceSubscriber())) && false ?: '_'});",
      "93:             $f = function (\\Symfony\\Component\\DependencyInjection\\Tests\\Fixtures\\CustomDefinition $v = null) { return $v; }; return $f(${($_ = isset($this->services['Symfony\\\\Component\\\\DependencyInjection\\\\Tests\\\\Fixtures\\\\CustomDefinition']) ? $this->services['Symfony\\\\Component\\\\DependencyInjection\\\\Tests\\\\Fixtures\\\\CustomDefinition'] : ($this->services['Symfony\\\\Component\\\\DependencyInjection\\\\Tests\\\\Fixtures\\\\CustomDefinition'] = new \\Symfony\\Component\\DependencyInjection\\Tests\\Fixtures\\CustomDefinition())) && false ?: '_'});",
      "",
      "---------------",
      "--- Hunk 3 ---",
      "[Context before]",
      "102:     protected function getCustomDefinitionService()",
      "103:     {",
      "105:     }",
      "106: }",
      "",
      "[Removed Lines]",
      "104:         return $this->services['Symfony\\Component\\DependencyInjection\\Tests\\Fixtures\\CustomDefinition'] = new \\Symfony\\Component\\DependencyInjection\\Tests\\Fixtures\\CustomDefinition();",
      "",
      "[Added Lines]",
      "104:         return $this->services['Symfony\\\\Component\\\\DependencyInjection\\\\Tests\\\\Fixtures\\\\CustomDefinition'] = new \\Symfony\\Component\\DependencyInjection\\Tests\\Fixtures\\CustomDefinition();",
      "",
      "---------------"
    ],
    "src/Symfony/Component/DependencyInjection/Tests/Fixtures/php/services_unsupported_characters.php||src/Symfony/Component/DependencyInjection/Tests/Fixtures/php/services_unsupported_characters.php": [
      "File: src/Symfony/Component/DependencyInjection/Tests/Fixtures/php/services_unsupported_characters.php -> src/Symfony/Component/DependencyInjection/Tests/Fixtures/php/services_unsupported_characters.php",
      "--- Hunk 1 ---",
      "[Context before]",
      "[No context available]",
      "",
      "[Removed Lines]",
      "[None]",
      "",
      "[Added Lines]",
      "1: <?php",
      "3: use Symfony\\Component\\DependencyInjection\\Argument\\RewindableGenerator;",
      "4: use Symfony\\Component\\DependencyInjection\\ContainerInterface;",
      "5: use Symfony\\Component\\DependencyInjection\\Container;",
      "6: use Symfony\\Component\\DependencyInjection\\Exception\\InvalidArgumentException;",
      "7: use Symfony\\Component\\DependencyInjection\\Exception\\LogicException;",
      "8: use Symfony\\Component\\DependencyInjection\\Exception\\RuntimeException;",
      "9: use Symfony\\Component\\DependencyInjection\\ParameterBag\\FrozenParameterBag;",
      "17: class Symfony_DI_PhpDumper_Test_Unsupported_Characters extends Container",
      "18: {",
      "19:     private $parameters;",
      "20:     private $targetDirs = [];",
      "22:     public function __construct()",
      "23:     {",
      "24:         $this->parameters = $this->getDefaultParameters();",
      "26:         $this->services = [];",
      "27:         $this->methodMap = [",
      "28:             'bar$' => 'getBarService',",
      "29:             'bar$!' => 'getBar2Service',",
      "30:             'foo*/oh-no' => 'getFooohnoService',",
      "31:         ];",
      "33:         $this->aliases = [];",
      "34:     }",
      "36:     public function getRemovedIds()",
      "37:     {",
      "38:         return [",
      "39:             'Psr\\\\Container\\\\ContainerInterface' => true,",
      "40:             'Symfony\\\\Component\\\\DependencyInjection\\\\ContainerInterface' => true,",
      "41:         ];",
      "42:     }",
      "44:     public function compile()",
      "45:     {",
      "46:         throw new LogicException('You cannot compile a dumped container that was already compiled.');",
      "47:     }",
      "49:     public function isCompiled()",
      "50:     {",
      "51:         return true;",
      "52:     }",
      "54:     public function isFrozen()",
      "55:     {",
      "56:         @trigger_error(sprintf('The %s() method is deprecated since Symfony 3.3 and will be removed in 4.0. Use the isCompiled() method instead.', __METHOD__), E_USER_DEPRECATED);",
      "58:         return true;",
      "59:     }",
      "66:     protected function getBarService()",
      "67:     {",
      "68:         return $this->services['bar$'] = new \\FooClass();",
      "69:     }",
      "76:     protected function getBar2Service()",
      "77:     {",
      "78:         return $this->services['bar$!'] = new \\FooClass();",
      "79:     }",
      "86:     protected function getFooohnoService()",
      "87:     {",
      "88:         return $this->services['foo*/oh-no'] = new \\FooClass();",
      "89:     }",
      "91:     public function getParameter($name)",
      "92:     {",
      "93:         $name = (string) $name;",
      "94:         if (!(isset($this->parameters[$name]) || isset($this->loadedDynamicParameters[$name]) || array_key_exists($name, $this->parameters))) {",
      "95:             $name = $this->normalizeParameterName($name);",
      "97:             if (!(isset($this->parameters[$name]) || isset($this->loadedDynamicParameters[$name]) || array_key_exists($name, $this->parameters))) {",
      "98:                 throw new InvalidArgumentException(sprintf('The parameter \"%s\" must be defined.', $name));",
      "99:             }",
      "100:         }",
      "101:         if (isset($this->loadedDynamicParameters[$name])) {",
      "102:             return $this->loadedDynamicParameters[$name] ? $this->dynamicParameters[$name] : $this->getDynamicParameter($name);",
      "103:         }",
      "105:         return $this->parameters[$name];",
      "106:     }",
      "108:     public function hasParameter($name)",
      "109:     {",
      "110:         $name = (string) $name;",
      "111:         $name = $this->normalizeParameterName($name);",
      "113:         return isset($this->parameters[$name]) || isset($this->loadedDynamicParameters[$name]) || array_key_exists($name, $this->parameters);",
      "114:     }",
      "116:     public function setParameter($name, $value)",
      "117:     {",
      "118:         throw new LogicException('Impossible to call set() on a frozen ParameterBag.');",
      "119:     }",
      "121:     public function getParameterBag()",
      "122:     {",
      "123:         if (null === $this->parameterBag) {",
      "124:             $parameters = $this->parameters;",
      "125:             foreach ($this->loadedDynamicParameters as $name => $loaded) {",
      "126:                 $parameters[$name] = $loaded ? $this->dynamicParameters[$name] : $this->getDynamicParameter($name);",
      "127:             }",
      "128:             $this->parameterBag = new FrozenParameterBag($parameters);",
      "129:         }",
      "131:         return $this->parameterBag;",
      "132:     }",
      "134:     private $loadedDynamicParameters = [];",
      "135:     private $dynamicParameters = [];",
      "146:     private function getDynamicParameter($name)",
      "147:     {",
      "148:         throw new InvalidArgumentException(sprintf('The dynamic parameter \"%s\" must be defined.', $name));",
      "149:     }",
      "151:     private $normalizedParameterNames = [];",
      "153:     private function normalizeParameterName($name)",
      "154:     {",
      "155:         if (isset($this->normalizedParameterNames[$normalizedName = strtolower($name)]) || isset($this->parameters[$normalizedName]) || array_key_exists($normalizedName, $this->parameters)) {",
      "156:             $normalizedName = isset($this->normalizedParameterNames[$normalizedName]) ? $this->normalizedParameterNames[$normalizedName] : $normalizedName;",
      "157:             if ((string) $name !== $normalizedName) {",
      "158:                 @trigger_error(sprintf('Parameter names will be made case sensitive in Symfony 4.0. Using \"%s\" instead of \"%s\" is deprecated since Symfony 3.4.', $name, $normalizedName), E_USER_DEPRECATED);",
      "159:             }",
      "160:         } else {",
      "161:             $normalizedName = $this->normalizedParameterNames[$normalizedName] = (string) $name;",
      "162:         }",
      "164:         return $normalizedName;",
      "165:     }",
      "172:     protected function getDefaultParameters()",
      "173:     {",
      "174:         return [",
      "175:             '\\'' => 'oh-no',",
      "176:         ];",
      "177:     }",
      "178: }",
      "",
      "---------------"
    ]
  },
  "candidates": [
    {
      "candidate_hash": "3ca0c86afe12c1b85e0fea9b95fa2c052c361d38",
      "candidate_info": {
        "commit_hash": "3ca0c86afe12c1b85e0fea9b95fa2c052c361d38",
        "repo": "symfony/symfony",
        "commit_url": "https://github.com/symfony/symfony/commit/3ca0c86afe12c1b85e0fea9b95fa2c052c361d38",
        "files": [
          "src/Symfony/Bridge/ProxyManager/LazyProxy/PhpDumper/ProxyDumper.php",
          "src/Symfony/Bridge/ProxyManager/Tests/LazyProxy/PhpDumper/ProxyDumperTest.php"
        ],
        "message": "[ProxyManagerBridge] Fix support of private services (bis)",
        "before_after_code_files": [
          "src/Symfony/Bridge/ProxyManager/LazyProxy/PhpDumper/ProxyDumper.php||src/Symfony/Bridge/ProxyManager/LazyProxy/PhpDumper/ProxyDumper.php",
          "src/Symfony/Bridge/ProxyManager/Tests/LazyProxy/PhpDumper/ProxyDumperTest.php||src/Symfony/Bridge/ProxyManager/Tests/LazyProxy/PhpDumper/ProxyDumperTest.php"
        ]
      },
      "candidate_patch_features": {
        "candidate_earlier_than_patch": 1,
        "same_branch_evolution": 1,
        "olp_code_files": {
          "patch": [
            "src/Symfony/Bridge/ProxyManager/LazyProxy/PhpDumper/ProxyDumper.php||src/Symfony/Bridge/ProxyManager/LazyProxy/PhpDumper/ProxyDumper.php"
          ],
          "candidate": [
            "src/Symfony/Bridge/ProxyManager/LazyProxy/PhpDumper/ProxyDumper.php||src/Symfony/Bridge/ProxyManager/LazyProxy/PhpDumper/ProxyDumper.php"
          ]
        }
      },
      "candidate_diff": {
        "src/Symfony/Bridge/ProxyManager/LazyProxy/PhpDumper/ProxyDumper.php||src/Symfony/Bridge/ProxyManager/LazyProxy/PhpDumper/ProxyDumper.php": [
          "File: src/Symfony/Bridge/ProxyManager/LazyProxy/PhpDumper/ProxyDumper.php -> src/Symfony/Bridge/ProxyManager/LazyProxy/PhpDumper/ProxyDumper.php",
          "--- Hunk 1 ---",
          "[Context before]",
          "15: use ProxyManager\\GeneratorStrategy\\BaseGeneratorStrategy;",
          "16: use ProxyManager\\Version;",
          "17: use Symfony\\Component\\DependencyInjection\\Container;",
          "18: use Symfony\\Component\\DependencyInjection\\Definition;",
          "19: use Symfony\\Component\\DependencyInjection\\LazyProxy\\PhpDumper\\DumperInterface;",
          "",
          "[Removed Lines]",
          "[None]",
          "",
          "[Added Lines]",
          "18: use Symfony\\Component\\DependencyInjection\\ContainerBuilder;",
          "",
          "---------------",
          "--- Hunk 2 ---",
          "[Context before]",
          "57:         $instantiation = 'return';",
          "59:         if ($definition->isShared()) {",
          "61:         }",
          "63:         if (null === $factoryCode) {",
          "",
          "[Removed Lines]",
          "60:             $instantiation .= sprintf(' $this->%s[\\'%s\\'] =', $definition->isPublic() && !$definition->isPrivate() ? 'services' : 'privates', $id);",
          "",
          "[Added Lines]",
          "61:             $instantiation .= sprintf(' $this->%s[\\'%s\\'] =', \\method_exists(ContainerBuilder::class, 'addClassResource') || ($definition->isPublic() && !$definition->isPrivate()) ? 'services' : 'privates', $id);",
          "",
          "---------------"
        ],
        "src/Symfony/Bridge/ProxyManager/Tests/LazyProxy/PhpDumper/ProxyDumperTest.php||src/Symfony/Bridge/ProxyManager/Tests/LazyProxy/PhpDumper/ProxyDumperTest.php": [
          "File: src/Symfony/Bridge/ProxyManager/Tests/LazyProxy/PhpDumper/ProxyDumperTest.php -> src/Symfony/Bridge/ProxyManager/Tests/LazyProxy/PhpDumper/ProxyDumperTest.php",
          "--- Hunk 1 ---",
          "[Context before]",
          "14: use PHPUnit\\Framework\\TestCase;",
          "15: use Symfony\\Bridge\\ProxyManager\\LazyProxy\\PhpDumper\\ProxyDumper;",
          "16: use Symfony\\Component\\DependencyInjection\\Definition;",
          "",
          "[Removed Lines]",
          "[None]",
          "",
          "[Added Lines]",
          "16: use Symfony\\Component\\DependencyInjection\\ContainerBuilder;",
          "",
          "---------------",
          "--- Hunk 2 ---",
          "[Context before]",
          "101:             array(",
          "102:                 (new Definition(__CLASS__))",
          "103:                     ->setPublic(false),",
          "105:             ),",
          "106:             array(",
          "107:                 (new Definition(__CLASS__))",
          "",
          "[Removed Lines]",
          "104:                 'privates',",
          "",
          "[Added Lines]",
          "105:                 \\method_exists(ContainerBuilder::class, 'addClassResource') ? 'services' : 'privates',",
          "",
          "---------------"
        ]
      }
    },
    {
      "candidate_hash": "95e53ed7e0cb6ba060c5494bc76851c0240c05be",
      "candidate_info": {
        "commit_hash": "95e53ed7e0cb6ba060c5494bc76851c0240c05be",
        "repo": "symfony/symfony",
        "commit_url": "https://github.com/symfony/symfony/commit/95e53ed7e0cb6ba060c5494bc76851c0240c05be",
        "files": [
          "src/Symfony/Component/DependencyInjection/Dumper/PhpDumper.php"
        ],
        "message": "fixed CS",
        "before_after_code_files": [
          "src/Symfony/Component/DependencyInjection/Dumper/PhpDumper.php||src/Symfony/Component/DependencyInjection/Dumper/PhpDumper.php"
        ]
      },
      "candidate_patch_features": {
        "candidate_earlier_than_patch": 0,
        "same_branch_evolution": 1,
        "olp_code_files": {
          "patch": [
            "src/Symfony/Component/DependencyInjection/Dumper/PhpDumper.php||src/Symfony/Component/DependencyInjection/Dumper/PhpDumper.php"
          ],
          "candidate": [
            "src/Symfony/Component/DependencyInjection/Dumper/PhpDumper.php||src/Symfony/Component/DependencyInjection/Dumper/PhpDumper.php"
          ]
        }
      },
      "candidate_diff": {
        "src/Symfony/Component/DependencyInjection/Dumper/PhpDumper.php||src/Symfony/Component/DependencyInjection/Dumper/PhpDumper.php": [
          "File: src/Symfony/Component/DependencyInjection/Dumper/PhpDumper.php -> src/Symfony/Component/DependencyInjection/Dumper/PhpDumper.php",
          "--- Hunk 1 ---",
          "[Context before]",
          "690:         $code .= $this->addServiceInclude($id, $definition);",
          "692:         if ($this->getProxyDumper()->isProxyCandidate($definition)) {",
          "694:             $code .= $this->getProxyDumper()->getProxyFactoryCode($definition, $id, sprintf($factoryCode, $methodName, $this->doExport($id)));",
          "695:         }",
          "",
          "[Removed Lines]",
          "693:             $factoryCode = $asFile ? ($definition->isShared() ? \"\\$this->load('%s.php', false)\" : \"\\$this->factories[%2\\$s](false)\") : '$this->%s(false)';",
          "",
          "[Added Lines]",
          "693:             $factoryCode = $asFile ? ($definition->isShared() ? \"\\$this->load('%s.php', false)\" : '$this->factories[%2$s](false)') : '$this->%s(false)';",
          "",
          "---------------",
          "--- Hunk 2 ---",
          "[Context before]",
          "1386:             if (!$this->container->hasDefinition($service)) {",
          "1387:                 return 'false';",
          "1388:             }",
          "1390:         }",
          "1391:         foreach (ContainerBuilder::getServiceConditionals($value) as $service) {",
          "1392:             if ($this->container->hasDefinition($service) && !$this->container->getDefinition($service)->isPublic()) {",
          "1393:                 continue;",
          "1394:             }",
          "1397:         }",
          "1399:         if (!$conditions) {",
          "",
          "[Removed Lines]",
          "1389:             $conditions[] = sprintf(\"isset(\\$this->%s[%s])\", $this->container->getDefinition($service)->isPublic() ? 'services' : 'privates', $this->doExport($service));",
          "1396:             $conditions[] = sprintf(\"\\$this->has(%s)\", $this->doExport($service));",
          "",
          "[Added Lines]",
          "1389:             $conditions[] = sprintf('isset($this->%s[%s])', $this->container->getDefinition($service)->isPublic() ? 'services' : 'privates', $this->doExport($service));",
          "1396:             $conditions[] = sprintf('$this->has(%s)', $this->doExport($service));",
          "",
          "---------------"
        ]
      }
    },
    {
      "candidate_hash": "d1e84aa137c29da532baff930a64ad5b8c31b018",
      "candidate_info": {
        "commit_hash": "d1e84aa137c29da532baff930a64ad5b8c31b018",
        "repo": "symfony/symfony",
        "commit_url": "https://github.com/symfony/symfony/commit/d1e84aa137c29da532baff930a64ad5b8c31b018",
        "files": [
          "src/Symfony/Component/DependencyInjection/Dumper/PhpDumper.php",
          "src/Symfony/Component/DependencyInjection/Tests/Dumper/PhpDumperTest.php",
          "src/Symfony/Component/DependencyInjection/Tests/Fixtures/php/services9.php",
          "src/Symfony/Component/DependencyInjection/Tests/Fixtures/php/services9_as_files.txt",
          "src/Symfony/Component/DependencyInjection/Tests/Fixtures/php/services9_compiled.php",
          "src/Symfony/Component/DependencyInjection/Tests/Fixtures/php/services_almost_circular_private.php",
          "src/Symfony/Component/DependencyInjection/Tests/Fixtures/php/services_almost_circular_public.php",
          "src/Symfony/Component/DependencyInjection/Tests/Fixtures/php/services_env_in_id.php",
          "src/Symfony/Component/DependencyInjection/Tests/Fixtures/php/services_inline_requires.php",
          "src/Symfony/Component/DependencyInjection/Tests/Fixtures/php/services_legacy_privates.php",
          "src/Symfony/Component/DependencyInjection/Tests/Fixtures/php/services_locator.php",
          "src/Symfony/Component/DependencyInjection/Tests/Fixtures/php/services_private_frozen.php",
          "src/Symfony/Component/DependencyInjection/Tests/Fixtures/php/services_private_in_expression.php",
          "src/Symfony/Component/DependencyInjection/Tests/Fixtures/php/services_rot13_env.php",
          "src/Symfony/Component/DependencyInjection/Tests/Fixtures/php/services_subscriber.php",
          "src/Symfony/Component/DependencyInjection/Tests/Fixtures/php/services_uninitialized_ref.php"
        ],
        "message": "[DI] Fix dumping expressions accessing single-use private services",
        "before_after_code_files": [
          "src/Symfony/Component/DependencyInjection/Dumper/PhpDumper.php||src/Symfony/Component/DependencyInjection/Dumper/PhpDumper.php",
          "src/Symfony/Component/DependencyInjection/Tests/Dumper/PhpDumperTest.php||src/Symfony/Component/DependencyInjection/Tests/Dumper/PhpDumperTest.php",
          "src/Symfony/Component/DependencyInjection/Tests/Fixtures/php/services9.php||src/Symfony/Component/DependencyInjection/Tests/Fixtures/php/services9.php",
          "src/Symfony/Component/DependencyInjection/Tests/Fixtures/php/services9_compiled.php||src/Symfony/Component/DependencyInjection/Tests/Fixtures/php/services9_compiled.php",
          "src/Symfony/Component/DependencyInjection/Tests/Fixtures/php/services_almost_circular_private.php||src/Symfony/Component/DependencyInjection/Tests/Fixtures/php/services_almost_circular_private.php",
          "src/Symfony/Component/DependencyInjection/Tests/Fixtures/php/services_almost_circular_public.php||src/Symfony/Component/DependencyInjection/Tests/Fixtures/php/services_almost_circular_public.php",
          "src/Symfony/Component/DependencyInjection/Tests/Fixtures/php/services_env_in_id.php||src/Symfony/Component/DependencyInjection/Tests/Fixtures/php/services_env_in_id.php",
          "src/Symfony/Component/DependencyInjection/Tests/Fixtures/php/services_inline_requires.php||src/Symfony/Component/DependencyInjection/Tests/Fixtures/php/services_inline_requires.php",
          "src/Symfony/Component/DependencyInjection/Tests/Fixtures/php/services_legacy_privates.php||src/Symfony/Component/DependencyInjection/Tests/Fixtures/php/services_legacy_privates.php",
          "src/Symfony/Component/DependencyInjection/Tests/Fixtures/php/services_locator.php||src/Symfony/Component/DependencyInjection/Tests/Fixtures/php/services_locator.php",
          "src/Symfony/Component/DependencyInjection/Tests/Fixtures/php/services_private_frozen.php||src/Symfony/Component/DependencyInjection/Tests/Fixtures/php/services_private_frozen.php",
          "src/Symfony/Component/DependencyInjection/Tests/Fixtures/php/services_private_in_expression.php||src/Symfony/Component/DependencyInjection/Tests/Fixtures/php/services_private_in_expression.php",
          "src/Symfony/Component/DependencyInjection/Tests/Fixtures/php/services_rot13_env.php||src/Symfony/Component/DependencyInjection/Tests/Fixtures/php/services_rot13_env.php",
          "src/Symfony/Component/DependencyInjection/Tests/Fixtures/php/services_subscriber.php||src/Symfony/Component/DependencyInjection/Tests/Fixtures/php/services_subscriber.php",
          "src/Symfony/Component/DependencyInjection/Tests/Fixtures/php/services_uninitialized_ref.php||src/Symfony/Component/DependencyInjection/Tests/Fixtures/php/services_uninitialized_ref.php"
        ]
      },
      "candidate_patch_features": {
        "candidate_earlier_than_patch": 1,
        "same_branch_evolution": 1,
        "olp_code_files": {
          "patch": [
            "src/Symfony/Component/DependencyInjection/Dumper/PhpDumper.php||src/Symfony/Component/DependencyInjection/Dumper/PhpDumper.php",
            "src/Symfony/Component/DependencyInjection/Tests/Dumper/PhpDumperTest.php||src/Symfony/Component/DependencyInjection/Tests/Dumper/PhpDumperTest.php",
            "src/Symfony/Component/DependencyInjection/Tests/Fixtures/php/services_inline_requires.php||src/Symfony/Component/DependencyInjection/Tests/Fixtures/php/services_inline_requires.php",
            "src/Symfony/Component/DependencyInjection/Tests/Fixtures/php/services_rot13_env.php||src/Symfony/Component/DependencyInjection/Tests/Fixtures/php/services_rot13_env.php",
            "src/Symfony/Component/DependencyInjection/Tests/Fixtures/php/services_subscriber.php||src/Symfony/Component/DependencyInjection/Tests/Fixtures/php/services_subscriber.php"
          ],
          "candidate": [
            "src/Symfony/Component/DependencyInjection/Dumper/PhpDumper.php||src/Symfony/Component/DependencyInjection/Dumper/PhpDumper.php",
            "src/Symfony/Component/DependencyInjection/Tests/Dumper/PhpDumperTest.php||src/Symfony/Component/DependencyInjection/Tests/Dumper/PhpDumperTest.php",
            "src/Symfony/Component/DependencyInjection/Tests/Fixtures/php/services_inline_requires.php||src/Symfony/Component/DependencyInjection/Tests/Fixtures/php/services_inline_requires.php",
            "src/Symfony/Component/DependencyInjection/Tests/Fixtures/php/services_rot13_env.php||src/Symfony/Component/DependencyInjection/Tests/Fixtures/php/services_rot13_env.php",
            "src/Symfony/Component/DependencyInjection/Tests/Fixtures/php/services_subscriber.php||src/Symfony/Component/DependencyInjection/Tests/Fixtures/php/services_subscriber.php"
          ]
        }
      },
      "candidate_diff": {
        "src/Symfony/Component/DependencyInjection/Dumper/PhpDumper.php||src/Symfony/Component/DependencyInjection/Dumper/PhpDumper.php": [
          "File: src/Symfony/Component/DependencyInjection/Dumper/PhpDumper.php -> src/Symfony/Component/DependencyInjection/Dumper/PhpDumper.php",
          "--- Hunk 1 ---",
          "[Context before]",
          "594:             if ($callable[0] instanceof Reference",
          "595:                 || ($callable[0] instanceof Definition && $this->definitionVariables->contains($callable[0]))",
          "596:             ) {",
          "600:             }",
          "602:             $class = $this->dumpValue($callable[0]);",
          "",
          "[Removed Lines]",
          "597:                 $callable[0] = $this->dumpValue($callable[0]);",
          "599:                 return sprintf('        '.('$' === $callable[0][0] ? '%s' : '(%s)').\"->%s(\\$%s);\\n\", $callable[0], $callable[1], $variableName);",
          "",
          "[Added Lines]",
          "597:                 return sprintf(\"        %s->%s(\\$%s);\\n\", $this->dumpValue($callable[0]), $callable[1], $variableName);",
          "",
          "---------------",
          "--- Hunk 2 ---",
          "[Context before]",
          "1824:                 if ($definition->isShared()) {",
          "1825:                     $code = sprintf('$this->services[\\'%s\\'] = %s', $id, $code);",
          "1826:                 }",
          "1827:             } elseif ($this->asFiles && $definition->isShared() && !$this->isHotPath($definition)) {",
          "1828:                 $code = sprintf(\"\\$this->load('%s.php')\", $this->generateMethodName($id));",
          "1829:             } else {",
          "",
          "[Removed Lines]",
          "[None]",
          "",
          "[Added Lines]",
          "1825:                 $code = \"($code)\";",
          "",
          "---------------"
        ],
        "src/Symfony/Component/DependencyInjection/Tests/Dumper/PhpDumperTest.php||src/Symfony/Component/DependencyInjection/Tests/Dumper/PhpDumperTest.php": [
          "File: src/Symfony/Component/DependencyInjection/Tests/Dumper/PhpDumperTest.php -> src/Symfony/Component/DependencyInjection/Tests/Dumper/PhpDumperTest.php",
          "--- Hunk 1 ---",
          "[Context before]",
          "752:             ->setPublic(false);",
          "753:         $container->register('public_foo', 'stdClass')",
          "754:             ->setPublic(true)",
          "757:         $container->compile();",
          "758:         $dumper = new PhpDumper($container);",
          "",
          "[Removed Lines]",
          "755:             ->addArgument(new Expression('service(\"private_foo\")'));",
          "",
          "[Added Lines]",
          "755:             ->addArgument(new Expression('service(\"private_foo\").bar'));",
          "",
          "---------------"
        ],
        "src/Symfony/Component/DependencyInjection/Tests/Fixtures/php/services9.php||src/Symfony/Component/DependencyInjection/Tests/Fixtures/php/services9.php": [
          "File: src/Symfony/Component/DependencyInjection/Tests/Fixtures/php/services9.php -> src/Symfony/Component/DependencyInjection/Tests/Fixtures/php/services9.php",
          "--- Hunk 1 ---",
          "[Context before]",
          "126:     {",
          "127:         $this->services['configured_service_simple'] = $instance = new \\stdClass();",
          "131:         return $instance;",
          "132:     }",
          "",
          "[Removed Lines]",
          "129:         ${($_ = isset($this->services['configurator_service_simple']) ? $this->services['configurator_service_simple'] : $this->services['configurator_service_simple'] = new \\ConfClass('bar')) && false ?: '_'}->configureStdClass($instance);",
          "",
          "[Added Lines]",
          "129:         ${($_ = isset($this->services['configurator_service_simple']) ? $this->services['configurator_service_simple'] : ($this->services['configurator_service_simple'] = new \\ConfClass('bar'))) && false ?: '_'}->configureStdClass($instance);",
          "",
          "---------------"
        ],
        "src/Symfony/Component/DependencyInjection/Tests/Fixtures/php/services9_compiled.php||src/Symfony/Component/DependencyInjection/Tests/Fixtures/php/services9_compiled.php": [
          "File: src/Symfony/Component/DependencyInjection/Tests/Fixtures/php/services9_compiled.php -> src/Symfony/Component/DependencyInjection/Tests/Fixtures/php/services9_compiled.php",
          "--- Hunk 1 ---",
          "[Context before]",
          "355:     {",
          "356:         return $this->services['tagged_iterator'] = new \\Bar(new RewindableGenerator(function () {",
          "357:             yield 0 => ${($_ = isset($this->services['foo']) ? $this->services['foo'] : $this->getFooService()) && false ?: '_'};",
          "359:         }, 2));",
          "360:     }",
          "",
          "[Removed Lines]",
          "358:             yield 1 => ${($_ = isset($this->services['tagged_iterator_foo']) ? $this->services['tagged_iterator_foo'] : $this->services['tagged_iterator_foo'] = new \\Bar()) && false ?: '_'};",
          "",
          "[Added Lines]",
          "358:             yield 1 => ${($_ = isset($this->services['tagged_iterator_foo']) ? $this->services['tagged_iterator_foo'] : ($this->services['tagged_iterator_foo'] = new \\Bar())) && false ?: '_'};",
          "",
          "---------------"
        ],
        "src/Symfony/Component/DependencyInjection/Tests/Fixtures/php/services_almost_circular_private.php||src/Symfony/Component/DependencyInjection/Tests/Fixtures/php/services_almost_circular_private.php": [
          "File: src/Symfony/Component/DependencyInjection/Tests/Fixtures/php/services_almost_circular_private.php -> src/Symfony/Component/DependencyInjection/Tests/Fixtures/php/services_almost_circular_private.php",
          "--- Hunk 1 ---",
          "[Context before]",
          "332:     protected function getRootService()",
          "333:     {",
          "335:     }",
          "",
          "[Removed Lines]",
          "334:         return $this->services['root'] = new \\stdClass(${($_ = isset($this->services['level2']) ? $this->services['level2'] : $this->getLevel2Service()) && false ?: '_'}, ${($_ = isset($this->services['multiuse1']) ? $this->services['multiuse1'] : $this->services['multiuse1'] = new \\stdClass()) && false ?: '_'});",
          "",
          "[Added Lines]",
          "334:         return $this->services['root'] = new \\stdClass(${($_ = isset($this->services['level2']) ? $this->services['level2'] : $this->getLevel2Service()) && false ?: '_'}, ${($_ = isset($this->services['multiuse1']) ? $this->services['multiuse1'] : ($this->services['multiuse1'] = new \\stdClass())) && false ?: '_'});",
          "",
          "---------------",
          "--- Hunk 2 ---",
          "[Context before]",
          "398:     protected function getLevel4Service()",
          "399:     {",
          "401:     }",
          "",
          "[Removed Lines]",
          "400:         return $this->services['level4'] = new \\stdClass(${($_ = isset($this->services['multiuse1']) ? $this->services['multiuse1'] : $this->services['multiuse1'] = new \\stdClass()) && false ?: '_'}, ${($_ = isset($this->services['level5']) ? $this->services['level5'] : $this->getLevel5Service()) && false ?: '_'});",
          "",
          "[Added Lines]",
          "400:         return $this->services['level4'] = new \\stdClass(${($_ = isset($this->services['multiuse1']) ? $this->services['multiuse1'] : ($this->services['multiuse1'] = new \\stdClass())) && false ?: '_'}, ${($_ = isset($this->services['level5']) ? $this->services['level5'] : $this->getLevel5Service()) && false ?: '_'});",
          "",
          "---------------"
        ],
        "src/Symfony/Component/DependencyInjection/Tests/Fixtures/php/services_almost_circular_public.php||src/Symfony/Component/DependencyInjection/Tests/Fixtures/php/services_almost_circular_public.php": [
          "File: src/Symfony/Component/DependencyInjection/Tests/Fixtures/php/services_almost_circular_public.php -> src/Symfony/Component/DependencyInjection/Tests/Fixtures/php/services_almost_circular_public.php",
          "--- Hunk 1 ---",
          "[Context before]",
          "126:     {",
          "127:         $this->services['bar3'] = $instance = new \\BarCircular();",
          "131:         $instance->addFoobar($a, $a);",
          "",
          "[Removed Lines]",
          "129:         $a = ${($_ = isset($this->services['foobar3']) ? $this->services['foobar3'] : $this->services['foobar3'] = new \\FoobarCircular()) && false ?: '_'};",
          "",
          "[Added Lines]",
          "129:         $a = ${($_ = isset($this->services['foobar3']) ? $this->services['foobar3'] : ($this->services['foobar3'] = new \\FoobarCircular())) && false ?: '_'};",
          "",
          "---------------",
          "--- Hunk 2 ---",
          "[Context before]",
          "432:     protected function getRootService()",
          "433:     {",
          "435:     }",
          "",
          "[Removed Lines]",
          "434:         return $this->services['root'] = new \\stdClass(${($_ = isset($this->services['level2']) ? $this->services['level2'] : $this->getLevel2Service()) && false ?: '_'}, ${($_ = isset($this->services['multiuse1']) ? $this->services['multiuse1'] : $this->services['multiuse1'] = new \\stdClass()) && false ?: '_'});",
          "",
          "[Added Lines]",
          "434:         return $this->services['root'] = new \\stdClass(${($_ = isset($this->services['level2']) ? $this->services['level2'] : $this->getLevel2Service()) && false ?: '_'}, ${($_ = isset($this->services['multiuse1']) ? $this->services['multiuse1'] : ($this->services['multiuse1'] = new \\stdClass())) && false ?: '_'});",
          "",
          "---------------",
          "--- Hunk 3 ---",
          "[Context before]",
          "498:     protected function getLevel4Service()",
          "499:     {",
          "501:     }",
          "",
          "[Removed Lines]",
          "500:         return $this->services['level4'] = new \\stdClass(${($_ = isset($this->services['multiuse1']) ? $this->services['multiuse1'] : $this->services['multiuse1'] = new \\stdClass()) && false ?: '_'}, ${($_ = isset($this->services['level5']) ? $this->services['level5'] : $this->getLevel5Service()) && false ?: '_'});",
          "",
          "[Added Lines]",
          "500:         return $this->services['level4'] = new \\stdClass(${($_ = isset($this->services['multiuse1']) ? $this->services['multiuse1'] : ($this->services['multiuse1'] = new \\stdClass())) && false ?: '_'}, ${($_ = isset($this->services['level5']) ? $this->services['level5'] : $this->getLevel5Service()) && false ?: '_'});",
          "",
          "---------------"
        ],
        "src/Symfony/Component/DependencyInjection/Tests/Fixtures/php/services_env_in_id.php||src/Symfony/Component/DependencyInjection/Tests/Fixtures/php/services_env_in_id.php": [
          "File: src/Symfony/Component/DependencyInjection/Tests/Fixtures/php/services_env_in_id.php -> src/Symfony/Component/DependencyInjection/Tests/Fixtures/php/services_env_in_id.php",
          "--- Hunk 1 ---",
          "[Context before]",
          "74:     protected function getBarService()",
          "75:     {",
          "77:     }",
          "",
          "[Removed Lines]",
          "76:         return $this->services['bar'] = new \\stdClass(${($_ = isset($this->services['bar_%env(BAR)%']) ? $this->services['bar_%env(BAR)%'] : $this->services['bar_%env(BAR)%'] = new \\stdClass()) && false ?: '_'});",
          "",
          "[Added Lines]",
          "76:         return $this->services['bar'] = new \\stdClass(${($_ = isset($this->services['bar_%env(BAR)%']) ? $this->services['bar_%env(BAR)%'] : ($this->services['bar_%env(BAR)%'] = new \\stdClass())) && false ?: '_'});",
          "",
          "---------------",
          "--- Hunk 2 ---",
          "[Context before]",
          "84:     protected function getFooService()",
          "85:     {",
          "87:     }",
          "",
          "[Removed Lines]",
          "86:         return $this->services['foo'] = new \\stdClass(${($_ = isset($this->services['bar_%env(BAR)%']) ? $this->services['bar_%env(BAR)%'] : $this->services['bar_%env(BAR)%'] = new \\stdClass()) && false ?: '_'}, array('baz_'.$this->getEnv('string:BAR') => new \\stdClass()));",
          "",
          "[Added Lines]",
          "86:         return $this->services['foo'] = new \\stdClass(${($_ = isset($this->services['bar_%env(BAR)%']) ? $this->services['bar_%env(BAR)%'] : ($this->services['bar_%env(BAR)%'] = new \\stdClass())) && false ?: '_'}, array('baz_'.$this->getEnv('string:BAR') => new \\stdClass()));",
          "",
          "---------------"
        ],
        "src/Symfony/Component/DependencyInjection/Tests/Fixtures/php/services_inline_requires.php||src/Symfony/Component/DependencyInjection/Tests/Fixtures/php/services_inline_requires.php": [
          "File: src/Symfony/Component/DependencyInjection/Tests/Fixtures/php/services_inline_requires.php -> src/Symfony/Component/DependencyInjection/Tests/Fixtures/php/services_inline_requires.php",
          "--- Hunk 1 ---",
          "[Context before]",
          "110:         include_once $this->targetDirs[1].'/includes/HotPath/C2.php';",
          "111:         include_once $this->targetDirs[1].'/includes/HotPath/C3.php';",
          "114:     }",
          "",
          "[Removed Lines]",
          "113:         return $this->services['Symfony\\Component\\DependencyInjection\\Tests\\Fixtures\\includes\\HotPath\\C2'] = new \\Symfony\\Component\\DependencyInjection\\Tests\\Fixtures\\includes\\HotPath\\C2(${($_ = isset($this->services['Symfony\\Component\\DependencyInjection\\Tests\\Fixtures\\includes\\HotPath\\C3']) ? $this->services['Symfony\\Component\\DependencyInjection\\Tests\\Fixtures\\includes\\HotPath\\C3'] : $this->services['Symfony\\Component\\DependencyInjection\\Tests\\Fixtures\\includes\\HotPath\\C3'] = new \\Symfony\\Component\\DependencyInjection\\Tests\\Fixtures\\includes\\HotPath\\C3()) && false ?: '_'});",
          "",
          "[Added Lines]",
          "113:         return $this->services['Symfony\\Component\\DependencyInjection\\Tests\\Fixtures\\includes\\HotPath\\C2'] = new \\Symfony\\Component\\DependencyInjection\\Tests\\Fixtures\\includes\\HotPath\\C2(${($_ = isset($this->services['Symfony\\Component\\DependencyInjection\\Tests\\Fixtures\\includes\\HotPath\\C3']) ? $this->services['Symfony\\Component\\DependencyInjection\\Tests\\Fixtures\\includes\\HotPath\\C3'] : ($this->services['Symfony\\Component\\DependencyInjection\\Tests\\Fixtures\\includes\\HotPath\\C3'] = new \\Symfony\\Component\\DependencyInjection\\Tests\\Fixtures\\includes\\HotPath\\C3())) && false ?: '_'});",
          "",
          "---------------"
        ],
        "src/Symfony/Component/DependencyInjection/Tests/Fixtures/php/services_legacy_privates.php||src/Symfony/Component/DependencyInjection/Tests/Fixtures/php/services_legacy_privates.php": [
          "File: src/Symfony/Component/DependencyInjection/Tests/Fixtures/php/services_legacy_privates.php -> src/Symfony/Component/DependencyInjection/Tests/Fixtures/php/services_legacy_privates.php",
          "--- Hunk 1 ---",
          "[Context before]",
          "99:     protected function getBarService()",
          "100:     {",
          "102:     }",
          "",
          "[Removed Lines]",
          "101:         return $this->services['bar'] = new \\stdClass(${($_ = isset($this->services['private_not_inlined']) ? $this->services['private_not_inlined'] : $this->services['private_not_inlined'] = new \\stdClass()) && false ?: '_'});",
          "",
          "[Added Lines]",
          "101:         return $this->services['bar'] = new \\stdClass(${($_ = isset($this->services['private_not_inlined']) ? $this->services['private_not_inlined'] : ($this->services['private_not_inlined'] = new \\stdClass())) && false ?: '_'});",
          "",
          "---------------"
        ],
        "src/Symfony/Component/DependencyInjection/Tests/Fixtures/php/services_locator.php||src/Symfony/Component/DependencyInjection/Tests/Fixtures/php/services_locator.php": [
          "File: src/Symfony/Component/DependencyInjection/Tests/Fixtures/php/services_locator.php -> src/Symfony/Component/DependencyInjection/Tests/Fixtures/php/services_locator.php",
          "--- Hunk 1 ---",
          "[Context before]",
          "77:     protected function getBarServiceService()",
          "78:     {",
          "80:     }",
          "",
          "[Removed Lines]",
          "79:         return $this->services['bar_service'] = new \\stdClass(${($_ = isset($this->services['baz_service']) ? $this->services['baz_service'] : $this->services['baz_service'] = new \\stdClass()) && false ?: '_'});",
          "",
          "[Added Lines]",
          "79:         return $this->services['bar_service'] = new \\stdClass(${($_ = isset($this->services['baz_service']) ? $this->services['baz_service'] : ($this->services['baz_service'] = new \\stdClass())) && false ?: '_'});",
          "",
          "---------------",
          "--- Hunk 2 ---",
          "[Context before]",
          "89:         return $this->services['foo_service'] = new \\Symfony\\Component\\DependencyInjection\\ServiceLocator(array('bar' => function () {",
          "90:             return ${($_ = isset($this->services['bar_service']) ? $this->services['bar_service'] : $this->getBarServiceService()) && false ?: '_'};",
          "91:         }, 'baz' => function () {",
          "93:         }, 'nil' => function () {",
          "94:             return NULL;",
          "95:         }));",
          "",
          "[Removed Lines]",
          "92:             $f = function (\\stdClass $v) { return $v; }; return $f(${($_ = isset($this->services['baz_service']) ? $this->services['baz_service'] : $this->services['baz_service'] = new \\stdClass()) && false ?: '_'});",
          "",
          "[Added Lines]",
          "92:             $f = function (\\stdClass $v) { return $v; }; return $f(${($_ = isset($this->services['baz_service']) ? $this->services['baz_service'] : ($this->services['baz_service'] = new \\stdClass())) && false ?: '_'});",
          "",
          "---------------",
          "--- Hunk 3 ---",
          "[Context before]",
          "133:     protected function getTranslator1Service()",
          "134:     {",
          "135:         return $this->services['translator_1'] = new \\Symfony\\Component\\DependencyInjection\\Tests\\Fixtures\\StubbedTranslator(new \\Symfony\\Component\\DependencyInjection\\ServiceLocator(array('translator.loader_1' => function () {",
          "137:         })));",
          "138:     }",
          "",
          "[Removed Lines]",
          "136:             return ${($_ = isset($this->services['translator.loader_1']) ? $this->services['translator.loader_1'] : $this->services['translator.loader_1'] = new \\stdClass()) && false ?: '_'};",
          "",
          "[Added Lines]",
          "136:             return ${($_ = isset($this->services['translator.loader_1']) ? $this->services['translator.loader_1'] : ($this->services['translator.loader_1'] = new \\stdClass())) && false ?: '_'};",
          "",
          "---------------",
          "--- Hunk 4 ---",
          "[Context before]",
          "145:     protected function getTranslator2Service()",
          "146:     {",
          "147:         $this->services['translator_2'] = $instance = new \\Symfony\\Component\\DependencyInjection\\Tests\\Fixtures\\StubbedTranslator(new \\Symfony\\Component\\DependencyInjection\\ServiceLocator(array('translator.loader_2' => function () {",
          "149:         })));",
          "153:         return $instance;",
          "154:     }",
          "",
          "[Removed Lines]",
          "148:             return ${($_ = isset($this->services['translator.loader_2']) ? $this->services['translator.loader_2'] : $this->services['translator.loader_2'] = new \\stdClass()) && false ?: '_'};",
          "151:         $instance->addResource('db', ${($_ = isset($this->services['translator.loader_2']) ? $this->services['translator.loader_2'] : $this->services['translator.loader_2'] = new \\stdClass()) && false ?: '_'}, 'nl');",
          "",
          "[Added Lines]",
          "148:             return ${($_ = isset($this->services['translator.loader_2']) ? $this->services['translator.loader_2'] : ($this->services['translator.loader_2'] = new \\stdClass())) && false ?: '_'};",
          "151:         $instance->addResource('db', ${($_ = isset($this->services['translator.loader_2']) ? $this->services['translator.loader_2'] : ($this->services['translator.loader_2'] = new \\stdClass())) && false ?: '_'}, 'nl');",
          "",
          "---------------",
          "--- Hunk 5 ---",
          "[Context before]",
          "161:     protected function getTranslator3Service()",
          "162:     {",
          "163:         $this->services['translator_3'] = $instance = new \\Symfony\\Component\\DependencyInjection\\Tests\\Fixtures\\StubbedTranslator(new \\Symfony\\Component\\DependencyInjection\\ServiceLocator(array('translator.loader_3' => function () {",
          "165:         })));",
          "169:         $instance->addResource('db', $a, 'nl');",
          "170:         $instance->addResource('db', $a, 'en');",
          "",
          "[Removed Lines]",
          "164:             return ${($_ = isset($this->services['translator.loader_3']) ? $this->services['translator.loader_3'] : $this->services['translator.loader_3'] = new \\stdClass()) && false ?: '_'};",
          "167:         $a = ${($_ = isset($this->services['translator.loader_3']) ? $this->services['translator.loader_3'] : $this->services['translator.loader_3'] = new \\stdClass()) && false ?: '_'};",
          "",
          "[Added Lines]",
          "164:             return ${($_ = isset($this->services['translator.loader_3']) ? $this->services['translator.loader_3'] : ($this->services['translator.loader_3'] = new \\stdClass())) && false ?: '_'};",
          "167:         $a = ${($_ = isset($this->services['translator.loader_3']) ? $this->services['translator.loader_3'] : ($this->services['translator.loader_3'] = new \\stdClass())) && false ?: '_'};",
          "",
          "---------------"
        ],
        "src/Symfony/Component/DependencyInjection/Tests/Fixtures/php/services_private_frozen.php||src/Symfony/Component/DependencyInjection/Tests/Fixtures/php/services_private_frozen.php": [
          "File: src/Symfony/Component/DependencyInjection/Tests/Fixtures/php/services_private_frozen.php -> src/Symfony/Component/DependencyInjection/Tests/Fixtures/php/services_private_frozen.php",
          "--- Hunk 1 ---",
          "[Context before]",
          "68:     protected function getBarServiceService()",
          "69:     {",
          "71:     }",
          "",
          "[Removed Lines]",
          "70:         return $this->services['bar_service'] = new \\stdClass(${($_ = isset($this->services['baz_service']) ? $this->services['baz_service'] : $this->services['baz_service'] = new \\stdClass()) && false ?: '_'});",
          "",
          "[Added Lines]",
          "70:         return $this->services['bar_service'] = new \\stdClass(${($_ = isset($this->services['baz_service']) ? $this->services['baz_service'] : ($this->services['baz_service'] = new \\stdClass())) && false ?: '_'});",
          "",
          "---------------",
          "--- Hunk 2 ---",
          "[Context before]",
          "78:     protected function getFooServiceService()",
          "79:     {",
          "81:     }",
          "",
          "[Removed Lines]",
          "80:         return $this->services['foo_service'] = new \\stdClass(${($_ = isset($this->services['baz_service']) ? $this->services['baz_service'] : $this->services['baz_service'] = new \\stdClass()) && false ?: '_'});",
          "",
          "[Added Lines]",
          "80:         return $this->services['foo_service'] = new \\stdClass(${($_ = isset($this->services['baz_service']) ? $this->services['baz_service'] : ($this->services['baz_service'] = new \\stdClass())) && false ?: '_'});",
          "",
          "---------------"
        ],
        "src/Symfony/Component/DependencyInjection/Tests/Fixtures/php/services_private_in_expression.php||src/Symfony/Component/DependencyInjection/Tests/Fixtures/php/services_private_in_expression.php": [
          "File: src/Symfony/Component/DependencyInjection/Tests/Fixtures/php/services_private_in_expression.php -> src/Symfony/Component/DependencyInjection/Tests/Fixtures/php/services_private_in_expression.php",
          "--- Hunk 1 ---",
          "[Context before]",
          "68:     protected function getPublicFooService()",
          "69:     {",
          "71:     }",
          "",
          "[Removed Lines]",
          "70:         return $this->services['public_foo'] = new \\stdClass(${($_ = isset($this->services['private_foo']) ? $this->services['private_foo'] : $this->services['private_foo'] = new \\stdClass()) && false ?: '_'});",
          "",
          "[Added Lines]",
          "70:         return $this->services['public_foo'] = new \\stdClass(${($_ = isset($this->services['private_foo']) ? $this->services['private_foo'] : ($this->services['private_foo'] = new \\stdClass())) && false ?: '_'}->bar);",
          "",
          "---------------"
        ],
        "src/Symfony/Component/DependencyInjection/Tests/Fixtures/php/services_rot13_env.php||src/Symfony/Component/DependencyInjection/Tests/Fixtures/php/services_rot13_env.php": [
          "File: src/Symfony/Component/DependencyInjection/Tests/Fixtures/php/services_rot13_env.php -> src/Symfony/Component/DependencyInjection/Tests/Fixtures/php/services_rot13_env.php",
          "--- Hunk 1 ---",
          "[Context before]",
          "78:     protected function getContainer_EnvVarProcessorsLocatorService()",
          "79:     {",
          "80:         return $this->services['container.env_var_processors_locator'] = new \\Symfony\\Component\\DependencyInjection\\ServiceLocator(array('rot13' => function () {",
          "82:         }));",
          "83:     }",
          "",
          "[Removed Lines]",
          "81:             return ${($_ = isset($this->services['Symfony\\Component\\DependencyInjection\\Tests\\Dumper\\Rot13EnvVarProcessor']) ? $this->services['Symfony\\Component\\DependencyInjection\\Tests\\Dumper\\Rot13EnvVarProcessor'] : $this->services['Symfony\\Component\\DependencyInjection\\Tests\\Dumper\\Rot13EnvVarProcessor'] = new \\Symfony\\Component\\DependencyInjection\\Tests\\Dumper\\Rot13EnvVarProcessor()) && false ?: '_'};",
          "",
          "[Added Lines]",
          "81:             return ${($_ = isset($this->services['Symfony\\Component\\DependencyInjection\\Tests\\Dumper\\Rot13EnvVarProcessor']) ? $this->services['Symfony\\Component\\DependencyInjection\\Tests\\Dumper\\Rot13EnvVarProcessor'] : ($this->services['Symfony\\Component\\DependencyInjection\\Tests\\Dumper\\Rot13EnvVarProcessor'] = new \\Symfony\\Component\\DependencyInjection\\Tests\\Dumper\\Rot13EnvVarProcessor())) && false ?: '_'};",
          "",
          "---------------"
        ],
        "src/Symfony/Component/DependencyInjection/Tests/Fixtures/php/services_subscriber.php||src/Symfony/Component/DependencyInjection/Tests/Fixtures/php/services_subscriber.php": [
          "File: src/Symfony/Component/DependencyInjection/Tests/Fixtures/php/services_subscriber.php -> src/Symfony/Component/DependencyInjection/Tests/Fixtures/php/services_subscriber.php",
          "--- Hunk 1 ---",
          "[Context before]",
          "84:     protected function getFooServiceService()",
          "85:     {",
          "86:         return $this->services['foo_service'] = new \\Symfony\\Component\\DependencyInjection\\Tests\\Fixtures\\TestServiceSubscriber((new \\Symfony\\Component\\DependencyInjection\\ServiceLocator(array('Symfony\\\\Component\\\\DependencyInjection\\\\Tests\\\\Fixtures\\\\CustomDefinition' => function () {",
          "88:         }, 'Symfony\\\\Component\\\\DependencyInjection\\\\Tests\\\\Fixtures\\\\TestServiceSubscriber' => function () {",
          "90:         }, 'bar' => function () {",
          "92:         }, 'baz' => function () {",
          "94:         })))->withContext('foo_service', $this));",
          "95:     }",
          "",
          "[Removed Lines]",
          "87:             $f = function (\\Symfony\\Component\\DependencyInjection\\Tests\\Fixtures\\CustomDefinition $v = null) { return $v; }; return $f(${($_ = isset($this->services['Symfony\\Component\\DependencyInjection\\Tests\\Fixtures\\CustomDefinition']) ? $this->services['Symfony\\Component\\DependencyInjection\\Tests\\Fixtures\\CustomDefinition'] : $this->services['Symfony\\Component\\DependencyInjection\\Tests\\Fixtures\\CustomDefinition'] = new \\Symfony\\Component\\DependencyInjection\\Tests\\Fixtures\\CustomDefinition()) && false ?: '_'});",
          "89:             $f = function (\\Symfony\\Component\\DependencyInjection\\Tests\\Fixtures\\TestServiceSubscriber $v) { return $v; }; return $f(${($_ = isset($this->services['Symfony\\Component\\DependencyInjection\\Tests\\Fixtures\\TestServiceSubscriber']) ? $this->services['Symfony\\Component\\DependencyInjection\\Tests\\Fixtures\\TestServiceSubscriber'] : $this->services['Symfony\\Component\\DependencyInjection\\Tests\\Fixtures\\TestServiceSubscriber'] = new \\Symfony\\Component\\DependencyInjection\\Tests\\Fixtures\\TestServiceSubscriber()) && false ?: '_'});",
          "91:             $f = function (\\Symfony\\Component\\DependencyInjection\\Tests\\Fixtures\\CustomDefinition $v) { return $v; }; return $f(${($_ = isset($this->services['Symfony\\Component\\DependencyInjection\\Tests\\Fixtures\\TestServiceSubscriber']) ? $this->services['Symfony\\Component\\DependencyInjection\\Tests\\Fixtures\\TestServiceSubscriber'] : $this->services['Symfony\\Component\\DependencyInjection\\Tests\\Fixtures\\TestServiceSubscriber'] = new \\Symfony\\Component\\DependencyInjection\\Tests\\Fixtures\\TestServiceSubscriber()) && false ?: '_'});",
          "93:             $f = function (\\Symfony\\Component\\DependencyInjection\\Tests\\Fixtures\\CustomDefinition $v = null) { return $v; }; return $f(${($_ = isset($this->services['Symfony\\Component\\DependencyInjection\\Tests\\Fixtures\\CustomDefinition']) ? $this->services['Symfony\\Component\\DependencyInjection\\Tests\\Fixtures\\CustomDefinition'] : $this->services['Symfony\\Component\\DependencyInjection\\Tests\\Fixtures\\CustomDefinition'] = new \\Symfony\\Component\\DependencyInjection\\Tests\\Fixtures\\CustomDefinition()) && false ?: '_'});",
          "",
          "[Added Lines]",
          "87:             $f = function (\\Symfony\\Component\\DependencyInjection\\Tests\\Fixtures\\CustomDefinition $v = null) { return $v; }; return $f(${($_ = isset($this->services['Symfony\\Component\\DependencyInjection\\Tests\\Fixtures\\CustomDefinition']) ? $this->services['Symfony\\Component\\DependencyInjection\\Tests\\Fixtures\\CustomDefinition'] : ($this->services['Symfony\\Component\\DependencyInjection\\Tests\\Fixtures\\CustomDefinition'] = new \\Symfony\\Component\\DependencyInjection\\Tests\\Fixtures\\CustomDefinition())) && false ?: '_'});",
          "89:             $f = function (\\Symfony\\Component\\DependencyInjection\\Tests\\Fixtures\\TestServiceSubscriber $v) { return $v; }; return $f(${($_ = isset($this->services['Symfony\\Component\\DependencyInjection\\Tests\\Fixtures\\TestServiceSubscriber']) ? $this->services['Symfony\\Component\\DependencyInjection\\Tests\\Fixtures\\TestServiceSubscriber'] : ($this->services['Symfony\\Component\\DependencyInjection\\Tests\\Fixtures\\TestServiceSubscriber'] = new \\Symfony\\Component\\DependencyInjection\\Tests\\Fixtures\\TestServiceSubscriber())) && false ?: '_'});",
          "91:             $f = function (\\Symfony\\Component\\DependencyInjection\\Tests\\Fixtures\\CustomDefinition $v) { return $v; }; return $f(${($_ = isset($this->services['Symfony\\Component\\DependencyInjection\\Tests\\Fixtures\\TestServiceSubscriber']) ? $this->services['Symfony\\Component\\DependencyInjection\\Tests\\Fixtures\\TestServiceSubscriber'] : ($this->services['Symfony\\Component\\DependencyInjection\\Tests\\Fixtures\\TestServiceSubscriber'] = new \\Symfony\\Component\\DependencyInjection\\Tests\\Fixtures\\TestServiceSubscriber())) && false ?: '_'});",
          "93:             $f = function (\\Symfony\\Component\\DependencyInjection\\Tests\\Fixtures\\CustomDefinition $v = null) { return $v; }; return $f(${($_ = isset($this->services['Symfony\\Component\\DependencyInjection\\Tests\\Fixtures\\CustomDefinition']) ? $this->services['Symfony\\Component\\DependencyInjection\\Tests\\Fixtures\\CustomDefinition'] : ($this->services['Symfony\\Component\\DependencyInjection\\Tests\\Fixtures\\CustomDefinition'] = new \\Symfony\\Component\\DependencyInjection\\Tests\\Fixtures\\CustomDefinition())) && false ?: '_'});",
          "",
          "---------------"
        ],
        "src/Symfony/Component/DependencyInjection/Tests/Fixtures/php/services_uninitialized_ref.php||src/Symfony/Component/DependencyInjection/Tests/Fixtures/php/services_uninitialized_ref.php": [
          "File: src/Symfony/Component/DependencyInjection/Tests/Fixtures/php/services_uninitialized_ref.php -> src/Symfony/Component/DependencyInjection/Tests/Fixtures/php/services_uninitialized_ref.php",
          "--- Hunk 1 ---",
          "[Context before]",
          "107:     {",
          "108:         $this->services['baz'] = $instance = new \\stdClass();",
          "112:         return $instance;",
          "113:     }",
          "",
          "[Removed Lines]",
          "110:         $instance->foo3 = ${($_ = isset($this->services['foo3']) ? $this->services['foo3'] : $this->services['foo3'] = new \\stdClass()) && false ?: '_'};",
          "",
          "[Added Lines]",
          "110:         $instance->foo3 = ${($_ = isset($this->services['foo3']) ? $this->services['foo3'] : ($this->services['foo3'] = new \\stdClass())) && false ?: '_'};",
          "",
          "---------------"
        ]
      }
    },
    {
      "candidate_hash": "8bba68f811ff9cadfb403a67b2ab307797d2ac74",
      "candidate_info": {
        "commit_hash": "8bba68f811ff9cadfb403a67b2ab307797d2ac74",
        "repo": "symfony/symfony",
        "commit_url": "https://github.com/symfony/symfony/commit/8bba68f811ff9cadfb403a67b2ab307797d2ac74",
        "files": [
          "src/Symfony/Component/DependencyInjection/Compiler/CheckExceptionOnInvalidReferenceBehaviorPass.php",
          "src/Symfony/Component/DependencyInjection/Dumper/PhpDumper.php",
          "src/Symfony/Component/DependencyInjection/Tests/Compiler/CheckExceptionOnInvalidReferenceBehaviorPassTest.php"
        ],
        "message": "[DI] Fix bad exception on uninitialized references to non-shared services",
        "before_after_code_files": [
          "src/Symfony/Component/DependencyInjection/Compiler/CheckExceptionOnInvalidReferenceBehaviorPass.php||src/Symfony/Component/DependencyInjection/Compiler/CheckExceptionOnInvalidReferenceBehaviorPass.php",
          "src/Symfony/Component/DependencyInjection/Dumper/PhpDumper.php||src/Symfony/Component/DependencyInjection/Dumper/PhpDumper.php",
          "src/Symfony/Component/DependencyInjection/Tests/Compiler/CheckExceptionOnInvalidReferenceBehaviorPassTest.php||src/Symfony/Component/DependencyInjection/Tests/Compiler/CheckExceptionOnInvalidReferenceBehaviorPassTest.php"
        ]
      },
      "candidate_patch_features": {
        "candidate_earlier_than_patch": 1,
        "same_branch_evolution": 1,
        "olp_code_files": {
          "patch": [
            "src/Symfony/Component/DependencyInjection/Dumper/PhpDumper.php||src/Symfony/Component/DependencyInjection/Dumper/PhpDumper.php"
          ],
          "candidate": [
            "src/Symfony/Component/DependencyInjection/Dumper/PhpDumper.php||src/Symfony/Component/DependencyInjection/Dumper/PhpDumper.php"
          ]
        }
      },
      "candidate_diff": {
        "src/Symfony/Component/DependencyInjection/Compiler/CheckExceptionOnInvalidReferenceBehaviorPass.php||src/Symfony/Component/DependencyInjection/Compiler/CheckExceptionOnInvalidReferenceBehaviorPass.php": [
          "File: src/Symfony/Component/DependencyInjection/Compiler/CheckExceptionOnInvalidReferenceBehaviorPass.php -> src/Symfony/Component/DependencyInjection/Compiler/CheckExceptionOnInvalidReferenceBehaviorPass.php",
          "--- Hunk 1 ---",
          "[Context before]",
          "12: namespace Symfony\\Component\\DependencyInjection\\Compiler;",
          "15: use Symfony\\Component\\DependencyInjection\\Exception\\ServiceNotFoundException;",
          "16: use Symfony\\Component\\DependencyInjection\\ContainerInterface;",
          "17: use Symfony\\Component\\DependencyInjection\\Reference;",
          "",
          "[Removed Lines]",
          "14: use Symfony\\Component\\DependencyInjection\\Exception\\InvalidArgumentException;",
          "",
          "[Added Lines]",
          "[None]",
          "",
          "---------------",
          "--- Hunk 2 ---",
          "[Context before]",
          "31:         if (ContainerInterface::EXCEPTION_ON_INVALID_REFERENCE === $value->getInvalidBehavior() && !$this->container->has($id = (string) $value)) {",
          "32:             throw new ServiceNotFoundException($id, $this->currentId);",
          "33:         }",
          "38:         return $value;",
          "39:     }",
          "",
          "[Removed Lines]",
          "34:         if (ContainerInterface::IGNORE_ON_UNINITIALIZED_REFERENCE === $value->getInvalidBehavior() && $this->container->has($id = (string) $value) && !$this->container->findDefinition($id)->isShared()) {",
          "35:             throw new InvalidArgumentException(sprintf('Invalid ignore-on-uninitialized reference found in service \"%s\": target service \"%s\" is not shared.', $this->currentId, $id));",
          "36:         }",
          "",
          "[Added Lines]",
          "[None]",
          "",
          "---------------"
        ],
        "src/Symfony/Component/DependencyInjection/Dumper/PhpDumper.php||src/Symfony/Component/DependencyInjection/Dumper/PhpDumper.php": [
          "File: src/Symfony/Component/DependencyInjection/Dumper/PhpDumper.php -> src/Symfony/Component/DependencyInjection/Dumper/PhpDumper.php",
          "--- Hunk 1 ---",
          "[Context before]",
          "1896:         if ($this->container->hasDefinition($id) && ($definition = $this->container->getDefinition($id)) && !$definition->isSynthetic()) {",
          "1897:             if (null !== $reference && ContainerInterface::IGNORE_ON_UNINITIALIZED_REFERENCE === $reference->getInvalidBehavior()) {",
          "1898:                 $code = 'null';",
          "1899:             } elseif ($this->isTrivialInstance($definition)) {",
          "1900:                 $code = substr($this->addNewInstance($definition, '', '', $id), 8, -2);",
          "1901:                 if ($definition->isShared()) {",
          "",
          "[Removed Lines]",
          "[None]",
          "",
          "[Added Lines]",
          "1899:                 if (!$definition->isShared()) {",
          "1900:                     return $code;",
          "1901:                 }",
          "",
          "---------------"
        ],
        "src/Symfony/Component/DependencyInjection/Tests/Compiler/CheckExceptionOnInvalidReferenceBehaviorPassTest.php||src/Symfony/Component/DependencyInjection/Tests/Compiler/CheckExceptionOnInvalidReferenceBehaviorPassTest.php": [
          "File: src/Symfony/Component/DependencyInjection/Tests/Compiler/CheckExceptionOnInvalidReferenceBehaviorPassTest.php -> src/Symfony/Component/DependencyInjection/Tests/Compiler/CheckExceptionOnInvalidReferenceBehaviorPassTest.php",
          "--- Hunk 1 ---",
          "[Context before]",
          "68:         $this->process($container);",
          "69:     }",
          "92:     public function testProcessDefinitionWithBindings()",
          "93:     {",
          "94:         $container = new ContainerBuilder();",
          "",
          "[Removed Lines]",
          "75:     public function testProcessThrowsExceptionOnNonSharedUninitializedReference()",
          "76:     {",
          "77:         $container = new ContainerBuilder();",
          "79:         $container",
          "80:             ->register('a', 'stdClass')",
          "81:             ->addArgument(new Reference('b', $container::IGNORE_ON_UNINITIALIZED_REFERENCE))",
          "82:         ;",
          "84:         $container",
          "85:             ->register('b', 'stdClass')",
          "86:             ->setShared(false)",
          "87:         ;",
          "89:         $this->process($container);",
          "90:     }",
          "",
          "[Added Lines]",
          "[None]",
          "",
          "---------------"
        ]
      }
    },
    {
      "candidate_hash": "198bee0916fb62ca209c3623709c9066b4559a71",
      "candidate_info": {
        "commit_hash": "198bee0916fb62ca209c3623709c9066b4559a71",
        "repo": "symfony/symfony",
        "commit_url": "https://github.com/symfony/symfony/commit/198bee0916fb62ca209c3623709c9066b4559a71",
        "files": [
          "src/Symfony/Bridge/ProxyManager/LazyProxy/PhpDumper/ProxyDumper.php",
          "src/Symfony/Bridge/ProxyManager/Tests/LazyProxy/PhpDumper/ProxyDumperTest.php"
        ],
        "message": "[ProxyManagerBridge] Fixed support of private services",
        "before_after_code_files": [
          "src/Symfony/Bridge/ProxyManager/LazyProxy/PhpDumper/ProxyDumper.php||src/Symfony/Bridge/ProxyManager/LazyProxy/PhpDumper/ProxyDumper.php",
          "src/Symfony/Bridge/ProxyManager/Tests/LazyProxy/PhpDumper/ProxyDumperTest.php||src/Symfony/Bridge/ProxyManager/Tests/LazyProxy/PhpDumper/ProxyDumperTest.php"
        ]
      },
      "candidate_patch_features": {
        "candidate_earlier_than_patch": 1,
        "same_branch_evolution": 1,
        "olp_code_files": {
          "patch": [
            "src/Symfony/Bridge/ProxyManager/LazyProxy/PhpDumper/ProxyDumper.php||src/Symfony/Bridge/ProxyManager/LazyProxy/PhpDumper/ProxyDumper.php"
          ],
          "candidate": [
            "src/Symfony/Bridge/ProxyManager/LazyProxy/PhpDumper/ProxyDumper.php||src/Symfony/Bridge/ProxyManager/LazyProxy/PhpDumper/ProxyDumper.php"
          ]
        }
      },
      "candidate_diff": {
        "src/Symfony/Bridge/ProxyManager/LazyProxy/PhpDumper/ProxyDumper.php||src/Symfony/Bridge/ProxyManager/LazyProxy/PhpDumper/ProxyDumper.php": [
          "File: src/Symfony/Bridge/ProxyManager/LazyProxy/PhpDumper/ProxyDumper.php -> src/Symfony/Bridge/ProxyManager/LazyProxy/PhpDumper/ProxyDumper.php",
          "--- Hunk 1 ---",
          "[Context before]",
          "57:         $instantiation = 'return';",
          "59:         if ($definition->isShared()) {",
          "61:         }",
          "63:         if (null === $factoryCode) {",
          "",
          "[Removed Lines]",
          "60:             $instantiation .= \" \\$this->services['$id'] =\";",
          "",
          "[Added Lines]",
          "60:             $instantiation .= sprintf(' $this->%s[\\'%s\\'] =', $definition->isPublic() && !$definition->isPrivate() ? 'services' : 'privates', $id);",
          "",
          "---------------"
        ],
        "src/Symfony/Bridge/ProxyManager/Tests/LazyProxy/PhpDumper/ProxyDumperTest.php||src/Symfony/Bridge/ProxyManager/Tests/LazyProxy/PhpDumper/ProxyDumperTest.php": [
          "File: src/Symfony/Bridge/ProxyManager/Tests/LazyProxy/PhpDumper/ProxyDumperTest.php -> src/Symfony/Bridge/ProxyManager/Tests/LazyProxy/PhpDumper/ProxyDumperTest.php",
          "--- Hunk 1 ---",
          "[Context before]",
          "83:         );",
          "84:     }",
          "",
          "[Removed Lines]",
          "[None]",
          "",
          "[Added Lines]",
          "89:     public function testCorrectAssigning(Definition $definition, $access)",
          "90:     {",
          "91:         $definition->setLazy(true);",
          "93:         $code = $this->dumper->getProxyFactoryCode($definition, 'foo', '$this->getFoo2Service(false)');",
          "95:         $this->assertStringMatchesFormat('%A$this->'.$access.'[\\'foo\\'] = %A', $code);",
          "96:     }",
          "98:     public function getPrivatePublicDefinitions()",
          "99:     {",
          "100:         return array(",
          "101:             array(",
          "102:                 (new Definition(__CLASS__))",
          "103:                     ->setPublic(false),",
          "104:                 'privates',",
          "105:             ),",
          "106:             array(",
          "107:                 (new Definition(__CLASS__))",
          "108:                     ->setPublic(true),",
          "109:                 'services',",
          "110:             ),",
          "111:         );",
          "112:     }",
          "",
          "---------------"
        ]
      }
    }
  ]
}