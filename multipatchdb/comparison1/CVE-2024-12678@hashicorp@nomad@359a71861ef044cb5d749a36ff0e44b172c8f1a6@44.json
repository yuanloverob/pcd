{
  "cve_id": "CVE-2024-12678",
  "cve_desc": "Nomad Community and Nomad Enterprise (\"Nomad\") allocations are vulnerable to privilege escalation within a namespace through unredacted workload identity tokens. This vulnerability, identified as CVE-2024-12678, is fixed in Nomad Community Edition 1.9.4 and Nomad Enterprise 1.9.4, 1.8.8, and 1.7.16.",
  "repo": "hashicorp/nomad",
  "patch_hash": "359a71861ef044cb5d749a36ff0e44b172c8f1a6",
  "patch_info": {
    "commit_hash": "359a71861ef044cb5d749a36ff0e44b172c8f1a6",
    "repo": "hashicorp/nomad",
    "commit_url": "https://github.com/hashicorp/nomad/commit/359a71861ef044cb5d749a36ff0e44b172c8f1a6",
    "files": [
      ".changelog/24683.txt",
      "command/agent/node_endpoint.go",
      "nomad/alloc_endpoint.go",
      "nomad/structs/structs.go"
    ],
    "message": "Backport of sec: fix alloc workload identity namespace permission into release/1.9.x (#24685)\n\nCo-authored-by: Deniz Onur Duzgun <59659739+dduzgun-security@users.noreply.github.com>",
    "before_after_code_files": [
      "command/agent/node_endpoint.go||command/agent/node_endpoint.go",
      "nomad/alloc_endpoint.go||nomad/alloc_endpoint.go",
      "nomad/structs/structs.go||nomad/structs/structs.go"
    ]
  },
  "patch_diff": {
    "command/agent/node_endpoint.go||command/agent/node_endpoint.go": [
      "File: command/agent/node_endpoint.go -> command/agent/node_endpoint.go",
      "--- Hunk 1 ---",
      "[Context before]",
      "105:   out.Allocs = make([]*structs.Allocation, 0)",
      "106:  }",
      "107:  for _, alloc := range out.Allocs {",
      "108:   alloc.SetEventDisplayMessages()",
      "109:  }",
      "110:  return out.Allocs, nil",
      "",
      "[Removed Lines]",
      "[None]",
      "",
      "[Added Lines]",
      "108:   alloc = alloc.Sanitize()",
      "",
      "---------------"
    ],
    "nomad/alloc_endpoint.go||nomad/alloc_endpoint.go": [
      "File: nomad/alloc_endpoint.go -> nomad/alloc_endpoint.go",
      "--- Hunk 1 ---",
      "[Context before]",
      "172:    }",
      "176:    if out != nil {",
      "178:     if !aclObj.AllowClientOp() && !allowNsOp(aclObj, out.Namespace) {",
      "179:      return structs.NewErrUnknownAllocation(args.AllocID)",
      "",
      "[Removed Lines]",
      "175:    reply.Alloc = out",
      "",
      "[Added Lines]",
      "176:     out = out.Sanitize()",
      "177:     reply.Alloc = out",
      "",
      "---------------"
    ],
    "nomad/structs/structs.go||nomad/structs/structs.go": [
      "File: nomad/structs/structs.go -> nomad/structs/structs.go",
      "--- Hunk 1 ---",
      "[Context before]",
      "11199:  return a.ID",
      "11200: }",
      "",
      "[Removed Lines]",
      "[None]",
      "",
      "[Added Lines]",
      "11205: func (a *Allocation) Sanitize() *Allocation {",
      "11206:  if a == nil {",
      "11207:   return nil",
      "11208:  }",
      "11210:  if a.SignedIdentities == nil {",
      "11211:   return a",
      "11212:  }",
      "11214:  clean := a.Copy()",
      "11215:  clean.SignedIdentities = nil",
      "11216:  return clean",
      "11217: }",
      "",
      "---------------"
    ]
  },
  "candidates": [
    {
      "candidate_hash": "31b517cfaea04fe7aa4d44592b53523a5f68bcfe",
      "candidate_info": {
        "commit_hash": "31b517cfaea04fe7aa4d44592b53523a5f68bcfe",
        "repo": "hashicorp/nomad",
        "commit_url": "https://github.com/hashicorp/nomad/commit/31b517cfaea04fe7aa4d44592b53523a5f68bcfe",
        "files": [
          ".changelog/25255.txt",
          "client/config/config.go",
          "client/config/config_test.go",
          "website/content/docs/configuration/client.mdx"
        ],
        "message": "Backport of Allow disabling wait in client configuration into release/1.9.x (#25274)\n\nCo-authored-by: grembo <freebsd@grem.de>",
        "before_after_code_files": [
          "client/config/config.go||client/config/config.go",
          "client/config/config_test.go||client/config/config_test.go"
        ]
      },
      "candidate_patch_features": {
        "candidate_earlier_than_patch": 0,
        "same_pr": 1,
        "olp_pr_links": [
          "https://github.com/hashicorp/nomad/pull/25471"
        ],
        "olp_code_files": {
          "patch": [],
          "candidate": []
        }
      },
      "candidate_diff": {
        "client/config/config.go||client/config/config.go": [
          "File: client/config/config.go -> client/config/config.go",
          "--- Hunk 1 ---",
          "[Context before]",
          "688:   return nil, err",
          "689:  }",
          "693:  if wc.Min != nil {",
          "694:   result.Min = wc.Min",
          "",
          "[Removed Lines]",
          "691:  result := &config.WaitConfig{Enabled: pointer.Of(true)}",
          "",
          "[Added Lines]",
          "691:  enabled := wc.Min == nil || *wc.Min != 0 || wc.Max == nil || *wc.Max != 0",
          "692:  result := &config.WaitConfig{Enabled: pointer.Of(enabled)}",
          "",
          "---------------"
        ],
        "client/config/config_test.go||client/config/config_test.go": [
          "File: client/config/config_test.go -> client/config/config_test.go",
          "--- Hunk 1 ---",
          "[Context before]",
          "298:  actual, err := clientWaitConfig.ToConsulTemplate()",
          "299:  must.NoError(t, err)",
          "300:  must.Eq(t, *expected.Min, *actual.Min)",
          "301:  must.Eq(t, *expected.Max, *actual.Max)",
          "302: }",
          "",
          "[Removed Lines]",
          "[None]",
          "",
          "[Added Lines]",
          "300:  must.Eq(t, *expected.Enabled, *actual.Enabled)",
          "301:  must.Eq(t, *expected.Min, *actual.Min)",
          "302:  must.Eq(t, *expected.Max, *actual.Max)",
          "304:  expected = config.WaitConfig{",
          "305:   Enabled: pointer.Of(false),",
          "306:   Min:     pointer.Of(0 * time.Second),",
          "307:   Max:     pointer.Of(0 * time.Second),",
          "308:  }",
          "310:  clientWaitConfig = &WaitConfig{",
          "311:   Min: pointer.Of(0 * time.Second),",
          "312:   Max: pointer.Of(0 * time.Second),",
          "313:  }",
          "315:  actual, err = clientWaitConfig.ToConsulTemplate()",
          "316:  must.NoError(t, err)",
          "",
          "---------------"
        ]
      }
    },
    {
      "candidate_hash": "41eb09d8528b684767a45d561f2a229f932b936a",
      "candidate_info": {
        "commit_hash": "41eb09d8528b684767a45d561f2a229f932b936a",
        "repo": "hashicorp/nomad",
        "commit_url": "https://github.com/hashicorp/nomad/commit/41eb09d8528b684767a45d561f2a229f932b936a",
        "files": [
          "ui/app/components/actions-flyout.hbs",
          "ui/app/components/allocation-service-sidebar.hbs",
          "ui/app/components/job-status/allocation-status-block.hbs",
          "ui/app/components/job-status/failed-or-lost.hbs",
          "ui/app/components/job-status/individual-allocation.hbs",
          "ui/app/components/job-status/latest-deployment.hbs",
          "ui/app/components/job-status/panel/deploying.hbs",
          "ui/app/components/task-sub-row.hbs",
          "ui/app/components/variable-paths.hbs",
          "ui/app/styles/components/actions.scss",
          "ui/app/styles/components/job-status-panel.scss",
          "ui/app/templates/administration/policies/policy.hbs",
          "ui/app/templates/administration/roles/role.hbs",
          "ui/app/templates/allocations/allocation/index.hbs",
          "ui/app/templates/clients/client/index.hbs",
          "ui/app/templates/components/job-service-row.hbs",
          "ui/app/templates/components/scale-events-accordion.hbs",
          "ui/app/templates/components/task-row.hbs",
          "ui/app/templates/components/topo-viz/node.hbs",
          "ui/app/templates/jobs/index.hbs",
          "ui/app/templates/jobs/job/services/service.hbs",
          "ui/app/templates/variables/variable/index.hbs",
          "ui/ember-cli-build.js",
          "ui/package.json",
          "ui/tests/acceptance/variables-test.js",
          "ui/tests/pages/clients/list.js",
          "ui/tests/pages/components/topo-viz/node.js",
          "ui/yarn.lock"
        ],
        "message": "backport of commit 00b88bda741a384e47e8303335380846cd194e4c (#24336)\n\nCo-authored-by: Zack Moore <zack.moore89@gmail.com>",
        "before_after_code_files": [
          "ui/app/components/actions-flyout.hbs||ui/app/components/actions-flyout.hbs",
          "ui/app/components/allocation-service-sidebar.hbs||ui/app/components/allocation-service-sidebar.hbs",
          "ui/app/components/job-status/allocation-status-block.hbs||ui/app/components/job-status/allocation-status-block.hbs",
          "ui/app/components/job-status/failed-or-lost.hbs||ui/app/components/job-status/failed-or-lost.hbs",
          "ui/app/components/job-status/individual-allocation.hbs||ui/app/components/job-status/individual-allocation.hbs",
          "ui/app/components/job-status/latest-deployment.hbs||ui/app/components/job-status/latest-deployment.hbs",
          "ui/app/components/job-status/panel/deploying.hbs||ui/app/components/job-status/panel/deploying.hbs",
          "ui/app/components/task-sub-row.hbs||ui/app/components/task-sub-row.hbs",
          "ui/app/components/variable-paths.hbs||ui/app/components/variable-paths.hbs",
          "ui/app/styles/components/actions.scss||ui/app/styles/components/actions.scss",
          "ui/app/styles/components/job-status-panel.scss||ui/app/styles/components/job-status-panel.scss",
          "ui/app/templates/administration/policies/policy.hbs||ui/app/templates/administration/policies/policy.hbs",
          "ui/app/templates/administration/roles/role.hbs||ui/app/templates/administration/roles/role.hbs",
          "ui/app/templates/allocations/allocation/index.hbs||ui/app/templates/allocations/allocation/index.hbs",
          "ui/app/templates/clients/client/index.hbs||ui/app/templates/clients/client/index.hbs",
          "ui/app/templates/components/job-service-row.hbs||ui/app/templates/components/job-service-row.hbs",
          "ui/app/templates/components/scale-events-accordion.hbs||ui/app/templates/components/scale-events-accordion.hbs",
          "ui/app/templates/components/task-row.hbs||ui/app/templates/components/task-row.hbs",
          "ui/app/templates/components/topo-viz/node.hbs||ui/app/templates/components/topo-viz/node.hbs",
          "ui/app/templates/jobs/index.hbs||ui/app/templates/jobs/index.hbs",
          "ui/app/templates/jobs/job/services/service.hbs||ui/app/templates/jobs/job/services/service.hbs",
          "ui/app/templates/variables/variable/index.hbs||ui/app/templates/variables/variable/index.hbs",
          "ui/ember-cli-build.js||ui/ember-cli-build.js",
          "ui/tests/acceptance/variables-test.js||ui/tests/acceptance/variables-test.js",
          "ui/tests/pages/clients/list.js||ui/tests/pages/clients/list.js",
          "ui/tests/pages/components/topo-viz/node.js||ui/tests/pages/components/topo-viz/node.js",
          "ui/yarn.lock||ui/yarn.lock"
        ]
      },
      "candidate_patch_features": {
        "candidate_earlier_than_patch": 1,
        "same_pr": 1,
        "olp_pr_links": [
          "https://github.com/hashicorp/nomad/pull/25471"
        ],
        "olp_code_files": {
          "patch": [],
          "candidate": []
        }
      },
      "candidate_diff": {
        "ui/app/components/actions-flyout.hbs||ui/app/components/actions-flyout.hbs": [
          "File: ui/app/components/actions-flyout.hbs -> ui/app/components/actions-flyout.hbs",
          "--- Hunk 1 ---",
          "[Context before]",
          "33:           <Hds::ApplicationState as |A|>",
          "34:             <A.Header @title=\"No actions in queue\" />",
          "35:             <A.Body @text=\"Your actions have been manually cleared. To run more, head to a Job or Task page with actions in its Jobspec, and an Actions dropdown will automatically populate.\" />",
          "37:               <F.LinkStandalone @icon=\"docs-link\" @text=\"Learn more about Actions\" @href=\"https://developer.hashicorp.com/nomad/docs/job-specification/action\" @iconPosition=\"trailing\" />",
          "38:             </A.Footer>",
          "39:           </Hds::ApplicationState>",
          "",
          "[Removed Lines]",
          "36:             <A.Footer @hasDivider={{true}} as |F|>",
          "",
          "[Added Lines]",
          "36:             <A.Footer as |F|>",
          "",
          "---------------"
        ],
        "ui/app/components/allocation-service-sidebar.hbs||ui/app/components/allocation-service-sidebar.hbs": [
          "File: ui/app/components/allocation-service-sidebar.hbs -> ui/app/components/allocation-service-sidebar.hbs",
          "--- Hunk 1 ---",
          "[Context before]",
          "18:         {{#if (not-eq @service.provider \"consul\")}}",
          "19:           <span class=\"aggregate-status\">",
          "20:             {{#if (eq this.aggregateStatus 'Unhealthy')}}",
          "22:               Unhealthy",
          "23:             {{else if (eq this.aggregateStatus 'Unknown')}}",
          "24:             <Tooltip @text=\"The parent allocation for this service is not running\" @isFullText={{true}}>",
          "26:               Health Unknown",
          "27:             </Tooltip>",
          "28:             {{else}}",
          "30:               Healthy",
          "31:             {{/if}}",
          "32:           </span>",
          "",
          "[Removed Lines]",
          "21:               <FlightIcon @name=\"x-square-fill\" @color=\"#c84034\" />",
          "25:               <FlightIcon @name=\"help\" @color=\"#999999\" />",
          "29:               <FlightIcon @name=\"check-square-fill\" @color=\"#25ba81\" />",
          "",
          "[Added Lines]",
          "21:               <Hds::Icon @name=\"x-square-fill\" @color=\"#c84034\" @isInline={{true}} />",
          "25:               <Hds::Icon @name=\"help\" @color=\"#999999\" @isInline={{true}} />",
          "29:               <Hds::Icon @name=\"check-square-fill\" @color=\"#25ba81\" @isInline={{true}} />",
          "",
          "---------------",
          "--- Hunk 2 ---",
          "[Context before]",
          "133:             <td class=\"status\">",
          "134:               <span>",
          "135:                 {{#if (eq row.model.Status \"success\")}}",
          "137:                   Healthy",
          "138:                 {{else if (eq row.model.Status \"failure\")}}",
          "140:                   Unhealthy",
          "141:                 {{else if (eq row.model.Status \"pending\")}}",
          "142:                   Pending",
          "",
          "[Removed Lines]",
          "136:                   <FlightIcon @name=\"check-square-fill\" @color=\"#25ba81\" />",
          "139:                   <FlightIcon @name=\"x-square-fill\" @color=\"#c84034\" />",
          "",
          "[Added Lines]",
          "136:                   <Hds::Icon @name=\"check-square-fill\" @color=\"#25ba81\" @isInline={{true}} />",
          "139:                   <Hds::Icon @name=\"x-square-fill\" @color=\"#c84034\" @isInline={{true}} />",
          "",
          "---------------"
        ],
        "ui/app/components/job-status/allocation-status-block.hbs||ui/app/components/job-status/allocation-status-block.hbs": [
          "File: ui/app/components/job-status/allocation-status-block.hbs -> ui/app/components/job-status/allocation-status-block.hbs",
          "--- Hunk 1 ---",
          "[Context before]",
          "45:         {{#if (eq @status \"running\")}}",
          "46:           <span class=\"alloc-health-indicator\">",
          "47:             {{#if (eq @health \"healthy\")}}",
          "49:             {{else if (eq @health \"unhealthy\")}}",
          "51:             {{else}}",
          "53:             {{/if}}",
          "54:           </span>",
          "55:         {{/if}}",
          "",
          "[Removed Lines]",
          "48:               <FlightIcon @name=\"check\" @color=\"#25ba81\" />",
          "50:               <FlightIcon @name=\"x\" @color=\"#c84034\" />",
          "52:               <FlightIcon @name=\"running\" @color=\"black\" />",
          "",
          "[Added Lines]",
          "48:               <Hds::Icon @name=\"check\" @color=\"#25ba81\" @isInline={{true}} />",
          "50:               <Hds::Icon @name=\"x\" @color=\"#c84034\" @isInline={{true}} />",
          "52:               <Hds::Icon @name=\"running\" @color=\"black\" @isInline={{true}} />",
          "",
          "---------------"
        ],
        "ui/app/components/job-status/failed-or-lost.hbs||ui/app/components/job-status/failed-or-lost.hbs": [
          "File: ui/app/components/job-status/failed-or-lost.hbs -> ui/app/components/job-status/failed-or-lost.hbs",
          "--- Hunk 1 ---",
          "[Context before]",
          "9:     {{#if @supportsRescheduling}}",
          "10:       <span>",
          "11:         <Hds::TooltipButton @text=\"Allocations that have been rescheduled, on another node if possible, due to failure or manual restart\" aria-label=\"Info\">",
          "13:         </Hds::TooltipButton>",
          "14:         <ConditionalLinkTo",
          "15:           @condition={{@rescheduledAllocs.length}}",
          "",
          "[Removed Lines]",
          "12:           <FlightIcon @name=\"info\" />",
          "",
          "[Added Lines]",
          "12:           <Hds::Icon @name=\"info\" @isInline={{true}} />",
          "",
          "---------------",
          "--- Hunk 2 ---",
          "[Context before]",
          "26:     <span>",
          "27:       <Hds::TooltipButton @text=\"Allocations that have been restarted in-place due to a task failure or manual restart\" aria-label=\"Info\">",
          "29:       </Hds::TooltipButton>",
          "30:       <ConditionalLinkTo",
          "31:         @condition={{@restartedAllocs.length}}",
          "",
          "[Removed Lines]",
          "28:         <FlightIcon @name=\"info\" />",
          "",
          "[Added Lines]",
          "28:         <Hds::Icon @name=\"info\" @isInline={{true}} />",
          "",
          "---------------"
        ],
        "ui/app/components/job-status/individual-allocation.hbs||ui/app/components/job-status/individual-allocation.hbs": [
          "File: ui/app/components/job-status/individual-allocation.hbs -> ui/app/components/job-status/individual-allocation.hbs",
          "--- Hunk 1 ---",
          "[Context before]",
          "23:     {{#if (eq @status \"running\")}}",
          "24:       <span class=\"alloc-health-indicator\">",
          "25:         {{#if (eq @health \"healthy\")}}",
          "27:         {{else if (eq @health \"unhealthy\")}}",
          "29:         {{else}}",
          "31:         {{/if}}",
          "32:       </span>",
          "33:     {{/if}}",
          "",
          "[Removed Lines]",
          "26:           <FlightIcon @name=\"check\" @color=\"white\" />",
          "28:           <FlightIcon @name=\"x\" @color=\"white\" />",
          "30:           <FlightIcon @name=\"running\" @color=\"white\" />",
          "",
          "[Added Lines]",
          "26:           <Hds::Icon @name=\"check\" @color=\"white\" @isInline={{true}} />",
          "28:           <Hds::Icon @name=\"x\" @color=\"white\" @isInline={{true}} />",
          "30:           <Hds::Icon @name=\"running\" @color=\"white\" @isInline={{true}} />",
          "",
          "---------------"
        ],
        "ui/app/components/job-status/latest-deployment.hbs||ui/app/components/job-status/latest-deployment.hbs": [
          "File: ui/app/components/job-status/latest-deployment.hbs -> ui/app/components/job-status/latest-deployment.hbs",
          "--- Hunk 1 ---",
          "[Context before]",
          "7:   <LinkTo @route=\"jobs.job.deployments\" @model={{@job}}>",
          "8:     <h4>",
          "9:       Latest Deployment",
          "11:     </h4>",
          "12:   </LinkTo>",
          "13:   <Hds::Badge @text={{capitalize this.status}} @size=\"small\" @color={{this.statusColor}} @type=\"filled\" />",
          "",
          "[Removed Lines]",
          "10:       <FlightIcon @name=\"arrow-right\" />",
          "",
          "[Added Lines]",
          "10:       <Hds::Icon @name=\"arrow-right\" @isInline={{true}} />",
          "",
          "---------------"
        ],
        "ui/app/components/job-status/panel/deploying.hbs||ui/app/components/job-status/panel/deploying.hbs": [
          "File: ui/app/components/job-status/panel/deploying.hbs -> ui/app/components/job-status/panel/deploying.hbs",
          "--- Hunk 1 ---",
          "[Context before]",
          "140:               <span class=\"represented-allocation legend-example {{health}}\">",
          "141:                 <span class=\"alloc-health-indicator\">",
          "142:                   {{#if (eq health \"healthy\")}}",
          "144:                   {{else if (eq health \"unhealthy\")}}",
          "146:                   {{else}}",
          "148:                   {{/if}}",
          "149:                 </span>",
          "150:               </span>",
          "",
          "[Removed Lines]",
          "143:                     <FlightIcon @name=\"check\" @color=\"#25ba81\" />",
          "145:                     <FlightIcon @name=\"x\" @color=\"#c84034\" />",
          "147:                     <FlightIcon @name=\"running\" @color=\"black\" class=\"not-animated\" />",
          "",
          "[Added Lines]",
          "143:                     <Hds::Icon @name=\"check\" @color=\"#25ba81\" @isInline={{true}} />",
          "145:                     <Hds::Icon @name=\"x\" @color=\"#c84034\" @isInline={{true}} />",
          "147:                     <Hds::Icon @name=\"running\" @color=\"black\" class=\"not-animated\" @isInline={{true}} />",
          "",
          "---------------"
        ],
        "ui/app/components/task-sub-row.hbs||ui/app/components/task-sub-row.hbs": [
          "File: ui/app/components/task-sub-row.hbs -> ui/app/components/task-sub-row.hbs",
          "--- Hunk 1 ---",
          "[Context before]",
          "13:   <div class=\"name-grid\">",
          "14:    <LinkTo title={{this.task.name}} class=\"task-name\" @route=\"allocations.allocation.task\" @models={{array this.task.allocation this.task}}>{{this.task.name}}</LinkTo>",
          "15:    <button type=\"button\" class=\"logs-sidebar-trigger button is-borderless is-inline is-compact\" onclick={{action \"handleTaskLogsClick\" this.task}}>",
          "17:    </button>",
          "18:   </div>",
          "19:  </td>",
          "",
          "[Removed Lines]",
          "16:     <FlightIcon @name=\"logs\" />View Logs",
          "",
          "[Added Lines]",
          "16:     <Hds::Icon @name=\"logs\" @isInline={{true}} />View Logs",
          "",
          "---------------"
        ],
        "ui/app/components/variable-paths.hbs||ui/app/components/variable-paths.hbs": [
          "File: ui/app/components/variable-paths.hbs -> ui/app/components/variable-paths.hbs",
          "--- Hunk 1 ---",
          "[Context before]",
          "27:           }}",
          "28:         >",
          "29:           <span>",
          "31:             <LinkTo @route=\"variables.path\" @model={{folder.data.absolutePath}} @query={{hash namespace=\"*\"}}>",
          "32:               {{trim-path folder.name}}",
          "33:             </LinkTo>",
          "",
          "[Removed Lines]",
          "30:             <FlightIcon @name=\"folder\" />",
          "",
          "[Added Lines]",
          "30:             <Hds::Icon @name=\"folder\" @isInline={{true}} />",
          "",
          "---------------",
          "--- Hunk 2 ---",
          "[Context before]",
          "48:         }}",
          "49:       >",
          "50:         <B.Td>",
          "52:           {{#if (can \"read variable\" path=file.absoluteFilePath namespace=file.variable.namespace)}}",
          "53:           <LinkTo",
          "54:             @route=\"variables.variable\"",
          "",
          "[Removed Lines]",
          "51:           <FlightIcon @name=\"file-text\" />",
          "",
          "[Added Lines]",
          "51:           <Hds::Icon @name=\"file-text\" @isInline={{true}} />",
          "",
          "---------------"
        ],
        "ui/app/styles/components/actions.scss||ui/app/styles/components/actions.scss": [
          "File: ui/app/styles/components/actions.scss -> ui/app/styles/components/actions.scss",
          "--- Hunk 1 ---",
          "[Context before]",
          "60:     animation-fill-mode: both;",
          "61:   }",
          "64:     position: relative;",
          "65:     z-index: $z-base;",
          "67:       display: flex;",
          "68:       align-items: center;",
          "69:       gap: 1rem;",
          "70:       justify-content: space-between;",
          "71:       h3 {",
          "72:         flex-grow: 1;",
          "73:       }",
          "74:     }",
          "75:   }",
          "77:   .hds-application-state {",
          "",
          "[Removed Lines]",
          "63:   & > .hds-flyout__header {",
          "66:     .hds-flyout__title {",
          "",
          "[Added Lines]",
          "63:   & .hds-flyout__header {",
          "67:     .hds-flyout__title .hds-text {",
          "78:     .hds-dismiss-button {",
          "79:       align-self: center;",
          "80:     }",
          "",
          "---------------"
        ],
        "ui/app/styles/components/job-status-panel.scss||ui/app/styles/components/job-status-panel.scss": [
          "File: ui/app/styles/components/job-status-panel.scss -> ui/app/styles/components/job-status-panel.scss",
          "--- Hunk 1 ---",
          "[Context before]",
          "423:     }",
          "424:   }",
          "427:     animation: none;",
          "428:   }",
          "",
          "[Removed Lines]",
          "426:   .legend-item .represented-allocation .flight-icon {",
          "",
          "[Added Lines]",
          "426:   .legend-item .represented-allocation .hds-icon {",
          "",
          "---------------"
        ],
        "ui/app/templates/administration/policies/policy.hbs||ui/app/templates/administration/policies/policy.hbs": [
          "File: ui/app/templates/administration/policies/policy.hbs -> ui/app/templates/administration/policies/policy.hbs",
          "--- Hunk 1 ---",
          "[Context before]",
          "58:             <h3>Create Tokens from the Nomad CLI</h3>",
          "59:           </div>",
          "60:           <div class=\"boxed-section-body\">",
          "62:               <pre>",
          "63:                 <code>{{this.newTokenString}}</code>",
          "64:                 <CopyButton",
          "",
          "[Removed Lines]",
          "61:             <p>When you're ready to create more tokens, you can do so via the <a class=\"external-link\" href=\"https://developer.hashicorp.com/nomad/docs/commands\" target=\"_blank\" rel=\"noopener noreferrer\">Nomad CLI <FlightIcon @name=\"external-link\" /></a> with the following:",
          "",
          "[Added Lines]",
          "61:             <p>When you're ready to create more tokens, you can do so via the <a class=\"external-link\" href=\"https://developer.hashicorp.com/nomad/docs/commands\" target=\"_blank\" rel=\"noopener noreferrer\">Nomad CLI <Hds::Icon @name=\"external-link\" @isInline={{true}} /></a> with the following:",
          "",
          "---------------"
        ],
        "ui/app/templates/administration/roles/role.hbs||ui/app/templates/administration/roles/role.hbs": [
          "File: ui/app/templates/administration/roles/role.hbs -> ui/app/templates/administration/roles/role.hbs",
          "--- Hunk 1 ---",
          "[Context before]",
          "59:             <h3>Create Tokens from the Nomad CLI</h3>",
          "60:           </div>",
          "61:           <div class=\"boxed-section-body\">",
          "63:               <pre>",
          "64:                 <code>{{this.newTokenString}}</code>",
          "65:                 <CopyButton",
          "",
          "[Removed Lines]",
          "62:             <p>When you're ready to create more tokens, you can do so via the <a class=\"external-link\" href=\"https://developer.hashicorp.com/nomad/docs/commands\" target=\"_blank\" rel=\"noopener noreferrer\">Nomad CLI <FlightIcon @name=\"external-link\" /></a> with the following:",
          "",
          "[Added Lines]",
          "62:             <p>When you're ready to create more tokens, you can do so via the <a class=\"external-link\" href=\"https://developer.hashicorp.com/nomad/docs/commands\" target=\"_blank\" rel=\"noopener noreferrer\">Nomad CLI <Hds::Icon @name=\"external-link\" @isInline={{true}} /></a> with the following:",
          "",
          "---------------"
        ],
        "ui/app/templates/allocations/allocation/index.hbs||ui/app/templates/allocations/allocation/index.hbs": [
          "File: ui/app/templates/allocations/allocation/index.hbs -> ui/app/templates/allocations/allocation/index.hbs",
          "--- Hunk 1 ---",
          "[Context before]",
          "311:             >",
          "312:               <td class=\"is-narrow\">",
          "313:                 {{#if (eq row.model.provider \"nomad\")}}",
          "315:                 {{else}}",
          "317:                   {{#if row.model.connect}}",
          "319:                   {{/if}}",
          "320:                 {{/if}}",
          "321:               </td>",
          "",
          "[Removed Lines]",
          "314:                   <FlightIcon @name=\"nomad-color\" />",
          "316:                   <FlightIcon @name=\"consul-color\" />",
          "318:                     <FlightIcon @name=\"mesh\" @color=\"#444444\" />",
          "",
          "[Added Lines]",
          "314:                   <Hds::Icon @name=\"nomad-color\" @isInline={{true}} />",
          "316:                   <Hds::Icon @name=\"consul-color\" @isInline={{true}} />",
          "318:                     <Hds::Icon @name=\"mesh\" @color=\"#444444\" @isInline={{true}} />",
          "",
          "---------------"
        ],
        "ui/app/templates/clients/client/index.hbs||ui/app/templates/clients/client/index.hbs": [
          "File: ui/app/templates/clients/client/index.hbs -> ui/app/templates/clients/client/index.hbs",
          "--- Hunk 1 ---",
          "[Context before]",
          "186:           aria-label=\"More information\"",
          "187:           class=\"is-faded\"",
          "188:         >",
          "190:         </Hds::TooltipButton>",
          "191:         <span",
          "192:           data-test-node-id",
          "",
          "[Removed Lines]",
          "189:           <FlightIcon @name=\"info\" />",
          "",
          "[Added Lines]",
          "189:           <Hds::Icon @name=\"info\" @isInline={{true}} />",
          "",
          "---------------",
          "--- Hunk 2 ---",
          "[Context before]",
          "440:         aria-label=\"More information\"",
          "441:         class=\"is-faded\"",
          "442:       >",
          "444:       </Hds::TooltipButton>",
          "446:     </div>",
          "",
          "[Removed Lines]",
          "443:         <FlightIcon @name=\"info\" />",
          "",
          "[Added Lines]",
          "443:         <Hds::Icon @name=\"info\" @isInline={{true}} />",
          "",
          "---------------"
        ],
        "ui/app/templates/components/job-service-row.hbs||ui/app/templates/components/job-service-row.hbs": [
          "File: ui/app/templates/components/job-service-row.hbs -> ui/app/templates/components/job-service-row.hbs",
          "--- Hunk 1 ---",
          "[Context before]",
          "19:     }}",
          "20:   >",
          "21:     {{#if (eq @service.provider \"nomad\")}}",
          "23:       <LinkTo class=\"is-primary\" @route=\"jobs.job.services.service\" @model={{@service}} @query={{hash level=@service.level}}>{{@service.name}}</LinkTo>",
          "24:     {{else}}",
          "26:       {{#if (and (eq @service.provider \"consul\") this.consulRedirectLink)}}",
          "27:         <a class=\"is-primary\" href={{this.consulRedirectLink}} target=\"_blank\" rel=\"noopener noreferrer\">",
          "28:           {{@service.name}}",
          "",
          "[Removed Lines]",
          "22:       <FlightIcon @name=\"nomad-color\" />",
          "25:       <FlightIcon @name=\"consul-color\" />",
          "",
          "[Added Lines]",
          "22:       <Hds::Icon @name=\"nomad-color\" @isInline={{true}} />",
          "25:       <Hds::Icon @name=\"consul-color\" @isInline={{true}} />",
          "",
          "---------------",
          "--- Hunk 2 ---",
          "[Context before]",
          "31:         {{@service.name}}",
          "32:       {{/if}}",
          "33:       {{#if @service.connect}}",
          "35:       {{/if}}",
          "36:     {{/if}}",
          "37:   </td>",
          "",
          "[Removed Lines]",
          "34:         <FlightIcon @name=\"mesh\" @color=\"#444444\" />",
          "",
          "[Added Lines]",
          "34:         <Hds::Icon @name=\"mesh\" @color=\"#444444\" @isInline={{true}} />",
          "",
          "---------------"
        ],
        "ui/app/templates/components/scale-events-accordion.hbs||ui/app/templates/components/scale-events-accordion.hbs": [
          "File: ui/app/templates/components/scale-events-accordion.hbs -> ui/app/templates/components/scale-events-accordion.hbs",
          "--- Hunk 1 ---",
          "[Context before]",
          "33:                to",
          "34:               {{a.item.count}}\" aria-label=\"More information\">",
          "35:             {{#if a.item.increased}}",
          "37:             {{else}}",
          "39:             {{/if}}",
          "40:           </Hds::TooltipButton>",
          "41:           <span data-test-count>",
          "",
          "[Removed Lines]",
          "36:               <FlightIcon @name=\"arrow-up\" />",
          "38:               <FlightIcon @name=\"arrow-down\" />",
          "",
          "[Added Lines]",
          "36:               <Hds::Icon @name=\"arrow-up\" @isInline={{true}} />",
          "38:               <Hds::Icon @name=\"arrow-down\" @isInline={{true}} />",
          "",
          "---------------"
        ],
        "ui/app/templates/components/task-row.hbs||ui/app/templates/components/task-row.hbs": [
          "File: ui/app/templates/components/task-row.hbs -> ui/app/templates/components/task-row.hbs",
          "--- Hunk 1 ---",
          "[Context before]",
          "6: <td class=\"is-narrow\">",
          "7:   {{#unless this.task.driverStatus.healthy}}",
          "8:     <Hds::TooltipButton data-test-icon=\"unhealthy-driver\" @text=\"{{this.task.driver}} is unhealthy\" aria-label=\"More information\">",
          "10:     </Hds::TooltipButton>",
          "11:   {{/unless}}",
          "12: </td>",
          "",
          "[Removed Lines]",
          "9:       <FlightIcon @name=\"alert-triangle\" />",
          "",
          "[Added Lines]",
          "9:       <Hds::Icon @name=\"alert-triangle\" @isInline={{true}} />",
          "",
          "---------------"
        ],
        "ui/app/templates/components/topo-viz/node.hbs||ui/app/templates/components/topo-viz/node.hbs": [
          "File: ui/app/templates/components/topo-viz/node.hbs -> ui/app/templates/components/topo-viz/node.hbs",
          "--- Hunk 1 ---",
          "[Context before]",
          "12:           @text=\"Client is draining\"",
          "13:           aria-label=\"Client is draining\"",
          "14:         >",
          "16:         </Hds::TooltipButton>",
          "17:       {{else if (not @node.node.isEligible)}}",
          "18:         <Hds::TooltipButton",
          "",
          "[Removed Lines]",
          "15:           <FlightIcon @name=\"clock\" />",
          "",
          "[Added Lines]",
          "15:           <Hds::Icon @name=\"clock\" @isInline={{true}} />",
          "",
          "---------------",
          "--- Hunk 2 ---",
          "[Context before]",
          "20:           @text=\"Client is ineligible\"",
          "21:           aria-label=\"Client is ineligible\"",
          "22:         >",
          "24:         </Hds::TooltipButton>",
          "25:       {{/if}}",
          "26:       <LinkTo @route=\"clients.client\" @model={{@node.node.id}} {{hds-tooltip \"Node Name\"}}>{{@node.node.name}}</LinkTo>",
          "",
          "[Removed Lines]",
          "23:           <FlightIcon @name=\"lock\" />",
          "",
          "[Added Lines]",
          "23:           <Hds::Icon @name=\"lock\" @isInline={{true}} />",
          "",
          "---------------"
        ],
        "ui/app/templates/jobs/index.hbs||ui/app/templates/jobs/index.hbs": [
          "File: ui/app/templates/jobs/index.hbs -> ui/app/templates/jobs/index.hbs",
          "--- Hunk 1 ---",
          "[Context before]",
          "342:             />",
          "343:           {{/if}}",
          "344:         </A.Body>",
          "346:           <Hds::Button",
          "347:             @text=\"Reset Filters\"",
          "348:             @color=\"tertiary\"",
          "",
          "[Removed Lines]",
          "345:         <A.Footer @hasDivider={{true}} as |F|>",
          "",
          "[Added Lines]",
          "345:         <A.Footer as |F|>",
          "",
          "---------------",
          "--- Hunk 2 ---",
          "[Context before]",
          "354:           <F.LinkStandalone @icon=\"docs\" @text=\"Learn more about Filter Expressions\" @href=\"https://developer.hashicorp.com/nomad/api-docs#creating-expressions\" @iconPosition=\"trailing\" />",
          "357:             @iconPosition=\"trailing\" />",
          "359:         </A.Footer>",
          "",
          "[Removed Lines]",
          "356:           <F.LinkStandalone @icon=\"plus\" @text=\"Run a New Job\" @route=\"jobs.run\"",
          "",
          "[Added Lines]",
          "356:           <F.LinkStandalone @icon=\"plus\" @text=\"Run a New Job\" @route=\"jobs.run\"",
          "",
          "---------------",
          "--- Hunk 3 ---",
          "[Context before]",
          "362:         <A.Body",
          "363:           @text=\"No jobs found.\"",
          "364:         />",
          "367:             @iconPosition=\"trailing\" />",
          "368:         </A.Footer>",
          "369:       {{/if}}",
          "",
          "[Removed Lines]",
          "365:         <A.Footer @hasDivider={{true}} as |F|>",
          "366:           <F.LinkStandalone @icon=\"plus\" @text=\"Run a New Job\" @route=\"jobs.run\"",
          "",
          "[Added Lines]",
          "365:         <A.Footer as |F|>",
          "366:           <F.LinkStandalone @icon=\"plus\" @text=\"Run a New Job\" @route=\"jobs.run\"",
          "",
          "---------------"
        ],
        "ui/app/templates/jobs/job/services/service.hbs||ui/app/templates/jobs/job/services/service.hbs": [
          "File: ui/app/templates/jobs/job/services/service.hbs -> ui/app/templates/jobs/job/services/service.hbs",
          "--- Hunk 1 ---",
          "[Context before]",
          "6: <section class=\"section service-list\">",
          "7:   <h1 class=\"title\">",
          "8:     <LinkTo class=\"back-link\" @route=\"jobs.job.services\">",
          "10:     </LinkTo>",
          "11:     {{this.model.name}}",
          "12:   </h1>",
          "",
          "[Removed Lines]",
          "9:       <FlightIcon @name=\"chevron-left\" @title=\"Back to services\" @size=\"24\" />",
          "",
          "[Added Lines]",
          "9:       <Hds::Icon @name=\"chevron-left\" @title=\"Back to services\" @size=\"24\" @isInline={{true}} />",
          "",
          "---------------"
        ],
        "ui/app/templates/variables/variable/index.hbs||ui/app/templates/variables/variable/index.hbs": [
          "File: ui/app/templates/variables/variable/index.hbs -> ui/app/templates/variables/variable/index.hbs",
          "--- Hunk 1 ---",
          "[Context before]",
          "125:               }}",
          "127:             >",
          "132:             </button>",
          "134:             {{#if B.data.isVisible}}",
          "",
          "[Removed Lines]",
          "128:               <FlightIcon",
          "129:                 @name={{if B.data.isVisible \"eye\" \"eye-off\"}}",
          "130:                 @title={{if B.data.isVisible \"Hide Value\" \"Show Value\"}}",
          "131:               />",
          "",
          "[Added Lines]",
          "128:               <Hds::Icon @name={{if B.data.isVisible \"eye\" \"eye-off\"}} @title={{if B.data.isVisible \"Hide Value\" \"Show Value\"}} @isInline={{true}} />",
          "",
          "---------------"
        ],
        "ui/ember-cli-build.js||ui/ember-cli-build.js": [
          "File: ui/ember-cli-build.js -> ui/ember-cli-build.js",
          "--- Hunk 1 ---",
          "[Context before]",
          "40:       precision: 4,",
          "41:       includePaths: [",
          "42:         './node_modules/@hashicorp/design-system-tokens/dist/products/css',",
          "44:         './node_modules/@hashicorp/design-system-components/dist/styles',",
          "45:       ],",
          "46:     },",
          "",
          "[Removed Lines]",
          "43:         './node_modules/@hashicorp/ember-flight-icons/dist/styles',",
          "",
          "[Added Lines]",
          "[None]",
          "",
          "---------------"
        ],
        "ui/tests/acceptance/variables-test.js||ui/tests/acceptance/variables-test.js": [
          "File: ui/tests/acceptance/variables-test.js -> ui/tests/acceptance/variables-test.js",
          "--- Hunk 1 ---",
          "[Context before]",
          "410:       await typeIn('[data-test-path-input]', 'foo/bar');",
          "411:       await clickToggle('[data-test-variable-namespace-filter]');",
          "412:       assert",
          "416:         .exists('Namespace can be edited.');",
          "417:       assert",
          "418:         .dom('[data-test-variable-namespace-filter]')",
          "",
          "[Removed Lines]",
          "413:         .dom(",
          "414:           '[data-test-variable-namespace-filter] .hds-menu-primitive__content'",
          "415:         )",
          "",
          "[Added Lines]",
          "413:         .dom('[data-test-variable-namespace-filter] .hds-dropdown__content')",
          "",
          "---------------"
        ],
        "ui/tests/pages/clients/list.js||ui/tests/pages/clients/list.js": [
          "File: ui/tests/pages/clients/list.js -> ui/tests/pages/clients/list.js",
          "--- Hunk 1 ---",
          "[Context before]",
          "22:   scope,",
          "23:   toggle: clickable('button'),",
          "24:   options: collection(",
          "26:     {",
          "27:       toggle: clickable('label'),",
          "28:       count: text('label .hds-dropdown-list-item__count'),",
          "",
          "[Removed Lines]",
          "25:     '.hds-menu-primitive__content .hds-dropdown__content .hds-dropdown__list .hds-dropdown-list-item--variant-checkbox',",
          "",
          "[Added Lines]",
          "25:     '.hds-dropdown__content .hds-dropdown__list .hds-dropdown-list-item--variant-checkbox',",
          "",
          "---------------"
        ],
        "ui/tests/pages/components/topo-viz/node.js||ui/tests/pages/components/topo-viz/node.js": [
          "File: ui/tests/pages/components/topo-viz/node.js -> ui/tests/pages/components/topo-viz/node.js",
          "--- Hunk 1 ---",
          "[Context before]",
          "32:   label: text('[data-test-label]'),",
          "33:   labelIsPresent: isPresent('[data-test-label]'),",
          "35:   statusIconLabel: attribute('aria-label', '[data-test-status-icon]'),",
          "37:   selectNode: clickable('[data-test-node-background]'),",
          "",
          "[Removed Lines]",
          "34:   statusIcon: attribute('class', '[data-test-status-icon] .flight-icon'),",
          "",
          "[Added Lines]",
          "34:   statusIcon: attribute('class', '[data-test-status-icon] .hds-icon'),",
          "",
          "---------------"
        ],
        "ui/yarn.lock||ui/yarn.lock": [
          "File: ui/yarn.lock -> ui/yarn.lock",
          "--- Hunk 1 ---",
          "[Context before]",
          "2556:   resolved \"https://registry.yarnpkg.com/@handlebars/parser/-/parser-2.0.0.tgz#5e8b7298f31ff8f7b260e6b7363c7e9ceed7d9c5\"",
          "2557:   integrity sha512-EP9uEDZv/L5Qh9IWuMUGJRfwhXJ4h1dqKTT4/3+tY0eu7sPis7xh23j61SYUnNF4vqCQvvUXpDo9Bh/+q1zASA==",
          "2563:   dependencies:",
          "2564:     \"@ember/render-modifiers\" \"^2.0.5\"",
          "2565:     \"@ember/string\" \"^3.1.1\"",
          "2566:     \"@ember/test-waiters\" \"^3.1.0\"",
          "2567:     \"@embroider/addon-shim\" \"^1.8.7\"",
          "2568:     \"@floating-ui/dom\" \"^1.6.3\"",
          "2572:     decorator-transforms \"^1.1.0\"",
          "2574:     ember-cli-sass \"^11.0.1\"",
          "2575:     ember-composable-helpers \"^5.0.0\"",
          "2576:     ember-element-helper \"^0.8.5\"",
          "2577:     ember-focus-trap \"^1.1.0\"",
          "2579:     ember-modifier \"^4.1.0\"",
          "2580:     ember-power-select \"^8.2.0\"",
          "2581:     ember-stargate \"^0.4.3\"",
          "2583:     ember-truth-helpers \"^4.0.3\"",
          "2584:     prismjs \"^1.29.0\"",
          "2585:     sass \"^1.69.5\"",
          "2586:     tippy.js \"^6.3.7\"",
          "2607: \"@hashicorp/structure-icons@^1.3.0\":",
          "2608:   version \"1.9.2\"",
          "",
          "[Removed Lines]",
          "2559: \"@hashicorp/design-system-components@^4.3.0\":",
          "2560:   version \"4.4.0\"",
          "2561:   resolved \"https://registry.yarnpkg.com/@hashicorp/design-system-components/-/design-system-components-4.4.0.tgz#c633ec2df53a9e9a303e63182566c0266e326aa6\"",
          "2562:   integrity sha512-87K3/TQvyVeA68olUh66TjaGL1x9QJM9G0nJW053/+zemFnud2je6/+BdO/uc5iJtDnGNSahWy71TDObYsN3pg==",
          "2569:     \"@hashicorp/design-system-tokens\" \"^2.1.0\"",
          "2570:     \"@hashicorp/ember-flight-icons\" \"^5.0.2\"",
          "2571:     \"@oddbird/popover-polyfill\" \"^0.4.3\"",
          "2573:     ember-a11y-refocus \"^3.0.2\"",
          "2578:     ember-keyboard \"^8.2.1\"",
          "2582:     ember-style-modifier \"^3.0.1\"",
          "2588: \"@hashicorp/design-system-tokens@^2.1.0\":",
          "2589:   version \"2.1.0\"",
          "2590:   resolved \"https://registry.yarnpkg.com/@hashicorp/design-system-tokens/-/design-system-tokens-2.1.0.tgz#e72284f375631f624ff2f3198dc6d2ee03e0d422\"",
          "2591:   integrity sha512-8SFUmRsX9v9pCc1Oq+zZGAmZGLxdZ6WnVEvwOzPAswlUTxBPa5zdoKdKEOPw8Xr3j142Mie6WVk2SMTV9EjQIQ==",
          "2593: \"@hashicorp/ember-flight-icons@^5.0.2\":",
          "2594:   version \"5.0.2\"",
          "2595:   resolved \"https://registry.yarnpkg.com/@hashicorp/ember-flight-icons/-/ember-flight-icons-5.0.2.tgz#e2f4d1d1fadd9364a0db2dd2e2da5b9595e5a159\"",
          "2596:   integrity sha512-jb9h7fe9KNyPq1rPnLN6C/+7ldsFPiRmTe16KWyteJ+1dPmBLOUKl/Fr95L+u3Zh3DzzchZVcSdwia0U03I3EQ==",
          "2597:   dependencies:",
          "2598:     \"@embroider/addon-shim\" \"^1.8.7\"",
          "2599:     \"@hashicorp/flight-icons\" \"^3.2.0\"",
          "2600:     ember-get-config \"^2.1.1\"",
          "2602: \"@hashicorp/flight-icons@^3.2.0\":",
          "2603:   version \"3.2.0\"",
          "2604:   resolved \"https://registry.yarnpkg.com/@hashicorp/flight-icons/-/flight-icons-3.2.0.tgz#048d5d32d99bb5d5f7e2f76298adaadf82598405\"",
          "2605:   integrity sha512-blvRLVlWRldiOZao0CuiGxgZ4rCSPNkK5SrcnSbja+bOoTsPyD2bcLTpwtCHVYa+G9MS4bFtolrMhTLKjMSsCQ==",
          "",
          "[Added Lines]",
          "2559: \"@hashicorp/design-system-components@^4.13.0\":",
          "2560:   version \"4.13.1\"",
          "2561:   resolved \"https://registry.yarnpkg.com/@hashicorp/design-system-components/-/design-system-components-4.13.1.tgz#18a12eb23e52a7676613f6bf39e4defdfd73182a\"",
          "2562:   integrity sha512-yEiQJxAs0zgt/dxM6ZYPcVJT0a3C2wrO+8iOxUd623jyDXlbyjD/vZSp7qOCvkomQkHvWgD/7clVdl75a5i3rQ==",
          "2569:     \"@hashicorp/design-system-tokens\" \"^2.2.1\"",
          "2570:     \"@hashicorp/flight-icons\" \"^3.7.0\"",
          "2572:     ember-a11y-refocus \"^4.1.3\"",
          "2577:     ember-get-config \"^2.1.1\"",
          "2581:     ember-style-modifier \"^4.4.0\"",
          "2587: \"@hashicorp/design-system-tokens@^2.2.1\":",
          "2588:   version \"2.2.1\"",
          "2589:   resolved \"https://registry.yarnpkg.com/@hashicorp/design-system-tokens/-/design-system-tokens-2.2.1.tgz#9112c4cf9099ef1706a6b4f83be400960b473e91\"",
          "2590:   integrity sha512-Pnbnk5jbOXmW82W0wimP0PdOWYAi7dYsC3TE88JbR+jHzpwUdyVGsqcYF7ClOl/C/KDbK60N0FEJbFdaFj6ZXQ==",
          "2592: \"@hashicorp/flight-icons@^3.7.0\":",
          "2593:   version \"3.7.0\"",
          "2594:   resolved \"https://registry.yarnpkg.com/@hashicorp/flight-icons/-/flight-icons-3.7.0.tgz#cc8e4fb7cc8ac585a4841f6d724217a054cfe959\"",
          "2595:   integrity sha512-oSnIjGqzXciibyQjgc45u4GUHBrIgyFSBCjxP4t0WXbJ578J3/DB6eyvWoMJ4r4GSf0MxUgOg0A/fJV/V4yEdA==",
          "",
          "---------------",
          "--- Hunk 2 ---",
          "[Context before]",
          "2689:     \"@nodelib/fs.scandir\" \"2.1.5\"",
          "2690:     fastq \"^1.6.0\"",
          "2697: \"@percy/cli-app@1.30.0\":",
          "2698:   version \"1.30.0\"",
          "2699:   resolved \"https://registry.yarnpkg.com/@percy/cli-app/-/cli-app-1.30.0.tgz#d9b0058514766bcfd0c36887c062a2824f0362f9\"",
          "",
          "[Removed Lines]",
          "2692: \"@oddbird/popover-polyfill@^0.4.3\":",
          "2693:   version \"0.4.3\"",
          "2694:   resolved \"https://registry.yarnpkg.com/@oddbird/popover-polyfill/-/popover-polyfill-0.4.3.tgz#310d61c8fc7ee12d8dba05cdfa8bd7e5d5a281a3\"",
          "2695:   integrity sha512-kBS0ZAwH8kZqFl0mV89KPK4cLYl2ZoKSfYngK4dz1eLAhKzTK0yu4LrvLdMeM7JhjWK6GxBtiY+cl1s6vR2pUg==",
          "",
          "[Added Lines]",
          "[None]",
          "",
          "---------------",
          "--- Hunk 3 ---",
          "[Context before]",
          "6051:   dependencies:",
          "6052:     cssom \"~0.3.6\"",
          "6054: curved-arrows@^0.1.0:",
          "6055:   version \"0.1.0\"",
          "6056:   resolved \"https://registry.yarnpkg.com/curved-arrows/-/curved-arrows-0.1.0.tgz#824709316a856e28970c1f577803093a57475bb0\"",
          "",
          "[Removed Lines]",
          "[None]",
          "",
          "[Added Lines]",
          "6039: csstype@^3.1.3:",
          "6040:   version \"3.1.3\"",
          "6041:   resolved \"https://registry.yarnpkg.com/csstype/-/csstype-3.1.3.tgz#d80ff294d114fb0e6ac500fbf85b60137d7eff81\"",
          "6042:   integrity sha512-M1uQkMl8rQK/szD0LNhtqxIPLpimGm8sOBwU7lLnCpSbTyY3yeU1Vc7l4KT5zT4s/yOxHH5O7tIuuLOCnLADRw==",
          "",
          "---------------",
          "--- Hunk 4 ---",
          "[Context before]",
          "6394:     \"@babel/plugin-syntax-decorators\" \"^7.23.3\"",
          "6395:     babel-import-util \"^2.0.1\"",
          "6397: deep-is@^0.1.3:",
          "6398:   version \"0.1.4\"",
          "6399:   resolved \"https://registry.yarnpkg.com/deep-is/-/deep-is-0.1.4.tgz#a6f2dce612fadd2ef1f519b73551f17e85199831\"",
          "",
          "[Removed Lines]",
          "[None]",
          "",
          "[Added Lines]",
          "6387: decorator-transforms@^2.0.0:",
          "6388:   version \"2.2.2\"",
          "6389:   resolved \"https://registry.yarnpkg.com/decorator-transforms/-/decorator-transforms-2.2.2.tgz#c163e86815c78152528a8c1549e95d8f3403e61b\"",
          "6390:   integrity sha512-NHCSJXOUQ29YFli1QzstXWo72EyASpoVx+s0YdkMwswpovf/iAJP580nD1tB0Ph9exvtbfWdVrSAloXrWVo1Xg==",
          "6391:   dependencies:",
          "6392:     \"@babel/plugin-syntax-decorators\" \"^7.23.3\"",
          "6393:     babel-import-util \"^3.0.0\"",
          "",
          "---------------",
          "--- Hunk 5 ---",
          "[Context before]",
          "6620:   resolved \"https://registry.yarnpkg.com/electron-to-chromium/-/electron-to-chromium-1.5.26.tgz#449b4fa90e83ab98abbe3b6a96c8ee395de94452\"",
          "6621:   integrity sha512-Z+OMe9M/V6Ep9n/52+b7lkvYEps26z4Yz3vjWL1V61W0q+VLF1pOHhMY17sa4roz4AWmULSI8E6SAojZA5L0YQ==",
          "6627:   dependencies:",
          "6628:     ember-cli-babel \"^7.26.11\"",
          "6629:     ember-cli-htmlbars \"^6.0.1\"",
          "",
          "[Removed Lines]",
          "6623: ember-a11y-refocus@^3.0.2:",
          "6624:   version \"3.0.2\"",
          "6625:   resolved \"https://registry.yarnpkg.com/ember-a11y-refocus/-/ember-a11y-refocus-3.0.2.tgz#e648c491d3a8d84cb594679bafc8430cd22b2ed4\"",
          "6626:   integrity sha512-5T9kAvl0RUBF6SSeaaWpVS2WC8MTktgqiGdLAbxVjT2f2NGrDDPmv7riDVNMsuL5sHRwSKm0EHCIzZ4M3aFMow==",
          "",
          "[Added Lines]",
          "6621: ember-a11y-refocus@^4.1.3:",
          "6622:   version \"4.1.4\"",
          "6623:   resolved \"https://registry.yarnpkg.com/ember-a11y-refocus/-/ember-a11y-refocus-4.1.4.tgz#ffcabbc91503379cd2c0124cb5f0bc93178098b5\"",
          "6624:   integrity sha512-51tGk30bskObL1LsGZRxzqIxgZhIE8ZvvDYcT1OWphxZlq00+Arz57aMLS4Vz4qhSE40BfeN2qFYP/gXtp9qDA==",
          "",
          "---------------",
          "--- Hunk 6 ---",
          "[Context before]",
          "7441:     \"@ember-decorators/object\" \"^6.1.1\"",
          "7442:     ember-cli-babel \"^7.7.3\"",
          "7445:   version \"2.0.3\"",
          "7446:   resolved \"https://registry.yarnpkg.com/ember-destroyable-polyfill/-/ember-destroyable-polyfill-2.0.3.tgz#1673ed66609a82268ef270a7d917ebd3647f11e1\"",
          "7447:   integrity sha512-TovtNqCumzyAiW0/OisSkkVK93xnVF4NRU6+FN0ubpfwEOpRrmM2RqDwXI6YAChCgSHON1cz0DfQStpA1Gjuuw==",
          "",
          "[Removed Lines]",
          "7444: ember-destroyable-polyfill@^2.0.1, ember-destroyable-polyfill@^2.0.2, ember-destroyable-polyfill@^2.0.3:",
          "",
          "[Added Lines]",
          "7442: ember-destroyable-polyfill@^2.0.1, ember-destroyable-polyfill@^2.0.2:",
          "",
          "---------------",
          "--- Hunk 7 ---",
          "[Context before]",
          "7567:     svgo \"~1.2.2\"",
          "7568:     walk-sync \"~2.0.2\"",
          "7580: ember-lifeline@^7.0.0:",
          "7581:   version \"7.0.0\"",
          "7582:   resolved \"https://registry.yarnpkg.com/ember-lifeline/-/ember-lifeline-7.0.0.tgz#46780c8f832b6c784ee4681b938a1e1437bfa676\"",
          "",
          "[Removed Lines]",
          "7570: ember-keyboard@^8.2.1:",
          "7571:   version \"8.2.1\"",
          "7572:   resolved \"https://registry.yarnpkg.com/ember-keyboard/-/ember-keyboard-8.2.1.tgz#945a8a71068d81c06ad26851008ef81061db2a59\"",
          "7573:   integrity sha512-wT9xpt3GKsiodGZoifKU4OyeRjXWlmKV9ZHHsp6wJBwMFpl4wWPjTNdINxivk2qg/WFNIh8nUiwuG4+soWXPdw==",
          "7574:   dependencies:",
          "7575:     \"@embroider/addon-shim\" \"^1.8.4\"",
          "7576:     ember-destroyable-polyfill \"^2.0.3\"",
          "7577:     ember-modifier \"^2.1.2 || ^3.1.0 || ^4.0.0\"",
          "7578:     ember-modifier-manager-polyfill \"^1.2.0\"",
          "",
          "[Added Lines]",
          "[None]",
          "",
          "---------------",
          "--- Hunk 8 ---",
          "[Context before]",
          "7631:     ember-cli-typescript \"^5.0.0\"",
          "7632:     ember-compatibility-helpers \"^1.2.5\"",
          "7635:   version \"4.1.0\"",
          "7636:   resolved \"https://registry.yarnpkg.com/ember-modifier/-/ember-modifier-4.1.0.tgz#cb91efbf8ca4ff4a1a859767afa42dddba5a2bbd\"",
          "7637:   integrity sha512-YFCNpEYj6jdyy3EjslRb2ehNiDvaOrXTilR9+ngq+iUqSHYto2zKV0rleiA1XJQ27ELM1q8RihT29U6Lq5EyqQ==",
          "",
          "[Removed Lines]",
          "7634: \"ember-modifier@^2.1.2 || ^3.1.0 || ^4.0.0\", \"ember-modifier@^3.2.7 || ^4.0.0\", \"ember-modifier@^3.2.7 || ^4.1.0\", ember-modifier@^4.1.0:",
          "",
          "[Added Lines]",
          "7622: \"ember-modifier@^3.2.7 || ^4.0.0\", \"ember-modifier@^3.2.7 || ^4.1.0\", ember-modifier@^4.1.0:",
          "",
          "---------------",
          "--- Hunk 9 ---",
          "[Context before]",
          "7849:     ember-usable \"https://github.com/pzuraq/ember-usable#0d03a50\"",
          "7850:     xstate \"^4.12.0\"",
          "7853:   version \"3.1.1\"",
          "7854:   resolved \"https://registry.yarnpkg.com/ember-style-modifier/-/ember-style-modifier-3.1.1.tgz#313269708552c42255806586160411840adc98c5\"",
          "7855:   integrity sha512-J91YLKVp3/m7LrcLEWNSG2sJlSFhE5Ny75empU048qYJtdJMe788Ks/EpKEi953o1mJujVRg792YGrwbrpTzNA==",
          "",
          "[Removed Lines]",
          "7852: \"ember-style-modifier@^0.8.0 || ^1.0.0 || ^2.0.0 || ^3.0.0\", ember-style-modifier@^3.0.1:",
          "",
          "[Added Lines]",
          "7840: \"ember-style-modifier@^0.8.0 || ^1.0.0 || ^2.0.0 || ^3.0.0\":",
          "",
          "---------------",
          "--- Hunk 10 ---",
          "[Context before]",
          "7858:     ember-cli-babel \"^7.26.11\"",
          "7859:     ember-modifier \"^3.2.7 || ^4.0.0\"",
          "7861: ember-template-lint@^3.15.0:",
          "7862:   version \"3.16.0\"",
          "7863:   resolved \"https://registry.yarnpkg.com/ember-template-lint/-/ember-template-lint-3.16.0.tgz#7af2ec8d4386f4726be08c14c39ba121c56f0896\"",
          "",
          "[Removed Lines]",
          "[None]",
          "",
          "[Added Lines]",
          "7849: ember-style-modifier@^4.4.0:",
          "7850:   version \"4.4.0\"",
          "7851:   resolved \"https://registry.yarnpkg.com/ember-style-modifier/-/ember-style-modifier-4.4.0.tgz#2d1fa6a35d41d88612277d7d149f1e569acaf8d3\"",
          "7852:   integrity sha512-gT1ckbhl1KSj5sWTo/8UChj98eZeE+mUmYoXw8VjwJgWP0wiTCibGZjVbC0WlIUd7umxuG61OQ/ivfF+sAiOEQ==",
          "7853:   dependencies:",
          "7854:     \"@embroider/addon-shim\" \"^1.8.7\"",
          "7855:     csstype \"^3.1.3\"",
          "7856:     decorator-transforms \"^2.0.0\"",
          "7857:     ember-modifier \"^3.2.7 || ^4.0.0\"",
          "",
          "---------------"
        ]
      }
    },
    {
      "candidate_hash": "5299501b9a80d28b48612201ef75cc82dc5ea0c6",
      "candidate_info": {
        "commit_hash": "5299501b9a80d28b48612201ef75cc82dc5ea0c6",
        "repo": "hashicorp/nomad",
        "commit_url": "https://github.com/hashicorp/nomad/commit/5299501b9a80d28b48612201ef75cc82dc5ea0c6",
        "files": [
          ".changelog/24495.txt",
          "drivers/exec/driver.go",
          "drivers/exec/driver_test.go",
          "drivers/java/driver.go"
        ],
        "message": "backport of commit 11ae64acb0e764a3e88724aabb813db23ad0a48a (#24587)\n\nCo-authored-by: Michael Smithhisler <michael.smithhisler@hashicorp.com>",
        "before_after_code_files": [
          "drivers/exec/driver.go||drivers/exec/driver.go",
          "drivers/exec/driver_test.go||drivers/exec/driver_test.go",
          "drivers/java/driver.go||drivers/java/driver.go"
        ]
      },
      "candidate_patch_features": {
        "candidate_earlier_than_patch": 1,
        "same_pr": 1,
        "olp_pr_links": [
          "https://github.com/hashicorp/nomad/pull/25471"
        ],
        "olp_code_files": {
          "patch": [],
          "candidate": []
        }
      },
      "candidate_diff": {
        "drivers/exec/driver.go||drivers/exec/driver.go": [
          "File: drivers/exec/driver.go -> drivers/exec/driver.go",
          "--- Hunk 1 ---",
          "[Context before]",
          "456:  return nil",
          "457: }",
          "460:  if _, ok := d.tasks.Get(cfg.ID); ok {",
          "461:   return nil, nil, fmt.Errorf(\"task with ID %q already started\", cfg.ID)",
          "462:  }",
          "",
          "[Removed Lines]",
          "459: func (d *Driver) StartTask(cfg *drivers.TaskConfig) (*drivers.TaskHandle, *drivers.DriverNetwork, error) {",
          "",
          "[Added Lines]",
          "459: func (d *Driver) StartTask(cfg *drivers.TaskConfig) (handle *drivers.TaskHandle, network *drivers.DriverNetwork, err error) {",
          "",
          "---------------",
          "--- Hunk 2 ---",
          "[Context before]",
          "481:  }",
          "483:  d.logger.Info(\"starting task\", \"driver_cfg\", hclog.Fmt(\"%+v\", driverConfig))",
          "485:  handle.Config = cfg",
          "487:  pluginLogFile := filepath.Join(cfg.TaskDir().Dir, \"executor.out\")",
          "",
          "[Removed Lines]",
          "484:  handle := drivers.NewTaskHandle(taskHandleVersion)",
          "",
          "[Added Lines]",
          "484:  handle = drivers.NewTaskHandle(taskHandleVersion)",
          "",
          "---------------",
          "--- Hunk 3 ---",
          "[Context before]",
          "492:   Compute:     d.compute,",
          "493:  }",
          "502:  user := cfg.User",
          "503:  if cfg.DNS != nil {",
          "504:   dnsMount, err := resolvconf.GenerateDNSMount(cfg.TaskDir().Dir, cfg.DNS)",
          "",
          "[Removed Lines]",
          "495:  exec, pluginClient, err := executor.CreateExecutor(",
          "496:   d.logger.With(\"task_name\", handle.Config.Name, \"alloc_id\", handle.Config.AllocID),",
          "497:   d.nomadConfig, executorConfig)",
          "498:  if err != nil {",
          "499:   return nil, nil, fmt.Errorf(\"failed to create executor: %v\", err)",
          "500:  }",
          "",
          "[Added Lines]",
          "[None]",
          "",
          "---------------",
          "--- Hunk 4 ---",
          "[Context before]",
          "516:  }",
          "517:  d.logger.Debug(\"task capabilities\", \"capabilities\", caps)",
          "519:  execCmd := &executor.ExecCommand{",
          "520:   Cmd:              driverConfig.Command,",
          "521:   Args:             driverConfig.Args,",
          "",
          "[Removed Lines]",
          "[None]",
          "",
          "[Added Lines]",
          "512:  exec, pluginClient, err := executor.CreateExecutor(",
          "513:   d.logger.With(\"task_name\", handle.Config.Name, \"alloc_id\", handle.Config.AllocID),",
          "514:   d.nomadConfig, executorConfig)",
          "515:  if err != nil {",
          "516:   return nil, nil, fmt.Errorf(\"failed to create executor: %v\", err)",
          "517:  }",
          "519:  defer func() {",
          "520:   if err != nil {",
          "521:    pluginClient.Kill()",
          "522:   }",
          "523:  }()",
          "",
          "---------------",
          "--- Hunk 5 ---",
          "[Context before]",
          "539:  ps, err := exec.Launch(execCmd)",
          "540:  if err != nil {",
          "542:   return nil, nil, fmt.Errorf(\"failed to launch command with executor: %v\", err)",
          "543:  }",
          "",
          "[Removed Lines]",
          "541:   pluginClient.Kill()",
          "",
          "[Added Lines]",
          "[None]",
          "",
          "---------------",
          "--- Hunk 6 ---",
          "[Context before]",
          "562:  if err := handle.SetDriverState(&driverState); err != nil {",
          "563:   d.logger.Error(\"failed to start task, error setting driver state\", \"error\", err)",
          "564:   _ = exec.Shutdown(\"\", 0)",
          "566:   return nil, nil, fmt.Errorf(\"failed to set driver state: %v\", err)",
          "567:  }",
          "",
          "[Removed Lines]",
          "565:   pluginClient.Kill()",
          "",
          "[Added Lines]",
          "[None]",
          "",
          "---------------"
        ],
        "drivers/exec/driver_test.go||drivers/exec/driver_test.go": [
          "File: drivers/exec/driver_test.go -> drivers/exec/driver_test.go",
          "--- Hunk 1 ---",
          "[Context before]",
          "35:  \"github.com/hashicorp/nomad/testutil\"",
          "36:  \"github.com/shoenig/test/must\"",
          "37:  \"github.com/stretchr/testify/require\"",
          "38: )",
          "40: type mockIDValidator struct{}",
          "",
          "[Removed Lines]",
          "[None]",
          "",
          "[Added Lines]",
          "38:  \"golang.org/x/sys/unix\"",
          "",
          "---------------",
          "--- Hunk 2 ---",
          "[Context before]",
          "347:  require.NoError(t, harness.DestroyTask(task.ID, true))",
          "348: }",
          "353:  ci.Parallel(t)",
          "354:  ctestutils.ExecCompatible(t)",
          "",
          "[Removed Lines]",
          "352: func TestExecDriver_NoOrphans(t *testing.T) {",
          "",
          "[Added Lines]",
          "351: func TestExecDriver_NoOrphanedExecutor(t *testing.T) {",
          "352:  ci.Parallel(t)",
          "353:  ctestutils.ExecCompatible(t)",
          "355:  ctx, cancel := context.WithCancel(context.Background())",
          "356:  defer cancel()",
          "358:  d := newExecDriverTest(t, ctx)",
          "359:  harness := dtestutil.NewDriverHarness(t, d)",
          "360:  defer harness.Kill()",
          "362:  config := &Config{",
          "363:   NoPivotRoot:    false,",
          "364:   DefaultModePID: executor.IsolationModePrivate,",
          "365:   DefaultModeIPC: executor.IsolationModePrivate,",
          "366:  }",
          "368:  var data []byte",
          "369:  must.NoError(t, base.MsgPackEncode(&data, config))",
          "370:  baseConfig := &base.Config{",
          "371:   PluginConfig: data,",
          "372:   AgentConfig: &base.AgentConfig{",
          "373:    Driver: &base.ClientDriverConfig{",
          "374:     Topology: d.(*Driver).nomadConfig.Topology,",
          "375:    },",
          "376:   },",
          "377:  }",
          "378:  must.NoError(t, harness.SetConfig(baseConfig))",
          "380:  allocID := uuid.Generate()",
          "381:  taskName := \"test\"",
          "382:  task := &drivers.TaskConfig{",
          "383:   AllocID:   allocID,",
          "384:   ID:        uuid.Generate(),",
          "385:   Name:      taskName,",
          "386:   Resources: testResources(allocID, taskName),",
          "387:  }",
          "389:  cleanup := harness.MkAllocDir(task, true)",
          "390:  defer cleanup()",
          "392:  taskConfig := map[string]interface{}{}",
          "393:  taskConfig[\"command\"] = \"force-an-error\"",
          "394:  must.NoError(t, task.EncodeConcreteDriverConfig(&taskConfig))",
          "396:  _, _, err := harness.StartTask(task)",
          "397:  must.Error(t, err)",
          "398:  defer harness.DestroyTask(task.ID, true)",
          "400:  testPid := unix.Getpid()",
          "401:  tids, err := os.ReadDir(fmt.Sprintf(\"/proc/%d/task\", testPid))",
          "402:  must.NoError(t, err)",
          "403:  for _, tid := range tids {",
          "404:   children, err := os.ReadFile(fmt.Sprintf(\"/proc/%d/task/%s/children\", testPid, tid.Name()))",
          "405:   must.NoError(t, err)",
          "407:   pids := strings.Fields(string(children))",
          "408:   must.Eq(t, 0, len(pids))",
          "409:  }",
          "410: }",
          "414: func TestExecDriver_NoOrphanedTasks(t *testing.T) {",
          "",
          "---------------"
        ],
        "drivers/java/driver.go||drivers/java/driver.go": [
          "File: drivers/java/driver.go -> drivers/java/driver.go",
          "--- Hunk 1 ---",
          "[Context before]",
          "429:  return nil",
          "430: }",
          "433:  if _, ok := d.tasks.Get(cfg.ID); ok {",
          "434:   return nil, nil, fmt.Errorf(\"task with ID %q already started\", cfg.ID)",
          "435:  }",
          "",
          "[Removed Lines]",
          "432: func (d *Driver) StartTask(cfg *drivers.TaskConfig) (*drivers.TaskHandle, *drivers.DriverNetwork, error) {",
          "",
          "[Added Lines]",
          "432: func (d *Driver) StartTask(cfg *drivers.TaskConfig) (handle *drivers.TaskHandle, network *drivers.DriverNetwork, err error) {",
          "",
          "---------------",
          "--- Hunk 2 ---",
          "[Context before]",
          "457:  d.logger.Info(\"starting java task\", \"driver_cfg\", hclog.Fmt(\"%+v\", driverConfig), \"args\", args)",
          "460:  handle.Config = cfg",
          "462:  pluginLogFile := filepath.Join(cfg.TaskDir().Dir, \"executor.out\")",
          "",
          "[Removed Lines]",
          "459:  handle := drivers.NewTaskHandle(taskHandleVersion)",
          "",
          "[Added Lines]",
          "459:  handle = drivers.NewTaskHandle(taskHandleVersion)",
          "",
          "---------------",
          "--- Hunk 3 ---",
          "[Context before]",
          "467:   Compute:     d.nomadConfig.Topology.Compute(),",
          "468:  }",
          "477:  user := cfg.User",
          "478:  if user == \"\" {",
          "479:   user = \"nobody\"",
          "",
          "[Removed Lines]",
          "470:  exec, pluginClient, err := executor.CreateExecutor(",
          "471:   d.logger.With(\"task_name\", handle.Config.Name, \"alloc_id\", handle.Config.AllocID),",
          "472:   d.nomadConfig, executorConfig)",
          "473:  if err != nil {",
          "474:   return nil, nil, fmt.Errorf(\"failed to create executor: %v\", err)",
          "475:  }",
          "",
          "[Added Lines]",
          "[None]",
          "",
          "---------------",
          "--- Hunk 4 ---",
          "[Context before]",
          "495:  }",
          "496:  d.logger.Debug(\"task capabilities\", \"capabilities\", caps)",
          "498:  execCmd := &executor.ExecCommand{",
          "499:   Cmd:              absPath,",
          "500:   Args:             args,",
          "",
          "[Removed Lines]",
          "[None]",
          "",
          "[Added Lines]",
          "491:  exec, pluginClient, err := executor.CreateExecutor(",
          "492:   d.logger.With(\"task_name\", handle.Config.Name, \"alloc_id\", handle.Config.AllocID),",
          "493:   d.nomadConfig, executorConfig)",
          "494:  if err != nil {",
          "495:   return nil, nil, fmt.Errorf(\"failed to create executor: %v\", err)",
          "496:  }",
          "498:  defer func() {",
          "499:   if err != nil {",
          "500:    pluginClient.Kill()",
          "501:   }",
          "502:  }()",
          "",
          "---------------",
          "--- Hunk 5 ---",
          "[Context before]",
          "517:  ps, err := exec.Launch(execCmd)",
          "518:  if err != nil {",
          "520:   return nil, nil, fmt.Errorf(\"failed to launch command with executor: %v\", err)",
          "521:  }",
          "",
          "[Removed Lines]",
          "519:   pluginClient.Kill()",
          "",
          "[Added Lines]",
          "[None]",
          "",
          "---------------",
          "--- Hunk 6 ---",
          "[Context before]",
          "540:  if err := handle.SetDriverState(&driverState); err != nil {",
          "541:   d.logger.Error(\"failed to start task, error setting driver state\", \"error\", err)",
          "542:   exec.Shutdown(\"\", 0)",
          "544:   return nil, nil, fmt.Errorf(\"failed to set driver state: %v\", err)",
          "545:  }",
          "",
          "[Removed Lines]",
          "543:   pluginClient.Kill()",
          "",
          "[Added Lines]",
          "[None]",
          "",
          "---------------"
        ]
      }
    },
    {
      "candidate_hash": "c50b23a10a7a3ea2afafefefc0e798cefa836121",
      "candidate_info": {
        "commit_hash": "c50b23a10a7a3ea2afafefefc0e798cefa836121",
        "repo": "hashicorp/nomad",
        "commit_url": "https://github.com/hashicorp/nomad/commit/c50b23a10a7a3ea2afafefefc0e798cefa836121",
        "files": [
          "go.mod",
          "go.sum"
        ],
        "message": "backport of commit 05681afa57206285efd515b2cf91f7464646ba96 (#25137)\n\nCo-authored-by: dependabot[bot] <49699333+dependabot[bot]@users.noreply.github.com>",
        "before_after_code_files": [
          "go.mod||go.mod",
          "go.sum||go.sum"
        ]
      },
      "candidate_patch_features": {
        "candidate_earlier_than_patch": 0,
        "same_pr": 1,
        "olp_pr_links": [
          "https://github.com/hashicorp/nomad/pull/25471"
        ],
        "olp_code_files": {
          "patch": [],
          "candidate": []
        }
      },
      "candidate_diff": {
        "go.mod||go.mod": [
          "File: go.mod -> go.mod",
          "--- Hunk 1 ---",
          "[Context before]",
          "133:  golang.org/x/crypto v0.32.0",
          "134:  golang.org/x/mod v0.22.0",
          "135:  golang.org/x/sync v0.10.0",
          "137:  golang.org/x/time v0.10.0",
          "138:  google.golang.org/grpc v1.69.4",
          "139:  google.golang.org/protobuf v1.36.3",
          "",
          "[Removed Lines]",
          "136:  golang.org/x/sys v0.29.0",
          "",
          "[Added Lines]",
          "136:  golang.org/x/sys v0.30.0",
          "",
          "---------------"
        ],
        "go.sum||go.sum": [
          "File: go.sum -> go.sum",
          "--- Hunk 1 ---",
          "[Context before]",
          "2066: golang.org/x/sys v0.12.0/go.mod h1:oPkhp1MJrh7nUepCBck5+mAzfO9JrbApNNgaTdGDITg=",
          "2067: golang.org/x/sys v0.17.0/go.mod h1:/VUhepiaJMQUp4+oa/7Zr1D23ma6VTLIYjOOTFZPUcA=",
          "2068: golang.org/x/sys v0.20.0/go.mod h1:/VUhepiaJMQUp4+oa/7Zr1D23ma6VTLIYjOOTFZPUcA=",
          "2070: golang.org/x/sys v0.29.0/go.mod h1:/VUhepiaJMQUp4+oa/7Zr1D23ma6VTLIYjOOTFZPUcA=",
          "2071: golang.org/x/telemetry v0.0.0-20240228155512-f48c80bd79b2/go.mod h1:TeRTkGYfJXctD9OcfyVLyj2J3IxLnKwHJR8f4D8a3YE=",
          "2072: golang.org/x/term v0.0.0-20201126162022-7de9c90e9dd1/go.mod h1:bj7SfCRtBDWHUb9snDiAeCFNEtKQo2Wmx5Cou7ajbmo=",
          "2073: golang.org/x/term v0.0.0-20210927222741-03fcf44c2211/go.mod h1:jbD1KX2456YbFQfuXm/mYQcufACuNUgVhRMnK/tPxf8=",
          "",
          "[Removed Lines]",
          "2069: golang.org/x/sys v0.29.0 h1:TPYlXGxvx1MGTn2GiZDhnjPA9wZzZeGKHHmKhHYvgaU=",
          "",
          "[Added Lines]",
          "2070: golang.org/x/sys v0.30.0 h1:QjkSwP/36a20jFYWkSue1YwXzLmsV5Gfq7Eiy72C1uc=",
          "2071: golang.org/x/sys v0.30.0/go.mod h1:/VUhepiaJMQUp4+oa/7Zr1D23ma6VTLIYjOOTFZPUcA=",
          "",
          "---------------"
        ]
      }
    },
    {
      "candidate_hash": "c4a605d07f125255aac7bda605613ffabdfcd717",
      "candidate_info": {
        "commit_hash": "c4a605d07f125255aac7bda605613ffabdfcd717",
        "repo": "hashicorp/nomad",
        "commit_url": "https://github.com/hashicorp/nomad/commit/c4a605d07f125255aac7bda605613ffabdfcd717",
        "files": [
          "website/content/docs/commands/job/status.mdx",
          "website/content/docs/concepts/job.mdx",
          "website/content/partials/job-status-map.mdx"
        ],
        "message": "backport of commit f1a1ff678c0ad18981cdce79b2bd43a7af31cfc3 (#25121)\n\nCo-authored-by: Aimee Ukasick <aimee.ukasick@hashicorp.com>",
        "before_after_code_files": [
          "website/content/partials/job-status-map.mdx||website/content/partials/job-status-map.mdx"
        ]
      },
      "candidate_patch_features": {
        "candidate_earlier_than_patch": 0,
        "same_pr": 1,
        "olp_pr_links": [
          "https://github.com/hashicorp/nomad/pull/25471"
        ],
        "olp_code_files": {
          "patch": [],
          "candidate": []
        }
      },
      "candidate_diff": {
        "website/content/partials/job-status-map.mdx||website/content/partials/job-status-map.mdx": [
          "File: website/content/partials/job-status-map.mdx -> website/content/partials/job-status-map.mdx",
          "--- Hunk 1 ---",
          "[Context before]",
          "[No context available]",
          "",
          "[Removed Lines]",
          "[None]",
          "",
          "[Added Lines]",
          "1: Nomad uses one of these values to describe a job's status:",
          "3: - `dead`",
          "4: - `running`",
          "6: The CLI returns these rigid statuses, which are useful for scheduling and",
          "7: garbage collection. However, the Nomad UI displays additional human-readable",
          "8: statuses to help you manage jobs.",
          "10: The following table maps the CLI statuses to the statuses that appear in the",
          "11: Nomad UI.",
          "13: | CLI status       | UI status |",
          "14: | ---------------- | --------- |",
          "15: | `dead`           | `Complete`, `Failed`, `Scaled Down` |",
          "16: | `dead (stopped)` | `Stopped` |",
          "17: | `running`        | `Degraded`, `Deploying`, `Healthy`, `Recovering`, `Running`, `Scaled Down` |",
          "",
          "---------------"
        ]
      }
    }
  ]
}