{
  "cve_id": "CVE-2022-41711",
  "cve_desc": "Badaso version 2.6.0 allows an unauthenticated remote attacker to execute arbitrary code remotely on the server. This is possible because the application does not properly validate the data uploaded by users.",
  "repo": "uasoft-indonesia/badaso",
  "patch_hash": "22250eca7c364d991ce9e0a723941eae4889d6f9",
  "patch_info": {
    "commit_hash": "22250eca7c364d991ce9e0a723941eae4889d6f9",
    "repo": "uasoft-indonesia/badaso",
    "commit_url": "https://github.com/uasoft-indonesia/badaso/commit/22250eca7c364d991ce9e0a723941eae4889d6f9",
    "files": [
      "src/resources/js/components/BadasoUploadFile.vue",
      "src/resources/js/components/BadasoUploadFileMultiple.vue",
      "src/resources/js/components/BadasoUploadImage.vue",
      "src/resources/js/components/BadasoUploadImageMultiple.vue"
    ],
    "message": "Merge pull request #807 from uasoft-indonesia/bugfix/v2/filter-mimeType\n\nBugfix[v2] add filter mimeType",
    "before_after_code_files": [
      "src/resources/js/components/BadasoUploadFile.vue||src/resources/js/components/BadasoUploadFile.vue",
      "src/resources/js/components/BadasoUploadFileMultiple.vue||src/resources/js/components/BadasoUploadFileMultiple.vue",
      "src/resources/js/components/BadasoUploadImage.vue||src/resources/js/components/BadasoUploadImage.vue",
      "src/resources/js/components/BadasoUploadImageMultiple.vue||src/resources/js/components/BadasoUploadImageMultiple.vue"
    ]
  },
  "patch_diff": {
    "src/resources/js/components/BadasoUploadFile.vue||src/resources/js/components/BadasoUploadFile.vue": [
      "File: src/resources/js/components/BadasoUploadFile.vue -> src/resources/js/components/BadasoUploadFile.vue",
      "--- Hunk 1 ---",
      "[Context before]",
      "336:           });",
      "337:           return;",
      "338:         }",
      "340:         this.uploadFile(files[0]);",
      "341:       }",
      "342:     },",
      "",
      "[Removed Lines]",
      "[None]",
      "",
      "[Added Lines]",
      "339:         if (!this.availableMimetypes.file.validMime.includes(files[0].type)) {",
      "340:           this.$vs.notify({",
      "341:             title: this.$t(\"alert.danger\"),",
      "342:             text: \"File type not allowed\",",
      "343:             color: \"danger\",",
      "344:           });",
      "345:           return;",
      "346:         }",
      "",
      "---------------"
    ],
    "src/resources/js/components/BadasoUploadFileMultiple.vue||src/resources/js/components/BadasoUploadFileMultiple.vue": [
      "File: src/resources/js/components/BadasoUploadFileMultiple.vue -> src/resources/js/components/BadasoUploadFileMultiple.vue",
      "--- Hunk 1 ---",
      "[Context before]",
      "367:             });",
      "368:             return;",
      "369:           }",
      "371:           this.uploadFile(file);",
      "372:         }",
      "373:       }",
      "",
      "[Removed Lines]",
      "[None]",
      "",
      "[Added Lines]",
      "370:           if (!this.availableMimetypes.file.validMime.includes(file.type)) {",
      "371:             this.$vs.notify({",
      "372:               title: this.$t(\"alert.danger\"),",
      "373:               text: \"File type not allowed\",",
      "374:               color: \"danger\",",
      "375:             });",
      "376:             return;",
      "377:           }",
      "",
      "---------------"
    ],
    "src/resources/js/components/BadasoUploadImage.vue||src/resources/js/components/BadasoUploadImage.vue": [
      "File: src/resources/js/components/BadasoUploadImage.vue -> src/resources/js/components/BadasoUploadImage.vue",
      "--- Hunk 1 ---",
      "[Context before]",
      "380:           });",
      "381:           return;",
      "382:         }",
      "384:         this.uploadImage(files[0]);",
      "385:       }",
      "386:     },",
      "",
      "[Removed Lines]",
      "[None]",
      "",
      "[Added Lines]",
      "383:         if (!this.availableMimetypes.image.validMime.includes(files[0].type)){",
      "384:           this.$vs.notify({",
      "385:             title: this.$t(\"alert.danger\"),",
      "386:             text: \"File type not allowed\",",
      "387:             color: \"danger\",",
      "388:           });",
      "389:           return;",
      "390:         }",
      "",
      "---------------",
      "--- Hunk 2 ---",
      "[Context before]",
      "421:     uploadImage(file) {",
      "422:       const files = new FormData();",
      "423:       files.append(\"upload\", file);",
      "425:       files.append(\"working_dir\", this.getActiveFolder);",
      "426:       this.$api.badasoFile",
      "427:         .uploadUsingLfm(files)",
      "",
      "[Removed Lines]",
      "424:       files.append(\"type\", \"image\");",
      "",
      "[Added Lines]",
      "431:       files.append(\"type\", file.type);",
      "",
      "---------------"
    ],
    "src/resources/js/components/BadasoUploadImageMultiple.vue||src/resources/js/components/BadasoUploadImageMultiple.vue": [
      "File: src/resources/js/components/BadasoUploadImageMultiple.vue -> src/resources/js/components/BadasoUploadImageMultiple.vue",
      "--- Hunk 1 ---",
      "[Context before]",
      "395:             });",
      "396:             return;",
      "397:           }",
      "399:           this.uploadImage(file);",
      "400:         }",
      "401:       }",
      "",
      "[Removed Lines]",
      "[None]",
      "",
      "[Added Lines]",
      "398:           if (!this.availableMimetypes.image.validMime.includes(file.type)) {",
      "399:             this.$vs.notify({",
      "400:               title: this.$t(\"alert.danger\"),",
      "401:               text: \"File type not allowed\",",
      "402:               color: \"danger\",",
      "403:             });",
      "404:             return;",
      "405:           }",
      "",
      "---------------"
    ]
  },
  "candidates": [
    {
      "candidate_hash": "bac0c2048deeae0fcc48b9747e29a5fed88feb00",
      "candidate_info": {
        "commit_hash": "bac0c2048deeae0fcc48b9747e29a5fed88feb00",
        "repo": "uasoft-indonesia/badaso",
        "commit_url": "https://github.com/uasoft-indonesia/badaso/commit/bac0c2048deeae0fcc48b9747e29a5fed88feb00",
        "files": [
          ".github/workflows/phpstan.yml",
          "composer.json",
          "phpstan-baseline.neon",
          "phpstan.neon.dist",
          "src/Controllers/Controller.php",
          "src/Database/Types/Mysql/EnumType.php",
          "src/Helpers/DataTypeToComponent.php",
          "src/Helpers/MigrationParser.php"
        ],
        "message": "test1",
        "before_after_code_files": [
          "phpstan-baseline.neon||phpstan-baseline.neon",
          "phpstan.neon.dist||phpstan.neon.dist",
          "src/Controllers/Controller.php||src/Controllers/Controller.php",
          "src/Database/Types/Mysql/EnumType.php||src/Database/Types/Mysql/EnumType.php",
          "src/Helpers/DataTypeToComponent.php||src/Helpers/DataTypeToComponent.php",
          "src/Helpers/MigrationParser.php||src/Helpers/MigrationParser.php"
        ]
      },
      "candidate_patch_features": {
        "candidate_earlier_than_patch": 1,
        "same_pr": 1,
        "olp_pr_links": [
          "https://github.com/uasoft-indonesia/badaso/pull/1086"
        ],
        "olp_code_files": {
          "patch": [],
          "candidate": []
        }
      },
      "candidate_diff": {
        "phpstan-baseline.neon||phpstan-baseline.neon": [
          "File: phpstan-baseline.neon -> phpstan-baseline.neon",
          "--- Hunk 1 ---",
          "[Context before]",
          "[No context available]",
          "",
          "[Removed Lines]",
          "[None]",
          "",
          "[Added Lines]",
          "1: parameters:",
          "2:     excludes_analyse:",
          "3:     - packages/badaso/core/src/Migrations",
          "4:     ignoreErrors:",
          "5:     -",
          "6:         message: '#Call to an undefined static method Uasoft\\\\Badaso\\\\Models\\\\Role::[a-zA-Z0-9-()\\_]+.#'",
          "7:         paths:",
          "8:             - packages/badaso/core/src/Controllers",
          "9:             - packages/badaso/core/src/Commands",
          "10:             - packages/badaso/core/src/Models",
          "11:             - packages/badaso/core/src/Seeder",
          "12:             - packages/badaso/core/src/Widgets",
          "14:     - '#Call to an undefined static method Uasoft\\\\Badaso\\\\Models\\\\User::[a-zA-Z0-9-()\\_]+.#'",
          "15:     - '#Call to an undefined static method Spatie\\\\Activitylog\\\\Models\\\\Activity::[a-zA-Z0-9-()\\_]+.#'",
          "16:     - '#Call to an undefined static method Uasoft\\\\Badaso\\\\Models\\\\UserVerification::[a-zA-Z0-9-()\\_]+.#'",
          "17:     - '#Call to an undefined static method Uasoft\\\\Badaso\\\\Models\\\\PasswordReset::[a-zA-Z0-9-()\\_]+.#'",
          "18:     - '#Call to an undefined static method Uasoft\\\\Badaso\\\\Models\\\\EmailReset::[a-zA-Z0-9-()\\_]+.#'",
          "19:     - '#Call to an undefined static method Uasoft\\\\Badaso\\\\Models\\\\DataType::[a-zA-Z0-9-()\\_]+.#'",
          "20:     - '#Call to an undefined static method Uasoft\\\\Badaso\\\\Facades\\\\Badaso::[a-zA-Z0-9-()\\_]+.#'",
          "21:     - '#Call to an undefined static method Uasoft\\\\Badaso\\\\Models\\\\DataRow::[a-zA-Z0-9-()\\_]+.#'",
          "22:     - '#Call to an undefined static method Uasoft\\\\Badaso\\\\Models\\\\MenuItem::[a-zA-Z0-9-()\\_]+.#'",
          "23:     - '#Call to an undefined method Uasoft\\\\Badaso\\\\Models\\\\MenuItem::[a-zA-Z0-9-()\\_]+.#'",
          "24:     - '#Call to an undefined static method Uasoft\\\\Badaso\\\\Models\\\\Configuration::[a-zA-Z0-9-()\\_]+.#'",
          "25:     - '#Call to an undefined static method Uasoft\\\\Badaso\\\\Models\\\\FirebaseCloudMessages::[a-zA-Z0-9-()\\_]+.#'",
          "26:     - '#Call to an undefined static method Uasoft\\\\Badaso\\\\Models\\\\Menu::[a-zA-Z0-9-()\\_]+.#'",
          "27:     - '#Call to an undefined static method Uasoft\\\\Badaso\\\\Models\\\\Permission::[a-zA-Z0-9-()\\_]+.#'",
          "28:     - '#Call to an undefined static method Uasoft\\\\Badaso\\\\Models\\\\Notification::[a-zA-Z0-9-()\\_]+.#'",
          "29:     - '#Call to an undefined static method Uasoft\\\\Badaso\\\\Models\\\\RolePermission::[a-zA-Z0-9-()\\_]+.#'",
          "30:     - '#Call to an undefined static method Uasoft\\\\Badaso\\\\Models\\\\UserRole::[a-zA-Z0-9-()\\_]+.#'",
          "31:     - '#Call to an undefined static method Uasoft\\\\Badaso\\\\Database\\\\Schema\\\\SchemaManager::[a-zA-Z0-9-()\\_]+.#'",
          "32:     - '#Call to an undefined static method Illuminate\\\\Support\\\\Facades\\\\DB::[a-zA-Z0-9-()\\_]+.#'",
          "33:     - '#Call to an undefined static method Illuminate\\\\Support\\\\Facades\\\\Redis::[a-zA-Z0-9-()\\_]+.#'",
          "34:     - '#Call to static method [a-zA-Z0-9-()\\_]+ on an unknown class Route.#'",
          "35:     - '#Result of method [a-zA-Z0-9\\\\_]+::[a-zA-Z0-9-()\\_]+ [a-zA-Z0-9-()\\_]+ is used.#'",
          "36:     - '#Method [a-zA-Z0-9\\\\_]+::[a-zA-Z0-9-()\\_]+ should return int but return statement is missing.#'",
          "37:     - '#Call to sprintf contains 1 placeholder, 0 values given.#'",
          "38:     - '#Variable \\$custom_permissions might not be defined.#'",
          "39:     - '#Call to static method debug[()]+ on an unknown class Log.#'",
          "40:     - '#Call to static method first[()]+ on an unknown class Uasoft\\\\Badaso\\\\Models\\\\FirebaseServices.#'",
          "41:     - '#Call to static method user[()]+ on an unknown class JWTAuth.#'",
          "42:     - '#Function call_protected_method not found.#'",
          "43:     - '#Function get_protected_property not found.#'",
          "44:     - '#Variable \\$data in isset[()]+ always exists and is not nullable.#'",
          "45:     - '#Access to an undefined property Uasoft\\\\Badaso\\\\Models\\\\MenuItem::\\$[a-zA-Z0-9-()\\_]+.#'",
          "46:     - '#Call to static method [a-zA-Z0-9-()\\_]+ on an unknown class DB.#'",
          "47:     - '#Instantiated class Database\\\\Seeders\\\\Badaso\\\\Exception not found.#'",
          "48:     - '#Caught class Database\\\\Seeders\\\\Badaso\\\\Exception not found.#'",
          "49:     - '#Call to static method disk[()]+ on an unknown class Storage.#'",
          "50:     - '#Variable \\$altered_current_fields might not be defined.#'",
          "51:     - '#Variable \\$altered_modified_fields might not be defined.#'",
          "",
          "---------------"
        ],
        "phpstan.neon.dist||phpstan.neon.dist": [
          "File: phpstan.neon.dist -> phpstan.neon.dist",
          "--- Hunk 1 ---",
          "[Context before]",
          "[No context available]",
          "",
          "[Removed Lines]",
          "[None]",
          "",
          "[Added Lines]",
          "1: includes:",
          "2:     - ./phpstan-baseline.neon",
          "4: parameters:",
          "5:     paths:",
          "6:         - packages/badaso/core/src",
          "8:     level: 1",
          "",
          "---------------"
        ],
        "src/Controllers/Controller.php||src/Controllers/Controller.php": [
          "File: src/Controllers/Controller.php -> src/Controllers/Controller.php",
          "--- Hunk 1 ---",
          "[Context before]",
          "257:             $record = DB::table($data_type->name)->select($fields)->where('id', $id)->first();",
          "258:         }",
          "262:         return $record;",
          "263:     }",
          "",
          "[Removed Lines]",
          "260:         $record = GetData::getRelationData($data_type, $record, 'read');",
          "",
          "[Added Lines]",
          "260:         $record = GetData::getRelationData($data_type, $record);",
          "",
          "---------------"
        ],
        "src/Database/Types/Mysql/EnumType.php||src/Database/Types/Mysql/EnumType.php": [
          "File: src/Database/Types/Mysql/EnumType.php -> src/Database/Types/Mysql/EnumType.php",
          "--- Hunk 1 ---",
          "[Context before]",
          "9: class EnumType extends Type",
          "10: {",
          "11:     const NAME = 'enum';",
          "13:     public function getSQLDeclaration(array $field, AbstractPlatform $platform)",
          "14:     {",
          "",
          "[Removed Lines]",
          "[None]",
          "",
          "[Added Lines]",
          "13:     private static $tableName;",
          "",
          "---------------"
        ],
        "src/Helpers/DataTypeToComponent.php||src/Helpers/DataTypeToComponent.php": [
          "File: src/Helpers/DataTypeToComponent.php -> src/Helpers/DataTypeToComponent.php",
          "--- Hunk 1 ---",
          "[Context before]",
          "34:         'INTEGER'    => 'number',",
          "35:         'BIGINT'     => 'number',",
          "36:         'FLOAT'      => 'number',",
          "39:         'DOUBLE'     => 'number',",
          "40:         'DECIMAL'    => 'number',",
          "41:         'DEC'        => 'number',",
          "42:         'YEAR'       => 'number',",
          "43:         'NUMERIC'    => 'number',",
          "45:         'DOUBLE PRECISION'   => 'number',",
          "46:         'DATETIME'   => 'datetime',",
          "47:         'TIMESTAMP'  => 'datetime',",
          "",
          "[Removed Lines]",
          "37:         'FLOAT'      => 'number',",
          "38:         'DOUBLE'     => 'number',",
          "44:         'DOUBLE'     => 'number',",
          "",
          "[Added Lines]",
          "[None]",
          "",
          "---------------"
        ],
        "src/Helpers/MigrationParser.php||src/Helpers/MigrationParser.php": [
          "File: src/Helpers/MigrationParser.php -> src/Helpers/MigrationParser.php",
          "--- Hunk 1 ---",
          "[Context before]",
          "182:     public static function getAlterMigrationRelationshipSchemaUp($name, $relations)",
          "183:     {",
          "184:         if (implode(PHP_EOL.chr(9).chr(9).chr(9), self::getAlterMigrationRelationshipUp($relations)) !== '') {",
          "185:             return sprintf(self::ALTER_WRAPPER,",
          "186:                 $name['current_name'],",
          "",
          "[Removed Lines]",
          "[None]",
          "",
          "[Added Lines]",
          "184:         dd(\"ALSJLKASD\");",
          "",
          "---------------",
          "--- Hunk 2 ---",
          "[Context before]",
          "207:     public static function getMigrationSchemaDown($name, $rows = [], $prefix = null, bool $timestamp = true)",
          "208:     {",
          "209:         if ($prefix == 'drop') {",
          "211:         }",
          "213:         return sprintf(",
          "",
          "[Removed Lines]",
          "210:             return sprintf(self::MIGRATION_UP_WRAPPER, $name, implode(PHP_EOL.chr(9).chr(9).chr(9), self::getMigrationFields($name, $rows, $timestamp)));",
          "",
          "[Added Lines]",
          "211:             return sprintf(self::MIGRATION_UP_WRAPPER, $name, implode(PHP_EOL.chr(9).chr(9).chr(9), self::getMigrationFields($name, $rows)));",
          "",
          "---------------"
        ]
      }
    },
    {
      "candidate_hash": "d008f7ac6e25a9e173ade400667fda9f55cda570",
      "candidate_info": {
        "commit_hash": "d008f7ac6e25a9e173ade400667fda9f55cda570",
        "repo": "uasoft-indonesia/badaso",
        "commit_url": "https://github.com/uasoft-indonesia/badaso/commit/d008f7ac6e25a9e173ade400667fda9f55cda570",
        "files": [
          "src/Helpers/MigrationParser.php"
        ],
        "message": "bugfix update default value",
        "before_after_code_files": [
          "src/Helpers/MigrationParser.php||src/Helpers/MigrationParser.php"
        ]
      },
      "candidate_patch_features": {
        "candidate_earlier_than_patch": 1,
        "same_pr": 1,
        "olp_pr_links": [
          "https://github.com/uasoft-indonesia/badaso/pull/1086"
        ],
        "olp_code_files": {
          "patch": [],
          "candidate": []
        }
      },
      "candidate_diff": {
        "src/Helpers/MigrationParser.php||src/Helpers/MigrationParser.php": [
          "File: src/Helpers/MigrationParser.php -> src/Helpers/MigrationParser.php",
          "--- Hunk 1 ---",
          "[Context before]",
          "360:                                 self::getMigrationTypeField($value['field_type']),",
          "361:                                 $value['field_name'],",
          "362:                                 self::getMigrationLengthField($value['field_length'], $value['field_type']),",
          "364:                                 self::getMigrationNullField($value['field_null']),",
          "365:                                 self::getMigrationIndexField($value['field_index'], null, $value['field_name']),",
          "366:                                 self::getMigrationAttributeField($value['field_attribute']),",
          "",
          "[Removed Lines]",
          "363:                                 $value['field_default'],",
          "",
          "[Added Lines]",
          "363:                                 self::getMigrationDefaultField($value['field_type'], $value['field_default']),",
          "",
          "---------------"
        ]
      }
    },
    {
      "candidate_hash": "7c911e925829b37d32f110c180aaabebac2f336e",
      "candidate_info": {
        "commit_hash": "7c911e925829b37d32f110c180aaabebac2f336e",
        "repo": "uasoft-indonesia/badaso",
        "commit_url": "https://github.com/uasoft-indonesia/badaso/commit/7c911e925829b37d32f110c180aaabebac2f336e",
        "files": [
          "src/resources/js/components/BadasoUploadImage.vue"
        ],
        "message": "add feature sorting file manager with component select",
        "before_after_code_files": [
          "src/resources/js/components/BadasoUploadImage.vue||src/resources/js/components/BadasoUploadImage.vue"
        ]
      },
      "candidate_patch_features": {
        "candidate_earlier_than_patch": 1,
        "same_pr": 1,
        "olp_pr_links": [
          "https://github.com/uasoft-indonesia/badaso/pull/1086"
        ],
        "olp_code_files": {
          "patch": [
            "src/resources/js/components/BadasoUploadImage.vue||src/resources/js/components/BadasoUploadImage.vue"
          ],
          "candidate": [
            "src/resources/js/components/BadasoUploadImage.vue||src/resources/js/components/BadasoUploadImage.vue"
          ]
        }
      },
      "candidate_diff": {
        "src/resources/js/components/BadasoUploadImage.vue||src/resources/js/components/BadasoUploadImage.vue": [
          "File: src/resources/js/components/BadasoUploadImage.vue -> src/resources/js/components/BadasoUploadImage.vue",
          "--- Hunk 1 ---",
          "[Context before]",
          "54:         <div class=\"badaso-upload-image__popup--top-bar\">",
          "55:           <h3>{{ $t(\"fileManager.title\") }}</h3>",
          "56:           <vs-spacer />",
          "57:           <vs-button",
          "58:             color=\"danger\"",
          "59:             type=\"relief\"",
          "",
          "[Removed Lines]",
          "[None]",
          "",
          "[Added Lines]",
          "57:           <badaso-select",
          "58:           v-model=\"sortTypeValue\"",
          "59:           size=\"2\"",
          "60:           style=\"margin-bottom: 0px !important; margin-right: 1rem;\"",
          "61:           placeholder=\"Sort Type\"",
          "62:           :items=\"sortTypeList\"",
          "63:           @input=\"sortImages\" >",
          "64:           </badaso-select>",
          "",
          "---------------",
          "--- Hunk 2 ---",
          "[Context before]",
          "247:       },",
          "248:       isValidImageUrl: undefined,",
          "249:       model: null,",
          "250:     };",
          "251:   },",
          "252:   watch: {",
          "",
          "[Removed Lines]",
          "[None]",
          "",
          "[Added Lines]",
          "258:       sortTypeValue: '',",
          "259:       sortTypeList: [",
          "260:         {",
          "261:           label : \"Time\",",
          "262:           value : 'time',",
          "263:         },",
          "264:         {",
          "265:           label : \"Alphabet\",",
          "266:           value : 'alphabet',",
          "267:         }",
          "269:       ],",
          "",
          "---------------",
          "--- Hunk 3 ---",
          "[Context before]",
          "364:         this.uploadImage(files[0]);",
          "365:       }",
          "366:     },",
          "368:       if (this.getActiveFolder) {",
          "369:         this.$openLoader();",
          "370:         this.$api.badasoFile",
          "371:           .browseUsingLfm({",
          "372:             workingDir: this.getActiveFolder,",
          "373:             type: \"image\",",
          "374:             page: this.page,",
          "375:           })",
          "376:           .then((res) => {",
          "",
          "[Removed Lines]",
          "367:     getImages() {",
          "",
          "[Added Lines]",
          "387:     sortImages(event) {",
          "388:       this.getImages(event)",
          "389:     },",
          "390:     getImages(sortType) {",
          "397:             sort_type: sortType ? sortType : 'time',",
          "",
          "---------------"
        ]
      }
    },
    {
      "candidate_hash": "3549f556a9f43ca278f9f19d8189f04508f07032",
      "candidate_info": {
        "commit_hash": "3549f556a9f43ca278f9f19d8189f04508f07032",
        "repo": "uasoft-indonesia/badaso",
        "commit_url": "https://github.com/uasoft-indonesia/badaso/commit/3549f556a9f43ca278f9f19d8189f04508f07032",
        "files": [
          "src/Controllers/BadasoAuthController.php",
          "src/Controllers/BadasoUserController.php",
          "src/Migrations/2023_09_25_034306_add_gender_to_badaso_users_table.php",
          "src/Models/User.php",
          "src/resources/js/lang/modules/en.js",
          "src/resources/js/lang/modules/id.js",
          "src/resources/js/pages/auth/register.vue",
          "src/resources/js/pages/user-management/add.vue",
          "src/resources/js/pages/user-management/edit.vue",
          "src/resources/js/pages/user-management/read.vue",
          "src/resources/js/pages/user/profile.vue"
        ],
        "message": "add gender v2",
        "before_after_code_files": [
          "src/Controllers/BadasoAuthController.php||src/Controllers/BadasoAuthController.php",
          "src/Controllers/BadasoUserController.php||src/Controllers/BadasoUserController.php",
          "src/Migrations/2023_09_25_034306_add_gender_to_badaso_users_table.php||src/Migrations/2023_09_25_034306_add_gender_to_badaso_users_table.php",
          "src/Models/User.php||src/Models/User.php",
          "src/resources/js/lang/modules/en.js||src/resources/js/lang/modules/en.js",
          "src/resources/js/lang/modules/id.js||src/resources/js/lang/modules/id.js",
          "src/resources/js/pages/auth/register.vue||src/resources/js/pages/auth/register.vue",
          "src/resources/js/pages/user-management/add.vue||src/resources/js/pages/user-management/add.vue",
          "src/resources/js/pages/user-management/edit.vue||src/resources/js/pages/user-management/edit.vue",
          "src/resources/js/pages/user-management/read.vue||src/resources/js/pages/user-management/read.vue",
          "src/resources/js/pages/user/profile.vue||src/resources/js/pages/user/profile.vue"
        ]
      },
      "candidate_patch_features": {
        "candidate_earlier_than_patch": 0,
        "same_pr": 1,
        "olp_pr_links": [
          "https://github.com/uasoft-indonesia/badaso/pull/1086"
        ],
        "olp_code_files": {
          "patch": [],
          "candidate": []
        }
      },
      "candidate_diff": {
        "src/Controllers/BadasoAuthController.php||src/Controllers/BadasoAuthController.php": [
          "File: src/Controllers/BadasoAuthController.php -> src/Controllers/BadasoAuthController.php",
          "--- Hunk 1 ---",
          "[Context before]",
          "175:                 'phone'    => 'required|numeric|min:6',",
          "176:                 'email'    => 'required|string|email|max:255|unique:Uasoft\\Badaso\\Models\\User',",
          "177:                 'password' => 'required|string|min:6|confirmed',",
          "179:             ]);",
          "181:             $user = User::create([",
          "",
          "[Removed Lines]",
          "178:                 'address'  => 'nullable',",
          "",
          "[Added Lines]",
          "178:                 'address'  => 'required|string|max:255',",
          "179:                 'gender'   => 'required|string',",
          "",
          "---------------",
          "--- Hunk 2 ---",
          "[Context before]",
          "185:                 'email'    => $request->get('email'),",
          "186:                 'password' => Hash::make($request->get('password')),",
          "187:                 'address'  => $request->get('address'),",
          "188:             ]);",
          "190:             $role = $this->getCustomerRole();",
          "",
          "[Removed Lines]",
          "[None]",
          "",
          "[Added Lines]",
          "189:                 'gender'  => $request->get('gender'),",
          "",
          "---------------",
          "--- Hunk 3 ---",
          "[Context before]",
          "543:                 'username'  => \"required|string|max:255|alpha_num|unique:Uasoft\\Badaso\\Models\\User,username,{$user_id}\",",
          "544:                 'avatar'    => 'nullable',",
          "545:                 'phone'     => 'nullable',",
          "547:             ]);",
          "549:             $user = User::find($user->id);",
          "",
          "[Removed Lines]",
          "546:                 'address'     => 'nullable',",
          "",
          "[Added Lines]",
          "548:                 'address'   => 'nullable',",
          "549:                 'gender'    => 'nullable',",
          "",
          "---------------",
          "--- Hunk 4 ---",
          "[Context before]",
          "554:             $user->address = $request->address;",
          "555:             $user->avatar = $request->avatar;",
          "556:             $user->additional_info = $request->additional_info;",
          "557:             $user->save();",
          "559:             DB::commit();",
          "",
          "[Removed Lines]",
          "[None]",
          "",
          "[Added Lines]",
          "560:             $user->gender = $request->gender;",
          "",
          "---------------"
        ],
        "src/Controllers/BadasoUserController.php||src/Controllers/BadasoUserController.php": [
          "File: src/Controllers/BadasoUserController.php -> src/Controllers/BadasoUserController.php",
          "--- Hunk 1 ---",
          "[Context before]",
          "59:                 'avatar'    => 'nullable',",
          "60:                 'phone'    => 'nullable',",
          "61:                 'address'    => 'nullable',",
          "62:             ]);",
          "64:             $user = User::find($request->id);",
          "",
          "[Removed Lines]",
          "[None]",
          "",
          "[Added Lines]",
          "62:                 'gender'    => 'nullable',",
          "",
          "---------------",
          "--- Hunk 2 ---",
          "[Context before]",
          "69:             $user->phone = $request->phone;",
          "70:             $user->address = $request->address;",
          "71:             $user->avatar = $request->avatar;",
          "72:             $user->additional_info = $request->additional_info;",
          "73:             if ($request->password && $request->password != '') {",
          "74:                 $user->password = Hash::make($request->password);",
          "",
          "[Removed Lines]",
          "[None]",
          "",
          "[Added Lines]",
          "73:             $user->gender = $request->gender;",
          "",
          "---------------",
          "--- Hunk 3 ---",
          "[Context before]",
          "110:                 'avatar'    => 'nullable',",
          "111:                 'phone'     => 'required|numeric|min:6',",
          "112:                 'address'   => 'nullable',",
          "113:             ]);",
          "115:             $user = new User();",
          "",
          "[Removed Lines]",
          "[None]",
          "",
          "[Added Lines]",
          "115:                 'gender'   => 'required|string',",
          "",
          "---------------",
          "--- Hunk 4 ---",
          "[Context before]",
          "120:             $user->email = $request->email;",
          "121:             $user->avatar = $request->avatar;",
          "122:             $user->additional_info = $request->additional_info;",
          "123:             $user->password = Hash::make($request->password);",
          "124:             if ($request->email_verified) {",
          "125:                 $user->email_verified_at = date('Y-m-d H:i:s');",
          "",
          "[Removed Lines]",
          "[None]",
          "",
          "[Added Lines]",
          "126:             $user->gender = $request->gender;",
          "",
          "---------------"
        ],
        "src/Migrations/2023_09_25_034306_add_gender_to_badaso_users_table.php||src/Migrations/2023_09_25_034306_add_gender_to_badaso_users_table.php": [
          "File: src/Migrations/2023_09_25_034306_add_gender_to_badaso_users_table.php -> src/Migrations/2023_09_25_034306_add_gender_to_badaso_users_table.php",
          "--- Hunk 1 ---",
          "[Context before]",
          "[No context available]",
          "",
          "[Removed Lines]",
          "[None]",
          "",
          "[Added Lines]",
          "1: <?php",
          "3: use Illuminate\\Database\\Migrations\\Migration;",
          "4: use Illuminate\\Database\\Schema\\Blueprint;",
          "5: use Illuminate\\Support\\Facades\\Schema;",
          "7: class AddGenderToBadasoUsersTable extends Migration",
          "8: {",
          "14:     public function up()",
          "15:     {",
          "16:         Schema::table(config('badaso.database.prefix') . 'users', function (Blueprint $table) {",
          "17:             $table->enum('gender', ['man', 'woman'])->nullable()->after('additional_info');;",
          "18:         });",
          "19:     }",
          "26:     public function down()",
          "27:     {",
          "28:         Schema::table(config('badaso.database.prefix') . 'users', function (Blueprint $table) {",
          "29:             $table->dropColumn('gender');",
          "30:         });",
          "31:     }",
          "32: }",
          "",
          "---------------"
        ],
        "src/Models/User.php||src/Models/User.php": [
          "File: src/Models/User.php -> src/Models/User.php",
          "--- Hunk 1 ---",
          "[Context before]",
          "40:         'password',",
          "41:         'avatar',",
          "42:         'address',",
          "43:         'additional_info',",
          "44:         'last_sent_token_at',",
          "45:     ];",
          "",
          "[Removed Lines]",
          "[None]",
          "",
          "[Added Lines]",
          "43:         'gender',",
          "",
          "---------------"
        ],
        "src/resources/js/lang/modules/en.js||src/resources/js/lang/modules/en.js": [
          "File: src/resources/js/lang/modules/en.js -> src/resources/js/lang/modules/en.js",
          "--- Hunk 1 ---",
          "[Context before]",
          "45:       email: \"Email\",",
          "46:       password: \"Password\",",
          "47:       passwordConfirmation: \"Password Confirmation\",",
          "48:     },",
          "49:     button: \"Register\",",
          "50:     existingAccount: {",
          "51:       text: \"Do you have an account?\",",
          "52:       link: \"Login\",",
          "53:     },",
          "54:   },",
          "56:   forgotPassword: {",
          "",
          "[Removed Lines]",
          "[None]",
          "",
          "[Added Lines]",
          "48:       gender: \"Gender\",",
          "55:     gender: {",
          "56:       man: \"Man\",",
          "57:       woman: \"Woman\",",
          "58:     },",
          "",
          "---------------",
          "--- Hunk 2 ---",
          "[Context before]",
          "128:     avatar: \"Avatar\",",
          "129:     phone: \"Phone Number\",",
          "130:     address: \"Address\",",
          "131:     additionalInfo: \"Additional info(optional)\",",
          "132:     token: \"Verification Code\",",
          "133:     buttons: {",
          "",
          "[Removed Lines]",
          "[None]",
          "",
          "[Added Lines]",
          "136:     gender: \"Gender\",",
          "",
          "---------------",
          "--- Hunk 3 ---",
          "[Context before]",
          "693:           title: \"Avatar\",",
          "694:           placeholder: \"Avatar\",",
          "695:         },",
          "696:         additionalInfo: {",
          "697:           title: \"Additional Info (JSON)\",",
          "698:           placeholder: \"Additional Info (JSON)\",",
          "",
          "[Removed Lines]",
          "[None]",
          "",
          "[Added Lines]",
          "702:         gender: {",
          "703:           title: \"Gender\",",
          "704:           placeholder: \"Gender\",",
          "705:         },",
          "",
          "---------------",
          "--- Hunk 4 ---",
          "[Context before]",
          "736:           title: \"Avatar\",",
          "737:           placeholder: \"New Avatar\",",
          "738:         },",
          "739:         additionalInfo: {",
          "740:           title: \"Additional Info (JSON)\",",
          "741:           placeholder: \"Additional Info (JSON)\",",
          "",
          "[Removed Lines]",
          "[None]",
          "",
          "[Added Lines]",
          "749:         gender: {",
          "750:           title: \"Gender\",",
          "751:           placeholder: \"Gender\",",
          "752:         },",
          "",
          "---------------",
          "--- Hunk 5 ---",
          "[Context before]",
          "752:       phone: \"Phone Number\",",
          "753:       address: \"Address\",",
          "754:       email: \"Email\",",
          "755:       additionalInfo: \"Additional Info\",",
          "756:       emailVerified: \"Is Email Verified\",",
          "757:     },",
          "",
          "[Removed Lines]",
          "[None]",
          "",
          "[Added Lines]",
          "769:       gender: \"Gender\",",
          "",
          "---------------",
          "--- Hunk 6 ---",
          "[Context before]",
          "768:         text: \"Roles has been set\",",
          "769:       },",
          "770:     },",
          "771:   },",
          "773:   role: {",
          "",
          "[Removed Lines]",
          "[None]",
          "",
          "[Added Lines]",
          "786:     gender: {",
          "787:       man: \"Man\",",
          "788:       woman: \"Woman\",",
          "789:     },",
          "",
          "---------------"
        ],
        "src/resources/js/lang/modules/id.js||src/resources/js/lang/modules/id.js": [
          "File: src/resources/js/lang/modules/id.js -> src/resources/js/lang/modules/id.js",
          "--- Hunk 1 ---",
          "[Context before]",
          "42:       username: \"Username\",",
          "43:       phone: \"No Telp/Hp\",",
          "44:       address: \"Alamat\",",
          "45:       email: \"Email\",",
          "46:       password: \"Kata sandi\",",
          "47:       passwordConfirmation: \"Konfirmasi kata sandi\",",
          "",
          "[Removed Lines]",
          "[None]",
          "",
          "[Added Lines]",
          "45:       gender: \"Jenis Kelamin\",",
          "",
          "---------------",
          "--- Hunk 2 ---",
          "[Context before]",
          "128:     avatar: \"Avatar\",",
          "129:     phone: \"No Telp/Hp\",",
          "130:     address: \"Alamat\",",
          "131:     additionalInfo: \"Additional info(optional)\",",
          "132:     token: \"Verification Code\",",
          "133:     buttons: {",
          "",
          "[Removed Lines]",
          "[None]",
          "",
          "[Added Lines]",
          "132:     gender: \"Jenis Kelamin\",",
          "",
          "---------------",
          "--- Hunk 3 ---",
          "[Context before]",
          "673:           title: \"Avatar\",",
          "674:           placeholder: \"Avatar\",",
          "675:         },",
          "676:         additionalInfo: {",
          "677:           title: \"Info Tambahan (JSON)\",",
          "678:           placeholder: \"Info Tambahan (JSON)\",",
          "",
          "[Removed Lines]",
          "[None]",
          "",
          "[Added Lines]",
          "678:         gender: {",
          "679:           title: \"Jenis Kelamin\",",
          "680:         },",
          "",
          "---------------",
          "--- Hunk 4 ---",
          "[Context before]",
          "716:           title: \"Avatar\",",
          "717:           placeholder: \"Avatar Baru\",",
          "718:         },",
          "719:         additionalInfo: {",
          "720:           title: \"Info Tambahan (JSON)\",",
          "721:           placeholder: \"Info Tambahan (JSON)\",",
          "",
          "[Removed Lines]",
          "[None]",
          "",
          "[Added Lines]",
          "724:         gender: {",
          "725:           title: \"Jenis Kelamin\",",
          "726:         },",
          "",
          "---------------",
          "--- Hunk 5 ---",
          "[Context before]",
          "732:       phone: \"No Telp/Hp\",",
          "733:       address: \"Alamat\",",
          "734:       email: \"Email\",",
          "735:       additionalInfo: \"Info Tambahan\",",
          "736:       emailVerified: \"Email Diverifikasi\",",
          "737:     },",
          "",
          "[Removed Lines]",
          "[None]",
          "",
          "[Added Lines]",
          "743:       gender: \"Jenis Kelamin\",",
          "",
          "---------------"
        ],
        "src/resources/js/pages/auth/register.vue||src/resources/js/pages/auth/register.vue": [
          "File: src/resources/js/pages/auth/register.vue -> src/resources/js/pages/auth/register.vue",
          "--- Hunk 1 ---",
          "[Context before]",
          "53:               ></span>",
          "54:             </div>",
          "55:           </div>",
          "57:           <vs-input",
          "58:             icon=\"phone\"",
          "59:             icon-after",
          "",
          "[Removed Lines]",
          "[None]",
          "",
          "[Added Lines]",
          "56:             <vs-select",
          "57:               v-model=\"gender\"",
          "58:               size=\"12\"",
          "59:               :placeholder=\"$t('register.field.gender')\"",
          "60:               :items=\"genderitems\"",
          "61:               :alert=\"errors.gender\"",
          "62:             > </vs-select>",
          "63:             <div v-if=\"errors.gender\" class=\"register__error-container\">",
          "64:             <div v-if=\"$helper.isArray(errors.gender)\">",
          "65:               <span",
          "66:                 class=\"register__input--error\"",
          "67:                 v-for=\"(info, index) in errors.gender\"",
          "68:                 :key=\"index\"",
          "69:               >",
          "70:                 {{ info }}",
          "71:               </span>",
          "72:             </div>",
          "73:             <div v-else>",
          "74:               <span class=\"register__input--error\" v-html=\"errors.phone\"></span>",
          "75:             </div>",
          "76:           </div>",
          "",
          "---------------",
          "--- Hunk 2 ---",
          "[Context before]",
          "98:               <span class=\"register__input--error\" v-html=\"errors.email\"></span>",
          "99:             </div>",
          "100:           </div>",
          "125:           <vs-input",
          "126:             icon=\"lock\"",
          "127:             type=\"password\"",
          "",
          "[Removed Lines]",
          "102:         <vs-input",
          "103:             icon=\"maps\"",
          "104:             icon-after",
          "105:             size=\"default\"",
          "106:             :placeholder=\"$t('register.field.address')\"",
          "107:             v-model=\"address\"",
          "108:             class=\"register__input\"",
          "109:           />",
          "110:           <div v-if=\"errors.address\" class=\"register__error-container\">",
          "111:             <div v-if=\"$helper.isArray(errors.address)\">",
          "112:               <span",
          "113:                 class=\"register__input--error\"",
          "114:                 v-for=\"(info, index) in errors.address\"",
          "115:                 :key=\"index\"",
          "116:               >",
          "117:                 {{ info }}",
          "118:               </span>",
          "119:             </div>",
          "120:             <div v-else>",
          "121:               <span class=\"register__input--error\" v-html=\"errors.address\"></span>",
          "122:             </div>",
          "123:           </div>",
          "",
          "[Added Lines]",
          "[None]",
          "",
          "---------------",
          "--- Hunk 3 ---",
          "[Context before]",
          "157:             v-model=\"passwordConfirmation\"",
          "158:             class=\"register__input\"",
          "159:           />",
          "160:           <vs-button",
          "161:             type=\"relief\"",
          "162:             class=\"register__button\"",
          "",
          "[Removed Lines]",
          "[None]",
          "",
          "[Added Lines]",
          "156:                   <vs-input",
          "157:             icon=\"place\"",
          "158:             icon-after",
          "159:             size=\"default\"",
          "160:             :placeholder=\"$t('register.field.address')\"",
          "161:             v-model=\"address\"",
          "162:             class=\"register__input\"",
          "163:           />",
          "164:           <div v-if=\"errors.address\" class=\"register__error-container\">",
          "165:             <div v-if=\"$helper.isArray(errors.address)\">",
          "166:               <span",
          "167:                 class=\"register__input--error\"",
          "168:                 v-for=\"(info, index) in errors.address\"",
          "169:                 :key=\"index\"",
          "170:               >",
          "171:                 {{ info }}",
          "172:               </span>",
          "173:             </div>",
          "174:             <div v-else>",
          "175:               <span class=\"register__input--error\" v-html=\"errors.address\"></span>",
          "176:             </div>",
          "177:           </div>",
          "",
          "---------------",
          "--- Hunk 4 ---",
          "[Context before]",
          "179: <script>",
          "180: export default {",
          "181:   name: \"AuthRegister\",",
          "195:   methods: {",
          "196:     register() {",
          "197:       this.$openLoader();",
          "",
          "[Removed Lines]",
          "182:   data: () => ({",
          "183:     errors: {},",
          "184:     name: \"\",",
          "185:     username: \"\",",
          "186:     phone:\"\",",
          "187:     address:\"\",",
          "188:     email: \"\",",
          "189:     password: \"\",",
          "190:     passwordConfirmation: \"\",",
          "191:     baseUrl: process.env.MIX_ADMIN_PANEL_ROUTE_PREFIX",
          "192:       ? process.env.MIX_ADMIN_PANEL_ROUTE_PREFIX",
          "193:       : \"badaso-dashboard\",",
          "194:   }),",
          "",
          "[Added Lines]",
          "200:   data() {",
          "201:     return {",
          "202:         errors: {},",
          "203:         name: \"\",",
          "204:         username: \"\",",
          "205:         phone:\"\",",
          "206:         address:\"\",",
          "207:         gender:\"\",",
          "208:         email: \"\",",
          "209:         password: \"\",",
          "210:         passwordConfirmation: \"\",",
          "211:         baseUrl: process.env.MIX_ADMIN_PANEL_ROUTE_PREFIX",
          "212:             ? process.env.MIX_ADMIN_PANEL_ROUTE_PREFIX",
          "213:             : \"badaso-dashboard\",",
          "215:         genderitems:[",
          "216:             { label: this.$t(\"register.gender.man\"), value: \"man\" },",
          "217:             { label: this.$t(\"register.gender.woman\"), value: \"woman\" },",
          "218:         ]",
          "219:     };",
          "220:   },",
          "",
          "---------------",
          "--- Hunk 5 ---",
          "[Context before]",
          "204:           email: this.email,",
          "205:           password: this.password,",
          "206:           passwordConfirmation: this.passwordConfirmation,",
          "207:         })",
          "208:         .then((response) => {",
          "209:           this.$closeLoader();",
          "",
          "[Removed Lines]",
          "[None]",
          "",
          "[Added Lines]",
          "233:           gender: this.gender,",
          "",
          "---------------"
        ],
        "src/resources/js/pages/user-management/add.vue||src/resources/js/pages/user-management/add.vue": [
          "File: src/resources/js/pages/user-management/add.vue -> src/resources/js/pages/user-management/add.vue",
          "--- Hunk 1 ---",
          "[Context before]",
          "53:               :placeholder=\"$t('user.add.field.phone.placeholder')\"",
          "54:               :alert=\"errors.phone\"",
          "55:             ></badaso-text>",
          "56:             <badaso-upload-image",
          "57:               v-model=\"user.avatar\"",
          "58:               size=\"12\"",
          "",
          "[Removed Lines]",
          "[None]",
          "",
          "[Added Lines]",
          "56:             <badaso-select",
          "57:               v-model=\"user.gender\"",
          "58:               size=\"6\"",
          "59:               :label=\"$t('user.add.field.gender.title')\"",
          "60:               :placeholder=\"$t('user.add.field.gender.placeholder')\"",
          "61:               :items=\"gender\"",
          "62:               :alert=\"errors.gender\"",
          "63:             ></badaso-select>",
          "",
          "---------------",
          "--- Hunk 2 ---",
          "[Context before]",
          "98: export default {",
          "99:   name: \"UserManagementAdd\",",
          "100:   components: {},",
          "102:     errors: {},",
          "103:     user: {",
          "104:       email: \"\",",
          "",
          "[Removed Lines]",
          "101:   data: () => ({",
          "",
          "[Added Lines]",
          "109:   data() {",
          "110:     return {",
          "",
          "---------------",
          "--- Hunk 3 ---",
          "[Context before]",
          "110:       password: \"\",",
          "111:       emailVerified: false,",
          "112:       additionalInfo: \"\",",
          "113:     },",
          "115:   mounted() {},",
          "116:   methods: {",
          "117:     submitForm() {",
          "",
          "[Removed Lines]",
          "114:   }),",
          "",
          "[Added Lines]",
          "122:       gender:\"\",",
          "124:     gender: [",
          "125:         { label: this.$t(\"user.gender.man\"), value: \"man\" },",
          "126:         { label: this.$t(\"user.gender.woman\"), value: \"woman\" },",
          "127:     ],",
          "128:     };",
          "129:   },",
          "",
          "---------------",
          "--- Hunk 4 ---",
          "[Context before]",
          "122:         }",
          "123:         this.$openLoader();",
          "124:         this.$api.badasoUser",
          "136:           .then((response) => {",
          "137:             this.$closeLoader();",
          "138:             this.$router.push({ name: \"UserManagementBrowse\" });",
          "",
          "[Removed Lines]",
          "125:           .add({",
          "126:             email: this.user.email,",
          "127:             name: this.user.name,",
          "128:             username: this.user.username,",
          "129:             phone: this.user.phone,",
          "130:             address: this.user.address,",
          "131:             avatar: this.user.avatar,",
          "132:             password: this.user.password,",
          "133:             emailVerified: this.user.emailVerified,",
          "134:             additionalInfo: this.user.additionalInfo,",
          "135:           })",
          "",
          "[Added Lines]",
          "140:           .add(this.user)",
          "",
          "---------------"
        ],
        "src/resources/js/pages/user-management/edit.vue||src/resources/js/pages/user-management/edit.vue": [
          "File: src/resources/js/pages/user-management/edit.vue -> src/resources/js/pages/user-management/edit.vue",
          "--- Hunk 1 ---",
          "[Context before]",
          "53:               :placeholder=\"$t('user.edit.field.phone.placeholder')\"",
          "54:               :alert=\"errors.phone\"",
          "55:             ></badaso-text>",
          "56:             <badaso-upload-image",
          "57:               v-model=\"user.avatar\"",
          "58:               size=\"12\"",
          "",
          "[Removed Lines]",
          "[None]",
          "",
          "[Added Lines]",
          "56:             <badaso-select",
          "57:               v-model=\"user.gender\"",
          "58:               size=\"6\"",
          "59:               :label=\"$t('user.edit.field.gender.title')\"",
          "60:               :placeholder=\"$t('user.edit.field.gender.placeholder')\"",
          "61:               :items=\"gender\"",
          "62:               :alert=\"errors.gender\"",
          "63:             ></badaso-select>",
          "",
          "---------------",
          "--- Hunk 2 ---",
          "[Context before]",
          "98: export default {",
          "99:   name: \"UserManagementEdit\",",
          "100:   components: {},",
          "103:     user: {",
          "104:       email: \"\",",
          "105:       name: \"\",",
          "106:       username: \"\",",
          "107:       phone: \"\",",
          "109:       avatar: \"\",",
          "110:       password: \"\",",
          "111:       emailVerified: false,",
          "112:       additionalInfo: \"\",",
          "113:     },",
          "115:   computed: {",
          "116:     loggedInUser: {",
          "117:       get() {",
          "",
          "[Removed Lines]",
          "101:   data: () => ({",
          "102:     errors: {},",
          "108:       address:\"\",",
          "114:   }),",
          "",
          "[Added Lines]",
          "109:   data() {",
          "110:     return {",
          "111:          errors: {},",
          "117:       address: \"\",",
          "122:       gender:\"\",",
          "124:     gender: [",
          "125:         { label: this.$t(\"user.gender.man\"), value: \"man\" },",
          "126:         { label: this.$t(\"user.gender.woman\"), value: \"woman\" },",
          "127:     ],",
          "128:     };",
          "129:   },",
          "",
          "---------------",
          "--- Hunk 3 ---",
          "[Context before]",
          "162:           password: this.user.password,",
          "163:           emailVerified: this.user.emailVerified,",
          "164:           additionalInfo: JSON.stringify(this.user.additionalInfo),",
          "165:         })",
          "166:         .then((response) => {",
          "167:           if (this.loggedInUser.id == this.user.id) {",
          "",
          "[Removed Lines]",
          "[None]",
          "",
          "[Added Lines]",
          "180:           gender: this.user.gender,",
          "",
          "---------------"
        ],
        "src/resources/js/pages/user-management/read.vue||src/resources/js/pages/user-management/read.vue": [
          "File: src/resources/js/pages/user-management/read.vue -> src/resources/js/pages/user-management/read.vue",
          "--- Hunk 1 ---",
          "[Context before]",
          "42:             <tr>",
          "43:               <th>{{ $t(\"user.detail.username\") }}</th>",
          "44:               <td>{{ user.username }}</td>",
          "45:             </tr>",
          "46:              <tr>",
          "47:               <th>{{ $t(\"user.detail.phone\") }}</th>",
          "",
          "[Removed Lines]",
          "[None]",
          "",
          "[Added Lines]",
          "45:             </tr>",
          "46:              <tr>",
          "47:               <th>{{ $t(\"user.detail.gender\") }}</th>",
          "48:               <td>{{ user.gender }}</td>",
          "",
          "---------------"
        ],
        "src/resources/js/pages/user/profile.vue||src/resources/js/pages/user/profile.vue": [
          "File: src/resources/js/pages/user/profile.vue -> src/resources/js/pages/user/profile.vue",
          "--- Hunk 1 ---",
          "[Context before]",
          "21:                   :placeholder=\"$t('myProfile.username')\"",
          "22:                   :alert=\"errors.username\"",
          "23:                 ></badaso-text>",
          "24:                  <badaso-text",
          "25:                   v-model=\"user.phone\"",
          "26:                   size=\"12\"",
          "",
          "[Removed Lines]",
          "[None]",
          "",
          "[Added Lines]",
          "24:                 <badaso-select",
          "25:                 v-model=\"user.gender\"",
          "26:                 size=\"12\"",
          "27:                 :label=\"$t('myProfile.gender')\"",
          "28:                 :placeholder=\"$t('myProfile.gender')\"",
          "29:                 :items=\"gender\"",
          "30:                 :alert=\"errors.gender\"",
          "31:                 ></badaso-select>",
          "",
          "---------------",
          "--- Hunk 2 ---",
          "[Context before]",
          "142:   name: \"UserProfile\",",
          "143:   components: {},",
          "144:   data: () => ({",
          "160:   }),",
          "161:   mounted() {",
          "162:     this.getUser();",
          "163:   },",
          "",
          "[Removed Lines]",
          "145:     errors: {},",
          "146:     user: {",
          "147:       email: \"\",",
          "148:       name: \"\",",
          "149:       username: \"\",",
          "150:       avatar: \"\",",
          "151:       phone:\"\",",
          "152:       address:\"\",",
          "153:       additionalInfo: \"\",",
          "154:       oldPassword: \"\",",
          "155:       newPassword: \"\",",
          "156:       newPasswordConfirmation: \"\",",
          "157:     },",
          "158:     token: \"\",",
          "159:     shouldVerifyEmail: false,",
          "",
          "[Added Lines]",
          "155:   data() {",
          "156:     return{",
          "157:         errors: {},",
          "158:         user: {",
          "159:         email: \"\",",
          "160:         name: \"\",",
          "161:         username: \"\",",
          "162:         avatar: \"\",",
          "163:         phone:\"\",",
          "164:         address:\"\",",
          "165:         additionalInfo: \"\",",
          "166:         oldPassword: \"\",",
          "167:         newPassword: \"\",",
          "168:         newPasswordConfirmation: \"\",",
          "169:         gender:\"\",",
          "170:         },",
          "171:         token: \"\",",
          "172:         shouldVerifyEmail: false,",
          "173:         gender: [",
          "174:             { label: this.$t(\"user.gender.man\"), value: \"man\" },",
          "175:             { label: this.$t(\"user.gender.woman\"), value: \"woman\" },",
          "176:         ],",
          "177:     };",
          "178:   },",
          "",
          "---------------",
          "--- Hunk 3 ---",
          "[Context before]",
          "201:           avatar: this.user.avatar,",
          "202:           phone: this.user.phone,",
          "203:           address: this.user.address,",
          "204:           additionalInfo:",
          "205:             this.user.additionalInfo !== \"\"",
          "206:               ? JSON.stringify(this.user.additionalInfo)",
          "",
          "[Removed Lines]",
          "[None]",
          "",
          "[Added Lines]",
          "222:           gender: this.user.gender,",
          "",
          "---------------"
        ]
      }
    },
    {
      "candidate_hash": "e6a532f8229232a968aba59210fc71f8060266b3",
      "candidate_info": {
        "commit_hash": "e6a532f8229232a968aba59210fc71f8060266b3",
        "repo": "uasoft-indonesia/badaso",
        "commit_url": "https://github.com/uasoft-indonesia/badaso/commit/e6a532f8229232a968aba59210fc71f8060266b3",
        "files": [
          "src/Controllers/Controller.php"
        ],
        "message": "Apply fixes from StyleCI",
        "before_after_code_files": [
          "src/Controllers/Controller.php||src/Controllers/Controller.php"
        ]
      },
      "candidate_patch_features": {
        "candidate_earlier_than_patch": 1,
        "same_pr": 1,
        "olp_pr_links": [
          "https://github.com/uasoft-indonesia/badaso/pull/1086"
        ],
        "olp_code_files": {
          "patch": [],
          "candidate": []
        }
      },
      "candidate_diff": {
        "src/Controllers/Controller.php||src/Controllers/Controller.php": [
          "File: src/Controllers/Controller.php -> src/Controllers/Controller.php",
          "--- Hunk 1 ---",
          "[Context before]",
          "40:         if ($user = auth()->user()) {",
          "41:             $permissions = DB::SELECT('",
          "42:                 SELECT *",
          "48:                 WHERE u.id = :user_id",
          "49:                 AND p.key = :permission",
          "50:             ', [",
          "51:                 'user_id'    => $user->id,",
          "53:             ]);",
          "55:             if (count($permissions) > 0) {",
          "",
          "[Removed Lines]",
          "43:                 FROM ' . $prefix . 'permissions p",
          "44:                 JOIN ' . $prefix . 'role_permissions rp ON p.id = rp.permission_id",
          "45:                 JOIN ' . $prefix . 'roles r ON rp.role_id  = r.id",
          "46:                 JOIN ' . $prefix . 'user_roles ur ON r.id = ur.role_id",
          "47:                 JOIN ' . $prefix . 'users u ON ur.user_id = u.id",
          "52:                 'permission' => $method . '_' . $data_type->name,",
          "",
          "[Added Lines]",
          "43:                 FROM '.$prefix.'permissions p",
          "44:                 JOIN '.$prefix.'role_permissions rp ON p.id = rp.permission_id",
          "45:                 JOIN '.$prefix.'roles r ON rp.role_id  = r.id",
          "46:                 JOIN '.$prefix.'user_roles ur ON r.id = ur.role_id",
          "47:                 JOIN '.$prefix.'users u ON ur.user_id = u.id",
          "52:                 'permission' => $method.'_'.$data_type->name,",
          "",
          "---------------",
          "--- Hunk 2 ---",
          "[Context before]",
          "91:                     $destination_table_column = array_key_exists('destination_table_column', $relation_detail) ? $relation_detail['destination_table_column'] : null;",
          "93:                     if ($relation_type == 'belongs_to') {",
          "95:                     }",
          "96:                 }",
          "97:             }",
          "",
          "[Removed Lines]",
          "94:                         $rules[$row->field][] = 'exists:' . $destination_table . ',' . $destination_table_column;",
          "",
          "[Added Lines]",
          "94:                         $rules[$row->field][] = 'exists:'.$destination_table.','.$destination_table_column;",
          "",
          "---------------",
          "--- Hunk 3 ---",
          "[Context before]",
          "269:             $model = app($data_type->model_name);",
          "270:             foreach ($data as $key => $value) {",
          "271:                 $data_row = collect($data_rows)->where('field', $key)->first();",
          "273:                     $model->{$key} = $this->getContentByType($data_type, $data_row, $value);",
          "274:                 }",
          "275:             }",
          "",
          "[Removed Lines]",
          "272:                 if (!is_null($data_row)) {",
          "",
          "[Added Lines]",
          "272:                 if (! is_null($data_row)) {",
          "",
          "---------------",
          "--- Hunk 4 ---",
          "[Context before]",
          "281:             $data['updated_at'] = $timestamp;",
          "282:             foreach ($data as $key => $value) {",
          "283:                 $data_row = collect($data_rows)->where('field', $key)->first();",
          "285:                     $new_data[$key] = $this->getContentByType($data_type, $data_row, $value);",
          "286:                 } else {",
          "287:                     if (in_array($key, ['created_at', 'updated_at'])) {",
          "",
          "[Removed Lines]",
          "284:                 if (!is_null($data_row)) {",
          "",
          "[Added Lines]",
          "284:                 if (! is_null($data_row)) {",
          "",
          "---------------",
          "--- Hunk 5 ---",
          "[Context before]",
          "320:                         $files = explode(',', $model->{$data_row->field});",
          "321:                         foreach ($files as $file) {",
          "322:                             if (is_array($value)) {",
          "324:                                     $this->handleDeleteFile($file);",
          "325:                                 }",
          "326:                             } else {",
          "",
          "[Removed Lines]",
          "323:                                 if (!in_array($file, $value)) {",
          "",
          "[Added Lines]",
          "323:                                 if (! in_array($file, $value)) {",
          "",
          "---------------",
          "--- Hunk 6 ---",
          "[Context before]",
          "353:                         $files = explode(',', $model->{$data_row->field});",
          "354:                         foreach ($files as $file) {",
          "355:                             if (is_array($value)) {",
          "357:                                     $this->handleDeleteFile($file);",
          "358:                                 }",
          "359:                             } else {",
          "",
          "[Removed Lines]",
          "356:                                 if (!in_array($file, $value)) {",
          "",
          "[Added Lines]",
          "356:                                 if (! in_array($file, $value)) {",
          "",
          "---------------",
          "--- Hunk 7 ---",
          "[Context before]",
          "384:         if ($data_type->model_name) {",
          "385:             $model = app($data_type->model_name);",
          "386:             $model = $model::find($id);",
          "388:                 foreach ($data_rows as $data_row) {",
          "389:                     if (in_array($data_row->type, [",
          "390:                         'upload_image',",
          "",
          "[Removed Lines]",
          "387:             if (!is_null($model)) {",
          "",
          "[Added Lines]",
          "387:             if (! is_null($model)) {",
          "",
          "---------------",
          "--- Hunk 8 ---",
          "[Context before]",
          "412:             }",
          "413:         } else {",
          "414:             $model = DB::table($data_type->name)->where('id', $id)->first();",
          "416:                 foreach ($data_rows as $data_row) {",
          "417:                     if (in_array($data_row->type, [",
          "418:                         'upload_image',",
          "",
          "[Removed Lines]",
          "415:             if (!is_null($model)) {",
          "",
          "[Added Lines]",
          "415:             if (! is_null($model)) {",
          "",
          "---------------",
          "--- Hunk 9 ---",
          "[Context before]",
          "451:         if ($data_type->model_name) {",
          "452:             $model = app($data_type->model_name);",
          "453:             $model = $model::find($id);",
          "455:                 foreach ($data_rows as $data_row) {",
          "456:                     if (in_array($data_row->type, [",
          "457:                         'upload_image',",
          "",
          "[Removed Lines]",
          "454:             if (!is_null($model)) {",
          "",
          "[Added Lines]",
          "454:             if (! is_null($model)) {",
          "",
          "---------------",
          "--- Hunk 10 ---",
          "[Context before]",
          "471:             }",
          "472:         } else {",
          "473:             $model = DB::table($data_type->name)->where('id', $id)->first();",
          "475:                 foreach ($data_rows as $data_row) {",
          "476:                     if (in_array($data_row->type, [",
          "477:                         'upload_image',",
          "",
          "[Removed Lines]",
          "474:             if (!is_null($model)) {",
          "",
          "[Added Lines]",
          "474:             if (! is_null($model)) {",
          "",
          "---------------"
        ]
      }
    }
  ]
}