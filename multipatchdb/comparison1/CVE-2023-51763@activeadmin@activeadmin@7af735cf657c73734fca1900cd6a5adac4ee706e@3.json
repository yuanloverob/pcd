{
  "cve_id": "CVE-2023-51763",
  "cve_desc": "csv_builder.rb in ActiveAdmin (aka Active Admin) before 3.2.0 allows CSV injection.",
  "repo": "activeadmin/activeadmin",
  "patch_hash": "7af735cf657c73734fca1900cd6a5adac4ee706e",
  "patch_info": {
    "commit_hash": "7af735cf657c73734fca1900cd6a5adac4ee706e",
    "repo": "activeadmin/activeadmin",
    "commit_url": "https://github.com/activeadmin/activeadmin/commit/7af735cf657c73734fca1900cd6a5adac4ee706e",
    "files": [
      "lib/active_admin/csv_builder.rb",
      "spec/unit/csv_builder_spec.rb"
    ],
    "message": "Backport to 3-0 stable branch protect against CSV Injection (#8161) (#8167)\n\nprotect against CSV Injection\n\nRead more here https://owasp.org/www-community/attacks/CSV_Injection",
    "before_after_code_files": [
      "lib/active_admin/csv_builder.rb||lib/active_admin/csv_builder.rb",
      "spec/unit/csv_builder_spec.rb||spec/unit/csv_builder_spec.rb"
    ]
  },
  "patch_diff": {
    "lib/active_admin/csv_builder.rb||lib/active_admin/csv_builder.rb": [
      "File: lib/active_admin/csv_builder.rb -> lib/active_admin/csv_builder.rb",
      "--- Hunk 1 ---",
      "[Context before]",
      "51:       csv << bom if bom",
      "53:       if column_names",
      "55:       end",
      "57:       controller.send(:in_paginated_batches) do |resource|",
      "",
      "[Removed Lines]",
      "54:         csv << CSV.generate_line(columns.map { |c| encode c.name, options }, **csv_options)",
      "",
      "[Added Lines]",
      "54:         csv << CSV.generate_line(columns.map { |c| sanitize(encode(c.name, options)) }, **csv_options)",
      "",
      "---------------",
      "--- Hunk 2 ---",
      "[Context before]",
      "71:     def build_row(resource, columns, options)",
      "72:       columns.map do |column|",
      "74:       end",
      "75:     end",
      "",
      "[Removed Lines]",
      "73:         encode call_method_or_proc_on(resource, column.data), options",
      "",
      "[Added Lines]",
      "73:         sanitize(encode(call_method_or_proc_on(resource, column.data), options))",
      "",
      "---------------",
      "--- Hunk 3 ---",
      "[Context before]",
      "86:       end",
      "87:     end",
      "89:     def method_missing(method, *args, &block)",
      "90:       if @view_context.respond_to? method",
      "91:         @view_context.public_send method, *args, &block",
      "",
      "[Removed Lines]",
      "[None]",
      "",
      "[Added Lines]",
      "89:     def sanitize(content)",
      "90:       Sanitizer.sanitize(content)",
      "91:     end",
      "",
      "---------------",
      "--- Hunk 4 ---",
      "[Context before]",
      "120:       @column_transitive_options ||= @options.slice(*COLUMN_TRANSITIVE_OPTIONS)",
      "121:     end",
      "122:   end",
      "123: end",
      "",
      "[Removed Lines]",
      "[None]",
      "",
      "[Added Lines]",
      "128:   # Prevents CSV Injection according to https://owasp.org/www-community/attacks/CSV_Injection",
      "129:   module Sanitizer",
      "130:     extend self",
      "132:     ATTACK_CHARACTERS = [\"=\", \"+\", \"-\", \"@\", \"\\t\", \"\\r\"].freeze",
      "134:     def sanitize(value)",
      "135:       return \"'#{value}\" if require_sanitization?(value)",
      "137:       value",
      "138:     end",
      "140:     def require_sanitization?(value)",
      "141:       value.is_a?(String) && value.starts_with?(*ATTACK_CHARACTERS)",
      "142:     end",
      "143:   end",
      "",
      "---------------"
    ],
    "spec/unit/csv_builder_spec.rb||spec/unit/csv_builder_spec.rb": [
      "File: spec/unit/csv_builder_spec.rb -> spec/unit/csv_builder_spec.rb",
      "--- Hunk 1 ---",
      "[Context before]",
      "277:       end",
      "278:     end",
      "279:   end",
      "280: end",
      "",
      "[Removed Lines]",
      "[None]",
      "",
      "[Added Lines]",
      "281:   context \"csv injection\" do",
      "282:     let(:dummy_controller) do",
      "283:       class DummyController",
      "284:         def in_paginated_batches(&block)",
      "285:           Post.all.each(&block)",
      "286:         end",
      "288:         def view_context",
      "289:           MethodOrProcHelper",
      "290:         end",
      "291:       end",
      "292:       DummyController.new",
      "293:     end",
      "295:     let(:builder) do",
      "296:       ActiveAdmin::CSVBuilder.new do",
      "297:         column(:id)",
      "298:         column(:title)",
      "299:       end",
      "300:     end",
      "302:     [\"=\", \"+\", \"-\", \"@\", \"\\t\", \"\\r\"].each do |char|",
      "303:       it \"prepends a single quote when column starts with a #{char} character\" do",
      "304:         attack = \"#{char}1+2\"",
      "306:         escaped_attack = \"'#{attack}\"",
      "307:         escaped_attack = \"\\\"#{escaped_attack}\\\"\" if char == \"\\r\"",
      "309:         post = Post.create!(title: attack)",
      "310:         receiver = []",
      "311:         builder.build dummy_controller, receiver",
      "312:         line = receiver.last",
      "313:         expect(line).to eq \"#{post.id},#{escaped_attack}\\n\"",
      "314:       end",
      "316:       it \"accounts for the field separator when character #{char} is used to inject a formula\" do",
      "317:         attack = \"#{char}1+2'\\\" ;,#{char}1+2\"",
      "318:         escaped_attack = \"\\\"'#{attack.gsub('\"', '\"\"')}\\\"\"",
      "320:         post = Post.create!(title: attack)",
      "321:         receiver = []",
      "322:         builder.build dummy_controller, receiver",
      "323:         line = receiver.last",
      "324:         expect(line).to eq \"#{post.id},#{escaped_attack}\\n\"",
      "325:       end",
      "326:     end",
      "327:   end",
      "",
      "---------------"
    ]
  },
  "candidates": [
    {
      "candidate_hash": "58b31b7a0e687a6c280dc56eee95a1f591cf2a0b",
      "candidate_info": {
        "commit_hash": "58b31b7a0e687a6c280dc56eee95a1f591cf2a0b",
        "repo": "activeadmin/activeadmin",
        "commit_url": "https://github.com/activeadmin/activeadmin/commit/58b31b7a0e687a6c280dc56eee95a1f591cf2a0b",
        "files": [
          "lib/active_admin/menu.rb"
        ],
        "message": "Backport to 3-0 stable branch make sure menu creation does not modify menu options (#8132) (#8166)\n\nMake sure menu creation does not modify menu options (#8078)\n\nThis is an attempt to fix/work around #8078 and related\nissues.\n\nCo-authored-by: dssjoblom <dssjoblom@gmail.com>\nCo-authored-by: Daniel Sj\u00f6blom <daniel@ziney.co>",
        "before_after_code_files": [
          "lib/active_admin/menu.rb||lib/active_admin/menu.rb"
        ]
      },
      "candidate_patch_features": {
        "candidate_earlier_than_patch": 1,
        "same_pr": 1,
        "olp_pr_links": [
          "https://github.com/DocBuddy/activeadmin/pull/1"
        ],
        "olp_code_files": {
          "patch": [],
          "candidate": []
        }
      },
      "candidate_diff": {
        "lib/active_admin/menu.rb||lib/active_admin/menu.rb": [
          "File: lib/active_admin/menu.rb -> lib/active_admin/menu.rb",
          "--- Hunk 1 ---",
          "[Context before]",
          "48:       #   menu.add parent: 'Dashboard', label: 'My Child Dashboard'",
          "49:       #",
          "50:       def add(options)",
          "51:         parent_chain = Array.wrap(options.delete(:parent))",
          "53:         item = if parent = parent_chain.shift",
          "",
          "[Removed Lines]",
          "[None]",
          "",
          "[Added Lines]",
          "51:         options = options.dup # Make sure parameter is not modified",
          "",
          "---------------"
        ]
      }
    },
    {
      "candidate_hash": "0e0288908c1011c0a095a2f9dbefc1b2113424c0",
      "candidate_info": {
        "commit_hash": "0e0288908c1011c0a095a2f9dbefc1b2113424c0",
        "repo": "activeadmin/activeadmin",
        "commit_url": "https://github.com/activeadmin/activeadmin/commit/0e0288908c1011c0a095a2f9dbefc1b2113424c0",
        "files": [
          ".github/workflows/ci.yaml",
          "Gemfile",
          "Gemfile.lock",
          "gemfiles/rails_71/Gemfile",
          "gemfiles/rails_71/Gemfile.lock",
          "tasks/test_application.rb"
        ],
        "message": "Backport Test against Rails 7.2 (#8434)\n\ntest against Rails 7.2",
        "before_after_code_files": [
          "Gemfile.lock||Gemfile.lock",
          "gemfiles/rails_71/Gemfile.lock||gemfiles/rails_71/Gemfile.lock",
          "tasks/test_application.rb||tasks/test_application.rb"
        ]
      },
      "candidate_patch_features": {
        "candidate_earlier_than_patch": 0,
        "same_pr": 1,
        "olp_pr_links": [
          "https://github.com/DocBuddy/activeadmin/pull/1"
        ],
        "olp_code_files": {
          "patch": [],
          "candidate": []
        }
      },
      "candidate_diff": {
        "Gemfile.lock||Gemfile.lock": [
          "File: Gemfile.lock -> Gemfile.lock",
          "--- Hunk 1 ---",
          "[Context before]",
          "15: GEM",
          "16:   remote: https://rubygems.org/",
          "17:   specs:",
          "21:       nio4r (~> 2.0)",
          "22:       websocket-driver (>= 0.6.1)",
          "23:       zeitwerk (~> 2.6)",
          "43:       rails-dom-testing (~> 2.2)",
          "47:       nokogiri (>= 1.8.5)",
          "48:       racc",
          "50:       rack-session (>= 1.0.1)",
          "51:       rack-test (>= 0.6.3)",
          "52:       rails-dom-testing (~> 2.2)",
          "53:       rails-html-sanitizer (~> 1.6)",
          "59:       globalid (>= 0.6.0)",
          "60:       nokogiri (>= 1.8.5)",
          "63:       builder (~> 3.1)",
          "64:       erubi (~> 1.11)",
          "65:       rails-dom-testing (~> 2.2)",
          "66:       rails-html-sanitizer (~> 1.6)",
          "69:       globalid (>= 0.3.6)",
          "72:     activemodel-serializers-xml (1.0.2)",
          "73:       activemodel (> 5.x)",
          "74:       activesupport (> 5.x)",
          "75:       builder (~> 3.1)",
          "79:       timeout (>= 0.4.0)",
          "85:       marcel (~> 1.0)",
          "87:       base64",
          "88:       bigdecimal",
          "90:       connection_pool (>= 2.2.5)",
          "91:       drb",
          "92:       i18n (>= 1.6, < 2)",
          "93:       minitest (>= 5.1)",
          "96:     addressable (2.8.7)",
          "97:       public_suffix (>= 2.0.2, < 7.0)",
          "98:     arbre (1.7.0)",
          "",
          "[Removed Lines]",
          "18:     actioncable (7.1.3.4)",
          "19:       actionpack (= 7.1.3.4)",
          "20:       activesupport (= 7.1.3.4)",
          "24:     actionmailbox (7.1.3.4)",
          "25:       actionpack (= 7.1.3.4)",
          "26:       activejob (= 7.1.3.4)",
          "27:       activerecord (= 7.1.3.4)",
          "28:       activestorage (= 7.1.3.4)",
          "29:       activesupport (= 7.1.3.4)",
          "30:       mail (>= 2.7.1)",
          "31:       net-imap",
          "32:       net-pop",
          "33:       net-smtp",
          "34:     actionmailer (7.1.3.4)",
          "35:       actionpack (= 7.1.3.4)",
          "36:       actionview (= 7.1.3.4)",
          "37:       activejob (= 7.1.3.4)",
          "38:       activesupport (= 7.1.3.4)",
          "39:       mail (~> 2.5, >= 2.5.4)",
          "40:       net-imap",
          "41:       net-pop",
          "42:       net-smtp",
          "44:     actionpack (7.1.3.4)",
          "45:       actionview (= 7.1.3.4)",
          "46:       activesupport (= 7.1.3.4)",
          "49:       rack (>= 2.2.4)",
          "54:     actiontext (7.1.3.4)",
          "55:       actionpack (= 7.1.3.4)",
          "56:       activerecord (= 7.1.3.4)",
          "57:       activestorage (= 7.1.3.4)",
          "58:       activesupport (= 7.1.3.4)",
          "61:     actionview (7.1.3.4)",
          "62:       activesupport (= 7.1.3.4)",
          "67:     activejob (7.1.3.4)",
          "68:       activesupport (= 7.1.3.4)",
          "70:     activemodel (7.1.3.4)",
          "71:       activesupport (= 7.1.3.4)",
          "76:     activerecord (7.1.3.4)",
          "77:       activemodel (= 7.1.3.4)",
          "78:       activesupport (= 7.1.3.4)",
          "80:     activestorage (7.1.3.4)",
          "81:       actionpack (= 7.1.3.4)",
          "82:       activejob (= 7.1.3.4)",
          "83:       activerecord (= 7.1.3.4)",
          "84:       activesupport (= 7.1.3.4)",
          "86:     activesupport (7.1.3.4)",
          "89:       concurrent-ruby (~> 1.0, >= 1.0.2)",
          "94:       mutex_m",
          "95:       tzinfo (~> 2.0)",
          "",
          "[Added Lines]",
          "18:     actioncable (7.2.0)",
          "19:       actionpack (= 7.2.0)",
          "20:       activesupport (= 7.2.0)",
          "24:     actionmailbox (7.2.0)",
          "25:       actionpack (= 7.2.0)",
          "26:       activejob (= 7.2.0)",
          "27:       activerecord (= 7.2.0)",
          "28:       activestorage (= 7.2.0)",
          "29:       activesupport (= 7.2.0)",
          "30:       mail (>= 2.8.0)",
          "31:     actionmailer (7.2.0)",
          "32:       actionpack (= 7.2.0)",
          "33:       actionview (= 7.2.0)",
          "34:       activejob (= 7.2.0)",
          "35:       activesupport (= 7.2.0)",
          "36:       mail (>= 2.8.0)",
          "38:     actionpack (7.2.0)",
          "39:       actionview (= 7.2.0)",
          "40:       activesupport (= 7.2.0)",
          "43:       rack (>= 2.2.4, < 3.2)",
          "48:       useragent (~> 0.16)",
          "49:     actiontext (7.2.0)",
          "50:       actionpack (= 7.2.0)",
          "51:       activerecord (= 7.2.0)",
          "52:       activestorage (= 7.2.0)",
          "53:       activesupport (= 7.2.0)",
          "56:     actionview (7.2.0)",
          "57:       activesupport (= 7.2.0)",
          "62:     activejob (7.2.0)",
          "63:       activesupport (= 7.2.0)",
          "65:     activemodel (7.2.0)",
          "66:       activesupport (= 7.2.0)",
          "71:     activerecord (7.2.0)",
          "72:       activemodel (= 7.2.0)",
          "73:       activesupport (= 7.2.0)",
          "75:     activestorage (7.2.0)",
          "76:       actionpack (= 7.2.0)",
          "77:       activejob (= 7.2.0)",
          "78:       activerecord (= 7.2.0)",
          "79:       activesupport (= 7.2.0)",
          "81:     activesupport (7.2.0)",
          "84:       concurrent-ruby (~> 1.0, >= 1.3.1)",
          "88:       logger (>= 1.4.2)",
          "90:       securerandom (>= 0.3)",
          "91:       tzinfo (~> 2.0, >= 2.0.5)",
          "",
          "---------------",
          "--- Hunk 2 ---",
          "[Context before]",
          "261:     mini_portile2 (2.8.7)",
          "262:     minitest (5.24.1)",
          "263:     multi_test (1.1.0)",
          "265:     net-http (0.4.1)",
          "266:       uri",
          "267:     net-imap (0.4.14)",
          "",
          "[Removed Lines]",
          "264:     mutex_m (0.2.0)",
          "",
          "[Added Lines]",
          "[None]",
          "",
          "---------------",
          "--- Hunk 3 ---",
          "[Context before]",
          "306:     rackup (2.1.0)",
          "307:       rack (>= 3)",
          "308:       webrick (~> 1.8)",
          "321:       bundler (>= 1.15.0)",
          "323:     rails-dom-testing (2.2.0)",
          "324:       activesupport (>= 5.0.0)",
          "325:       minitest",
          "",
          "[Removed Lines]",
          "309:     rails (7.1.3.4)",
          "310:       actioncable (= 7.1.3.4)",
          "311:       actionmailbox (= 7.1.3.4)",
          "312:       actionmailer (= 7.1.3.4)",
          "313:       actionpack (= 7.1.3.4)",
          "314:       actiontext (= 7.1.3.4)",
          "315:       actionview (= 7.1.3.4)",
          "316:       activejob (= 7.1.3.4)",
          "317:       activemodel (= 7.1.3.4)",
          "318:       activerecord (= 7.1.3.4)",
          "319:       activestorage (= 7.1.3.4)",
          "320:       activesupport (= 7.1.3.4)",
          "322:       railties (= 7.1.3.4)",
          "",
          "[Added Lines]",
          "304:     rails (7.2.0)",
          "305:       actioncable (= 7.2.0)",
          "306:       actionmailbox (= 7.2.0)",
          "307:       actionmailer (= 7.2.0)",
          "308:       actionpack (= 7.2.0)",
          "309:       actiontext (= 7.2.0)",
          "310:       actionview (= 7.2.0)",
          "311:       activejob (= 7.2.0)",
          "312:       activemodel (= 7.2.0)",
          "313:       activerecord (= 7.2.0)",
          "314:       activestorage (= 7.2.0)",
          "315:       activesupport (= 7.2.0)",
          "317:       railties (= 7.2.0)",
          "",
          "---------------",
          "--- Hunk 4 ---",
          "[Context before]",
          "330:     rails-i18n (7.0.9)",
          "331:       i18n (>= 0.7, < 2)",
          "332:       railties (>= 6.0.0, < 8)",
          "337:       rackup (>= 1.0.0)",
          "338:       rake (>= 12.2)",
          "339:       thor (~> 1.0, >= 1.2.2)",
          "",
          "[Removed Lines]",
          "333:     railties (7.1.3.4)",
          "334:       actionpack (= 7.1.3.4)",
          "335:       activesupport (= 7.1.3.4)",
          "336:       irb",
          "",
          "[Added Lines]",
          "328:     railties (7.2.0)",
          "329:       actionpack (= 7.2.0)",
          "330:       activesupport (= 7.2.0)",
          "331:       irb (~> 1.13)",
          "",
          "---------------",
          "--- Hunk 5 ---",
          "[Context before]",
          "408:     sawyer (0.9.2)",
          "409:       addressable (>= 2.3.5)",
          "410:       faraday (>= 0.17.3, < 3)",
          "411:     simplecov (0.22.0)",
          "412:       docile (~> 1.1)",
          "413:       simplecov-html (~> 0.11)",
          "",
          "[Removed Lines]",
          "[None]",
          "",
          "[Added Lines]",
          "406:     securerandom (0.3.1)",
          "",
          "---------------",
          "--- Hunk 6 ---",
          "[Context before]",
          "441:       concurrent-ruby (~> 1.0)",
          "442:     unicode-display_width (2.5.0)",
          "443:     uri (0.13.0)",
          "444:     warden (1.2.9)",
          "445:       rack (>= 2.0.9)",
          "446:     webrick (1.8.1)",
          "",
          "[Removed Lines]",
          "[None]",
          "",
          "[Added Lines]",
          "440:     useragent (0.16.10)",
          "",
          "---------------",
          "--- Hunk 7 ---",
          "[Context before]",
          "476:   octokit",
          "477:   parallel_tests",
          "478:   pundit",
          "480:   rails-i18n",
          "481:   rake",
          "483:   rspec-rails",
          "484:   rubocop",
          "485:   rubocop-packaging",
          "",
          "[Removed Lines]",
          "479:   rails (~> 7.1.0)",
          "482:   ransack (>= 4.1.0)",
          "",
          "[Added Lines]",
          "476:   rails (~> 7.2.0)",
          "479:   ransack (>= 4.2.0)",
          "",
          "---------------",
          "--- Hunk 8 ---",
          "[Context before]",
          "489:   simplecov",
          "490:   simplecov-cobertura",
          "491:   sprockets-rails",
          "493:   webrick",
          "494:   yard",
          "",
          "[Removed Lines]",
          "492:   sqlite3 (~> 1.7)",
          "",
          "[Added Lines]",
          "489:   sqlite3",
          "",
          "---------------"
        ],
        "gemfiles/rails_71/Gemfile.lock||gemfiles/rails_71/Gemfile.lock": [
          "File: gemfiles/rails_71/Gemfile.lock -> gemfiles/rails_71/Gemfile.lock",
          "--- Hunk 1 ---",
          "[Context before]",
          "[No context available]",
          "",
          "[Removed Lines]",
          "[None]",
          "",
          "[Added Lines]",
          "1: PATH",
          "2:   remote: ../..",
          "3:   specs:",
          "4:     activeadmin (3.2.3)",
          "5:       arbre (~> 1.2, >= 1.2.1)",
          "6:       csv",
          "7:       formtastic (>= 3.1)",
          "8:       formtastic_i18n (>= 0.4)",
          "9:       inherited_resources (~> 1.7)",
          "10:       jquery-rails (>= 4.2)",
          "11:       kaminari (>= 1.2.1)",
          "12:       railties (>= 6.1)",
          "13:       ransack (>= 4.0)",
          "15: GEM",
          "16:   remote: https://rubygems.org/",
          "17:   specs:",
          "18:     actioncable (7.1.3.4)",
          "19:       actionpack (= 7.1.3.4)",
          "20:       activesupport (= 7.1.3.4)",
          "21:       nio4r (~> 2.0)",
          "22:       websocket-driver (>= 0.6.1)",
          "23:       zeitwerk (~> 2.6)",
          "24:     actionmailbox (7.1.3.4)",
          "25:       actionpack (= 7.1.3.4)",
          "26:       activejob (= 7.1.3.4)",
          "27:       activerecord (= 7.1.3.4)",
          "28:       activestorage (= 7.1.3.4)",
          "29:       activesupport (= 7.1.3.4)",
          "30:       mail (>= 2.7.1)",
          "31:       net-imap",
          "32:       net-pop",
          "33:       net-smtp",
          "34:     actionmailer (7.1.3.4)",
          "35:       actionpack (= 7.1.3.4)",
          "36:       actionview (= 7.1.3.4)",
          "37:       activejob (= 7.1.3.4)",
          "38:       activesupport (= 7.1.3.4)",
          "39:       mail (~> 2.5, >= 2.5.4)",
          "40:       net-imap",
          "41:       net-pop",
          "42:       net-smtp",
          "43:       rails-dom-testing (~> 2.2)",
          "44:     actionpack (7.1.3.4)",
          "45:       actionview (= 7.1.3.4)",
          "46:       activesupport (= 7.1.3.4)",
          "47:       nokogiri (>= 1.8.5)",
          "48:       racc",
          "49:       rack (>= 2.2.4)",
          "50:       rack-session (>= 1.0.1)",
          "51:       rack-test (>= 0.6.3)",
          "52:       rails-dom-testing (~> 2.2)",
          "53:       rails-html-sanitizer (~> 1.6)",
          "54:     actiontext (7.1.3.4)",
          "55:       actionpack (= 7.1.3.4)",
          "56:       activerecord (= 7.1.3.4)",
          "57:       activestorage (= 7.1.3.4)",
          "58:       activesupport (= 7.1.3.4)",
          "59:       globalid (>= 0.6.0)",
          "60:       nokogiri (>= 1.8.5)",
          "61:     actionview (7.1.3.4)",
          "62:       activesupport (= 7.1.3.4)",
          "63:       builder (~> 3.1)",
          "64:       erubi (~> 1.11)",
          "65:       rails-dom-testing (~> 2.2)",
          "66:       rails-html-sanitizer (~> 1.6)",
          "67:     activejob (7.1.3.4)",
          "68:       activesupport (= 7.1.3.4)",
          "69:       globalid (>= 0.3.6)",
          "70:     activemodel (7.1.3.4)",
          "71:       activesupport (= 7.1.3.4)",
          "72:     activemodel-serializers-xml (1.0.2)",
          "73:       activemodel (> 5.x)",
          "74:       activesupport (> 5.x)",
          "75:       builder (~> 3.1)",
          "76:     activerecord (7.1.3.4)",
          "77:       activemodel (= 7.1.3.4)",
          "78:       activesupport (= 7.1.3.4)",
          "79:       timeout (>= 0.4.0)",
          "80:     activestorage (7.1.3.4)",
          "81:       actionpack (= 7.1.3.4)",
          "82:       activejob (= 7.1.3.4)",
          "83:       activerecord (= 7.1.3.4)",
          "84:       activesupport (= 7.1.3.4)",
          "85:       marcel (~> 1.0)",
          "86:     activesupport (7.1.3.4)",
          "87:       base64",
          "88:       bigdecimal",
          "89:       concurrent-ruby (~> 1.0, >= 1.0.2)",
          "90:       connection_pool (>= 2.2.5)",
          "91:       drb",
          "92:       i18n (>= 1.6, < 2)",
          "93:       minitest (>= 5.1)",
          "94:       mutex_m",
          "95:       tzinfo (~> 2.0)",
          "96:     addressable (2.8.7)",
          "97:       public_suffix (>= 2.0.2, < 7.0)",
          "98:     arbre (1.7.0)",
          "99:       activesupport (>= 3.0.0)",
          "100:       ruby2_keywords (>= 0.0.2)",
          "101:     ast (2.4.2)",
          "102:     base64 (0.2.0)",
          "103:     bcrypt (3.1.20)",
          "104:     bigdecimal (3.1.8)",
          "105:     builder (3.3.0)",
          "106:     cancancan (3.6.1)",
          "107:     capybara (3.40.0)",
          "108:       addressable",
          "109:       matrix",
          "110:       mini_mime (>= 0.1.3)",
          "111:       nokogiri (~> 1.11)",
          "112:       rack (>= 1.6.0)",
          "113:       rack-test (>= 0.6.3)",
          "114:       regexp_parser (>= 1.5, < 3.0)",
          "115:       xpath (~> 3.2)",
          "116:     chandler (0.9.0)",
          "117:       netrc",
          "118:       octokit (>= 2.2.0)",
          "119:     childprocess (5.0.0)",
          "120:     concurrent-ruby (1.3.3)",
          "121:     connection_pool (2.4.1)",
          "122:     crass (1.0.6)",
          "123:     csv (3.3.0)",
          "124:     cucumber (9.2.0)",
          "125:       builder (~> 3.2)",
          "126:       cucumber-ci-environment (> 9, < 11)",
          "127:       cucumber-core (> 13, < 14)",
          "128:       cucumber-cucumber-expressions (~> 17.0)",
          "129:       cucumber-gherkin (> 24, < 28)",
          "130:       cucumber-html-formatter (> 20.3, < 22)",
          "131:       cucumber-messages (> 19, < 25)",
          "132:       diff-lcs (~> 1.5)",
          "133:       mini_mime (~> 1.1)",
          "134:       multi_test (~> 1.1)",
          "135:       sys-uname (~> 1.2)",
          "136:     cucumber-ci-environment (10.0.1)",
          "137:     cucumber-core (13.0.3)",
          "138:       cucumber-gherkin (>= 27, < 28)",
          "139:       cucumber-messages (>= 20, < 23)",
          "140:       cucumber-tag-expressions (> 5, < 7)",
          "141:     cucumber-cucumber-expressions (17.1.0)",
          "142:       bigdecimal",
          "143:     cucumber-gherkin (27.0.0)",
          "144:       cucumber-messages (>= 19.1.4, < 23)",
          "145:     cucumber-html-formatter (21.4.1)",
          "146:       cucumber-messages (> 19, < 25)",
          "147:     cucumber-messages (22.0.0)",
          "148:     cucumber-rails (3.0.0)",
          "149:       capybara (>= 3.11, < 4)",
          "150:       cucumber (>= 5, < 10)",
          "151:       railties (>= 5.2, < 8)",
          "152:     cucumber-tag-expressions (6.1.0)",
          "153:     cuprite (0.15.1)",
          "154:       capybara (~> 3.0)",
          "155:       ferrum (~> 0.15.0)",
          "156:     database_cleaner-active_record (2.2.0)",
          "157:       activerecord (>= 5.a)",
          "158:       database_cleaner-core (~> 2.0.0)",
          "159:     database_cleaner-core (2.0.1)",
          "160:     date (3.3.4)",
          "161:     devise (4.9.4)",
          "162:       bcrypt (~> 3.0)",
          "163:       orm_adapter (~> 0.1)",
          "164:       railties (>= 4.1.0)",
          "165:       responders",
          "166:       warden (~> 1.2.3)",
          "167:     diff-lcs (1.5.1)",
          "168:     docile (1.4.1)",
          "169:     draper (4.0.2)",
          "170:       actionpack (>= 5.0)",
          "171:       activemodel (>= 5.0)",
          "172:       activemodel-serializers-xml (>= 1.0)",
          "173:       activesupport (>= 5.0)",
          "174:       request_store (>= 1.0)",
          "175:       ruby2_keywords",
          "176:     drb (2.2.1)",
          "177:     erubi (1.13.0)",
          "178:     faraday (2.10.0)",
          "179:       faraday-net_http (>= 2.0, < 3.2)",
          "180:       logger",
          "181:     faraday-net_http (3.1.1)",
          "182:       net-http",
          "183:     ferrum (0.15)",
          "184:       addressable (~> 2.5)",
          "185:       concurrent-ruby (~> 1.1)",
          "186:       webrick (~> 1.7)",
          "187:       websocket-driver (~> 0.7)",
          "188:     ffi (1.17.0)",
          "189:     ffi (1.17.0-arm64-darwin)",
          "190:     ffi (1.17.0-x86_64-linux-gnu)",
          "191:     formtastic (5.0.0)",
          "192:       actionpack (>= 6.0.0)",
          "193:     formtastic_i18n (0.7.0)",
          "194:     globalid (1.2.1)",
          "195:       activesupport (>= 6.1)",
          "196:     has_scope (0.8.2)",
          "197:       actionpack (>= 5.2)",
          "198:       activesupport (>= 5.2)",
          "199:     highline (3.1.0)",
          "200:       reline",
          "201:     i18n (1.14.5)",
          "202:       concurrent-ruby (~> 1.0)",
          "203:     i18n-spec (0.6.0)",
          "204:       iso",
          "205:     i18n-tasks (1.0.14)",
          "206:       activesupport (>= 4.0.2)",
          "207:       ast (>= 2.1.0)",
          "208:       erubi",
          "209:       highline (>= 2.0.0)",
          "210:       i18n",
          "211:       parser (>= 3.2.2.1)",
          "212:       rails-i18n",
          "213:       rainbow (>= 2.2.2, < 4.0)",
          "214:       terminal-table (>= 1.5.1)",
          "215:     inherited_resources (1.14.0)",
          "216:       actionpack (>= 6.0)",
          "217:       has_scope (>= 0.6)",
          "218:       railties (>= 6.0)",
          "219:       responders (>= 2)",
          "220:     io-console (0.7.2)",
          "221:     irb (1.14.0)",
          "222:       rdoc (>= 4.0.0)",
          "223:       reline (>= 0.4.2)",
          "224:     iso (0.4.0)",
          "225:       i18n",
          "226:     jquery-rails (4.6.0)",
          "227:       rails-dom-testing (>= 1, < 3)",
          "228:       railties (>= 4.2.0)",
          "229:       thor (>= 0.14, < 2.0)",
          "230:     json (2.7.2)",
          "231:     kaminari (1.2.2)",
          "232:       activesupport (>= 4.1.0)",
          "233:       kaminari-actionview (= 1.2.2)",
          "234:       kaminari-activerecord (= 1.2.2)",
          "235:       kaminari-core (= 1.2.2)",
          "236:     kaminari-actionview (1.2.2)",
          "237:       actionview",
          "238:       kaminari-core (= 1.2.2)",
          "239:     kaminari-activerecord (1.2.2)",
          "240:       activerecord",
          "241:       kaminari-core (= 1.2.2)",
          "242:     kaminari-core (1.2.2)",
          "243:     kramdown (2.4.0)",
          "244:       rexml",
          "245:     language_server-protocol (3.17.0.3)",
          "246:     launchy (3.0.1)",
          "247:       addressable (~> 2.8)",
          "248:       childprocess (~> 5.0)",
          "249:     logger (1.6.0)",
          "250:     loofah (2.22.0)",
          "251:       crass (~> 1.0.2)",
          "252:       nokogiri (>= 1.12.0)",
          "253:     mail (2.8.1)",
          "254:       mini_mime (>= 0.1.1)",
          "255:       net-imap",
          "256:       net-pop",
          "257:       net-smtp",
          "258:     marcel (1.0.4)",
          "259:     matrix (0.4.2)",
          "260:     mini_mime (1.1.5)",
          "261:     mini_portile2 (2.8.7)",
          "262:     minitest (5.24.1)",
          "263:     multi_test (1.1.0)",
          "264:     mutex_m (0.2.0)",
          "265:     net-http (0.4.1)",
          "266:       uri",
          "267:     net-imap (0.4.14)",
          "268:       date",
          "269:       net-protocol",
          "270:     net-pop (0.1.2)",
          "271:       net-protocol",
          "272:     net-protocol (0.2.2)",
          "273:       timeout",
          "274:     net-smtp (0.5.0)",
          "275:       net-protocol",
          "276:     netrc (0.11.0)",
          "277:     nio4r (2.7.3)",
          "278:     nokogiri (1.16.7)",
          "279:       mini_portile2 (~> 2.8.2)",
          "280:       racc (~> 1.4)",
          "281:     nokogiri (1.16.7-arm64-darwin)",
          "282:       racc (~> 1.4)",
          "283:     nokogiri (1.16.7-x86_64-linux)",
          "284:       racc (~> 1.4)",
          "285:     octokit (9.1.0)",
          "286:       faraday (>= 1, < 3)",
          "287:       sawyer (~> 0.9)",
          "288:     orm_adapter (0.5.0)",
          "289:     parallel (1.25.1)",
          "290:     parallel_tests (4.7.1)",
          "291:       parallel",
          "292:     parser (3.3.4.0)",
          "293:       ast (~> 2.4.1)",
          "294:       racc",
          "295:     psych (5.1.2)",
          "296:       stringio",
          "297:     public_suffix (6.0.1)",
          "298:     pundit (2.3.2)",
          "299:       activesupport (>= 3.0.0)",
          "300:     racc (1.8.0)",
          "301:     rack (3.1.7)",
          "302:     rack-session (2.0.0)",
          "303:       rack (>= 3.0.0)",
          "304:     rack-test (2.1.0)",
          "305:       rack (>= 1.3)",
          "306:     rackup (2.1.0)",
          "307:       rack (>= 3)",
          "308:       webrick (~> 1.8)",
          "309:     rails (7.1.3.4)",
          "310:       actioncable (= 7.1.3.4)",
          "311:       actionmailbox (= 7.1.3.4)",
          "312:       actionmailer (= 7.1.3.4)",
          "313:       actionpack (= 7.1.3.4)",
          "314:       actiontext (= 7.1.3.4)",
          "315:       actionview (= 7.1.3.4)",
          "316:       activejob (= 7.1.3.4)",
          "317:       activemodel (= 7.1.3.4)",
          "318:       activerecord (= 7.1.3.4)",
          "319:       activestorage (= 7.1.3.4)",
          "320:       activesupport (= 7.1.3.4)",
          "321:       bundler (>= 1.15.0)",
          "322:       railties (= 7.1.3.4)",
          "323:     rails-dom-testing (2.2.0)",
          "324:       activesupport (>= 5.0.0)",
          "325:       minitest",
          "326:       nokogiri (>= 1.6)",
          "327:     rails-html-sanitizer (1.6.0)",
          "328:       loofah (~> 2.21)",
          "329:       nokogiri (~> 1.14)",
          "330:     rails-i18n (7.0.9)",
          "331:       i18n (>= 0.7, < 2)",
          "332:       railties (>= 6.0.0, < 8)",
          "333:     railties (7.1.3.4)",
          "334:       actionpack (= 7.1.3.4)",
          "335:       activesupport (= 7.1.3.4)",
          "336:       irb",
          "337:       rackup (>= 1.0.0)",
          "338:       rake (>= 12.2)",
          "339:       thor (~> 1.0, >= 1.2.2)",
          "340:       zeitwerk (~> 2.6)",
          "341:     rainbow (3.1.1)",
          "342:     rake (13.2.1)",
          "343:     ransack (4.2.0)",
          "344:       activerecord (>= 6.1.5)",
          "345:       activesupport (>= 6.1.5)",
          "346:       i18n",
          "347:     rdoc (6.7.0)",
          "348:       psych (>= 4.0.0)",
          "349:     regexp_parser (2.9.2)",
          "350:     reline (0.5.9)",
          "351:       io-console (~> 0.5)",
          "352:     request_store (1.7.0)",
          "353:       rack (>= 1.4)",
          "354:     responders (3.1.1)",
          "355:       actionpack (>= 5.2)",
          "356:       railties (>= 5.2)",
          "357:     rexml (3.3.2)",
          "358:       strscan",
          "359:     rspec-core (3.13.0)",
          "360:       rspec-support (~> 3.13.0)",
          "361:     rspec-expectations (3.13.1)",
          "362:       diff-lcs (>= 1.2.0, < 2.0)",
          "363:       rspec-support (~> 3.13.0)",
          "364:     rspec-mocks (3.13.1)",
          "365:       diff-lcs (>= 1.2.0, < 2.0)",
          "366:       rspec-support (~> 3.13.0)",
          "367:     rspec-rails (6.1.3)",
          "368:       actionpack (>= 6.1)",
          "369:       activesupport (>= 6.1)",
          "370:       railties (>= 6.1)",
          "371:       rspec-core (~> 3.13)",
          "372:       rspec-expectations (~> 3.13)",
          "373:       rspec-mocks (~> 3.13)",
          "374:       rspec-support (~> 3.13)",
          "375:     rspec-support (3.13.1)",
          "376:     rubocop (1.65.0)",
          "377:       json (~> 2.3)",
          "378:       language_server-protocol (>= 3.17.0)",
          "379:       parallel (~> 1.10)",
          "380:       parser (>= 3.3.0.2)",
          "381:       rainbow (>= 2.2.2, < 4.0)",
          "382:       regexp_parser (>= 2.4, < 3.0)",
          "383:       rexml (>= 3.2.5, < 4.0)",
          "384:       rubocop-ast (>= 1.31.1, < 2.0)",
          "385:       ruby-progressbar (~> 1.7)",
          "386:       unicode-display_width (>= 2.4.0, < 3.0)",
          "387:     rubocop-ast (1.31.3)",
          "388:       parser (>= 3.3.1.0)",
          "389:     rubocop-packaging (0.5.2)",
          "390:       rubocop (>= 1.33, < 2.0)",
          "391:     rubocop-rails (2.25.1)",
          "392:       activesupport (>= 4.2.0)",
          "393:       rack (>= 1.1)",
          "394:       rubocop (>= 1.33.0, < 2.0)",
          "395:       rubocop-ast (>= 1.31.1, < 2.0)",
          "396:     rubocop-rspec (3.0.3)",
          "397:       rubocop (~> 1.61)",
          "398:     ruby-progressbar (1.13.0)",
          "399:     ruby2_keywords (0.0.5)",
          "400:     sassc (2.4.0)",
          "401:       ffi (~> 1.9)",
          "402:     sassc-rails (2.1.2)",
          "403:       railties (>= 4.0.0)",
          "404:       sassc (>= 2.0)",
          "405:       sprockets (> 3.0)",
          "406:       sprockets-rails",
          "407:       tilt",
          "408:     sawyer (0.9.2)",
          "409:       addressable (>= 2.3.5)",
          "410:       faraday (>= 0.17.3, < 3)",
          "411:     simplecov (0.22.0)",
          "412:       docile (~> 1.1)",
          "413:       simplecov-html (~> 0.11)",
          "414:       simplecov_json_formatter (~> 0.1)",
          "415:     simplecov-cobertura (2.1.0)",
          "416:       rexml",
          "417:       simplecov (~> 0.19)",
          "418:     simplecov-html (0.12.3)",
          "419:     simplecov_json_formatter (0.1.4)",
          "420:     sprockets (4.2.1)",
          "421:       concurrent-ruby (~> 1.0)",
          "422:       rack (>= 2.2.4, < 4)",
          "423:     sprockets-rails (3.5.1)",
          "424:       actionpack (>= 6.1)",
          "425:       activesupport (>= 6.1)",
          "426:       sprockets (>= 3.0.0)",
          "427:     sqlite3 (1.7.3)",
          "428:       mini_portile2 (~> 2.8.0)",
          "429:     sqlite3 (1.7.3-arm64-darwin)",
          "430:     sqlite3 (1.7.3-x86_64-linux)",
          "431:     stringio (3.1.1)",
          "432:     strscan (3.1.0)",
          "433:     sys-uname (1.3.0)",
          "434:       ffi (~> 1.1)",
          "435:     terminal-table (3.0.2)",
          "436:       unicode-display_width (>= 1.1.1, < 3)",
          "437:     thor (1.3.1)",
          "438:     tilt (2.4.0)",
          "439:     timeout (0.4.1)",
          "440:     tzinfo (2.0.6)",
          "441:       concurrent-ruby (~> 1.0)",
          "442:     unicode-display_width (2.5.0)",
          "443:     uri (0.13.0)",
          "444:     warden (1.2.9)",
          "445:       rack (>= 2.0.9)",
          "446:     webrick (1.8.1)",
          "447:     websocket-driver (0.7.6)",
          "448:       websocket-extensions (>= 0.1.0)",
          "449:     websocket-extensions (0.1.5)",
          "450:     xpath (3.2.0)",
          "451:       nokogiri (~> 1.8)",
          "452:     yard (0.9.36)",
          "453:     zeitwerk (2.6.16)",
          "455: PLATFORMS",
          "456:   arm64-darwin",
          "457:   ruby",
          "458:   x86_64-linux",
          "460: DEPENDENCIES",
          "461:   activeadmin!",
          "462:   cancancan",
          "463:   capybara",
          "464:   chandler",
          "465:   cucumber",
          "466:   cucumber-rails",
          "467:   cuprite",
          "468:   database_cleaner-active_record",
          "469:   devise",
          "470:   draper",
          "471:   formtastic (>= 5.0.0)",
          "472:   i18n-spec",
          "473:   i18n-tasks",
          "474:   kramdown",
          "475:   launchy",
          "476:   octokit",
          "477:   parallel_tests",
          "478:   pundit",
          "479:   rails (~> 7.1.0)",
          "480:   rails-i18n",
          "481:   rake",
          "482:   ransack (>= 4.1.0)",
          "483:   rspec-rails",
          "484:   rubocop",
          "485:   rubocop-packaging",
          "486:   rubocop-rails",
          "487:   rubocop-rspec",
          "488:   sassc-rails",
          "489:   simplecov",
          "490:   simplecov-cobertura",
          "491:   sprockets-rails",
          "492:   sqlite3 (~> 1.7)",
          "493:   webrick",
          "494:   yard",
          "496: BUNDLED WITH",
          "497:    2.5.16",
          "",
          "---------------"
        ],
        "tasks/test_application.rb||tasks/test_application.rb": [
          "File: tasks/test_application.rb -> tasks/test_application.rb",
          "--- Hunk 1 ---",
          "[Context before]",
          "61:     end",
          "63:     def app_name",
          "66:       File.basename(File.dirname(gemfile))",
          "67:     end",
          "",
          "[Removed Lines]",
          "64:       return \"rails_71\" if main_app?",
          "",
          "[Added Lines]",
          "64:       return \"rails_72\" if main_app?",
          "",
          "---------------"
        ]
      }
    },
    {
      "candidate_hash": "477430828bf133ac04da2839aeb914004417c4b6",
      "candidate_info": {
        "commit_hash": "477430828bf133ac04da2839aeb914004417c4b6",
        "repo": "activeadmin/activeadmin",
        "commit_url": "https://github.com/activeadmin/activeadmin/commit/477430828bf133ac04da2839aeb914004417c4b6",
        "files": [
          "Gemfile.lock",
          "activeadmin.gemspec",
          "gemfiles/rails_61/Gemfile.lock",
          "gemfiles/rails_70/Gemfile.lock"
        ],
        "message": "Backport Suppress ruby 3.3 warning (#8310)\n\nBackport to 3-0 stable branch suppress ruby 3.3 warning (#8303)\n\n```\n/myapp/vendor/bundle/gems/zeitwerk-2.6.13/lib/zeitwerk/kernel.rb:34: warning: csv was loaded from the standard library, but will no longer be part of the default gems since Ruby 3.4.0. Add csv to your Gemfile or gemspec. Also contact author of activeadmin-3.2.0 to add csv into its gemspec.\n```\n\nCo-authored-by: wonda-tea-coffee <lagrange.resolvent@gmail.com>",
        "before_after_code_files": [
          "Gemfile.lock||Gemfile.lock",
          "activeadmin.gemspec||activeadmin.gemspec",
          "gemfiles/rails_61/Gemfile.lock||gemfiles/rails_61/Gemfile.lock",
          "gemfiles/rails_70/Gemfile.lock||gemfiles/rails_70/Gemfile.lock"
        ]
      },
      "candidate_patch_features": {
        "candidate_earlier_than_patch": 0,
        "same_pr": 1,
        "olp_pr_links": [
          "https://github.com/DocBuddy/activeadmin/pull/1"
        ],
        "olp_code_files": {
          "patch": [],
          "candidate": []
        }
      },
      "candidate_diff": {
        "Gemfile.lock||Gemfile.lock": [
          "File: Gemfile.lock -> Gemfile.lock",
          "--- Hunk 1 ---",
          "[Context before]",
          "13:   specs:",
          "14:     activeadmin (3.2.0)",
          "15:       arbre (~> 1.2, >= 1.2.1)",
          "16:       formtastic (>= 3.1)",
          "17:       formtastic_i18n (>= 0.4)",
          "18:       inherited_resources (~> 1.7)",
          "",
          "[Removed Lines]",
          "[None]",
          "",
          "[Added Lines]",
          "16:       csv",
          "",
          "---------------",
          "--- Hunk 2 ---",
          "[Context before]",
          "134:     concurrent-ruby (1.2.2)",
          "135:     connection_pool (2.4.1)",
          "136:     crass (1.0.6)",
          "137:     cucumber (8.0.0)",
          "138:       builder (~> 3.2, >= 3.2.4)",
          "139:       cucumber-ci-environment (~> 9.0, >= 9.0.4)",
          "",
          "[Removed Lines]",
          "[None]",
          "",
          "[Added Lines]",
          "138:     csv (3.3.0)",
          "",
          "---------------"
        ],
        "activeadmin.gemspec||activeadmin.gemspec": [
          "File: activeadmin.gemspec -> activeadmin.gemspec",
          "--- Hunk 1 ---",
          "[Context before]",
          "32:   s.required_ruby_version = \">= 2.6\"",
          "34:   s.add_dependency \"arbre\", \"~> 1.2\", \">= 1.2.1\"",
          "35:   s.add_dependency \"formtastic\", \">= 3.1\"",
          "36:   s.add_dependency \"formtastic_i18n\", \">= 0.4\"",
          "37:   s.add_dependency \"inherited_resources\", \"~> 1.7\"",
          "",
          "[Removed Lines]",
          "[None]",
          "",
          "[Added Lines]",
          "35:   s.add_dependency \"csv\"",
          "",
          "---------------"
        ],
        "gemfiles/rails_61/Gemfile.lock||gemfiles/rails_61/Gemfile.lock": [
          "File: gemfiles/rails_61/Gemfile.lock -> gemfiles/rails_61/Gemfile.lock",
          "--- Hunk 1 ---",
          "[Context before]",
          "3:   specs:",
          "4:     activeadmin (3.2.0)",
          "5:       arbre (~> 1.2, >= 1.2.1)",
          "6:       formtastic (>= 3.1)",
          "7:       formtastic_i18n (>= 0.4)",
          "8:       inherited_resources (~> 1.7)",
          "",
          "[Removed Lines]",
          "[None]",
          "",
          "[Added Lines]",
          "6:       csv",
          "",
          "---------------",
          "--- Hunk 2 ---",
          "[Context before]",
          "110:       xpath (~> 3.2)",
          "111:     concurrent-ruby (1.2.2)",
          "112:     crass (1.0.6)",
          "113:     cucumber (8.0.0)",
          "114:       builder (~> 3.2, >= 3.2.4)",
          "115:       cucumber-ci-environment (~> 9.0, >= 9.0.4)",
          "",
          "[Removed Lines]",
          "[None]",
          "",
          "[Added Lines]",
          "114:     csv (3.3.0)",
          "",
          "---------------"
        ],
        "gemfiles/rails_70/Gemfile.lock||gemfiles/rails_70/Gemfile.lock": [
          "File: gemfiles/rails_70/Gemfile.lock -> gemfiles/rails_70/Gemfile.lock",
          "--- Hunk 1 ---",
          "[Context before]",
          "3:   specs:",
          "4:     activeadmin (3.2.0)",
          "5:       arbre (~> 1.2, >= 1.2.1)",
          "6:       formtastic (>= 3.1)",
          "7:       formtastic_i18n (>= 0.4)",
          "8:       inherited_resources (~> 1.7)",
          "",
          "[Removed Lines]",
          "[None]",
          "",
          "[Added Lines]",
          "6:       csv",
          "",
          "---------------",
          "--- Hunk 2 ---",
          "[Context before]",
          "110:       xpath (~> 3.2)",
          "111:     concurrent-ruby (1.2.2)",
          "112:     crass (1.0.6)",
          "113:     cucumber (8.0.0)",
          "114:       builder (~> 3.2, >= 3.2.4)",
          "115:       cucumber-ci-environment (~> 9.0, >= 9.0.4)",
          "",
          "[Removed Lines]",
          "[None]",
          "",
          "[Added Lines]",
          "114:     csv (3.3.0)",
          "",
          "---------------"
        ]
      }
    },
    {
      "candidate_hash": "345e02ec3ca9c9300a5a9177b4a0206a6fc63bed",
      "candidate_info": {
        "commit_hash": "345e02ec3ca9c9300a5a9177b4a0206a6fc63bed",
        "repo": "activeadmin/activeadmin",
        "commit_url": "https://github.com/activeadmin/activeadmin/commit/345e02ec3ca9c9300a5a9177b4a0206a6fc63bed",
        "files": [
          "lib/active_admin/inputs/filters/select_input.rb",
          "spec/unit/filters/filter_form_builder_spec.rb"
        ],
        "message": "Backport to 3-0 stable branch provide detail in DB statement timeout error for filters (#8117) (#8163)\n\nGive more info about db timeout error in filters\n\nWhen a database timeout error occurs querying the values for\na filter, the error message does not give the filter information\n\nCo-authored-by: Vicente Correa <vcorrea@buk.cl>",
        "before_after_code_files": [
          "lib/active_admin/inputs/filters/select_input.rb||lib/active_admin/inputs/filters/select_input.rb",
          "spec/unit/filters/filter_form_builder_spec.rb||spec/unit/filters/filter_form_builder_spec.rb"
        ]
      },
      "candidate_patch_features": {
        "candidate_earlier_than_patch": 1,
        "same_pr": 1,
        "olp_pr_links": [
          "https://github.com/DocBuddy/activeadmin/pull/1"
        ],
        "olp_code_files": {
          "patch": [],
          "candidate": []
        }
      },
      "candidate_diff": {
        "lib/active_admin/inputs/filters/select_input.rb||lib/active_admin/inputs/filters/select_input.rb": [
          "File: lib/active_admin/inputs/filters/select_input.rb -> lib/active_admin/inputs/filters/select_input.rb",
          "--- Hunk 1 ---",
          "[Context before]",
          "43:           else",
          "44:             super",
          "45:           end",
          "46:         end",
          "48:         def pluck_column",
          "",
          "[Removed Lines]",
          "[None]",
          "",
          "[Added Lines]",
          "46:         rescue ActiveRecord::QueryCanceled => error",
          "47:           raise ActiveRecord::QueryCanceled.new \"#{error.message.strip} while querying the values for the ActiveAdmin :#{method} filter\"",
          "",
          "---------------"
        ],
        "spec/unit/filters/filter_form_builder_spec.rb||spec/unit/filters/filter_form_builder_spec.rb": [
          "File: spec/unit/filters/filter_form_builder_spec.rb -> spec/unit/filters/filter_form_builder_spec.rb",
          "--- Hunk 1 ---",
          "[Context before]",
          "173:         }",
          "174:         body",
          "175:       end",
          "176:     end",
          "177:   end",
          "",
          "[Removed Lines]",
          "[None]",
          "",
          "[Added Lines]",
          "177:       context \"and a statement timeout error occurs\" do",
          "178:         let(:body) { filter :title, as: :select, collection: [\"foo\"] }",
          "179:         let(:input_super_class) { Formtastic::Inputs::Base::Collections }",
          "180:         let(:db_timeout_exception) { ActiveRecord::QueryCanceled.new(\"ERROR: canceling statement due to statement timeout\") }",
          "181:         let(:expected_exception_message) { \"ERROR: canceling statement due to statement timeout while querying the values for the ActiveAdmin :title filter\" }",
          "183:         before do",
          "184:           expect_any_instance_of(input_super_class).to receive(:collection).and_raise(db_timeout_exception)",
          "185:         end",
          "187:         it \"should raise a database timeout error with a message indicating which filter was the cause\" do",
          "188:           expect { body }.to raise_error(ActiveRecord::QueryCanceled, expected_exception_message)",
          "189:         end",
          "190:       end",
          "",
          "---------------"
        ]
      }
    },
    {
      "candidate_hash": "276b0d4df8ed156c777e54cbb5549c97d5fef2f5",
      "candidate_info": {
        "commit_hash": "276b0d4df8ed156c777e54cbb5549c97d5fef2f5",
        "repo": "activeadmin/activeadmin",
        "commit_url": "https://github.com/activeadmin/activeadmin/commit/276b0d4df8ed156c777e54cbb5549c97d5fef2f5",
        "files": [
          "lib/active_admin/view_helpers/display_helper.rb",
          "spec/unit/view_helpers/display_helper_spec.rb"
        ],
        "message": "Backport Use attribute_types instead of columns_hash to determine type (#8469)\n\nUse attribute_types instead of columns_hash to determine type\n\nPreviously, virtual attributes of type boolean with value `nil` would\nnot be rendered as status tag. This also improves boolean detection in\nrare cases when an `attribute` declaration overrides the type detected\nin the database.\n\nCo-authored-by: Tilmann Singer <tils@tils.net>",
        "before_after_code_files": [
          "lib/active_admin/view_helpers/display_helper.rb||lib/active_admin/view_helpers/display_helper.rb",
          "spec/unit/view_helpers/display_helper_spec.rb||spec/unit/view_helpers/display_helper_spec.rb"
        ]
      },
      "candidate_patch_features": {
        "candidate_earlier_than_patch": 0,
        "same_pr": 1,
        "olp_pr_links": [
          "https://github.com/DocBuddy/activeadmin/pull/1"
        ],
        "olp_code_files": {
          "patch": [],
          "candidate": []
        }
      },
      "candidate_diff": {
        "lib/active_admin/view_helpers/display_helper.rb||lib/active_admin/view_helpers/display_helper.rb": [
          "File: lib/active_admin/view_helpers/display_helper.rb -> lib/active_admin/view_helpers/display_helper.rb",
          "--- Hunk 1 ---",
          "[Context before]",
          "108:         when TrueClass, FalseClass",
          "109:           true",
          "110:         else",
          "113:           end",
          "114:         end",
          "115:       end",
          "",
          "[Removed Lines]",
          "111:           if resource.class.respond_to? :columns_hash",
          "112:             column = resource.class.columns_hash[attr.to_s] and column.type == :boolean",
          "",
          "[Added Lines]",
          "111:           if resource.class.respond_to? :attribute_types",
          "112:             resource.class.attribute_types[attr.to_s].is_a?(ActiveModel::Type::Boolean)",
          "",
          "---------------"
        ],
        "spec/unit/view_helpers/display_helper_spec.rb||spec/unit/view_helpers/display_helper_spec.rb": [
          "File: spec/unit/view_helpers/display_helper_spec.rb -> spec/unit/view_helpers/display_helper_spec.rb",
          "--- Hunk 1 ---",
          "[Context before]",
          "216:       expect(value.to_s).to eq \"<span class=\\\"status_tag yes\\\">Yes</span>\\n\"",
          "217:     end",
          "219:     it \"calls status_tag for boolean non-database values\" do",
          "220:       post = Post.new",
          "221:       post.define_singleton_method(:true_method) do",
          "",
          "[Removed Lines]",
          "[None]",
          "",
          "[Added Lines]",
          "219:     context \"with non-database boolean attribute\" do",
          "220:       let(:model_class) do",
          "221:         Class.new(Post) do",
          "222:           attribute :a_virtual_attribute, :boolean",
          "223:         end",
          "224:       end",
          "226:       it \"calls status_tag even when attribute is nil\" do",
          "227:         post = model_class.new a_virtual_attribute: nil",
          "229:         value = view.format_attribute post, :a_virtual_attribute",
          "231:         expect(value.to_s).to eq \"<span class=\\\"status_tag unset no\\\">No</span>\\n\"",
          "232:       end",
          "233:     end",
          "",
          "---------------"
        ]
      }
    }
  ]
}