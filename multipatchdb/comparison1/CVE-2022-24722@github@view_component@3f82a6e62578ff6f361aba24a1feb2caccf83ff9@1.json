{
  "cve_id": "CVE-2022-24722",
  "cve_desc": "VIewComponent is a framework for building view components in Ruby on Rails. Versions prior to 2.31.2 and 2.49.1 contain a cross-site scripting vulnerability that has the potential to impact anyone using translations with the view_component gem. Data received via user input and passed as an interpolation argument to the `translate` method is not properly sanitized before display. Versions 2.31.2 and 2.49.1 have been released and fully mitigate the vulnerability. As a workaround, avoid passing user input to the `translate` function, or sanitize the inputs before passing them.",
  "repo": "github/view_component",
  "patch_hash": "3f82a6e62578ff6f361aba24a1feb2caccf83ff9",
  "patch_info": {
    "commit_hash": "3f82a6e62578ff6f361aba24a1feb2caccf83ff9",
    "repo": "github/view_component",
    "commit_url": "https://github.com/github/view_component/commit/3f82a6e62578ff6f361aba24a1feb2caccf83ff9",
    "files": [
      "Gemfile.lock",
      "docs/CHANGELOG.md",
      "lib/view_component/translatable.rb",
      "test/sandbox/app/components/translatable_component.yml",
      "test/view_component/translatable_test.rb"
    ],
    "message": "Fix XSS vulnerability when using HTML-safe translations and interpolation arguments (#1295)",
    "before_after_code_files": [
      "Gemfile.lock||Gemfile.lock",
      "lib/view_component/translatable.rb||lib/view_component/translatable.rb",
      "test/view_component/translatable_test.rb||test/view_component/translatable_test.rb"
    ]
  },
  "patch_diff": {
    "Gemfile.lock||Gemfile.lock": [
      "File: Gemfile.lock -> Gemfile.lock",
      "--- Hunk 1 ---",
      "[Context before]",
      "1: PATH",
      "2:   remote: .",
      "3:   specs:",
      "5:       activesupport (>= 5.0.0, < 8.0)",
      "6:       method_source (~> 1.0)",
      "8: GEM",
      "9:   remote: https://rubygems.org/",
      "10:   specs:",
      "14:       nio4r (~> 2.0)",
      "15:       websocket-driver (>= 0.6.1)",
      "22:       mail (>= 2.7.1)",
      "23:       net-imap",
      "24:       net-pop",
      "25:       net-smtp",
      "31:       mail (~> 2.5, >= 2.5.4)",
      "32:       net-imap",
      "33:       net-pop",
      "34:       net-smtp",
      "35:       rails-dom-testing (~> 2.0)",
      "39:       rack (~> 2.0, >= 2.2.0)",
      "40:       rack-test (>= 0.6.3)",
      "41:       rails-dom-testing (~> 2.0)",
      "42:       rails-html-sanitizer (~> 1.0, >= 1.2.0)",
      "48:       globalid (>= 0.6.0)",
      "49:       nokogiri (>= 1.8.5)",
      "52:       builder (~> 3.1)",
      "53:       erubi (~> 1.4)",
      "54:       rails-dom-testing (~> 2.0)",
      "55:       rails-html-sanitizer (~> 1.1, >= 1.2.0)",
      "58:       globalid (>= 0.3.6)",
      "69:       marcel (~> 1.0)",
      "70:       mini_mime (>= 1.1.0)",
      "72:       concurrent-ruby (~> 1.0, >= 1.0.2)",
      "73:       i18n (>= 1.6, < 2)",
      "74:       minitest (>= 5.1)",
      "",
      "[Removed Lines]",
      "4:     view_component (2.48.0)",
      "11:     actioncable (7.0.1)",
      "12:       actionpack (= 7.0.1)",
      "13:       activesupport (= 7.0.1)",
      "16:     actionmailbox (7.0.1)",
      "17:       actionpack (= 7.0.1)",
      "18:       activejob (= 7.0.1)",
      "19:       activerecord (= 7.0.1)",
      "20:       activestorage (= 7.0.1)",
      "21:       activesupport (= 7.0.1)",
      "26:     actionmailer (7.0.1)",
      "27:       actionpack (= 7.0.1)",
      "28:       actionview (= 7.0.1)",
      "29:       activejob (= 7.0.1)",
      "30:       activesupport (= 7.0.1)",
      "36:     actionpack (7.0.1)",
      "37:       actionview (= 7.0.1)",
      "38:       activesupport (= 7.0.1)",
      "43:     actiontext (7.0.1)",
      "44:       actionpack (= 7.0.1)",
      "45:       activerecord (= 7.0.1)",
      "46:       activestorage (= 7.0.1)",
      "47:       activesupport (= 7.0.1)",
      "50:     actionview (7.0.1)",
      "51:       activesupport (= 7.0.1)",
      "56:     activejob (7.0.1)",
      "57:       activesupport (= 7.0.1)",
      "59:     activemodel (7.0.1)",
      "60:       activesupport (= 7.0.1)",
      "61:     activerecord (7.0.1)",
      "62:       activemodel (= 7.0.1)",
      "63:       activesupport (= 7.0.1)",
      "64:     activestorage (7.0.1)",
      "65:       actionpack (= 7.0.1)",
      "66:       activejob (= 7.0.1)",
      "67:       activerecord (= 7.0.1)",
      "68:       activesupport (= 7.0.1)",
      "71:     activesupport (7.0.1)",
      "",
      "[Added Lines]",
      "4:     view_component (2.49.0)",
      "11:     actioncable (7.0.2)",
      "12:       actionpack (= 7.0.2)",
      "13:       activesupport (= 7.0.2)",
      "16:     actionmailbox (7.0.2)",
      "17:       actionpack (= 7.0.2)",
      "18:       activejob (= 7.0.2)",
      "19:       activerecord (= 7.0.2)",
      "20:       activestorage (= 7.0.2)",
      "21:       activesupport (= 7.0.2)",
      "26:     actionmailer (7.0.2)",
      "27:       actionpack (= 7.0.2)",
      "28:       actionview (= 7.0.2)",
      "29:       activejob (= 7.0.2)",
      "30:       activesupport (= 7.0.2)",
      "36:     actionpack (7.0.2)",
      "37:       actionview (= 7.0.2)",
      "38:       activesupport (= 7.0.2)",
      "43:     actiontext (7.0.2)",
      "44:       actionpack (= 7.0.2)",
      "45:       activerecord (= 7.0.2)",
      "46:       activestorage (= 7.0.2)",
      "47:       activesupport (= 7.0.2)",
      "50:     actionview (7.0.2)",
      "51:       activesupport (= 7.0.2)",
      "56:     activejob (7.0.2)",
      "57:       activesupport (= 7.0.2)",
      "59:     activemodel (7.0.2)",
      "60:       activesupport (= 7.0.2)",
      "61:     activerecord (7.0.2)",
      "62:       activemodel (= 7.0.2)",
      "63:       activesupport (= 7.0.2)",
      "64:     activestorage (7.0.2)",
      "65:       actionpack (= 7.0.2)",
      "66:       activejob (= 7.0.2)",
      "67:       activerecord (= 7.0.2)",
      "68:       activesupport (= 7.0.2)",
      "71:     activesupport (7.0.2)",
      "",
      "---------------",
      "--- Hunk 2 ---",
      "[Context before]",
      "120:       temple (>= 0.8.0)",
      "121:       tilt",
      "122:     html_tokenizer (0.0.7)",
      "124:       concurrent-ruby (~> 1.0)",
      "125:     io-wait (0.2.1)",
      "126:     jbuilder (2.11.5)",
      "127:       actionview (>= 5.0.0)",
      "128:       activesupport (>= 5.0.0)",
      "130:       crass (~> 1.0.2)",
      "131:       nokogiri (>= 1.5.9)",
      "132:     mail (2.7.1)",
      "",
      "[Removed Lines]",
      "123:     i18n (1.8.11)",
      "129:     loofah (2.13.0)",
      "",
      "[Added Lines]",
      "123:     i18n (1.10.0)",
      "129:     loofah (2.14.0)",
      "",
      "---------------",
      "--- Hunk 3 ---",
      "[Context before]",
      "135:     matrix (0.4.2)",
      "136:     method_source (1.0.0)",
      "137:     mini_mime (1.1.2)",
      "139:     minitest (5.6.0)",
      "140:     net-imap (0.2.3)",
      "141:       digest",
      "",
      "[Removed Lines]",
      "138:     mini_portile2 (2.7.1)",
      "",
      "[Added Lines]",
      "138:     mini_portile2 (2.8.0)",
      "",
      "---------------",
      "--- Hunk 4 ---",
      "[Context before]",
      "153:       net-protocol",
      "154:       timeout",
      "155:     nio4r (2.5.8)",
      "158:       racc (~> 1.4)",
      "159:     parallel (1.21.0)",
      "161:       ast (~> 2.4.1)",
      "162:     pry (0.14.1)",
      "163:       coderay (~> 1.1)",
      "",
      "[Removed Lines]",
      "156:     nokogiri (1.13.1)",
      "157:       mini_portile2 (~> 2.7.0)",
      "160:     parser (3.1.0.0)",
      "",
      "[Added Lines]",
      "156:     nokogiri (1.13.3)",
      "157:       mini_portile2 (~> 2.8.0)",
      "160:     parser (3.1.1.0)",
      "",
      "---------------",
      "--- Hunk 5 ---",
      "[Context before]",
      "167:     rack (2.2.3)",
      "168:     rack-test (1.1.0)",
      "169:       rack (>= 1.0, < 3)",
      "182:       bundler (>= 1.15.0)",
      "184:     rails-dom-testing (2.0.3)",
      "185:       activesupport (>= 4.2.0)",
      "186:       nokogiri (>= 1.6)",
      "187:     rails-html-sanitizer (1.4.2)",
      "188:       loofah (~> 2.3)",
      "192:       method_source",
      "193:       rake (>= 12.2)",
      "194:       thor (~> 1.0)",
      "195:       zeitwerk (~> 2.5)",
      "196:     rainbow (3.1.1)",
      "197:     rake (13.0.6)",
      "199:     rexml (3.2.5)",
      "200:     rubocop (1.13.0)",
      "201:       parallel (~> 1.10)",
      "",
      "[Removed Lines]",
      "170:     rails (7.0.1)",
      "171:       actioncable (= 7.0.1)",
      "172:       actionmailbox (= 7.0.1)",
      "173:       actionmailer (= 7.0.1)",
      "174:       actionpack (= 7.0.1)",
      "175:       actiontext (= 7.0.1)",
      "176:       actionview (= 7.0.1)",
      "177:       activejob (= 7.0.1)",
      "178:       activemodel (= 7.0.1)",
      "179:       activerecord (= 7.0.1)",
      "180:       activestorage (= 7.0.1)",
      "181:       activesupport (= 7.0.1)",
      "183:       railties (= 7.0.1)",
      "189:     railties (7.0.1)",
      "190:       actionpack (= 7.0.1)",
      "191:       activesupport (= 7.0.1)",
      "198:     regexp_parser (2.2.0)",
      "",
      "[Added Lines]",
      "170:     rails (7.0.2)",
      "171:       actioncable (= 7.0.2)",
      "172:       actionmailbox (= 7.0.2)",
      "173:       actionmailer (= 7.0.2)",
      "174:       actionpack (= 7.0.2)",
      "175:       actiontext (= 7.0.2)",
      "176:       actionview (= 7.0.2)",
      "177:       activejob (= 7.0.2)",
      "178:       activemodel (= 7.0.2)",
      "179:       activerecord (= 7.0.2)",
      "180:       activestorage (= 7.0.2)",
      "181:       activesupport (= 7.0.2)",
      "183:       railties (= 7.0.2)",
      "189:     railties (7.0.2)",
      "190:       actionpack (= 7.0.2)",
      "191:       activesupport (= 7.0.2)",
      "198:     regexp_parser (2.2.1)",
      "",
      "---------------",
      "--- Hunk 6 ---",
      "[Context before]",
      "206:       rubocop-ast (>= 1.2.0, < 2.0)",
      "207:       ruby-progressbar (~> 1.7)",
      "208:       unicode-display_width (>= 1.4.0, < 3.0)",
      "211:     rubocop-github (0.16.2)",
      "212:       rubocop (<= 1.13.0)",
      "213:       rubocop-performance (<= 1.11.0)",
      "",
      "[Removed Lines]",
      "209:     rubocop-ast (1.15.1)",
      "210:       parser (>= 3.0.1.1)",
      "",
      "[Added Lines]",
      "209:     rubocop-ast (1.16.0)",
      "210:       parser (>= 3.1.1.0)",
      "",
      "---------------",
      "--- Hunk 7 ---",
      "[Context before]",
      "232:       temple (>= 0.7.6, < 0.9)",
      "233:       tilt (>= 2.0.6, < 2.1)",
      "234:     smart_properties (1.17.0)",
      "236:       concurrent-ruby (~> 1.0)",
      "237:       rack (> 1, < 3)",
      "238:     sprockets-rails (3.2.2)",
      "",
      "[Removed Lines]",
      "235:     sprockets (4.0.2)",
      "",
      "[Added Lines]",
      "235:     sprockets (4.0.3)",
      "",
      "---------------",
      "--- Hunk 8 ---",
      "[Context before]",
      "259:       webrick (~> 1.7.0)",
      "260:     yard-activesupport-concern (0.0.1)",
      "261:       yard (>= 0.8)",
      "264: PLATFORMS",
      "265:   ruby",
      "",
      "[Removed Lines]",
      "262:     zeitwerk (2.5.3)",
      "",
      "[Added Lines]",
      "262:     zeitwerk (2.5.4)",
      "",
      "---------------",
      "--- Hunk 9 ---",
      "[Context before]",
      "274:   haml (~> 5)",
      "275:   jbuilder (~> 2)",
      "276:   minitest (= 5.6.0)",
      "280:   pry (~> 0.13)",
      "282:   rake (~> 13.0)",
      "283:   rubocop-github (~> 0.16.1)",
      "284:   simplecov (~> 0.18.0)",
      "",
      "[Removed Lines]",
      "277:   net-imap",
      "278:   net-pop",
      "279:   net-smtp",
      "281:   rails (~> 7.0.0)",
      "",
      "[Added Lines]",
      "278:   rails (= 7.0.2)",
      "",
      "---------------"
    ],
    "lib/view_component/translatable.rb||lib/view_component/translatable.rb": [
      "File: lib/view_component/translatable.rb -> lib/view_component/translatable.rb",
      "--- Hunk 1 ---",
      "[Context before]",
      "1: # frozen_string_literal: true",
      "3: require \"set\"",
      "4: require \"i18n\"",
      "5: require \"action_view/helpers/translation_helper\"",
      "",
      "[Removed Lines]",
      "[None]",
      "",
      "[Added Lines]",
      "3: require \"erb\"",
      "",
      "---------------",
      "--- Hunk 2 ---",
      "[Context before]",
      "70:       key = key&.to_s unless key.is_a?(String)",
      "71:       key = \"#{i18n_scope}#{key}\" if key.start_with?(\".\")",
      "73:       if key.start_with?(i18n_scope + \".\")",
      "74:         translated =",
      "75:           catch(:exception) do",
      "",
      "[Removed Lines]",
      "[None]",
      "",
      "[Added Lines]",
      "74:       if HTML_SAFE_TRANSLATION_KEY.match?(key)",
      "75:         html_escape_translation_options!(options)",
      "76:       end",
      "",
      "---------------",
      "--- Hunk 3 ---",
      "[Context before]",
      "107:         translation.html_safe # rubocop:disable Rails/OutputSafety",
      "108:       end",
      "109:     end",
      "110:   end",
      "111: end",
      "",
      "[Removed Lines]",
      "[None]",
      "",
      "[Added Lines]",
      "116:     private",
      "118:     def html_escape_translation_options!(options)",
      "119:       options.each do |name, value|",
      "120:         unless i18n_option?(name) || (name == :count && value.is_a?(Numeric))",
      "121:           options[name] = ERB::Util.html_escape(value.to_s)",
      "122:         end",
      "123:       end",
      "124:     end",
      "126:     def i18n_option?(name)",
      "127:       (@i18n_option_names ||= I18n::RESERVED_KEYS.to_set).include?(name)",
      "128:     end",
      "",
      "---------------"
    ],
    "test/view_component/translatable_test.rb||test/view_component/translatable_test.rb": [
      "File: test/view_component/translatable_test.rb -> test/view_component/translatable_test.rb",
      "--- Hunk 1 ---",
      "[Context before]",
      "58:     assert_predicate translate(\".hello_html\"), :html_safe?",
      "59:   end",
      "61:   def test_translate_uses_the_helper_when_no_sidecar_file_is_provided",
      "62:     # The cache needs to be kept clean for TranslatableComponent, otherwise it will rely on the",
      "63:     # already created i18n_backend.",
      "",
      "[Removed Lines]",
      "[None]",
      "",
      "[Added Lines]",
      "61:   def test_translate_with_html_suffix_escapes_interpolated_arguments",
      "62:     translation = translate(\".interpolated_html\", horse_count: \"<script type='text/javascript'>alert('foo');</script>\")",
      "63:     assert_equal(",
      "64:       \"There are &lt;script type=&#39;text/javascript&#39;&gt;alert(&#39;foo&#39;);&lt;/script&gt; horses in the \"\\",
      "65:         \"<strong>barn</strong>!\",",
      "66:       translation",
      "67:     )",
      "68:   end",
      "70:   def test_translate_with_html_suffix_does_not_double_escape",
      "71:     translation = translate(\".interpolated_html\", horse_count: \"> 4\")",
      "72:     assert_equal(",
      "73:       \"There are &gt; 4 horses in the <strong>barn</strong>!\",",
      "74:       translation",
      "75:     )",
      "76:   end",
      "",
      "---------------"
    ]
  },
  "candidates": [
    {
      "candidate_hash": "c84df26fd2d3ac97df0098dfbf397b809c1565c9",
      "candidate_info": {
        "commit_hash": "c84df26fd2d3ac97df0098dfbf397b809c1565c9",
        "repo": "github/view_component",
        "commit_url": "https://github.com/github/view_component/commit/c84df26fd2d3ac97df0098dfbf397b809c1565c9",
        "files": [
          ".rubocop.yml",
          "Gemfile.lock",
          "lib/view_component/collection.rb",
          "lib/view_component/slotable.rb",
          "lib/view_component/translatable.rb",
          "test/view_component/view_component_test.rb",
          "view_component.gemspec"
        ],
        "message": "updates rubocop-github and add rails edge lint (#964)\n\nupdates rubocop-github and add rails edge lint",
        "before_after_code_files": [
          "Gemfile.lock||Gemfile.lock",
          "lib/view_component/collection.rb||lib/view_component/collection.rb",
          "lib/view_component/slotable.rb||lib/view_component/slotable.rb",
          "lib/view_component/translatable.rb||lib/view_component/translatable.rb",
          "test/view_component/view_component_test.rb||test/view_component/view_component_test.rb",
          "view_component.gemspec||view_component.gemspec"
        ]
      },
      "candidate_patch_features": {
        "candidate_earlier_than_patch": 1,
        "same_branch_evolution": 1,
        "olp_code_files": {
          "patch": [
            "Gemfile.lock||Gemfile.lock",
            "lib/view_component/translatable.rb||lib/view_component/translatable.rb"
          ],
          "candidate": [
            "Gemfile.lock||Gemfile.lock",
            "lib/view_component/translatable.rb||lib/view_component/translatable.rb"
          ]
        }
      },
      "candidate_diff": {
        "Gemfile.lock||Gemfile.lock": [
          "File: Gemfile.lock -> Gemfile.lock",
          "--- Hunk 1 ---",
          "[Context before]",
          "128:     html_tokenizer (0.0.7)",
          "129:     i18n (1.8.10)",
          "130:       concurrent-ruby (~> 1.0)",
          "132:     jbuilder (2.11.2)",
          "133:       activesupport (>= 5.0.0)",
          "134:     loofah (2.10.0)",
          "",
          "[Removed Lines]",
          "131:     jaro_winkler (1.5.4)",
          "",
          "[Added Lines]",
          "[None]",
          "",
          "---------------",
          "--- Hunk 2 ---",
          "[Context before]",
          "164:     rainbow (3.0.0)",
          "165:     rake (13.0.3)",
          "166:     regexp_parser (1.8.2)",
          "169:       parallel (~> 1.10)",
          "171:       rainbow (>= 2.2.2, < 4.0)",
          "172:       ruby-progressbar (~> 1.7)",
          "179:     ruby-progressbar (1.11.0)",
          "180:     simplecov (0.18.5)",
          "181:       docile (~> 1.1)",
          "",
          "[Removed Lines]",
          "167:     rubocop (0.74.0)",
          "168:       jaro_winkler (~> 1.5.1)",
          "170:       parser (>= 2.6)",
          "173:       unicode-display_width (>= 1.4.0, < 1.7)",
          "174:     rubocop-github (0.13.0)",
          "175:       rubocop (~> 0.70)",
          "176:       rubocop-performance (~> 1.3.0)",
          "177:     rubocop-performance (1.3.0)",
          "178:       rubocop (>= 0.68.0)",
          "",
          "[Added Lines]",
          "166:     rexml (3.2.5)",
          "167:     rubocop (1.6.1)",
          "169:       parser (>= 2.7.1.5)",
          "171:       regexp_parser (>= 1.8, < 3.0)",
          "172:       rexml",
          "173:       rubocop-ast (>= 1.2.0, < 2.0)",
          "175:       unicode-display_width (>= 1.4.0, < 2.0)",
          "176:     rubocop-ast (1.4.1)",
          "177:       parser (>= 2.7.1.5)",
          "178:     rubocop-github (0.16.1)",
          "179:       rubocop (<= 1.6.1)",
          "180:       rubocop-performance (<= 1.7.1)",
          "181:       rubocop-rails (<= 2.7.1)",
          "182:     rubocop-performance (1.7.1)",
          "183:       rubocop (>= 0.82.0)",
          "184:     rubocop-rails (2.7.1)",
          "185:       activesupport (>= 4.2.0)",
          "186:       rack (>= 1.1)",
          "187:       rubocop (>= 0.87.0)",
          "",
          "---------------",
          "--- Hunk 3 ---",
          "[Context before]",
          "218: DEPENDENCIES",
          "219:   benchmark-ips (~> 2.8.2)",
          "220:   better_html (~> 1)",
          "222:   capybara (~> 3)",
          "223:   haml (~> 5)",
          "224:   jbuilder (~> 2)",
          "",
          "[Removed Lines]",
          "221:   bundler (~> 1.14)",
          "",
          "[Added Lines]",
          "230:   bundler (~> 2.2)",
          "",
          "---------------",
          "--- Hunk 4 ---",
          "[Context before]",
          "226:   pry (~> 0.13)",
          "227:   rails!",
          "228:   rake (~> 13.0)",
          "231:   simplecov (~> 0.18.0)",
          "232:   simplecov-console (~> 0.7.2)",
          "233:   slim (~> 4.0)",
          "",
          "[Removed Lines]",
          "229:   rubocop (= 0.74)",
          "230:   rubocop-github (~> 0.13.0)",
          "",
          "[Added Lines]",
          "238:   rubocop-github (~> 0.16.1)",
          "",
          "---------------",
          "--- Hunk 5 ---",
          "[Context before]",
          "235:   yard (~> 0.9.25)",
          "237: BUNDLED WITH",
          "",
          "[Removed Lines]",
          "238:    2.2.17",
          "",
          "[Added Lines]",
          "246:    2.2.20",
          "",
          "---------------"
        ],
        "lib/view_component/collection.rb||lib/view_component/collection.rb": [
          "File: lib/view_component/collection.rb -> lib/view_component/collection.rb",
          "--- Hunk 1 ---",
          "[Context before]",
          "16:         content = component.new(**component_options(item, iterator)).render_in(view_context, &block)",
          "17:         iterator.iterate!",
          "18:         content",
          "20:     end",
          "22:     private",
          "",
          "[Removed Lines]",
          "19:       end.join.html_safe",
          "",
          "[Added Lines]",
          "19:       end.join.html_safe # rubocop:disable Rails/OutputSafety",
          "",
          "---------------"
        ],
        "lib/view_component/slotable.rb||lib/view_component/slotable.rb": [
          "File: lib/view_component/slotable.rb -> lib/view_component/slotable.rb",
          "--- Hunk 1 ---",
          "[Context before]",
          "123:       slot_instance = args.present? ? slot_class.new(**args) : slot_class.new",
          "125:       # Capture block and assign to slot_instance#content",
          "126:       slot_instance.content = view_context.capture(&block).to_s.strip.html_safe if block_given?",
          "128:       if slot[:collection]",
          "",
          "[Removed Lines]",
          "[None]",
          "",
          "[Added Lines]",
          "126:       # rubocop:disable Rails/OutputSafety",
          "",
          "---------------"
        ],
        "lib/view_component/translatable.rb||lib/view_component/translatable.rb": [
          "File: lib/view_component/translatable.rb -> lib/view_component/translatable.rb",
          "--- Hunk 1 ---",
          "[Context before]",
          "80:       end",
          "82:       if HTML_SAFE_TRANSLATION_KEY.match?(key)",
          "84:       end",
          "86:       translated",
          "",
          "[Removed Lines]",
          "83:         translated = translated.html_safe",
          "",
          "[Added Lines]",
          "83:         translated = translated.html_safe # rubocop:disable Rails/OutputSafety",
          "",
          "---------------"
        ],
        "test/view_component/view_component_test.rb||test/view_component/view_component_test.rb": [
          "File: test/view_component/view_component_test.rb -> test/view_component/view_component_test.rb",
          "--- Hunk 1 ---",
          "[Context before]",
          "273:   def test_renders_content_areas_template_can_wrap_render_arguments",
          "274:     render_inline(ContentAreasComponent.new(title: \"Hello!\", footer: \"Bye!\")) do |component|",
          "275:       component.with(:title) { \"<strong>#{component.title}</strong>\".html_safe }",
          "276:       component.with(:body) { \"Have a nice day.\" }",
          "277:     end",
          "",
          "[Removed Lines]",
          "[None]",
          "",
          "[Added Lines]",
          "275:       # rubocop:disable Rails/OutputSafety",
          "",
          "---------------"
        ],
        "view_component.gemspec||view_component.gemspec": [
          "File: view_component.gemspec -> view_component.gemspec",
          "--- Hunk 1 ---",
          "[Context before]",
          "27:   spec.files         = Dir[\"CHANGELOG.md\", \"LICENSE.txt\", \"README.md\", \"app/**/*\", \"lib/**/*\"]",
          "28:   spec.require_paths = [\"lib\"]",
          "32:   spec.add_runtime_dependency     \"activesupport\", [\">= 5.0.0\", \"< 7.0\"]",
          "33:   spec.add_development_dependency \"benchmark-ips\", \"~> 2.8.2\"",
          "",
          "[Removed Lines]",
          "30:   spec.required_ruby_version = \">= 2.3.0\"",
          "",
          "[Added Lines]",
          "30:   spec.required_ruby_version = \">= 2.4.0\"",
          "",
          "---------------",
          "--- Hunk 2 ---",
          "[Context before]",
          "38:   spec.add_development_dependency \"slim\", \"~> 4.0\"",
          "39:   spec.add_development_dependency \"better_html\", \"~> 1\"",
          "40:   spec.add_development_dependency \"jbuilder\", \"~> 2\"",
          "43:   spec.add_development_dependency \"simplecov\", \"~> 0.18.0\"",
          "44:   spec.add_development_dependency \"simplecov-console\", \"~> 0.7.2\"",
          "45:   spec.add_development_dependency \"pry\", \"~> 0.13\"",
          "",
          "[Removed Lines]",
          "41:   spec.add_development_dependency \"rubocop\", \"= 0.74\"",
          "42:   spec.add_development_dependency \"rubocop-github\", \"~> 0.13.0\"",
          "",
          "[Added Lines]",
          "41:   spec.add_development_dependency \"rubocop-github\", \"~> 0.16.1\"",
          "",
          "---------------"
        ]
      }
    },
    {
      "candidate_hash": "e7e600c4daef31a4b3cd76e37e7dca7922e1ad01",
      "candidate_info": {
        "commit_hash": "e7e600c4daef31a4b3cd76e37e7dca7922e1ad01",
        "repo": "github/view_component",
        "commit_url": "https://github.com/github/view_component/commit/e7e600c4daef31a4b3cd76e37e7dca7922e1ad01",
        "files": [
          "Gemfile.lock"
        ],
        "message": "bump gemfile with bundle_update (#1349)",
        "before_after_code_files": [
          "Gemfile.lock||Gemfile.lock"
        ]
      },
      "candidate_patch_features": {
        "candidate_earlier_than_patch": 0,
        "same_branch_evolution": 1,
        "olp_code_files": {
          "patch": [
            "Gemfile.lock||Gemfile.lock"
          ],
          "candidate": [
            "Gemfile.lock||Gemfile.lock"
          ]
        }
      },
      "candidate_diff": {
        "Gemfile.lock||Gemfile.lock": [
          "File: Gemfile.lock -> Gemfile.lock",
          "--- Hunk 1 ---",
          "[Context before]",
          "8: GEM",
          "9:   remote: https://rubygems.org/",
          "10:   specs:",
          "14:       nio4r (~> 2.0)",
          "15:       websocket-driver (>= 0.6.1)",
          "22:       mail (>= 2.7.1)",
          "23:       net-imap",
          "24:       net-pop",
          "25:       net-smtp",
          "31:       mail (~> 2.5, >= 2.5.4)",
          "32:       net-imap",
          "33:       net-pop",
          "34:       net-smtp",
          "35:       rails-dom-testing (~> 2.0)",
          "39:       rack (~> 2.0, >= 2.2.0)",
          "40:       rack-test (>= 0.6.3)",
          "41:       rails-dom-testing (~> 2.0)",
          "42:       rails-html-sanitizer (~> 1.0, >= 1.2.0)",
          "48:       globalid (>= 0.6.0)",
          "49:       nokogiri (>= 1.8.5)",
          "52:       builder (~> 3.1)",
          "53:       erubi (~> 1.4)",
          "54:       rails-dom-testing (~> 2.0)",
          "55:       rails-html-sanitizer (~> 1.1, >= 1.2.0)",
          "58:       globalid (>= 0.3.6)",
          "69:       marcel (~> 1.0)",
          "70:       mini_mime (>= 1.1.0)",
          "72:       concurrent-ruby (~> 1.0, >= 1.0.2)",
          "73:       i18n (>= 1.6, < 2)",
          "74:       minitest (>= 5.1)",
          "",
          "[Removed Lines]",
          "11:     actioncable (7.0.2.3)",
          "12:       actionpack (= 7.0.2.3)",
          "13:       activesupport (= 7.0.2.3)",
          "16:     actionmailbox (7.0.2.3)",
          "17:       actionpack (= 7.0.2.3)",
          "18:       activejob (= 7.0.2.3)",
          "19:       activerecord (= 7.0.2.3)",
          "20:       activestorage (= 7.0.2.3)",
          "21:       activesupport (= 7.0.2.3)",
          "26:     actionmailer (7.0.2.3)",
          "27:       actionpack (= 7.0.2.3)",
          "28:       actionview (= 7.0.2.3)",
          "29:       activejob (= 7.0.2.3)",
          "30:       activesupport (= 7.0.2.3)",
          "36:     actionpack (7.0.2.3)",
          "37:       actionview (= 7.0.2.3)",
          "38:       activesupport (= 7.0.2.3)",
          "43:     actiontext (7.0.2.3)",
          "44:       actionpack (= 7.0.2.3)",
          "45:       activerecord (= 7.0.2.3)",
          "46:       activestorage (= 7.0.2.3)",
          "47:       activesupport (= 7.0.2.3)",
          "50:     actionview (7.0.2.3)",
          "51:       activesupport (= 7.0.2.3)",
          "56:     activejob (7.0.2.3)",
          "57:       activesupport (= 7.0.2.3)",
          "59:     activemodel (7.0.2.3)",
          "60:       activesupport (= 7.0.2.3)",
          "61:     activerecord (7.0.2.3)",
          "62:       activemodel (= 7.0.2.3)",
          "63:       activesupport (= 7.0.2.3)",
          "64:     activestorage (7.0.2.3)",
          "65:       actionpack (= 7.0.2.3)",
          "66:       activejob (= 7.0.2.3)",
          "67:       activerecord (= 7.0.2.3)",
          "68:       activesupport (= 7.0.2.3)",
          "71:     activesupport (7.0.2.3)",
          "",
          "[Added Lines]",
          "11:     actioncable (7.0.3)",
          "12:       actionpack (= 7.0.3)",
          "13:       activesupport (= 7.0.3)",
          "16:     actionmailbox (7.0.3)",
          "17:       actionpack (= 7.0.3)",
          "18:       activejob (= 7.0.3)",
          "19:       activerecord (= 7.0.3)",
          "20:       activestorage (= 7.0.3)",
          "21:       activesupport (= 7.0.3)",
          "26:     actionmailer (7.0.3)",
          "27:       actionpack (= 7.0.3)",
          "28:       actionview (= 7.0.3)",
          "29:       activejob (= 7.0.3)",
          "30:       activesupport (= 7.0.3)",
          "36:     actionpack (7.0.3)",
          "37:       actionview (= 7.0.3)",
          "38:       activesupport (= 7.0.3)",
          "43:     actiontext (7.0.3)",
          "44:       actionpack (= 7.0.3)",
          "45:       activerecord (= 7.0.3)",
          "46:       activestorage (= 7.0.3)",
          "47:       activesupport (= 7.0.3)",
          "50:     actionview (7.0.3)",
          "51:       activesupport (= 7.0.3)",
          "56:     activejob (7.0.3)",
          "57:       activesupport (= 7.0.3)",
          "59:     activemodel (7.0.3)",
          "60:       activesupport (= 7.0.3)",
          "61:     activerecord (7.0.3)",
          "62:       activemodel (= 7.0.3)",
          "63:       activesupport (= 7.0.3)",
          "64:     activestorage (7.0.3)",
          "65:       actionpack (= 7.0.3)",
          "66:       activejob (= 7.0.3)",
          "67:       activerecord (= 7.0.3)",
          "68:       activesupport (= 7.0.3)",
          "71:     activesupport (7.0.3)",
          "",
          "---------------",
          "--- Hunk 2 ---",
          "[Context before]",
          "91:       parser (>= 2.4)",
          "92:       smart_properties",
          "93:     builder (3.2.4)",
          "95:       addressable",
          "96:       matrix",
          "97:       mini_mime (>= 0.1.3)",
          "",
          "[Removed Lines]",
          "94:     capybara (3.36.0)",
          "",
          "[Added Lines]",
          "94:     capybara (3.37.1)",
          "",
          "---------------",
          "--- Hunk 3 ---",
          "[Context before]",
          "125:     jbuilder (2.11.5)",
          "126:       actionview (>= 5.0.0)",
          "127:       activesupport (>= 5.0.0)",
          "129:       crass (~> 1.0.2)",
          "130:       nokogiri (>= 1.5.9)",
          "131:     mail (2.7.1)",
          "",
          "[Removed Lines]",
          "128:     loofah (2.16.0)",
          "",
          "[Added Lines]",
          "128:     loofah (2.17.0)",
          "",
          "---------------",
          "--- Hunk 4 ---",
          "[Context before]",
          "151:       net-protocol",
          "152:       timeout",
          "153:     nio4r (2.5.8)",
          "155:       mini_portile2 (~> 2.8.0)",
          "156:       racc (~> 1.4)",
          "157:     parallel (1.22.1)",
          "",
          "[Removed Lines]",
          "154:     nokogiri (1.13.4)",
          "",
          "[Added Lines]",
          "154:     nokogiri (1.13.6)",
          "",
          "---------------",
          "--- Hunk 5 ---",
          "[Context before]",
          "165:     rack (2.2.3)",
          "166:     rack-test (1.1.0)",
          "167:       rack (>= 1.0, < 3)",
          "180:       bundler (>= 1.15.0)",
          "182:     rails-dom-testing (2.0.3)",
          "183:       activesupport (>= 4.2.0)",
          "184:       nokogiri (>= 1.6)",
          "185:     rails-html-sanitizer (1.4.2)",
          "186:       loofah (~> 2.3)",
          "190:       method_source",
          "191:       rake (>= 12.2)",
          "192:       thor (~> 1.0)",
          "193:       zeitwerk (~> 2.5)",
          "194:     rainbow (3.1.1)",
          "195:     rake (13.0.6)",
          "197:     rexml (3.2.5)",
          "198:     rubocop (1.13.0)",
          "199:       parallel (~> 1.10)",
          "",
          "[Removed Lines]",
          "168:     rails (7.0.2.3)",
          "169:       actioncable (= 7.0.2.3)",
          "170:       actionmailbox (= 7.0.2.3)",
          "171:       actionmailer (= 7.0.2.3)",
          "172:       actionpack (= 7.0.2.3)",
          "173:       actiontext (= 7.0.2.3)",
          "174:       actionview (= 7.0.2.3)",
          "175:       activejob (= 7.0.2.3)",
          "176:       activemodel (= 7.0.2.3)",
          "177:       activerecord (= 7.0.2.3)",
          "178:       activestorage (= 7.0.2.3)",
          "179:       activesupport (= 7.0.2.3)",
          "181:       railties (= 7.0.2.3)",
          "187:     railties (7.0.2.3)",
          "188:       actionpack (= 7.0.2.3)",
          "189:       activesupport (= 7.0.2.3)",
          "196:     regexp_parser (2.3.0)",
          "",
          "[Added Lines]",
          "168:     rails (7.0.3)",
          "169:       actioncable (= 7.0.3)",
          "170:       actionmailbox (= 7.0.3)",
          "171:       actionmailer (= 7.0.3)",
          "172:       actionpack (= 7.0.3)",
          "173:       actiontext (= 7.0.3)",
          "174:       actionview (= 7.0.3)",
          "175:       activejob (= 7.0.3)",
          "176:       activemodel (= 7.0.3)",
          "177:       activerecord (= 7.0.3)",
          "178:       activestorage (= 7.0.3)",
          "179:       activesupport (= 7.0.3)",
          "181:       railties (= 7.0.3)",
          "187:     railties (7.0.3)",
          "188:       actionpack (= 7.0.3)",
          "189:       activesupport (= 7.0.3)",
          "196:     regexp_parser (2.4.0)",
          "",
          "---------------",
          "--- Hunk 6 ---",
          "[Context before]",
          "237:       actionpack (>= 4.0)",
          "238:       activesupport (>= 4.0)",
          "239:       sprockets (>= 3.0.0)",
          "241:     temple (0.8.2)",
          "242:     terminal-table (3.0.2)",
          "243:       unicode-display_width (>= 1.1.1, < 3)",
          "",
          "[Removed Lines]",
          "240:     strscan (3.0.1)",
          "",
          "[Added Lines]",
          "240:     strscan (3.0.2)",
          "",
          "---------------",
          "--- Hunk 7 ---",
          "[Context before]",
          "272:   haml (~> 5)",
          "273:   jbuilder (~> 2)",
          "274:   minitest (= 5.6.0)",
          "275:   pry (~> 0.13)",
          "276:   rails (~> 7.0.0)",
          "277:   rake (~> 13.0)",
          "",
          "[Removed Lines]",
          "[None]",
          "",
          "[Added Lines]",
          "275:   net-imap",
          "276:   net-pop",
          "277:   net-smtp",
          "",
          "---------------"
        ]
      }
    },
    {
      "candidate_hash": "2354e1917ca7b8e45e6afad603f3e0be8755767c",
      "candidate_info": {
        "commit_hash": "2354e1917ca7b8e45e6afad603f3e0be8755767c",
        "repo": "github/view_component",
        "commit_url": "https://github.com/github/view_component/commit/2354e1917ca7b8e45e6afad603f3e0be8755767c",
        "files": [
          ".github/workflows/ci.yml",
          "Gemfile",
          "Gemfile.lock",
          "docs/CHANGELOG.md"
        ],
        "message": "Update CI config to latest Rails 7.0 version (#1271)\n\n* Update CI config to latest Rails 7.0 version\n\n* Add Changelog entry\n\n* Fix Gemfile.lock to stick with Rails 7.0\n\n* use 7.0.0 in local dev, not main\n\n* bad merge\n\nCo-authored-by: Joel Hawksley <joel@hawksley.org>",
        "before_after_code_files": [
          "Gemfile.lock||Gemfile.lock"
        ]
      },
      "candidate_patch_features": {
        "candidate_earlier_than_patch": 0,
        "same_branch_evolution": 1,
        "olp_code_files": {
          "patch": [
            "Gemfile.lock||Gemfile.lock"
          ],
          "candidate": [
            "Gemfile.lock||Gemfile.lock"
          ]
        }
      },
      "candidate_diff": {
        "Gemfile.lock||Gemfile.lock": [
          "File: Gemfile.lock -> Gemfile.lock",
          "--- Hunk 1 ---",
          "[Context before]",
          "101: GEM",
          "102:   remote: https://rubygems.org/",
          "103:   specs:",
          "104:     addressable (2.8.0)",
          "105:       public_suffix (>= 2.0.2, < 5.0)",
          "106:     ansi (1.5.0)",
          "",
          "[Removed Lines]",
          "[None]",
          "",
          "[Added Lines]",
          "104:     actioncable (7.0.2.3)",
          "105:       actionpack (= 7.0.2.3)",
          "106:       activesupport (= 7.0.2.3)",
          "107:       nio4r (~> 2.0)",
          "108:       websocket-driver (>= 0.6.1)",
          "109:     actionmailbox (7.0.2.3)",
          "110:       actionpack (= 7.0.2.3)",
          "111:       activejob (= 7.0.2.3)",
          "112:       activerecord (= 7.0.2.3)",
          "113:       activestorage (= 7.0.2.3)",
          "114:       activesupport (= 7.0.2.3)",
          "115:       mail (>= 2.7.1)",
          "116:       net-imap",
          "117:       net-pop",
          "118:       net-smtp",
          "119:     actionmailer (7.0.2.3)",
          "120:       actionpack (= 7.0.2.3)",
          "121:       actionview (= 7.0.2.3)",
          "122:       activejob (= 7.0.2.3)",
          "123:       activesupport (= 7.0.2.3)",
          "124:       mail (~> 2.5, >= 2.5.4)",
          "125:       net-imap",
          "126:       net-pop",
          "127:       net-smtp",
          "128:       rails-dom-testing (~> 2.0)",
          "129:     actionpack (7.0.2.3)",
          "130:       actionview (= 7.0.2.3)",
          "131:       activesupport (= 7.0.2.3)",
          "132:       rack (~> 2.0, >= 2.2.0)",
          "133:       rack-test (>= 0.6.3)",
          "134:       rails-dom-testing (~> 2.0)",
          "135:       rails-html-sanitizer (~> 1.0, >= 1.2.0)",
          "136:     actiontext (7.0.2.3)",
          "137:       actionpack (= 7.0.2.3)",
          "138:       activerecord (= 7.0.2.3)",
          "139:       activestorage (= 7.0.2.3)",
          "140:       activesupport (= 7.0.2.3)",
          "141:       globalid (>= 0.6.0)",
          "142:       nokogiri (>= 1.8.5)",
          "143:     actionview (7.0.2.3)",
          "144:       activesupport (= 7.0.2.3)",
          "145:       builder (~> 3.1)",
          "146:       erubi (~> 1.4)",
          "147:       rails-dom-testing (~> 2.0)",
          "148:       rails-html-sanitizer (~> 1.1, >= 1.2.0)",
          "149:     activejob (7.0.2.3)",
          "150:       activesupport (= 7.0.2.3)",
          "151:       globalid (>= 0.3.6)",
          "152:     activemodel (7.0.2.3)",
          "153:       activesupport (= 7.0.2.3)",
          "154:     activerecord (7.0.2.3)",
          "155:       activemodel (= 7.0.2.3)",
          "156:       activesupport (= 7.0.2.3)",
          "157:     activestorage (7.0.2.3)",
          "158:       actionpack (= 7.0.2.3)",
          "159:       activejob (= 7.0.2.3)",
          "160:       activerecord (= 7.0.2.3)",
          "161:       activesupport (= 7.0.2.3)",
          "162:       marcel (~> 1.0)",
          "163:       mini_mime (>= 1.1.0)",
          "164:     activesupport (7.0.2.3)",
          "165:       concurrent-ruby (~> 1.0, >= 1.0.2)",
          "166:       i18n (>= 1.6, < 2)",
          "167:       minitest (>= 5.1)",
          "168:       tzinfo (~> 2.0)",
          "",
          "---------------",
          "--- Hunk 2 ---",
          "[Context before]",
          "150:     html_tokenizer (0.0.7)",
          "151:     i18n (1.10.0)",
          "152:       concurrent-ruby (~> 1.0)",
          "154:     jbuilder (2.11.5)",
          "155:       actionview (>= 5.0.0)",
          "156:       activesupport (>= 5.0.0)",
          "158:       crass (~> 1.0.2)",
          "159:       nokogiri (>= 1.5.9)",
          "160:     mail (2.7.1)",
          "",
          "[Removed Lines]",
          "153:     io-wait (0.2.1)",
          "157:     loofah (2.15.0)",
          "",
          "[Added Lines]",
          "221:     loofah (2.16.0)",
          "",
          "---------------",
          "--- Hunk 3 ---",
          "[Context before]",
          "173:       digest",
          "174:       net-protocol",
          "175:       timeout",
          "178:       timeout",
          "179:     net-smtp (0.3.1)",
          "180:       digest",
          "",
          "[Removed Lines]",
          "176:     net-protocol (0.1.2)",
          "177:       io-wait",
          "",
          "[Added Lines]",
          "240:     net-protocol (0.1.3)",
          "",
          "---------------",
          "--- Hunk 4 ---",
          "[Context before]",
          "184:     nokogiri (1.13.4)",
          "185:       mini_portile2 (~> 2.8.0)",
          "186:       racc (~> 1.4)",
          "189:       ast (~> 2.4.1)",
          "190:     pry (0.14.1)",
          "191:       coderay (~> 1.1)",
          "192:       method_source (~> 1.0)",
          "194:     racc (1.6.0)",
          "195:     rack (2.2.3)",
          "196:     rack-test (1.1.0)",
          "197:       rack (>= 1.0, < 3)",
          "198:     rails-dom-testing (2.0.3)",
          "199:       activesupport (>= 4.2.0)",
          "200:       nokogiri (>= 1.6)",
          "201:     rails-html-sanitizer (1.4.2)",
          "202:       loofah (~> 2.3)",
          "203:     rainbow (3.1.1)",
          "204:     rake (13.0.6)",
          "206:     rexml (3.2.5)",
          "207:     rubocop (1.13.0)",
          "208:       parallel (~> 1.10)",
          "",
          "[Removed Lines]",
          "187:     parallel (1.22.0)",
          "188:     parser (3.1.1.0)",
          "193:     public_suffix (4.0.6)",
          "205:     regexp_parser (2.2.1)",
          "",
          "[Added Lines]",
          "250:     parallel (1.22.1)",
          "251:     parser (3.1.2.0)",
          "256:     public_suffix (4.0.7)",
          "261:     rails (7.0.2.3)",
          "262:       actioncable (= 7.0.2.3)",
          "263:       actionmailbox (= 7.0.2.3)",
          "264:       actionmailer (= 7.0.2.3)",
          "265:       actionpack (= 7.0.2.3)",
          "266:       actiontext (= 7.0.2.3)",
          "267:       actionview (= 7.0.2.3)",
          "268:       activejob (= 7.0.2.3)",
          "269:       activemodel (= 7.0.2.3)",
          "270:       activerecord (= 7.0.2.3)",
          "271:       activestorage (= 7.0.2.3)",
          "272:       activesupport (= 7.0.2.3)",
          "273:       bundler (>= 1.15.0)",
          "274:       railties (= 7.0.2.3)",
          "280:     railties (7.0.2.3)",
          "281:       actionpack (= 7.0.2.3)",
          "282:       activesupport (= 7.0.2.3)",
          "283:       method_source",
          "284:       rake (>= 12.2)",
          "285:       thor (~> 1.0)",
          "286:       zeitwerk (~> 2.5)",
          "289:     regexp_parser (2.3.0)",
          "",
          "---------------",
          "--- Hunk 5 ---",
          "[Context before]",
          "213:       rubocop-ast (>= 1.2.0, < 2.0)",
          "214:       ruby-progressbar (~> 1.7)",
          "215:       unicode-display_width (>= 1.4.0, < 3.0)",
          "217:       parser (>= 3.1.1.0)",
          "218:     rubocop-github (0.16.2)",
          "219:       rubocop (<= 1.13.0)",
          "",
          "[Removed Lines]",
          "216:     rubocop-ast (1.16.0)",
          "",
          "[Added Lines]",
          "300:     rubocop-ast (1.17.0)",
          "",
          "---------------"
        ]
      }
    },
    {
      "candidate_hash": "da4c7d3dcc9b61a66390819b18fc5df2f652db27",
      "candidate_info": {
        "commit_hash": "da4c7d3dcc9b61a66390819b18fc5df2f652db27",
        "repo": "github/view_component",
        "commit_url": "https://github.com/github/view_component/commit/da4c7d3dcc9b61a66390819b18fc5df2f652db27",
        "files": [
          "Gemfile.lock"
        ],
        "message": "Bump nokogiri from 1.13.3 to 1.13.4 (#1329)\n\nBumps [nokogiri](https://github.com/sparklemotion/nokogiri) from 1.13.3 to 1.13.4.\n- [Release notes](https://github.com/sparklemotion/nokogiri/releases)\n- [Changelog](https://github.com/sparklemotion/nokogiri/blob/v1.13.4/CHANGELOG.md)\n- [Commits](https://github.com/sparklemotion/nokogiri/compare/v1.13.3...v1.13.4)\n\n---\nupdated-dependencies:\n- dependency-name: nokogiri\n  dependency-type: indirect\n...\n\nSigned-off-by: dependabot[bot] <support@github.com>\n\nCo-authored-by: dependabot[bot] <49699333+dependabot[bot]@users.noreply.github.com>\nCo-authored-by: Joel Hawksley <joel@hawksley.org>",
        "before_after_code_files": [
          "Gemfile.lock||Gemfile.lock"
        ]
      },
      "candidate_patch_features": {
        "candidate_earlier_than_patch": 0,
        "same_branch_evolution": 1,
        "olp_code_files": {
          "patch": [
            "Gemfile.lock||Gemfile.lock"
          ],
          "candidate": [
            "Gemfile.lock||Gemfile.lock"
          ]
        }
      },
      "candidate_diff": {
        "Gemfile.lock||Gemfile.lock": [
          "File: Gemfile.lock -> Gemfile.lock",
          "--- Hunk 1 ---",
          "[Context before]",
          "181:       net-protocol",
          "182:       timeout",
          "183:     nio4r (2.5.8)",
          "185:       mini_portile2 (~> 2.8.0)",
          "186:       racc (~> 1.4)",
          "187:     parallel (1.22.0)",
          "",
          "[Removed Lines]",
          "184:     nokogiri (1.13.3)",
          "",
          "[Added Lines]",
          "184:     nokogiri (1.13.4)",
          "",
          "---------------"
        ]
      }
    },
    {
      "candidate_hash": "882c3f38ee57bce3d67a27827cb1238480956e9d",
      "candidate_info": {
        "commit_hash": "882c3f38ee57bce3d67a27827cb1238480956e9d",
        "repo": "github/view_component",
        "commit_url": "https://github.com/github/view_component/commit/882c3f38ee57bce3d67a27827cb1238480956e9d",
        "files": [
          "Gemfile.lock",
          "test/app/components/display_inline_component.html.erb",
          "test/view_component/integration_test.rb"
        ],
        "message": "Update tests for trailing newlines (#958)\n\nUpdate tests with trailing newline solution\n\nThe tests introduced in #920 were made to pass by removing the trailing newline. These were supposed to check that trailing newlines in template files would not become part of the output. Now that the source issue has reached a conclusion thanks to an update to ActionView::Template::Handlers::ERB, the implementation for the test can be updated to reflect this. It also makes clear that we're dependent on that class for this change.",
        "before_after_code_files": [
          "Gemfile.lock||Gemfile.lock",
          "test/app/components/display_inline_component.html.erb||test/app/components/display_inline_component.html.erb",
          "test/view_component/integration_test.rb||test/view_component/integration_test.rb"
        ]
      },
      "candidate_patch_features": {
        "candidate_earlier_than_patch": 1,
        "same_branch_evolution": 1,
        "olp_code_files": {
          "patch": [
            "Gemfile.lock||Gemfile.lock"
          ],
          "candidate": [
            "Gemfile.lock||Gemfile.lock"
          ]
        }
      },
      "candidate_diff": {
        "Gemfile.lock||Gemfile.lock": [
          "File: Gemfile.lock -> Gemfile.lock",
          "--- Hunk 1 ---",
          "[Context before]",
          "1: GIT",
          "2:   remote: https://github.com/rails/rails",
          "4:   ref: main",
          "5:   specs:",
          "6:     actioncable (7.0.0.alpha)",
          "",
          "[Removed Lines]",
          "3:   revision: 513cf351d4fbafe675eb0309930647afbcb92074",
          "",
          "[Added Lines]",
          "3:   revision: 9a2c639a0c24c12490a8f9ef324395a36949e15c",
          "",
          "---------------",
          "--- Hunk 2 ---",
          "[Context before]",
          "25:     actionpack (7.0.0.alpha)",
          "26:       actionview (= 7.0.0.alpha)",
          "27:       activesupport (= 7.0.0.alpha)",
          "29:       rack-test (>= 0.6.3)",
          "30:       rails-dom-testing (~> 2.0)",
          "31:       rails-html-sanitizer (~> 1.0, >= 1.2.0)",
          "",
          "[Removed Lines]",
          "28:       rack (~> 2.0, >= 2.0.9)",
          "",
          "[Added Lines]",
          "28:       rack (~> 2.0, >= 2.2.0)",
          "",
          "---------------",
          "--- Hunk 3 ---",
          "[Context before]",
          "55:       activerecord (= 7.0.0.alpha)",
          "56:       activesupport (= 7.0.0.alpha)",
          "57:       marcel (~> 1.0.0)",
          "59:     activesupport (7.0.0.alpha)",
          "60:       concurrent-ruby (~> 1.0, >= 1.0.2)",
          "61:       i18n (>= 1.6, < 2)",
          "",
          "[Removed Lines]",
          "58:       mini_mime (~> 1.0.2)",
          "",
          "[Added Lines]",
          "58:       mini_mime (>= 1.1.0)",
          "",
          "---------------",
          "--- Hunk 4 ---",
          "[Context before]",
          "116:       regexp_parser (~> 1.5)",
          "117:       xpath (~> 3.2)",
          "118:     coderay (1.1.3)",
          "120:     crass (1.0.6)",
          "121:     docile (1.3.4)",
          "122:     erubi (1.10.0)",
          "",
          "[Removed Lines]",
          "119:     concurrent-ruby (1.1.8)",
          "",
          "[Added Lines]",
          "119:     concurrent-ruby (1.1.9)",
          "",
          "---------------",
          "--- Hunk 5 ---",
          "[Context before]",
          "126:       temple (>= 0.8.0)",
          "127:       tilt",
          "128:     html_tokenizer (0.0.7)",
          "130:       concurrent-ruby (~> 1.0)",
          "131:     jaro_winkler (1.5.4)",
          "132:     jbuilder (2.11.2)",
          "133:       activesupport (>= 5.0.0)",
          "135:       crass (~> 1.0.2)",
          "136:       nokogiri (>= 1.5.9)",
          "137:     mail (2.7.1)",
          "138:       mini_mime (>= 0.1.1)",
          "140:     method_source (1.0.0)",
          "143:     minitest (5.6.0)",
          "144:     nio4r (2.5.7)",
          "146:       mini_portile2 (~> 2.5.0)",
          "147:       racc (~> 1.4)",
          "148:     parallel (1.20.1)",
          "",
          "[Removed Lines]",
          "129:     i18n (1.8.9)",
          "134:     loofah (2.9.0)",
          "139:     marcel (1.0.0)",
          "141:     mini_mime (1.0.3)",
          "142:     mini_portile2 (2.5.1)",
          "145:     nokogiri (1.11.5)",
          "",
          "[Added Lines]",
          "129:     i18n (1.8.10)",
          "134:     loofah (2.10.0)",
          "139:     marcel (1.0.1)",
          "141:     mini_mime (1.1.0)",
          "142:     mini_portile2 (2.5.3)",
          "145:     nokogiri (1.11.7)",
          "",
          "---------------",
          "--- Hunk 6 ---",
          "[Context before]",
          "204:     tzinfo (2.0.4)",
          "205:       concurrent-ruby (~> 1.0)",
          "206:     unicode-display_width (1.6.1)",
          "208:       websocket-extensions (>= 0.1.0)",
          "209:     websocket-extensions (0.1.5)",
          "210:     xpath (3.2.0)",
          "",
          "[Removed Lines]",
          "207:     websocket-driver (0.7.3)",
          "",
          "[Added Lines]",
          "207:     websocket-driver (0.7.4)",
          "",
          "---------------"
        ],
        "test/app/components/display_inline_component.html.erb||test/app/components/display_inline_component.html.erb": [
          "File: test/app/components/display_inline_component.html.erb -> test/app/components/display_inline_component.html.erb",
          "--- Hunk 1 ---",
          "[Context before]",
          "[No context available]",
          "",
          "[Removed Lines]",
          "1: <span>Hello, world!</span>",
          "",
          "[Added Lines]",
          "[None]",
          "",
          "---------------"
        ],
        "test/view_component/integration_test.rb||test/view_component/integration_test.rb": [
          "File: test/view_component/integration_test.rb -> test/view_component/integration_test.rb",
          "--- Hunk 1 ---",
          "[Context before]",
          "437:   end",
          "439:   def test_does_not_render_additional_newline",
          "440:     without_template_annotations do",
          "441:       get \"/rails/view_components/display_inline_component/with_newline\"",
          "442:       assert_includes response.body, \"<span>Hello, world!</span><span>Hello, world!</span>\"",
          "443:     end",
          "444:   end",
          "446:   def test_renders_the_preview_example_with_its_own_template_and_a_layout",
          "",
          "[Removed Lines]",
          "[None]",
          "",
          "[Added Lines]",
          "440:     skip unless Rails::VERSION::MAJOR >= 7",
          "442:       ActionView::Template::Handlers::ERB.strip_trailing_newlines = true",
          "446:   ensure",
          "447:     ActionView::Template::Handlers::ERB.strip_trailing_newlines = false if Rails::VERSION::MAJOR >= 7",
          "",
          "---------------"
        ]
      }
    }
  ]
}