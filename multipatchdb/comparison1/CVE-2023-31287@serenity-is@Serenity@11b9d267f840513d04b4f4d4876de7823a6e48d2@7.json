{
  "cve_id": "CVE-2023-31287",
  "cve_desc": "An issue was discovered in Serenity Serene (and StartSharp) before 6.7.0. Password reset links are sent by email. A link contains a token that is used to reset the password. This token remains valid even after the password reset and can be used a second time to change the password of the corresponding user. The token expires only 3 hours after issuance and is sent as a query parameter when resetting. An attacker with access to the browser history can thus use the token again to change the password in order to take over the account.",
  "repo": "serenity-is/Serenity",
  "patch_hash": "11b9d267f840513d04b4f4d4876de7823a6e48d2",
  "patch_info": {
    "commit_hash": "11b9d267f840513d04b4f4d4876de7823a6e48d2",
    "repo": "serenity-is/Serenity",
    "commit_url": "https://github.com/serenity-is/Serenity/commit/11b9d267f840513d04b4f4d4876de7823a6e48d2",
    "files": [
      "CHANGELOG.md",
      "build/Package.Build.props"
    ],
    "message": ":up: 6.7.0",
    "before_after_code_files": [
      "build/Package.Build.props||build/Package.Build.props"
    ]
  },
  "patch_diff": {
    "build/Package.Build.props||build/Package.Build.props": [
      "File: build/Package.Build.props -> build/Package.Build.props",
      "--- Hunk 1 ---",
      "[Context before]",
      "1: <Project>",
      "2:   <PropertyGroup>",
      "4:   </PropertyGroup>",
      "5: </Project>",
      "",
      "[Removed Lines]",
      "3:     <Version>6.6.6</Version>",
      "",
      "[Added Lines]",
      "3:     <Version>6.7.0</Version>",
      "",
      "---------------"
    ]
  },
  "candidates": [
    {
      "candidate_hash": "8f964d0892074ec151fc13e4228eaa065a1409b8",
      "candidate_info": {
        "commit_hash": "8f964d0892074ec151fc13e4228eaa065a1409b8",
        "repo": "serenity-is/Serenity",
        "commit_url": "https://github.com/serenity-is/Serenity/commit/8f964d0892074ec151fc13e4228eaa065a1409b8",
        "files": [
          "CHANGELOG.md",
          "build/Package.Build.props",
          "pnpm-lock.yaml",
          "src/Serenity.Assets/wwwroot/Scripts/SlickGrid/layouts/slick.frozenlayout.js",
          "src/Serenity.Assets/wwwroot/Scripts/SlickGrid/slick.grid.js",
          "src/Serenity.Assets/wwwroot/Scripts/SlickGrid/slick.grid.min.js",
          "src/Serenity.Assets/wwwroot/Scripts/SlickGrid/slick.groupitemmetadataprovider.js",
          "src/Serenity.Assets/wwwroot/Scripts/SlickGrid/slick.groupitemmetadataprovider.min.js",
          "src/Serenity.Scripts/corelib/package.json",
          "src/Serenity.Scripts/wwwroot/Serenity.CoreLib.d.ts"
        ],
        "message": ":up: 6.4.6",
        "before_after_code_files": [
          "build/Package.Build.props||build/Package.Build.props",
          "src/Serenity.Assets/wwwroot/Scripts/SlickGrid/layouts/slick.frozenlayout.js||src/Serenity.Assets/wwwroot/Scripts/SlickGrid/layouts/slick.frozenlayout.js",
          "src/Serenity.Assets/wwwroot/Scripts/SlickGrid/slick.grid.js||src/Serenity.Assets/wwwroot/Scripts/SlickGrid/slick.grid.js",
          "src/Serenity.Assets/wwwroot/Scripts/SlickGrid/slick.grid.min.js||src/Serenity.Assets/wwwroot/Scripts/SlickGrid/slick.grid.min.js",
          "src/Serenity.Assets/wwwroot/Scripts/SlickGrid/slick.groupitemmetadataprovider.js||src/Serenity.Assets/wwwroot/Scripts/SlickGrid/slick.groupitemmetadataprovider.js",
          "src/Serenity.Assets/wwwroot/Scripts/SlickGrid/slick.groupitemmetadataprovider.min.js||src/Serenity.Assets/wwwroot/Scripts/SlickGrid/slick.groupitemmetadataprovider.min.js",
          "src/Serenity.Scripts/wwwroot/Serenity.CoreLib.d.ts||src/Serenity.Scripts/wwwroot/Serenity.CoreLib.d.ts"
        ]
      },
      "candidate_patch_features": {
        "candidate_earlier_than_patch": 1,
        "same_branch_evolution": 1,
        "olp_code_files": {
          "patch": [
            "build/Package.Build.props||build/Package.Build.props"
          ],
          "candidate": [
            "build/Package.Build.props||build/Package.Build.props"
          ]
        }
      },
      "candidate_diff": {
        "build/Package.Build.props||build/Package.Build.props": [
          "File: build/Package.Build.props -> build/Package.Build.props",
          "--- Hunk 1 ---",
          "[Context before]",
          "1: <Project>",
          "2:   <PropertyGroup>",
          "4:   </PropertyGroup>",
          "5: </Project>",
          "",
          "[Removed Lines]",
          "3:     <Version>6.4.4</Version>",
          "",
          "[Added Lines]",
          "3:     <Version>6.4.6</Version>",
          "",
          "---------------"
        ],
        "src/Serenity.Assets/wwwroot/Scripts/SlickGrid/layouts/slick.frozenlayout.js||src/Serenity.Assets/wwwroot/Scripts/SlickGrid/layouts/slick.frozenlayout.js": [
          "File: src/Serenity.Assets/wwwroot/Scripts/SlickGrid/layouts/slick.frozenlayout.js -> src/Serenity.Assets/wwwroot/Scripts/SlickGrid/layouts/slick.frozenlayout.js",
          "--- Hunk 1 ---",
          "[Context before]",
          "157:     function getFooterRowCols() {",
          "158:       return [footerRowColsL, footerRowColsR];",
          "159:     }",
          "161:       if (row == null && cell == null)",
          "162:         return canvasTopL;",
          "163:       var rightSide = cell >= frozenCols;",
          "",
          "[Removed Lines]",
          "160:     const getCanvasNodeFor = (row, cell) => {",
          "",
          "[Added Lines]",
          "160:     const getCanvasNodeFor = (cell, row) => {",
          "",
          "---------------",
          "--- Hunk 2 ---",
          "[Context before]",
          "177:     function getScrollContainerY() {",
          "178:       return scrollContainerY;",
          "179:     }",
          "181:       if (row == null && cell == null)",
          "182:         return canvasTopL;",
          "183:       var rightSide = cell >= frozenCols;",
          "",
          "[Removed Lines]",
          "180:     function getViewportNodeFor(row, cell) {",
          "",
          "[Added Lines]",
          "180:     function getViewportNodeFor(cell, row) {",
          "",
          "---------------"
        ],
        "src/Serenity.Assets/wwwroot/Scripts/SlickGrid/slick.grid.js||src/Serenity.Assets/wwwroot/Scripts/SlickGrid/slick.grid.js": [
          "File: src/Serenity.Assets/wwwroot/Scripts/SlickGrid/slick.grid.js -> src/Serenity.Assets/wwwroot/Scripts/SlickGrid/slick.grid.js",
          "--- Hunk 1 ---",
          "[Context before]",
          "557:     box.bottom = box.top + box.height;",
          "558:     box.right = box.left + box.width;",
          "559:     var offsetParent = elem.offsetParent;",
          "561:       if (box.visible && elem.scrollHeight != elem.offsetHeight && getComputedStyle(elem).overflowY !== \"visible\") {",
          "562:         box.visible = box.bottom > elem.scrollTop && box.top < elem.scrollTop + elem.clientHeight;",
          "563:       }",
          "",
          "[Removed Lines]",
          "560:     while ((elem = elem.parentNode) != document.body) {",
          "",
          "[Added Lines]",
          "560:     while ((elem = elem.parentNode) != document.body && elem != null) {",
          "",
          "---------------",
          "--- Hunk 2 ---",
          "[Context before]",
          "655:   function simpleArrayEquals(arr1, arr2) {",
          "656:     if (!Array.isArray(arr1) || !Array.isArray(arr2) || arr1.length !== arr2.length)",
          "657:       return false;",
          "660:     for (var i = 0; i < arr1.length; i++) {",
          "661:       if (arr1[i] !== arr2[i])",
          "662:         return false;",
          "",
          "[Removed Lines]",
          "658:     arr1.sort();",
          "659:     arr2.sort();",
          "",
          "[Added Lines]",
          "658:     arr1 = arr1.slice().sort();",
          "659:     arr2 = arr2.slice().sort();",
          "",
          "---------------",
          "--- Hunk 3 ---",
          "[Context before]",
          "823:     var p = [\"border-top-width\", \"border-bottom-width\", \"padding-top\", \"padding-bottom\"];",
          "824:     var delta = 0;",
          "825:     for (var val of p)",
          "827:     return delta;",
          "828:   }",
          "829:   function getInnerWidth(el) {",
          "830:     var style = getComputedStyle(el);",
          "832:     if (style.boxSizing != \"border-box\")",
          "835:     for (var val of p)",
          "836:       width -= parsePx(style.getPropertyValue(val)) || 0;",
          "837:     return Math.max(width, 0);",
          "",
          "[Removed Lines]",
          "826:       delta += delta += parsePx(style.getPropertyValue(val)) || 0;",
          "831:     var width = parseFloat(style.width);",
          "833:       return width;",
          "834:     var p = [\"border-top-width\", \"border-bottom-width\", \"padding-top\", \"padding-bottom\"];",
          "",
          "[Added Lines]",
          "826:       delta += parsePx(style.getPropertyValue(val)) || 0;",
          "830:     var _a;",
          "832:     var width = (_a = parsePx(style.width)) != null ? _a : 0;",
          "834:       return Math.max(0, width);",
          "835:     var p = [\"border-left-width\", \"border-right-width\", \"padding-left\", \"padding-right\"];",
          "",
          "---------------",
          "--- Hunk 4 ---",
          "[Context before]",
          "1050:       this._data = data;",
          "1051:       this._colDefaults = Object.assign({}, columnDefaults);",
          "1052:       this._options = options = Object.assign({}, gridDefaults, options);",
          "1054:       if (this._jQuery && container instanceof this._jQuery)",
          "1055:         this._container = container[0];",
          "1056:       else if (container instanceof Element)",
          "",
          "[Removed Lines]",
          "1053:       options.jQuery = this._jQuery = options.jQuery === void 0 ? typeof jQuery !== \"undefined\" ? jQuery : void 0 : void 0;",
          "",
          "[Added Lines]",
          "1054:       options.jQuery = this._jQuery = options.jQuery === void 0 ? typeof jQuery !== \"undefined\" ? jQuery : void 0 : options.jQuery;",
          "",
          "---------------",
          "--- Hunk 5 ---",
          "[Context before]",
          "1250:       }",
          "1251:     }",
          "1252:     setSelectionModel(model) {",
          "1259:       this._selectionModel = model;",
          "1260:       if (this._selectionModel) {",
          "1261:         this._selectionModel.init(this);",
          "1262:         this._selectionModel.onSelectedRangesChanged.subscribe(this.handleSelectedRangesChanged);",
          "1263:       }",
          "1264:     }",
          "1265:     getScrollBarDimensions() {",
          "1266:       return this._scrollDims;",
          "1267:     }",
          "",
          "[Removed Lines]",
          "1253:       if (this._selectionModel) {",
          "1254:         this._selectionModel.onSelectedRangesChanged.unsubscribe(this.handleSelectedRangesChanged);",
          "1255:         if (this._selectionModel.destroy) {",
          "1256:           this._selectionModel.destroy();",
          "1257:         }",
          "1258:       }",
          "",
          "[Added Lines]",
          "1254:       this.unregisterSelectionModel();",
          "1261:     unregisterSelectionModel() {",
          "1262:       var _a, _b;",
          "1263:       if (!this._selectionModel)",
          "1264:         return;",
          "1265:       this._selectionModel.onSelectedRangesChanged.unsubscribe(this.handleSelectedRangesChanged);",
          "1266:       (_b = (_a = this._selectionModel).destroy) == null ? void 0 : _b.call(_a);",
          "1267:     }",
          "",
          "---------------",
          "--- Hunk 6 ---",
          "[Context before]",
          "1285:       return columnIdOrIdx;",
          "1286:     }",
          "1287:     getCanvasNode(columnIdOrIdx, row) {",
          "1289:     }",
          "1290:     getCanvases() {",
          "1291:       var canvases = this._layout.getCanvasNodes();",
          "1292:       return this._jQuery ? this._jQuery(canvases) : canvases;",
          "1293:     }",
          "1294:     getActiveCanvasNode(e) {",
          "1299:       if (e) {",
          "1300:         this._activeCanvasNode = e.target.closest(\".grid-canvas\");",
          "1301:       }",
          "1302:     }",
          "1303:     getViewportNode(columnIdOrIdx, row) {",
          "1305:     }",
          "1306:     getViewports() {",
          "1307:       return this._layout.getViewportNodes();",
          "1308:     }",
          "1309:     getActiveViewportNode(e) {",
          "1314:       if (e) {",
          "1315:         this._activeViewportNode = e.target.closest(\".slick-viewport\");",
          "1316:       }",
          "1317:     }",
          "1318:     getAvailableWidth() {",
          "1319:       return this._viewportInfo.hasVScroll ? this._viewportInfo.width - this._scrollDims.width : this._viewportInfo.width;",
          "",
          "[Removed Lines]",
          "1288:       return this._layout.getCanvasNodeFor(row || 0, this.colIdOrIdxToCell(columnIdOrIdx || 0));",
          "1295:       this.setActiveCanvasNode(e);",
          "1296:       return this._activeCanvasNode;",
          "1297:     }",
          "1298:     setActiveCanvasNode(e) {",
          "1304:       return this._layout.getViewportNodeFor(row || 0, this.colIdOrIdxToCell(columnIdOrIdx || 0));",
          "1310:       this.setActiveViewportNode(e);",
          "1311:       return this._activeViewportNode;",
          "1312:     }",
          "1313:     setActiveViewportNode(e) {",
          "",
          "[Added Lines]",
          "1291:       return this._layout.getCanvasNodeFor(this.colIdOrIdxToCell(columnIdOrIdx || 0), row || 0);",
          "1301:       return this._activeCanvasNode;",
          "1304:       return this._layout.getViewportNodeFor(this.colIdOrIdxToCell(columnIdOrIdx || 0), row || 0);",
          "1313:       return this._activeViewportNode;",
          "",
          "---------------",
          "--- Hunk 7 ---",
          "[Context before]",
          "1863:       this._stylesheet = null;",
          "1864:     }",
          "1865:     destroy() {",
          "1866:       this.getEditorLock().cancelCurrentEdit();",
          "1867:       this.trigger(this.onBeforeDestroy);",
          "1868:       var i = this._plugins.length;",
          "",
          "[Removed Lines]",
          "[None]",
          "",
          "[Added Lines]",
          "1863:       var _a;",
          "",
          "---------------",
          "--- Hunk 8 ---",
          "[Context before]",
          "1873:         this._jQuery(this._layout.getHeaderCols()).filter(\":ui-sortable\").sortable(\"destroy\");",
          "1874:       }",
          "1875:       this.unbindAncestorScrollEvents();",
          "1877:       this.removeCssRules();",
          "1878:       var canvasNodes = this._layout.getCanvasNodes();",
          "1879:       if (this._jQuery)",
          "",
          "[Removed Lines]",
          "1876:       this._jQuery(this._container).off(\".slickgrid\");",
          "",
          "[Added Lines]",
          "1874:       this.unbindFromData();",
          "1875:       this.unregisterSelectionModel();",
          "1876:       (_a = this._jQuery) == null ? void 0 : _a.call(this, this._container).off(\".slickgrid\");",
          "",
          "---------------"
        ],
        "src/Serenity.Assets/wwwroot/Scripts/SlickGrid/slick.grid.min.js||src/Serenity.Assets/wwwroot/Scripts/SlickGrid/slick.grid.min.js": [
          "File: src/Serenity.Assets/wwwroot/Scripts/SlickGrid/slick.grid.min.js -> src/Serenity.Assets/wwwroot/Scripts/SlickGrid/slick.grid.min.js",
          "--- Hunk 1 ---",
          "[Context before]",
          "2: [\"Data\", \"Editors\", \"Formatters\", \"Plugins\"].forEach(ns => Slick._[ns] && (Slick[ns] = Object.assign(Slick[ns] || {}, Slick._[ns])) && delete Slick._[ns]); Object.assign(Slick, Slick._); delete Slick._;",
          "",
          "[Removed Lines]",
          "1: var Slick=Slick||{};Slick._=(()=>{var j=Object.defineProperty;var Fe=Object.getOwnPropertyDescriptor;var xe=Object.getOwnPropertyNames;var ke=Object.prototype.hasOwnProperty;var ze=(a,e)=>{for(var t in e)j(a,t,{get:e[t],enumerable:!0})},Ve=(a,e,t,i)=>{if(e&&typeof e==\"object\"||typeof e==\"function\")for(let o of xe(e))!ke.call(a,o)&&o!==t&&j(a,o,{get:()=>e[o],enumerable:!(i=Fe(e,o))||i.enumerable});return a};var Qe=a=>Ve(j({},\"__esModule\",{value:!0}),a);var We={};ze(We,{BasicLayout:()=>V,Grid:()=>Z,gridDefaults:()=>G});var{addClass:D,applyFormatterResultToCellNode:$,columnDefaults:ee,convertCompatFormatter:F,ensureUniqueColumnIds:je,escape:T,defaultColumnFormat:z,disableSelection:te,EventEmitter:m,EventData:ie,GlobalEditorLock:oe,initializeColumns:se,H:w,keyCode:Be,NonDataRow:Ge,parsePx:R,preClickClassName:re,Range:le,removeClass:ne,RowCell:Xe,spacerDiv:B,titleize:Ue}=Slick;var G={addNewRowCssClass:\"new-row\",alwaysAllowHorizontalScroll:!1,alwaysShowVerticalScroll:!1,asyncEditorLoadDelay:100,asyncEditorLoading:!1,asyncPostCleanupDelay:40,asyncPostRenderDelay:50,autoEdit:!0,autoHeight:!1,cellFlashingCssClass:\"flashing\",dataItemColumnValueExtractor:null,defaultColumnWidth:80,defaultFormat:z,editable:!1,editorFactory:null,editorLock:oe,enableAddRow:!1,enableAsyncPostRender:!1,enableAsyncPostRenderCleanup:!1,enableCellNavigation:!0,enableColumnReorder:!0,enableTabKeyNavigation:!0,enableTextSelectionOnCells:!1,explicitInitialization:!1,footerRowHeight:30,forceFitColumns:!1,forceSyncScrolling:!1,forceSyncScrollInterval:250,formatterFactory:null,fullWidthRows:!1,groupingPanel:!1,groupingPanelHeight:30,headerRowHeight:30,leaveSpaceForNewRows:!1,useLegacyUI:!0,minBuffer:3,multiColumnSort:!1,multiSelect:!0,renderAllCells:!1,rowHeight:30,selectedCellCssClass:\"selected\",showCellSelection:!0,showColumnHeader:!0,showFooterRow:!1,showGroupingPanel:!0,showHeaderRow:!1,showTopPanel:!1,suppressActiveCellChangeOnEdit:!1,topPanelHeight:30};var V=function(){var a,e,t,i,o,s,r,l,n,h,d;function c(v){a=v;let b=_()+a.getScrollDims().width+\"px\",y=a.getOptions(),P=y.useLegacyUI?\" ui-state-default\":\"\";o=w(\"div\",{class:\"slick-header-columns\",style:(y.rtl?\"right\":\"left\")+\":-1000px\"});var S=w(\"div\",{class:\"slick-header\"+P,style:!y.showColumnHeader&&\"display: none\"},o);f(),s=w(\"div\",{class:\"slick-headerrow-columns\"}),r=B(b);var N=w(\"div\",{class:\"slick-headerrow\"+P,style:!y.showHeaderRow&&\"display: none\"},s,r);h=w(\"div\",{class:\"slick-top-panel\",style:\"width: 10000px\"});var Ae=w(\"div\",{class:\"slick-top-panel-scroller\"+P,style:!y.showTopPanel&&\"display: none\"},h);i=w(\"div\",{class:\"grid-canvas\",tabIndex:\"0\",hideFocus:\"\"}),d=w(\"div\",{class:\"slick-viewport\",tabIndex:\"0\",hideFocus:\"\"},i),l=w(\"div\",{class:\"slick-footerrow-columns\"}),n=B(b);var Ne=w(\"div\",{class:\"slick-footerrow\"+P,style:!y.showFooterRow&&\"display: none\"},l,n);a.getContainerNode().append(S,N,Ae,d,Ne)}function g(v,b){b&&i.appendChild(b)}function u(){for(var v=0,b,y,P=a.getColumns(),S=0;S<P.length;S++){b=P[S].width,y=a.getColumnCssRules(S);let N=a.getOptions().rtl;y[N?\"right\":\"left\"].style[N?\"right\":\"left\"]=v+\"px\",y[N?\"left\":\"right\"].style[N?\"left\":\"right\"]=e-v-b+\"px\",v+=b}}function C(){for(var v=i;(v=v.parentNode)!=document.body&&v!=null;)(v==d||v.scrollWidth!=v.clientWidth||v.scrollHeight!=v.clientHeight)&&a.bindAncestorScroll(v)}function _(){for(var v=a.getColumns(),b=v.length,y=0;b--;)y+=v[b].width;return a.getOptions().fullWidthRows?Math.max(y,a.getAvailableWidth()):y}function f(){t=0;for(var v=a.getScrollDims().width,b=a.getColumns(),y=0,P=b.length;y<P;y++)t+=b[y].width;t+=v,t=Math.max(t,a.getViewportInfo().width)+1e3,o.style.width=t+\"px\"}let L=()=>{a=null};function p(){return i}function H(){return[i]}function E(){return e}function I(){return[o]}function A(v){return o.children.item(v)}function ve(){return[s]}function me(v){return s.childNodes.item(v)}function fe(){return s}function pe(v){return l.childNodes.item(v)}function Ce(){return l}function _e(){return o}function we(){return[l]}function ye(v){return a.getRowFromNode(v.parentElement)}function be(){return h}function Re(){return[h]}function W(){return d}function Ee(){return[d]}function Le(){o.parentElement.scrollLeft=a.getScrollLeft(),h.parentElement.scrollLeft=a.getScrollLeft(),s.parentElement.scrollLeft=a.getScrollLeft(),l.parentElement.scrollLeft=a.getScrollLeft()}function M(){}function He(){i.style.height=a.getViewportInfo().realScrollHeight+\"px\"}function Pe(v){return v}function Se(){return!1}function Te(){var v=a.getOptions().alwaysShowVerticalScroll;d.style.overflowX=\"auto\",d.style.overflowY=v?\"scroll\":a.getOptions().autoHeight?\"hidden\":\"auto\"}function Ie(){var v=e;e=_();var b=a.getScrollDims().width;let y=a.getViewportInfo();var P=e+\"px\";i.style.width=P,s.style.width=P,l.style.width=P,f(),y.hasHScroll=e>a.getViewportInfo().width-b;var S=e+(y.hasVScroll?b:0)+\"px\";return r.style.width=S,n.style.width=S,e!=v}let Me=()=>{var v=a.getViewportInfo(),b=v.height+v.topPanelHeight+v.headerRowHeight+v.footerRowHeight;a.getOptions().autoHeight?(a.getContainerNode().style.height=b+v.groupingPanelHeight+R(getComputedStyle(o.parentElement).height)+\"px\",d.style.height=\"\"):d.style.height=v.height+\"px\"};function O(){return 0}var De={afterHeaderColumnDrag:M,afterRenderRows:M,afterSetOptions:M,appendCachedRow:g,applyColumnWidths:u,beforeCleanupAndRenderCells:M,bindAncestorScrollEvents:C,calcCanvasWidth:_,updateHeadersWidth:f,isFrozenRow:Se,destroy:L,getCanvasNodeFor:p,getCanvasNodes:H,getCanvasWidth:E,getFooterRowCols:we,getFooterRowColsFor:Ce,getFooterRowColumn:pe,getHeaderCols:I,getHeaderColsFor:_e,getHeaderColumn:A,getHeaderRowCols:ve,getHeaderRowColsFor:fe,getHeaderRowColumn:me,getRowFromCellNode:ye,getFrozenCols:O,getFrozenRowOffset:O,getFrozenRows:O,getScrollCanvasY:p,getScrollContainerX:W,getScrollContainerY:W,getTopPanelFor:be,getTopPanelNodes:Re,getViewportNodeFor:W,getViewportNodes:Ee,handleScrollH:Le,handleScrollV:M,init:c,layoutName:\"basic\",realScrollHeightChange:He,reorderViewColumns:Pe,resizeCanvas:Me,setOverflow:Te,setPaneVisibility:M,setScroller:M,updateCanvasWidth:Ie};return De};var Q=class{constructor(e){this.host=e}findFirstFocusableCell(e){for(var t=0,i=this.host.getColumnCount();t<i;){if(this.host.canCellBeActive(e,t))return t;t+=this.host.getColspan(e,t)}return null}findLastFocusableCell(e){for(var t=0,i=null,o=this.host.getColumnCount();t<o;)this.host.canCellBeActive(e,t)&&(i=t),t+=this.host.getColspan(e,t);return i}gotoRight(e,t){var i=this.host.getColumnCount();if(t>=i)return null;do t+=this.host.getColspan(e,t);while(t<i&&!this.host.canCellBeActive(e,t));return t<i?{row:e,cell:t,posX:t}:null}gotoLeft(e,t){if(t<=0)return null;var i=this.findFirstFocusableCell(e);if(i===null||i>=t)return null;for(var o={row:e,cell:i,posX:i},s;;){if(s=this.gotoRight(o.row,o.cell),!s)return null;if(s.cell>=t)return o;o=s}}gotoDown(e,t,i){for(var o,s=this.host.getRowCount();;){if(++e>=s)return null;for(o=t=0;t<=i;)o=t,t+=this.host.getColspan(e,t);if(this.host.canCellBeActive(e,o))return{row:e,cell:o,posX:i}}}gotoUp(e,t,i){for(var o;;){if(--e<0)return null;for(o=t=0;t<=i;)o=t,t+=this.host.getColspan(e,t);if(this.host.canCellBeActive(e,o))return{row:e,cell:o,posX:i}}}gotoNext(e,t,i){if(e==null&&t==null&&(e=t=i=0,this.host.canCellBeActive(e,t)))return{row:e,cell:t,posX:t};var o=this.gotoRight(e,t);if(o)return o;for(var s=null,r=this.host.getRowCount();++e<r;)if(s=this.findFirstFocusableCell(e),s!=null)return{row:e,cell:s,posX:s};return null}gotoPrev(e,t,i){var o=this.host.getColumnCount();if(e==null&&t==null&&(e=this.host.getRowCount()-1,t=i=o-1,this.host.canCellBeActive(e,t)))return{row:e,cell:t,posX:t};for(var s,r;!s&&(s=this.gotoLeft(e,t),!s);){if(--e<0)return null;t=0,r=this.findLastFocusableCell(e),r!=null&&(s={row:e,cell:r,posX:r})}return s}gotoRowStart(e){var t=this.findFirstFocusableCell(e);return t===null?null:{row:e,cell:t,posX:t}}gotoRowEnd(e){var t=this.findLastFocusableCell(e);return t===null?null:{row:e,cell:t,posX:t}}navigate(e,t,i,o){var s={up:-1,down:1,prev:-1,next:1,home:-1,end:1};let r=this.host.isRTL();s[r?\"right\":\"left\"]=-1,s[r?\"left\":\"right\"]=1,this.host.setTabbingDirection(s[e]);var l={up:this.gotoUp,down:this.gotoDown,prev:this.gotoPrev,next:this.gotoNext,home:this.gotoRowStart,end:this.gotoRowEnd};l[r?\"right\":\"left\"]=this.gotoLeft,l[r?\"left\":\"right\"]=this.gotoRight;var n=l[e].bind(this);return n(t,i,o)}};var X,U;function k(a){var e={top:a.offsetTop,left:a.offsetLeft,bottom:0,right:0,width:a.offsetWidth,height:a.offsetHeight,visible:!0};e.bottom=e.top+e.height,e.right=e.left+e.width;for(var t=a.offsetParent;(a=a.parentNode)!=document.body;)e.visible&&a.scrollHeight!=a.offsetHeight&&getComputedStyle(a).overflowY!==\"visible\"&&(e.visible=e.bottom>a.scrollTop&&e.top<a.scrollTop+a.clientHeight),e.visible&&a.scrollWidth!=a.offsetWidth&&getComputedStyle(a).overflowX!=\"visible\"&&(e.visible=e.right>a.scrollLeft&&e.left<a.scrollLeft+a.clientWidth),e.left-=a.scrollLeft,e.top-=a.scrollTop,a===t&&(e.left+=a.offsetLeft,e.top+=a.offsetTop,t=a.offsetParent),e.bottom=e.top+e.height,e.right=e.left+e.width;return e}function ae(a,e,t){var i,o,s=[],r=0,l=0,n;for(i=0;i<a.length;i++)o=a[i],s.push(o.width),l+=o.width,o.resizable&&(r+=o.width-Math.max(o.minWidth,t));for(n=l;l>e&&r;){var h=(l-e)/r;for(i=0;i<a.length&&l>e;i++){o=a[i];var d=s[i];if(!(!o.resizable||d<=o.minWidth||d<=t)){var c=Math.max(o.minWidth,t),g=Math.floor(h*(d-c))||1;g=Math.min(g,d-c),l-=g,r-=g,s[i]-=g}}if(n<=l)break;n=l}for(n=l;l<e;){var u=e/l;for(i=0;i<a.length&&l<e;i++){o=a[i];var C=s[i],_;!o.resizable||o.maxWidth<=C?_=0:_=Math.min(Math.floor(u*C)-C,o.maxWidth-C||1e6)||1,l+=_,s[i]+=l<=e?_:0}if(n>=l)break;n=l}var f=!1;for(i=0;i<a.length;i++)a[i].rerenderOnResize&&a[i].width!=s[i]&&(f=!0),a[i].width=s[i];return f}function K(){return X!=null?X:navigator.userAgent.toLowerCase().match(/gecko\\//)?4e6:32e6}function q(a){if(!U||a){var e=document.body.appendChild(w(\"div\",{style:\"position:absolute;top:-10000px;left:-10000px;width:100px;height:100px;overflow: scroll;border:0\"}));U={width:Math.round(e.offsetWidth-e.clientWidth),height:Math.round(e.offsetWidth-e.clientHeight)},e.remove()}return U}function he(a,e){if(!Array.isArray(a)||!Array.isArray(e)||a.length!==e.length)return!1;a.sort(),e.sort();for(var t=0;t<a.length;t++)if(a[t]!==e[t])return!1;return!0}function de(a,e){if(e.length==0)return a;for(var t={},i={},o=[],s=0;s<e.length;s++)t[e[s]]=s;for(s=0;s<a.length;s++)i[a[s].id]=s;function r(h){for(var d=h;d<a.length;d++){var c=a[d];if(h!=d&&t[c.id]!=null)break;o.push(c),i[c.id]=null}}t[a[0].id]==null&&r(0);for(var l of e)s=i[l],s!=null&&r(s);for(s=0;s<a.length;s++){var n=a[s];i[n.id]!=null&&(o.push(n),i[n.id]=null)}return o}function ue(a,e,t,i,o){var s=null,r=null,l,n;if(i)for(s=0,r=0,l=e+1;l<a.length;l++)n=a[l],n.resizable&&(r!=null&&(n.maxWidth?r+=n.maxWidth-n.previousWidth:r=null),s+=n.previousWidth-Math.max(n.minWidth||0,o));var h=0,d=0;for(l=0;l<=e;l++)n=a[l],n.resizable&&(d!=null&&(n.maxWidth?d+=n.maxWidth-n.previousWidth:d=null),h+=n.previousWidth-Math.max(n.minWidth||0,o));return s===null&&(s=1e5),h===null&&(h=1e5),r===null&&(r=1e5),d===null&&(d=1e5),{maxPageX:t+Math.min(s,d),minPageX:t-Math.min(h,r)}}function ce(a,e,t,i,o){var s,r,l,n;if(t<0){for(l=t,r=e;r>=0;r--)s=a[r],s.resizable&&(n=Math.max(s.minWidth||0,o),l&&s.previousWidth+l<n?(l+=s.previousWidth-n,s.width=n):(s.width=s.previousWidth+l,l=0));if(i)for(l=-t,r=e+1;r<a.length;r++)s=a[r],s.resizable&&(l&&s.maxWidth&&s.maxWidth-s.previousWidth<l?(l-=s.maxWidth-s.previousWidth,s.width=s.maxWidth):(s.width=s.previousWidth+l,l=0))}else{for(l=t,r=e;r>=0;r--)s=a[r],s.resizable&&(l&&s.maxWidth&&s.maxWidth-s.previousWidth<l?(l-=s.maxWidth-s.previousWidth,s.width=s.maxWidth):(s.width=s.previousWidth+l,l=0));if(i)for(l=-t,r=e+1;r<a.length;r++)s=a[r],s.resizable&&(n=Math.max(s.minWidth||0,o),l&&s.previousWidth+l<n?(l+=s.previousWidth-n,s.width=n):(s.width=s.previousWidth+l,l=0))}}function Y(){this==null||this.classList.add(\"ui-state-hover\")}function J(){this==null||this.classList.remove(\"ui-state-hover\")}function x(a){var e=getComputedStyle(a);if(e.boxSizing===\"border-box\")return 0;var t=[\"border-top-width\",\"border-bottom-width\",\"padding-top\",\"padding-bottom\"],i=0;for(var o of t)i+=i+=R(e.getPropertyValue(o))||0;return i}function ge(a){var e=getComputedStyle(a),t=parseFloat(e.width);if(e.boxSizing!=\"border-box\")return t;var i=[\"border-top-width\",\"border-bottom-width\",\"padding-top\",\"padding-bottom\"];for(var o of i)t-=R(e.getPropertyValue(o))||0;return Math.max(t,0)}var Z=class{constructor(e,t,i,o){this._activeCellNode=null;this._cellCssClasses={};this._cellHeightDiff=0;this._cellWidthDiff=0;this._colLeft=[];this._colRight=[];this._currentEditor=null;this._headerColumnWidthDiff=0;this._hEditorLoader=null;this._hPostRender=null;this._hPostRenderCleanup=null;this._hRender=null;this._ignoreScrollUntil=0;this._initialized=!1;this._page=0;this._pageOffset=0;this._pagingActive=!1;this._pagingIsLastPage=!1;this._plugins=[];this._postProcessCleanupQueue=[];this._postProcessedRows={};this._postProcessFromRow=null;this._postProcessGroupId=0;this._postProcessToRow=null;this._rowsCache={};this._scrollLeft=0;this._scrollLeftPrev=0;this._scrollLeftRendered=0;this._scrollTop=0;this._scrollTopPrev=0;this._scrollTopRendered=0;this._selectedRows=[];this._sortColumns=[];this._tabbingDirection=1;this._uid=\"sleekgrid_\"+Math.round(1e6*Math.random());this._viewportInfo={};this._vScrollDir=1;this._boundAncestorScroll=[];this.onActiveCellChanged=new m;this.onActiveCellPositionChanged=new m;this.onAddNewRow=new m;this.onBeforeCellEditorDestroy=new m;this.onBeforeDestroy=new m;this.onBeforeEditCell=new m;this.onBeforeFooterRowCellDestroy=new m;this.onBeforeHeaderCellDestroy=new m;this.onBeforeHeaderRowCellDestroy=new m;this.onCellChange=new m;this.onCellCssStylesChanged=new m;this.onClick=new m;this.onColumnsReordered=new m;this.onColumnsResized=new m;this.onCompositeEditorChange=new m;this.onContextMenu=new m;this.onDblClick=new m;this.onDrag=new m;this.onDragEnd=new m;this.onDragInit=new m;this.onDragStart=new m;this.onFooterRowCellRendered=new m;this.onHeaderCellRendered=new m;this.onHeaderClick=new m;this.onHeaderContextMenu=new m;this.onHeaderMouseEnter=new m;this.onHeaderMouseLeave=new m;this.onHeaderRowCellRendered=new m;this.onKeyDown=new m;this.onMouseEnter=new m;this.onMouseLeave=new m;this.onScroll=new m;this.onSelectedRowsChanged=new m;this.onSort=new m;this.onValidationError=new m;this.onViewportChanged=new m;this.handleSelectedRangesChanged=(e,t)=>{var i=this._selectedRows.slice(0);this._selectedRows=[];for(var d={},c=this._cols,o=0;o<t.length;o++)for(var s=t[o].fromRow;s<=t[o].toRow;s++){d[s]||(this._selectedRows.push(s),d[s]={});for(var r=t[o].fromCell;r<=t[o].toCell;r++)this.canCellBeSelected(s,r)&&(d[s][c[r].id]=this._options.selectedCellCssClass)}if(this.setCellCssStyles(this._options.selectedCellCssClass,d),!he(i,this._selectedRows)){var l=e&&e.detail&&e.detail.caller||\"click\",n=this._selectedRows.filter(g=>i.indexOf(g)<0),h=i.filter(g=>this._selectedRows.indexOf(g)<0);this.trigger(this.onSelectedRowsChanged,{rows:this.getSelectedRows(),previousSelectedRows:i,caller:l,changedSelectedRows:n,changedUnselectedRows:h},e)}this._selectedRows=[];for(var d={},c=this._cols,o=0;o<t.length;o++)for(var s=t[o].fromRow;s<=t[o].toRow;s++){d[s]||(this._selectedRows.push(s),d[s]={});for(var r=t[o].fromCell;r<=t[o].toCell;r++)this.canCellBeSelected(s,r)&&(d[s][c[r].id]=this._options.selectedCellCssClass)}};this.viewOnRowCountChanged=()=>{this.updateRowCount(),this.render()};this.viewOnRowsChanged=(e,t)=>{this.invalidateRows(t.rows),this.render(),this.updateGrandTotals()};this.viewOnDataChanged=()=>{this.invalidate(),this.render()};this.resizeCanvas=()=>{this._initialized&&(this.calcViewportSize(),this._layout.resizeCanvas(),(!this._scrollDims||!this._scrollDims.width)&&(this._scrollDims=q(!0)),this._options.forceFitColumns&&this.autosizeColumns(),this.updateRowCount(),this.handleScroll(),this._scrollLeftRendered=-1,this.render())};this.render=()=>{if(this._initialized){var e=this.getVisibleRange(),t=this.getRenderedRange();this.cleanupRows(t),this._scrollLeftRendered!=this._scrollLeft&&(this._layout.beforeCleanupAndRenderCells(t),this.cleanUpAndRenderCells(t)),this.renderRows(t),this._layout.afterRenderRows(t),this._postProcessFromRow=e.top,this._postProcessToRow=Math.min(this.getDataLengthIncludingAddNew()-1,e.bottom),this.startPostProcessing(),this._scrollTopRendered=this._scrollTop,this._scrollLeftRendered=this._scrollLeft,this._lastRenderTime=new Date().getTime(),this._hRender=null}};this.handleHeaderRowScroll=e=>{if(!(this._ignoreScrollUntil>=new Date().getTime())){var t=e.target.scrollLeft;t!=this._layout.getScrollContainerX().scrollLeft&&(this._layout.getScrollContainerX().scrollLeft=t)}};this.handleFooterRowScroll=e=>{if(!(this._ignoreScrollUntil>=new Date().getTime())){var t=e.target.scrollLeft;t!=this._layout.getScrollContainerX().scrollLeft&&(this._layout.getScrollContainerX().scrollLeft=t)}};this.handleActiveCellPositionChange=()=>{if(this._activeCellNode&&(this.trigger(this.onActiveCellPositionChanged,{}),this._currentEditor)){var e=this.getActiveCellPosition();this._currentEditor.show&&this._currentEditor.hide&&(e.visible?this._currentEditor.show():this._currentEditor.hide()),this._currentEditor.position&&this._currentEditor.position(e)}};var s,r;if(this._data=t,this._colDefaults=Object.assign({},ee),this._options=o=Object.assign({},G,o),o.jQuery=this._jQuery=o.jQuery===void 0&&typeof jQuery!=\"undefined\"?jQuery:void 0,this._jQuery&&e instanceof this._jQuery?this._container=e[0]:e instanceof Element?this._container=e:typeof e==\"string\"&&(this._container=document.querySelector(e)),this._container==null)throw new Error(\"SleekGrid requires a valid container, \"+e+\" does not exist in the DOM.\");this._container.classList.add(\"slick-container\"),o!=null&&o.createPreHeaderPanel&&(o.groupingPanel==null&&(o.groupingPanel=!0),o.groupingPanelHeight==null&&o.preHeaderPanelHeight!=null&&(o.groupingPanelHeight=o.preHeaderPanelHeight),o.showGroupingPanel==null&&o.showPreHeaderPanel!=null&&(o.showGroupingPanel=o.showPreHeaderPanel)),this._options.rtl=(s=this._options.rtl)!=null?s:document.body.classList.contains(\"rtl\")||typeof getComputedStyle!=\"undefined\"&&getComputedStyle(this._container).direction==\"rtl\",this.validateAndEnforceOptions(),this._colDefaults.width=o.defaultColumnWidth,this._editController={commitCurrentEdit:this.commitCurrentEdit.bind(this),cancelCurrentEdit:this.cancelCurrentEdit.bind(this)},this._jQuery?this._jQuery(this._container).empty():this._container.innerHTML=\"\",this._container.style.overflow=\"hidden\",this._container.style.outline=\"0\",this._container.classList.add(this._uid),this._options.useLegacyUI&&this._container.classList.add(\"ui-widget\"),/relative|absolute|fixed/.test(getComputedStyle(this._container).position)||(this._container.style.position=\"relative\"),this._container.appendChild(this._focusSink1=w(\"div\",{class:\"slick-focus-sink\",hideFocus:\"\",style:\"position:fixed;width:0!important;height:0!important;top:0;left:0;outline:0!important;\",tabIndex:\"0\"})),this._layout=(r=o.layoutEngine)!=null?r:new V,this.setInitialCols(i),this._scrollDims=q(),o.groupingPanel&&(this._container.appendChild(this._groupingPanel=w(\"div\",{class:\"slick-grouping-panel\",style:\"overflow:hidden; position:relative;\"+(o.showGroupingPanel?\"\":\" display: none\")})),o.createPreHeaderPanel&&this._groupingPanel.appendChild(w(\"div\",{class:\"slick-preheader-panel\"}))),this._layout.init({cleanUpAndRenderCells:this.cleanUpAndRenderCells.bind(this),bindAncestorScroll:this.bindAncestorScroll.bind(this),getAvailableWidth:this.getAvailableWidth.bind(this),getCellFromPoint:this.getCellFromPoint.bind(this),getColumnCssRules:this.getColumnCssRules.bind(this),getColumns:this.getColumns.bind(this),getContainerNode:this.getContainerNode.bind(this),getDataLength:this.getDataLength.bind(this),getOptions:this.getOptions.bind(this),getRowFromNode:this.getRowFromNode.bind(this),getScrollDims:this.getScrollBarDimensions.bind(this),getScrollLeft:()=>this._scrollLeft,getScrollTop:()=>this._scrollTop,getViewportInfo:()=>this._viewportInfo,renderRows:this.renderRows.bind(this)}),this._container.append(this._focusSink2=this._focusSink1.cloneNode()),o.viewportClass&&this.getViewports().forEach(l=>D(l,o.viewportClass)),o.explicitInitialization||this.init(),this.bindToData()}bindAncestorScroll(e){this._jQuery?this._jQuery(e).on(\"scroll\",this.handleActiveCellPositionChange):e.addEventListener(\"scroll\",this.handleActiveCellPositionChange),this._boundAncestorScroll.push(e)}init(){if(this._initialized)return;this._initialized=!0,this.calcViewportSize(),this.measureCellPaddingAndBorder();var e=this.getViewports();this._jQuery&&!this._options.enableTextSelectionOnCells&&this._jQuery(e).on(\"selectstart.ui\",()=>this._jQuery(this).is(\"input,textarea\")),this._layout.setPaneVisibility(),this._layout.setScroller(),this.setOverflow(),this.updateViewColLeftRight(),this.createColumnHeaders(),this.createColumnFooters(),this.setupColumnSort(),this.createCssRules(),this.resizeCanvas(),this._layout.bindAncestorScrollEvents();let t=(o,s,r)=>{this._jQuery?this._jQuery(o).on(s,r):o.addEventListener(s,r)};t(this._container,\"resize\",this.resizeCanvas),e.forEach(o=>{var s=!1;t(o,\"scroll\",r=>{s||(s=!0,window.requestAnimationFrame(()=>{this.handleScroll(),s=!1}))})}),this._jQuery&&this._jQuery.fn.mousewheel&&(this.hasFrozenColumns()||this.hasFrozenRows())&&this._jQuery(e).on(\"mousewheel\",this.handleMouseWheel.bind(this)),this._layout.getHeaderCols().forEach(o=>{te(o),t(o,\"contextmenu\",this.handleHeaderContextMenu.bind(this)),t(o,\"click\",this.handleHeaderClick.bind(this)),this._jQuery?this._jQuery(o).on(\"mouseenter\",\".slick-header-column\",this.handleHeaderMouseEnter.bind(this)).on(\"mouseleave\",\".slick-header-column\",this.handleHeaderMouseLeave.bind(this)):(o.addEventListener(\"mouseenter\",s=>s.target.closest(\".slick-header-column\")&&this.handleHeaderMouseEnter(s)),o.addEventListener(\"mouseleave\",s=>s.target.closest(\".slick-header-column\")&&this.handleHeaderMouseLeave(s)))}),this._layout.getHeaderRowCols().forEach(o=>{t(o.parentElement,\"scroll\",this.handleHeaderRowScroll)}),this._layout.getFooterRowCols().forEach(o=>{t(o.parentElement,\"scroll\",this.handleFooterRowScroll)}),[this._focusSink1,this._focusSink2].forEach(o=>t(o,\"keydown\",this.handleKeyDown.bind(this)));var i=Array.from(this.getCanvases());i.forEach(o=>{t(o,\"keydown\",this.handleKeyDown.bind(this)),t(o,\"click\",this.handleClick.bind(this)),t(o,\"dblclick\",this.handleDblClick.bind(this)),t(o,\"contextmenu\",this.handleContextMenu.bind(this))}),this._jQuery&&this._jQuery.fn.drag&&this._jQuery(i).on(\"draginit\",this.handleDragInit.bind(this)).on(\"dragstart\",{distance:3},this.handleDragStart.bind(this)).on(\"drag\",this.handleDrag.bind(this)).on(\"dragend\",this.handleDragEnd.bind(this)),i.forEach(o=>{this._jQuery?this._jQuery(o).on(\"mouseenter\",\".slick-cell\",this.handleMouseEnter.bind(this)).on(\"mouseleave\",\".slick-cell\",this.handleMouseLeave.bind(this)):(o.addEventListener(\"mouseenter\",s=>s.target.closest(\".slick-cell\")&&this.handleMouseEnter(s)),o.addEventListener(\"mouseleave\",s=>s.target.closest(\".slick-cell\")&&this.handleMouseLeave(s)))}),navigator.userAgent.toLowerCase().match(/webkit/)&&navigator.userAgent.toLowerCase().match(/macintosh/)&&this._jQuery&&this._jQuery(i).on(\"mousewheel\",this.handleMouseWheel.bind(this))}hasFrozenColumns(){return this._layout.getFrozenCols()>0}hasFrozenRows(){return this._layout.getFrozenRows()>0}registerPlugin(e){this._plugins.unshift(e),e.init(this)}unregisterPlugin(e){for(var t=this._plugins.length;t>=0;t--)if(this._plugins[t]===e){this._plugins[t].destroy&&this._plugins[t].destroy(),this._plugins.splice(t,1);break}}getPluginByName(e){for(var t=this._plugins.length-1;t>=0;t--)if(this._plugins[t].pluginName===e)return this._plugins[t]}setSelectionModel(e){this._selectionModel&&(this._selectionModel.onSelectedRangesChanged.unsubscribe(this.handleSelectedRangesChanged),this._selectionModel.destroy&&this._selectionModel.destroy()),this._selectionModel=e,this._selectionModel&&(this._selectionModel.init(this),this._selectionModel.onSelectedRangesChanged.subscribe(this.handleSelectedRangesChanged))}getScrollBarDimensions(){return this._scrollDims}getDisplayedScrollbarDimensions(){return{width:this._viewportInfo.hasVScroll?this._scrollDims.width:0,height:this._viewportInfo.hasHScroll?this._scrollDims.height:0}}getAbsoluteColumnMinWidth(){return this._absoluteColMinWidth}getSelectionModel(){return this._selectionModel}colIdOrIdxToCell(e){return e==null?null:typeof e!=\"number\"?this.getColumnIndex(e):e}getCanvasNode(e,t){return this._layout.getCanvasNodeFor(t||0,this.colIdOrIdxToCell(e||0))}getCanvases(){var e=this._layout.getCanvasNodes();return this._jQuery?this._jQuery(e):e}getActiveCanvasNode(e){return this.setActiveCanvasNode(e),this._activeCanvasNode}setActiveCanvasNode(e){e&&(this._activeCanvasNode=e.target.closest(\".grid-canvas\"))}getViewportNode(e,t){return this._layout.getViewportNodeFor(t||0,this.colIdOrIdxToCell(e||0))}getViewports(){return this._layout.getViewportNodes()}getActiveViewportNode(e){return this.setActiveViewportNode(e),this._activeViewportNode}setActiveViewportNode(e){e&&(this._activeViewportNode=e.target.closest(\".slick-viewport\"))}getAvailableWidth(){return this._viewportInfo.hasVScroll?this._viewportInfo.width-this._scrollDims.width:this._viewportInfo.width}updateCanvasWidth(e){(this._layout.updateCanvasWidth()||e)&&this._layout.applyColumnWidths()}unbindAncestorScrollEvents(){if(this._boundAncestorScroll)for(var e of this._boundAncestorScroll)e.removeEventListener(\"scroll\",this.handleActiveCellPositionChange);this._boundAncestorScroll=[]}updateColumnHeader(e,t,i){if(this._initialized){var o=this.getColumnIndex(e);if(o!=null){var s=this._cols[o],r=this._layout.getHeaderColumn(o);if(r){if(t!==void 0&&(s.name=t),i!==void 0&&(s.toolTip=i),this.trigger(this.onBeforeHeaderCellDestroy,{node:r,column:s}),i!==void 0&&(r.title=i||\"\"),t!==void 0){var l=r.firstElementChild;s.nameIsHtml?l&&(l.innerHTML=t!=null?t:\"\"):l&&(l.textContent=t!=null?t:\"\")}this.trigger(this.onHeaderCellRendered,{node:r,column:s})}}}}getHeader(){return this._layout.getHeaderCols()[0]}getHeaderColumn(e){var t=this.colIdOrIdxToCell(e);return t==null?null:this._layout.getHeaderColumn(t)}getGroupingPanel(){return this._groupingPanel}getPreHeaderPanel(){var e;return(e=this._groupingPanel)==null?void 0:e.querySelector(\".slick-preheader-panel\")}getHeaderRow(){return this._layout.getHeaderRowCols()[0]}getHeaderRowColumn(e){var t=this.colIdOrIdxToCell(e);if(t!=null)return this._layout.getHeaderRowColumn(t)}getFooterRow(){return this._layout.getFooterRowCols()[0]}getFooterRowColumn(e){var t=this.colIdOrIdxToCell(e);return t==null?null:this._layout.getFooterRowColumn(t)}createColumnFooters(){var e=this._layout.getFooterRowCols();e.forEach(r=>{r.querySelectorAll(\".slick-footerrow-column\").forEach(l=>{var n=this.getColumnFromNode(l);n&&this.trigger(this.onBeforeFooterRowCellDestroy,{node:l,column:n})}),this._jQuery?this._jQuery(r).empty():r.innerHTML=\"\"});for(var t=this._cols,i=0;i<t.length;i++){var o=t[i],s=w(\"div\",{class:\"slick-footerrow-column l\"+i+\" r\"+i+(this._options.useLegacyUI?\" ui-state-default\":\"\")});s.dataset.c=i.toString(),this._jQuery&&this._jQuery(s).data(\"column\",o),o.footerCssClass?D(s,o.footerCssClass):o.cssClass&&D(s,o.cssClass),this._layout.getFooterRowColsFor(i).appendChild(s),this.trigger(this.onFooterRowCellRendered,{node:s,column:o})}}createColumnHeaders(){var g,u;this._layout.getHeaderCols().forEach(C=>{C.querySelectorAll(\".slick-header-column\").forEach(_=>{var f=this.getColumnFromNode(_);f&&this.trigger(this.onBeforeHeaderCellDestroy,{node:_,column:f})}),this._jQuery?this._jQuery(C).empty():C.innerHTML=\"\"}),this._layout.updateHeadersWidth(),this._layout.getHeaderRowCols().forEach(C=>{C.querySelectorAll(\".slick-headerrow-column\").forEach(_=>{var f=this.getColumnFromNode(_);f&&this.trigger(this.onBeforeHeaderRowCellDestroy,{node:_,column:f,grid:this})}),this._jQuery?this._jQuery(C).empty():C.innerHTML=\"\"});for(var i=this._cols,o=this._layout.getFrozenCols(),s=0;s<i.length;s++){var r=i[s],l=this._layout.getHeaderColsFor(s),n=document.createElement(\"span\");n.className=\"slick-column-name\",r.nameIsHtml?n.innerHTML=(g=r.name)!=null?g:\"\":n.textContent=(u=r.name)!=null?u:\"\";var h=w(\"div\",{class:\"slick-header-column\"+(this._options.useLegacyUI?\" ui-state-default \":\"\"),id:\"\"+this._uid+r.id,title:r.toolTip||\"\",style:\"width: \"+(r.width-this._headerColumnWidthDiff)+\"px\"},n);if(h.dataset.c=s.toString(),this._jQuery&&this._jQuery(h).data(\"column\",r),r.headerCssClass&&D(h,r.headerCssClass),s<o&&h.classList.add(\"frozen\"),l.appendChild(h),(this._options.enableColumnReorder||r.sortable)&&this._options.useLegacyUI&&(this._jQuery?(this._jQuery(h).on(\"mouseenter\",Y),this._jQuery(h).on(\"mouseleave\",J)):(h.addEventListener(\"mouseenter\",Y),h.addEventListener(\"mouseleave\",J))),r.sortable&&(h.classList.add(\"slick-header-sortable\"),h.appendChild(w(\"span\",{class:\"slick-sort-indicator\"}))),this.trigger(this.onHeaderCellRendered,{node:h,column:r}),this._options.showHeaderRow){var d=this._layout.getHeaderRowColsFor(s),c=w(\"div\",{class:\"slick-headerrow-column l\"+s+\" r\"+s+(this._options.useLegacyUI?\" ui-state-default\":\"\")});c.dataset.c=s.toString(),this._jQuery&&this._jQuery(c).data(\"column\",r),d.appendChild(c),this.trigger(this.onHeaderRowCellRendered,{node:c,column:r})}}this.setSortColumns(this._sortColumns),this.setupColumnResize(),this._options.enableColumnReorder&&this.setupColumnReorder()}setupColumnSort(){let e=t=>{var i=t.target;if(!i.classList.contains(\"slick-resizable-handle\")){var o=i.closest(\".slick-header-column\");if(o){var s=this.getColumnFromNode(o);if(s.sortable){if(!this.getEditorLock().commitCurrentEdit())return;for(var r=null,l=0;l<this._sortColumns.length;l++)if(this._sortColumns[l].columnId==s.id){r=this._sortColumns[l],r.sortAsc=!r.sortAsc;break}if(t.metaKey&&this._options.multiColumnSort?r&&this._sortColumns.splice(l,1):((!t.shiftKey&&!t.metaKey||!this._options.multiColumnSort)&&(this._sortColumns=[]),r?this._sortColumns.length==0&&this._sortColumns.push(r):(r={columnId:s.id,sortAsc:s.defaultSortAsc},this._sortColumns.push(r))),this.setSortColumns(this._sortColumns),!this._options.multiColumnSort)this.trigger(this.onSort,{multiColumnSort:!1,sortCol:s,sortAsc:r.sortAsc},t);else{var n=this._initCols;this.trigger(this.onSort,{multiColumnSort:!0,sortCols:this._sortColumns.map(h=>({sortCol:n[this.getInitialColumnIndex(h.columnId)],sortAsc:h.sortAsc}))},t)}}}}};this._layout.getHeaderCols().forEach(t=>{this._jQuery?this._jQuery(t).on(\"click\",e):t.addEventListener(\"click\",e)})}setupColumnReorder(){var l;let e=this._jQuery&&((l=this._jQuery.fn)==null?void 0:l.sortable);e&&this._jQuery(this._layout.getHeaderCols()).filter(\":ui-sortable\").sortable(\"destroy\");var t=null,i=()=>{this._layout.getScrollContainerX().scrollLeft=this._layout.getScrollContainerX().scrollLeft+10},o=()=>{this._layout.getScrollContainerX().scrollLeft=this._layout.getScrollContainerX().scrollLeft-10},s,r=this._options.groupingPanel;e&&this._jQuery([this._layout.getHeaderCols()]).sortable({containment:r?void 0:\"parent\",distance:3,axis:r?void 0:\"x\",cursor:\"default\",tolerance:\"intersection\",helper:\"clone\",placeholder:\"slick-sortable-placeholder\"+(this._options.useLegacyUI?\" ui-state-default\":\"\")+\" slick-header-column\",forcePlaceholderSize:r?!0:void 0,appendTo:r?\"body\":void 0,start:(n,h)=>{h.placeholder.outerHeight(h.helper.outerHeight()),h.placeholder.outerWidth(h.helper.outerWidth()),s=!this.hasFrozenColumns()||h.placeholder.offset()[this._options.rtl?\"right\":\"left\"]+Math.round(h.placeholder.width())>this._jQuery(this._layout.getScrollContainerX()).offset()[this._options.rtl?\"right\":\"left\"],this._jQuery(h.helper).addClass(\"slick-header-column-active\")},beforeStop:(n,h)=>{if(this._jQuery(h.helper).removeClass(\"slick-header-column-active\"),r){var d=this._jQuery(this.getGroupingPanel()),c=d.find(\".slick-dropped-grouping\").length;c>0&&(d.find(\".slick-dropped-placeholder\").hide(),d.find(\".slick-dropped-grouping\").show())}},sort:n=>{s&&n.originalEvent.pageX>this._container.clientWidth?t||(t=setInterval(i,100)):s&&n.originalEvent.pageX<this._jQuery(this._layout.getScrollContainerX()).offset().left?t||(t=setInterval(o,100)):(clearInterval(t),t=null)},stop:n=>{var h=!1;if(clearInterval(t),t=null,h||!this.getEditorLock().commitCurrentEdit()){this._jQuery(n.target).sortable(\"cancel\");return}var d;this._layout.getHeaderCols().forEach(c=>d=de(this._initCols,this._jQuery(c).sortable(\"toArray\").map(g=>g.substring(this._uid.length)))),this.setColumns(d),this.trigger(this.onColumnsReordered,{}),n.stopPropagation(),this.setupColumnResize()}})}setupColumnResize(){var s,o,r,l=this._cols,e=[];this._layout.getHeaderCols().forEach(c=>{e=e.concat(Array.from(c.children))});var t,i,o,s,r,n,h,l=this._cols,n,h;if(e.forEach((c,g)=>{var u;(u=c.querySelector(\".slick-resizable-handle\"))==null||u.remove(),l[g].resizable&&(n===void 0&&(n=g),h=g)}),n===void 0)return;let d=!this._jQuery||!this._jQuery.fn||!this._jQuery.fn.drag;e.forEach((c,g)=>{if(g<n||this._options.forceFitColumns&&g>=h)return;let u=c.appendChild(document.createElement(\"div\"));u.classList.add(\"slick-resizable-handle\"),u.draggable=!0;var C=null;let _=p=>{var E;if(!this.getEditorLock().commitCurrentEdit()){!d&&p.preventDefault();return}d&&(C=I=>I.preventDefault(),document.addEventListener(\"dragover\",C)),o=p.pageX,(E=p.target.parentElement)==null||E.classList.add(\"slick-header-column-active\"),e.forEach((I,A)=>{l[A].previousWidth=I.offsetWidth});let H=ue(l,g,o,this._options.forceFitColumns,this._absoluteColMinWidth);r=H.maxPageX,s=H.minPageX,d&&(p.dataTransfer.effectAllowed=\"move\")},f=p=>{if(d){if(!p.pageX&&!p.clientX&&!p.pageY&&!p.clientY)return;p.dataTransfer.effectAllowed=\"none\",p.preventDefault()}ce(l,g,Math.min(r,Math.max(s,p.pageX))-o,this._options.forceFitColumns,this._absoluteColMinWidth),this._layout.afterHeaderColumnDrag(),this.applyColumnHeaderWidths(),this._options.syncColumnCellResize&&this._layout.applyColumnWidths()},L=p=>{var E;for(C&&(document.removeEventListener(\"dragover\",C),C=null),(E=p.target.parentElement)==null||E.classList.remove(\"slick-header-column-active\"),t=0;t<e.length;t++){i=l[t];var H=e[t].offsetWidth;i.previousWidth!==H&&i.rerenderOnResize&&this.invalidateAllRows()}this.updateCanvasWidth(!0),this.render(),this.trigger(this.onColumnsResized)};d?(u.addEventListener(\"dragstart\",_),u.addEventListener(\"drag\",f),u.addEventListener(\"dragend\",L),u.addEventListener(\"dragover\",p=>{p.preventDefault(),p.dataTransfer.effectAllowed=\"move\"})):this._jQuery(u).on(\"dragstart\",_).on(\"drag\",f).on(\"dragend\",L)})}setOverflow(){this._layout.setOverflow(),this._options.viewportClass&&this.getViewports().forEach(e=>D(e,this._options.viewportClass))}measureCellPaddingAndBorder(){let e=[\"border-left-width\",\"border-right-width\",\"padding-left\",\"padding-right\"],t=[\"border-top-width\",\"border-bottom-width\",\"padding-top\",\"padding-bottom\"];var i=this._layout.getHeaderColsFor(0).appendChild(w(\"div\",{class:\"slick-header-column\"+(this._options.useLegacyUI?\" ui-state-default\":\"\"),style:\"visibility:hidden\"}));this._headerColumnWidthDiff=0;var o=getComputedStyle(i);o.boxSizing!=\"border-box\"&&e.forEach(r=>this._headerColumnWidthDiff+=R(o.getPropertyValue(r))||0),i.remove();var s=this._layout.getCanvasNodeFor(0,0).appendChild(w(\"div\",{class:\"slick-row\"},i=w(\"div\",{class:\"slick-cell\",id:\"\",style:\"visibility: hidden\"})));i.innerHTML=\"-\",this._cellWidthDiff=this._cellHeightDiff=0,o=getComputedStyle(i),o.boxSizing!=\"border-box\"&&(e.forEach(r=>this._cellWidthDiff+=R(o.getPropertyValue(r))||0),t.forEach(r=>this._cellHeightDiff+=R(o.getPropertyValue(r))||0)),s.remove(),this._absoluteColMinWidth=Math.max(this._headerColumnWidthDiff,this._cellWidthDiff)}createCssRules(){var e=this._styleNode=document.createElement(\"style\");e.dataset.uid=this._uid;for(var t=this._options.rowHeight-this._cellHeightDiff,i=[\".\"+this._uid+\" { --slick-cell-height: \"+this._options.rowHeight+\"px; }\",\".\"+this._uid+\" .slick-group-header-column { \"+(this._options.rtl?\"right\":\"left\")+\": 1000px; }\",\".\"+this._uid+\" .slick-header-column { \"+(this._options.rtl?\"right\":\"left\")+\": 1000px; }\",\".\"+this._uid+\" .slick-top-panel { height:\"+this._options.topPanelHeight+\"px; }\",\".\"+this._uid+\" .slick-grouping-panel { height:\"+this._options.groupingPanelHeight+\"px; }\",\".\"+this._uid+\" .slick-headerrow-columns { height:\"+this._options.headerRowHeight+\"px; }\",\".\"+this._uid+\" .slick-cell { height:\"+t+\"px; }\",\".\"+this._uid+\" .slick-row { height:\"+this._options.rowHeight+\"px; }\",\".\"+this._uid+\" .slick-footerrow-columns { height:\"+this._options.footerRowHeight+\"px; }\"],o=this._cols,s=0;s<o.length;s++)i.push(\".\"+this._uid+\" .l\"+s+\" { }\"),i.push(\".\"+this._uid+\" .r\"+s+\" { }\");e.appendChild(document.createTextNode(i.join(\" \"))),document.head.appendChild(e)}getColumnCssRules(e){if(!this._stylesheet){var t=document.querySelector(\"style[data-uid='\"+this._uid+\"']\");if(t&&t.sheet)this._stylesheet=t.sheet;else for(var i=document.styleSheets,o=0;o<i.length;o++)if((i[o].ownerNode||i[o].owningElement)==this._styleNode){this._stylesheet=i[o];break}if(!this._stylesheet)throw new Error(\"Cannot find stylesheet.\");this._columnCssRulesL=[],this._columnCssRulesR=[];for(var s=this._stylesheet.cssRules||this._stylesheet.rules,r,l,o=0;o<s.length;o++){var n=s[o].selectorText;(r=/\\.l\\d+/.exec(n))?(l=parseInt(r[0].substring(2,r[0].length),10),this._columnCssRulesL[l]=s[o]):(r=/\\.r\\d+/.exec(n))&&(l=parseInt(r[0].substring(2,r[0].length),10),this._columnCssRulesR[l]=s[o])}}return this._options.rtl?{right:this._columnCssRulesL[e],left:this._columnCssRulesR[e]}:{left:this._columnCssRulesL[e],right:this._columnCssRulesR[e]}}removeCssRules(){this._styleNode.remove(),this._stylesheet=null}destroy(){this.getEditorLock().cancelCurrentEdit(),this.trigger(this.onBeforeDestroy);for(var e=this._plugins.length;e--;)this.unregisterPlugin(this._plugins[e]);this._options.enableColumnReorder&&this._jQuery&&this._jQuery.fn.sortable&&this._jQuery(this._layout.getHeaderCols()).filter(\":ui-sortable\").sortable(\"destroy\"),this.unbindAncestorScrollEvents(),this._jQuery(this._container).off(\".slickgrid\"),this.removeCssRules();var t=this._layout.getCanvasNodes();this._jQuery?this._jQuery(t).off(\"draginit dragstart dragend drag\"):t.forEach(s=>s.remove());for(var i in this)if(Object.prototype.hasOwnProperty.call(this,i)){if(i.startsWith(\"on\")){var o=this[i];o!=null&&o.clear&&(o!=null&&o.subscribe)&&(o==null||o.clear())}delete this[i]}}trigger(e,t,i){return i=i||new ie,t=t||{},t.grid=this,e.notify(t,i,this)}getEditorLock(){return this._options.editorLock}getEditController(){return this._editController}getColumnIndex(e){return this._colById[e]}getInitialColumnIndex(e){return this._initColById[e]}autosizeColumns(){var e=this._viewportInfo,t=e.hasVScroll?e.width-this._scrollDims.width:e.width,i=ae(this._cols,t,this._absoluteColMinWidth);this.applyColumnHeaderWidths(),this.updateCanvasWidth(!0),i&&(this.invalidateAllRows(),this.render())}applyColumnHeaderWidths(){if(this._initialized){for(var e,t=0,i=this._cols,o=i.length,s=this._headerColumnWidthDiff;t<o;t++)if(e=this._layout.getHeaderColumn(t),e){var r=i[t].width-s;e.offsetWidth!==r&&(e.style.width=r+\"px\")}this.updateViewColLeftRight()}}setSortColumn(e,t){this.setSortColumns([{columnId:e,sortAsc:t}])}setSortColumns(e){this._sortColumns=e||[];var t=[];this._layout.getHeaderCols().forEach(i=>t=t.concat(Array.from(i.children))),t.forEach(i=>{i.classList.remove(\"slick-header-column-sorted\");var o=i.querySelector(\".slick-sort-indicator\");o&&o.classList.remove(\"slick-sort-indicator-asc\",\"slick-sort-indicator-desc\")}),this._sortColumns.forEach(i=>{i.sortAsc==null&&(i.sortAsc=!0);var o=this.getColumnIndex(i.columnId);if(o!=null){var s=t[o];if(s){s.classList.add(\"slick-header-column-sorted\");var r=s.querySelector(\".slick-sort-indicator\");r&&r.classList.add(i.sortAsc?\"slick-sort-indicator-asc\":\"slick-sort-indicator-desc\")}}})}getSortColumns(){return this._sortColumns}getColumns(){return this._cols}getInitialColumns(){return this._initCols}updateViewColLeftRight(){this._colLeft=[],this._colRight=[];for(var e=0,t,i=this._cols,o,s=i.length,r=this._layout.getFrozenCols(),o=0;o<s;o++)r===o&&(e=0),t=e+i[o].width,this._colLeft[o]=e,this._colRight[o]=t,e=t}setInitialCols(e){se(e,this._colDefaults);var t={},i=[],o={},s,r;for(s=0;s<e.length;s++)r=e[s],t[r.id]=s,r.visible!==!1&&i.push(r);for(i=this._layout.reorderViewColumns(i,this._options),s=0;s<i.length;s++)r=i[s],o[r.id]=s;this._initCols=e,this._initColById=t,this._cols=i,this._colById=o}setColumns(e){var t,i;this.setInitialCols(e),this.updateViewColLeftRight(),this._initialized&&(this._layout.setPaneVisibility(),this.setOverflow(),this.invalidateAllRows(),this.createColumnHeaders(),this.createColumnFooters(),this.updateGrandTotals(),this.removeCssRules(),this.createCssRules(),this.resizeCanvas(),this.updateCanvasWidth(),this._layout.applyColumnWidths(),this.handleScroll(),(i=(t=this.getSelectionModel())==null?void 0:t.refreshSelections)==null||i.call(t))}getOptions(){return this._options}setOptions(e,t,i,o){var s;this.getEditorLock().commitCurrentEdit()&&(this.makeActiveCellNormal(),e.showColumnHeader!==void 0&&this.setColumnHeaderVisibility(e.showColumnHeader),this._options.enableAddRow!==e.enableAddRow&&this.invalidateRow(this.getDataLength()),this._options=Object.assign(this._options,e),this.validateAndEnforceOptions(),this._layout.afterSetOptions(e),e.columns&&!i&&this.setColumns((s=e.columns)!=null?s:this._initCols),o||this.setOverflow(),this._layout.setScroller(),t||this.render())}validateAndEnforceOptions(){this._options.autoHeight&&(this._options.leaveSpaceForNewRows=!1)}bindToData(){this._data&&(this._data.onRowCountChanged&&this._data.onRowCountChanged.subscribe(this.viewOnRowCountChanged),this._data.onRowsChanged&&this._data.onRowsChanged.subscribe(this.viewOnRowsChanged),this._data.onDataChanged&&this._data.onDataChanged.subscribe(this.viewOnDataChanged))}unbindFromData(){this._data&&(this._data.onRowCountChanged&&this._data.onRowCountChanged.unsubscribe(this.viewOnRowCountChanged),this._data.onRowsChanged&&this._data.onRowsChanged.unsubscribe(this.viewOnRowsChanged),this._data.onDataChanged&&this._data.onDataChanged.unsubscribe(this.viewOnDataChanged))}setData(e,t){this.unbindFromData(),this._data=e,this.bindToData(),this.invalidateAllRows(),this.updateRowCount(),t&&this.scrollTo(0)}getData(){return this._data}getDataLength(){return this._data.getLength?this._data.getLength():this._data.length}getDataLengthIncludingAddNew(){return this.getDataLength()+(this._options.enableAddRow&&(!this._pagingActive||this._pagingIsLastPage)?1:0)}getDataItem(e){return this._data.getItem?this._data.getItem(e):this._data[e]}getTopPanel(){return this._layout.getTopPanelFor(0)}setTopPanelVisibility(e){this._options.showTopPanel!=e&&(this._options.showTopPanel=!!e,this._layout.getTopPanelNodes().forEach(t=>{this._jQuery?this._jQuery(t)[e?\"slideDown\":\"slideUp\"](\"fast\",this.resizeCanvas):(t.style.display=e?\"\":\"none\",this.resizeCanvas())}))}setColumnHeaderVisibility(e,t){this._options.showColumnHeader!=e&&(this._options.showColumnHeader=e,this._layout.getHeaderCols().forEach(i=>{let o=i.parentElement;t&&this._jQuery?this._jQuery(o)[e?\"slideDown\":\"slideUp\"](\"fast\",this.resizeCanvas):(o.style.display=e?\"\":\"none\",this.resizeCanvas())}))}setFooterRowVisibility(e){this._options.showFooterRow!=e&&(this._options.showFooterRow=!!e,this._layout.getFooterRowCols().forEach(t=>{let i=t.parentElement;this._jQuery?this._jQuery(i)[e?\"slideDown\":\"slideUp\"](\"fast\",this.resizeCanvas):(i.style.display=e?\"\":\"none\",this.resizeCanvas())}))}setGroupingPanelVisibility(e){if(this._options.showGroupingPanel!=e){if(this._options.showGroupingPanel=e,!this._options.groupingPanel)return;let t=this._groupingPanel;this._jQuery?this._jQuery(t)[e?\"slideDown\":\"slideUp\"](\"fast\",this.resizeCanvas):(t.style.display=e?\"\":\"none\",this.resizeCanvas())}}setPreHeaderPanelVisibility(e){this.setGroupingPanelVisibility(e)}setHeaderRowVisibility(e){this._options.showHeaderRow!=e&&(this._options.showHeaderRow=e,this._layout.getHeaderRowCols().forEach(t=>{let i=t.parentElement;this._jQuery?this._jQuery(i)[e?\"slideDown\":\"slideUp\"](\"fast\",this.resizeCanvas):(i.style.display=e?\"\":\"none\",this.resizeCanvas())}))}getContainerNode(){return this._container}getUID(){return this._uid}getRowTop(e){return this._options.rowHeight*e-this._pageOffset}getRowFromPosition(e){return Math.floor((e+this._pageOffset)/this._options.rowHeight)}scrollTo(e){let t=this._viewportInfo;e=Math.max(e,0),e=Math.min(e,t.virtualHeight-Math.round(this._jQuery(this._layout.getScrollContainerY()).height())+(t.hasHScroll||this.hasFrozenColumns()?this._scrollDims.height:0));var i=this._pageOffset;this._page=Math.min(this._numberOfPages-1,Math.floor(e/this._pageHeight)),this._pageOffset=Math.round(this._page*this._jumpinessCoefficient);var o=e-this._pageOffset;if(this._pageOffset!=i){var s=this.getVisibleRange(o);this.cleanupRows(s),this.updateRowPositions()}this._scrollTopPrev!=o&&(this._vScrollDir=this._scrollTopPrev+i<o+this._pageOffset?1:-1,this._scrollTopRendered=this._scrollTop=this._scrollTopPrev=o,this._layout.handleScrollV(),this._layout.getScrollContainerY().scrollTop=o,this.trigger(this.onViewportChanged))}getFormatter(e,t){var i=this._data;if(i.getItemMetadata){let h=i.getItemMetadata(e);if(h){let d=h.columns;if(d){var o=d[t.id]||d[this.getColumnIndex(t.id)];if(o){if(o.format)return o.format;if(o.formatter)return F(o.formatter)}}if(h.format)return h.format;if(h.formatter)return F(h.formatter)}}if(t.format)return t.format;if(t.formatter)return F(t.formatter);var s=this._options,r=s.formatterFactory;if(r){if(r.getFormat){var l=r.getFormat(t);if(l)return l}else if(r.getFormatter){var n=r.getFormatter(t);if(n)return F(n)}}return s.defaultFormat?s.defaultFormat:s.defaultFormatter?F(s.defaultFormatter):z}getFormatterContext(e,t){var i=this._cols[t],o=this.getDataItem(e);let s={cell:t,column:i,grid:this,escape:T,item:o,row:e};return o&&(s.value=this.getDataItemValueForColumn(o,i)),s}getEditor(e,t){var i=this._cols[t],o=this._data.getItemMetadata&&this._data.getItemMetadata(e),s=o&&o.columns;return s&&s[i.id]&&s[i.id].editor!==void 0?s[i.id].editor:s&&s[t]&&s[t].editor!==void 0?s[t].editor:i.editor||this._options.editorFactory&&this._options.editorFactory.getEditor(i,e)}getDataItemValueForColumn(e,t){return this._options.dataItemColumnValueExtractor?this._options.dataItemColumnValueExtractor(e,t):e[t.field]}appendRowHtml(e,t,i,o,s){var H,E;var r=this.getDataItem(i),l=i<s&&!r,n=\"slick-row\"+(this._layout.isFrozenRow(i)?\" frozen\":\"\")+(l?\" loading\":\"\")+(i===this._activeRow?\" active\":\"\")+(i%2==1?\" odd\":\" even\");r||(n+=\" \"+this._options.addNewRowCssClass);var h=(E=(H=this._data).getItemMetadata)==null?void 0:E.call(H,i);h&&h.cssClasses&&(n+=\" \"+h.cssClasses);var d=this._layout.getFrozenRowOffset(i),c=\"<div class='\"+(this._options.useLegacyUI?\"ui-widget-content \":\"\")+n+\"' style='top:\"+(this.getRowTop(i)-d)+\"px'>\";e.push(c);let g=this._layout.getFrozenCols();g&&t.push(c);for(var u,C,_=this._cols,f=0,L=_.length;f<L;f++){var p=null;if(C=_[f],u=1,h&&h.columns&&(p=h.columns[C.id]||h.columns[f],u=p&&p.colspan||1,u===\"*\"&&(u=L-f)),this._colRight[Math.min(L-1,f+u-1)]>o.leftPx){if(this._colLeft[f]>o.rightPx)break;this.appendCellHtml(g>0&&f>=g?t:e,i,f,u,r,p)}u>1&&(f+=u-1)}e.push(\"</div>\"),g&&t.push(\"</div>\")}appendCellHtml(e,t,i,o,s,r){var p,H,E,I,A;var l=this._cols,n=this._layout.getFrozenCols(),h=l[i],d=\"slick-cell l\"+i+\" r\"+Math.min(l.length-1,i+o-1)+(h.cssClass?\" \"+h.cssClass:\"\");i<n&&(d+=\" frozen\"),t===this._activeRow&&i===this._activeCell&&(d+=\" active\"),r&&r.cssClasses&&(d+=\" \"+r.cssClasses);for(var c in this._cellCssClasses)this._cellCssClasses[c][t]&&this._cellCssClasses[c][t][h.id]&&(d+=\" \"+this._cellCssClasses[c][t][h.id]);var g;let u={cell:i,column:h,escape:T,grid:this,item:s,row:t};if(s&&(u.value=this.getDataItemValueForColumn(s,h),g=this.getFormatter(t,h)(u)),d=T(d),(p=u.addClass)!=null&&p.length||(H=u.addAttrs)!=null&&H.length||(E=u.tooltip)!=null&&E.length){(I=u.addClass)!=null&&I.length&&(d+=\" \"+T(u.addClass)),e.push('<div class=\"'+d+'\"'),(A=u.addClass)!=null&&A.length&&e.push(' data-fmtcls=\"'+T(u.addClass)+'\"');var C=u.addAttrs;if(C!=null){var _=[];for(var f in C)e.push(f+'=\"'+T(C[f])+'\"'),_.push(f);e.push(' data-fmtatt=\"'+T(_.join(\",\"))+'\"')}var L=u.tooltip;L!=null&&L.length&&e.push('tooltip=\"'+T(L)+'\"'),g!=null?e.push(\">\"+g+\"</div>\"):e.push(\"></div>\")}else g!=null?e.push('<div class=\"'+d+'\">'+g+\"</div>\"):e.push('<div class=\"'+d+'\"></div>');this._rowsCache[t].cellRenderQueue.push(i),this._rowsCache[t].cellColSpans[i]=o}cleanupRows(e){var t;for(var i in this._rowsCache)t=parseInt(i,10),t!==this._activeRow&&(t<e.top||t>e.bottom)&&!this._layout.isFrozenRow(t)&&this.removeRowFromCache(t);this._options.enableAsyncPostRenderCleanup&&this.startPostProcessingCleanup()}invalidate(){this.updateRowCount(),this.invalidateAllRows(),this.render(),this.updateGrandTotals()}invalidateAllRows(){this._currentEditor&&this.makeActiveCellNormal();for(var e in this._rowsCache)this.removeRowFromCache(parseInt(e,10));this._options.enableAsyncPostRenderCleanup&&this.startPostProcessingCleanup()}queuePostProcessedRowForCleanup(e,t,i){var r,l;this._postProcessGroupId++;for(var o in t)if(t.hasOwnProperty(o)){var s=parseInt(o,10);this._postProcessCleanupQueue.push({groupId:this._postProcessGroupId,cellNode:e.cellNodesByColumnIdx[s|0],columnIdx:s|0,rowIdx:i})}this._postProcessCleanupQueue.push({groupId:this._postProcessGroupId,rowNodeL:e.rowNodeL,rowNodeR:e.rowNodeR}),(r=e.rowNodeL)==null||r.remove(),(l=e.rowNodeR)==null||l.remove()}queuePostProcessedCellForCleanup(e,t,i){this._postProcessCleanupQueue.push({groupId:this._postProcessGroupId,cellNode:e,columnIdx:t,rowIdx:i}),this._jQuery(e).detach()}removeRowFromCache(e){var i,o,s,r;var t=this._rowsCache[e];t&&(this._options.enableAsyncPostRenderCleanup&&this._postProcessedRows[e]?this.queuePostProcessedRowForCleanup(t,this._postProcessedRows[e],e):((o=(i=t.rowNodeL)==null?void 0:i.parentElement)==null||o.removeChild(t.rowNodeL),(r=(s=t.rowNodeR)==null?void 0:s.parentElement)==null||r.removeChild(t.rowNodeR)),delete this._rowsCache[e],delete this._postProcessedRows[e])}invalidateRows(e){var t,i;if(!(!e||!e.length)){for(this._vScrollDir=0,t=0,i=e.length;t<i;t++)this._currentEditor&&this._activeRow===e[t]&&this.makeActiveCellNormal(),this._rowsCache[e[t]]&&this.removeRowFromCache(e[t]);this._options.enableAsyncPostRenderCleanup&&this.startPostProcessingCleanup()}}invalidateRow(e){this.invalidateRows([e])}updateCell(e,t){var i=this.getCellNode(e,t);i&&(this._currentEditor&&this._activeRow===e&&this._activeCell===t?this._currentEditor.loadValue(this.getDataItem(e)):(this.updateCellWithFormatter(i,e,t),this.invalidatePostProcessingResults(e)))}updateCellWithFormatter(e,t,i){var o;let s=this.getFormatterContext(t,i);s.item&&(o=this.getFormatter(t,s.column)(s)),$(s,o,e)}updateRow(e){var t=this._rowsCache[e];if(t){this.ensureCellNodesInRowsCache(e);var i=this.getDataItem(e);for(var o in t.cellNodesByColumnIdx)if(t.cellNodesByColumnIdx.hasOwnProperty(o)){var s=parseInt(o,10);e===this._activeRow&&s===this._activeCell&&this._currentEditor?this._currentEditor.loadValue(i):this.updateCellWithFormatter(t.cellNodesByColumnIdx[s],e,s)}this.invalidatePostProcessingResults(e)}}calcViewportSize(){let e=this._layout,t=this._viewportInfo;if(t.width=ge(this._container),t.groupingPanelHeight=this._options.groupingPanel&&this._options.showGroupingPanel?this._options.groupingPanelHeight+x(this._groupingPanel):0,t.topPanelHeight=this._options.showTopPanel?this._options.topPanelHeight+x(e.getTopPanelFor(0).parentElement):0,t.headerRowHeight=this._options.showHeaderRow?this._options.headerRowHeight+x(e.getHeaderRowColsFor(0).parentElement):0,t.footerRowHeight=this._options.showFooterRow?this._options.footerRowHeight+x(e.getFooterRowColsFor(0).parentElement):0,t.headerHeight=this._options.showColumnHeader?R(getComputedStyle(e.getHeaderColsFor(0).parentElement).height)+x(e.getHeaderColsFor(0).parentElement):0,this._options.autoHeight)t.height=this._options.rowHeight*this.getDataLengthIncludingAddNew(),this._layout.calcCanvasWidth()>t.width&&(t.height+=this._scrollDims.height);else{var i=getComputedStyle(this._container);t.height=R(i.height)-R(i.paddingTop)-R(i.paddingBottom)-t.headerHeight-t.topPanelHeight-t.headerRowHeight-t.footerRowHeight-t.groupingPanelHeight}t.numVisibleRows=Math.ceil(t.height/this._options.rowHeight)}updatePagingStatusFromView(e){this._pagingActive=e.pageSize!==0,this._pagingIsLastPage=e.pageNum==e.totalPages-1}updateRowCount(){if(!this._initialized)return;var e=this.getDataLengthIncludingAddNew(),t=this._layout.getScrollCanvasY(),i=Math.round(R(getComputedStyle(t).height)),o;let s=this._layout.getFrozenRows();s?o=this.getDataLength()-s:o=e+(this._options.leaveSpaceForNewRows?this._viewportInfo.numVisibleRows-1:0);var r=Math.round(R(getComputedStyle(this._layout.getScrollContainerY()).height));let l=this._viewportInfo;var n=l.hasVScroll;l.hasVScroll=!this._options.autoHeight&&o*this._options.rowHeight>r,this.makeActiveCellNormal();var h=e-1;for(var d in this._rowsCache){var c=parseInt(d,10);c>=h&&this.removeRowFromCache(c)}this._options.enableAsyncPostRenderCleanup&&this.startPostProcessingCleanup(),l.virtualHeight=Math.max(this._options.rowHeight*o,r-this._scrollDims.height),this._activeCellNode&&this._activeRow>h&&this.resetActiveCell(),l.virtualHeight<K()?(l.realScrollHeight=this._pageHeight=l.virtualHeight,this._numberOfPages=1,this._jumpinessCoefficient=0):(l.realScrollHeight=K(),this._pageHeight=l.realScrollHeight/100,this._numberOfPages=Math.floor(l.virtualHeight/this._pageHeight),this._jumpinessCoefficient=(l.virtualHeight-l.realScrollHeight)/(this._numberOfPages-1)),l.realScrollHeight!==i&&(this._layout.realScrollHeightChange(),this._scrollTop=this._layout.getScrollContainerY().scrollTop);var g=this._scrollTop+this._pageOffset<=l.virtualHeight-r;l.virtualHeight==0||this._scrollTop==0?this._page=this._pageOffset=0:g?this.scrollTo(this._scrollTop+this._pageOffset):this.scrollTo(l.virtualHeight-r),l.realScrollHeight!=i&&this._options.autoHeight&&this.resizeCanvas(),this._options.forceFitColumns&&n!=l.hasVScroll&&this.autosizeColumns(),this.updateCanvasWidth(!1)}getViewport(e,t){return this.getVisibleRange(e,t)}getVisibleRange(e,t){return e==null&&(e=this._scrollTop),t==null&&(t=this._scrollLeft),this._options.rtl&&(t=Math.abs(t)),{top:this.getRowFromPosition(e),bottom:this.getRowFromPosition(e+this._viewportInfo.height)+1,leftPx:t,rightPx:t+this._viewportInfo.width}}getRenderedRange(e,t){var i=this.getVisibleRange(e,t),o=Math.round(this._viewportInfo.height/this._options.rowHeight),s=this._options.minBuffer||3;return this._vScrollDir==-1?(i.top-=o,i.bottom+=s):this._vScrollDir==1?(i.top-=s,i.bottom+=o):(i.top-=s,i.bottom+=s),i.top=Math.max(0,i.top),i.bottom=Math.min(this.getDataLengthIncludingAddNew()-1,i.bottom),this._options.renderAllCells?(i.leftPx=0,i.rightPx=this._layout.getCanvasWidth()):(i.leftPx-=this._viewportInfo.width,i.rightPx+=this._viewportInfo.width,i.leftPx=Math.max(0,i.leftPx),i.rightPx=Math.min(this._layout.getCanvasWidth(),i.rightPx)),i}ensureCellNodesInRowsCache(e){var s,r,l,n;var t=this._rowsCache[e];if(t&&t.cellRenderQueue.length)for(var i=(l=(s=t.rowNodeR)==null?void 0:s.lastElementChild)!=null?l:(r=t.rowNodeL)==null?void 0:r.lastElementChild;i&&t.cellRenderQueue.length;){var o=t.cellRenderQueue.pop();t.cellNodesByColumnIdx[o]=i,i=i.previousElementSibling,i==null&&(i=(n=t.rowNodeL)==null?void 0:n.lastElementChild)}}cleanUpCells(e,t){if(!this._layout.isFrozenRow(t)){var i=this._rowsCache[t],o=[],s=this._layout.getFrozenCols();for(var r in i.cellNodesByColumnIdx)if(i.cellNodesByColumnIdx.hasOwnProperty(r)){var l=parseInt(r,10);if(!(l<s)){var n=i.cellColSpans[l],h=this._cols;(this._colLeft[l]>e.rightPx||this._colRight[Math.min(h.length-1,l+n-1)]<e.leftPx)&&(t==this._activeRow&&l===this._activeCell||o.push(l))}}var d,c;for(this._postProcessGroupId++;(d=o.pop())!=null;)c=i.cellNodesByColumnIdx[d],this._options.enableAsyncPostRenderCleanup&&this._postProcessedRows[t]&&this._postProcessedRows[t][d]?this.queuePostProcessedCellForCleanup(c,d,t):c.parentElement.removeChild(c),delete i.cellColSpans[d],delete i.cellNodesByColumnIdx[d],this._postProcessedRows[t]&&delete this._postProcessedRows[t][d]}}cleanUpAndRenderCells(e){for(var t,i=[],o=[],s,r,l=this._cols,n=e.top,h=e.bottom;n<=h;n++)if(t=this._rowsCache[n],!!t){this.ensureCellNodesInRowsCache(n),this.cleanUpCells(e,n),s=0;for(var d=this._data.getItemMetadata&&this._data.getItemMetadata(n),c=d&&d.columns,g=this.getDataItem(n),u=0,C=l.length;u<C&&!(this._colLeft[u]>e.rightPx);u++){if((r=t.cellColSpans[u])!=null){u+=r>1?r-1:0;continue}var _=null;r=1,c&&(_=c[l[u].id]||c[u],r=_&&_.colspan||1,r===\"*\"&&(r=C-u)),this._colRight[Math.min(C-1,u+r-1)]>e.leftPx&&(this.appendCellHtml(i,n,u,r,g,_),s++),u+=r>1?r-1:0}s&&o.push(n)}if(i.length){var f=document.createElement(\"div\");f.innerHTML=i.join(\"\");for(var L,p,H=this._layout.getFrozenCols();(L=o.pop())!=null;){t=this._rowsCache[L];for(var E;(E=t.cellRenderQueue.pop())!=null;)p=f.lastElementChild,H>0&&E>=H?t.rowNodeR.appendChild(p):t.rowNodeL.appendChild(p),t.cellNodesByColumnIdx[E]=p}}}renderRows(e){for(var t=[],i=[],o=[],s=!1,r=this.getDataLength(),l=e.top,n=e.bottom;l<=n;l++)this._rowsCache[l]||this.hasFrozenRows()&&this._options.frozenBottom&&l==r||(o.push(l),this._rowsCache[l]={rowNodeL:null,rowNodeR:null,cellColSpans:[],cellNodesByColumnIdx:[],cellRenderQueue:[]},this.appendRowHtml(t,i,l,e,r),this._activeCellNode&&this._activeRow===l&&(s=!0));if(!o.length)return;var h=document.createElement(\"div\"),d=document.createElement(\"div\");h.innerHTML=t.join(\"\"),d.innerHTML=i.join(\"\");let c=this._layout;for(var l=0,n=o.length;l<n;l++){var g=o[l],u=this._rowsCache[g];u.rowNodeL=h.firstElementChild,u.rowNodeR=d.firstElementChild,c.appendCachedRow(g,u.rowNodeL,u.rowNodeR)}s&&(this._activeCellNode=this.getCellNode(this._activeRow,this._activeCell))}startPostProcessing(){this._options.enableAsyncPostRender&&(clearTimeout(this._hPostRender),this._options.asyncPostRenderDelay<0?this.asyncPostProcessRows():this._hPostRender=setTimeout(this.asyncPostProcessRows.bind(this),this._options.asyncPostRenderDelay))}startPostProcessingCleanup(){this._options.enableAsyncPostRenderCleanup&&(clearTimeout(this._hPostRenderCleanup),this._options.asyncPostCleanupDelay<0?this.asyncPostProcessCleanupRows():this._hPostRenderCleanup=setTimeout(this.asyncPostProcessCleanupRows.bind(this),this._options.asyncPostCleanupDelay))}invalidatePostProcessingResults(e){if(this._options.enableAsyncPostRenderCleanup)for(var t in this._postProcessedRows[e])this._postProcessedRows[e].hasOwnProperty(t)&&(this._postProcessedRows[e][t]=\"C\");else delete this._postProcessedRows[e];this._postProcessFromRow=Math.min(this._postProcessFromRow,e),this._postProcessToRow=Math.max(this._postProcessToRow,e),this.startPostProcessing()}updateRowPositions(){for(var e in this._rowsCache){var t=this._rowsCache[e],i=this.getRowTop(parseInt(e,10))+\"px\";t.rowNodeL&&(t.rowNodeL.style.top=i),t.rowNodeR&&(t.rowNodeR.style.top=i)}}updateGrandTotals(){var r,l;if(!(!this._options.showFooterRow||!this._initialized)){var e;this._data&&this._data.getGrandTotals&&(e=this._data.getGrandTotals()),e=e!=null?e:{};var t=this._cols;for(var i of t)if(i.id!=null){var o=(r=i.groupTotalsFormatter)!=null?r:this._options.groupTotalsFormatter;if(!o)continue;var s=(l=o(e,i,this))!=null?l:\"\";this.getFooterRowColumn(i.id).innerHTML=s}}}groupTotalsFormatter(e,t,i){return this._options.groupTotalsFormatter?this._options.groupTotalsFormatter(e,t,i!=null?i:this):\"\"}handleMouseWheel(e,t,i,o){i=(typeof i==\"undefined\"?e.originalEvent.deltaX:i)||0,o=(typeof o==\"undefined\"?e.originalEvent.deltaY:o)||0,this._scrollTop=Math.max(0,this._layout.getScrollContainerY().scrollTop-o*this._options.rowHeight),this._scrollLeft=this._layout.getScrollContainerX().scrollLeft+i*10,this.handleScroll(!0)}handleScroll(e){this._scrollTop=this._layout.getScrollContainerY().scrollTop,this._scrollLeft=this._layout.getScrollContainerX().scrollLeft;var t=Math.abs(this._scrollTop-this._scrollTopPrev),i=Math.abs(this._scrollLeft-this._scrollLeftPrev);(i||t)&&(this._ignoreScrollUntil=new Date().getTime()+100),i&&(this._scrollLeftPrev=this._scrollLeft,this._layout.getScrollContainerX().scrollLeft=this._scrollLeft,this._layout.handleScrollH());let o=this._viewportInfo;if(t)if(this._vScrollDir=this._scrollTopPrev<this._scrollTop?1:-1,this._scrollTopPrev=this._scrollTop,e===!0&&(this._layout.getScrollContainerY().scrollTop=this._scrollTop),this._layout.handleScrollV(),t<this._viewportInfo.height)this.scrollTo(this._scrollTop+this._pageOffset);else{var s=this._pageOffset;o.realScrollHeight==o.height?this._page=0:this._page=Math.min(this._numberOfPages-1,Math.floor(this._scrollTop*((o.virtualHeight-this._viewportInfo.height)/(o.realScrollHeight-this._viewportInfo.height))*(1/this._pageHeight))),this._pageOffset=Math.round(this._page*this._jumpinessCoefficient),s!=this._pageOffset&&this.invalidateAllRows()}return(i||t)&&(this._hRender&&clearTimeout(this._hRender),(Math.abs(this._scrollTopRendered-this._scrollTop)>20||Math.abs(this._scrollLeftRendered-this._scrollLeft)>20)&&(this._options.forceSyncScrolling||this._options.forceSyncScrollInterval&&this._lastRenderTime<new Date().getTime()-this._options.forceSyncScrollInterval?this.render():this._hRender=setTimeout(this.render,50),this.trigger(this.onViewportChanged))),this.trigger(this.onScroll,{scrollLeft:this._scrollLeft,scrollTop:this._scrollTop}),!!(i||t)}asyncPostProcessRows(){for(var e=this.getDataLength(),t=this._cols;this._postProcessFromRow<=this._postProcessToRow;){var i=this._vScrollDir>=0?this._postProcessFromRow++:this._postProcessToRow--,o=this._rowsCache[i];if(!(!o||i>=e)){this._postProcessedRows[i]||(this._postProcessedRows[i]={}),this.ensureCellNodesInRowsCache(i);for(var s in o.cellNodesByColumnIdx)if(o.cellNodesByColumnIdx.hasOwnProperty(s)){var r=parseInt(s,10),l=t[r],n=this._postProcessedRows[i][r];if(n!==\"R\"){if(l.asyncPostRender||l.asyncPostRenderCleanup){var h=o.cellNodesByColumnIdx[r];h&&l.asyncPostRender&&l.asyncPostRender(h,i,this.getDataItem(i),l,n===\"C\")}this._postProcessedRows[i][r]=\"R\"}}if(this._options.asyncPostRenderDelay>=0){this._hPostRender=setTimeout(this.asyncPostProcessRows.bind(this),this._options.asyncPostRenderDelay);return}}}}asyncPostProcessCleanupRows(){var s;for(var e=this._cols;((s=this._postProcessCleanupQueue)==null?void 0:s.length)>0;){for(var t=this._postProcessCleanupQueue[0].groupId;this._postProcessCleanupQueue.length>0&&this._postProcessCleanupQueue[0].groupId==t;){var i=this._postProcessCleanupQueue.shift();if(i.rowNodeL&&i.rowNodeL.remove(),i.rowNodeR&&i.rowNodeR.remove(),i.cellNode!=null){var o=e[i.columnIdx];o&&o.asyncPostRenderCleanup&&(o.asyncPostRenderCleanup(i.cellNode,i.rowIdx,o),i.cellNode.remove())}}if(this._options.asyncPostRenderDelay>=0){this._hPostRenderCleanup=setTimeout(this.asyncPostProcessCleanupRows.bind(this),this._options.asyncPostCleanupDelay);return}}}updateCellCssStylesOnRenderedRows(e,t){var i,o,s,r;for(var l in this._rowsCache){if(r=t&&t[l],s=e&&e[l],r){for(o in r)if((!s||r[o]!=s[o])&&(i=this.getCellNode(parseInt(l,10),this.getColumnIndex(o)),i)){let n=r[o];ne(i,n)}}if(s){for(o in s)if((!r||r[o]!=s[o])&&(i=this.getCellNode(parseInt(l,10),this.getColumnIndex(o)),i)){let n=s[o];D(i,n)}}}}addCellCssStyles(e,t){if(this._cellCssClasses[e])throw\"addCellCssStyles: cell CSS hash with key '\"+e+\"' already exists.\";this._cellCssClasses[e]=t,this.updateCellCssStylesOnRenderedRows(t,null),this.trigger(this.onCellCssStylesChanged,{key:e,hash:t})}removeCellCssStyles(e){this._cellCssClasses[e]&&(this.updateCellCssStylesOnRenderedRows(null,this._cellCssClasses[e]),delete this._cellCssClasses[e],this.trigger(this.onCellCssStylesChanged,{key:e,hash:null}))}setCellCssStyles(e,t){var i=this._cellCssClasses[e];this._cellCssClasses[e]=t,this.updateCellCssStylesOnRenderedRows(t,i),this.trigger(this.onCellCssStylesChanged,{key:e,hash:t})}getCellCssStyles(e){return this._cellCssClasses[e]}flashCell(e,t,i){if(i=i||100,this._rowsCache[e]){var o=this._jQuery(this.getCellNode(e,t));r(4)}var s=this._options.cellFlashingCssClass;function r(l){l&&setTimeout(function(){o.queue(function(){o.toggleClass(s).dequeue(),r(l-1)})},i)}}handleDragInit(e,t){var i=this.getCellFromEvent(e);if(!i||!this.cellExists(i.row,i.cell))return!1;var o=this.trigger(this.onDragInit,t,e);return e.isImmediatePropagationStopped&&e.isImmediatePropagationStopped()?o:!1}handleDragStart(e,t){var i=this.getCellFromEvent(e);if(!i||!this.cellExists(i.row,i.cell))return!1;var o=this.trigger(this.onDragStart,t,e);return e.isImmediatePropagationStopped&&e.isImmediatePropagationStopped()?o:!1}handleDrag(e,t){return this.trigger(this.onDrag,t,e)}handleDragEnd(e,t){this.trigger(this.onDragEnd,t,e)}handleKeyDown(e){this.trigger(this.onKeyDown,{row:this._activeRow,cell:this._activeCell},e);var t=e.isImmediatePropagationStopped&&e.isImmediatePropagationStopped();if(!t&&!e.shiftKey&&!e.altKey){if(this._options.editable&&this._currentEditor&&this._currentEditor.keyCaptureList&&this._currentEditor.keyCaptureList.indexOf(e.which)>=0)return;e.key===\"Home\"?e.ctrlKey?(this.navigateTop(),t=!0):t=this.navigateRowStart():e.key===\"End\"&&(e.ctrlKey?(this.navigateBottom(),t=!0):t=this.navigateRowEnd())}if(!t)if(!e.shiftKey&&!e.altKey&&!e.ctrlKey){if(this._options.editable&&this._currentEditor&&this._currentEditor.keyCaptureList&&this._currentEditor.keyCaptureList.indexOf(e.which)>=0)return;if(e.key===\"Esc\"||e.key===\"Escape\"){if(!this.getEditorLock().isActive())return;this.cancelEditAndSetFocus()}else e.key===\"PageDown\"?(this.navigatePageDown(),t=!0):e.key===\"PageUp\"?(this.navigatePageUp(),t=!0):e.key===\"Left\"||e.key===\"ArrowLeft\"?t=this.navigateLeft():e.key===\"Right\"||e.key===\"ArrowRight\"?t=this.navigateRight():e.key===\"Up\"||e.key===\"ArrowUp\"?t=this.navigateUp():e.key===\"Down\"||e.key===\"ArrowDown\"?t=this.navigateDown():e.key===\"Tab\"?this._options.enableTabKeyNavigation&&(t=this.navigateNext()):e.key===\"Enter\"&&(this._options.editable&&(this._currentEditor?this._activeRow===this.getDataLength()?this.navigateDown():this.commitEditAndSetFocus():this.getEditorLock().commitCurrentEdit()&&this.makeActiveCellEditable()),t=!0)}else e.key===\"Tab\"&&e.shiftKey&&!e.ctrlKey&&!e.altKey&&(t=this.navigatePrev());if(t){e.stopPropagation(),e.preventDefault();try{e.originalEvent.keyCode=0}catch(i){}}}handleClick(e){this._currentEditor||(e.target!=document.activeElement||this._jQuery(e.target).hasClass(\"slick-cell\"))&&this.setFocus();var t=this.getCellFromEvent(e);if(!(!t||this._currentEditor!=null&&this._activeRow==t.row&&this._activeCell==t.cell)&&(this.trigger(this.onClick,{row:t.row,cell:t.cell},e),!(e.isImmediatePropagationStopped&&e.isImmediatePropagationStopped())&&this.canCellBeActive(t.row,t.cell)&&(!this.getEditorLock().isActive()||this.getEditorLock().commitCurrentEdit()))){var i=e.target&&e.target.classList.contains(re),o=this._cols[t.cell],s=!!(this._options.editable&&o&&o.editor&&this._options.suppressActiveCellChangeOnEdit);this.setActiveCellInternal(this.getCellNode(t.row,t.cell),null,i,s,e)}}handleContextMenu(e){var t=e.target.closest(\".slick-cell\");t&&(this._activeCellNode===t&&this._currentEditor!=null||this.trigger(this.onContextMenu,{},e))}handleDblClick(e){var t=this.getCellFromEvent(e);!t||this._currentEditor!=null&&this._activeRow==t.row&&this._activeCell==t.cell||(this.trigger(this.onDblClick,{row:t.row,cell:t.cell},e),!(e.isImmediatePropagationStopped&&e.isImmediatePropagationStopped())&&this._options.editable&&this.gotoCell(t.row,t.cell,!0))}handleHeaderMouseEnter(e){let t=this.getColumnFromNode(e.target);t&&this.trigger(this.onHeaderMouseEnter,{column:t},e)}handleHeaderMouseLeave(e){let t=this.getColumnFromNode(e.target);t&&this.trigger(this.onHeaderMouseLeave,{column:t},e)}handleHeaderContextMenu(e){var t=e.target.closest(\".slick-header-column\"),i=this.getColumnFromNode(t);i&&this.trigger(this.onHeaderContextMenu,{column:i},e)}handleHeaderClick(e){var t=e.target.closest(\".slick-header-column\"),i=this.getColumnFromNode(t);i&&this.trigger(this.onHeaderClick,{column:i},e)}handleMouseEnter(e){this.trigger(this.onMouseEnter,{},e)}handleMouseLeave(e){this.trigger(this.onMouseLeave,{},e)}cellExists(e,t){return!(e<0||e>=this.getDataLength()||t<0||t>=this._cols.length)}getCellFromPoint(e,t){for(var i=this.getRowFromPosition(t),o=0,s=this._cols,r=0,l=0;l<s.length&&r<e;l++)r+=s[l].width,o++;return o<0&&(o=0),{row:i,cell:o-1}}getCellFromNode(e){if(e==null)return null;var t=e.dataset.c;if(t!=null)return parseInt(t,10);var i=/\\sl(\\d+)\\s/.exec(\" \"+e.className+\" \");return i?parseInt(i[1],10):null}getColumnFromNode(e){if(e==null)return null;var t=this.getCellFromNode(e);return t===null&&this._jQuery?this._jQuery(t).data(\"column\"):this._cols[t]}getRowFromNode(e){if(e!=null)for(var t in this._rowsCache){var i=this._rowsCache[t];if(i.rowNodeL===e||i.rowNodeR===e)return parseInt(t,10)}return null}getCellFromEvent(e){var t,i,o=e.target.closest(\".slick-cell\");return!o||(t=this._layout.getRowFromCellNode(o,e.clientX,e.clientY),i=this.getCellFromNode(o),t==null||i==null)?null:{row:t,cell:i}}getCellNodeBox(e,t){if(!this.cellExists(e,t))return null;for(var i=this._layout.getFrozenRowOffset(e),o=this._cols,s=this._layout.getFrozenCols(),r=this.getRowTop(e)-i,l=r+this._options.rowHeight-1,n=0,h=0;h<t;h++)n+=o[h].width,h==s-1&&(n=0);var d=n+o[t].width;return this._options.rtl?{top:r,right:n,bottom:l,left:d}:{top:r,left:n,bottom:l,right:d}}resetActiveCell(){this.setActiveCellInternal(null,!1)}focus(){this.setFocus()}setFocus(){this._tabbingDirection==-1?this._focusSink1.focus():this._focusSink2.focus()}scrollCellIntoView(e,t,i){if(this.scrollRowIntoView(e,i),!(t<this._layout.getFrozenCols())){var o=this.getColspan(e,t);this.internalScrollColumnIntoView(this._colLeft[t],this._colRight[t+(o>1?o-1:0)])}}scrollColumnIntoView(e){this.internalScrollColumnIntoView(this._colLeft[e],this._colRight[e])}internalScrollColumnIntoView(e,t){var i=this._scrollLeft+R(getComputedStyle(this._layout.getScrollContainerX()).width)-(this._viewportInfo.hasVScroll?this._scrollDims.width:0),o;if(e<this._scrollLeft)o=e;else if(t>i)o=Math.min(e,t-this._layout.getScrollContainerX().clientWidth);else return;this._layout.getScrollContainerX().scrollLeft=o,this.handleScroll(),this.render()}setActiveCellInternal(e,t,i,o,s){var c,g;if(this._activeCellNode!=null){this.makeActiveCellNormal(),this._activeCellNode.classList.remove(\"active\");var r=this._rowsCache[this._activeRow];r&&(r.rowNodeL&&r.rowNodeL.classList.remove(\"active\"),r.rowNodeR&&r.rowNodeR.classList.remove(\"active\"))}if(this._activeCellNode=e,this._activeCellNode!=null){var l=this._activeCellNode.getBoundingClientRect(),n=Math.floor((g=(c=this._activeCellNode.closest(\".grid-canvas\"))==null?void 0:c.getBoundingClientRect().top)!=null?g:0+document.body.scrollTop),h=this._activeCellNode.closest(\".grid-canvas-bottom\")!=null;this.hasFrozenRows()&&h&&(n-=this._options.frozenBottom?Math.round(R(getComputedStyle(this._layout.getCanvasNodeFor(0,0)).height)):this._layout.getFrozenRows()*this._options.rowHeight);var d=this.getCellFromPoint(l[this._options.rtl?\"right\":\"left\"]+document.body.scrollLeft,Math.ceil(l.top+document.body.scrollTop)-n);if(this._activeRow=d.row,this._activeCell=this._activePosX=this.getCellFromNode(this._activeCellNode),this._options.showCellSelection){this._activeCellNode.classList.add(\"active\");var r=this._rowsCache[this._activeRow];r&&(r.rowNodeL&&r.rowNodeL.classList.add(\"active\"),r.rowNodeR&&r.rowNodeR.classList.add(\"active\"))}t==null&&(t=this._activeRow==this.getDataLength()||this._options.autoEdit),this._options.editable&&t&&this.isCellPotentiallyEditable(this._activeRow,this._activeCell)&&(clearTimeout(this._hEditorLoader),this._options.asyncEditorLoading?this._hEditorLoader=setTimeout(()=>{this.makeActiveCellEditable(void 0,i,s)},this._options.asyncEditorLoadDelay):this.makeActiveCellEditable(void 0,i,s))}else this._activeRow=this._activeCell=null;o||this.trigger(this.onActiveCellChanged,this.getActiveCell())}clearTextSelection(){if(document.selection&&document.selection.empty)try{document.selection.empty()}catch(t){}else if(window.getSelection){var e=window.getSelection();e&&e.removeAllRanges&&e.removeAllRanges()}}isCellPotentiallyEditable(e,t){var i=this.getDataLength();return!(e<i&&!this.getDataItem(e)||this._cols[t].cannotTriggerInsert&&e>=i||!this.getEditor(e,t))}makeActiveCellNormal(){this._currentEditor&&(this.trigger(this.onBeforeCellEditorDestroy,{editor:this._currentEditor}),this._currentEditor.destroy(),this._currentEditor=null,this._activeCellNode&&(this._activeCellNode.classList.remove(\"editable\",\"invalid\"),this.updateCellWithFormatter(this._activeCellNode,this._activeRow,this._activeCell),this.invalidatePostProcessingResults(this._activeRow)),navigator.userAgent.toLowerCase().match(/msie/)&&this.clearTextSelection(),this.getEditorLock().deactivate(this._editController))}editActiveCell(e){this.makeActiveCellEditable(e)}makeActiveCellEditable(e,t,i){if(this._activeCellNode){if(!this._options.editable)throw\"Grid : makeActiveCellEditable : should never get called when options.editable is false\";if(clearTimeout(this._hEditorLoader),!!this.isCellPotentiallyEditable(this._activeRow,this._activeCell)){var o=this._cols[this._activeCell],s=this.getDataItem(this._activeRow);if(this.trigger(this.onBeforeEditCell,{row:this._activeRow,cell:this._activeCell,item:s,column:o})===!1){this.setFocus();return}this.getEditorLock().activate(this._editController),this._activeCellNode.classList.add(\"editable\");var r=e||this.getEditor(this._activeRow,this._activeCell);!e&&!r.suppressClearOnEdit&&(this._activeCellNode.innerHTML=\"\");var l=this._data.getItemMetadata&&this._data.getItemMetadata(this._activeRow),n=l&&l.columns,h=n&&(n[o.id]||n[this._activeCell]);this._currentEditor=new r({grid:this,gridPosition:k(this._container),position:k(this._activeCellNode),container:this._activeCellNode,column:o,columnMetaData:h,item:s||{},event:i,editorCellNavOnLRKeys:this._options.editorCellNavOnLRKeys,commitChanges:this.commitEditAndSetFocus.bind(this),cancelChanges:this.cancelEditAndSetFocus.bind(this)}),s&&(this._currentEditor.loadValue(s),t&&this._currentEditor.preClick&&this._currentEditor.preClick()),this._serializedEditorValue=this._currentEditor.serializeValue(),this._currentEditor.position&&this.handleActiveCellPositionChange()}}}commitEditAndSetFocus(){this.getEditorLock().commitCurrentEdit()&&(this.setFocus(),this._options.autoEdit&&this.navigateDown())}cancelEditAndSetFocus(){this.getEditorLock().cancelCurrentEdit()&&this.setFocus()}getActiveCellPosition(){return k(this._activeCellNode)}getGridPosition(){return k(this._container)}getCellEditor(){return this._currentEditor}getActiveCell(){return this._activeCellNode?{row:this._activeRow,cell:this._activeCell}:null}getActiveCellNode(){return this._activeCellNode}scrollActiveCellIntoView(){this._activeRow!=null&&this._activeCell!=null&&this.scrollCellIntoView(this._activeRow,this._activeCell)}scrollRowIntoView(e,t){if(!this._layout.isFrozenRow(e)){var i=Math.round(R(getComputedStyle(this._layout.getScrollContainerY()).height)),o=this.hasFrozenRows()&&!this._options.frozenBottom?e-this._layout.getFrozenRows()+1:e,s=o*this._options.rowHeight,r=(o+1)*this._options.rowHeight-i+(this._viewportInfo.hasHScroll?this._scrollDims.height:0);(o+1)*this._options.rowHeight>this._scrollTop+i+this._pageOffset?(this.scrollTo(t?s:r),this.render()):o*this._options.rowHeight<this._scrollTop+this._pageOffset&&(this.scrollTo(t?r:s),this.render())}}scrollRowToTop(e){this.scrollTo(e*this._options.rowHeight),this.render()}scrollPage(e){var t=e*this._viewportInfo.numVisibleRows;if(this.scrollTo((this.getRowFromPosition(this._scrollTop)+t)*this._options.rowHeight),this.render(),this._options.enableCellNavigation&&this._activeRow!=null){var i=this._activeRow+t,o=this.getDataLengthIncludingAddNew();i>=o&&(i=o-1),i<0&&(i=0);for(var s=0,r=null,l=this._activePosX;s<=this._activePosX;)this.canCellBeActive(i,s)&&(r=s),s+=this.getColspan(i,s);r!=null?(this.setActiveCellInternal(this.getCellNode(i,r)),this._activePosX=l):this.resetActiveCell()}}navigatePageDown(){this.scrollPage(1)}navigatePageUp(){this.scrollPage(-1)}navigateTop(){this.navigateToRow(0)}navigateBottom(){this.navigateToRow(this.getDataLength()-1)}navigateToRow(e){var t=this.getDataLength();if(!t)return!0;if(e<0?e=0:e>=t&&(e=t-1),this.scrollCellIntoView(e,0,!0),this._options.enableCellNavigation&&this._activeRow!=null){for(var i=0,o=null,s=this._activePosX;i<=this._activePosX;)this.canCellBeActive(e,i)&&(o=i),i+=this.getColspan(e,i);o!=null?(this.setActiveCellInternal(this.getCellNode(e,o)),this._activePosX=s):this.resetActiveCell()}return!0}getColspan(e,t){var i=this._data.getItemMetadata&&this._data.getItemMetadata(e);if(!i||!i.columns)return 1;var o=this._cols,s=o[t]&&(i.columns[o[t].id]||i.columns[t]),r=s&&s.colspan;return r===\"*\"?r=o.length-t:r=r||1,r}navigateRight(){return this.navigate(\"right\")}navigateLeft(){return this.navigate(\"left\")}navigateDown(){return this.navigate(\"down\")}navigateUp(){return this.navigate(\"up\")}navigateNext(){return this.navigate(\"next\")}navigatePrev(){return this.navigate(\"prev\")}navigateRowStart(){return this.navigate(\"home\")}navigateRowEnd(){return this.navigate(\"end\")}navigate(e){if(!this._options.enableCellNavigation||!this._activeCellNode&&e!=\"prev\"&&e!=\"next\")return!1;if(!this.getEditorLock().commitCurrentEdit())return!0;this.setFocus(),this._cellNavigator||(this._cellNavigator=new Q({getColumnCount:()=>this._cols.length,getRowCount:()=>this.getDataLengthIncludingAddNew(),getColspan:this.getColspan.bind(this),canCellBeActive:this.canCellBeActive.bind(this),setTabbingDirection:o=>this._tabbingDirection=o,isRTL:()=>this._options.rtl}));var t=this._cellNavigator.navigate(e,this._activeRow,this._activeCell,this._activePosX);if(t){if(this.hasFrozenRows()&&this._options.frozenBottom&&t.row==this.getDataLength())return;var i=t.row==this.getDataLength();return this._layout.isFrozenRow(t.row)||this.scrollCellIntoView(t.row,t.cell,!i),this.setActiveCellInternal(this.getCellNode(t.row,t.cell)),this._activePosX=t.posX,!0}else return this.setActiveCellInternal(this.getCellNode(this._activeRow,this._activeCell)),!1}getCellNode(e,t){return this._rowsCache[e]?(this.ensureCellNodesInRowsCache(e),this._rowsCache[e].cellNodesByColumnIdx[t]):null}setActiveCell(e,t){if(this._initialized){var i=this._cols;e>this.getDataLength()||e<0||t>=i.length||t<0||this._options.enableCellNavigation&&(this.scrollCellIntoView(e,t,!1),this.setActiveCellInternal(this.getCellNode(e,t),!1))}}setActiveRow(e,t,i){this._initialized&&(e>this.getDataLength()||e<0||t>=this._cols.length||t<0||(this._activeRow=e,i||this.scrollCellIntoView(e,t||0,!1)))}canCellBeActive(e,t){var i=this._cols;if(!this._options.enableCellNavigation||e>=this.getDataLengthIncludingAddNew()||e<0||t>=i.length||t<0)return!1;var o=this._data.getItemMetadata&&this._data.getItemMetadata(e);if(o&&typeof o.focusable==\"boolean\")return o.focusable;var s=o&&o.columns;return s&&i[t]&&s[i[t].id]&&typeof s[i[t].id].focusable==\"boolean\"?s[i[t].id].focusable:s&&s[t]&&typeof s[t].focusable==\"boolean\"?s[t].focusable:i[t].focusable}canCellBeSelected(e,t){var i=this._cols;if(e>=this.getDataLength()||e<0||t>=i.length||t<0)return!1;var o=this._data.getItemMetadata&&this._data.getItemMetadata(e);if(o&&typeof o.selectable==\"boolean\")return o.selectable;var s=o&&o.columns&&(o.columns[i[t].id]||o.columns[t]);return s&&typeof s.selectable==\"boolean\"?s.selectable:i[t].selectable}gotoCell(e,t,i){if(this._initialized&&this.canCellBeActive(e,t)&&this.getEditorLock().commitCurrentEdit()){this.scrollCellIntoView(e,t,!1);var o=this.getCellNode(e,t);this.setActiveCellInternal(o,i||e===this.getDataLength()||this._options.autoEdit),this._currentEditor||this.setFocus()}}commitCurrentEdit(){var e=this.getDataItem(this._activeRow),t=this._cols[this._activeCell],i=this;if(this._currentEditor){if(this._currentEditor.isValueChanged()){var o=this._currentEditor.validate();if(o.valid){if(this._activeRow<this.getDataLength()){var s={row:this._activeRow,cell:i._activeCell,editor:this._currentEditor,serializedValue:this._currentEditor.serializeValue(),prevSerializedValue:this._serializedEditorValue,execute:function(){this.editor.applyValue(e,this.serializedValue),i.updateRow(this.row),i.trigger(i.onCellChange,{row:this.activeRow,cell:i._activeCell,item:e})},undo:function(){this.editor.applyValue(e,this.prevSerializedValue),i.updateRow(this.row),i.trigger(i.onCellChange,{row:this.activeRow,cell:i._activeCell,item:e})}};this._options.editCommandHandler?(this.makeActiveCellNormal(),this._options.editCommandHandler(e,t,s)):(s.execute(),this.makeActiveCellNormal())}else{var r={};this._currentEditor.applyValue(r,this._currentEditor.serializeValue()),this.makeActiveCellNormal(),this.trigger(this.onAddNewRow,{item:r,column:t})}return!this.getEditorLock().isActive()}else return this._activeCellNode.classList.remove(\"invalid\"),this._activeCellNode.offsetWidth,this._activeCellNode.classList.add(\"invalid\"),this.trigger(this.onValidationError,{editor:this._currentEditor,cellNode:this._activeCellNode,validationResults:o,row:this._activeRow,cell:this._activeCell,column:t}),this._currentEditor.focus(),!1}this.makeActiveCellNormal()}return!0}cancelCurrentEdit(){return this.makeActiveCellNormal(),!0}rowsToRanges(e){for(var t=[],i=this._cols.length-1,o=0;o<e.length;o++)t.push(new le(e[o],0,e[o],i));return t}getSelectedRows(){if(!this._selectionModel)throw\"Selection model is not set\";return this._selectedRows}setSelectedRows(e){if(!this._selectionModel)throw\"Selection model is not set\";this._selectionModel.setSelectedRanges(this.rowsToRanges(e))}};return Qe(We);})();",
          "",
          "[Added Lines]",
          "1: var Slick=Slick||{};Slick._=(()=>{var j=Object.defineProperty;var Fe=Object.getOwnPropertyDescriptor;var xe=Object.getOwnPropertyNames;var ke=Object.prototype.hasOwnProperty;var ze=(a,e)=>{for(var t in e)j(a,t,{get:e[t],enumerable:!0})},Ve=(a,e,t,i)=>{if(e&&typeof e==\"object\"||typeof e==\"function\")for(let o of xe(e))!ke.call(a,o)&&o!==t&&j(a,o,{get:()=>e[o],enumerable:!(i=Fe(e,o))||i.enumerable});return a};var Qe=a=>Ve(j({},\"__esModule\",{value:!0}),a);var We={};ze(We,{BasicLayout:()=>V,Grid:()=>Z,gridDefaults:()=>G});var{addClass:D,applyFormatterResultToCellNode:$,columnDefaults:ee,convertCompatFormatter:F,ensureUniqueColumnIds:je,escape:T,defaultColumnFormat:z,disableSelection:te,EventEmitter:m,EventData:ie,GlobalEditorLock:oe,initializeColumns:se,H:w,keyCode:Be,NonDataRow:Ge,parsePx:R,preClickClassName:re,Range:le,removeClass:ne,RowCell:Xe,spacerDiv:B,titleize:Ue}=Slick;var G={addNewRowCssClass:\"new-row\",alwaysAllowHorizontalScroll:!1,alwaysShowVerticalScroll:!1,asyncEditorLoadDelay:100,asyncEditorLoading:!1,asyncPostCleanupDelay:40,asyncPostRenderDelay:50,autoEdit:!0,autoHeight:!1,cellFlashingCssClass:\"flashing\",dataItemColumnValueExtractor:null,defaultColumnWidth:80,defaultFormat:z,editable:!1,editorFactory:null,editorLock:oe,enableAddRow:!1,enableAsyncPostRender:!1,enableAsyncPostRenderCleanup:!1,enableCellNavigation:!0,enableColumnReorder:!0,enableTabKeyNavigation:!0,enableTextSelectionOnCells:!1,explicitInitialization:!1,footerRowHeight:30,forceFitColumns:!1,forceSyncScrolling:!1,forceSyncScrollInterval:250,formatterFactory:null,fullWidthRows:!1,groupingPanel:!1,groupingPanelHeight:30,headerRowHeight:30,leaveSpaceForNewRows:!1,useLegacyUI:!0,minBuffer:3,multiColumnSort:!1,multiSelect:!0,renderAllCells:!1,rowHeight:30,selectedCellCssClass:\"selected\",showCellSelection:!0,showColumnHeader:!0,showFooterRow:!1,showGroupingPanel:!0,showHeaderRow:!1,showTopPanel:!1,suppressActiveCellChangeOnEdit:!1,topPanelHeight:30};var V=function(){var a,e,t,i,o,s,r,l,n,h,d;function c(v){a=v;let b=_()+a.getScrollDims().width+\"px\",y=a.getOptions(),P=y.useLegacyUI?\" ui-state-default\":\"\";o=w(\"div\",{class:\"slick-header-columns\",style:(y.rtl?\"right\":\"left\")+\":-1000px\"});var S=w(\"div\",{class:\"slick-header\"+P,style:!y.showColumnHeader&&\"display: none\"},o);f(),s=w(\"div\",{class:\"slick-headerrow-columns\"}),r=B(b);var N=w(\"div\",{class:\"slick-headerrow\"+P,style:!y.showHeaderRow&&\"display: none\"},s,r);h=w(\"div\",{class:\"slick-top-panel\",style:\"width: 10000px\"});var Ae=w(\"div\",{class:\"slick-top-panel-scroller\"+P,style:!y.showTopPanel&&\"display: none\"},h);i=w(\"div\",{class:\"grid-canvas\",tabIndex:\"0\",hideFocus:\"\"}),d=w(\"div\",{class:\"slick-viewport\",tabIndex:\"0\",hideFocus:\"\"},i),l=w(\"div\",{class:\"slick-footerrow-columns\"}),n=B(b);var Ne=w(\"div\",{class:\"slick-footerrow\"+P,style:!y.showFooterRow&&\"display: none\"},l,n);a.getContainerNode().append(S,N,Ae,d,Ne)}function g(v,b){b&&i.appendChild(b)}function u(){for(var v=0,b,y,P=a.getColumns(),S=0;S<P.length;S++){b=P[S].width,y=a.getColumnCssRules(S);let N=a.getOptions().rtl;y[N?\"right\":\"left\"].style[N?\"right\":\"left\"]=v+\"px\",y[N?\"left\":\"right\"].style[N?\"left\":\"right\"]=e-v-b+\"px\",v+=b}}function C(){for(var v=i;(v=v.parentNode)!=document.body&&v!=null;)(v==d||v.scrollWidth!=v.clientWidth||v.scrollHeight!=v.clientHeight)&&a.bindAncestorScroll(v)}function _(){for(var v=a.getColumns(),b=v.length,y=0;b--;)y+=v[b].width;return a.getOptions().fullWidthRows?Math.max(y,a.getAvailableWidth()):y}function f(){t=0;for(var v=a.getScrollDims().width,b=a.getColumns(),y=0,P=b.length;y<P;y++)t+=b[y].width;t+=v,t=Math.max(t,a.getViewportInfo().width)+1e3,o.style.width=t+\"px\"}let L=()=>{a=null};function p(){return i}function H(){return[i]}function E(){return e}function I(){return[o]}function A(v){return o.children.item(v)}function ve(){return[s]}function me(v){return s.childNodes.item(v)}function fe(){return s}function pe(v){return l.childNodes.item(v)}function Ce(){return l}function _e(){return o}function we(){return[l]}function ye(v){return a.getRowFromNode(v.parentElement)}function be(){return h}function Re(){return[h]}function W(){return d}function Ee(){return[d]}function Le(){o.parentElement.scrollLeft=a.getScrollLeft(),h.parentElement.scrollLeft=a.getScrollLeft(),s.parentElement.scrollLeft=a.getScrollLeft(),l.parentElement.scrollLeft=a.getScrollLeft()}function M(){}function He(){i.style.height=a.getViewportInfo().realScrollHeight+\"px\"}function Pe(v){return v}function Se(){return!1}function Te(){var v=a.getOptions().alwaysShowVerticalScroll;d.style.overflowX=\"auto\",d.style.overflowY=v?\"scroll\":a.getOptions().autoHeight?\"hidden\":\"auto\"}function Ie(){var v=e;e=_();var b=a.getScrollDims().width;let y=a.getViewportInfo();var P=e+\"px\";i.style.width=P,s.style.width=P,l.style.width=P,f(),y.hasHScroll=e>a.getViewportInfo().width-b;var S=e+(y.hasVScroll?b:0)+\"px\";return r.style.width=S,n.style.width=S,e!=v}let Me=()=>{var v=a.getViewportInfo(),b=v.height+v.topPanelHeight+v.headerRowHeight+v.footerRowHeight;a.getOptions().autoHeight?(a.getContainerNode().style.height=b+v.groupingPanelHeight+R(getComputedStyle(o.parentElement).height)+\"px\",d.style.height=\"\"):d.style.height=v.height+\"px\"};function O(){return 0}var De={afterHeaderColumnDrag:M,afterRenderRows:M,afterSetOptions:M,appendCachedRow:g,applyColumnWidths:u,beforeCleanupAndRenderCells:M,bindAncestorScrollEvents:C,calcCanvasWidth:_,updateHeadersWidth:f,isFrozenRow:Se,destroy:L,getCanvasNodeFor:p,getCanvasNodes:H,getCanvasWidth:E,getFooterRowCols:we,getFooterRowColsFor:Ce,getFooterRowColumn:pe,getHeaderCols:I,getHeaderColsFor:_e,getHeaderColumn:A,getHeaderRowCols:ve,getHeaderRowColsFor:fe,getHeaderRowColumn:me,getRowFromCellNode:ye,getFrozenCols:O,getFrozenRowOffset:O,getFrozenRows:O,getScrollCanvasY:p,getScrollContainerX:W,getScrollContainerY:W,getTopPanelFor:be,getTopPanelNodes:Re,getViewportNodeFor:W,getViewportNodes:Ee,handleScrollH:Le,handleScrollV:M,init:c,layoutName:\"basic\",realScrollHeightChange:He,reorderViewColumns:Pe,resizeCanvas:Me,setOverflow:Te,setPaneVisibility:M,setScroller:M,updateCanvasWidth:Ie};return De};var Q=class{constructor(e){this.host=e}findFirstFocusableCell(e){for(var t=0,i=this.host.getColumnCount();t<i;){if(this.host.canCellBeActive(e,t))return t;t+=this.host.getColspan(e,t)}return null}findLastFocusableCell(e){for(var t=0,i=null,o=this.host.getColumnCount();t<o;)this.host.canCellBeActive(e,t)&&(i=t),t+=this.host.getColspan(e,t);return i}gotoRight(e,t){var i=this.host.getColumnCount();if(t>=i)return null;do t+=this.host.getColspan(e,t);while(t<i&&!this.host.canCellBeActive(e,t));return t<i?{row:e,cell:t,posX:t}:null}gotoLeft(e,t){if(t<=0)return null;var i=this.findFirstFocusableCell(e);if(i===null||i>=t)return null;for(var o={row:e,cell:i,posX:i},s;;){if(s=this.gotoRight(o.row,o.cell),!s)return null;if(s.cell>=t)return o;o=s}}gotoDown(e,t,i){for(var o,s=this.host.getRowCount();;){if(++e>=s)return null;for(o=t=0;t<=i;)o=t,t+=this.host.getColspan(e,t);if(this.host.canCellBeActive(e,o))return{row:e,cell:o,posX:i}}}gotoUp(e,t,i){for(var o;;){if(--e<0)return null;for(o=t=0;t<=i;)o=t,t+=this.host.getColspan(e,t);if(this.host.canCellBeActive(e,o))return{row:e,cell:o,posX:i}}}gotoNext(e,t,i){if(e==null&&t==null&&(e=t=i=0,this.host.canCellBeActive(e,t)))return{row:e,cell:t,posX:t};var o=this.gotoRight(e,t);if(o)return o;for(var s=null,r=this.host.getRowCount();++e<r;)if(s=this.findFirstFocusableCell(e),s!=null)return{row:e,cell:s,posX:s};return null}gotoPrev(e,t,i){var o=this.host.getColumnCount();if(e==null&&t==null&&(e=this.host.getRowCount()-1,t=i=o-1,this.host.canCellBeActive(e,t)))return{row:e,cell:t,posX:t};for(var s,r;!s&&(s=this.gotoLeft(e,t),!s);){if(--e<0)return null;t=0,r=this.findLastFocusableCell(e),r!=null&&(s={row:e,cell:r,posX:r})}return s}gotoRowStart(e){var t=this.findFirstFocusableCell(e);return t===null?null:{row:e,cell:t,posX:t}}gotoRowEnd(e){var t=this.findLastFocusableCell(e);return t===null?null:{row:e,cell:t,posX:t}}navigate(e,t,i,o){var s={up:-1,down:1,prev:-1,next:1,home:-1,end:1};let r=this.host.isRTL();s[r?\"right\":\"left\"]=-1,s[r?\"left\":\"right\"]=1,this.host.setTabbingDirection(s[e]);var l={up:this.gotoUp,down:this.gotoDown,prev:this.gotoPrev,next:this.gotoNext,home:this.gotoRowStart,end:this.gotoRowEnd};l[r?\"right\":\"left\"]=this.gotoLeft,l[r?\"left\":\"right\"]=this.gotoRight;var n=l[e].bind(this);return n(t,i,o)}};var X,U;function k(a){var e={top:a.offsetTop,left:a.offsetLeft,bottom:0,right:0,width:a.offsetWidth,height:a.offsetHeight,visible:!0};e.bottom=e.top+e.height,e.right=e.left+e.width;for(var t=a.offsetParent;(a=a.parentNode)!=document.body&&a!=null;)e.visible&&a.scrollHeight!=a.offsetHeight&&getComputedStyle(a).overflowY!==\"visible\"&&(e.visible=e.bottom>a.scrollTop&&e.top<a.scrollTop+a.clientHeight),e.visible&&a.scrollWidth!=a.offsetWidth&&getComputedStyle(a).overflowX!=\"visible\"&&(e.visible=e.right>a.scrollLeft&&e.left<a.scrollLeft+a.clientWidth),e.left-=a.scrollLeft,e.top-=a.scrollTop,a===t&&(e.left+=a.offsetLeft,e.top+=a.offsetTop,t=a.offsetParent),e.bottom=e.top+e.height,e.right=e.left+e.width;return e}function ae(a,e,t){var i,o,s=[],r=0,l=0,n;for(i=0;i<a.length;i++)o=a[i],s.push(o.width),l+=o.width,o.resizable&&(r+=o.width-Math.max(o.minWidth,t));for(n=l;l>e&&r;){var h=(l-e)/r;for(i=0;i<a.length&&l>e;i++){o=a[i];var d=s[i];if(!(!o.resizable||d<=o.minWidth||d<=t)){var c=Math.max(o.minWidth,t),g=Math.floor(h*(d-c))||1;g=Math.min(g,d-c),l-=g,r-=g,s[i]-=g}}if(n<=l)break;n=l}for(n=l;l<e;){var u=e/l;for(i=0;i<a.length&&l<e;i++){o=a[i];var C=s[i],_;!o.resizable||o.maxWidth<=C?_=0:_=Math.min(Math.floor(u*C)-C,o.maxWidth-C||1e6)||1,l+=_,s[i]+=l<=e?_:0}if(n>=l)break;n=l}var f=!1;for(i=0;i<a.length;i++)a[i].rerenderOnResize&&a[i].width!=s[i]&&(f=!0),a[i].width=s[i];return f}function K(){return X!=null?X:navigator.userAgent.toLowerCase().match(/gecko\\//)?4e6:32e6}function q(a){if(!U||a){var e=document.body.appendChild(w(\"div\",{style:\"position:absolute;top:-10000px;left:-10000px;width:100px;height:100px;overflow: scroll;border:0\"}));U={width:Math.round(e.offsetWidth-e.clientWidth),height:Math.round(e.offsetWidth-e.clientHeight)},e.remove()}return U}function he(a,e){if(!Array.isArray(a)||!Array.isArray(e)||a.length!==e.length)return!1;a=a.slice().sort(),e=e.slice().sort();for(var t=0;t<a.length;t++)if(a[t]!==e[t])return!1;return!0}function de(a,e){if(e.length==0)return a;for(var t={},i={},o=[],s=0;s<e.length;s++)t[e[s]]=s;for(s=0;s<a.length;s++)i[a[s].id]=s;function r(h){for(var d=h;d<a.length;d++){var c=a[d];if(h!=d&&t[c.id]!=null)break;o.push(c),i[c.id]=null}}t[a[0].id]==null&&r(0);for(var l of e)s=i[l],s!=null&&r(s);for(s=0;s<a.length;s++){var n=a[s];i[n.id]!=null&&(o.push(n),i[n.id]=null)}return o}function ue(a,e,t,i,o){var s=null,r=null,l,n;if(i)for(s=0,r=0,l=e+1;l<a.length;l++)n=a[l],n.resizable&&(r!=null&&(n.maxWidth?r+=n.maxWidth-n.previousWidth:r=null),s+=n.previousWidth-Math.max(n.minWidth||0,o));var h=0,d=0;for(l=0;l<=e;l++)n=a[l],n.resizable&&(d!=null&&(n.maxWidth?d+=n.maxWidth-n.previousWidth:d=null),h+=n.previousWidth-Math.max(n.minWidth||0,o));return s===null&&(s=1e5),h===null&&(h=1e5),r===null&&(r=1e5),d===null&&(d=1e5),{maxPageX:t+Math.min(s,d),minPageX:t-Math.min(h,r)}}function ce(a,e,t,i,o){var s,r,l,n;if(t<0){for(l=t,r=e;r>=0;r--)s=a[r],s.resizable&&(n=Math.max(s.minWidth||0,o),l&&s.previousWidth+l<n?(l+=s.previousWidth-n,s.width=n):(s.width=s.previousWidth+l,l=0));if(i)for(l=-t,r=e+1;r<a.length;r++)s=a[r],s.resizable&&(l&&s.maxWidth&&s.maxWidth-s.previousWidth<l?(l-=s.maxWidth-s.previousWidth,s.width=s.maxWidth):(s.width=s.previousWidth+l,l=0))}else{for(l=t,r=e;r>=0;r--)s=a[r],s.resizable&&(l&&s.maxWidth&&s.maxWidth-s.previousWidth<l?(l-=s.maxWidth-s.previousWidth,s.width=s.maxWidth):(s.width=s.previousWidth+l,l=0));if(i)for(l=-t,r=e+1;r<a.length;r++)s=a[r],s.resizable&&(n=Math.max(s.minWidth||0,o),l&&s.previousWidth+l<n?(l+=s.previousWidth-n,s.width=n):(s.width=s.previousWidth+l,l=0))}}function Y(){this==null||this.classList.add(\"ui-state-hover\")}function J(){this==null||this.classList.remove(\"ui-state-hover\")}function x(a){var e=getComputedStyle(a);if(e.boxSizing===\"border-box\")return 0;var t=[\"border-top-width\",\"border-bottom-width\",\"padding-top\",\"padding-bottom\"],i=0;for(var o of t)i+=R(e.getPropertyValue(o))||0;return i}function ge(a){var s;var e=getComputedStyle(a),t=(s=R(e.width))!=null?s:0;if(e.boxSizing!=\"border-box\")return Math.max(0,t);var i=[\"border-left-width\",\"border-right-width\",\"padding-left\",\"padding-right\"];for(var o of i)t-=R(e.getPropertyValue(o))||0;return Math.max(t,0)}var Z=class{constructor(e,t,i,o){this._activeCellNode=null;this._cellCssClasses={};this._cellHeightDiff=0;this._cellWidthDiff=0;this._colLeft=[];this._colRight=[];this._currentEditor=null;this._headerColumnWidthDiff=0;this._hEditorLoader=null;this._hPostRender=null;this._hPostRenderCleanup=null;this._hRender=null;this._ignoreScrollUntil=0;this._initialized=!1;this._page=0;this._pageOffset=0;this._pagingActive=!1;this._pagingIsLastPage=!1;this._plugins=[];this._postProcessCleanupQueue=[];this._postProcessedRows={};this._postProcessFromRow=null;this._postProcessGroupId=0;this._postProcessToRow=null;this._rowsCache={};this._scrollLeft=0;this._scrollLeftPrev=0;this._scrollLeftRendered=0;this._scrollTop=0;this._scrollTopPrev=0;this._scrollTopRendered=0;this._selectedRows=[];this._sortColumns=[];this._tabbingDirection=1;this._uid=\"sleekgrid_\"+Math.round(1e6*Math.random());this._viewportInfo={};this._vScrollDir=1;this._boundAncestorScroll=[];this.onActiveCellChanged=new m;this.onActiveCellPositionChanged=new m;this.onAddNewRow=new m;this.onBeforeCellEditorDestroy=new m;this.onBeforeDestroy=new m;this.onBeforeEditCell=new m;this.onBeforeFooterRowCellDestroy=new m;this.onBeforeHeaderCellDestroy=new m;this.onBeforeHeaderRowCellDestroy=new m;this.onCellChange=new m;this.onCellCssStylesChanged=new m;this.onClick=new m;this.onColumnsReordered=new m;this.onColumnsResized=new m;this.onCompositeEditorChange=new m;this.onContextMenu=new m;this.onDblClick=new m;this.onDrag=new m;this.onDragEnd=new m;this.onDragInit=new m;this.onDragStart=new m;this.onFooterRowCellRendered=new m;this.onHeaderCellRendered=new m;this.onHeaderClick=new m;this.onHeaderContextMenu=new m;this.onHeaderMouseEnter=new m;this.onHeaderMouseLeave=new m;this.onHeaderRowCellRendered=new m;this.onKeyDown=new m;this.onMouseEnter=new m;this.onMouseLeave=new m;this.onScroll=new m;this.onSelectedRowsChanged=new m;this.onSort=new m;this.onValidationError=new m;this.onViewportChanged=new m;this.handleSelectedRangesChanged=(e,t)=>{var i=this._selectedRows.slice(0);this._selectedRows=[];for(var d={},c=this._cols,o=0;o<t.length;o++)for(var s=t[o].fromRow;s<=t[o].toRow;s++){d[s]||(this._selectedRows.push(s),d[s]={});for(var r=t[o].fromCell;r<=t[o].toCell;r++)this.canCellBeSelected(s,r)&&(d[s][c[r].id]=this._options.selectedCellCssClass)}if(this.setCellCssStyles(this._options.selectedCellCssClass,d),!he(i,this._selectedRows)){var l=e&&e.detail&&e.detail.caller||\"click\",n=this._selectedRows.filter(g=>i.indexOf(g)<0),h=i.filter(g=>this._selectedRows.indexOf(g)<0);this.trigger(this.onSelectedRowsChanged,{rows:this.getSelectedRows(),previousSelectedRows:i,caller:l,changedSelectedRows:n,changedUnselectedRows:h},e)}this._selectedRows=[];for(var d={},c=this._cols,o=0;o<t.length;o++)for(var s=t[o].fromRow;s<=t[o].toRow;s++){d[s]||(this._selectedRows.push(s),d[s]={});for(var r=t[o].fromCell;r<=t[o].toCell;r++)this.canCellBeSelected(s,r)&&(d[s][c[r].id]=this._options.selectedCellCssClass)}};this.viewOnRowCountChanged=()=>{this.updateRowCount(),this.render()};this.viewOnRowsChanged=(e,t)=>{this.invalidateRows(t.rows),this.render(),this.updateGrandTotals()};this.viewOnDataChanged=()=>{this.invalidate(),this.render()};this.resizeCanvas=()=>{this._initialized&&(this.calcViewportSize(),this._layout.resizeCanvas(),(!this._scrollDims||!this._scrollDims.width)&&(this._scrollDims=q(!0)),this._options.forceFitColumns&&this.autosizeColumns(),this.updateRowCount(),this.handleScroll(),this._scrollLeftRendered=-1,this.render())};this.render=()=>{if(this._initialized){var e=this.getVisibleRange(),t=this.getRenderedRange();this.cleanupRows(t),this._scrollLeftRendered!=this._scrollLeft&&(this._layout.beforeCleanupAndRenderCells(t),this.cleanUpAndRenderCells(t)),this.renderRows(t),this._layout.afterRenderRows(t),this._postProcessFromRow=e.top,this._postProcessToRow=Math.min(this.getDataLengthIncludingAddNew()-1,e.bottom),this.startPostProcessing(),this._scrollTopRendered=this._scrollTop,this._scrollLeftRendered=this._scrollLeft,this._lastRenderTime=new Date().getTime(),this._hRender=null}};this.handleHeaderRowScroll=e=>{if(!(this._ignoreScrollUntil>=new Date().getTime())){var t=e.target.scrollLeft;t!=this._layout.getScrollContainerX().scrollLeft&&(this._layout.getScrollContainerX().scrollLeft=t)}};this.handleFooterRowScroll=e=>{if(!(this._ignoreScrollUntil>=new Date().getTime())){var t=e.target.scrollLeft;t!=this._layout.getScrollContainerX().scrollLeft&&(this._layout.getScrollContainerX().scrollLeft=t)}};this.handleActiveCellPositionChange=()=>{if(this._activeCellNode&&(this.trigger(this.onActiveCellPositionChanged,{}),this._currentEditor)){var e=this.getActiveCellPosition();this._currentEditor.show&&this._currentEditor.hide&&(e.visible?this._currentEditor.show():this._currentEditor.hide()),this._currentEditor.position&&this._currentEditor.position(e)}};var s,r;if(this._data=t,this._colDefaults=Object.assign({},ee),this._options=o=Object.assign({},G,o),o.jQuery=this._jQuery=o.jQuery===void 0?typeof jQuery!=\"undefined\"?jQuery:void 0:o.jQuery,this._jQuery&&e instanceof this._jQuery?this._container=e[0]:e instanceof Element?this._container=e:typeof e==\"string\"&&(this._container=document.querySelector(e)),this._container==null)throw new Error(\"SleekGrid requires a valid container, \"+e+\" does not exist in the DOM.\");this._container.classList.add(\"slick-container\"),o!=null&&o.createPreHeaderPanel&&(o.groupingPanel==null&&(o.groupingPanel=!0),o.groupingPanelHeight==null&&o.preHeaderPanelHeight!=null&&(o.groupingPanelHeight=o.preHeaderPanelHeight),o.showGroupingPanel==null&&o.showPreHeaderPanel!=null&&(o.showGroupingPanel=o.showPreHeaderPanel)),this._options.rtl=(s=this._options.rtl)!=null?s:document.body.classList.contains(\"rtl\")||typeof getComputedStyle!=\"undefined\"&&getComputedStyle(this._container).direction==\"rtl\",this.validateAndEnforceOptions(),this._colDefaults.width=o.defaultColumnWidth,this._editController={commitCurrentEdit:this.commitCurrentEdit.bind(this),cancelCurrentEdit:this.cancelCurrentEdit.bind(this)},this._jQuery?this._jQuery(this._container).empty():this._container.innerHTML=\"\",this._container.style.overflow=\"hidden\",this._container.style.outline=\"0\",this._container.classList.add(this._uid),this._options.useLegacyUI&&this._container.classList.add(\"ui-widget\"),/relative|absolute|fixed/.test(getComputedStyle(this._container).position)||(this._container.style.position=\"relative\"),this._container.appendChild(this._focusSink1=w(\"div\",{class:\"slick-focus-sink\",hideFocus:\"\",style:\"position:fixed;width:0!important;height:0!important;top:0;left:0;outline:0!important;\",tabIndex:\"0\"})),this._layout=(r=o.layoutEngine)!=null?r:new V,this.setInitialCols(i),this._scrollDims=q(),o.groupingPanel&&(this._container.appendChild(this._groupingPanel=w(\"div\",{class:\"slick-grouping-panel\",style:\"overflow:hidden; position:relative;\"+(o.showGroupingPanel?\"\":\" display: none\")})),o.createPreHeaderPanel&&this._groupingPanel.appendChild(w(\"div\",{class:\"slick-preheader-panel\"}))),this._layout.init({cleanUpAndRenderCells:this.cleanUpAndRenderCells.bind(this),bindAncestorScroll:this.bindAncestorScroll.bind(this),getAvailableWidth:this.getAvailableWidth.bind(this),getCellFromPoint:this.getCellFromPoint.bind(this),getColumnCssRules:this.getColumnCssRules.bind(this),getColumns:this.getColumns.bind(this),getContainerNode:this.getContainerNode.bind(this),getDataLength:this.getDataLength.bind(this),getOptions:this.getOptions.bind(this),getRowFromNode:this.getRowFromNode.bind(this),getScrollDims:this.getScrollBarDimensions.bind(this),getScrollLeft:()=>this._scrollLeft,getScrollTop:()=>this._scrollTop,getViewportInfo:()=>this._viewportInfo,renderRows:this.renderRows.bind(this)}),this._container.append(this._focusSink2=this._focusSink1.cloneNode()),o.viewportClass&&this.getViewports().forEach(l=>D(l,o.viewportClass)),o.explicitInitialization||this.init(),this.bindToData()}bindAncestorScroll(e){this._jQuery?this._jQuery(e).on(\"scroll\",this.handleActiveCellPositionChange):e.addEventListener(\"scroll\",this.handleActiveCellPositionChange),this._boundAncestorScroll.push(e)}init(){if(this._initialized)return;this._initialized=!0,this.calcViewportSize(),this.measureCellPaddingAndBorder();var e=this.getViewports();this._jQuery&&!this._options.enableTextSelectionOnCells&&this._jQuery(e).on(\"selectstart.ui\",()=>this._jQuery(this).is(\"input,textarea\")),this._layout.setPaneVisibility(),this._layout.setScroller(),this.setOverflow(),this.updateViewColLeftRight(),this.createColumnHeaders(),this.createColumnFooters(),this.setupColumnSort(),this.createCssRules(),this.resizeCanvas(),this._layout.bindAncestorScrollEvents();let t=(o,s,r)=>{this._jQuery?this._jQuery(o).on(s,r):o.addEventListener(s,r)};t(this._container,\"resize\",this.resizeCanvas),e.forEach(o=>{var s=!1;t(o,\"scroll\",r=>{s||(s=!0,window.requestAnimationFrame(()=>{this.handleScroll(),s=!1}))})}),this._jQuery&&this._jQuery.fn.mousewheel&&(this.hasFrozenColumns()||this.hasFrozenRows())&&this._jQuery(e).on(\"mousewheel\",this.handleMouseWheel.bind(this)),this._layout.getHeaderCols().forEach(o=>{te(o),t(o,\"contextmenu\",this.handleHeaderContextMenu.bind(this)),t(o,\"click\",this.handleHeaderClick.bind(this)),this._jQuery?this._jQuery(o).on(\"mouseenter\",\".slick-header-column\",this.handleHeaderMouseEnter.bind(this)).on(\"mouseleave\",\".slick-header-column\",this.handleHeaderMouseLeave.bind(this)):(o.addEventListener(\"mouseenter\",s=>s.target.closest(\".slick-header-column\")&&this.handleHeaderMouseEnter(s)),o.addEventListener(\"mouseleave\",s=>s.target.closest(\".slick-header-column\")&&this.handleHeaderMouseLeave(s)))}),this._layout.getHeaderRowCols().forEach(o=>{t(o.parentElement,\"scroll\",this.handleHeaderRowScroll)}),this._layout.getFooterRowCols().forEach(o=>{t(o.parentElement,\"scroll\",this.handleFooterRowScroll)}),[this._focusSink1,this._focusSink2].forEach(o=>t(o,\"keydown\",this.handleKeyDown.bind(this)));var i=Array.from(this.getCanvases());i.forEach(o=>{t(o,\"keydown\",this.handleKeyDown.bind(this)),t(o,\"click\",this.handleClick.bind(this)),t(o,\"dblclick\",this.handleDblClick.bind(this)),t(o,\"contextmenu\",this.handleContextMenu.bind(this))}),this._jQuery&&this._jQuery.fn.drag&&this._jQuery(i).on(\"draginit\",this.handleDragInit.bind(this)).on(\"dragstart\",{distance:3},this.handleDragStart.bind(this)).on(\"drag\",this.handleDrag.bind(this)).on(\"dragend\",this.handleDragEnd.bind(this)),i.forEach(o=>{this._jQuery?this._jQuery(o).on(\"mouseenter\",\".slick-cell\",this.handleMouseEnter.bind(this)).on(\"mouseleave\",\".slick-cell\",this.handleMouseLeave.bind(this)):(o.addEventListener(\"mouseenter\",s=>s.target.closest(\".slick-cell\")&&this.handleMouseEnter(s)),o.addEventListener(\"mouseleave\",s=>s.target.closest(\".slick-cell\")&&this.handleMouseLeave(s)))}),navigator.userAgent.toLowerCase().match(/webkit/)&&navigator.userAgent.toLowerCase().match(/macintosh/)&&this._jQuery&&this._jQuery(i).on(\"mousewheel\",this.handleMouseWheel.bind(this))}hasFrozenColumns(){return this._layout.getFrozenCols()>0}hasFrozenRows(){return this._layout.getFrozenRows()>0}registerPlugin(e){this._plugins.unshift(e),e.init(this)}unregisterPlugin(e){for(var t=this._plugins.length;t>=0;t--)if(this._plugins[t]===e){this._plugins[t].destroy&&this._plugins[t].destroy(),this._plugins.splice(t,1);break}}getPluginByName(e){for(var t=this._plugins.length-1;t>=0;t--)if(this._plugins[t].pluginName===e)return this._plugins[t]}setSelectionModel(e){this.unregisterSelectionModel(),this._selectionModel=e,this._selectionModel&&(this._selectionModel.init(this),this._selectionModel.onSelectedRangesChanged.subscribe(this.handleSelectedRangesChanged))}unregisterSelectionModel(){var e,t;this._selectionModel&&(this._selectionModel.onSelectedRangesChanged.unsubscribe(this.handleSelectedRangesChanged),(t=(e=this._selectionModel).destroy)==null||t.call(e))}getScrollBarDimensions(){return this._scrollDims}getDisplayedScrollbarDimensions(){return{width:this._viewportInfo.hasVScroll?this._scrollDims.width:0,height:this._viewportInfo.hasHScroll?this._scrollDims.height:0}}getAbsoluteColumnMinWidth(){return this._absoluteColMinWidth}getSelectionModel(){return this._selectionModel}colIdOrIdxToCell(e){return e==null?null:typeof e!=\"number\"?this.getColumnIndex(e):e}getCanvasNode(e,t){return this._layout.getCanvasNodeFor(this.colIdOrIdxToCell(e||0),t||0)}getCanvases(){var e=this._layout.getCanvasNodes();return this._jQuery?this._jQuery(e):e}getActiveCanvasNode(e){return e&&(this._activeCanvasNode=e.target.closest(\".grid-canvas\")),this._activeCanvasNode}getViewportNode(e,t){return this._layout.getViewportNodeFor(this.colIdOrIdxToCell(e||0),t||0)}getViewports(){return this._layout.getViewportNodes()}getActiveViewportNode(e){return e&&(this._activeViewportNode=e.target.closest(\".slick-viewport\")),this._activeViewportNode}getAvailableWidth(){return this._viewportInfo.hasVScroll?this._viewportInfo.width-this._scrollDims.width:this._viewportInfo.width}updateCanvasWidth(e){(this._layout.updateCanvasWidth()||e)&&this._layout.applyColumnWidths()}unbindAncestorScrollEvents(){if(this._boundAncestorScroll)for(var e of this._boundAncestorScroll)e.removeEventListener(\"scroll\",this.handleActiveCellPositionChange);this._boundAncestorScroll=[]}updateColumnHeader(e,t,i){if(this._initialized){var o=this.getColumnIndex(e);if(o!=null){var s=this._cols[o],r=this._layout.getHeaderColumn(o);if(r){if(t!==void 0&&(s.name=t),i!==void 0&&(s.toolTip=i),this.trigger(this.onBeforeHeaderCellDestroy,{node:r,column:s}),i!==void 0&&(r.title=i||\"\"),t!==void 0){var l=r.firstElementChild;s.nameIsHtml?l&&(l.innerHTML=t!=null?t:\"\"):l&&(l.textContent=t!=null?t:\"\")}this.trigger(this.onHeaderCellRendered,{node:r,column:s})}}}}getHeader(){return this._layout.getHeaderCols()[0]}getHeaderColumn(e){var t=this.colIdOrIdxToCell(e);return t==null?null:this._layout.getHeaderColumn(t)}getGroupingPanel(){return this._groupingPanel}getPreHeaderPanel(){var e;return(e=this._groupingPanel)==null?void 0:e.querySelector(\".slick-preheader-panel\")}getHeaderRow(){return this._layout.getHeaderRowCols()[0]}getHeaderRowColumn(e){var t=this.colIdOrIdxToCell(e);if(t!=null)return this._layout.getHeaderRowColumn(t)}getFooterRow(){return this._layout.getFooterRowCols()[0]}getFooterRowColumn(e){var t=this.colIdOrIdxToCell(e);return t==null?null:this._layout.getFooterRowColumn(t)}createColumnFooters(){var e=this._layout.getFooterRowCols();e.forEach(r=>{r.querySelectorAll(\".slick-footerrow-column\").forEach(l=>{var n=this.getColumnFromNode(l);n&&this.trigger(this.onBeforeFooterRowCellDestroy,{node:l,column:n})}),this._jQuery?this._jQuery(r).empty():r.innerHTML=\"\"});for(var t=this._cols,i=0;i<t.length;i++){var o=t[i],s=w(\"div\",{class:\"slick-footerrow-column l\"+i+\" r\"+i+(this._options.useLegacyUI?\" ui-state-default\":\"\")});s.dataset.c=i.toString(),this._jQuery&&this._jQuery(s).data(\"column\",o),o.footerCssClass?D(s,o.footerCssClass):o.cssClass&&D(s,o.cssClass),this._layout.getFooterRowColsFor(i).appendChild(s),this.trigger(this.onFooterRowCellRendered,{node:s,column:o})}}createColumnHeaders(){var g,u;this._layout.getHeaderCols().forEach(C=>{C.querySelectorAll(\".slick-header-column\").forEach(_=>{var f=this.getColumnFromNode(_);f&&this.trigger(this.onBeforeHeaderCellDestroy,{node:_,column:f})}),this._jQuery?this._jQuery(C).empty():C.innerHTML=\"\"}),this._layout.updateHeadersWidth(),this._layout.getHeaderRowCols().forEach(C=>{C.querySelectorAll(\".slick-headerrow-column\").forEach(_=>{var f=this.getColumnFromNode(_);f&&this.trigger(this.onBeforeHeaderRowCellDestroy,{node:_,column:f,grid:this})}),this._jQuery?this._jQuery(C).empty():C.innerHTML=\"\"});for(var i=this._cols,o=this._layout.getFrozenCols(),s=0;s<i.length;s++){var r=i[s],l=this._layout.getHeaderColsFor(s),n=document.createElement(\"span\");n.className=\"slick-column-name\",r.nameIsHtml?n.innerHTML=(g=r.name)!=null?g:\"\":n.textContent=(u=r.name)!=null?u:\"\";var h=w(\"div\",{class:\"slick-header-column\"+(this._options.useLegacyUI?\" ui-state-default \":\"\"),id:\"\"+this._uid+r.id,title:r.toolTip||\"\",style:\"width: \"+(r.width-this._headerColumnWidthDiff)+\"px\"},n);if(h.dataset.c=s.toString(),this._jQuery&&this._jQuery(h).data(\"column\",r),r.headerCssClass&&D(h,r.headerCssClass),s<o&&h.classList.add(\"frozen\"),l.appendChild(h),(this._options.enableColumnReorder||r.sortable)&&this._options.useLegacyUI&&(this._jQuery?(this._jQuery(h).on(\"mouseenter\",Y),this._jQuery(h).on(\"mouseleave\",J)):(h.addEventListener(\"mouseenter\",Y),h.addEventListener(\"mouseleave\",J))),r.sortable&&(h.classList.add(\"slick-header-sortable\"),h.appendChild(w(\"span\",{class:\"slick-sort-indicator\"}))),this.trigger(this.onHeaderCellRendered,{node:h,column:r}),this._options.showHeaderRow){var d=this._layout.getHeaderRowColsFor(s),c=w(\"div\",{class:\"slick-headerrow-column l\"+s+\" r\"+s+(this._options.useLegacyUI?\" ui-state-default\":\"\")});c.dataset.c=s.toString(),this._jQuery&&this._jQuery(c).data(\"column\",r),d.appendChild(c),this.trigger(this.onHeaderRowCellRendered,{node:c,column:r})}}this.setSortColumns(this._sortColumns),this.setupColumnResize(),this._options.enableColumnReorder&&this.setupColumnReorder()}setupColumnSort(){let e=t=>{var i=t.target;if(!i.classList.contains(\"slick-resizable-handle\")){var o=i.closest(\".slick-header-column\");if(o){var s=this.getColumnFromNode(o);if(s.sortable){if(!this.getEditorLock().commitCurrentEdit())return;for(var r=null,l=0;l<this._sortColumns.length;l++)if(this._sortColumns[l].columnId==s.id){r=this._sortColumns[l],r.sortAsc=!r.sortAsc;break}if(t.metaKey&&this._options.multiColumnSort?r&&this._sortColumns.splice(l,1):((!t.shiftKey&&!t.metaKey||!this._options.multiColumnSort)&&(this._sortColumns=[]),r?this._sortColumns.length==0&&this._sortColumns.push(r):(r={columnId:s.id,sortAsc:s.defaultSortAsc},this._sortColumns.push(r))),this.setSortColumns(this._sortColumns),!this._options.multiColumnSort)this.trigger(this.onSort,{multiColumnSort:!1,sortCol:s,sortAsc:r.sortAsc},t);else{var n=this._initCols;this.trigger(this.onSort,{multiColumnSort:!0,sortCols:this._sortColumns.map(h=>({sortCol:n[this.getInitialColumnIndex(h.columnId)],sortAsc:h.sortAsc}))},t)}}}}};this._layout.getHeaderCols().forEach(t=>{this._jQuery?this._jQuery(t).on(\"click\",e):t.addEventListener(\"click\",e)})}setupColumnReorder(){var l;let e=this._jQuery&&((l=this._jQuery.fn)==null?void 0:l.sortable);e&&this._jQuery(this._layout.getHeaderCols()).filter(\":ui-sortable\").sortable(\"destroy\");var t=null,i=()=>{this._layout.getScrollContainerX().scrollLeft=this._layout.getScrollContainerX().scrollLeft+10},o=()=>{this._layout.getScrollContainerX().scrollLeft=this._layout.getScrollContainerX().scrollLeft-10},s,r=this._options.groupingPanel;e&&this._jQuery([this._layout.getHeaderCols()]).sortable({containment:r?void 0:\"parent\",distance:3,axis:r?void 0:\"x\",cursor:\"default\",tolerance:\"intersection\",helper:\"clone\",placeholder:\"slick-sortable-placeholder\"+(this._options.useLegacyUI?\" ui-state-default\":\"\")+\" slick-header-column\",forcePlaceholderSize:r?!0:void 0,appendTo:r?\"body\":void 0,start:(n,h)=>{h.placeholder.outerHeight(h.helper.outerHeight()),h.placeholder.outerWidth(h.helper.outerWidth()),s=!this.hasFrozenColumns()||h.placeholder.offset()[this._options.rtl?\"right\":\"left\"]+Math.round(h.placeholder.width())>this._jQuery(this._layout.getScrollContainerX()).offset()[this._options.rtl?\"right\":\"left\"],this._jQuery(h.helper).addClass(\"slick-header-column-active\")},beforeStop:(n,h)=>{if(this._jQuery(h.helper).removeClass(\"slick-header-column-active\"),r){var d=this._jQuery(this.getGroupingPanel()),c=d.find(\".slick-dropped-grouping\").length;c>0&&(d.find(\".slick-dropped-placeholder\").hide(),d.find(\".slick-dropped-grouping\").show())}},sort:n=>{s&&n.originalEvent.pageX>this._container.clientWidth?t||(t=setInterval(i,100)):s&&n.originalEvent.pageX<this._jQuery(this._layout.getScrollContainerX()).offset().left?t||(t=setInterval(o,100)):(clearInterval(t),t=null)},stop:n=>{var h=!1;if(clearInterval(t),t=null,h||!this.getEditorLock().commitCurrentEdit()){this._jQuery(n.target).sortable(\"cancel\");return}var d;this._layout.getHeaderCols().forEach(c=>d=de(this._initCols,this._jQuery(c).sortable(\"toArray\").map(g=>g.substring(this._uid.length)))),this.setColumns(d),this.trigger(this.onColumnsReordered,{}),n.stopPropagation(),this.setupColumnResize()}})}setupColumnResize(){var s,o,r,l=this._cols,e=[];this._layout.getHeaderCols().forEach(c=>{e=e.concat(Array.from(c.children))});var t,i,o,s,r,n,h,l=this._cols,n,h;if(e.forEach((c,g)=>{var u;(u=c.querySelector(\".slick-resizable-handle\"))==null||u.remove(),l[g].resizable&&(n===void 0&&(n=g),h=g)}),n===void 0)return;let d=!this._jQuery||!this._jQuery.fn||!this._jQuery.fn.drag;e.forEach((c,g)=>{if(g<n||this._options.forceFitColumns&&g>=h)return;let u=c.appendChild(document.createElement(\"div\"));u.classList.add(\"slick-resizable-handle\"),u.draggable=!0;var C=null;let _=p=>{var E;if(!this.getEditorLock().commitCurrentEdit()){!d&&p.preventDefault();return}d&&(C=I=>I.preventDefault(),document.addEventListener(\"dragover\",C)),o=p.pageX,(E=p.target.parentElement)==null||E.classList.add(\"slick-header-column-active\"),e.forEach((I,A)=>{l[A].previousWidth=I.offsetWidth});let H=ue(l,g,o,this._options.forceFitColumns,this._absoluteColMinWidth);r=H.maxPageX,s=H.minPageX,d&&(p.dataTransfer.effectAllowed=\"move\")},f=p=>{if(d){if(!p.pageX&&!p.clientX&&!p.pageY&&!p.clientY)return;p.dataTransfer.effectAllowed=\"none\",p.preventDefault()}ce(l,g,Math.min(r,Math.max(s,p.pageX))-o,this._options.forceFitColumns,this._absoluteColMinWidth),this._layout.afterHeaderColumnDrag(),this.applyColumnHeaderWidths(),this._options.syncColumnCellResize&&this._layout.applyColumnWidths()},L=p=>{var E;for(C&&(document.removeEventListener(\"dragover\",C),C=null),(E=p.target.parentElement)==null||E.classList.remove(\"slick-header-column-active\"),t=0;t<e.length;t++){i=l[t];var H=e[t].offsetWidth;i.previousWidth!==H&&i.rerenderOnResize&&this.invalidateAllRows()}this.updateCanvasWidth(!0),this.render(),this.trigger(this.onColumnsResized)};d?(u.addEventListener(\"dragstart\",_),u.addEventListener(\"drag\",f),u.addEventListener(\"dragend\",L),u.addEventListener(\"dragover\",p=>{p.preventDefault(),p.dataTransfer.effectAllowed=\"move\"})):this._jQuery(u).on(\"dragstart\",_).on(\"drag\",f).on(\"dragend\",L)})}setOverflow(){this._layout.setOverflow(),this._options.viewportClass&&this.getViewports().forEach(e=>D(e,this._options.viewportClass))}measureCellPaddingAndBorder(){let e=[\"border-left-width\",\"border-right-width\",\"padding-left\",\"padding-right\"],t=[\"border-top-width\",\"border-bottom-width\",\"padding-top\",\"padding-bottom\"];var i=this._layout.getHeaderColsFor(0).appendChild(w(\"div\",{class:\"slick-header-column\"+(this._options.useLegacyUI?\" ui-state-default\":\"\"),style:\"visibility:hidden\"}));this._headerColumnWidthDiff=0;var o=getComputedStyle(i);o.boxSizing!=\"border-box\"&&e.forEach(r=>this._headerColumnWidthDiff+=R(o.getPropertyValue(r))||0),i.remove();var s=this._layout.getCanvasNodeFor(0,0).appendChild(w(\"div\",{class:\"slick-row\"},i=w(\"div\",{class:\"slick-cell\",id:\"\",style:\"visibility: hidden\"})));i.innerHTML=\"-\",this._cellWidthDiff=this._cellHeightDiff=0,o=getComputedStyle(i),o.boxSizing!=\"border-box\"&&(e.forEach(r=>this._cellWidthDiff+=R(o.getPropertyValue(r))||0),t.forEach(r=>this._cellHeightDiff+=R(o.getPropertyValue(r))||0)),s.remove(),this._absoluteColMinWidth=Math.max(this._headerColumnWidthDiff,this._cellWidthDiff)}createCssRules(){var e=this._styleNode=document.createElement(\"style\");e.dataset.uid=this._uid;for(var t=this._options.rowHeight-this._cellHeightDiff,i=[\".\"+this._uid+\" { --slick-cell-height: \"+this._options.rowHeight+\"px; }\",\".\"+this._uid+\" .slick-group-header-column { \"+(this._options.rtl?\"right\":\"left\")+\": 1000px; }\",\".\"+this._uid+\" .slick-header-column { \"+(this._options.rtl?\"right\":\"left\")+\": 1000px; }\",\".\"+this._uid+\" .slick-top-panel { height:\"+this._options.topPanelHeight+\"px; }\",\".\"+this._uid+\" .slick-grouping-panel { height:\"+this._options.groupingPanelHeight+\"px; }\",\".\"+this._uid+\" .slick-headerrow-columns { height:\"+this._options.headerRowHeight+\"px; }\",\".\"+this._uid+\" .slick-cell { height:\"+t+\"px; }\",\".\"+this._uid+\" .slick-row { height:\"+this._options.rowHeight+\"px; }\",\".\"+this._uid+\" .slick-footerrow-columns { height:\"+this._options.footerRowHeight+\"px; }\"],o=this._cols,s=0;s<o.length;s++)i.push(\".\"+this._uid+\" .l\"+s+\" { }\"),i.push(\".\"+this._uid+\" .r\"+s+\" { }\");e.appendChild(document.createTextNode(i.join(\" \"))),document.head.appendChild(e)}getColumnCssRules(e){if(!this._stylesheet){var t=document.querySelector(\"style[data-uid='\"+this._uid+\"']\");if(t&&t.sheet)this._stylesheet=t.sheet;else for(var i=document.styleSheets,o=0;o<i.length;o++)if((i[o].ownerNode||i[o].owningElement)==this._styleNode){this._stylesheet=i[o];break}if(!this._stylesheet)throw new Error(\"Cannot find stylesheet.\");this._columnCssRulesL=[],this._columnCssRulesR=[];for(var s=this._stylesheet.cssRules||this._stylesheet.rules,r,l,o=0;o<s.length;o++){var n=s[o].selectorText;(r=/\\.l\\d+/.exec(n))?(l=parseInt(r[0].substring(2,r[0].length),10),this._columnCssRulesL[l]=s[o]):(r=/\\.r\\d+/.exec(n))&&(l=parseInt(r[0].substring(2,r[0].length),10),this._columnCssRulesR[l]=s[o])}}return this._options.rtl?{right:this._columnCssRulesL[e],left:this._columnCssRulesR[e]}:{left:this._columnCssRulesL[e],right:this._columnCssRulesR[e]}}removeCssRules(){this._styleNode.remove(),this._stylesheet=null}destroy(){var s;this.getEditorLock().cancelCurrentEdit(),this.trigger(this.onBeforeDestroy);for(var e=this._plugins.length;e--;)this.unregisterPlugin(this._plugins[e]);this._options.enableColumnReorder&&this._jQuery&&this._jQuery.fn.sortable&&this._jQuery(this._layout.getHeaderCols()).filter(\":ui-sortable\").sortable(\"destroy\"),this.unbindAncestorScrollEvents(),this.unbindFromData(),this.unregisterSelectionModel(),(s=this._jQuery)==null||s.call(this,this._container).off(\".slickgrid\"),this.removeCssRules();var t=this._layout.getCanvasNodes();this._jQuery?this._jQuery(t).off(\"draginit dragstart dragend drag\"):t.forEach(r=>r.remove());for(var i in this)if(Object.prototype.hasOwnProperty.call(this,i)){if(i.startsWith(\"on\")){var o=this[i];o!=null&&o.clear&&(o!=null&&o.subscribe)&&(o==null||o.clear())}delete this[i]}}trigger(e,t,i){return i=i||new ie,t=t||{},t.grid=this,e.notify(t,i,this)}getEditorLock(){return this._options.editorLock}getEditController(){return this._editController}getColumnIndex(e){return this._colById[e]}getInitialColumnIndex(e){return this._initColById[e]}autosizeColumns(){var e=this._viewportInfo,t=e.hasVScroll?e.width-this._scrollDims.width:e.width,i=ae(this._cols,t,this._absoluteColMinWidth);this.applyColumnHeaderWidths(),this.updateCanvasWidth(!0),i&&(this.invalidateAllRows(),this.render())}applyColumnHeaderWidths(){if(this._initialized){for(var e,t=0,i=this._cols,o=i.length,s=this._headerColumnWidthDiff;t<o;t++)if(e=this._layout.getHeaderColumn(t),e){var r=i[t].width-s;e.offsetWidth!==r&&(e.style.width=r+\"px\")}this.updateViewColLeftRight()}}setSortColumn(e,t){this.setSortColumns([{columnId:e,sortAsc:t}])}setSortColumns(e){this._sortColumns=e||[];var t=[];this._layout.getHeaderCols().forEach(i=>t=t.concat(Array.from(i.children))),t.forEach(i=>{i.classList.remove(\"slick-header-column-sorted\");var o=i.querySelector(\".slick-sort-indicator\");o&&o.classList.remove(\"slick-sort-indicator-asc\",\"slick-sort-indicator-desc\")}),this._sortColumns.forEach(i=>{i.sortAsc==null&&(i.sortAsc=!0);var o=this.getColumnIndex(i.columnId);if(o!=null){var s=t[o];if(s){s.classList.add(\"slick-header-column-sorted\");var r=s.querySelector(\".slick-sort-indicator\");r&&r.classList.add(i.sortAsc?\"slick-sort-indicator-asc\":\"slick-sort-indicator-desc\")}}})}getSortColumns(){return this._sortColumns}getColumns(){return this._cols}getInitialColumns(){return this._initCols}updateViewColLeftRight(){this._colLeft=[],this._colRight=[];for(var e=0,t,i=this._cols,o,s=i.length,r=this._layout.getFrozenCols(),o=0;o<s;o++)r===o&&(e=0),t=e+i[o].width,this._colLeft[o]=e,this._colRight[o]=t,e=t}setInitialCols(e){se(e,this._colDefaults);var t={},i=[],o={},s,r;for(s=0;s<e.length;s++)r=e[s],t[r.id]=s,r.visible!==!1&&i.push(r);for(i=this._layout.reorderViewColumns(i,this._options),s=0;s<i.length;s++)r=i[s],o[r.id]=s;this._initCols=e,this._initColById=t,this._cols=i,this._colById=o}setColumns(e){var t,i;this.setInitialCols(e),this.updateViewColLeftRight(),this._initialized&&(this._layout.setPaneVisibility(),this.setOverflow(),this.invalidateAllRows(),this.createColumnHeaders(),this.createColumnFooters(),this.updateGrandTotals(),this.removeCssRules(),this.createCssRules(),this.resizeCanvas(),this.updateCanvasWidth(),this._layout.applyColumnWidths(),this.handleScroll(),(i=(t=this.getSelectionModel())==null?void 0:t.refreshSelections)==null||i.call(t))}getOptions(){return this._options}setOptions(e,t,i,o){var s;this.getEditorLock().commitCurrentEdit()&&(this.makeActiveCellNormal(),e.showColumnHeader!==void 0&&this.setColumnHeaderVisibility(e.showColumnHeader),this._options.enableAddRow!==e.enableAddRow&&this.invalidateRow(this.getDataLength()),this._options=Object.assign(this._options,e),this.validateAndEnforceOptions(),this._layout.afterSetOptions(e),e.columns&&!i&&this.setColumns((s=e.columns)!=null?s:this._initCols),o||this.setOverflow(),this._layout.setScroller(),t||this.render())}validateAndEnforceOptions(){this._options.autoHeight&&(this._options.leaveSpaceForNewRows=!1)}bindToData(){this._data&&(this._data.onRowCountChanged&&this._data.onRowCountChanged.subscribe(this.viewOnRowCountChanged),this._data.onRowsChanged&&this._data.onRowsChanged.subscribe(this.viewOnRowsChanged),this._data.onDataChanged&&this._data.onDataChanged.subscribe(this.viewOnDataChanged))}unbindFromData(){this._data&&(this._data.onRowCountChanged&&this._data.onRowCountChanged.unsubscribe(this.viewOnRowCountChanged),this._data.onRowsChanged&&this._data.onRowsChanged.unsubscribe(this.viewOnRowsChanged),this._data.onDataChanged&&this._data.onDataChanged.unsubscribe(this.viewOnDataChanged))}setData(e,t){this.unbindFromData(),this._data=e,this.bindToData(),this.invalidateAllRows(),this.updateRowCount(),t&&this.scrollTo(0)}getData(){return this._data}getDataLength(){return this._data.getLength?this._data.getLength():this._data.length}getDataLengthIncludingAddNew(){return this.getDataLength()+(this._options.enableAddRow&&(!this._pagingActive||this._pagingIsLastPage)?1:0)}getDataItem(e){return this._data.getItem?this._data.getItem(e):this._data[e]}getTopPanel(){return this._layout.getTopPanelFor(0)}setTopPanelVisibility(e){this._options.showTopPanel!=e&&(this._options.showTopPanel=!!e,this._layout.getTopPanelNodes().forEach(t=>{this._jQuery?this._jQuery(t)[e?\"slideDown\":\"slideUp\"](\"fast\",this.resizeCanvas):(t.style.display=e?\"\":\"none\",this.resizeCanvas())}))}setColumnHeaderVisibility(e,t){this._options.showColumnHeader!=e&&(this._options.showColumnHeader=e,this._layout.getHeaderCols().forEach(i=>{let o=i.parentElement;t&&this._jQuery?this._jQuery(o)[e?\"slideDown\":\"slideUp\"](\"fast\",this.resizeCanvas):(o.style.display=e?\"\":\"none\",this.resizeCanvas())}))}setFooterRowVisibility(e){this._options.showFooterRow!=e&&(this._options.showFooterRow=!!e,this._layout.getFooterRowCols().forEach(t=>{let i=t.parentElement;this._jQuery?this._jQuery(i)[e?\"slideDown\":\"slideUp\"](\"fast\",this.resizeCanvas):(i.style.display=e?\"\":\"none\",this.resizeCanvas())}))}setGroupingPanelVisibility(e){if(this._options.showGroupingPanel!=e){if(this._options.showGroupingPanel=e,!this._options.groupingPanel)return;let t=this._groupingPanel;this._jQuery?this._jQuery(t)[e?\"slideDown\":\"slideUp\"](\"fast\",this.resizeCanvas):(t.style.display=e?\"\":\"none\",this.resizeCanvas())}}setPreHeaderPanelVisibility(e){this.setGroupingPanelVisibility(e)}setHeaderRowVisibility(e){this._options.showHeaderRow!=e&&(this._options.showHeaderRow=e,this._layout.getHeaderRowCols().forEach(t=>{let i=t.parentElement;this._jQuery?this._jQuery(i)[e?\"slideDown\":\"slideUp\"](\"fast\",this.resizeCanvas):(i.style.display=e?\"\":\"none\",this.resizeCanvas())}))}getContainerNode(){return this._container}getUID(){return this._uid}getRowTop(e){return this._options.rowHeight*e-this._pageOffset}getRowFromPosition(e){return Math.floor((e+this._pageOffset)/this._options.rowHeight)}scrollTo(e){let t=this._viewportInfo;e=Math.max(e,0),e=Math.min(e,t.virtualHeight-Math.round(this._jQuery(this._layout.getScrollContainerY()).height())+(t.hasHScroll||this.hasFrozenColumns()?this._scrollDims.height:0));var i=this._pageOffset;this._page=Math.min(this._numberOfPages-1,Math.floor(e/this._pageHeight)),this._pageOffset=Math.round(this._page*this._jumpinessCoefficient);var o=e-this._pageOffset;if(this._pageOffset!=i){var s=this.getVisibleRange(o);this.cleanupRows(s),this.updateRowPositions()}this._scrollTopPrev!=o&&(this._vScrollDir=this._scrollTopPrev+i<o+this._pageOffset?1:-1,this._scrollTopRendered=this._scrollTop=this._scrollTopPrev=o,this._layout.handleScrollV(),this._layout.getScrollContainerY().scrollTop=o,this.trigger(this.onViewportChanged))}getFormatter(e,t){var i=this._data;if(i.getItemMetadata){let h=i.getItemMetadata(e);if(h){let d=h.columns;if(d){var o=d[t.id]||d[this.getColumnIndex(t.id)];if(o){if(o.format)return o.format;if(o.formatter)return F(o.formatter)}}if(h.format)return h.format;if(h.formatter)return F(h.formatter)}}if(t.format)return t.format;if(t.formatter)return F(t.formatter);var s=this._options,r=s.formatterFactory;if(r){if(r.getFormat){var l=r.getFormat(t);if(l)return l}else if(r.getFormatter){var n=r.getFormatter(t);if(n)return F(n)}}return s.defaultFormat?s.defaultFormat:s.defaultFormatter?F(s.defaultFormatter):z}getFormatterContext(e,t){var i=this._cols[t],o=this.getDataItem(e);let s={cell:t,column:i,grid:this,escape:T,item:o,row:e};return o&&(s.value=this.getDataItemValueForColumn(o,i)),s}getEditor(e,t){var i=this._cols[t],o=this._data.getItemMetadata&&this._data.getItemMetadata(e),s=o&&o.columns;return s&&s[i.id]&&s[i.id].editor!==void 0?s[i.id].editor:s&&s[t]&&s[t].editor!==void 0?s[t].editor:i.editor||this._options.editorFactory&&this._options.editorFactory.getEditor(i,e)}getDataItemValueForColumn(e,t){return this._options.dataItemColumnValueExtractor?this._options.dataItemColumnValueExtractor(e,t):e[t.field]}appendRowHtml(e,t,i,o,s){var H,E;var r=this.getDataItem(i),l=i<s&&!r,n=\"slick-row\"+(this._layout.isFrozenRow(i)?\" frozen\":\"\")+(l?\" loading\":\"\")+(i===this._activeRow?\" active\":\"\")+(i%2==1?\" odd\":\" even\");r||(n+=\" \"+this._options.addNewRowCssClass);var h=(E=(H=this._data).getItemMetadata)==null?void 0:E.call(H,i);h&&h.cssClasses&&(n+=\" \"+h.cssClasses);var d=this._layout.getFrozenRowOffset(i),c=\"<div class='\"+(this._options.useLegacyUI?\"ui-widget-content \":\"\")+n+\"' style='top:\"+(this.getRowTop(i)-d)+\"px'>\";e.push(c);let g=this._layout.getFrozenCols();g&&t.push(c);for(var u,C,_=this._cols,f=0,L=_.length;f<L;f++){var p=null;if(C=_[f],u=1,h&&h.columns&&(p=h.columns[C.id]||h.columns[f],u=p&&p.colspan||1,u===\"*\"&&(u=L-f)),this._colRight[Math.min(L-1,f+u-1)]>o.leftPx){if(this._colLeft[f]>o.rightPx)break;this.appendCellHtml(g>0&&f>=g?t:e,i,f,u,r,p)}u>1&&(f+=u-1)}e.push(\"</div>\"),g&&t.push(\"</div>\")}appendCellHtml(e,t,i,o,s,r){var p,H,E,I,A;var l=this._cols,n=this._layout.getFrozenCols(),h=l[i],d=\"slick-cell l\"+i+\" r\"+Math.min(l.length-1,i+o-1)+(h.cssClass?\" \"+h.cssClass:\"\");i<n&&(d+=\" frozen\"),t===this._activeRow&&i===this._activeCell&&(d+=\" active\"),r&&r.cssClasses&&(d+=\" \"+r.cssClasses);for(var c in this._cellCssClasses)this._cellCssClasses[c][t]&&this._cellCssClasses[c][t][h.id]&&(d+=\" \"+this._cellCssClasses[c][t][h.id]);var g;let u={cell:i,column:h,escape:T,grid:this,item:s,row:t};if(s&&(u.value=this.getDataItemValueForColumn(s,h),g=this.getFormatter(t,h)(u)),d=T(d),(p=u.addClass)!=null&&p.length||(H=u.addAttrs)!=null&&H.length||(E=u.tooltip)!=null&&E.length){(I=u.addClass)!=null&&I.length&&(d+=\" \"+T(u.addClass)),e.push('<div class=\"'+d+'\"'),(A=u.addClass)!=null&&A.length&&e.push(' data-fmtcls=\"'+T(u.addClass)+'\"');var C=u.addAttrs;if(C!=null){var _=[];for(var f in C)e.push(f+'=\"'+T(C[f])+'\"'),_.push(f);e.push(' data-fmtatt=\"'+T(_.join(\",\"))+'\"')}var L=u.tooltip;L!=null&&L.length&&e.push('tooltip=\"'+T(L)+'\"'),g!=null?e.push(\">\"+g+\"</div>\"):e.push(\"></div>\")}else g!=null?e.push('<div class=\"'+d+'\">'+g+\"</div>\"):e.push('<div class=\"'+d+'\"></div>');this._rowsCache[t].cellRenderQueue.push(i),this._rowsCache[t].cellColSpans[i]=o}cleanupRows(e){var t;for(var i in this._rowsCache)t=parseInt(i,10),t!==this._activeRow&&(t<e.top||t>e.bottom)&&!this._layout.isFrozenRow(t)&&this.removeRowFromCache(t);this._options.enableAsyncPostRenderCleanup&&this.startPostProcessingCleanup()}invalidate(){this.updateRowCount(),this.invalidateAllRows(),this.render(),this.updateGrandTotals()}invalidateAllRows(){this._currentEditor&&this.makeActiveCellNormal();for(var e in this._rowsCache)this.removeRowFromCache(parseInt(e,10));this._options.enableAsyncPostRenderCleanup&&this.startPostProcessingCleanup()}queuePostProcessedRowForCleanup(e,t,i){var r,l;this._postProcessGroupId++;for(var o in t)if(t.hasOwnProperty(o)){var s=parseInt(o,10);this._postProcessCleanupQueue.push({groupId:this._postProcessGroupId,cellNode:e.cellNodesByColumnIdx[s|0],columnIdx:s|0,rowIdx:i})}this._postProcessCleanupQueue.push({groupId:this._postProcessGroupId,rowNodeL:e.rowNodeL,rowNodeR:e.rowNodeR}),(r=e.rowNodeL)==null||r.remove(),(l=e.rowNodeR)==null||l.remove()}queuePostProcessedCellForCleanup(e,t,i){this._postProcessCleanupQueue.push({groupId:this._postProcessGroupId,cellNode:e,columnIdx:t,rowIdx:i}),this._jQuery(e).detach()}removeRowFromCache(e){var i,o,s,r;var t=this._rowsCache[e];t&&(this._options.enableAsyncPostRenderCleanup&&this._postProcessedRows[e]?this.queuePostProcessedRowForCleanup(t,this._postProcessedRows[e],e):((o=(i=t.rowNodeL)==null?void 0:i.parentElement)==null||o.removeChild(t.rowNodeL),(r=(s=t.rowNodeR)==null?void 0:s.parentElement)==null||r.removeChild(t.rowNodeR)),delete this._rowsCache[e],delete this._postProcessedRows[e])}invalidateRows(e){var t,i;if(!(!e||!e.length)){for(this._vScrollDir=0,t=0,i=e.length;t<i;t++)this._currentEditor&&this._activeRow===e[t]&&this.makeActiveCellNormal(),this._rowsCache[e[t]]&&this.removeRowFromCache(e[t]);this._options.enableAsyncPostRenderCleanup&&this.startPostProcessingCleanup()}}invalidateRow(e){this.invalidateRows([e])}updateCell(e,t){var i=this.getCellNode(e,t);i&&(this._currentEditor&&this._activeRow===e&&this._activeCell===t?this._currentEditor.loadValue(this.getDataItem(e)):(this.updateCellWithFormatter(i,e,t),this.invalidatePostProcessingResults(e)))}updateCellWithFormatter(e,t,i){var o;let s=this.getFormatterContext(t,i);s.item&&(o=this.getFormatter(t,s.column)(s)),$(s,o,e)}updateRow(e){var t=this._rowsCache[e];if(t){this.ensureCellNodesInRowsCache(e);var i=this.getDataItem(e);for(var o in t.cellNodesByColumnIdx)if(t.cellNodesByColumnIdx.hasOwnProperty(o)){var s=parseInt(o,10);e===this._activeRow&&s===this._activeCell&&this._currentEditor?this._currentEditor.loadValue(i):this.updateCellWithFormatter(t.cellNodesByColumnIdx[s],e,s)}this.invalidatePostProcessingResults(e)}}calcViewportSize(){let e=this._layout,t=this._viewportInfo;if(t.width=ge(this._container),t.groupingPanelHeight=this._options.groupingPanel&&this._options.showGroupingPanel?this._options.groupingPanelHeight+x(this._groupingPanel):0,t.topPanelHeight=this._options.showTopPanel?this._options.topPanelHeight+x(e.getTopPanelFor(0).parentElement):0,t.headerRowHeight=this._options.showHeaderRow?this._options.headerRowHeight+x(e.getHeaderRowColsFor(0).parentElement):0,t.footerRowHeight=this._options.showFooterRow?this._options.footerRowHeight+x(e.getFooterRowColsFor(0).parentElement):0,t.headerHeight=this._options.showColumnHeader?R(getComputedStyle(e.getHeaderColsFor(0).parentElement).height)+x(e.getHeaderColsFor(0).parentElement):0,this._options.autoHeight)t.height=this._options.rowHeight*this.getDataLengthIncludingAddNew(),this._layout.calcCanvasWidth()>t.width&&(t.height+=this._scrollDims.height);else{var i=getComputedStyle(this._container);t.height=R(i.height)-R(i.paddingTop)-R(i.paddingBottom)-t.headerHeight-t.topPanelHeight-t.headerRowHeight-t.footerRowHeight-t.groupingPanelHeight}t.numVisibleRows=Math.ceil(t.height/this._options.rowHeight)}updatePagingStatusFromView(e){this._pagingActive=e.pageSize!==0,this._pagingIsLastPage=e.pageNum==e.totalPages-1}updateRowCount(){if(!this._initialized)return;var e=this.getDataLengthIncludingAddNew(),t=this._layout.getScrollCanvasY(),i=Math.round(R(getComputedStyle(t).height)),o;let s=this._layout.getFrozenRows();s?o=this.getDataLength()-s:o=e+(this._options.leaveSpaceForNewRows?this._viewportInfo.numVisibleRows-1:0);var r=Math.round(R(getComputedStyle(this._layout.getScrollContainerY()).height));let l=this._viewportInfo;var n=l.hasVScroll;l.hasVScroll=!this._options.autoHeight&&o*this._options.rowHeight>r,this.makeActiveCellNormal();var h=e-1;for(var d in this._rowsCache){var c=parseInt(d,10);c>=h&&this.removeRowFromCache(c)}this._options.enableAsyncPostRenderCleanup&&this.startPostProcessingCleanup(),l.virtualHeight=Math.max(this._options.rowHeight*o,r-this._scrollDims.height),this._activeCellNode&&this._activeRow>h&&this.resetActiveCell(),l.virtualHeight<K()?(l.realScrollHeight=this._pageHeight=l.virtualHeight,this._numberOfPages=1,this._jumpinessCoefficient=0):(l.realScrollHeight=K(),this._pageHeight=l.realScrollHeight/100,this._numberOfPages=Math.floor(l.virtualHeight/this._pageHeight),this._jumpinessCoefficient=(l.virtualHeight-l.realScrollHeight)/(this._numberOfPages-1)),l.realScrollHeight!==i&&(this._layout.realScrollHeightChange(),this._scrollTop=this._layout.getScrollContainerY().scrollTop);var g=this._scrollTop+this._pageOffset<=l.virtualHeight-r;l.virtualHeight==0||this._scrollTop==0?this._page=this._pageOffset=0:g?this.scrollTo(this._scrollTop+this._pageOffset):this.scrollTo(l.virtualHeight-r),l.realScrollHeight!=i&&this._options.autoHeight&&this.resizeCanvas(),this._options.forceFitColumns&&n!=l.hasVScroll&&this.autosizeColumns(),this.updateCanvasWidth(!1)}getViewport(e,t){return this.getVisibleRange(e,t)}getVisibleRange(e,t){return e==null&&(e=this._scrollTop),t==null&&(t=this._scrollLeft),this._options.rtl&&(t=Math.abs(t)),{top:this.getRowFromPosition(e),bottom:this.getRowFromPosition(e+this._viewportInfo.height)+1,leftPx:t,rightPx:t+this._viewportInfo.width}}getRenderedRange(e,t){var i=this.getVisibleRange(e,t),o=Math.round(this._viewportInfo.height/this._options.rowHeight),s=this._options.minBuffer||3;return this._vScrollDir==-1?(i.top-=o,i.bottom+=s):this._vScrollDir==1?(i.top-=s,i.bottom+=o):(i.top-=s,i.bottom+=s),i.top=Math.max(0,i.top),i.bottom=Math.min(this.getDataLengthIncludingAddNew()-1,i.bottom),this._options.renderAllCells?(i.leftPx=0,i.rightPx=this._layout.getCanvasWidth()):(i.leftPx-=this._viewportInfo.width,i.rightPx+=this._viewportInfo.width,i.leftPx=Math.max(0,i.leftPx),i.rightPx=Math.min(this._layout.getCanvasWidth(),i.rightPx)),i}ensureCellNodesInRowsCache(e){var s,r,l,n;var t=this._rowsCache[e];if(t&&t.cellRenderQueue.length)for(var i=(l=(s=t.rowNodeR)==null?void 0:s.lastElementChild)!=null?l:(r=t.rowNodeL)==null?void 0:r.lastElementChild;i&&t.cellRenderQueue.length;){var o=t.cellRenderQueue.pop();t.cellNodesByColumnIdx[o]=i,i=i.previousElementSibling,i==null&&(i=(n=t.rowNodeL)==null?void 0:n.lastElementChild)}}cleanUpCells(e,t){if(!this._layout.isFrozenRow(t)){var i=this._rowsCache[t],o=[],s=this._layout.getFrozenCols();for(var r in i.cellNodesByColumnIdx)if(i.cellNodesByColumnIdx.hasOwnProperty(r)){var l=parseInt(r,10);if(!(l<s)){var n=i.cellColSpans[l],h=this._cols;(this._colLeft[l]>e.rightPx||this._colRight[Math.min(h.length-1,l+n-1)]<e.leftPx)&&(t==this._activeRow&&l===this._activeCell||o.push(l))}}var d,c;for(this._postProcessGroupId++;(d=o.pop())!=null;)c=i.cellNodesByColumnIdx[d],this._options.enableAsyncPostRenderCleanup&&this._postProcessedRows[t]&&this._postProcessedRows[t][d]?this.queuePostProcessedCellForCleanup(c,d,t):c.parentElement.removeChild(c),delete i.cellColSpans[d],delete i.cellNodesByColumnIdx[d],this._postProcessedRows[t]&&delete this._postProcessedRows[t][d]}}cleanUpAndRenderCells(e){for(var t,i=[],o=[],s,r,l=this._cols,n=e.top,h=e.bottom;n<=h;n++)if(t=this._rowsCache[n],!!t){this.ensureCellNodesInRowsCache(n),this.cleanUpCells(e,n),s=0;for(var d=this._data.getItemMetadata&&this._data.getItemMetadata(n),c=d&&d.columns,g=this.getDataItem(n),u=0,C=l.length;u<C&&!(this._colLeft[u]>e.rightPx);u++){if((r=t.cellColSpans[u])!=null){u+=r>1?r-1:0;continue}var _=null;r=1,c&&(_=c[l[u].id]||c[u],r=_&&_.colspan||1,r===\"*\"&&(r=C-u)),this._colRight[Math.min(C-1,u+r-1)]>e.leftPx&&(this.appendCellHtml(i,n,u,r,g,_),s++),u+=r>1?r-1:0}s&&o.push(n)}if(i.length){var f=document.createElement(\"div\");f.innerHTML=i.join(\"\");for(var L,p,H=this._layout.getFrozenCols();(L=o.pop())!=null;){t=this._rowsCache[L];for(var E;(E=t.cellRenderQueue.pop())!=null;)p=f.lastElementChild,H>0&&E>=H?t.rowNodeR.appendChild(p):t.rowNodeL.appendChild(p),t.cellNodesByColumnIdx[E]=p}}}renderRows(e){for(var t=[],i=[],o=[],s=!1,r=this.getDataLength(),l=e.top,n=e.bottom;l<=n;l++)this._rowsCache[l]||this.hasFrozenRows()&&this._options.frozenBottom&&l==r||(o.push(l),this._rowsCache[l]={rowNodeL:null,rowNodeR:null,cellColSpans:[],cellNodesByColumnIdx:[],cellRenderQueue:[]},this.appendRowHtml(t,i,l,e,r),this._activeCellNode&&this._activeRow===l&&(s=!0));if(!o.length)return;var h=document.createElement(\"div\"),d=document.createElement(\"div\");h.innerHTML=t.join(\"\"),d.innerHTML=i.join(\"\");let c=this._layout;for(var l=0,n=o.length;l<n;l++){var g=o[l],u=this._rowsCache[g];u.rowNodeL=h.firstElementChild,u.rowNodeR=d.firstElementChild,c.appendCachedRow(g,u.rowNodeL,u.rowNodeR)}s&&(this._activeCellNode=this.getCellNode(this._activeRow,this._activeCell))}startPostProcessing(){this._options.enableAsyncPostRender&&(clearTimeout(this._hPostRender),this._options.asyncPostRenderDelay<0?this.asyncPostProcessRows():this._hPostRender=setTimeout(this.asyncPostProcessRows.bind(this),this._options.asyncPostRenderDelay))}startPostProcessingCleanup(){this._options.enableAsyncPostRenderCleanup&&(clearTimeout(this._hPostRenderCleanup),this._options.asyncPostCleanupDelay<0?this.asyncPostProcessCleanupRows():this._hPostRenderCleanup=setTimeout(this.asyncPostProcessCleanupRows.bind(this),this._options.asyncPostCleanupDelay))}invalidatePostProcessingResults(e){if(this._options.enableAsyncPostRenderCleanup)for(var t in this._postProcessedRows[e])this._postProcessedRows[e].hasOwnProperty(t)&&(this._postProcessedRows[e][t]=\"C\");else delete this._postProcessedRows[e];this._postProcessFromRow=Math.min(this._postProcessFromRow,e),this._postProcessToRow=Math.max(this._postProcessToRow,e),this.startPostProcessing()}updateRowPositions(){for(var e in this._rowsCache){var t=this._rowsCache[e],i=this.getRowTop(parseInt(e,10))+\"px\";t.rowNodeL&&(t.rowNodeL.style.top=i),t.rowNodeR&&(t.rowNodeR.style.top=i)}}updateGrandTotals(){var r,l;if(!(!this._options.showFooterRow||!this._initialized)){var e;this._data&&this._data.getGrandTotals&&(e=this._data.getGrandTotals()),e=e!=null?e:{};var t=this._cols;for(var i of t)if(i.id!=null){var o=(r=i.groupTotalsFormatter)!=null?r:this._options.groupTotalsFormatter;if(!o)continue;var s=(l=o(e,i,this))!=null?l:\"\";this.getFooterRowColumn(i.id).innerHTML=s}}}groupTotalsFormatter(e,t,i){return this._options.groupTotalsFormatter?this._options.groupTotalsFormatter(e,t,i!=null?i:this):\"\"}handleMouseWheel(e,t,i,o){i=(typeof i==\"undefined\"?e.originalEvent.deltaX:i)||0,o=(typeof o==\"undefined\"?e.originalEvent.deltaY:o)||0,this._scrollTop=Math.max(0,this._layout.getScrollContainerY().scrollTop-o*this._options.rowHeight),this._scrollLeft=this._layout.getScrollContainerX().scrollLeft+i*10,this.handleScroll(!0)}handleScroll(e){this._scrollTop=this._layout.getScrollContainerY().scrollTop,this._scrollLeft=this._layout.getScrollContainerX().scrollLeft;var t=Math.abs(this._scrollTop-this._scrollTopPrev),i=Math.abs(this._scrollLeft-this._scrollLeftPrev);(i||t)&&(this._ignoreScrollUntil=new Date().getTime()+100),i&&(this._scrollLeftPrev=this._scrollLeft,this._layout.getScrollContainerX().scrollLeft=this._scrollLeft,this._layout.handleScrollH());let o=this._viewportInfo;if(t)if(this._vScrollDir=this._scrollTopPrev<this._scrollTop?1:-1,this._scrollTopPrev=this._scrollTop,e===!0&&(this._layout.getScrollContainerY().scrollTop=this._scrollTop),this._layout.handleScrollV(),t<this._viewportInfo.height)this.scrollTo(this._scrollTop+this._pageOffset);else{var s=this._pageOffset;o.realScrollHeight==o.height?this._page=0:this._page=Math.min(this._numberOfPages-1,Math.floor(this._scrollTop*((o.virtualHeight-this._viewportInfo.height)/(o.realScrollHeight-this._viewportInfo.height))*(1/this._pageHeight))),this._pageOffset=Math.round(this._page*this._jumpinessCoefficient),s!=this._pageOffset&&this.invalidateAllRows()}return(i||t)&&(this._hRender&&clearTimeout(this._hRender),(Math.abs(this._scrollTopRendered-this._scrollTop)>20||Math.abs(this._scrollLeftRendered-this._scrollLeft)>20)&&(this._options.forceSyncScrolling||this._options.forceSyncScrollInterval&&this._lastRenderTime<new Date().getTime()-this._options.forceSyncScrollInterval?this.render():this._hRender=setTimeout(this.render,50),this.trigger(this.onViewportChanged))),this.trigger(this.onScroll,{scrollLeft:this._scrollLeft,scrollTop:this._scrollTop}),!!(i||t)}asyncPostProcessRows(){for(var e=this.getDataLength(),t=this._cols;this._postProcessFromRow<=this._postProcessToRow;){var i=this._vScrollDir>=0?this._postProcessFromRow++:this._postProcessToRow--,o=this._rowsCache[i];if(!(!o||i>=e)){this._postProcessedRows[i]||(this._postProcessedRows[i]={}),this.ensureCellNodesInRowsCache(i);for(var s in o.cellNodesByColumnIdx)if(o.cellNodesByColumnIdx.hasOwnProperty(s)){var r=parseInt(s,10),l=t[r],n=this._postProcessedRows[i][r];if(n!==\"R\"){if(l.asyncPostRender||l.asyncPostRenderCleanup){var h=o.cellNodesByColumnIdx[r];h&&l.asyncPostRender&&l.asyncPostRender(h,i,this.getDataItem(i),l,n===\"C\")}this._postProcessedRows[i][r]=\"R\"}}if(this._options.asyncPostRenderDelay>=0){this._hPostRender=setTimeout(this.asyncPostProcessRows.bind(this),this._options.asyncPostRenderDelay);return}}}}asyncPostProcessCleanupRows(){var s;for(var e=this._cols;((s=this._postProcessCleanupQueue)==null?void 0:s.length)>0;){for(var t=this._postProcessCleanupQueue[0].groupId;this._postProcessCleanupQueue.length>0&&this._postProcessCleanupQueue[0].groupId==t;){var i=this._postProcessCleanupQueue.shift();if(i.rowNodeL&&i.rowNodeL.remove(),i.rowNodeR&&i.rowNodeR.remove(),i.cellNode!=null){var o=e[i.columnIdx];o&&o.asyncPostRenderCleanup&&(o.asyncPostRenderCleanup(i.cellNode,i.rowIdx,o),i.cellNode.remove())}}if(this._options.asyncPostRenderDelay>=0){this._hPostRenderCleanup=setTimeout(this.asyncPostProcessCleanupRows.bind(this),this._options.asyncPostCleanupDelay);return}}}updateCellCssStylesOnRenderedRows(e,t){var i,o,s,r;for(var l in this._rowsCache){if(r=t&&t[l],s=e&&e[l],r){for(o in r)if((!s||r[o]!=s[o])&&(i=this.getCellNode(parseInt(l,10),this.getColumnIndex(o)),i)){let n=r[o];ne(i,n)}}if(s){for(o in s)if((!r||r[o]!=s[o])&&(i=this.getCellNode(parseInt(l,10),this.getColumnIndex(o)),i)){let n=s[o];D(i,n)}}}}addCellCssStyles(e,t){if(this._cellCssClasses[e])throw\"addCellCssStyles: cell CSS hash with key '\"+e+\"' already exists.\";this._cellCssClasses[e]=t,this.updateCellCssStylesOnRenderedRows(t,null),this.trigger(this.onCellCssStylesChanged,{key:e,hash:t})}removeCellCssStyles(e){this._cellCssClasses[e]&&(this.updateCellCssStylesOnRenderedRows(null,this._cellCssClasses[e]),delete this._cellCssClasses[e],this.trigger(this.onCellCssStylesChanged,{key:e,hash:null}))}setCellCssStyles(e,t){var i=this._cellCssClasses[e];this._cellCssClasses[e]=t,this.updateCellCssStylesOnRenderedRows(t,i),this.trigger(this.onCellCssStylesChanged,{key:e,hash:t})}getCellCssStyles(e){return this._cellCssClasses[e]}flashCell(e,t,i){if(i=i||100,this._rowsCache[e]){var o=this._jQuery(this.getCellNode(e,t));r(4)}var s=this._options.cellFlashingCssClass;function r(l){l&&setTimeout(function(){o.queue(function(){o.toggleClass(s).dequeue(),r(l-1)})},i)}}handleDragInit(e,t){var i=this.getCellFromEvent(e);if(!i||!this.cellExists(i.row,i.cell))return!1;var o=this.trigger(this.onDragInit,t,e);return e.isImmediatePropagationStopped&&e.isImmediatePropagationStopped()?o:!1}handleDragStart(e,t){var i=this.getCellFromEvent(e);if(!i||!this.cellExists(i.row,i.cell))return!1;var o=this.trigger(this.onDragStart,t,e);return e.isImmediatePropagationStopped&&e.isImmediatePropagationStopped()?o:!1}handleDrag(e,t){return this.trigger(this.onDrag,t,e)}handleDragEnd(e,t){this.trigger(this.onDragEnd,t,e)}handleKeyDown(e){this.trigger(this.onKeyDown,{row:this._activeRow,cell:this._activeCell},e);var t=e.isImmediatePropagationStopped&&e.isImmediatePropagationStopped();if(!t&&!e.shiftKey&&!e.altKey){if(this._options.editable&&this._currentEditor&&this._currentEditor.keyCaptureList&&this._currentEditor.keyCaptureList.indexOf(e.which)>=0)return;e.key===\"Home\"?e.ctrlKey?(this.navigateTop(),t=!0):t=this.navigateRowStart():e.key===\"End\"&&(e.ctrlKey?(this.navigateBottom(),t=!0):t=this.navigateRowEnd())}if(!t)if(!e.shiftKey&&!e.altKey&&!e.ctrlKey){if(this._options.editable&&this._currentEditor&&this._currentEditor.keyCaptureList&&this._currentEditor.keyCaptureList.indexOf(e.which)>=0)return;if(e.key===\"Esc\"||e.key===\"Escape\"){if(!this.getEditorLock().isActive())return;this.cancelEditAndSetFocus()}else e.key===\"PageDown\"?(this.navigatePageDown(),t=!0):e.key===\"PageUp\"?(this.navigatePageUp(),t=!0):e.key===\"Left\"||e.key===\"ArrowLeft\"?t=this.navigateLeft():e.key===\"Right\"||e.key===\"ArrowRight\"?t=this.navigateRight():e.key===\"Up\"||e.key===\"ArrowUp\"?t=this.navigateUp():e.key===\"Down\"||e.key===\"ArrowDown\"?t=this.navigateDown():e.key===\"Tab\"?this._options.enableTabKeyNavigation&&(t=this.navigateNext()):e.key===\"Enter\"&&(this._options.editable&&(this._currentEditor?this._activeRow===this.getDataLength()?this.navigateDown():this.commitEditAndSetFocus():this.getEditorLock().commitCurrentEdit()&&this.makeActiveCellEditable()),t=!0)}else e.key===\"Tab\"&&e.shiftKey&&!e.ctrlKey&&!e.altKey&&(t=this.navigatePrev());if(t){e.stopPropagation(),e.preventDefault();try{e.originalEvent.keyCode=0}catch(i){}}}handleClick(e){this._currentEditor||(e.target!=document.activeElement||this._jQuery(e.target).hasClass(\"slick-cell\"))&&this.setFocus();var t=this.getCellFromEvent(e);if(!(!t||this._currentEditor!=null&&this._activeRow==t.row&&this._activeCell==t.cell)&&(this.trigger(this.onClick,{row:t.row,cell:t.cell},e),!(e.isImmediatePropagationStopped&&e.isImmediatePropagationStopped())&&this.canCellBeActive(t.row,t.cell)&&(!this.getEditorLock().isActive()||this.getEditorLock().commitCurrentEdit()))){var i=e.target&&e.target.classList.contains(re),o=this._cols[t.cell],s=!!(this._options.editable&&o&&o.editor&&this._options.suppressActiveCellChangeOnEdit);this.setActiveCellInternal(this.getCellNode(t.row,t.cell),null,i,s,e)}}handleContextMenu(e){var t=e.target.closest(\".slick-cell\");t&&(this._activeCellNode===t&&this._currentEditor!=null||this.trigger(this.onContextMenu,{},e))}handleDblClick(e){var t=this.getCellFromEvent(e);!t||this._currentEditor!=null&&this._activeRow==t.row&&this._activeCell==t.cell||(this.trigger(this.onDblClick,{row:t.row,cell:t.cell},e),!(e.isImmediatePropagationStopped&&e.isImmediatePropagationStopped())&&this._options.editable&&this.gotoCell(t.row,t.cell,!0))}handleHeaderMouseEnter(e){let t=this.getColumnFromNode(e.target);t&&this.trigger(this.onHeaderMouseEnter,{column:t},e)}handleHeaderMouseLeave(e){let t=this.getColumnFromNode(e.target);t&&this.trigger(this.onHeaderMouseLeave,{column:t},e)}handleHeaderContextMenu(e){var t=e.target.closest(\".slick-header-column\"),i=this.getColumnFromNode(t);i&&this.trigger(this.onHeaderContextMenu,{column:i},e)}handleHeaderClick(e){var t=e.target.closest(\".slick-header-column\"),i=this.getColumnFromNode(t);i&&this.trigger(this.onHeaderClick,{column:i},e)}handleMouseEnter(e){this.trigger(this.onMouseEnter,{},e)}handleMouseLeave(e){this.trigger(this.onMouseLeave,{},e)}cellExists(e,t){return!(e<0||e>=this.getDataLength()||t<0||t>=this._cols.length)}getCellFromPoint(e,t){for(var i=this.getRowFromPosition(t),o=0,s=this._cols,r=0,l=0;l<s.length&&r<e;l++)r+=s[l].width,o++;return o<0&&(o=0),{row:i,cell:o-1}}getCellFromNode(e){if(e==null)return null;var t=e.dataset.c;if(t!=null)return parseInt(t,10);var i=/\\sl(\\d+)\\s/.exec(\" \"+e.className+\" \");return i?parseInt(i[1],10):null}getColumnFromNode(e){if(e==null)return null;var t=this.getCellFromNode(e);return t===null&&this._jQuery?this._jQuery(t).data(\"column\"):this._cols[t]}getRowFromNode(e){if(e!=null)for(var t in this._rowsCache){var i=this._rowsCache[t];if(i.rowNodeL===e||i.rowNodeR===e)return parseInt(t,10)}return null}getCellFromEvent(e){var t,i,o=e.target.closest(\".slick-cell\");return!o||(t=this._layout.getRowFromCellNode(o,e.clientX,e.clientY),i=this.getCellFromNode(o),t==null||i==null)?null:{row:t,cell:i}}getCellNodeBox(e,t){if(!this.cellExists(e,t))return null;for(var i=this._layout.getFrozenRowOffset(e),o=this._cols,s=this._layout.getFrozenCols(),r=this.getRowTop(e)-i,l=r+this._options.rowHeight-1,n=0,h=0;h<t;h++)n+=o[h].width,h==s-1&&(n=0);var d=n+o[t].width;return this._options.rtl?{top:r,right:n,bottom:l,left:d}:{top:r,left:n,bottom:l,right:d}}resetActiveCell(){this.setActiveCellInternal(null,!1)}focus(){this.setFocus()}setFocus(){this._tabbingDirection==-1?this._focusSink1.focus():this._focusSink2.focus()}scrollCellIntoView(e,t,i){if(this.scrollRowIntoView(e,i),!(t<this._layout.getFrozenCols())){var o=this.getColspan(e,t);this.internalScrollColumnIntoView(this._colLeft[t],this._colRight[t+(o>1?o-1:0)])}}scrollColumnIntoView(e){this.internalScrollColumnIntoView(this._colLeft[e],this._colRight[e])}internalScrollColumnIntoView(e,t){var i=this._scrollLeft+R(getComputedStyle(this._layout.getScrollContainerX()).width)-(this._viewportInfo.hasVScroll?this._scrollDims.width:0),o;if(e<this._scrollLeft)o=e;else if(t>i)o=Math.min(e,t-this._layout.getScrollContainerX().clientWidth);else return;this._layout.getScrollContainerX().scrollLeft=o,this.handleScroll(),this.render()}setActiveCellInternal(e,t,i,o,s){var c,g;if(this._activeCellNode!=null){this.makeActiveCellNormal(),this._activeCellNode.classList.remove(\"active\");var r=this._rowsCache[this._activeRow];r&&(r.rowNodeL&&r.rowNodeL.classList.remove(\"active\"),r.rowNodeR&&r.rowNodeR.classList.remove(\"active\"))}if(this._activeCellNode=e,this._activeCellNode!=null){var l=this._activeCellNode.getBoundingClientRect(),n=Math.floor((g=(c=this._activeCellNode.closest(\".grid-canvas\"))==null?void 0:c.getBoundingClientRect().top)!=null?g:0+document.body.scrollTop),h=this._activeCellNode.closest(\".grid-canvas-bottom\")!=null;this.hasFrozenRows()&&h&&(n-=this._options.frozenBottom?Math.round(R(getComputedStyle(this._layout.getCanvasNodeFor(0,0)).height)):this._layout.getFrozenRows()*this._options.rowHeight);var d=this.getCellFromPoint(l[this._options.rtl?\"right\":\"left\"]+document.body.scrollLeft,Math.ceil(l.top+document.body.scrollTop)-n);if(this._activeRow=d.row,this._activeCell=this._activePosX=this.getCellFromNode(this._activeCellNode),this._options.showCellSelection){this._activeCellNode.classList.add(\"active\");var r=this._rowsCache[this._activeRow];r&&(r.rowNodeL&&r.rowNodeL.classList.add(\"active\"),r.rowNodeR&&r.rowNodeR.classList.add(\"active\"))}t==null&&(t=this._activeRow==this.getDataLength()||this._options.autoEdit),this._options.editable&&t&&this.isCellPotentiallyEditable(this._activeRow,this._activeCell)&&(clearTimeout(this._hEditorLoader),this._options.asyncEditorLoading?this._hEditorLoader=setTimeout(()=>{this.makeActiveCellEditable(void 0,i,s)},this._options.asyncEditorLoadDelay):this.makeActiveCellEditable(void 0,i,s))}else this._activeRow=this._activeCell=null;o||this.trigger(this.onActiveCellChanged,this.getActiveCell())}clearTextSelection(){if(document.selection&&document.selection.empty)try{document.selection.empty()}catch(t){}else if(window.getSelection){var e=window.getSelection();e&&e.removeAllRanges&&e.removeAllRanges()}}isCellPotentiallyEditable(e,t){var i=this.getDataLength();return!(e<i&&!this.getDataItem(e)||this._cols[t].cannotTriggerInsert&&e>=i||!this.getEditor(e,t))}makeActiveCellNormal(){this._currentEditor&&(this.trigger(this.onBeforeCellEditorDestroy,{editor:this._currentEditor}),this._currentEditor.destroy(),this._currentEditor=null,this._activeCellNode&&(this._activeCellNode.classList.remove(\"editable\",\"invalid\"),this.updateCellWithFormatter(this._activeCellNode,this._activeRow,this._activeCell),this.invalidatePostProcessingResults(this._activeRow)),navigator.userAgent.toLowerCase().match(/msie/)&&this.clearTextSelection(),this.getEditorLock().deactivate(this._editController))}editActiveCell(e){this.makeActiveCellEditable(e)}makeActiveCellEditable(e,t,i){if(this._activeCellNode){if(!this._options.editable)throw\"Grid : makeActiveCellEditable : should never get called when options.editable is false\";if(clearTimeout(this._hEditorLoader),!!this.isCellPotentiallyEditable(this._activeRow,this._activeCell)){var o=this._cols[this._activeCell],s=this.getDataItem(this._activeRow);if(this.trigger(this.onBeforeEditCell,{row:this._activeRow,cell:this._activeCell,item:s,column:o})===!1){this.setFocus();return}this.getEditorLock().activate(this._editController),this._activeCellNode.classList.add(\"editable\");var r=e||this.getEditor(this._activeRow,this._activeCell);!e&&!r.suppressClearOnEdit&&(this._activeCellNode.innerHTML=\"\");var l=this._data.getItemMetadata&&this._data.getItemMetadata(this._activeRow),n=l&&l.columns,h=n&&(n[o.id]||n[this._activeCell]);this._currentEditor=new r({grid:this,gridPosition:k(this._container),position:k(this._activeCellNode),container:this._activeCellNode,column:o,columnMetaData:h,item:s||{},event:i,editorCellNavOnLRKeys:this._options.editorCellNavOnLRKeys,commitChanges:this.commitEditAndSetFocus.bind(this),cancelChanges:this.cancelEditAndSetFocus.bind(this)}),s&&(this._currentEditor.loadValue(s),t&&this._currentEditor.preClick&&this._currentEditor.preClick()),this._serializedEditorValue=this._currentEditor.serializeValue(),this._currentEditor.position&&this.handleActiveCellPositionChange()}}}commitEditAndSetFocus(){this.getEditorLock().commitCurrentEdit()&&(this.setFocus(),this._options.autoEdit&&this.navigateDown())}cancelEditAndSetFocus(){this.getEditorLock().cancelCurrentEdit()&&this.setFocus()}getActiveCellPosition(){return k(this._activeCellNode)}getGridPosition(){return k(this._container)}getCellEditor(){return this._currentEditor}getActiveCell(){return this._activeCellNode?{row:this._activeRow,cell:this._activeCell}:null}getActiveCellNode(){return this._activeCellNode}scrollActiveCellIntoView(){this._activeRow!=null&&this._activeCell!=null&&this.scrollCellIntoView(this._activeRow,this._activeCell)}scrollRowIntoView(e,t){if(!this._layout.isFrozenRow(e)){var i=Math.round(R(getComputedStyle(this._layout.getScrollContainerY()).height)),o=this.hasFrozenRows()&&!this._options.frozenBottom?e-this._layout.getFrozenRows()+1:e,s=o*this._options.rowHeight,r=(o+1)*this._options.rowHeight-i+(this._viewportInfo.hasHScroll?this._scrollDims.height:0);(o+1)*this._options.rowHeight>this._scrollTop+i+this._pageOffset?(this.scrollTo(t?s:r),this.render()):o*this._options.rowHeight<this._scrollTop+this._pageOffset&&(this.scrollTo(t?r:s),this.render())}}scrollRowToTop(e){this.scrollTo(e*this._options.rowHeight),this.render()}scrollPage(e){var t=e*this._viewportInfo.numVisibleRows;if(this.scrollTo((this.getRowFromPosition(this._scrollTop)+t)*this._options.rowHeight),this.render(),this._options.enableCellNavigation&&this._activeRow!=null){var i=this._activeRow+t,o=this.getDataLengthIncludingAddNew();i>=o&&(i=o-1),i<0&&(i=0);for(var s=0,r=null,l=this._activePosX;s<=this._activePosX;)this.canCellBeActive(i,s)&&(r=s),s+=this.getColspan(i,s);r!=null?(this.setActiveCellInternal(this.getCellNode(i,r)),this._activePosX=l):this.resetActiveCell()}}navigatePageDown(){this.scrollPage(1)}navigatePageUp(){this.scrollPage(-1)}navigateTop(){this.navigateToRow(0)}navigateBottom(){this.navigateToRow(this.getDataLength()-1)}navigateToRow(e){var t=this.getDataLength();if(!t)return!0;if(e<0?e=0:e>=t&&(e=t-1),this.scrollCellIntoView(e,0,!0),this._options.enableCellNavigation&&this._activeRow!=null){for(var i=0,o=null,s=this._activePosX;i<=this._activePosX;)this.canCellBeActive(e,i)&&(o=i),i+=this.getColspan(e,i);o!=null?(this.setActiveCellInternal(this.getCellNode(e,o)),this._activePosX=s):this.resetActiveCell()}return!0}getColspan(e,t){var i=this._data.getItemMetadata&&this._data.getItemMetadata(e);if(!i||!i.columns)return 1;var o=this._cols,s=o[t]&&(i.columns[o[t].id]||i.columns[t]),r=s&&s.colspan;return r===\"*\"?r=o.length-t:r=r||1,r}navigateRight(){return this.navigate(\"right\")}navigateLeft(){return this.navigate(\"left\")}navigateDown(){return this.navigate(\"down\")}navigateUp(){return this.navigate(\"up\")}navigateNext(){return this.navigate(\"next\")}navigatePrev(){return this.navigate(\"prev\")}navigateRowStart(){return this.navigate(\"home\")}navigateRowEnd(){return this.navigate(\"end\")}navigate(e){if(!this._options.enableCellNavigation||!this._activeCellNode&&e!=\"prev\"&&e!=\"next\")return!1;if(!this.getEditorLock().commitCurrentEdit())return!0;this.setFocus(),this._cellNavigator||(this._cellNavigator=new Q({getColumnCount:()=>this._cols.length,getRowCount:()=>this.getDataLengthIncludingAddNew(),getColspan:this.getColspan.bind(this),canCellBeActive:this.canCellBeActive.bind(this),setTabbingDirection:o=>this._tabbingDirection=o,isRTL:()=>this._options.rtl}));var t=this._cellNavigator.navigate(e,this._activeRow,this._activeCell,this._activePosX);if(t){if(this.hasFrozenRows()&&this._options.frozenBottom&&t.row==this.getDataLength())return;var i=t.row==this.getDataLength();return this._layout.isFrozenRow(t.row)||this.scrollCellIntoView(t.row,t.cell,!i),this.setActiveCellInternal(this.getCellNode(t.row,t.cell)),this._activePosX=t.posX,!0}else return this.setActiveCellInternal(this.getCellNode(this._activeRow,this._activeCell)),!1}getCellNode(e,t){return this._rowsCache[e]?(this.ensureCellNodesInRowsCache(e),this._rowsCache[e].cellNodesByColumnIdx[t]):null}setActiveCell(e,t){if(this._initialized){var i=this._cols;e>this.getDataLength()||e<0||t>=i.length||t<0||this._options.enableCellNavigation&&(this.scrollCellIntoView(e,t,!1),this.setActiveCellInternal(this.getCellNode(e,t),!1))}}setActiveRow(e,t,i){this._initialized&&(e>this.getDataLength()||e<0||t>=this._cols.length||t<0||(this._activeRow=e,i||this.scrollCellIntoView(e,t||0,!1)))}canCellBeActive(e,t){var i=this._cols;if(!this._options.enableCellNavigation||e>=this.getDataLengthIncludingAddNew()||e<0||t>=i.length||t<0)return!1;var o=this._data.getItemMetadata&&this._data.getItemMetadata(e);if(o&&typeof o.focusable==\"boolean\")return o.focusable;var s=o&&o.columns;return s&&i[t]&&s[i[t].id]&&typeof s[i[t].id].focusable==\"boolean\"?s[i[t].id].focusable:s&&s[t]&&typeof s[t].focusable==\"boolean\"?s[t].focusable:i[t].focusable}canCellBeSelected(e,t){var i=this._cols;if(e>=this.getDataLength()||e<0||t>=i.length||t<0)return!1;var o=this._data.getItemMetadata&&this._data.getItemMetadata(e);if(o&&typeof o.selectable==\"boolean\")return o.selectable;var s=o&&o.columns&&(o.columns[i[t].id]||o.columns[t]);return s&&typeof s.selectable==\"boolean\"?s.selectable:i[t].selectable}gotoCell(e,t,i){if(this._initialized&&this.canCellBeActive(e,t)&&this.getEditorLock().commitCurrentEdit()){this.scrollCellIntoView(e,t,!1);var o=this.getCellNode(e,t);this.setActiveCellInternal(o,i||e===this.getDataLength()||this._options.autoEdit),this._currentEditor||this.setFocus()}}commitCurrentEdit(){var e=this.getDataItem(this._activeRow),t=this._cols[this._activeCell],i=this;if(this._currentEditor){if(this._currentEditor.isValueChanged()){var o=this._currentEditor.validate();if(o.valid){if(this._activeRow<this.getDataLength()){var s={row:this._activeRow,cell:i._activeCell,editor:this._currentEditor,serializedValue:this._currentEditor.serializeValue(),prevSerializedValue:this._serializedEditorValue,execute:function(){this.editor.applyValue(e,this.serializedValue),i.updateRow(this.row),i.trigger(i.onCellChange,{row:this.activeRow,cell:i._activeCell,item:e})},undo:function(){this.editor.applyValue(e,this.prevSerializedValue),i.updateRow(this.row),i.trigger(i.onCellChange,{row:this.activeRow,cell:i._activeCell,item:e})}};this._options.editCommandHandler?(this.makeActiveCellNormal(),this._options.editCommandHandler(e,t,s)):(s.execute(),this.makeActiveCellNormal())}else{var r={};this._currentEditor.applyValue(r,this._currentEditor.serializeValue()),this.makeActiveCellNormal(),this.trigger(this.onAddNewRow,{item:r,column:t})}return!this.getEditorLock().isActive()}else return this._activeCellNode.classList.remove(\"invalid\"),this._activeCellNode.offsetWidth,this._activeCellNode.classList.add(\"invalid\"),this.trigger(this.onValidationError,{editor:this._currentEditor,cellNode:this._activeCellNode,validationResults:o,row:this._activeRow,cell:this._activeCell,column:t}),this._currentEditor.focus(),!1}this.makeActiveCellNormal()}return!0}cancelCurrentEdit(){return this.makeActiveCellNormal(),!0}rowsToRanges(e){for(var t=[],i=this._cols.length-1,o=0;o<e.length;o++)t.push(new le(e[o],0,e[o],i));return t}getSelectedRows(){if(!this._selectionModel)throw\"Selection model is not set\";return this._selectedRows}setSelectedRows(e){if(!this._selectionModel)throw\"Selection model is not set\";this._selectionModel.setSelectedRanges(this.rowsToRanges(e))}};return Qe(We);})();",
          "",
          "---------------"
        ],
        "src/Serenity.Assets/wwwroot/Scripts/SlickGrid/slick.groupitemmetadataprovider.js||src/Serenity.Assets/wwwroot/Scripts/SlickGrid/slick.groupitemmetadataprovider.js": [
          "File: src/Serenity.Assets/wwwroot/Scripts/SlickGrid/slick.groupitemmetadataprovider.js -> src/Serenity.Assets/wwwroot/Scripts/SlickGrid/slick.groupitemmetadataprovider.js",
          "--- Hunk 1 ---",
          "[Context before]",
          "96:           }",
          "97:         }",
          "98:         result.colspan = 0;",
          "100:           var col2 = cols[idx];",
          "101:           if (!((_d = (_c = this.options).hasSummaryType) == null ? void 0 : _d.call(_c, col2)) && !!(col1 == null ? void 0 : col1.frozen) === !!(col2 == null ? void 0 : col2.frozen)) {",
          "102:             result.colspan++;",
          "",
          "[Removed Lines]",
          "99:         for (var idx = result.cell + 1; idx <= cols.length; idx++) {",
          "",
          "[Added Lines]",
          "99:         for (var idx = result.cell + 1; idx < cols.length; idx++) {",
          "",
          "---------------"
        ],
        "src/Serenity.Assets/wwwroot/Scripts/SlickGrid/slick.groupitemmetadataprovider.min.js||src/Serenity.Assets/wwwroot/Scripts/SlickGrid/slick.groupitemmetadataprovider.min.js": [
          "File: src/Serenity.Assets/wwwroot/Scripts/SlickGrid/slick.groupitemmetadataprovider.min.js -> src/Serenity.Assets/wwwroot/Scripts/SlickGrid/slick.groupitemmetadataprovider.min.js",
          "--- Hunk 1 ---",
          "[Context before]",
          "2: <span class=\"${t.escape(e.groupTitleCssClass)}\" level=\"${t.escape(s.level)}\">${s.title}</span>`}static defaultTotalsFormat(t,e){var o,a,r,l,n;var s=t.item;return!s.__groupTotals&&s.totals&&(t.item=t.item.totals),(n=(l=(a=(o=t.column)==null?void 0:o.groupTotalsFormatter)==null?void 0:a.call(o,s,t.column))!=null?l:(r=e==null?void 0:e.groupTotalsFormatter)==null?void 0:r.call(e,s,t.column))!=null?n:\"\"}init(t){this.grid=t,t.onClick.subscribe(this.handleGridClick),t.onKeyDown.subscribe(this.handleGridKeyDown)}destroy(){var t,e;this.grid&&((t=this.grid.onClick)==null||t.unsubscribe(this.handleGridClick),(e=this.grid.onKeyDown)==null||e.unsubscribe(this.handleGridKeyDown))}getOptions(){return this.options}setOptions(t){Object.assign(this.options,t)}},d=u;d.defaults={enableExpandCollapse:!0,groupCellCssClass:\"slick-group-cell\",groupCssClass:\"slick-group\",groupFocusable:!0,groupIndentation:15,groupLevelPrefix:\"slick-group-level-\",groupTitleCssClass:\"slick-group-title\",hasSummaryType:t=>t.summaryType&&t.summaryType!=-1,totalsCssClass:\"slick-group-totals\",toggleCssClass:\"slick-group-toggle\",toggleCollapsedCssClass:\"collapsed\",toggleExpandedCssClass:\"expanded\",totalsFocusable:!1};return D(k);})();",
          "3: [\"Data\", \"Editors\", \"Formatters\", \"Plugins\"].forEach(ns => Slick._[ns] && (Slick[ns] = Object.assign(Slick[ns] || {}, Slick._[ns])) && delete Slick._[ns]); Object.assign(Slick, Slick._); delete Slick._; Slick.Data = Slick.Data || {}; Slick.Data.GroupItemMetadataProvider = Slick.GroupItemMetadataProvider;",
          "",
          "[Removed Lines]",
          "1: var Slick=Slick||{};Slick._=(()=>{var c=Object.defineProperty;var y=Object.getOwnPropertyDescriptor;var F=Object.getOwnPropertyNames;var v=Object.prototype.hasOwnProperty;var G=(p,t)=>{for(var e in t)c(p,e,{get:t[e],enumerable:!0})},T=(p,t,e,s)=>{if(t&&typeof t==\"object\"||typeof t==\"function\")for(let o of F(t))!v.call(p,o)&&o!==e&&c(p,o,{get:()=>t[o],enumerable:!(s=y(t,o))||s.enumerable});return p};var D=p=>T(c({},\"__esModule\",{value:!0}),p);var k={};G(k,{GroupItemMetadataProvider:()=>d});var{convertCompatFormatter:f,Group:h}=Slick;var u=class{constructor(t){this.handleGridClick=(t,e)=>{var r,l,n,i,g,m,C;let s=(r=e==null?void 0:e.grid)!=null?r:this.grid;if(s){var o=s.getDataItem(e.row);if(!(!o||!(o instanceof h)||!this.options.toggleCssClass||!t.target.classList.contains(this.options.toggleCssClass))){t.stopImmediatePropagation(),t.preventDefault();var a=s.getRenderedRange();(n=(l=s.getData()).setRefreshHints)==null||n.call(l,{ignoreDiffsBefore:a.top,ignoreDiffsAfter:a.bottom+1}),o.collapsed?(g=(i=s.getData()).expandGroup)==null||g.call(i,o.groupingKey):(C=(m=s.getData()).collapseGroup)==null||C.call(m,o.groupingKey)}}};this.handleGridKeyDown=(t,e)=>{var l,n,i,g,m,C,b;if(!this.options.enableExpandCollapse||t.key!==\" \"&&t.key!==\"-\"&&t.key!==\"+\")return;let s=(l=e==null?void 0:e.grid)!=null?l:this.grid;if(s){var o=s.getActiveCell();if(o){var a=s.getDataItem(o.row);if(!(!a||!(a instanceof h))&&(t.stopImmediatePropagation(),t.preventDefault(),!(t.key==\"+\"&&!a.collapsed||t.key==\"-\"&&a.collapsed))){var r=s.getRenderedRange();(i=(n=s.getData()).setRefreshHints)==null||i.call(n,{ignoreDiffsBefore:r.top,ignoreDiffsAfter:r.bottom+1}),a.collapsed?(m=(g=s.getData()).expandGroup)==null||m.call(g,a.groupingKey):(b=(C=s.getData()).collapseGroup)==null||b.call(C,a.groupingKey)}}}};this.groupCellPosition=()=>{var r,l,n,i;let t={cell:0,colspan:\"*\"};if(!this.options.groupRowTotals||!this.grid)return t;for(var e=this.grid.getColumns(),s,o=0;o<e.length;o++)if(s=e[o],!((l=(r=this.options).hasSummaryType)!=null&&l.call(r,e[o]))){t.cell=o;break}t.colspan=0;for(var o=t.cell+1;o<=e.length;o++){var a=e[o];if(!((i=(n=this.options).hasSummaryType)!=null&&i.call(n,a))&&!!(s!=null&&s.frozen)==!!(a!=null&&a.frozen))t.colspan++;else break}return t.colspan=Math.max(1,t.colspan),t};this.getGroupRowMetadata=t=>{let e=this.options,s=this.groupCellPosition(),o={selectable:!1,focusable:e.groupFocusable,cssClasses:e.groupCssClass+\" \"+e.groupLevelPrefix+(t==null?void 0:t.level),columns:{[s.cell]:{colspan:s.colspan,cssClasses:e.groupCellCssClass,format:e.groupFormat,editor:null}}};return e.groupRowTotals&&(o.format=e.totalsFormat),o};this.getTotalsRowMetadata=t=>{var s;let e=this.options;return{selectable:!1,focusable:e.totalsFocusable,cssClasses:e.totalsCssClass+\" \"+e.groupLevelPrefix+((s=t==null?void 0:t.group)==null?void 0:s.level),format:e.totalsFormat,editor:null}};var e,s,o,a;this.options=Object.assign({},u.defaults,t),(s=(e=this.options).groupFormat)!=null||(e.groupFormat=t!=null&&t.groupFormatter?f(t.groupFormatter):r=>u.defaultGroupFormat(r,this.options)),(a=(o=this.options).totalsFormat)!=null||(o.totalsFormat=t!=null&&t.totalsFormatter?f(t.totalsFormatter):r=>u.defaultTotalsFormat(r,this.grid))}static defaultGroupFormat(t,e){e!=null||(e=u.defaults);let s=t.item;if(!e.enableExpandCollapse)return s==null?void 0:s.title;let o=s.level*e.groupIndentation;return`<span class=\"${t.escape(e.toggleCssClass+\" \"+(s.collapsed?e.toggleCollapsedCssClass:e.toggleExpandedCssClass))}\" style=\"margin-left: ${o}px\">",
          "",
          "[Added Lines]",
          "1: var Slick=Slick||{};Slick._=(()=>{var c=Object.defineProperty;var y=Object.getOwnPropertyDescriptor;var F=Object.getOwnPropertyNames;var v=Object.prototype.hasOwnProperty;var G=(p,t)=>{for(var e in t)c(p,e,{get:t[e],enumerable:!0})},T=(p,t,e,s)=>{if(t&&typeof t==\"object\"||typeof t==\"function\")for(let o of F(t))!v.call(p,o)&&o!==e&&c(p,o,{get:()=>t[o],enumerable:!(s=y(t,o))||s.enumerable});return p};var D=p=>T(c({},\"__esModule\",{value:!0}),p);var k={};G(k,{GroupItemMetadataProvider:()=>d});var{convertCompatFormatter:f,Group:h}=Slick;var u=class{constructor(t){this.handleGridClick=(t,e)=>{var r,l,n,i,g,m,C;let s=(r=e==null?void 0:e.grid)!=null?r:this.grid;if(s){var o=s.getDataItem(e.row);if(!(!o||!(o instanceof h)||!this.options.toggleCssClass||!t.target.classList.contains(this.options.toggleCssClass))){t.stopImmediatePropagation(),t.preventDefault();var a=s.getRenderedRange();(n=(l=s.getData()).setRefreshHints)==null||n.call(l,{ignoreDiffsBefore:a.top,ignoreDiffsAfter:a.bottom+1}),o.collapsed?(g=(i=s.getData()).expandGroup)==null||g.call(i,o.groupingKey):(C=(m=s.getData()).collapseGroup)==null||C.call(m,o.groupingKey)}}};this.handleGridKeyDown=(t,e)=>{var l,n,i,g,m,C,b;if(!this.options.enableExpandCollapse||t.key!==\" \"&&t.key!==\"-\"&&t.key!==\"+\")return;let s=(l=e==null?void 0:e.grid)!=null?l:this.grid;if(s){var o=s.getActiveCell();if(o){var a=s.getDataItem(o.row);if(!(!a||!(a instanceof h))&&(t.stopImmediatePropagation(),t.preventDefault(),!(t.key==\"+\"&&!a.collapsed||t.key==\"-\"&&a.collapsed))){var r=s.getRenderedRange();(i=(n=s.getData()).setRefreshHints)==null||i.call(n,{ignoreDiffsBefore:r.top,ignoreDiffsAfter:r.bottom+1}),a.collapsed?(m=(g=s.getData()).expandGroup)==null||m.call(g,a.groupingKey):(b=(C=s.getData()).collapseGroup)==null||b.call(C,a.groupingKey)}}}};this.groupCellPosition=()=>{var r,l,n,i;let t={cell:0,colspan:\"*\"};if(!this.options.groupRowTotals||!this.grid)return t;for(var e=this.grid.getColumns(),s,o=0;o<e.length;o++)if(s=e[o],!((l=(r=this.options).hasSummaryType)!=null&&l.call(r,e[o]))){t.cell=o;break}t.colspan=0;for(var o=t.cell+1;o<e.length;o++){var a=e[o];if(!((i=(n=this.options).hasSummaryType)!=null&&i.call(n,a))&&!!(s!=null&&s.frozen)==!!(a!=null&&a.frozen))t.colspan++;else break}return t.colspan=Math.max(1,t.colspan),t};this.getGroupRowMetadata=t=>{let e=this.options,s=this.groupCellPosition(),o={selectable:!1,focusable:e.groupFocusable,cssClasses:e.groupCssClass+\" \"+e.groupLevelPrefix+(t==null?void 0:t.level),columns:{[s.cell]:{colspan:s.colspan,cssClasses:e.groupCellCssClass,format:e.groupFormat,editor:null}}};return e.groupRowTotals&&(o.format=e.totalsFormat),o};this.getTotalsRowMetadata=t=>{var s;let e=this.options;return{selectable:!1,focusable:e.totalsFocusable,cssClasses:e.totalsCssClass+\" \"+e.groupLevelPrefix+((s=t==null?void 0:t.group)==null?void 0:s.level),format:e.totalsFormat,editor:null}};var e,s,o,a;this.options=Object.assign({},u.defaults,t),(s=(e=this.options).groupFormat)!=null||(e.groupFormat=t!=null&&t.groupFormatter?f(t.groupFormatter):r=>u.defaultGroupFormat(r,this.options)),(a=(o=this.options).totalsFormat)!=null||(o.totalsFormat=t!=null&&t.totalsFormatter?f(t.totalsFormatter):r=>u.defaultTotalsFormat(r,this.grid))}static defaultGroupFormat(t,e){e!=null||(e=u.defaults);let s=t.item;if(!e.enableExpandCollapse)return s==null?void 0:s.title;let o=s.level*e.groupIndentation;return`<span class=\"${t.escape(e.toggleCssClass+\" \"+(s.collapsed?e.toggleCollapsedCssClass:e.toggleExpandedCssClass))}\" style=\"margin-left: ${o}px\">",
          "",
          "---------------"
        ],
        "src/Serenity.Scripts/wwwroot/Serenity.CoreLib.d.ts||src/Serenity.Scripts/wwwroot/Serenity.CoreLib.d.ts": [
          "File: src/Serenity.Scripts/wwwroot/Serenity.CoreLib.d.ts -> src/Serenity.Scripts/wwwroot/Serenity.CoreLib.d.ts",
          "--- Hunk 1 ---",
          "[Context before]",
          "1890:      unregisterPlugin(plugin: IPlugin): void;",
          "1891:      getPluginByName(name: string): IPlugin;",
          "1892:      setSelectionModel(model: SelectionModel): void;",
          "1893:      getScrollBarDimensions(): {",
          "1894:       width: number;",
          "1895:       height: number;",
          "",
          "[Removed Lines]",
          "[None]",
          "",
          "[Added Lines]",
          "1893:      private unregisterSelectionModel;",
          "",
          "---------------",
          "--- Hunk 2 ---",
          "[Context before]",
          "1904:      getCanvasNode(columnIdOrIdx?: string | number, row?: number): HTMLElement;",
          "1905:      getCanvases(): JQuery | HTMLElement[];",
          "1906:      getActiveCanvasNode(e?: IEventData): HTMLElement;",
          "1908:      getViewportNode(columnIdOrIdx?: string | number, row?: number): HTMLElement;",
          "1909:      private getViewports;",
          "1910:      getActiveViewportNode(e?: IEventData): HTMLElement;",
          "1912:      private getAvailableWidth;",
          "1913:      private updateCanvasWidth;",
          "1914:      private unbindAncestorScrollEvents;",
          "",
          "[Removed Lines]",
          "1907:      setActiveCanvasNode(e?: IEventData): void;",
          "1911:      setActiveViewportNode(e?: IEventData): void;",
          "",
          "[Added Lines]",
          "[None]",
          "",
          "---------------"
        ]
      }
    },
    {
      "candidate_hash": "b2f616eb306002ff223f764817b6f8c0c6ca2f0c",
      "candidate_info": {
        "commit_hash": "b2f616eb306002ff223f764817b6f8c0c6ca2f0c",
        "repo": "serenity-is/Serenity",
        "commit_url": "https://github.com/serenity-is/Serenity/commit/b2f616eb306002ff223f764817b6f8c0c6ca2f0c",
        "files": [
          "CHANGELOG.md",
          "build/Package.Build.props"
        ],
        "message": ":up: 6.9.6",
        "before_after_code_files": [
          "build/Package.Build.props||build/Package.Build.props"
        ]
      },
      "candidate_patch_features": {
        "candidate_earlier_than_patch": 0,
        "same_branch_evolution": 1,
        "olp_code_files": {
          "patch": [
            "build/Package.Build.props||build/Package.Build.props"
          ],
          "candidate": [
            "build/Package.Build.props||build/Package.Build.props"
          ]
        }
      },
      "candidate_diff": {
        "build/Package.Build.props||build/Package.Build.props": [
          "File: build/Package.Build.props -> build/Package.Build.props",
          "--- Hunk 1 ---",
          "[Context before]",
          "1: <Project>",
          "2:   <PropertyGroup>",
          "4:   </PropertyGroup>",
          "5: </Project>",
          "",
          "[Removed Lines]",
          "3:     <Version>6.9.5</Version>",
          "",
          "[Added Lines]",
          "3:     <Version>6.9.6</Version>",
          "",
          "---------------"
        ]
      }
    },
    {
      "candidate_hash": "fd8a76288309d25e424aaf550f3d95208aa65504",
      "candidate_info": {
        "commit_hash": "fd8a76288309d25e424aaf550f3d95208aa65504",
        "repo": "serenity-is/Serenity",
        "commit_url": "https://github.com/serenity-is/Serenity/commit/fd8a76288309d25e424aaf550f3d95208aa65504",
        "files": [
          "CHANGELOG.md",
          "build/Package.Build.props",
          "src/Serenity.Net.Web/Upload/FileUploadBehavior.cs",
          "src/Serenity.Scripts/corelib/package.json",
          "src/Serenity.Scripts/corelib/src/ui/editors/uploadeditors.ts"
        ],
        "message": ":up: 6.4.2",
        "before_after_code_files": [
          "build/Package.Build.props||build/Package.Build.props",
          "src/Serenity.Net.Web/Upload/FileUploadBehavior.cs||src/Serenity.Net.Web/Upload/FileUploadBehavior.cs",
          "src/Serenity.Scripts/corelib/src/ui/editors/uploadeditors.ts||src/Serenity.Scripts/corelib/src/ui/editors/uploadeditors.ts"
        ]
      },
      "candidate_patch_features": {
        "candidate_earlier_than_patch": 1,
        "same_branch_evolution": 1,
        "olp_code_files": {
          "patch": [
            "build/Package.Build.props||build/Package.Build.props"
          ],
          "candidate": [
            "build/Package.Build.props||build/Package.Build.props"
          ]
        }
      },
      "candidate_diff": {
        "build/Package.Build.props||build/Package.Build.props": [
          "File: build/Package.Build.props -> build/Package.Build.props",
          "--- Hunk 1 ---",
          "[Context before]",
          "1: <Project>",
          "2:   <PropertyGroup>",
          "4:   </PropertyGroup>",
          "5: </Project>",
          "",
          "[Removed Lines]",
          "3:     <Version>6.4.1</Version>",
          "",
          "[Added Lines]",
          "3:     <Version>6.4.2</Version>",
          "",
          "---------------"
        ],
        "src/Serenity.Net.Web/Upload/FileUploadBehavior.cs||src/Serenity.Net.Web/Upload/FileUploadBehavior.cs": [
          "File: src/Serenity.Net.Web/Upload/FileUploadBehavior.cs -> src/Serenity.Net.Web/Upload/FileUploadBehavior.cs",
          "--- Hunk 1 ---",
          "[Context before]",
          "184:                 var colon = key.IndexOf(\":\", StringComparison.Ordinal);",
          "185:                 if (colon >= 0)",
          "186:                 {",
          "188:                     value = string.Format(CultureInfo.InvariantCulture, string.Concat(\"{0:\", p.Key.AsSpan(colon + 1, p.Key.Length - colon - 2), \"}\"), val);",
          "189:                 }",
          "196:             }",
          "198:             result = formatSanitizer.SanitizeResult(result);",
          "",
          "[Removed Lines]",
          "187:                     key = key[..colon];",
          "190:                 else",
          "191:                     value = Convert.ToString(val ?? \"\", CultureInfo.InvariantCulture);",
          "193:                 value = formatSanitizer.SanitizePlaceholder(p.Key, value);",
          "195:                 result = result.Replace(key, value, StringComparison.Ordinal);",
          "",
          "[Added Lines]",
          "187:                     key = key[1..colon];",
          "190:                 else",
          "191:                 {",
          "192:                     key = key[1..^1];",
          "193:                     value = Convert.ToString(val ?? \"\", CultureInfo.InvariantCulture);",
          "194:                 }",
          "196:                 value = formatSanitizer.SanitizePlaceholder(key, value);",
          "198:                 result = result.Replace(p.Key, value, StringComparison.Ordinal);",
          "",
          "---------------"
        ],
        "src/Serenity.Scripts/corelib/src/ui/editors/uploadeditors.ts||src/Serenity.Scripts/corelib/src/ui/editors/uploadeditors.ts": [
          "File: src/Serenity.Scripts/corelib/src/ui/editors/uploadeditors.ts -> src/Serenity.Scripts/corelib/src/ui/editors/uploadeditors.ts",
          "--- Hunk 1 ---",
          "[Context before]",
          "300:             .addClass('upload-progress')",
          "301:             .prependTo(this.toolbar.element);",
          "305:         this.fileSymbols = $('<ul/>').appendTo(this.element);",
          "306:         if (!this.element.attr('id')) {",
          "",
          "[Removed Lines]",
          "303:         UploadHelper.addUploadInput(this.getUploadInputOptions());",
          "",
          "[Added Lines]",
          "303:         this.uploadInput = UploadHelper.addUploadInput(this.getUploadInputOptions());",
          "",
          "---------------"
        ]
      }
    },
    {
      "candidate_hash": "6b7ae5c0d204d5b29d3dce7bf3c266b97d5f9778",
      "candidate_info": {
        "commit_hash": "6b7ae5c0d204d5b29d3dce7bf3c266b97d5f9778",
        "repo": "serenity-is/Serenity",
        "commit_url": "https://github.com/serenity-is/Serenity/commit/6b7ae5c0d204d5b29d3dce7bf3c266b97d5f9778",
        "files": [
          "CHANGELOG.md",
          "build/Package.Build.props"
        ],
        "message": ":up: 6.3.4",
        "before_after_code_files": [
          "build/Package.Build.props||build/Package.Build.props"
        ]
      },
      "candidate_patch_features": {
        "candidate_earlier_than_patch": 1,
        "same_branch_evolution": 1,
        "olp_code_files": {
          "patch": [
            "build/Package.Build.props||build/Package.Build.props"
          ],
          "candidate": [
            "build/Package.Build.props||build/Package.Build.props"
          ]
        }
      },
      "candidate_diff": {
        "build/Package.Build.props||build/Package.Build.props": [
          "File: build/Package.Build.props -> build/Package.Build.props",
          "--- Hunk 1 ---",
          "[Context before]",
          "1: <Project>",
          "2:   <PropertyGroup>",
          "4:   </PropertyGroup>",
          "5: </Project>",
          "",
          "[Removed Lines]",
          "3:     <Version>6.3.3</Version>",
          "",
          "[Added Lines]",
          "3:     <Version>6.3.4</Version>",
          "",
          "---------------"
        ]
      }
    },
    {
      "candidate_hash": "ee6cc8b6e46c87dd37e45591c35bea64a1209490",
      "candidate_info": {
        "commit_hash": "ee6cc8b6e46c87dd37e45591c35bea64a1209490",
        "repo": "serenity-is/Serenity",
        "commit_url": "https://github.com/serenity-is/Serenity/commit/ee6cc8b6e46c87dd37e45591c35bea64a1209490",
        "files": [
          "CHANGELOG.md",
          "build/Package.Build.props"
        ],
        "message": ":up: 8.0.1 with full System.Text.Json support",
        "before_after_code_files": [
          "build/Package.Build.props||build/Package.Build.props"
        ]
      },
      "candidate_patch_features": {
        "candidate_earlier_than_patch": 0,
        "same_branch_evolution": 1,
        "olp_code_files": {
          "patch": [
            "build/Package.Build.props||build/Package.Build.props"
          ],
          "candidate": [
            "build/Package.Build.props||build/Package.Build.props"
          ]
        }
      },
      "candidate_diff": {
        "build/Package.Build.props||build/Package.Build.props": [
          "File: build/Package.Build.props -> build/Package.Build.props",
          "--- Hunk 1 ---",
          "[Context before]",
          "1: <Project>",
          "2:   <PropertyGroup>",
          "4:   </PropertyGroup>",
          "5: </Project>",
          "",
          "[Removed Lines]",
          "3:     <Version>8.0.0</Version>",
          "",
          "[Added Lines]",
          "3:     <Version>8.0.1</Version>",
          "",
          "---------------"
        ]
      }
    }
  ]
}