{
  "cve_id": "CVE-2021-41090",
  "cve_desc": "Grafana Agent is a telemetry collector for sending metrics, logs, and trace data to the opinionated Grafana observability stack. Prior to versions 0.20.1 and 0.21.2, inline secrets defined within a metrics instance config are exposed in plaintext over two endpoints: metrics instance configs defined in the base YAML file are exposed at `/-/config` and metrics instance configs defined for the scraping service are exposed at `/agent/api/v1/configs/:key`. Inline secrets will be exposed to anyone being able to reach these endpoints. If HTTPS with client authentication is not configured, these endpoints are accessible to unauthenticated users. Secrets found in these sections are used for delivering metrics to a Prometheus Remote Write system, authenticating against a system for discovering Prometheus targets, and authenticating against a system for collecting metrics. This does not apply for non-inlined secrets, such as `*_file` based secrets. This issue is patched in Grafana Agent versions 0.20.1 and 0.21.2. A few workarounds are available. Users who cannot upgrade should use non-inline secrets where possible. Users may also desire to restrict API access to Grafana Agent with some combination of restricting the network interfaces Grafana Agent listens on through `http_listen_address` in the `server` block, configuring Grafana Agent to use HTTPS with client authentication, and/or using firewall rules to restrict external access to Grafana Agent's API.",
  "repo": "grafana/agent",
  "patch_hash": "af7fb01e31fe2d389e5f1c36b399ddc46b412b21",
  "patch_info": {
    "commit_hash": "af7fb01e31fe2d389e5f1c36b399ddc46b412b21",
    "repo": "grafana/agent",
    "commit_url": "https://github.com/grafana/agent/commit/af7fb01e31fe2d389e5f1c36b399ddc46b412b21",
    "files": [
      "CHANGELOG.md",
      "docs/configuration/integrations/node-exporter-config.md",
      "docs/configuration/integrations/process-exporter-config.md",
      "docs/getting-started/_index.md",
      "docs/operator/custom-resource-quickstart.md",
      "docs/operator/getting-started.md",
      "docs/upgrade-guide/_index.md",
      "pkg/operator/defaults.go",
      "production/README.md",
      "production/grafanacloud-install.sh",
      "production/kubernetes/agent-bare.yaml",
      "production/kubernetes/agent-loki.yaml",
      "production/kubernetes/agent-traces.yaml",
      "production/kubernetes/build/lib/version.libsonnet",
      "production/kubernetes/install-bare.sh",
      "production/tanka/grafana-agent/v1/main.libsonnet",
      "production/tanka/grafana-agent/v2/internal/base.libsonnet",
      "production/tanka/grafana-agent/v2/internal/syncer.libsonnet"
    ],
    "message": "announce patch releases for cve-2021-41090 (#1152)",
    "before_after_code_files": [
      "pkg/operator/defaults.go||pkg/operator/defaults.go",
      "production/grafanacloud-install.sh||production/grafanacloud-install.sh",
      "production/kubernetes/build/lib/version.libsonnet||production/kubernetes/build/lib/version.libsonnet",
      "production/kubernetes/install-bare.sh||production/kubernetes/install-bare.sh",
      "production/tanka/grafana-agent/v1/main.libsonnet||production/tanka/grafana-agent/v1/main.libsonnet",
      "production/tanka/grafana-agent/v2/internal/base.libsonnet||production/tanka/grafana-agent/v2/internal/base.libsonnet",
      "production/tanka/grafana-agent/v2/internal/syncer.libsonnet||production/tanka/grafana-agent/v2/internal/syncer.libsonnet"
    ]
  },
  "patch_diff": {
    "pkg/operator/defaults.go||pkg/operator/defaults.go": [
      "File: pkg/operator/defaults.go -> pkg/operator/defaults.go",
      "--- Hunk 1 ---",
      "[Context before]",
      "15:   \"v0.18.4\",",
      "16:   \"v0.19.0\",",
      "17:   \"v0.20.0\",",
      "18:   \"v0.21.0\",",
      "19:   \"v0.21.1\",",
      "22:  }",
      "",
      "[Removed Lines]",
      "[None]",
      "",
      "[Added Lines]",
      "18:   \"v0.20.1\",",
      "21:   \"v0.21.2\",",
      "",
      "---------------"
    ],
    "production/grafanacloud-install.sh||production/grafanacloud-install.sh": [
      "File: production/grafanacloud-install.sh -> production/grafanacloud-install.sh",
      "--- Hunk 1 ---",
      "[Context before]",
      "50: #",
      "51: # Global constants.",
      "52: #",
      "55: RELEASE_URL=\"https://github.com/grafana/agent/releases/download/v${RELEASE_VERSION}\"",
      "56: DEB_URL=\"${RELEASE_URL}/grafana-agent-${RELEASE_VERSION}-1.${ARCH}.deb\"",
      "",
      "[Removed Lines]",
      "53: RELEASE_VERSION=\"0.21.1\"",
      "",
      "[Added Lines]",
      "53: RELEASE_VERSION=\"0.21.2\"",
      "",
      "---------------"
    ],
    "production/kubernetes/build/lib/version.libsonnet||production/kubernetes/build/lib/version.libsonnet": [
      "File: production/kubernetes/build/lib/version.libsonnet -> production/kubernetes/build/lib/version.libsonnet",
      "--- Hunk 1 ---",
      "[Context before]",
      "[No context available]",
      "",
      "[Removed Lines]",
      "1: 'grafana/agent:v0.21.1'",
      "",
      "[Added Lines]",
      "1: 'grafana/agent:v0.21.2'",
      "",
      "---------------"
    ],
    "production/kubernetes/install-bare.sh||production/kubernetes/install-bare.sh": [
      "File: production/kubernetes/install-bare.sh -> production/kubernetes/install-bare.sh",
      "--- Hunk 1 ---",
      "[Context before]",
      "25: check_installed curl",
      "26: check_installed envsubst",
      "29: MANIFEST_URL=${MANIFEST_URL:-https://raw.githubusercontent.com/grafana/agent/${MANIFEST_BRANCH}/production/kubernetes/agent-bare.yaml}",
      "30: NAMESPACE=${NAMESPACE:-default}",
      "",
      "[Removed Lines]",
      "28: MANIFEST_BRANCH=v0.21.1",
      "",
      "[Added Lines]",
      "28: MANIFEST_BRANCH=v0.21.2",
      "",
      "---------------"
    ],
    "production/tanka/grafana-agent/v1/main.libsonnet||production/tanka/grafana-agent/v1/main.libsonnet": [
      "File: production/tanka/grafana-agent/v1/main.libsonnet -> production/tanka/grafana-agent/v1/main.libsonnet",
      "--- Hunk 1 ---",
      "[Context before]",
      "15: (import './lib/traces.libsonnet') +",
      "16: {",
      "17:   _images:: {",
      "20:   },",
      "",
      "[Removed Lines]",
      "18:     agent: 'grafana/agent:v0.21.1',",
      "19:     agentctl: 'grafana/agentctl:v0.21.1',",
      "",
      "[Added Lines]",
      "18:     agent: 'grafana/agent:v0.21.2',",
      "19:     agentctl: 'grafana/agentctl:v0.21.2',",
      "",
      "---------------"
    ],
    "production/tanka/grafana-agent/v2/internal/base.libsonnet||production/tanka/grafana-agent/v2/internal/base.libsonnet": [
      "File: production/tanka/grafana-agent/v2/internal/base.libsonnet -> production/tanka/grafana-agent/v2/internal/base.libsonnet",
      "--- Hunk 1 ---",
      "[Context before]",
      "10:   local this = self,",
      "12:   _images:: {",
      "15:   },",
      "16:   _config:: {",
      "17:     name: name,",
      "",
      "[Removed Lines]",
      "13:     agent: 'grafana/agent:v0.21.1',",
      "14:     agentctl: 'grafana/agentctl:v0.21.1',",
      "",
      "[Added Lines]",
      "13:     agent: 'grafana/agent:v0.21.2',",
      "14:     agentctl: 'grafana/agentctl:v0.21.2',",
      "",
      "---------------"
    ],
    "production/tanka/grafana-agent/v2/internal/syncer.libsonnet||production/tanka/grafana-agent/v2/internal/syncer.libsonnet": [
      "File: production/tanka/grafana-agent/v2/internal/syncer.libsonnet -> production/tanka/grafana-agent/v2/internal/syncer.libsonnet",
      "--- Hunk 1 ---",
      "[Context before]",
      "14: ) {",
      "15:   local _config = {",
      "16:     api: error 'api must be set',",
      "18:     schedule: '*/5 * * * *',",
      "19:     configs: [],",
      "20:   } + config,",
      "",
      "[Removed Lines]",
      "17:     image: 'grafana/agentctl:v0.21.1',",
      "",
      "[Added Lines]",
      "17:     image: 'grafana/agentctl:v0.21.2',",
      "",
      "---------------"
    ]
  },
  "candidates": [
    {
      "candidate_hash": "0a3d59ce45ec2cb5d6cda0267c62e2e8099a37de",
      "candidate_info": {
        "commit_hash": "0a3d59ce45ec2cb5d6cda0267c62e2e8099a37de",
        "repo": "grafana/agent",
        "commit_url": "https://github.com/grafana/agent/commit/0a3d59ce45ec2cb5d6cda0267c62e2e8099a37de",
        "files": [
          "CHANGELOG.md",
          "docs/sources/configuration/integrations/node-exporter-config.md",
          "docs/sources/configuration/integrations/process-exporter-config.md",
          "docs/sources/operator/custom-resource-quickstart.md",
          "docs/sources/operator/getting-started.md",
          "docs/sources/set-up/install-agent-docker.md",
          "pkg/operator/defaults.go",
          "production/grafanacloud-install.sh",
          "production/kubernetes/agent-bare.yaml",
          "production/kubernetes/agent-loki.yaml",
          "production/kubernetes/agent-traces.yaml",
          "production/kubernetes/build/lib/version.libsonnet",
          "production/kubernetes/install-bare.sh",
          "production/operator/templates/agent-operator.yaml",
          "production/tanka/grafana-agent-operator/main.libsonnet",
          "production/tanka/grafana-agent/v1/main.libsonnet",
          "production/tanka/grafana-agent/v2/internal/base.libsonnet",
          "production/tanka/grafana-agent/v2/internal/syncer.libsonnet"
        ],
        "message": "Update changelog and refs to 0.26.1 (#1950)",
        "before_after_code_files": [
          "pkg/operator/defaults.go||pkg/operator/defaults.go",
          "production/grafanacloud-install.sh||production/grafanacloud-install.sh",
          "production/kubernetes/build/lib/version.libsonnet||production/kubernetes/build/lib/version.libsonnet",
          "production/kubernetes/install-bare.sh||production/kubernetes/install-bare.sh",
          "production/tanka/grafana-agent-operator/main.libsonnet||production/tanka/grafana-agent-operator/main.libsonnet",
          "production/tanka/grafana-agent/v1/main.libsonnet||production/tanka/grafana-agent/v1/main.libsonnet",
          "production/tanka/grafana-agent/v2/internal/base.libsonnet||production/tanka/grafana-agent/v2/internal/base.libsonnet",
          "production/tanka/grafana-agent/v2/internal/syncer.libsonnet||production/tanka/grafana-agent/v2/internal/syncer.libsonnet"
        ]
      },
      "candidate_patch_features": {
        "candidate_earlier_than_patch": 0,
        "same_branch_evolution": 1,
        "olp_code_files": {
          "patch": [
            "pkg/operator/defaults.go||pkg/operator/defaults.go",
            "production/grafanacloud-install.sh||production/grafanacloud-install.sh",
            "production/kubernetes/build/lib/version.libsonnet||production/kubernetes/build/lib/version.libsonnet",
            "production/kubernetes/install-bare.sh||production/kubernetes/install-bare.sh",
            "production/tanka/grafana-agent/v1/main.libsonnet||production/tanka/grafana-agent/v1/main.libsonnet",
            "production/tanka/grafana-agent/v2/internal/base.libsonnet||production/tanka/grafana-agent/v2/internal/base.libsonnet",
            "production/tanka/grafana-agent/v2/internal/syncer.libsonnet||production/tanka/grafana-agent/v2/internal/syncer.libsonnet"
          ],
          "candidate": [
            "pkg/operator/defaults.go||pkg/operator/defaults.go",
            "production/grafanacloud-install.sh||production/grafanacloud-install.sh",
            "production/kubernetes/build/lib/version.libsonnet||production/kubernetes/build/lib/version.libsonnet",
            "production/kubernetes/install-bare.sh||production/kubernetes/install-bare.sh",
            "production/tanka/grafana-agent/v1/main.libsonnet||production/tanka/grafana-agent/v1/main.libsonnet",
            "production/tanka/grafana-agent/v2/internal/base.libsonnet||production/tanka/grafana-agent/v2/internal/base.libsonnet",
            "production/tanka/grafana-agent/v2/internal/syncer.libsonnet||production/tanka/grafana-agent/v2/internal/syncer.libsonnet"
          ]
        }
      },
      "candidate_diff": {
        "pkg/operator/defaults.go||pkg/operator/defaults.go": [
          "File: pkg/operator/defaults.go -> pkg/operator/defaults.go",
          "--- Hunk 1 ---",
          "[Context before]",
          "27:   \"v0.25.0\",",
          "28:   \"v0.25.1\",",
          "29:   \"v0.26.0\",",
          "32:  }",
          "",
          "[Removed Lines]",
          "[None]",
          "",
          "[Added Lines]",
          "30:   \"v0.26.1\",",
          "",
          "---------------"
        ],
        "production/grafanacloud-install.sh||production/grafanacloud-install.sh": [
          "File: production/grafanacloud-install.sh -> production/grafanacloud-install.sh",
          "--- Hunk 1 ---",
          "[Context before]",
          "50: #",
          "51: # Global constants.",
          "52: #",
          "55: RELEASE_URL=\"https://github.com/grafana/agent/releases/download/v${RELEASE_VERSION}\"",
          "56: DEB_URL=\"${RELEASE_URL}/grafana-agent-${RELEASE_VERSION}-1.${ARCH}.deb\"",
          "",
          "[Removed Lines]",
          "53: RELEASE_VERSION=\"0.26.0\"",
          "",
          "[Added Lines]",
          "53: RELEASE_VERSION=\"0.26.1\"",
          "",
          "---------------"
        ],
        "production/kubernetes/build/lib/version.libsonnet||production/kubernetes/build/lib/version.libsonnet": [
          "File: production/kubernetes/build/lib/version.libsonnet -> production/kubernetes/build/lib/version.libsonnet",
          "--- Hunk 1 ---",
          "[Context before]",
          "[No context available]",
          "",
          "[Removed Lines]",
          "1: 'grafana/agent:v0.26.0'",
          "",
          "[Added Lines]",
          "1: 'grafana/agent:v0.26.1'",
          "",
          "---------------"
        ],
        "production/kubernetes/install-bare.sh||production/kubernetes/install-bare.sh": [
          "File: production/kubernetes/install-bare.sh -> production/kubernetes/install-bare.sh",
          "--- Hunk 1 ---",
          "[Context before]",
          "25: check_installed curl",
          "26: check_installed envsubst",
          "29: MANIFEST_URL=${MANIFEST_URL:-https://raw.githubusercontent.com/grafana/agent/${MANIFEST_BRANCH}/production/kubernetes/agent-bare.yaml}",
          "30: NAMESPACE=${NAMESPACE:-default}",
          "",
          "[Removed Lines]",
          "28: MANIFEST_BRANCH=v0.26.0",
          "",
          "[Added Lines]",
          "28: MANIFEST_BRANCH=v0.26.1",
          "",
          "---------------"
        ],
        "production/tanka/grafana-agent-operator/main.libsonnet||production/tanka/grafana-agent-operator/main.libsonnet": [
          "File: production/tanka/grafana-agent-operator/main.libsonnet -> production/tanka/grafana-agent-operator/main.libsonnet",
          "--- Hunk 1 ---",
          "[Context before]",
          "10:     local this = self,",
          "12:     _images:: {",
          "14:     },",
          "16:     _config:: {",
          "",
          "[Removed Lines]",
          "13:       agent_operator: 'grafana/agent-operator:v0.26.0-rc.0',",
          "",
          "[Added Lines]",
          "13:       agent_operator: 'grafana/agent-operator:v0.26.1',",
          "",
          "---------------"
        ],
        "production/tanka/grafana-agent/v1/main.libsonnet||production/tanka/grafana-agent/v1/main.libsonnet": [
          "File: production/tanka/grafana-agent/v1/main.libsonnet -> production/tanka/grafana-agent/v1/main.libsonnet",
          "--- Hunk 1 ---",
          "[Context before]",
          "15: (import './lib/traces.libsonnet') +",
          "16: {",
          "17:   _images:: {",
          "20:   },",
          "",
          "[Removed Lines]",
          "18:     agent: 'grafana/agent:v0.26.0',",
          "19:     agentctl: 'grafana/agentctl:v0.26.0',",
          "",
          "[Added Lines]",
          "18:     agent: 'grafana/agent:v0.26.1',",
          "19:     agentctl: 'grafana/agentctl:v0.26.1',",
          "",
          "---------------"
        ],
        "production/tanka/grafana-agent/v2/internal/base.libsonnet||production/tanka/grafana-agent/v2/internal/base.libsonnet": [
          "File: production/tanka/grafana-agent/v2/internal/base.libsonnet -> production/tanka/grafana-agent/v2/internal/base.libsonnet",
          "--- Hunk 1 ---",
          "[Context before]",
          "11:   local this = self,",
          "13:   _images:: {",
          "16:   },",
          "17:   _config:: {",
          "18:     name: name,",
          "",
          "[Removed Lines]",
          "14:     agent: 'grafana/agent:v0.26.0',",
          "15:     agentctl: 'grafana/agentctl:v0.26.0',",
          "",
          "[Added Lines]",
          "14:     agent: 'grafana/agent:v0.26.1',",
          "15:     agentctl: 'grafana/agentctl:v0.26.1',",
          "",
          "---------------"
        ],
        "production/tanka/grafana-agent/v2/internal/syncer.libsonnet||production/tanka/grafana-agent/v2/internal/syncer.libsonnet": [
          "File: production/tanka/grafana-agent/v2/internal/syncer.libsonnet -> production/tanka/grafana-agent/v2/internal/syncer.libsonnet",
          "--- Hunk 1 ---",
          "[Context before]",
          "14: ) {",
          "15:   local _config = {",
          "16:     api: error 'api must be set',",
          "18:     schedule: '*/5 * * * *',",
          "19:     configs: [],",
          "20:   } + config,",
          "",
          "[Removed Lines]",
          "17:     image: 'grafana/agentctl:v0.26.0',",
          "",
          "[Added Lines]",
          "17:     image: 'grafana/agentctl:v0.26.1',",
          "",
          "---------------"
        ]
      }
    },
    {
      "candidate_hash": "6240e642d6dd9c99205e765142ead9bcfafb4f1d",
      "candidate_info": {
        "commit_hash": "6240e642d6dd9c99205e765142ead9bcfafb4f1d",
        "repo": "grafana/agent",
        "commit_url": "https://github.com/grafana/agent/commit/6240e642d6dd9c99205e765142ead9bcfafb4f1d",
        "files": [
          ".drone/drone.yml",
          "CHANGELOG.md",
          "docs/configuration/integrations/node-exporter-config.md",
          "docs/configuration/integrations/process-exporter-config.md",
          "docs/getting-started/_index.md",
          "docs/operator/custom-resource-quickstart.md",
          "docs/operator/getting-started.md",
          "docs/upgrade-guide/_index.md",
          "pkg/operator/defaults.go",
          "production/README.md",
          "production/grafanacloud-install.sh",
          "production/kubernetes/agent-bare.yaml",
          "production/kubernetes/agent-loki.yaml",
          "production/kubernetes/agent-traces.yaml",
          "production/kubernetes/build/lib/version.libsonnet",
          "production/kubernetes/install-bare.sh",
          "production/tanka/grafana-agent/v1/main.libsonnet",
          "production/tanka/grafana-agent/v2/internal/base.libsonnet",
          "production/tanka/grafana-agent/v2/internal/syncer.libsonnet"
        ],
        "message": "prepare for v0.22.0 release (#1266)\n\n* prepare for v0.22.0 release\n\n* remove E2E pipeline",
        "before_after_code_files": [
          "pkg/operator/defaults.go||pkg/operator/defaults.go",
          "production/grafanacloud-install.sh||production/grafanacloud-install.sh",
          "production/kubernetes/build/lib/version.libsonnet||production/kubernetes/build/lib/version.libsonnet",
          "production/kubernetes/install-bare.sh||production/kubernetes/install-bare.sh",
          "production/tanka/grafana-agent/v1/main.libsonnet||production/tanka/grafana-agent/v1/main.libsonnet",
          "production/tanka/grafana-agent/v2/internal/base.libsonnet||production/tanka/grafana-agent/v2/internal/base.libsonnet",
          "production/tanka/grafana-agent/v2/internal/syncer.libsonnet||production/tanka/grafana-agent/v2/internal/syncer.libsonnet"
        ]
      },
      "candidate_patch_features": {
        "candidate_earlier_than_patch": 0,
        "same_branch_evolution": 1,
        "olp_code_files": {
          "patch": [
            "pkg/operator/defaults.go||pkg/operator/defaults.go",
            "production/grafanacloud-install.sh||production/grafanacloud-install.sh",
            "production/kubernetes/build/lib/version.libsonnet||production/kubernetes/build/lib/version.libsonnet",
            "production/kubernetes/install-bare.sh||production/kubernetes/install-bare.sh",
            "production/tanka/grafana-agent/v1/main.libsonnet||production/tanka/grafana-agent/v1/main.libsonnet",
            "production/tanka/grafana-agent/v2/internal/base.libsonnet||production/tanka/grafana-agent/v2/internal/base.libsonnet",
            "production/tanka/grafana-agent/v2/internal/syncer.libsonnet||production/tanka/grafana-agent/v2/internal/syncer.libsonnet"
          ],
          "candidate": [
            "pkg/operator/defaults.go||pkg/operator/defaults.go",
            "production/grafanacloud-install.sh||production/grafanacloud-install.sh",
            "production/kubernetes/build/lib/version.libsonnet||production/kubernetes/build/lib/version.libsonnet",
            "production/kubernetes/install-bare.sh||production/kubernetes/install-bare.sh",
            "production/tanka/grafana-agent/v1/main.libsonnet||production/tanka/grafana-agent/v1/main.libsonnet",
            "production/tanka/grafana-agent/v2/internal/base.libsonnet||production/tanka/grafana-agent/v2/internal/base.libsonnet",
            "production/tanka/grafana-agent/v2/internal/syncer.libsonnet||production/tanka/grafana-agent/v2/internal/syncer.libsonnet"
          ]
        }
      },
      "candidate_diff": {
        "pkg/operator/defaults.go||pkg/operator/defaults.go": [
          "File: pkg/operator/defaults.go -> pkg/operator/defaults.go",
          "--- Hunk 1 ---",
          "[Context before]",
          "19:   \"v0.21.0\",",
          "20:   \"v0.21.1\",",
          "21:   \"v0.21.2\",",
          "24:  }",
          "",
          "[Removed Lines]",
          "[None]",
          "",
          "[Added Lines]",
          "22:   \"v0.22.0\",",
          "",
          "---------------"
        ],
        "production/grafanacloud-install.sh||production/grafanacloud-install.sh": [
          "File: production/grafanacloud-install.sh -> production/grafanacloud-install.sh",
          "--- Hunk 1 ---",
          "[Context before]",
          "50: #",
          "51: # Global constants.",
          "52: #",
          "55: RELEASE_URL=\"https://github.com/grafana/agent/releases/download/v${RELEASE_VERSION}\"",
          "56: DEB_URL=\"${RELEASE_URL}/grafana-agent-${RELEASE_VERSION}-1.${ARCH}.deb\"",
          "",
          "[Removed Lines]",
          "53: RELEASE_VERSION=\"0.21.2\"",
          "",
          "[Added Lines]",
          "53: RELEASE_VERSION=\"0.22.0\"",
          "",
          "---------------"
        ],
        "production/kubernetes/build/lib/version.libsonnet||production/kubernetes/build/lib/version.libsonnet": [
          "File: production/kubernetes/build/lib/version.libsonnet -> production/kubernetes/build/lib/version.libsonnet",
          "--- Hunk 1 ---",
          "[Context before]",
          "[No context available]",
          "",
          "[Removed Lines]",
          "1: 'grafana/agent:v0.21.2'",
          "",
          "[Added Lines]",
          "1: 'grafana/agent:v0.22.0'",
          "",
          "---------------"
        ],
        "production/kubernetes/install-bare.sh||production/kubernetes/install-bare.sh": [
          "File: production/kubernetes/install-bare.sh -> production/kubernetes/install-bare.sh",
          "--- Hunk 1 ---",
          "[Context before]",
          "25: check_installed curl",
          "26: check_installed envsubst",
          "29: MANIFEST_URL=${MANIFEST_URL:-https://raw.githubusercontent.com/grafana/agent/${MANIFEST_BRANCH}/production/kubernetes/agent-bare.yaml}",
          "30: NAMESPACE=${NAMESPACE:-default}",
          "",
          "[Removed Lines]",
          "28: MANIFEST_BRANCH=v0.21.2",
          "",
          "[Added Lines]",
          "28: MANIFEST_BRANCH=v0.22.0",
          "",
          "---------------"
        ],
        "production/tanka/grafana-agent/v1/main.libsonnet||production/tanka/grafana-agent/v1/main.libsonnet": [
          "File: production/tanka/grafana-agent/v1/main.libsonnet -> production/tanka/grafana-agent/v1/main.libsonnet",
          "--- Hunk 1 ---",
          "[Context before]",
          "15: (import './lib/traces.libsonnet') +",
          "16: {",
          "17:   _images:: {",
          "20:   },",
          "",
          "[Removed Lines]",
          "18:     agent: 'grafana/agent:v0.21.2',",
          "19:     agentctl: 'grafana/agentctl:v0.21.2',",
          "",
          "[Added Lines]",
          "18:     agent: 'grafana/agent:v0.22.0',",
          "19:     agentctl: 'grafana/agentctl:v0.22.0',",
          "",
          "---------------"
        ],
        "production/tanka/grafana-agent/v2/internal/base.libsonnet||production/tanka/grafana-agent/v2/internal/base.libsonnet": [
          "File: production/tanka/grafana-agent/v2/internal/base.libsonnet -> production/tanka/grafana-agent/v2/internal/base.libsonnet",
          "--- Hunk 1 ---",
          "[Context before]",
          "10:   local this = self,",
          "12:   _images:: {",
          "15:   },",
          "16:   _config:: {",
          "17:     name: name,",
          "",
          "[Removed Lines]",
          "13:     agent: 'grafana/agent:v0.21.2',",
          "14:     agentctl: 'grafana/agentctl:v0.21.2',",
          "",
          "[Added Lines]",
          "13:     agent: 'grafana/agent:v0.22.0',",
          "14:     agentctl: 'grafana/agentctl:v0.22.0',",
          "",
          "---------------"
        ],
        "production/tanka/grafana-agent/v2/internal/syncer.libsonnet||production/tanka/grafana-agent/v2/internal/syncer.libsonnet": [
          "File: production/tanka/grafana-agent/v2/internal/syncer.libsonnet -> production/tanka/grafana-agent/v2/internal/syncer.libsonnet",
          "--- Hunk 1 ---",
          "[Context before]",
          "14: ) {",
          "15:   local _config = {",
          "16:     api: error 'api must be set',",
          "18:     schedule: '*/5 * * * *',",
          "19:     configs: [],",
          "20:   } + config,",
          "",
          "[Removed Lines]",
          "17:     image: 'grafana/agentctl:v0.21.2',",
          "",
          "[Added Lines]",
          "17:     image: 'grafana/agentctl:v0.22.0',",
          "",
          "---------------"
        ]
      }
    },
    {
      "candidate_hash": "35015aa4e1d5e51598c74bf654a965c841d2c266",
      "candidate_info": {
        "commit_hash": "35015aa4e1d5e51598c74bf654a965c841d2c266",
        "repo": "grafana/agent",
        "commit_url": "https://github.com/grafana/agent/commit/35015aa4e1d5e51598c74bf654a965c841d2c266",
        "files": [
          "CHANGELOG.md",
          "cmd/agentctl/main.go",
          "docs/user/configuration/integrations/node-exporter-config.md",
          "docs/user/configuration/integrations/process-exporter-config.md",
          "docs/user/getting-started/_index.md",
          "docs/user/operator/custom-resource-quickstart.md",
          "docs/user/operator/getting-started.md",
          "go.mod",
          "pkg/config/config.go",
          "pkg/logs/logs.go",
          "pkg/metrics/cluster/configapi/types.go",
          "pkg/operator/config/config_test.go",
          "pkg/operator/config/metrics_templates_test.go",
          "pkg/operator/config/templates/component/metrics/remote_write.libsonnet",
          "pkg/operator/defaults.go",
          "pkg/server/config.go",
          "pkg/server/logger_test.go",
          "production/README.md",
          "production/grafanacloud-install.sh",
          "production/kubernetes/agent-bare.yaml",
          "production/kubernetes/agent-loki.yaml",
          "production/kubernetes/agent-traces.yaml",
          "production/kubernetes/build/lib/version.libsonnet",
          "production/kubernetes/install-bare.sh",
          "production/tanka/grafana-agent/v1/main.libsonnet",
          "production/tanka/grafana-agent/v2/internal/base.libsonnet",
          "production/tanka/grafana-agent/v2/internal/syncer.libsonnet"
        ],
        "message": "Prepare for 0.24.1 (#1615)\n\n* Set up the default logger parameters (#1611)\n\n* Set up the default logger parameters\n\nSigned-off-by: Paschalis Tsilias <paschalis.tsilias@grafana.com>\n\n* Set up the default logger parameters vol.2\n\nSigned-off-by: Paschalis Tsilias <paschalis.tsilias@grafana.com>\n(cherry picked from commit 3b8d8b9f3a5b1e3a7081559cf0b136b031044e69)\n\n* pkg/operator/config: don't set non-existent username_file field (#1612)\n\nPR #1441 introduced a change to use password_file for basic auth, but\naccidentally also generated a username_file field which doesn't exist.\n\n(cherry picked from commit 378ffeda5f9107b8acc0e24b21bd2787bc9d6d78)\n\n* Bump GitHub exporter version (#1589)\n\n* bump version of github-exporter\n\nThis bumps the version of github-exporter to the latest upstream commit,\nfixing numerous bugs since the latest development release.\n\nCloses #1588.\n\n* add changelog entry\n\nAlso add a retroactive changelog entry for #1584\n\n(cherry picked from commit 61e8f376416324538b943d5148fb3346183d6f5e)\n\n* udpate import order in agentctl main.go (#1584)\n\n(cherry picked from commit 78aa6238ab8a17fd9ab661625a0ecd36076077cc)\n\n* Embed time zone data for logs package (#1594)\n\n(cherry picked from commit 2c53aff50ded51277078f3b13377baf8a875f8e1)\n\n* changelog: add changelog entry for agentctl version info bugfix\n\n* Set `Content-Type` as `application/json` to JSON endpoints (#1596)\n\n* Set json content-type to JSON endpoints\n\n* Update CHANGELOG\n\n(cherry picked from commit cff7cb44c0d204fa1de3f7fe540041c60361ce37)\n\n* prepare for 0.24.1 release\n\nCo-authored-by: Paschalis Tsilias <tpaschalis@users.noreply.github.com>\nCo-authored-by: Robert Lankford <robert.lankford@grafana.com>\nCo-authored-by: Marc Tudur\u00ed <marctc@protonmail.com>",
        "before_after_code_files": [
          "cmd/agentctl/main.go||cmd/agentctl/main.go",
          "go.mod||go.mod",
          "pkg/config/config.go||pkg/config/config.go",
          "pkg/logs/logs.go||pkg/logs/logs.go",
          "pkg/metrics/cluster/configapi/types.go||pkg/metrics/cluster/configapi/types.go",
          "pkg/operator/config/config_test.go||pkg/operator/config/config_test.go",
          "pkg/operator/config/metrics_templates_test.go||pkg/operator/config/metrics_templates_test.go",
          "pkg/operator/config/templates/component/metrics/remote_write.libsonnet||pkg/operator/config/templates/component/metrics/remote_write.libsonnet",
          "pkg/operator/defaults.go||pkg/operator/defaults.go",
          "pkg/server/config.go||pkg/server/config.go",
          "pkg/server/logger_test.go||pkg/server/logger_test.go",
          "production/grafanacloud-install.sh||production/grafanacloud-install.sh",
          "production/kubernetes/build/lib/version.libsonnet||production/kubernetes/build/lib/version.libsonnet",
          "production/kubernetes/install-bare.sh||production/kubernetes/install-bare.sh",
          "production/tanka/grafana-agent/v1/main.libsonnet||production/tanka/grafana-agent/v1/main.libsonnet",
          "production/tanka/grafana-agent/v2/internal/base.libsonnet||production/tanka/grafana-agent/v2/internal/base.libsonnet",
          "production/tanka/grafana-agent/v2/internal/syncer.libsonnet||production/tanka/grafana-agent/v2/internal/syncer.libsonnet"
        ]
      },
      "candidate_patch_features": {
        "candidate_earlier_than_patch": 0,
        "same_branch_evolution": 1,
        "olp_code_files": {
          "patch": [
            "pkg/operator/defaults.go||pkg/operator/defaults.go",
            "production/grafanacloud-install.sh||production/grafanacloud-install.sh",
            "production/kubernetes/build/lib/version.libsonnet||production/kubernetes/build/lib/version.libsonnet",
            "production/kubernetes/install-bare.sh||production/kubernetes/install-bare.sh",
            "production/tanka/grafana-agent/v1/main.libsonnet||production/tanka/grafana-agent/v1/main.libsonnet",
            "production/tanka/grafana-agent/v2/internal/base.libsonnet||production/tanka/grafana-agent/v2/internal/base.libsonnet",
            "production/tanka/grafana-agent/v2/internal/syncer.libsonnet||production/tanka/grafana-agent/v2/internal/syncer.libsonnet"
          ],
          "candidate": [
            "pkg/operator/defaults.go||pkg/operator/defaults.go",
            "production/grafanacloud-install.sh||production/grafanacloud-install.sh",
            "production/kubernetes/build/lib/version.libsonnet||production/kubernetes/build/lib/version.libsonnet",
            "production/kubernetes/install-bare.sh||production/kubernetes/install-bare.sh",
            "production/tanka/grafana-agent/v1/main.libsonnet||production/tanka/grafana-agent/v1/main.libsonnet",
            "production/tanka/grafana-agent/v2/internal/base.libsonnet||production/tanka/grafana-agent/v2/internal/base.libsonnet",
            "production/tanka/grafana-agent/v2/internal/syncer.libsonnet||production/tanka/grafana-agent/v2/internal/syncer.libsonnet"
          ]
        }
      },
      "candidate_diff": {
        "cmd/agentctl/main.go||cmd/agentctl/main.go": [
          "File: cmd/agentctl/main.go -> cmd/agentctl/main.go",
          "--- Hunk 1 ---",
          "[Context before]",
          "14:  \"gopkg.in/yaml.v2\"",
          "18:  \"github.com/grafana/agent/pkg/client/grafanacloud\"",
          "19:  \"github.com/grafana/agent/pkg/config\"",
          "20:  \"github.com/olekukonko/tablewriter\"",
          "",
          "[Removed Lines]",
          "17:  _ \"github.com/grafana/agent/pkg/build\"",
          "",
          "[Added Lines]",
          "[None]",
          "",
          "---------------",
          "--- Hunk 2 ---",
          "[Context before]",
          "45:  kclient \"sigs.k8s.io/controller-runtime/pkg/client\"",
          "46:  \"sigs.k8s.io/controller-runtime/pkg/client/apiutil\"",
          "47:  kconfig \"sigs.k8s.io/controller-runtime/pkg/client/config\"",
          "48: )",
          "50: func main() {",
          "",
          "[Removed Lines]",
          "[None]",
          "",
          "[Added Lines]",
          "48:  _ \"github.com/grafana/agent/pkg/build\"",
          "",
          "---------------"
        ],
        "go.mod||go.mod": [
          "File: go.mod -> go.mod",
          "--- Hunk 1 ---",
          "[Context before]",
          "30:  github.com/hashicorp/consul/api v1.12.0",
          "31:  github.com/hashicorp/go-cleanhttp v0.5.2",
          "32:  github.com/hashicorp/go-multierror v1.1.1",
          "34:  github.com/johannesboyne/gofakes3 v0.0.0-20210819161434-5c8dfcfe5310",
          "35:  github.com/jsternberg/zap-logfmt v1.2.0",
          "36:  github.com/lib/pq v1.10.2",
          "",
          "[Removed Lines]",
          "33:  github.com/infinityworks/github-exporter v0.0.0-20201016091012-831b72461034",
          "",
          "[Added Lines]",
          "33:  github.com/infinityworks/github-exporter v0.0.0-20210802160115-284088c21e7d",
          "",
          "---------------"
        ],
        "pkg/config/config.go||pkg/config/config.go": [
          "File: pkg/config/config.go -> pkg/config/config.go",
          "--- Hunk 1 ---",
          "[Context before]",
          "50: var DefaultConfig = Config{",
          "52:  Metrics:               metrics.DefaultConfig,",
          "53:  Integrations:          DefaultVersionedIntegrations,",
          "54:  EnableConfigEndpoints: false,",
          "",
          "[Removed Lines]",
          "[None]",
          "",
          "[Added Lines]",
          "52:  Server:                server.DefaultConfig,",
          "",
          "---------------"
        ],
        "pkg/logs/logs.go||pkg/logs/logs.go": [
          "File: pkg/logs/logs.go -> pkg/logs/logs.go",
          "--- Hunk 1 ---",
          "[Context before]",
          "7:  \"path/filepath\"",
          "8:  \"sync\"",
          "9:  \"time\"",
          "11:  \"github.com/go-kit/log\"",
          "12:  \"github.com/go-kit/log/level\"",
          "",
          "[Removed Lines]",
          "[None]",
          "",
          "[Added Lines]",
          "10:  _ \"time/tzdata\" // embed timezone data",
          "",
          "---------------"
        ],
        "pkg/metrics/cluster/configapi/types.go||pkg/metrics/cluster/configapi/types.go": [
          "File: pkg/metrics/cluster/configapi/types.go -> pkg/metrics/cluster/configapi/types.go",
          "--- Hunk 1 ---",
          "[Context before]",
          "62: func WriteResponse(w http.ResponseWriter, statusCode int, resp interface{}) error {",
          "63:  apiResp := &APIResponse{Status: \"success\", Data: resp}",
          "64:  return apiResp.WriteTo(w, statusCode)",
          "65: }",
          "68: func WriteError(w http.ResponseWriter, statusCode int, err error) error {",
          "69:  resp := &APIResponse{Status: \"error\", Data: &ErrorResponse{Error: err.Error()}}",
          "70:  return resp.WriteTo(w, statusCode)",
          "71: }",
          "",
          "[Removed Lines]",
          "[None]",
          "",
          "[Added Lines]",
          "64:  w.Header().Set(\"Content-Type\", \"application/json\")",
          "71:  w.Header().Set(\"Content-Type\", \"application/json\")",
          "",
          "---------------"
        ],
        "pkg/operator/config/config_test.go||pkg/operator/config/config_test.go": [
          "File: pkg/operator/config/config_test.go -> pkg/operator/config/config_test.go",
          "--- Hunk 1 ---",
          "[Context before]",
          "78:         basicAuth:",
          "79:          username:",
          "80:           name: example-secret",
          "82:          password:",
          "83:           name: example-secret",
          "84:           key: pword",
          "",
          "[Removed Lines]",
          "81:           key: uname",
          "",
          "[Added Lines]",
          "81:           key: key",
          "",
          "---------------",
          "--- Hunk 2 ---",
          "[Context before]",
          "111:        remote_write:",
          "112:        - url: http://localhost:9090/api/v1/write",
          "113:         basic_auth:",
          "115:          password_file: /var/lib/grafana-agent/secrets/_secrets_default_example_secret_pword",
          "116:         tls_config:",
          "117:          ca_file: /var/lib/grafana-agent/secrets/_configMaps_default_example_cm_key",
          "",
          "[Removed Lines]",
          "114:          username_file: /var/lib/grafana-agent/secrets/_secrets_default_example_secret_uname",
          "",
          "[Added Lines]",
          "114:          username: somesecret",
          "",
          "---------------"
        ],
        "pkg/operator/config/metrics_templates_test.go||pkg/operator/config/metrics_templates_test.go": [
          "File: pkg/operator/config/metrics_templates_test.go -> pkg/operator/config/metrics_templates_test.go",
          "--- Hunk 1 ---",
          "[Context before]",
          "547:    expect: util.Untab(`",
          "548:     url: http://cortex/api/prom/push",
          "549:     basic_auth:",
          "551:      password_file: /var/lib/grafana-agent/secrets/_secrets_operator_obj_key",
          "552:    `),",
          "553:   },",
          "",
          "[Removed Lines]",
          "550:      username_file: /var/lib/grafana-agent/secrets/_secrets_operator_obj_key",
          "",
          "[Added Lines]",
          "550:      username: secretkey",
          "",
          "---------------"
        ],
        "pkg/operator/config/templates/component/metrics/remote_write.libsonnet||pkg/operator/config/templates/component/metrics/remote_write.libsonnet": [
          "File: pkg/operator/config/templates/component/metrics/remote_write.libsonnet -> pkg/operator/config/templates/component/metrics/remote_write.libsonnet",
          "--- Hunk 1 ---",
          "[Context before]",
          "31:   basic_auth: (",
          "32:     if rw.BasicAuth != null then {",
          "34:       password_file: secrets.pathForSecret(namespace, rw.BasicAuth.Password),",
          "35:     }",
          "36:   ),",
          "",
          "[Removed Lines]",
          "33:       username_file: secrets.pathForSecret(namespace, rw.BasicAuth.Username),",
          "",
          "[Added Lines]",
          "33:       username: secrets.valueForSecret(namespace, rw.BasicAuth.Username),",
          "",
          "---------------"
        ],
        "pkg/operator/defaults.go||pkg/operator/defaults.go": [
          "File: pkg/operator/defaults.go -> pkg/operator/defaults.go",
          "--- Hunk 1 ---",
          "[Context before]",
          "22:   \"v0.22.0\",",
          "23:   \"v0.23.0\",",
          "24:   \"v0.24.0\",",
          "27:  }",
          "",
          "[Removed Lines]",
          "[None]",
          "",
          "[Added Lines]",
          "25:   \"v0.24.1\",",
          "",
          "---------------"
        ],
        "pkg/server/config.go||pkg/server/config.go": [
          "File: pkg/server/config.go -> pkg/server/config.go",
          "--- Hunk 1 ---",
          "[Context before]",
          "44: var (",
          "45:  DefaultConfig = Config{",
          "49:  }",
          "51:  DefaultHTTPConfig = HTTPConfig{",
          "",
          "[Removed Lines]",
          "46:   GRPC:  DefaultGRPCConfig,",
          "47:   HTTP:  DefaultHTTPConfig,",
          "48:   Flags: DefaultFlags,",
          "",
          "[Added Lines]",
          "46:   GRPC:      DefaultGRPCConfig,",
          "47:   HTTP:      DefaultHTTPConfig,",
          "48:   Flags:     DefaultFlags,",
          "49:   LogLevel:  DefaultLogLevel,",
          "50:   LogFormat: DefaultLogFormat,",
          "",
          "---------------",
          "--- Hunk 2 ---",
          "[Context before]",
          "55:  DefaultGRPCConfig = GRPCConfig{",
          "57:  }",
          "58: )",
          "",
          "[Removed Lines]",
          "[None]",
          "",
          "[Added Lines]",
          "61:  emptyFlagSet    = flag.NewFlagSet(\"\", flag.ExitOnError)",
          "62:  DefaultLogLevel = func() logging.Level {",
          "63:   var lvl logging.Level",
          "64:   lvl.RegisterFlags(emptyFlagSet)",
          "65:   return lvl",
          "66:  }()",
          "67:  DefaultLogFormat = func() logging.Format {",
          "68:   var fmt logging.Format",
          "69:   fmt.RegisterFlags(emptyFlagSet)",
          "70:   return fmt",
          "71:  }()",
          "",
          "---------------"
        ],
        "pkg/server/logger_test.go||pkg/server/logger_test.go": [
          "File: pkg/server/logger_test.go -> pkg/server/logger_test.go",
          "--- Hunk 1 ---",
          "[Context before]",
          "10:  \"gopkg.in/yaml.v2\"",
          "11: )",
          "13: func TestLogger_ApplyConfig(t *testing.T) {",
          "14:  var buf bytes.Buffer",
          "15:  makeLogger := func(cfg *Config) (log.Logger, error) {",
          "",
          "[Removed Lines]",
          "[None]",
          "",
          "[Added Lines]",
          "13: func TestLogger_DefaultParameters(t *testing.T) {",
          "14:  makeLogger := func(cfg *Config) (log.Logger, error) {",
          "15:   var l log.Logger",
          "16:   require.Equal(t, \"info\", cfg.LogLevel.String())",
          "17:   require.Equal(t, \"logfmt\", cfg.LogFormat.String())",
          "18:   return l, nil",
          "19:  }",
          "20:  newLogger(&DefaultConfig, makeLogger).makeLogger(&DefaultConfig)",
          "21: }",
          "",
          "---------------"
        ],
        "production/grafanacloud-install.sh||production/grafanacloud-install.sh": [
          "File: production/grafanacloud-install.sh -> production/grafanacloud-install.sh",
          "--- Hunk 1 ---",
          "[Context before]",
          "50: #",
          "51: # Global constants.",
          "52: #",
          "55: RELEASE_URL=\"https://github.com/grafana/agent/releases/download/v${RELEASE_VERSION}\"",
          "56: DEB_URL=\"${RELEASE_URL}/grafana-agent-${RELEASE_VERSION}-1.${ARCH}.deb\"",
          "",
          "[Removed Lines]",
          "53: RELEASE_VERSION=\"0.24.0\"",
          "",
          "[Added Lines]",
          "53: RELEASE_VERSION=\"0.24.1\"",
          "",
          "---------------"
        ],
        "production/kubernetes/build/lib/version.libsonnet||production/kubernetes/build/lib/version.libsonnet": [
          "File: production/kubernetes/build/lib/version.libsonnet -> production/kubernetes/build/lib/version.libsonnet",
          "--- Hunk 1 ---",
          "[Context before]",
          "[No context available]",
          "",
          "[Removed Lines]",
          "1: 'grafana/agent:v0.24.0'",
          "",
          "[Added Lines]",
          "1: 'grafana/agent:v0.24.1'",
          "",
          "---------------"
        ],
        "production/kubernetes/install-bare.sh||production/kubernetes/install-bare.sh": [
          "File: production/kubernetes/install-bare.sh -> production/kubernetes/install-bare.sh",
          "--- Hunk 1 ---",
          "[Context before]",
          "25: check_installed curl",
          "26: check_installed envsubst",
          "29: MANIFEST_URL=${MANIFEST_URL:-https://raw.githubusercontent.com/grafana/agent/${MANIFEST_BRANCH}/production/kubernetes/agent-bare.yaml}",
          "30: NAMESPACE=${NAMESPACE:-default}",
          "",
          "[Removed Lines]",
          "28: MANIFEST_BRANCH=v0.24.0",
          "",
          "[Added Lines]",
          "28: MANIFEST_BRANCH=v0.24.1",
          "",
          "---------------"
        ],
        "production/tanka/grafana-agent/v1/main.libsonnet||production/tanka/grafana-agent/v1/main.libsonnet": [
          "File: production/tanka/grafana-agent/v1/main.libsonnet -> production/tanka/grafana-agent/v1/main.libsonnet",
          "--- Hunk 1 ---",
          "[Context before]",
          "15: (import './lib/traces.libsonnet') +",
          "16: {",
          "17:   _images:: {",
          "20:   },",
          "",
          "[Removed Lines]",
          "18:     agent: 'grafana/agent:v0.24.0',",
          "19:     agentctl: 'grafana/agentctl:v0.24.0',",
          "",
          "[Added Lines]",
          "18:     agent: 'grafana/agent:v0.24.1',",
          "19:     agentctl: 'grafana/agentctl:v0.24.1',",
          "",
          "---------------"
        ],
        "production/tanka/grafana-agent/v2/internal/base.libsonnet||production/tanka/grafana-agent/v2/internal/base.libsonnet": [
          "File: production/tanka/grafana-agent/v2/internal/base.libsonnet -> production/tanka/grafana-agent/v2/internal/base.libsonnet",
          "--- Hunk 1 ---",
          "[Context before]",
          "11:   local this = self,",
          "13:   _images:: {",
          "16:   },",
          "17:   _config:: {",
          "18:     name: name,",
          "",
          "[Removed Lines]",
          "14:     agent: 'grafana/agent:v0.24.0',",
          "15:     agentctl: 'grafana/agentctl:v0.24.0',",
          "",
          "[Added Lines]",
          "14:     agent: 'grafana/agent:v0.24.1',",
          "15:     agentctl: 'grafana/agentctl:v0.24.1',",
          "",
          "---------------"
        ],
        "production/tanka/grafana-agent/v2/internal/syncer.libsonnet||production/tanka/grafana-agent/v2/internal/syncer.libsonnet": [
          "File: production/tanka/grafana-agent/v2/internal/syncer.libsonnet -> production/tanka/grafana-agent/v2/internal/syncer.libsonnet",
          "--- Hunk 1 ---",
          "[Context before]",
          "14: ) {",
          "15:   local _config = {",
          "16:     api: error 'api must be set',",
          "18:     schedule: '*/5 * * * *',",
          "19:     configs: [],",
          "20:   } + config,",
          "",
          "[Removed Lines]",
          "17:     image: 'grafana/agentctl:v0.24.0',",
          "",
          "[Added Lines]",
          "17:     image: 'grafana/agentctl:v0.24.1',",
          "",
          "---------------"
        ]
      }
    },
    {
      "candidate_hash": "b43fff98c345dde8612de35cf5a62876be9e40ec",
      "candidate_info": {
        "commit_hash": "b43fff98c345dde8612de35cf5a62876be9e40ec",
        "repo": "grafana/agent",
        "commit_url": "https://github.com/grafana/agent/commit/b43fff98c345dde8612de35cf5a62876be9e40ec",
        "files": [
          "CHANGELOG.md",
          "docs/sources/configuration/integrations/node-exporter-config.md",
          "docs/sources/configuration/integrations/process-exporter-config.md",
          "docs/sources/operator/api.md",
          "docs/sources/operator/custom-resource-quickstart.md",
          "docs/sources/operator/getting-started.md",
          "docs/sources/set-up/install-agent-docker.md",
          "example/docker-compose/grafana/dashboards/agent-operational.json",
          "pkg/operator/defaults.go",
          "production/grafanacloud-install.sh",
          "production/kubernetes/agent-bare.yaml",
          "production/kubernetes/agent-loki.yaml",
          "production/kubernetes/agent-traces.yaml",
          "production/kubernetes/build/lib/version.libsonnet",
          "production/kubernetes/build/templates/operator/main.jsonnet",
          "production/kubernetes/install-bare.sh",
          "production/operator/templates/agent-operator.yaml",
          "production/tanka/grafana-agent/v1/main.libsonnet",
          "production/tanka/grafana-agent/v2/internal/base.libsonnet",
          "production/tanka/grafana-agent/v2/internal/syncer.libsonnet"
        ],
        "message": "v0.29 rc.0 release prep (#2474)",
        "before_after_code_files": [
          "pkg/operator/defaults.go||pkg/operator/defaults.go",
          "production/grafanacloud-install.sh||production/grafanacloud-install.sh",
          "production/kubernetes/build/lib/version.libsonnet||production/kubernetes/build/lib/version.libsonnet",
          "production/kubernetes/build/templates/operator/main.jsonnet||production/kubernetes/build/templates/operator/main.jsonnet",
          "production/kubernetes/install-bare.sh||production/kubernetes/install-bare.sh",
          "production/tanka/grafana-agent/v1/main.libsonnet||production/tanka/grafana-agent/v1/main.libsonnet",
          "production/tanka/grafana-agent/v2/internal/base.libsonnet||production/tanka/grafana-agent/v2/internal/base.libsonnet",
          "production/tanka/grafana-agent/v2/internal/syncer.libsonnet||production/tanka/grafana-agent/v2/internal/syncer.libsonnet"
        ]
      },
      "candidate_patch_features": {
        "candidate_earlier_than_patch": 0,
        "same_branch_evolution": 1,
        "olp_code_files": {
          "patch": [
            "pkg/operator/defaults.go||pkg/operator/defaults.go",
            "production/grafanacloud-install.sh||production/grafanacloud-install.sh",
            "production/kubernetes/build/lib/version.libsonnet||production/kubernetes/build/lib/version.libsonnet",
            "production/kubernetes/install-bare.sh||production/kubernetes/install-bare.sh",
            "production/tanka/grafana-agent/v1/main.libsonnet||production/tanka/grafana-agent/v1/main.libsonnet",
            "production/tanka/grafana-agent/v2/internal/base.libsonnet||production/tanka/grafana-agent/v2/internal/base.libsonnet",
            "production/tanka/grafana-agent/v2/internal/syncer.libsonnet||production/tanka/grafana-agent/v2/internal/syncer.libsonnet"
          ],
          "candidate": [
            "pkg/operator/defaults.go||pkg/operator/defaults.go",
            "production/grafanacloud-install.sh||production/grafanacloud-install.sh",
            "production/kubernetes/build/lib/version.libsonnet||production/kubernetes/build/lib/version.libsonnet",
            "production/kubernetes/install-bare.sh||production/kubernetes/install-bare.sh",
            "production/tanka/grafana-agent/v1/main.libsonnet||production/tanka/grafana-agent/v1/main.libsonnet",
            "production/tanka/grafana-agent/v2/internal/base.libsonnet||production/tanka/grafana-agent/v2/internal/base.libsonnet",
            "production/tanka/grafana-agent/v2/internal/syncer.libsonnet||production/tanka/grafana-agent/v2/internal/syncer.libsonnet"
          ]
        }
      },
      "candidate_diff": {
        "pkg/operator/defaults.go||pkg/operator/defaults.go": [
          "File: pkg/operator/defaults.go -> pkg/operator/defaults.go",
          "--- Hunk 1 ---",
          "[Context before]",
          "32:   \"v0.27.1\",",
          "33:   \"v0.28.0\",",
          "34:   \"v0.28.1\",",
          "36:  }",
          "",
          "[Removed Lines]",
          "[None]",
          "",
          "[Added Lines]",
          "35:   \"v0.29.0-rc.0\",",
          "",
          "---------------"
        ],
        "production/grafanacloud-install.sh||production/grafanacloud-install.sh": [
          "File: production/grafanacloud-install.sh -> production/grafanacloud-install.sh",
          "--- Hunk 1 ---",
          "[Context before]",
          "50: #",
          "51: # Global constants.",
          "52: #",
          "55: # The DEB and RPM urls don't include the `v` version prefix in the file names,",
          "56: # so we trim it out using ${RELEASE_VERSION#v} below.",
          "",
          "[Removed Lines]",
          "53: RELEASE_VERSION=\"v0.28.1\"",
          "",
          "[Added Lines]",
          "53: RELEASE_VERSION=\"v0.29.0-rc.0\"",
          "",
          "---------------"
        ],
        "production/kubernetes/build/lib/version.libsonnet||production/kubernetes/build/lib/version.libsonnet": [
          "File: production/kubernetes/build/lib/version.libsonnet -> production/kubernetes/build/lib/version.libsonnet",
          "--- Hunk 1 ---",
          "[Context before]",
          "[No context available]",
          "",
          "[Removed Lines]",
          "1: 'grafana/agent:v0.28.1'",
          "",
          "[Added Lines]",
          "1: 'grafana/agent:v0.29.0-rc.0'",
          "",
          "---------------"
        ],
        "production/kubernetes/build/templates/operator/main.jsonnet||production/kubernetes/build/templates/operator/main.jsonnet": [
          "File: production/kubernetes/build/templates/operator/main.jsonnet -> production/kubernetes/build/templates/operator/main.jsonnet",
          "--- Hunk 1 ---",
          "[Context before]",
          "23:   local this = self,",
          "25:   _images:: {",
          "28:     ksm: 'registry.k8s.io/kube-state-metrics/kube-state-metrics:v2.5.0',",
          "29:   },",
          "",
          "[Removed Lines]",
          "26:     agent: 'grafana/agent:v0.28.1',",
          "27:     agent_operator: 'grafana/agent-operator:v0.28.1',",
          "",
          "[Added Lines]",
          "26:     agent: 'grafana/agent:v0.29.0-rc.0',",
          "27:     agent_operator: 'grafana/agent-operator:v0.29.0-rc.0',",
          "",
          "---------------"
        ],
        "production/kubernetes/install-bare.sh||production/kubernetes/install-bare.sh": [
          "File: production/kubernetes/install-bare.sh -> production/kubernetes/install-bare.sh",
          "--- Hunk 1 ---",
          "[Context before]",
          "25: check_installed curl",
          "26: check_installed envsubst",
          "29: MANIFEST_URL=${MANIFEST_URL:-https://raw.githubusercontent.com/grafana/agent/${MANIFEST_BRANCH}/production/kubernetes/agent-bare.yaml}",
          "30: NAMESPACE=${NAMESPACE:-default}",
          "",
          "[Removed Lines]",
          "28: MANIFEST_BRANCH=v0.28.1",
          "",
          "[Added Lines]",
          "28: MANIFEST_BRANCH=v0.29.0-rc.0",
          "",
          "---------------"
        ],
        "production/tanka/grafana-agent/v1/main.libsonnet||production/tanka/grafana-agent/v1/main.libsonnet": [
          "File: production/tanka/grafana-agent/v1/main.libsonnet -> production/tanka/grafana-agent/v1/main.libsonnet",
          "--- Hunk 1 ---",
          "[Context before]",
          "15: (import './lib/traces.libsonnet') +",
          "16: {",
          "17:   _images:: {",
          "20:   },",
          "",
          "[Removed Lines]",
          "18:     agent: 'grafana/agent:v0.28.1',",
          "19:     agentctl: 'grafana/agentctl:v0.28.1',",
          "",
          "[Added Lines]",
          "18:     agent: 'grafana/agent:v0.29.0-rc.0',",
          "19:     agentctl: 'grafana/agentctl:v0.29.0-rc.0',",
          "",
          "---------------"
        ],
        "production/tanka/grafana-agent/v2/internal/base.libsonnet||production/tanka/grafana-agent/v2/internal/base.libsonnet": [
          "File: production/tanka/grafana-agent/v2/internal/base.libsonnet -> production/tanka/grafana-agent/v2/internal/base.libsonnet",
          "--- Hunk 1 ---",
          "[Context before]",
          "11:   local this = self,",
          "13:   _images:: {",
          "16:   },",
          "17:   _config:: {",
          "18:     name: name,",
          "",
          "[Removed Lines]",
          "14:     agent: 'grafana/agent:v0.28.1',",
          "15:     agentctl: 'grafana/agentctl:v0.28.1',",
          "",
          "[Added Lines]",
          "14:     agent: 'grafana/agent:v0.29.0-rc.0',",
          "15:     agentctl: 'grafana/agentctl:v0.29.0-rc.0',",
          "",
          "---------------"
        ],
        "production/tanka/grafana-agent/v2/internal/syncer.libsonnet||production/tanka/grafana-agent/v2/internal/syncer.libsonnet": [
          "File: production/tanka/grafana-agent/v2/internal/syncer.libsonnet -> production/tanka/grafana-agent/v2/internal/syncer.libsonnet",
          "--- Hunk 1 ---",
          "[Context before]",
          "14: ) {",
          "15:   local _config = {",
          "16:     api: error 'api must be set',",
          "18:     schedule: '*/5 * * * *',",
          "19:     configs: [],",
          "20:   } + config,",
          "",
          "[Removed Lines]",
          "17:     image: 'grafana/agentctl:v0.28.1',",
          "",
          "[Added Lines]",
          "17:     image: 'grafana/agentctl:v0.29.0-rc.0',",
          "",
          "---------------"
        ]
      }
    },
    {
      "candidate_hash": "4289e6523430d2ee36200560ba3f791f839fcf93",
      "candidate_info": {
        "commit_hash": "4289e6523430d2ee36200560ba3f791f839fcf93",
        "repo": "grafana/agent",
        "commit_url": "https://github.com/grafana/agent/commit/4289e6523430d2ee36200560ba3f791f839fcf93",
        "files": [
          "CHANGELOG.md",
          "docs/user/configuration/integrations/node-exporter-config.md",
          "docs/user/configuration/integrations/process-exporter-config.md",
          "docs/user/operator/custom-resource-quickstart.md",
          "docs/user/operator/getting-started.md",
          "docs/user/set-up/install-agent-docker.md",
          "pkg/operator/defaults.go",
          "production/grafanacloud-install.sh",
          "production/kubernetes/agent-bare.yaml",
          "production/kubernetes/agent-loki.yaml",
          "production/kubernetes/agent-traces.yaml",
          "production/kubernetes/build/lib/version.libsonnet",
          "production/kubernetes/install-bare.sh",
          "production/tanka/grafana-agent/v1/main.libsonnet",
          "production/tanka/grafana-agent/v2/internal/base.libsonnet",
          "production/tanka/grafana-agent/v2/internal/syncer.libsonnet"
        ],
        "message": "v0.25.1 image tags (#1801)\n\n* update images tags for v0.25.1\n\n* changelog date\n\n* update image tag\n\n* update image tag",
        "before_after_code_files": [
          "pkg/operator/defaults.go||pkg/operator/defaults.go",
          "production/grafanacloud-install.sh||production/grafanacloud-install.sh",
          "production/kubernetes/build/lib/version.libsonnet||production/kubernetes/build/lib/version.libsonnet",
          "production/kubernetes/install-bare.sh||production/kubernetes/install-bare.sh",
          "production/tanka/grafana-agent/v1/main.libsonnet||production/tanka/grafana-agent/v1/main.libsonnet",
          "production/tanka/grafana-agent/v2/internal/base.libsonnet||production/tanka/grafana-agent/v2/internal/base.libsonnet",
          "production/tanka/grafana-agent/v2/internal/syncer.libsonnet||production/tanka/grafana-agent/v2/internal/syncer.libsonnet"
        ]
      },
      "candidate_patch_features": {
        "candidate_earlier_than_patch": 0,
        "same_branch_evolution": 1,
        "olp_code_files": {
          "patch": [
            "pkg/operator/defaults.go||pkg/operator/defaults.go",
            "production/grafanacloud-install.sh||production/grafanacloud-install.sh",
            "production/kubernetes/build/lib/version.libsonnet||production/kubernetes/build/lib/version.libsonnet",
            "production/kubernetes/install-bare.sh||production/kubernetes/install-bare.sh",
            "production/tanka/grafana-agent/v1/main.libsonnet||production/tanka/grafana-agent/v1/main.libsonnet",
            "production/tanka/grafana-agent/v2/internal/base.libsonnet||production/tanka/grafana-agent/v2/internal/base.libsonnet",
            "production/tanka/grafana-agent/v2/internal/syncer.libsonnet||production/tanka/grafana-agent/v2/internal/syncer.libsonnet"
          ],
          "candidate": [
            "pkg/operator/defaults.go||pkg/operator/defaults.go",
            "production/grafanacloud-install.sh||production/grafanacloud-install.sh",
            "production/kubernetes/build/lib/version.libsonnet||production/kubernetes/build/lib/version.libsonnet",
            "production/kubernetes/install-bare.sh||production/kubernetes/install-bare.sh",
            "production/tanka/grafana-agent/v1/main.libsonnet||production/tanka/grafana-agent/v1/main.libsonnet",
            "production/tanka/grafana-agent/v2/internal/base.libsonnet||production/tanka/grafana-agent/v2/internal/base.libsonnet",
            "production/tanka/grafana-agent/v2/internal/syncer.libsonnet||production/tanka/grafana-agent/v2/internal/syncer.libsonnet"
          ]
        }
      },
      "candidate_diff": {
        "pkg/operator/defaults.go||pkg/operator/defaults.go": [
          "File: pkg/operator/defaults.go -> pkg/operator/defaults.go",
          "--- Hunk 1 ---",
          "[Context before]",
          "25:   \"v0.24.1\",",
          "26:   \"v0.24.2\",",
          "27:   \"v0.25.0\",",
          "30:  }",
          "",
          "[Removed Lines]",
          "[None]",
          "",
          "[Added Lines]",
          "28:   \"v0.25.1\",",
          "",
          "---------------"
        ],
        "production/grafanacloud-install.sh||production/grafanacloud-install.sh": [
          "File: production/grafanacloud-install.sh -> production/grafanacloud-install.sh",
          "--- Hunk 1 ---",
          "[Context before]",
          "50: #",
          "51: # Global constants.",
          "52: #",
          "55: RELEASE_URL=\"https://github.com/grafana/agent/releases/download/v${RELEASE_VERSION}\"",
          "56: DEB_URL=\"${RELEASE_URL}/grafana-agent-${RELEASE_VERSION}-1.${ARCH}.deb\"",
          "",
          "[Removed Lines]",
          "53: RELEASE_VERSION=\"0.24.2\"",
          "",
          "[Added Lines]",
          "53: RELEASE_VERSION=\"0.25.1\"",
          "",
          "---------------"
        ],
        "production/kubernetes/build/lib/version.libsonnet||production/kubernetes/build/lib/version.libsonnet": [
          "File: production/kubernetes/build/lib/version.libsonnet -> production/kubernetes/build/lib/version.libsonnet",
          "--- Hunk 1 ---",
          "[Context before]",
          "[No context available]",
          "",
          "[Removed Lines]",
          "1: 'grafana/agent:v0.25.0'",
          "",
          "[Added Lines]",
          "1: 'grafana/agent:v0.25.1'",
          "",
          "---------------"
        ],
        "production/kubernetes/install-bare.sh||production/kubernetes/install-bare.sh": [
          "File: production/kubernetes/install-bare.sh -> production/kubernetes/install-bare.sh",
          "--- Hunk 1 ---",
          "[Context before]",
          "25: check_installed curl",
          "26: check_installed envsubst",
          "29: MANIFEST_URL=${MANIFEST_URL:-https://raw.githubusercontent.com/grafana/agent/${MANIFEST_BRANCH}/production/kubernetes/agent-bare.yaml}",
          "30: NAMESPACE=${NAMESPACE:-default}",
          "",
          "[Removed Lines]",
          "28: MANIFEST_BRANCH=v0.25.0",
          "",
          "[Added Lines]",
          "28: MANIFEST_BRANCH=v0.25.1",
          "",
          "---------------"
        ],
        "production/tanka/grafana-agent/v1/main.libsonnet||production/tanka/grafana-agent/v1/main.libsonnet": [
          "File: production/tanka/grafana-agent/v1/main.libsonnet -> production/tanka/grafana-agent/v1/main.libsonnet",
          "--- Hunk 1 ---",
          "[Context before]",
          "15: (import './lib/traces.libsonnet') +",
          "16: {",
          "17:   _images:: {",
          "20:   },",
          "",
          "[Removed Lines]",
          "18:     agent: 'grafana/agent:v0.25.0',",
          "19:     agentctl: 'grafana/agentctl:v0.25.0',",
          "",
          "[Added Lines]",
          "18:     agent: 'grafana/agent:v0.25.1',",
          "19:     agentctl: 'grafana/agentctl:v0.25.1',",
          "",
          "---------------"
        ],
        "production/tanka/grafana-agent/v2/internal/base.libsonnet||production/tanka/grafana-agent/v2/internal/base.libsonnet": [
          "File: production/tanka/grafana-agent/v2/internal/base.libsonnet -> production/tanka/grafana-agent/v2/internal/base.libsonnet",
          "--- Hunk 1 ---",
          "[Context before]",
          "11:   local this = self,",
          "13:   _images:: {",
          "16:   },",
          "17:   _config:: {",
          "18:     name: name,",
          "",
          "[Removed Lines]",
          "14:     agent: 'grafana/agent:v0.25.0',",
          "15:     agentctl: 'grafana/agentctl:v0.25.0',",
          "",
          "[Added Lines]",
          "14:     agent: 'grafana/agent:v0.25.1',",
          "15:     agentctl: 'grafana/agentctl:v0.25.1',",
          "",
          "---------------"
        ],
        "production/tanka/grafana-agent/v2/internal/syncer.libsonnet||production/tanka/grafana-agent/v2/internal/syncer.libsonnet": [
          "File: production/tanka/grafana-agent/v2/internal/syncer.libsonnet -> production/tanka/grafana-agent/v2/internal/syncer.libsonnet",
          "--- Hunk 1 ---",
          "[Context before]",
          "14: ) {",
          "15:   local _config = {",
          "16:     api: error 'api must be set',",
          "18:     schedule: '*/5 * * * *',",
          "19:     configs: [],",
          "20:   } + config,",
          "",
          "[Removed Lines]",
          "17:     image: 'grafana/agentctl:v0.25.0',",
          "",
          "[Added Lines]",
          "17:     image: 'grafana/agentctl:v0.25.1',",
          "",
          "---------------"
        ]
      }
    }
  ]
}