{
  "cve_id": "CVE-2024-4030",
  "cve_desc": "On Windows a directory returned by tempfile.mkdtemp() would not always have permissions set to restrict reading and writing to the temporary directory by other users, instead usually inheriting the correct permissions from the default location. Alternate configurations or users without a profile directory may not have the intended permissions.\n\nIf you\u2019re not using Windows or haven\u2019t changed the temporary directory location then you aren\u2019t affected by this vulnerability. On other platforms the returned directory is consistently readable and writable only by the current user.\n\nThis issue was caused by Python not supporting Unix permissions on Windows. The fix adds support for Unix \u201c700\u201d for the mkdir function on Windows which is used by mkdtemp() to ensure the newly created directory has the proper permissions.",
  "repo": "python/cpython",
  "patch_hash": "d86b49411753bf2c83291e3a14ae43fefded2f84",
  "patch_info": {
    "commit_hash": "d86b49411753bf2c83291e3a14ae43fefded2f84",
    "repo": "python/cpython",
    "commit_url": "https://github.com/python/cpython/commit/d86b49411753bf2c83291e3a14ae43fefded2f84",
    "files": [
      "Doc/whatsnew/3.13.rst",
      "Misc/NEWS.d/next/Security/2024-05-01-20-57-09.gh-issue-118486.K44KJG.rst"
    ],
    "message": "gh-118486: Update docs for CVE-2024-4030 reference (GH-118737)\n\nUpdate docs for CVE-2024-4030 reference",
    "before_after_code_files": []
  },
  "patch_diff": {},
  "candidates": [
    {
      "candidate_hash": "0ea77d49cc5380b2fe294fb7cc3754df7ac08419",
      "candidate_info": {
        "commit_hash": "0ea77d49cc5380b2fe294fb7cc3754df7ac08419",
        "repo": "python/cpython",
        "commit_url": "https://github.com/python/cpython/commit/0ea77d49cc5380b2fe294fb7cc3754df7ac08419",
        "files": [
          "Lib/asyncio/proactor_events.py",
          "Lib/test/test_asyncio/test_proactor_events.py",
          "Misc/NEWS.d/next/Library/2024-05-24-21-54-55.gh-issue-113892.JKDFqq.rst"
        ],
        "message": "[3.13] gh-113892: Add a extra check to `ProactorEventLoop.sock_connect` to ensure that the given socket is in non-blocking mode (GH-119519) (#119912)\n\n(cherry picked from commit cf3bba3f0671d2c9fee099e3ab0f78b98b176131)\n\nCo-authored-by: Kirill Podoprigora <kirill.bast9@mail.ru>",
        "before_after_code_files": [
          "Lib/asyncio/proactor_events.py||Lib/asyncio/proactor_events.py",
          "Lib/test/test_asyncio/test_proactor_events.py||Lib/test/test_asyncio/test_proactor_events.py"
        ]
      },
      "candidate_patch_features": {
        "candidate_earlier_than_patch": 0,
        "same_pr": 1,
        "olp_pr_links": [
          "https://github.com/AcreetionOS-Linux/python/pull/2"
        ],
        "olp_code_files": {
          "patch": [],
          "candidate": []
        }
      },
      "candidate_diff": {
        "Lib/asyncio/proactor_events.py||Lib/asyncio/proactor_events.py": [
          "File: Lib/asyncio/proactor_events.py -> Lib/asyncio/proactor_events.py",
          "--- Hunk 1 ---",
          "[Context before]",
          "721:         return await self._proactor.sendto(sock, data, 0, address)",
          "723:     async def sock_connect(self, sock, address):",
          "724:         return await self._proactor.connect(sock, address)",
          "726:     async def sock_accept(self, sock):",
          "",
          "[Removed Lines]",
          "[None]",
          "",
          "[Added Lines]",
          "724:         if self._debug and sock.gettimeout() != 0:",
          "725:             raise ValueError(\"the socket must be non-blocking\")",
          "",
          "---------------"
        ],
        "Lib/test/test_asyncio/test_proactor_events.py||Lib/test/test_asyncio/test_proactor_events.py": [
          "File: Lib/test/test_asyncio/test_proactor_events.py -> Lib/test/test_asyncio/test_proactor_events.py",
          "--- Hunk 1 ---",
          "[Context before]",
          "1018:         self.addCleanup(self.file.close)",
          "1019:         super().setUp()",
          "1022:         sock = socket.socket(socket.AF_INET, socket.SOCK_STREAM)",
          "1024:         sock.setsockopt(socket.SOL_SOCKET, socket.SO_SNDBUF, 1024)",
          "1025:         sock.setsockopt(socket.SOL_SOCKET, socket.SO_RCVBUF, 1024)",
          "1026:         if cleanup:",
          "",
          "[Removed Lines]",
          "1021:     def make_socket(self, cleanup=True):",
          "1023:         sock.setblocking(False)",
          "",
          "[Added Lines]",
          "1021:     def make_socket(self, cleanup=True, blocking=False):",
          "1023:         sock.setblocking(blocking)",
          "",
          "---------------",
          "--- Hunk 2 ---",
          "[Context before]",
          "1082:                                                           0, None))",
          "1083:         self.assertEqual(self.file.tell(), 0)",
          "1086: if __name__ == '__main__':",
          "1087:     unittest.main()",
          "",
          "[Removed Lines]",
          "[None]",
          "",
          "[Added Lines]",
          "1085:     def test_blocking_socket(self):",
          "1086:         self.loop.set_debug(True)",
          "1087:         sock = self.make_socket(blocking=True)",
          "1088:         with self.assertRaisesRegex(ValueError, \"must be non-blocking\"):",
          "1089:             self.run_loop(self.loop.sock_sendfile(sock, self.file))",
          "",
          "---------------"
        ]
      }
    },
    {
      "candidate_hash": "083bf3ad1795604ee833d1595f2a536b9cd57419",
      "candidate_info": {
        "commit_hash": "083bf3ad1795604ee833d1595f2a536b9cd57419",
        "repo": "python/cpython",
        "commit_url": "https://github.com/python/cpython/commit/083bf3ad1795604ee833d1595f2a536b9cd57419",
        "files": [
          "Lib/os.py",
          "Lib/test/test_os.py"
        ],
        "message": "[3.13] GH-89727: Fix FD leak on `os.fwalk()` generator finalization. (GH-119766) (#119767)\n\nGH-89727: Fix FD leak on `os.fwalk()` generator finalization. (GH-119766)\n\nFollow-up to 3c890b50. Ensure we `os.close()` open file descriptors when\nthe `os.fwalk()` generator is finalized.\n(cherry picked from commit a5fef800d31648d19cecc240a2fa0dc71371753e)\n\nCo-authored-by: Barney Gale <barney.gale@gmail.com>",
        "before_after_code_files": [
          "Lib/os.py||Lib/os.py",
          "Lib/test/test_os.py||Lib/test/test_os.py"
        ]
      },
      "candidate_patch_features": {
        "candidate_earlier_than_patch": 0,
        "same_pr": 1,
        "olp_pr_links": [
          "https://github.com/AcreetionOS-Linux/python/pull/2"
        ],
        "olp_code_files": {
          "patch": [],
          "candidate": []
        }
      },
      "candidate_diff": {
        "Lib/os.py||Lib/os.py": [
          "File: Lib/os.py -> Lib/os.py",
          "--- Hunk 1 ---",
          "[Context before]",
          "480:         top = fspath(top)",
          "481:         stack = [(_fwalk_walk, (True, dir_fd, top, top, None))]",
          "482:         isbytes = isinstance(top, bytes)",
          "486:     # Each item in the _fwalk() stack is a pair (action, args).",
          "487:     _fwalk_walk = 0  # args: (isroot, dirfd, toppath, topname, entry)",
          "",
          "[Removed Lines]",
          "483:         while stack:",
          "484:             yield from _fwalk(stack, isbytes, topdown, onerror, follow_symlinks)",
          "",
          "[Added Lines]",
          "483:         try:",
          "484:             while stack:",
          "485:                 yield from _fwalk(stack, isbytes, topdown, onerror, follow_symlinks)",
          "486:         finally:",
          "487:             # Close any file descriptors still on the stack.",
          "488:             while stack:",
          "489:                 action, value = stack.pop()",
          "490:                 if action == _fwalk_close:",
          "491:                     close(value)",
          "",
          "---------------"
        ],
        "Lib/test/test_os.py||Lib/test/test_os.py": [
          "File: Lib/test/test_os.py -> Lib/test/test_os.py",
          "--- Hunk 1 ---",
          "[Context before]",
          "1685:         self.addCleanup(os.close, newfd)",
          "1686:         self.assertEqual(newfd, minfd)",
          "1688:     # fwalk() keeps file descriptors open",
          "1689:     test_walk_many_open_files = None",
          "",
          "[Removed Lines]",
          "[None]",
          "",
          "[Added Lines]",
          "1688:     @unittest.skipIf(",
          "1689:         support.is_emscripten, \"Cannot dup stdout on Emscripten\"",
          "1690:     )",
          "1691:     @unittest.skipIf(",
          "1692:         support.is_android, \"dup return value is unpredictable on Android\"",
          "1693:     )",
          "1694:     def test_fd_finalization(self):",
          "1695:         # Check that close()ing the fwalk() generator closes FDs",
          "1696:         def getfd():",
          "1697:             fd = os.dup(1)",
          "1698:             os.close(fd)",
          "1699:             return fd",
          "1700:         for topdown in (False, True):",
          "1701:             old_fd = getfd()",
          "1702:             it = self.fwalk(os_helper.TESTFN, topdown=topdown)",
          "1703:             self.assertEqual(getfd(), old_fd)",
          "1704:             next(it)",
          "1705:             self.assertGreater(getfd(), old_fd)",
          "1706:             it.close()",
          "1707:             self.assertEqual(getfd(), old_fd)",
          "",
          "---------------"
        ]
      }
    },
    {
      "candidate_hash": "ec484b6862711fa79a7ff598fb60f094f20926be",
      "candidate_info": {
        "commit_hash": "ec484b6862711fa79a7ff598fb60f094f20926be",
        "repo": "python/cpython",
        "commit_url": "https://github.com/python/cpython/commit/ec484b6862711fa79a7ff598fb60f094f20926be",
        "files": [
          "Lib/test/test_fractions.py"
        ],
        "message": "[3.13] gh-119189: Add yet more tests for mixed Fraction arithmetic (GH-119298) (GH-119346)\n\n(cherry picked from commit 10b1bd926a5546e0f5cbd1a47d00dc5ff84f1979)\n\nCo-authored-by: Serhiy Storchaka <storchaka@gmail.com>",
        "before_after_code_files": [
          "Lib/test/test_fractions.py||Lib/test/test_fractions.py"
        ]
      },
      "candidate_patch_features": {
        "candidate_earlier_than_patch": 0,
        "same_pr": 1,
        "olp_pr_links": [
          "https://github.com/AcreetionOS-Linux/python/pull/2"
        ],
        "olp_code_files": {
          "patch": [],
          "candidate": []
        }
      },
      "candidate_diff": {
        "Lib/test/test_fractions.py||Lib/test/test_fractions.py": [
          "File: Lib/test/test_fractions.py -> Lib/test/test_fractions.py",
          "--- Hunk 1 ---",
          "[Context before]",
          "135:     def __repr__(self):",
          "136:         return f'{self.__class__.__name__}({self.value!r})'",
          "138: class Rat:",
          "139:     \"\"\"Simple Rational class for testing mixed arithmetic.\"\"\"",
          "140:     def __init__(self, n, d):",
          "",
          "[Removed Lines]",
          "[None]",
          "",
          "[Added Lines]",
          "138: class SymbolicReal(Symbolic):",
          "139:     pass",
          "140: numbers.Real.register(SymbolicReal)",
          "142: class SymbolicComplex(Symbolic):",
          "143:     pass",
          "144: numbers.Complex.register(SymbolicComplex)",
          "",
          "---------------",
          "--- Hunk 2 ---",
          "[Context before]",
          "273:         return f'{self.__class__.__name__}({self.x!r}, {self.y!r})'",
          "274: numbers.Complex.register(Rect)",
          "277: class FractionTest(unittest.TestCase):",
          "",
          "[Removed Lines]",
          "[None]",
          "",
          "[Added Lines]",
          "284: class RectComplex(Rect, complex):",
          "285:     pass",
          "",
          "---------------",
          "--- Hunk 3 ---",
          "[Context before]",
          "791:         self.assertTypedEquals(F(3, 2) * Root(4), Root(F(9, 1)))",
          "792:         self.assertTypedEquals(Root(4) * F(3, 2), 3.0)",
          "794:         self.assertTypedEquals(F(3, 2) * Polar(4, 2), Polar(F(6, 1), 2))",
          "795:         self.assertTypedEquals(F(3, 2) * Polar(4.0, 2), Polar(6.0, 2))",
          "796:         self.assertTypedEquals(F(3, 2) * Rect(4, 3), Rect(F(6, 1), F(9, 2)))",
          "797:         self.assertRaises(TypeError, operator.mul, Polar(4, 2), F(3, 2))",
          "798:         self.assertTypedEquals(Rect(4, 3) * F(3, 2), 6.0 + 4.5j)",
          "800:         self.assertEqual(F(3, 2) * Symbolic('X'), Symbolic('3/2 * X'))",
          "801:         self.assertRaises(TypeError, operator.mul, Symbolic('X'), F(3, 2))",
          "",
          "[Removed Lines]",
          "[None]",
          "",
          "[Added Lines]",
          "803:         self.assertEqual(F(3, 2) * SymbolicReal('X'), SymbolicReal('3/2 * X'))",
          "804:         self.assertRaises(TypeError, operator.mul, SymbolicReal('X'), F(3, 2))",
          "809:         self.assertTypedEquals(F(3, 2) * RectComplex(4, 3), RectComplex(6.0+0j, 4.5+0j))",
          "812:         self.assertEqual(F(3, 2) * SymbolicComplex('X'), SymbolicComplex('3/2 * X'))",
          "813:         self.assertRaises(TypeError, operator.mul, SymbolicComplex('X'), F(3, 2))",
          "",
          "---------------",
          "--- Hunk 4 ---",
          "[Context before]",
          "816:         self.assertTypedEquals(F(2, 3) / Root(4), Root(F(1, 9)))",
          "817:         self.assertTypedEquals(Root(4) / F(2, 3), 3.0)",
          "819:         self.assertTypedEquals(F(3, 2) / Polar(4, 2), Polar(F(3, 8), -2))",
          "820:         self.assertTypedEquals(F(3, 2) / Polar(4.0, 2), Polar(0.375, -2))",
          "821:         self.assertTypedEquals(F(3, 2) / Rect(4, 3), Rect(0.24, 0.18))",
          "822:         self.assertRaises(TypeError, operator.truediv, Polar(4, 2), F(2, 3))",
          "823:         self.assertTypedEquals(Rect(4, 3) / F(2, 3), 6.0 + 4.5j)",
          "825:         self.assertEqual(F(3, 2) / Symbolic('X'), Symbolic('3/2 / X'))",
          "826:         self.assertRaises(TypeError, operator.truediv, Symbolic('X'), F(2, 3))",
          "",
          "[Removed Lines]",
          "[None]",
          "",
          "[Added Lines]",
          "833:         self.assertEqual(F(3, 2) / SymbolicReal('X'), SymbolicReal('3/2 / X'))",
          "834:         self.assertRaises(TypeError, operator.truediv, SymbolicReal('X'), F(3, 2))",
          "841:         self.assertEqual(F(3, 2) / SymbolicComplex('X'), SymbolicComplex('3/2 / X'))",
          "842:         self.assertRaises(TypeError, operator.truediv, SymbolicComplex('X'), F(3, 2))",
          "",
          "---------------",
          "--- Hunk 5 ---",
          "[Context before]",
          "858:         self.assertRaises(TypeError, operator.mod, F(2, 3), Root(4))",
          "859:         self.assertTypedEquals(Root(4) % F(3, 2), 0.5)",
          "861:         self.assertRaises(TypeError, operator.mod, F(3, 2), Polar(4, 2))",
          "862:         self.assertRaises(TypeError, operator.mod, Rect(4, 3), F(2, 3))",
          "864:         self.assertEqual(F(3, 2) % Symbolic('X'), Symbolic('3/2 % X'))",
          "865:         self.assertRaises(TypeError, operator.mod, Symbolic('X'), F(2, 3))",
          "",
          "[Removed Lines]",
          "[None]",
          "",
          "[Added Lines]",
          "879:         self.assertEqual(F(3, 2) % SymbolicReal('X'), SymbolicReal('3/2 % X'))",
          "880:         self.assertRaises(TypeError, operator.mod, SymbolicReal('X'), F(3, 2))",
          "883:         self.assertRaises(TypeError, operator.mod, F(3, 2), RectComplex(4, 3))",
          "885:         self.assertEqual(F(3, 2) % SymbolicComplex('X'), SymbolicComplex('3/2 % X'))",
          "886:         self.assertRaises(TypeError, operator.mod, SymbolicComplex('X'), F(3, 2))",
          "",
          "---------------",
          "--- Hunk 6 ---",
          "[Context before]",
          "899:         self.assertTypedEquals(Root(4) ** F(2, 1), Root(4, F(1)))",
          "900:         self.assertTypedEquals(Root(4) ** F(-2, 1), Root(4, -F(1)))",
          "901:         self.assertTypedEquals(Root(4) ** F(-2, 3), Root(4, -3.0))",
          "903:         self.assertTypedEquals(F(3, 2) ** Rect(2, 0), Polar(2.25, 0.0))",
          "904:         self.assertTypedEquals(F(1, 1) ** Rect(2, 3), Polar(1.0, 0.0))",
          "905:         self.assertTypedEquals(Polar(4, 2) ** F(3, 2), Polar(8.0, 3.0))",
          "906:         self.assertTypedEquals(Polar(4, 2) ** F(3, 1), Polar(64, 6))",
          "907:         self.assertTypedEquals(Polar(4, 2) ** F(-3, 1), Polar(0.015625, -6))",
          "908:         self.assertTypedEquals(Polar(4, 2) ** F(-3, 2), Polar(0.125, -3.0))",
          "913:     def testMixingWithDecimal(self):",
          "914:         # Decimal refuses mixed arithmetic (but not mixed comparisons)",
          "",
          "[Removed Lines]",
          "910:         self.assertTypedEquals(F(3, 2) ** Symbolic('X'), Symbolic('1.5 ** X'))",
          "911:         self.assertTypedEquals(Symbolic('X') ** F(3, 2), Symbolic('X ** 1.5'))",
          "",
          "[Added Lines]",
          "925:         self.assertEqual(F(3, 2) ** SymbolicReal('X'), SymbolicReal('1.5 ** X'))",
          "926:         self.assertEqual(SymbolicReal('X') ** F(3, 2), SymbolicReal('X ** 1.5'))",
          "930:         self.assertTypedEquals(F(3, 2) ** RectComplex(2, 0), Polar(2.25, 0.0))",
          "931:         self.assertTypedEquals(F(1, 1) ** RectComplex(2, 3), Polar(1.0, 0.0))",
          "936:         self.assertEqual(F(3, 2) ** SymbolicComplex('X'), SymbolicComplex('1.5 ** X'))",
          "937:         self.assertEqual(SymbolicComplex('X') ** F(3, 2), SymbolicComplex('X ** 1.5'))",
          "939:         self.assertEqual(F(3, 2) ** Symbolic('X'), Symbolic('1.5 ** X'))",
          "940:         self.assertEqual(Symbolic('X') ** F(3, 2), Symbolic('X ** 1.5'))",
          "",
          "---------------"
        ]
      }
    },
    {
      "candidate_hash": "c348e27cc1b1e7468f9c0c7d5d6e7f6160d25613",
      "candidate_info": {
        "commit_hash": "c348e27cc1b1e7468f9c0c7d5d6e7f6160d25613",
        "repo": "python/cpython",
        "commit_url": "https://github.com/python/cpython/commit/c348e27cc1b1e7468f9c0c7d5d6e7f6160d25613",
        "files": [
          "Misc/NEWS.d/next/Library/2024-06-03-11-18-16.gh-issue-117142.kWTXQo.rst",
          "Modules/_ctypes/_ctypes.c"
        ],
        "message": "[3.13] gh-117142: Support Importing ctypes in Isolated Interpreters (gh-120008)\n\nThis makes the support official.\n\n(cherry picked from commit dba7a167dbbd50e83e58df351f3414b7a08e0188, AKA gh-119991)\n\nCo-authored-by: Eric Snow <ericsnowcurrently@gmail.com>\nCo-authored-by: Kirill Podoprigora <kirill.bast9@mail.ru>",
        "before_after_code_files": [
          "Modules/_ctypes/_ctypes.c||Modules/_ctypes/_ctypes.c"
        ]
      },
      "candidate_patch_features": {
        "candidate_earlier_than_patch": 0,
        "same_pr": 1,
        "olp_pr_links": [
          "https://github.com/AcreetionOS-Linux/python/pull/2"
        ],
        "olp_code_files": {
          "patch": [],
          "candidate": []
        }
      },
      "candidate_diff": {
        "Modules/_ctypes/_ctypes.c||Modules/_ctypes/_ctypes.c": [
          "File: Modules/_ctypes/_ctypes.c -> Modules/_ctypes/_ctypes.c",
          "--- Hunk 1 ---",
          "[Context before]",
          "5940: static PyModuleDef_Slot module_slots[] = {",
          "5941:     {Py_mod_exec, _ctypes_mod_exec},",
          "5943:     {Py_mod_gil, Py_MOD_GIL_NOT_USED},",
          "5944:     {0, NULL}",
          "5945: };",
          "",
          "[Removed Lines]",
          "5942:     {Py_mod_multiple_interpreters, Py_MOD_MULTIPLE_INTERPRETERS_SUPPORTED},",
          "",
          "[Added Lines]",
          "5942:     {Py_mod_multiple_interpreters, Py_MOD_PER_INTERPRETER_GIL_SUPPORTED},",
          "",
          "---------------"
        ]
      }
    },
    {
      "candidate_hash": "23ebf87eaa88d43648bb99f84809485c45b39b0b",
      "candidate_info": {
        "commit_hash": "23ebf87eaa88d43648bb99f84809485c45b39b0b",
        "repo": "python/cpython",
        "commit_url": "https://github.com/python/cpython/commit/23ebf87eaa88d43648bb99f84809485c45b39b0b",
        "files": [
          "Lib/importlib/resources/_common.py",
          "Lib/importlib/resources/readers.py",
          "Lib/test/test_importlib/resources/data01/subdirectory/binary.file",
          "Lib/test/test_importlib/resources/namespacedata01/subdirectory/binary.file",
          "Lib/test/test_importlib/resources/test_contents.py",
          "Lib/test/test_importlib/resources/test_custom.py",
          "Lib/test/test_importlib/resources/test_files.py",
          "Lib/test/test_importlib/resources/test_open.py",
          "Lib/test/test_importlib/resources/test_path.py",
          "Lib/test/test_importlib/resources/test_read.py",
          "Lib/test/test_importlib/resources/test_reader.py",
          "Lib/test/test_importlib/resources/test_resource.py",
          "Lib/test/test_importlib/resources/util.py",
          "Lib/test/test_importlib/resources/zip.py",
          "Makefile.pre.in",
          "Misc/NEWS.d/next/Library/2024-03-19-21-41-31.gh-issue-106531.Mgd--6.rst"
        ],
        "message": "[3.13] gh-106531: Apply changes from importlib_resources 6.3.2 (GH-117054) (#120014)\n\ngh-106531: Apply changes from importlib_resources 6.3.2 (GH-117054)\n\nApply changes from importlib_resources 6.3.2.\n(cherry picked from commit 8d63c8d47b9edd8ac2f0b395b2fa0ae5f571252d)\n\nCo-authored-by: Jason R. Coombs <jaraco@jaraco.com>",
        "before_after_code_files": [
          "Lib/importlib/resources/_common.py||Lib/importlib/resources/_common.py",
          "Lib/importlib/resources/readers.py||Lib/importlib/resources/readers.py",
          "Lib/test/test_importlib/resources/namespacedata01/subdirectory/binary.file||Lib/test/test_importlib/resources/namespacedata01/subdirectory/binary.file",
          "Lib/test/test_importlib/resources/test_contents.py||Lib/test/test_importlib/resources/test_contents.py",
          "Lib/test/test_importlib/resources/test_custom.py||Lib/test/test_importlib/resources/test_custom.py",
          "Lib/test/test_importlib/resources/test_files.py||Lib/test/test_importlib/resources/test_files.py",
          "Lib/test/test_importlib/resources/test_open.py||Lib/test/test_importlib/resources/test_open.py",
          "Lib/test/test_importlib/resources/test_path.py||Lib/test/test_importlib/resources/test_path.py",
          "Lib/test/test_importlib/resources/test_read.py||Lib/test/test_importlib/resources/test_read.py",
          "Lib/test/test_importlib/resources/test_reader.py||Lib/test/test_importlib/resources/test_reader.py",
          "Lib/test/test_importlib/resources/test_resource.py||Lib/test/test_importlib/resources/test_resource.py",
          "Lib/test/test_importlib/resources/util.py||Lib/test/test_importlib/resources/util.py",
          "Lib/test/test_importlib/resources/zip.py||Lib/test/test_importlib/resources/zip.py",
          "Makefile.pre.in||Makefile.pre.in"
        ]
      },
      "candidate_patch_features": {
        "candidate_earlier_than_patch": 0,
        "same_pr": 1,
        "olp_pr_links": [
          "https://github.com/AcreetionOS-Linux/python/pull/2"
        ],
        "olp_code_files": {
          "patch": [],
          "candidate": []
        }
      },
      "candidate_diff": {
        "Lib/importlib/resources/_common.py||Lib/importlib/resources/_common.py": [
          "File: Lib/importlib/resources/_common.py -> Lib/importlib/resources/_common.py",
          "--- Hunk 1 ---",
          "[Context before]",
          "25:     >>> files('a', 'b')",
          "26:     Traceback (most recent call last):",
          "27:     TypeError: files() takes from 0 to 1 positional arguments but 2 were given",
          "28:     \"\"\"",
          "29:     undefined = object()",
          "",
          "[Removed Lines]",
          "[None]",
          "",
          "[Added Lines]",
          "29:     Remove this compatibility in Python 3.14.",
          "",
          "---------------"
        ],
        "Lib/importlib/resources/readers.py||Lib/importlib/resources/readers.py": [
          "File: Lib/importlib/resources/readers.py -> Lib/importlib/resources/readers.py",
          "--- Hunk 1 ---",
          "[Context before]",
          "1: import collections",
          "2: import itertools",
          "3: import pathlib",
          "4: import operator",
          "5: import zipfile",
          "7: from . import abc",
          "",
          "[Removed Lines]",
          "[None]",
          "",
          "[Added Lines]",
          "2: import contextlib",
          "6: import re",
          "7: import warnings",
          "",
          "---------------",
          "--- Hunk 2 ---",
          "[Context before]",
          "62:     \"\"\"",
          "64:     def __init__(self, *paths):",
          "66:         if not self._paths:",
          "67:             message = 'MultiplexedPath must contain at least one path'",
          "68:             raise FileNotFoundError(message)",
          "",
          "[Removed Lines]",
          "65:         self._paths = list(map(pathlib.Path, remove_duplicates(paths)))",
          "",
          "[Added Lines]",
          "68:         self._paths = list(map(_ensure_traversable, remove_duplicates(paths)))",
          "",
          "---------------",
          "--- Hunk 3 ---",
          "[Context before]",
          "130:     def __init__(self, namespace_path):",
          "131:         if 'NamespacePath' not in str(namespace_path):",
          "132:             raise ValueError('Invalid path')",
          "135:     def resource_path(self, resource):",
          "136:         \"\"\"",
          "",
          "[Removed Lines]",
          "133:         self.path = MultiplexedPath(*list(namespace_path))",
          "",
          "[Added Lines]",
          "136:         self.path = MultiplexedPath(*map(self._resolve, namespace_path))",
          "138:     @classmethod",
          "139:     def _resolve(cls, path_str) -> abc.Traversable:",
          "140:         r\"\"\"",
          "141:         Given an item from a namespace path, resolve it to a Traversable.",
          "143:         path_str might be a directory on the filesystem or a path to a",
          "144:         zipfile plus the path within the zipfile, e.g. ``/foo/bar`` or",
          "145:         ``/foo/baz.zip/inner_dir`` or ``foo\\baz.zip\\inner_dir\\sub``.",
          "146:         \"\"\"",
          "147:         (dir,) = (cand for cand in cls._candidate_paths(path_str) if cand.is_dir())",
          "148:         return dir",
          "150:     @classmethod",
          "151:     def _candidate_paths(cls, path_str):",
          "152:         yield pathlib.Path(path_str)",
          "153:         yield from cls._resolve_zip_path(path_str)",
          "155:     @staticmethod",
          "156:     def _resolve_zip_path(path_str):",
          "157:         for match in reversed(list(re.finditer(r'[\\\\/]', path_str))):",
          "158:             with contextlib.suppress(",
          "159:                 FileNotFoundError,",
          "160:                 IsADirectoryError,",
          "161:                 NotADirectoryError,",
          "162:                 PermissionError,",
          "163:             ):",
          "164:                 inner = path_str[match.end() :].replace('\\\\', '/') + '/'",
          "165:                 yield zipfile.Path(path_str[: match.start()], inner.lstrip('/'))",
          "",
          "---------------",
          "--- Hunk 4 ---",
          "[Context before]",
          "143:     def files(self):",
          "144:         return self.path",
          "",
          "[Removed Lines]",
          "[None]",
          "",
          "[Added Lines]",
          "179: def _ensure_traversable(path):",
          "180:     \"\"\"",
          "181:     Convert deprecated string arguments to traversables (pathlib.Path).",
          "183:     Remove with Python 3.15.",
          "184:     \"\"\"",
          "185:     if not isinstance(path, str):",
          "186:         return path",
          "188:     warnings.warn(",
          "189:         \"String arguments are deprecated. Pass a Traversable instead.\",",
          "190:         DeprecationWarning,",
          "191:         stacklevel=3,",
          "192:     )",
          "194:     return pathlib.Path(path)",
          "",
          "---------------"
        ],
        "Lib/test/test_importlib/resources/namespacedata01/subdirectory/binary.file||Lib/test/test_importlib/resources/namespacedata01/subdirectory/binary.file": [
          "File: Lib/test/test_importlib/resources/namespacedata01/subdirectory/binary.file -> Lib/test/test_importlib/resources/namespacedata01/subdirectory/binary.file"
        ],
        "Lib/test/test_importlib/resources/test_contents.py||Lib/test/test_importlib/resources/test_contents.py": [
          "File: Lib/test/test_importlib/resources/test_contents.py -> Lib/test/test_importlib/resources/test_contents.py",
          "--- Hunk 1 ---",
          "[Context before]",
          "31: class ContentsNamespaceTests(ContentsTests, unittest.TestCase):",
          "32:     expected = {",
          "33:         # no __init__ because of namespace design",
          "35:         'binary.file',",
          "36:         'utf-16.file',",
          "37:         'utf-8.file',",
          "38:     }",
          "",
          "[Removed Lines]",
          "34:         # no subdirectory as incidental difference in fixture",
          "",
          "[Added Lines]",
          "35:         'subdirectory',",
          "",
          "---------------"
        ],
        "Lib/test/test_importlib/resources/test_custom.py||Lib/test/test_importlib/resources/test_custom.py": [
          "File: Lib/test/test_importlib/resources/test_custom.py -> Lib/test/test_importlib/resources/test_custom.py",
          "--- Hunk 1 ---",
          "[Context before]",
          "5: from test.support import os_helper",
          "7: from importlib import resources",
          "8: from importlib.resources.abc import TraversableResources, ResourceReader",
          "9: from . import util",
          "",
          "[Removed Lines]",
          "[None]",
          "",
          "[Added Lines]",
          "8: from importlib.resources import abc",
          "",
          "---------------",
          "--- Hunk 2 ---",
          "[Context before]",
          "39:         self.addCleanup(self.fixtures.close)",
          "41:     def test_custom_loader(self):",
          "43:         loader = SimpleLoader(MagicResources(temp_dir))",
          "44:         pkg = util.create_package_from_loader(loader)",
          "45:         files = resources.files(pkg)",
          "",
          "[Removed Lines]",
          "42:         temp_dir = self.fixtures.enter_context(os_helper.temp_dir())",
          "46:         assert files is temp_dir",
          "",
          "[Added Lines]",
          "43:         temp_dir = pathlib.Path(self.fixtures.enter_context(os_helper.temp_dir()))",
          "47:         assert isinstance(files, abc.Traversable)",
          "48:         assert list(files.iterdir()) == []",
          "",
          "---------------"
        ],
        "Lib/test/test_importlib/resources/test_files.py||Lib/test/test_importlib/resources/test_files.py": [
          "File: Lib/test/test_importlib/resources/test_files.py -> Lib/test/test_importlib/resources/test_files.py",
          "--- Hunk 1 ---",
          "[Context before]",
          "2: import textwrap",
          "3: import unittest",
          "4: import warnings",
          "",
          "[Removed Lines]",
          "1: import typing",
          "",
          "[Added Lines]",
          "[None]",
          "",
          "---------------",
          "--- Hunk 2 ---",
          "[Context before]",
          "32:         actual = files.joinpath('utf-8.file').read_text(encoding='utf-8')",
          "33:         assert actual == 'Hello, UTF-8 world!\\n'",
          "39:     def test_traversable(self):",
          "40:         assert isinstance(resources.files(self.data), Traversable)",
          "42:     def test_old_parameter(self):",
          "43:         \"\"\"",
          "44:         Files used to take a 'package' parameter. Make sure anyone",
          "",
          "[Removed Lines]",
          "35:     @unittest.skipUnless(",
          "36:         hasattr(typing, 'runtime_checkable'),",
          "37:         \"Only suitable when typing supports runtime_checkable\",",
          "38:     )",
          "",
          "[Added Lines]",
          "37:     def test_joinpath_with_multiple_args(self):",
          "38:         files = resources.files(self.data)",
          "39:         binfile = files.joinpath('subdirectory', 'binary.file')",
          "40:         self.assertTrue(binfile.is_file())",
          "",
          "---------------",
          "--- Hunk 3 ---",
          "[Context before]",
          "64:         self.data = namespacedata01",
          "67: class SiteDir:",
          "68:     def setUp(self):",
          "69:         self.fixtures = contextlib.ExitStack()",
          "",
          "[Removed Lines]",
          "[None]",
          "",
          "[Added Lines]",
          "67: class OpenNamespaceZipTests(FilesTests, util.ZipSetup, unittest.TestCase):",
          "68:     ZIP_MODULE = 'namespacedata01'",
          "",
          "---------------"
        ],
        "Lib/test/test_importlib/resources/test_open.py||Lib/test/test_importlib/resources/test_open.py": [
          "File: Lib/test/test_importlib/resources/test_open.py -> Lib/test/test_importlib/resources/test_open.py",
          "--- Hunk 1 ---",
          "[Context before]",
          "24:         target = resources.files(self.data) / 'binary.file'",
          "25:         with target.open('rb') as fp:",
          "26:             result = fp.read()",
          "29:     def test_open_text_default_encoding(self):",
          "30:         target = resources.files(self.data) / 'utf-8.file'",
          "",
          "[Removed Lines]",
          "27:             self.assertEqual(result, b'\\x00\\x01\\x02\\x03')",
          "",
          "[Added Lines]",
          "27:             self.assertEqual(result, bytes(range(4)))",
          "",
          "---------------",
          "--- Hunk 2 ---",
          "[Context before]",
          "81:     pass",
          "84: if __name__ == '__main__':",
          "85:     unittest.main()",
          "",
          "[Removed Lines]",
          "[None]",
          "",
          "[Added Lines]",
          "84: class OpenNamespaceZipTests(OpenTests, util.ZipSetup, unittest.TestCase):",
          "85:     ZIP_MODULE = 'namespacedata01'",
          "",
          "---------------"
        ],
        "Lib/test/test_importlib/resources/test_path.py||Lib/test/test_importlib/resources/test_path.py": [
          "File: Lib/test/test_importlib/resources/test_path.py -> Lib/test/test_importlib/resources/test_path.py",
          "--- Hunk 1 ---",
          "[Context before]",
          "1: import io",
          "2: import unittest",
          "4: from importlib import resources",
          "",
          "[Removed Lines]",
          "[None]",
          "",
          "[Added Lines]",
          "2: import pathlib",
          "",
          "---------------",
          "--- Hunk 2 ---",
          "[Context before]",
          "15: class PathTests:",
          "16:     def test_reading(self):",
          "17:         \"\"\"",
          "22:         \"\"\"",
          "23:         target = resources.files(self.data) / 'utf-8.file'",
          "24:         with resources.as_file(target) as path:",
          "25:             self.assertTrue(path.name.endswith(\"utf-8.file\"), repr(path))",
          "32: class PathDiskTests(PathTests, unittest.TestCase):",
          "",
          "[Removed Lines]",
          "18:         Path should be readable.",
          "20:         Test also implicitly verifies the returned object is a pathlib.Path",
          "21:         instance.",
          "26:             # pathlib.Path.read_text() was introduced in Python 3.5.",
          "27:             with path.open('r', encoding='utf-8') as file:",
          "28:                 text = file.read()",
          "29:             self.assertEqual('Hello, UTF-8 world!\\n', text)",
          "",
          "[Added Lines]",
          "19:         Path should be readable and a pathlib.Path instance.",
          "23:             self.assertIsInstance(path, pathlib.Path)",
          "25:             self.assertEqual('Hello, UTF-8 world!\\n', path.read_text(encoding='utf-8'))",
          "",
          "---------------"
        ],
        "Lib/test/test_importlib/resources/test_read.py||Lib/test/test_importlib/resources/test_read.py": [
          "File: Lib/test/test_importlib/resources/test_read.py -> Lib/test/test_importlib/resources/test_read.py",
          "--- Hunk 1 ---",
          "[Context before]",
          "18: class ReadTests:",
          "19:     def test_read_bytes(self):",
          "20:         result = resources.files(self.data).joinpath('binary.file').read_bytes()",
          "23:     def test_read_text_default_encoding(self):",
          "24:         result = (",
          "",
          "[Removed Lines]",
          "21:         self.assertEqual(result, b'\\0\\1\\2\\3')",
          "",
          "[Added Lines]",
          "21:         self.assertEqual(result, bytes(range(4)))",
          "",
          "---------------",
          "--- Hunk 2 ---",
          "[Context before]",
          "58: class ReadZipTests(ReadTests, util.ZipSetup, unittest.TestCase):",
          "59:     def test_read_submodule_resource(self):",
          "61:         result = resources.files(submodule).joinpath('binary.file').read_bytes()",
          "64:     def test_read_submodule_resource_by_name(self):",
          "65:         result = (",
          "69:         )",
          "73: class ReadNamespaceTests(ReadTests, unittest.TestCase):",
          "",
          "[Removed Lines]",
          "60:         submodule = import_module('ziptestdata.subdirectory')",
          "62:         self.assertEqual(result, b'\\0\\1\\2\\3')",
          "66:             resources.files('ziptestdata.subdirectory')",
          "67:             .joinpath('binary.file')",
          "68:             .read_bytes()",
          "70:         self.assertEqual(result, b'\\0\\1\\2\\3')",
          "",
          "[Added Lines]",
          "60:         submodule = import_module('data01.subdirectory')",
          "62:         self.assertEqual(result, bytes(range(4, 8)))",
          "66:             resources.files('data01.subdirectory').joinpath('binary.file').read_bytes()",
          "68:         self.assertEqual(result, bytes(range(4, 8)))",
          "",
          "---------------",
          "--- Hunk 3 ---",
          "[Context before]",
          "77:         self.data = namespacedata01",
          "80: if __name__ == '__main__':",
          "81:     unittest.main()",
          "",
          "[Removed Lines]",
          "[None]",
          "",
          "[Added Lines]",
          "78: class ReadNamespaceZipTests(ReadTests, util.ZipSetup, unittest.TestCase):",
          "79:     ZIP_MODULE = 'namespacedata01'",
          "81:     def test_read_submodule_resource(self):",
          "82:         submodule = import_module('namespacedata01.subdirectory')",
          "83:         result = resources.files(submodule).joinpath('binary.file').read_bytes()",
          "84:         self.assertEqual(result, bytes(range(12, 16)))",
          "86:     def test_read_submodule_resource_by_name(self):",
          "87:         result = (",
          "88:             resources.files('namespacedata01.subdirectory')",
          "89:             .joinpath('binary.file')",
          "90:             .read_bytes()",
          "91:         )",
          "92:         self.assertEqual(result, bytes(range(12, 16)))",
          "",
          "---------------"
        ],
        "Lib/test/test_importlib/resources/test_reader.py||Lib/test/test_importlib/resources/test_reader.py": [
          "File: Lib/test/test_importlib/resources/test_reader.py -> Lib/test/test_importlib/resources/test_reader.py",
          "--- Hunk 1 ---",
          "[Context before]",
          "10: class MultiplexedPathTest(unittest.TestCase):",
          "11:     @classmethod",
          "12:     def setUpClass(cls):",
          "16:     def test_init_no_paths(self):",
          "17:         with self.assertRaises(FileNotFoundError):",
          "",
          "[Removed Lines]",
          "13:         path = pathlib.Path(__file__).parent / 'namespacedata01'",
          "14:         cls.folder = str(path)",
          "",
          "[Added Lines]",
          "13:         cls.folder = pathlib.Path(__file__).parent / 'namespacedata01'",
          "",
          "---------------",
          "--- Hunk 2 ---",
          "[Context before]",
          "20:     def test_init_file(self):",
          "21:         with self.assertRaises(NotADirectoryError):",
          "24:     def test_iterdir(self):",
          "25:         contents = {path.name for path in MultiplexedPath(self.folder).iterdir()}",
          "",
          "[Removed Lines]",
          "22:             MultiplexedPath(os.path.join(self.folder, 'binary.file'))",
          "",
          "[Added Lines]",
          "21:             MultiplexedPath(self.folder / 'binary.file')",
          "",
          "---------------",
          "--- Hunk 3 ---",
          "[Context before]",
          "27:             contents.remove('__pycache__')",
          "28:         except (KeyError, ValueError):",
          "29:             pass",
          "32:     def test_iterdir_duplicate(self):",
          "34:         contents = {",
          "35:             path.name for path in MultiplexedPath(self.folder, data01).iterdir()",
          "36:         }",
          "",
          "[Removed Lines]",
          "30:         self.assertEqual(contents, {'binary.file', 'utf-16.file', 'utf-8.file'})",
          "33:         data01 = os.path.abspath(os.path.join(__file__, '..', 'data01'))",
          "",
          "[Added Lines]",
          "29:         self.assertEqual(",
          "30:             contents, {'subdirectory', 'binary.file', 'utf-16.file', 'utf-8.file'}",
          "31:         )",
          "34:         data01 = pathlib.Path(__file__).parent.joinpath('data01')",
          "",
          "---------------",
          "--- Hunk 4 ---",
          "[Context before]",
          "60:             path.open()",
          "62:     def test_join_path(self):",
          "65:         path = MultiplexedPath(self.folder, data01)",
          "66:         self.assertEqual(",
          "67:             str(path.joinpath('binary.file'))[len(prefix) + 1 :],",
          "68:             os.path.join('namespacedata01', 'binary.file'),",
          "69:         )",
          "74:         self.assertEqual(",
          "75:             str(path.joinpath('imaginary'))[len(prefix) + 1 :],",
          "76:             os.path.join('namespacedata01', 'imaginary'),",
          "",
          "[Removed Lines]",
          "63:         prefix = os.path.abspath(os.path.join(__file__, '..'))",
          "64:         data01 = os.path.join(prefix, 'data01')",
          "70:         self.assertEqual(",
          "71:             str(path.joinpath('subdirectory'))[len(prefix) + 1 :],",
          "72:             os.path.join('data01', 'subdirectory'),",
          "73:         )",
          "",
          "[Added Lines]",
          "64:         data01 = pathlib.Path(__file__).parent.joinpath('data01')",
          "65:         prefix = str(data01.parent)",
          "71:         sub = path.joinpath('subdirectory')",
          "72:         assert isinstance(sub, MultiplexedPath)",
          "73:         assert 'namespacedata01' in str(sub)",
          "74:         assert 'data01' in str(sub)",
          "",
          "---------------",
          "--- Hunk 5 ---",
          "[Context before]",
          "82:         assert not path.joinpath('imaginary/foo.py').exists()",
          "84:     def test_join_path_common_subdir(self):",
          "88:         path = MultiplexedPath(data01, data02)",
          "89:         self.assertIsInstance(path.joinpath('subdirectory'), MultiplexedPath)",
          "90:         self.assertEqual(",
          "",
          "[Removed Lines]",
          "85:         prefix = os.path.abspath(os.path.join(__file__, '..'))",
          "86:         data01 = os.path.join(prefix, 'data01')",
          "87:         data02 = os.path.join(prefix, 'data02')",
          "",
          "[Added Lines]",
          "86:         data01 = pathlib.Path(__file__).parent.joinpath('data01')",
          "87:         data02 = pathlib.Path(__file__).parent.joinpath('data02')",
          "88:         prefix = str(data01.parent)",
          "",
          "---------------"
        ],
        "Lib/test/test_importlib/resources/test_resource.py||Lib/test/test_importlib/resources/test_resource.py": [
          "File: Lib/test/test_importlib/resources/test_resource.py -> Lib/test/test_importlib/resources/test_resource.py",
          "--- Hunk 1 ---",
          "[Context before]",
          "2: import sys",
          "3: import unittest",
          "5: import pathlib",
          "7: from . import data01",
          "9: from . import util",
          "10: from importlib import resources, import_module",
          "15: class ResourceTests:",
          "",
          "[Removed Lines]",
          "1: import contextlib",
          "4: import uuid",
          "8: from . import zipdata01, zipdata02",
          "11: from test.support import import_helper, os_helper",
          "12: from test.support.os_helper import unlink",
          "",
          "[Added Lines]",
          "[None]",
          "",
          "---------------",
          "--- Hunk 2 ---",
          "[Context before]",
          "91: class ResourceFromZipsTest01(util.ZipSetupBase, unittest.TestCase):",
          "94:     def test_is_submodule_resource(self):",
          "96:         self.assertTrue(resources.files(submodule).joinpath('binary.file').is_file())",
          "98:     def test_read_submodule_resource_by_name(self):",
          "99:         self.assertTrue(",
          "103:         )",
          "105:     def test_submodule_contents(self):",
          "107:         self.assertEqual(",
          "108:             names(resources.files(submodule)), {'__init__.py', 'binary.file'}",
          "109:         )",
          "111:     def test_submodule_contents_by_name(self):",
          "112:         self.assertEqual(",
          "114:             {'__init__.py', 'binary.file'},",
          "115:         )",
          "117:     def test_as_file_directory(self):",
          "120:             assert data.is_dir()",
          "121:             assert data.joinpath('subdirectory').is_dir()",
          "122:             assert len(list(data.iterdir()))",
          "",
          "[Removed Lines]",
          "92:     ZIP_MODULE = zipdata01  # type: ignore",
          "95:         submodule = import_module('ziptestdata.subdirectory')",
          "100:             resources.files('ziptestdata.subdirectory')",
          "101:             .joinpath('binary.file')",
          "102:             .is_file()",
          "106:         submodule = import_module('ziptestdata.subdirectory')",
          "113:             names(resources.files('ziptestdata.subdirectory')),",
          "118:         with resources.as_file(resources.files('ziptestdata')) as data:",
          "119:             assert data.name == 'ziptestdata'",
          "",
          "[Added Lines]",
          "87:     ZIP_MODULE = 'data01'",
          "90:         submodule = import_module('data01.subdirectory')",
          "95:             resources.files('data01.subdirectory').joinpath('binary.file').is_file()",
          "99:         submodule = import_module('data01.subdirectory')",
          "106:             names(resources.files('data01.subdirectory')),",
          "111:         with resources.as_file(resources.files('data01')) as data:",
          "112:             assert data.name == 'data01'",
          "",
          "---------------",
          "--- Hunk 3 ---",
          "[Context before]",
          "126: class ResourceFromZipsTest02(util.ZipSetupBase, unittest.TestCase):",
          "129:     def test_unrelated_contents(self):",
          "130:         \"\"\"",
          "",
          "[Removed Lines]",
          "127:     ZIP_MODULE = zipdata02  # type: ignore",
          "",
          "[Added Lines]",
          "120:     ZIP_MODULE = 'data02'",
          "",
          "---------------",
          "--- Hunk 4 ---",
          "[Context before]",
          "132:         distinct resources. Ref python/importlib_resources#44.",
          "133:         \"\"\"",
          "134:         self.assertEqual(",
          "136:             {'__init__.py', 'resource1.txt'},",
          "137:         )",
          "138:         self.assertEqual(",
          "140:             {'__init__.py', 'resource2.txt'},",
          "141:         )",
          "168:     \"\"\"Having accessed resources in a zip file should not keep an open",
          "169:     reference to the zip.",
          "170:     \"\"\"",
          "182:     def test_iterdir_does_not_keep_open(self):",
          "185:     def test_is_file_does_not_keep_open(self):",
          "188:     def test_is_file_failure_does_not_keep_open(self):",
          "191:     @unittest.skip(\"Desired but not supported.\")",
          "192:     def test_as_file_does_not_keep_open(self):  # pragma: no cover",
          "195:     def test_entered_path_does_not_keep_open(self):",
          "196:         \"\"\"",
          "197:         Mimic what certifi does on import to make its bundle",
          "198:         available for the process duration.",
          "199:         \"\"\"",
          "202:     def test_read_binary_does_not_keep_open(self):",
          "205:     def test_read_text_does_not_keep_open(self):",
          "222:     def test_is_submodule_resource(self):",
          "223:         self.assertTrue(",
          "224:             resources.files(import_module('namespacedata01'))",
          "",
          "[Removed Lines]",
          "135:             names(resources.files('ziptestdata.one')),",
          "139:             names(resources.files('ziptestdata.two')),",
          "144: @contextlib.contextmanager",
          "145: def zip_on_path(dir):",
          "146:     data_path = pathlib.Path(zipdata01.__file__)",
          "147:     source_zip_path = data_path.parent.joinpath('ziptestdata.zip')",
          "148:     zip_path = pathlib.Path(dir) / f'{uuid.uuid4()}.zip'",
          "149:     zip_path.write_bytes(source_zip_path.read_bytes())",
          "150:     sys.path.append(str(zip_path))",
          "151:     import_module('ziptestdata')",
          "153:     try:",
          "154:         yield",
          "155:     finally:",
          "156:         with contextlib.suppress(ValueError):",
          "157:             sys.path.remove(str(zip_path))",
          "159:         with contextlib.suppress(KeyError):",
          "160:             del sys.path_importer_cache[str(zip_path)]",
          "161:             del sys.modules['ziptestdata']",
          "163:         with contextlib.suppress(OSError):",
          "164:             unlink(zip_path)",
          "167: class DeletingZipsTest(unittest.TestCase):",
          "172:     def setUp(self):",
          "173:         self.fixtures = contextlib.ExitStack()",
          "174:         self.addCleanup(self.fixtures.close)",
          "176:         modules = import_helper.modules_setup()",
          "177:         self.addCleanup(import_helper.modules_cleanup, *modules)",
          "179:         temp_dir = self.fixtures.enter_context(os_helper.temp_dir())",
          "180:         self.fixtures.enter_context(zip_on_path(temp_dir))",
          "183:         [item.name for item in resources.files('ziptestdata').iterdir()]",
          "186:         resources.files('ziptestdata').joinpath('binary.file').is_file()",
          "189:         resources.files('ziptestdata').joinpath('not-present').is_file()",
          "193:         resources.as_file(resources.files('ziptestdata') / 'binary.file')",
          "200:         resources.as_file(resources.files('ziptestdata') / 'binary.file').__enter__()",
          "203:         resources.files('ziptestdata').joinpath('binary.file').read_bytes()",
          "206:         resources.files('ziptestdata').joinpath('utf-8.file').read_text(",
          "207:             encoding='utf-8'",
          "208:         )",
          "211: class ResourceFromNamespaceTest01(unittest.TestCase):",
          "212:     site_dir = str(pathlib.Path(__file__).parent)",
          "214:     @classmethod",
          "215:     def setUpClass(cls):",
          "216:         sys.path.append(cls.site_dir)",
          "218:     @classmethod",
          "219:     def tearDownClass(cls):",
          "220:         sys.path.remove(cls.site_dir)",
          "",
          "[Added Lines]",
          "128:             names(resources.files('data02.one')),",
          "132:             names(resources.files('data02.two')),",
          "137: class DeletingZipsTest(util.ZipSetupBase, unittest.TestCase):",
          "143:         [item.name for item in resources.files('data01').iterdir()]",
          "146:         resources.files('data01').joinpath('binary.file').is_file()",
          "149:         resources.files('data01').joinpath('not-present').is_file()",
          "153:         resources.as_file(resources.files('data01') / 'binary.file')",
          "160:         resources.as_file(resources.files('data01') / 'binary.file').__enter__()",
          "163:         resources.files('data01').joinpath('binary.file').read_bytes()",
          "166:         resources.files('data01').joinpath('utf-8.file').read_text(encoding='utf-8')",
          "169: class ResourceFromNamespaceTests:",
          "",
          "---------------",
          "--- Hunk 5 ---",
          "[Context before]",
          "237:             contents.remove('__pycache__')",
          "238:         except KeyError:",
          "239:             pass",
          "242:     def test_submodule_contents_by_name(self):",
          "243:         contents = names(resources.files('namespacedata01'))",
          "",
          "[Removed Lines]",
          "240:         self.assertEqual(contents, {'binary.file', 'utf-8.file', 'utf-16.file'})",
          "",
          "[Added Lines]",
          "188:         self.assertEqual(",
          "189:             contents, {'subdirectory', 'binary.file', 'utf-8.file', 'utf-16.file'}",
          "190:         )",
          "",
          "---------------",
          "--- Hunk 6 ---",
          "[Context before]",
          "245:             contents.remove('__pycache__')",
          "246:         except KeyError:",
          "247:             pass",
          "251: if __name__ == '__main__':",
          "",
          "[Removed Lines]",
          "248:         self.assertEqual(contents, {'binary.file', 'utf-8.file', 'utf-16.file'})",
          "",
          "[Added Lines]",
          "198:         self.assertEqual(",
          "199:             contents, {'subdirectory', 'binary.file', 'utf-8.file', 'utf-16.file'}",
          "200:         )",
          "202:     def test_submodule_sub_contents(self):",
          "203:         contents = names(resources.files(import_module('namespacedata01.subdirectory')))",
          "204:         try:",
          "205:             contents.remove('__pycache__')",
          "206:         except KeyError:",
          "207:             pass",
          "208:         self.assertEqual(contents, {'binary.file'})",
          "210:     def test_submodule_sub_contents_by_name(self):",
          "211:         contents = names(resources.files('namespacedata01.subdirectory'))",
          "212:         try:",
          "213:             contents.remove('__pycache__')",
          "214:         except KeyError:",
          "215:             pass",
          "216:         self.assertEqual(contents, {'binary.file'})",
          "219: class ResourceFromNamespaceDiskTests(ResourceFromNamespaceTests, unittest.TestCase):",
          "220:     site_dir = str(pathlib.Path(__file__).parent)",
          "222:     @classmethod",
          "223:     def setUpClass(cls):",
          "224:         sys.path.append(cls.site_dir)",
          "226:     @classmethod",
          "227:     def tearDownClass(cls):",
          "228:         sys.path.remove(cls.site_dir)",
          "231: class ResourceFromNamespaceZipTests(",
          "232:     util.ZipSetupBase,",
          "233:     ResourceFromNamespaceTests,",
          "234:     unittest.TestCase,",
          "235: ):",
          "236:     ZIP_MODULE = 'namespacedata01'",
          "",
          "---------------"
        ],
        "Lib/test/test_importlib/resources/util.py||Lib/test/test_importlib/resources/util.py": [
          "File: Lib/test/test_importlib/resources/util.py -> Lib/test/test_importlib/resources/util.py",
          "--- Hunk 1 ---",
          "[Context before]",
          "4: import sys",
          "5: import types",
          "6: import pathlib",
          "8: from . import data01",
          "10: from importlib.resources.abc import ResourceReader",
          "14: from importlib.machinery import ModuleSpec",
          "",
          "[Removed Lines]",
          "9: from . import zipdata01",
          "11: from test.support import import_helper",
          "",
          "[Added Lines]",
          "7: import contextlib",
          "11: from test.support import import_helper, os_helper",
          "12: from . import zip as zip_",
          "",
          "---------------",
          "--- Hunk 2 ---",
          "[Context before]",
          "143: class ZipSetupBase:",
          "173:     def setUp(self):",
          "178: class ZipSetup(ZipSetupBase):",
          "",
          "[Removed Lines]",
          "144:     ZIP_MODULE = None",
          "146:     @classmethod",
          "147:     def setUpClass(cls):",
          "148:         data_path = pathlib.Path(cls.ZIP_MODULE.__file__)",
          "149:         data_dir = data_path.parent",
          "150:         cls._zip_path = str(data_dir / 'ziptestdata.zip')",
          "151:         sys.path.append(cls._zip_path)",
          "152:         cls.data = importlib.import_module('ziptestdata')",
          "154:     @classmethod",
          "155:     def tearDownClass(cls):",
          "156:         try:",
          "157:             sys.path.remove(cls._zip_path)",
          "158:         except ValueError:",
          "159:             pass",
          "161:         try:",
          "162:             del sys.path_importer_cache[cls._zip_path]",
          "163:             del sys.modules[cls.data.__name__]",
          "164:         except KeyError:",
          "165:             pass",
          "167:         try:",
          "168:             del cls.data",
          "169:             del cls._zip_path",
          "170:         except AttributeError:",
          "171:             pass",
          "174:         modules = import_helper.modules_setup()",
          "175:         self.addCleanup(import_helper.modules_cleanup, *modules)",
          "179:     ZIP_MODULE = zipdata01  # type: ignore",
          "",
          "[Added Lines]",
          "145:     ZIP_MODULE = 'data01'",
          "148:         self.fixtures = contextlib.ExitStack()",
          "149:         self.addCleanup(self.fixtures.close)",
          "151:         self.fixtures.enter_context(import_helper.isolated_modules())",
          "153:         temp_dir = self.fixtures.enter_context(os_helper.temp_dir())",
          "154:         modules = pathlib.Path(temp_dir) / 'zipped modules.zip'",
          "155:         src_path = pathlib.Path(__file__).parent.joinpath(self.ZIP_MODULE)",
          "156:         self.fixtures.enter_context(",
          "157:             import_helper.DirsOnSysPath(str(zip_.make_zip_file(src_path, modules)))",
          "158:         )",
          "160:         self.data = importlib.import_module(self.ZIP_MODULE)",
          "164:     pass",
          "",
          "---------------"
        ],
        "Lib/test/test_importlib/resources/zip.py||Lib/test/test_importlib/resources/zip.py": [
          "File: Lib/test/test_importlib/resources/zip.py -> Lib/test/test_importlib/resources/zip.py",
          "--- Hunk 1 ---",
          "[Context before]",
          "[No context available]",
          "",
          "[Removed Lines]",
          "[None]",
          "",
          "[Added Lines]",
          "1: \"\"\"",
          "2: Generate zip test data files.",
          "3: \"\"\"",
          "5: import contextlib",
          "6: import os",
          "7: import pathlib",
          "8: import zipfile",
          "11: def make_zip_file(src, dst):",
          "12:     \"\"\"",
          "13:     Zip the files in src into a new zipfile at dst.",
          "14:     \"\"\"",
          "15:     with zipfile.ZipFile(dst, 'w') as zf:",
          "16:         for src_path, rel in walk(src):",
          "17:             dst_name = src.name / pathlib.PurePosixPath(rel.as_posix())",
          "18:             zf.write(src_path, dst_name)",
          "19:         zipfile._path.CompleteDirs.inject(zf)",
          "20:     return dst",
          "23: def walk(datapath):",
          "24:     for dirpath, dirnames, filenames in os.walk(datapath):",
          "25:         with contextlib.suppress(ValueError):",
          "26:             dirnames.remove('__pycache__')",
          "27:         for filename in filenames:",
          "28:             res = pathlib.Path(dirpath) / filename",
          "29:             rel = res.relative_to(datapath)",
          "30:             yield res, rel",
          "",
          "---------------"
        ],
        "Makefile.pre.in||Makefile.pre.in": [
          "File: Makefile.pre.in -> Makefile.pre.in",
          "--- Hunk 1 ---",
          "[Context before]",
          "2436:   test/test_importlib/resources/data03/namespace/portion1 \\",
          "2437:   test/test_importlib/resources/data03/namespace/portion2 \\",
          "2438:   test/test_importlib/resources/namespacedata01 \\",
          "2439:   test/test_importlib/resources/zipdata01 \\",
          "2440:   test/test_importlib/resources/zipdata02 \\",
          "2441:   test/test_importlib/source \\",
          "",
          "[Removed Lines]",
          "[None]",
          "",
          "[Added Lines]",
          "2439:   test/test_importlib/resources/namespacedata01/subdirectory \\",
          "",
          "---------------"
        ]
      }
    }
  ]
}