{
  "cve_id": "CVE-2023-5521",
  "cve_desc": "Incorrect Authorization in GitHub repository tiann/kernelsu prior to v0.6.9.",
  "repo": "tiann/kernelsu",
  "patch_hash": "a22959beae1aad96b1f72710a5daadf529c41bda",
  "patch_info": {
    "commit_hash": "a22959beae1aad96b1f72710a5daadf529c41bda",
    "repo": "tiann/kernelsu",
    "commit_url": "https://github.com/tiann/kernelsu/commit/a22959beae1aad96b1f72710a5daadf529c41bda",
    "files": [
      "kernel/Makefile",
      "kernel/apk_sign.c",
      "kernel/apk_sign.h",
      "kernel/manager.c",
      "scripts/check_v2.c",
      "userspace/ksud/Cargo.lock",
      "userspace/ksud/Cargo.toml",
      "userspace/ksud/src/apk_sign.rs",
      "userspace/ksud/src/cli.rs",
      "userspace/ksud/src/debug.rs"
    ],
    "message": "kernel: harden the signature check (#1027)",
    "before_after_code_files": [
      "kernel/apk_sign.c||kernel/apk_sign.c",
      "kernel/apk_sign.h||kernel/apk_sign.h",
      "kernel/manager.c||kernel/manager.c",
      "scripts/check_v2.c||scripts/check_v2.c",
      "userspace/ksud/Cargo.lock||userspace/ksud/Cargo.lock",
      "userspace/ksud/src/apk_sign.rs||userspace/ksud/src/apk_sign.rs",
      "userspace/ksud/src/cli.rs||userspace/ksud/src/cli.rs",
      "userspace/ksud/src/debug.rs||userspace/ksud/src/debug.rs"
    ]
  },
  "patch_diff": {
    "kernel/apk_sign.c||kernel/apk_sign.c": [
      "File: kernel/apk_sign.c -> kernel/apk_sign.c",
      "--- Hunk 1 ---",
      "[Context before]",
      "1: #include \"linux/fs.h\"",
      "2: #include \"linux/moduleparam.h\"",
      "4: #include \"apk_sign.h\"",
      "5: #include \"klog.h\" // IWYU pragma: keep",
      "6: #include \"kernel_compat.h\"",
      "10: {",
      "11:  unsigned char buffer[0x11] = { 0 };",
      "12:  u32 size4;",
      "13:  u64 size8, size_of_block;",
      "15:  loff_t pos;",
      "18:  int i;",
      "19:  struct file *fp = ksu_filp_open_compat(path, O_RDONLY, 0);",
      "20:  if (IS_ERR(fp)) {",
      "",
      "[Removed Lines]",
      "8: static __always_inline int",
      "9: check_v2_signature(char *path, unsigned expected_size, unsigned expected_hash)",
      "17:  int sign = -1;",
      "",
      "[Added Lines]",
      "1: #include \"linux/err.h\"",
      "3: #include \"linux/gfp.h\"",
      "4: #include \"linux/kernel.h\"",
      "10: #include \"crypto/hash.h\"",
      "11: #include \"linux/slab.h\"",
      "12: #include \"linux/version.h\"",
      "14: #if LINUX_VERSION_CODE >= KERNEL_VERSION(5, 11, 0)",
      "15: #include \"crypto/sha2.h\"",
      "16: #else",
      "17: #include \"crypto/sha.h\"",
      "18: #endif",
      "20: struct sdesc {",
      "21:  struct shash_desc shash;",
      "22:  char ctx[];",
      "23: };",
      "25: static struct sdesc *init_sdesc(struct crypto_shash *alg)",
      "26: {",
      "27:  struct sdesc *sdesc;",
      "28:  int size;",
      "30:  size = sizeof(struct shash_desc) + crypto_shash_descsize(alg);",
      "31:  sdesc = kmalloc(size, GFP_KERNEL);",
      "32:  if (!sdesc)",
      "33:   return ERR_PTR(-ENOMEM);",
      "34:  sdesc->shash.tfm = alg;",
      "35:  return sdesc;",
      "36: }",
      "38: static int calc_hash(struct crypto_shash *alg, const unsigned char *data,",
      "39:        unsigned int datalen, unsigned char *digest)",
      "40: {",
      "41:  struct sdesc *sdesc;",
      "42:  int ret;",
      "44:  sdesc = init_sdesc(alg);",
      "45:  if (IS_ERR(sdesc)) {",
      "46:   pr_info(\"can't alloc sdesc\\n\");",
      "47:   return PTR_ERR(sdesc);",
      "48:  }",
      "50:  ret = crypto_shash_digest(&sdesc->shash, data, datalen, digest);",
      "51:  kfree(sdesc);",
      "52:  return ret;",
      "53: }",
      "55: static int ksu_sha256(const unsigned char *data, unsigned int datalen,",
      "56:   unsigned char *digest)",
      "57: {",
      "58:  struct crypto_shash *alg;",
      "59:  char *hash_alg_name = \"sha256\";",
      "60:  int ret;",
      "62:  alg = crypto_alloc_shash(hash_alg_name, 0, 0);",
      "63:  if (IS_ERR(alg)) {",
      "64:   pr_info(\"can't alloc alg %s\\n\", hash_alg_name);",
      "65:   return PTR_ERR(alg);",
      "66:  }",
      "67:  ret = calc_hash(alg, data, datalen, digest);",
      "68:  crypto_free_shash(alg);",
      "69:  return ret;",
      "70: }",
      "72: static bool check_block(struct file *fp, u32 *size4, loff_t *pos, u32 *offset,",
      "73:    unsigned expected_size, const char* expected_sha256)",
      "74: {",
      "75:  ksu_kernel_read_compat(fp, size4, 0x4, pos); // signer-sequence length",
      "76:  ksu_kernel_read_compat(fp, size4, 0x4, pos); // signer length",
      "77:  ksu_kernel_read_compat(fp, size4, 0x4, pos); // signed data length",
      "81:  ksu_kernel_read_compat(fp, size4, 0x4, pos); // digests-sequence length",
      "86:  ksu_kernel_read_compat(fp, size4, 0x4, pos); // certificates length",
      "87:  ksu_kernel_read_compat(fp, size4, 0x4, pos); // certificate length",
      "90:  if (*size4 == expected_size) {",
      "93:   #define CERT_MAX_LENGTH 1024",
      "94:   char cert[CERT_MAX_LENGTH];",
      "95:   if (*size4 > CERT_MAX_LENGTH) {",
      "96:    pr_info(\"cert length overlimit\\n\");",
      "97:    return false;",
      "98:   }",
      "99:   ksu_kernel_read_compat(fp, cert, *size4, pos);",
      "100:   unsigned char digest[SHA256_DIGEST_SIZE];",
      "101:   if (IS_ERR(ksu_sha256(cert, *size4, digest))) {",
      "102:    pr_info(\"sha256 error\\n\");",
      "103:    return false;",
      "104:   }",
      "106:   char hash_str[SHA256_DIGEST_SIZE * 2 + 1];",
      "107:   hash_str[SHA256_DIGEST_SIZE * 2] = '\\0';",
      "109:   bin2hex(hash_str, digest, SHA256_DIGEST_SIZE);",
      "110:   pr_info(\"sha256: %s, expected: %s\\n\", hash_str, expected_sha256);",
      "111:   if (strcmp(expected_sha256, hash_str) == 0) {",
      "112:    return true;",
      "113:   }",
      "114:  }",
      "115:  return false;",
      "116: }",
      "118: static __always_inline bool",
      "119: check_v2_signature(char *path, unsigned expected_size, const char *expected_sha256)",
      "126:  bool block_valid;",
      "128:  const int NOT_EXIST = 0;",
      "129:  const int INVALID = 1;",
      "130:  const int VALID = 2;",
      "131:  int v2_signing_status = NOT_EXIST;",
      "132:  int v3_signing_status = NOT_EXIST;",
      "",
      "---------------",
      "--- Hunk 2 ---",
      "[Context before]",
      "26:  fp->f_mode |= FMODE_NONOTIFY;",
      "30:  for (i = 0;; ++i) {",
      "31:   unsigned short n;",
      "",
      "[Removed Lines]",
      "28:  sign = 1;",
      "",
      "[Added Lines]",
      "[None]",
      "",
      "---------------",
      "--- Hunk 3 ---",
      "[Context before]",
      "64:  for (;;) {",
      "65:   uint32_t id;",
      "66:   uint32_t offset;",
      "68:   if (size8 == size_of_block) {",
      "69:    break;",
      "70:   }",
      "71:   ksu_kernel_read_compat(fp, &id, 0x4, &pos); // id",
      "72:   offset = 4;",
      "73:   pr_info(\"id: 0x%08x\\n\", id);",
      "120:   }",
      "121:   pos += (size8 - offset);",
      "122:  }",
      "",
      "[Removed Lines]",
      "67:   ksu_kernel_read_compat(fp, &size8, 0x8, &pos); // sequence length",
      "74:   if ((id ^ 0xdeadbeefu) == 0xafa439f5u ||",
      "75:       (id ^ 0xdeadbeefu) == 0x2efed62f) {",
      "76:    ksu_kernel_read_compat(fp, &size4, 0x4,",
      "77:         &pos); // signer-sequence length",
      "78:    ksu_kernel_read_compat(fp, &size4, 0x4, &pos); // signer length",
      "79:    ksu_kernel_read_compat(fp, &size4, 0x4,",
      "80:         &pos); // signed data length",
      "81:    offset += 0x4 * 3;",
      "83:    ksu_kernel_read_compat(fp, &size4, 0x4,",
      "84:         &pos); // digests-sequence length",
      "85:    pos += size4;",
      "86:    offset += 0x4 + size4;",
      "88:    ksu_kernel_read_compat(fp, &size4, 0x4,",
      "89:         &pos); // certificates length",
      "90:    ksu_kernel_read_compat(fp, &size4, 0x4,",
      "91:         &pos); // certificate length",
      "92:    offset += 0x4 * 2;",
      "93: #if 0",
      "94:    int hash = 1;",
      "95:    signed char c;",
      "96:    for (i = 0; i < size4; ++i) {",
      "97:     ksu_kernel_read_compat(fp, &c, 0x1, &pos);",
      "98:     hash = 31 * hash + c;",
      "99:    }",
      "100:    offset += size4;",
      "101:    pr_info(\"    size: 0x%04x, hash: 0x%08x\\n\", size4, ((unsigned) hash) ^ 0x14131211u);",
      "102: #else",
      "103:    if (size4 == expected_size) {",
      "104:     int hash = 1;",
      "105:     signed char c;",
      "106:     for (i = 0; i < size4; ++i) {",
      "107:      ksu_kernel_read_compat(fp, &c, 0x1, &pos);",
      "108:      hash = 31 * hash + c;",
      "109:     }",
      "110:     offset += size4;",
      "111:     if ((((unsigned)hash) ^ 0x14131211u) ==",
      "112:         expected_hash) {",
      "113:      sign = 0;",
      "114:      break;",
      "115:     }",
      "116:    }",
      "118:    break;",
      "119: #endif",
      "",
      "[Added Lines]",
      "182:   ksu_kernel_read_compat(fp, &size8, 0x8,",
      "183:            &pos); // sequence length",
      "190:   if (id == 0x7109871au) {",
      "191:    block_valid = check_block(fp, &size4, &pos, &offset,",
      "192:         expected_size, expected_sha256);",
      "193:    v2_signing_status = block_valid ? VALID : INVALID;",
      "194:   } else if (id == 0xf05368c0u) {",
      "195:    block_valid = check_block(fp, &size4, &pos, &offset,",
      "196:         expected_size, expected_sha256);",
      "197:    v3_signing_status = block_valid ? VALID : INVALID;",
      "",
      "---------------",
      "--- Hunk 4 ---",
      "[Context before]",
      "124: clean:",
      "125:  filp_close(fp, 0);",
      "128: }",
      "130: #ifdef CONFIG_KSU_DEBUG",
      "132: unsigned ksu_expected_size = EXPECTED_SIZE;",
      "135: #include \"manager.h\"",
      "",
      "[Removed Lines]",
      "127:  return sign;",
      "133: unsigned ksu_expected_hash = EXPECTED_HASH;",
      "",
      "[Added Lines]",
      "205:  return (v2_signing_status == NOT_EXIST && v3_signing_status == VALID) ||",
      "206:         (v2_signing_status == VALID && v3_signing_status == NOT_EXIST) ||",
      "207:         (v2_signing_status == VALID && v3_signing_status == VALID);",
      "213: const char *ksu_expected_hash = EXPECTED_HASH;",
      "",
      "---------------",
      "--- Hunk 5 ---",
      "[Context before]",
      "145: static int set_expected_hash(const char *val, const struct kernel_param *kp)",
      "146: {",
      "148:  ksu_invalidate_manager_uid();",
      "150:  return rv;",
      "151: }",
      "",
      "[Removed Lines]",
      "147:  int rv = param_set_uint(val, kp);",
      "149:  pr_info(\"ksu_expected_hash set to %x\\n\", ksu_expected_hash);",
      "",
      "[Added Lines]",
      "227:  pr_info(\"set_expected_hash: %s\\n\", val);",
      "228:  int rv = param_set_charp(val, kp);",
      "230:  pr_info(\"ksu_expected_hash set to %s\\n\", ksu_expected_hash);",
      "",
      "---------------",
      "--- Hunk 6 ---",
      "[Context before]",
      "158: static struct kernel_param_ops expected_hash_ops = {",
      "159:  .set = set_expected_hash,",
      "161: };",
      "163: module_param_cb(ksu_expected_size, &expected_size_ops, &ksu_expected_size,",
      "",
      "[Removed Lines]",
      "160:  .get = param_get_uint,",
      "",
      "[Added Lines]",
      "241:  .get = param_get_charp,",
      "242:  .free = param_free_charp,",
      "",
      "---------------",
      "--- Hunk 7 ---",
      "[Context before]",
      "165: module_param_cb(ksu_expected_hash, &expected_hash_ops, &ksu_expected_hash,",
      "166:   S_IRUSR | S_IWUSR);",
      "169: {",
      "170:  return check_v2_signature(path, ksu_expected_size, ksu_expected_hash);",
      "171: }",
      "173: #else",
      "176: {",
      "177:  return check_v2_signature(path, EXPECTED_SIZE, EXPECTED_HASH);",
      "178: }",
      "",
      "[Removed Lines]",
      "168: int is_manager_apk(char *path)",
      "175: int is_manager_apk(char *path)",
      "",
      "[Added Lines]",
      "250: bool is_manager_apk(char *path)",
      "257: bool is_manager_apk(char *path)",
      "",
      "---------------"
    ],
    "kernel/apk_sign.h||kernel/apk_sign.h": [
      "File: kernel/apk_sign.h -> kernel/apk_sign.h",
      "--- Hunk 1 ---",
      "[Context before]",
      "1: #ifndef __KSU_H_APK_V2_SIGN",
      "2: #define __KSU_H_APK_V2_SIGN",
      "7: #endif",
      "",
      "[Removed Lines]",
      "5: int is_manager_apk(char *path);",
      "",
      "[Added Lines]",
      "4: #include \"linux/types.h\"",
      "6: bool is_manager_apk(char *path);",
      "",
      "---------------"
    ],
    "kernel/manager.c||kernel/manager.c": [
      "File: kernel/manager.c -> kernel/manager.c",
      "--- Hunk 1 ---",
      "[Context before]",
      "70:    pr_info(\"invalid pkg: %s\\n\", pkg);",
      "71:    continue;",
      "72:   }",
      "75:    uid_t uid = current_uid().val;",
      "76:    pr_info(\"manager uid: %d\\n\", uid);",
      "",
      "[Removed Lines]",
      "73:   if (is_manager_apk(cwd) == 0) {",
      "",
      "[Added Lines]",
      "73:   if (is_manager_apk(cwd)) {",
      "",
      "---------------"
    ],
    "scripts/check_v2.c||scripts/check_v2.c": [
      "File: scripts/check_v2.c -> scripts/check_v2.c",
      "--- Hunk 1 ---",
      "[Context before]",
      "[No context available]",
      "",
      "[Removed Lines]",
      "[None]",
      "",
      "[Added Lines]",
      "[None]",
      "",
      "---------------"
    ],
    "userspace/ksud/Cargo.lock||userspace/ksud/Cargo.lock": [
      "File: userspace/ksud/Cargo.lock -> userspace/ksud/Cargo.lock",
      "--- Hunk 1 ---",
      "[Context before]",
      "2: # It is not intended for manual editing.",
      "3: version = 3",
      "5: [[package]]",
      "6: name = \"adler\"",
      "7: version = \"1.0.2\"",
      "",
      "[Removed Lines]",
      "[None]",
      "",
      "[Added Lines]",
      "5: [[package]]",
      "6: name = \"addr2line\"",
      "7: version = \"0.19.0\"",
      "8: source = \"registry+https://github.com/rust-lang/crates.io-index\"",
      "9: checksum = \"a76fd60b23679b7d19bd066031410fb7e458ccc5e958eb5c325888ce4baedc97\"",
      "10: dependencies = [",
      "11:  \"gimli\",",
      "12: ]",
      "",
      "---------------",
      "--- Hunk 2 ---",
      "[Context before]",
      "74: source = \"registry+https://github.com/rust-lang/crates.io-index\"",
      "75: checksum = \"2cb2f989d18dd141ab8ae82f64d1a8cdd37e0840f73a406896cf5e99502fab61\"",
      "77: [[package]]",
      "78: name = \"autocfg\"",
      "79: version = \"1.1.0\"",
      "80: source = \"registry+https://github.com/rust-lang/crates.io-index\"",
      "81: checksum = \"d468802bab17cbc0cc575e9b053f41e72aa36bfa6b7f55e3529ffa43161b97fa\"",
      "83: [[package]]",
      "84: name = \"base64ct\"",
      "85: version = \"1.6.0\"",
      "",
      "[Removed Lines]",
      "[None]",
      "",
      "[Added Lines]",
      "86: [[package]]",
      "87: name = \"async-trait\"",
      "88: version = \"0.1.73\"",
      "89: source = \"registry+https://github.com/rust-lang/crates.io-index\"",
      "90: checksum = \"bc00ceb34980c03614e35a3a4e218276a0a824e911d07651cd0d858a51e8c0f0\"",
      "91: dependencies = [",
      "92:  \"proc-macro2\",",
      "93:  \"quote\",",
      "94:  \"syn 2.0.38\",",
      "95: ]",
      "103: [[package]]",
      "104: name = \"backtrace\"",
      "105: version = \"0.3.67\"",
      "106: source = \"registry+https://github.com/rust-lang/crates.io-index\"",
      "107: checksum = \"233d376d6d185f2a3093e58f283f60f880315b6c60075b01f36b3b85154564ca\"",
      "108: dependencies = [",
      "109:  \"addr2line\",",
      "110:  \"cc\",",
      "111:  \"cfg-if\",",
      "112:  \"libc\",",
      "113:  \"miniz_oxide\",",
      "114:  \"object\",",
      "115:  \"rustc-demangle\",",
      "116: ]",
      "",
      "---------------",
      "--- Hunk 3 ---",
      "[Context before]",
      "132: source = \"registry+https://github.com/rust-lang/crates.io-index\"",
      "133: checksum = \"14c189c53d098945499cdfa7ecc63567cf3886b3332b312a5b4585d8d3a6a610\"",
      "135: [[package]]",
      "136: name = \"bzip2\"",
      "137: version = \"0.4.4\"",
      "",
      "[Removed Lines]",
      "[None]",
      "",
      "[Added Lines]",
      "170: [[package]]",
      "171: name = \"bytes\"",
      "172: version = \"1.5.0\"",
      "173: source = \"registry+https://github.com/rust-lang/crates.io-index\"",
      "174: checksum = \"a2bd12c1caf447e69cd4528f47f94d203fd2582878ecb9e9465484c4148a8223\"",
      "",
      "---------------",
      "--- Hunk 4 ---",
      "[Context before]",
      "234:  \"proc-macro-error\",",
      "235:  \"proc-macro2\",",
      "236:  \"quote\",",
      "238: ]",
      "240: [[package]]",
      "",
      "[Removed Lines]",
      "237:  \"syn\",",
      "",
      "[Added Lines]",
      "278:  \"syn 1.0.107\",",
      "",
      "---------------",
      "--- Hunk 5 ---",
      "[Context before]",
      "407:  \"proc-macro2\",",
      "408:  \"quote\",",
      "409:  \"scratch\",",
      "411: ]",
      "413: [[package]]",
      "",
      "[Removed Lines]",
      "410:  \"syn\",",
      "",
      "[Added Lines]",
      "451:  \"syn 1.0.107\",",
      "",
      "---------------",
      "--- Hunk 6 ---",
      "[Context before]",
      "424: dependencies = [",
      "425:  \"proc-macro2\",",
      "426:  \"quote\",",
      "428: ]",
      "430: [[package]]",
      "",
      "[Removed Lines]",
      "427:  \"syn\",",
      "",
      "[Added Lines]",
      "468:  \"syn 1.0.107\",",
      "",
      "---------------",
      "--- Hunk 7 ---",
      "[Context before]",
      "435: dependencies = [",
      "436:  \"proc-macro2\",",
      "437:  \"quote\",",
      "439: ]",
      "441: [[package]]",
      "",
      "[Removed Lines]",
      "438:  \"syn\",",
      "",
      "[Added Lines]",
      "479:  \"syn 1.0.107\",",
      "",
      "---------------",
      "--- Hunk 8 ---",
      "[Context before]",
      "604:  \"wasi 0.11.0+wasi-snapshot-preview1\",",
      "605: ]",
      "607: [[package]]",
      "608: name = \"glob\"",
      "609: version = \"0.3.1\"",
      "",
      "[Removed Lines]",
      "[None]",
      "",
      "[Added Lines]",
      "648: [[package]]",
      "649: name = \"gimli\"",
      "650: version = \"0.27.3\"",
      "651: source = \"registry+https://github.com/rust-lang/crates.io-index\"",
      "652: checksum = \"b6c80984affa11d98d1b88b66ac8853f143217b399d3c74116778ff8fdb4ed2e\"",
      "",
      "---------------",
      "--- Hunk 9 ---",
      "[Context before]",
      "700:  \"proc-macro-hack\",",
      "701:  \"proc-macro2\",",
      "702:  \"quote\",",
      "704: ]",
      "706: [[package]]",
      "",
      "[Removed Lines]",
      "703:  \"syn\",",
      "",
      "[Added Lines]",
      "750:  \"syn 1.0.107\",",
      "",
      "---------------",
      "--- Hunk 10 ---",
      "[Context before]",
      "816:  \"rust-embed\",",
      "817:  \"serde\",",
      "818:  \"serde_json\",",
      "819:  \"sys-mount\",",
      "820:  \"which\",",
      "821:  \"zip 0.6.4\",",
      "",
      "[Removed Lines]",
      "[None]",
      "",
      "[Added Lines]",
      "866:  \"sha256\",",
      "",
      "---------------",
      "--- Hunk 11 ---",
      "[Context before]",
      "979:  \"libc\",",
      "980: ]",
      "982: [[package]]",
      "983: name = \"once_cell\"",
      "984: version = \"1.17.0\"",
      "",
      "[Removed Lines]",
      "[None]",
      "",
      "[Added Lines]",
      "1030: [[package]]",
      "1031: name = \"object\"",
      "1032: version = \"0.30.4\"",
      "1033: source = \"registry+https://github.com/rust-lang/crates.io-index\"",
      "1034: checksum = \"03b4680b86d9cfafba8fc491dc9b6df26b68cf40e9e6cd73909194759a63c385\"",
      "1035: dependencies = [",
      "1036:  \"memchr\",",
      "1037: ]",
      "",
      "---------------",
      "--- Hunk 12 ---",
      "[Context before]",
      "1053:  \"proc-macro-error-attr\",",
      "1054:  \"proc-macro2\",",
      "1055:  \"quote\",",
      "1057:  \"version_check\",",
      "1058: ]",
      "",
      "[Removed Lines]",
      "1056:  \"syn\",",
      "",
      "[Added Lines]",
      "1113:  \"syn 1.0.107\",",
      "",
      "---------------",
      "--- Hunk 13 ---",
      "[Context before]",
      "1077: [[package]]",
      "1078: name = \"proc-macro2\"",
      "1080: source = \"registry+https://github.com/rust-lang/crates.io-index\"",
      "1082: dependencies = [",
      "1083:  \"unicode-ident\",",
      "1084: ]",
      "",
      "[Removed Lines]",
      "1079: version = \"1.0.50\"",
      "1081: checksum = \"6ef7d57beacfaf2d8aee5937dab7b7f28de3cb8b1828479bb5de2a7106f2bae2\"",
      "",
      "[Added Lines]",
      "1136: version = \"1.0.69\"",
      "1138: checksum = \"134c189feb4956b20f6f547d2cf727d4c0fe06722b20a0eec87ed445a97f92da\"",
      "",
      "---------------",
      "--- Hunk 14 ---",
      "[Context before]",
      "1101: [[package]]",
      "1102: name = \"quote\"",
      "1104: source = \"registry+https://github.com/rust-lang/crates.io-index\"",
      "1106: dependencies = [",
      "1107:  \"proc-macro2\",",
      "1108: ]",
      "",
      "[Removed Lines]",
      "1103: version = \"1.0.23\"",
      "1105: checksum = \"8856d8364d252a14d474036ea1358d63c9e6965c8e5c1885c18f73d70bff9c7b\"",
      "",
      "[Added Lines]",
      "1160: version = \"1.0.33\"",
      "1162: checksum = \"5267fca4496028628a95160fc423a33e8b2e6af8a5302579e322e4b520293cae\"",
      "",
      "---------------",
      "--- Hunk 15 ---",
      "[Context before]",
      "1212:  \"proc-macro2\",",
      "1213:  \"quote\",",
      "1214:  \"rust-embed-utils\",",
      "1216:  \"walkdir\",",
      "1217: ]",
      "",
      "[Removed Lines]",
      "1215:  \"syn\",",
      "",
      "[Added Lines]",
      "1272:  \"syn 1.0.107\",",
      "",
      "---------------",
      "--- Hunk 16 ---",
      "[Context before]",
      "1226:  \"walkdir\",",
      "1227: ]",
      "1229: [[package]]",
      "1230: name = \"rustc-hash\"",
      "1231: version = \"1.1.0\"",
      "",
      "[Removed Lines]",
      "[None]",
      "",
      "[Added Lines]",
      "1286: [[package]]",
      "1287: name = \"rustc-demangle\"",
      "1288: version = \"0.1.23\"",
      "1289: source = \"registry+https://github.com/rust-lang/crates.io-index\"",
      "1290: checksum = \"d626bb9dae77e28219937af045c257c28bfd3f69333c512553507f5f9798cb76\"",
      "",
      "---------------",
      "--- Hunk 17 ---",
      "[Context before]",
      "1312:  \"digest\",",
      "1313: ]",
      "1315: [[package]]",
      "1316: name = \"shlex\"",
      "1317: version = \"1.1.0\"",
      "",
      "[Removed Lines]",
      "[None]",
      "",
      "[Added Lines]",
      "1378: [[package]]",
      "1379: name = \"sha256\"",
      "1380: version = \"1.4.0\"",
      "1381: source = \"registry+https://github.com/rust-lang/crates.io-index\"",
      "1382: checksum = \"7895c8ae88588ccead14ff438b939b0c569cd619116f14b4d13fdff7b8333386\"",
      "1383: dependencies = [",
      "1384:  \"async-trait\",",
      "1385:  \"bytes\",",
      "1386:  \"hex\",",
      "1387:  \"sha2\",",
      "1388:  \"tokio\",",
      "1389: ]",
      "",
      "---------------",
      "--- Hunk 18 ---",
      "[Context before]",
      "1326: dependencies = [",
      "1327:  \"proc-macro2\",",
      "1328:  \"quote\",",
      "1330: ]",
      "1332: [[package]]",
      "",
      "[Removed Lines]",
      "1329:  \"syn\",",
      "",
      "[Added Lines]",
      "1405:  \"syn 1.0.107\",",
      "",
      "---------------",
      "--- Hunk 19 ---",
      "[Context before]",
      "1352:  \"unicode-ident\",",
      "1353: ]",
      "1355: [[package]]",
      "1356: name = \"sys-mount\"",
      "1357: version = \"2.0.2\"",
      "",
      "[Removed Lines]",
      "[None]",
      "",
      "[Added Lines]",
      "1431: [[package]]",
      "1432: name = \"syn\"",
      "1433: version = \"2.0.38\"",
      "1434: source = \"registry+https://github.com/rust-lang/crates.io-index\"",
      "1435: checksum = \"e96b79aaa137db8f61e26363a0c9b47d8b4ec75da28b7d1d614c2303e232408b\"",
      "1436: dependencies = [",
      "1437:  \"proc-macro2\",",
      "1438:  \"quote\",",
      "1439:  \"unicode-ident\",",
      "1440: ]",
      "",
      "---------------",
      "--- Hunk 20 ---",
      "[Context before]",
      "1391: dependencies = [",
      "1392:  \"proc-macro2\",",
      "1393:  \"quote\",",
      "1395: ]",
      "1397: [[package]]",
      "",
      "[Removed Lines]",
      "1394:  \"syn\",",
      "",
      "[Added Lines]",
      "1481:  \"syn 1.0.107\",",
      "",
      "---------------",
      "--- Hunk 21 ---",
      "[Context before]",
      "1421: source = \"registry+https://github.com/rust-lang/crates.io-index\"",
      "1422: checksum = \"2e153e1f1acaef8acc537e68b44906d2db6436e2b35ac2c6b42640fff91f00fd\"",
      "1424: [[package]]",
      "1425: name = \"tracing\"",
      "1426: version = \"0.1.37\"",
      "",
      "[Removed Lines]",
      "[None]",
      "",
      "[Added Lines]",
      "1511: [[package]]",
      "1512: name = \"tokio\"",
      "1513: version = \"1.29.1\"",
      "1514: source = \"registry+https://github.com/rust-lang/crates.io-index\"",
      "1515: checksum = \"532826ff75199d5833b9d2c5fe410f29235e25704ee5f0ef599fb51c21f4a4da\"",
      "1516: dependencies = [",
      "1517:  \"autocfg\",",
      "1518:  \"backtrace\",",
      "1519:  \"bytes\",",
      "1520:  \"pin-project-lite\",",
      "1521: ]",
      "",
      "---------------",
      "--- Hunk 22 ---",
      "[Context before]",
      "1441: dependencies = [",
      "1442:  \"proc-macro2\",",
      "1443:  \"quote\",",
      "1445: ]",
      "1447: [[package]]",
      "",
      "[Removed Lines]",
      "1444:  \"syn\",",
      "",
      "[Added Lines]",
      "1543:  \"syn 1.0.107\",",
      "",
      "---------------",
      "--- Hunk 23 ---",
      "[Context before]",
      "1527:  \"once_cell\",",
      "1528:  \"proc-macro2\",",
      "1529:  \"quote\",",
      "1531:  \"wasm-bindgen-shared\",",
      "1532: ]",
      "",
      "[Removed Lines]",
      "1530:  \"syn\",",
      "",
      "[Added Lines]",
      "1629:  \"syn 1.0.107\",",
      "",
      "---------------",
      "--- Hunk 24 ---",
      "[Context before]",
      "1549: dependencies = [",
      "1550:  \"proc-macro2\",",
      "1551:  \"quote\",",
      "1553:  \"wasm-bindgen-backend\",",
      "1554:  \"wasm-bindgen-shared\",",
      "1555: ]",
      "",
      "[Removed Lines]",
      "1552:  \"syn\",",
      "",
      "[Added Lines]",
      "1651:  \"syn 1.0.107\",",
      "",
      "---------------"
    ],
    "userspace/ksud/src/apk_sign.rs||userspace/ksud/src/apk_sign.rs": [
      "File: userspace/ksud/src/apk_sign.rs -> userspace/ksud/src/apk_sign.rs",
      "--- Hunk 1 ---",
      "[Context before]",
      "1: use anyhow::{ensure, Result};",
      "2: use std::io::{Read, Seek, SeekFrom};",
      "5:     let mut buffer = [0u8; 0x10];",
      "6:     let mut size4 = [0u8; 4];",
      "7:     let mut size8 = [0u8; 8];",
      "",
      "[Removed Lines]",
      "4: pub fn get_apk_signature(apk: &str) -> Result<(u32, u32)> {",
      "",
      "[Added Lines]",
      "4: pub fn get_apk_signature(apk: &str) -> Result<(u32, String)> {",
      "",
      "---------------",
      "--- Hunk 2 ---",
      "[Context before]",
      "50:     ensure!(size_of_block == size8, \"not a signed apk\");",
      "52:     loop {",
      "53:         let mut id = [0u8; 4];",
      "56:         f.read_exact(&mut size8)?; // sequence length",
      "57:         if size8 == size_of_block {",
      "",
      "[Removed Lines]",
      "54:         let offset = 4u32;",
      "",
      "[Added Lines]",
      "52:     let mut v2_signing: Option<(u32, String)> = None;",
      "53:     let mut v3_signing: Option<(u32, String)> = None;",
      "56:         let mut offset = 4u32;",
      "",
      "---------------",
      "--- Hunk 3 ---",
      "[Context before]",
      "61:         f.read_exact(&mut id)?; // id",
      "63:         let id = u32::from_le_bytes(id);",
      "94:         }",
      "96:         f.seek(SeekFrom::Current(",
      "",
      "[Removed Lines]",
      "64:         if (id ^ 0xdead_beef_u32) == 0xafa4_39f5_u32 || (id ^ 0xdead_beef_u32) == 0x2efe_d62f_u32 {",
      "65:             f.read_exact(&mut size4)?; // signer-sequence length",
      "66:             f.read_exact(&mut size4)?; // signer length",
      "67:             f.read_exact(&mut size4)?; // signed data length",
      "70:             f.read_exact(&mut size4)?; // digests-sequcence length",
      "71:             let pos = u32::from_le_bytes(size4);",
      "72:             f.seek(SeekFrom::Current(i64::from(pos)))?;",
      "75:             f.read_exact(&mut size4)?; // certificates length",
      "76:             f.read_exact(&mut size4)?; // certificate length",
      "79:             let mut hash = 1i32;",
      "80:             let mut c = [0u8; 1];",
      "82:             let j = u32::from_le_bytes(size4);",
      "83:             for _ in 0..j {",
      "84:                 f.read_exact(&mut c)?;",
      "85:                 hash = hash.wrapping_mul(31).wrapping_add(i32::from(c[0] as i8));",
      "86:             }",
      "90:             let out_size = j;",
      "91:             let out_hash = (hash as u32) ^ 0x1413_1211_u32;",
      "93:             return Ok((out_size, out_hash));",
      "",
      "[Added Lines]",
      "66:         if id == 0x7109_871a_u32 {",
      "67:             v2_signing = Some(calc_cert_sha256(&mut f, &mut size4, &mut offset)?);",
      "68:         } else if id == 0xf053_68c0_u32 {",
      "69:             v3_signing = Some(calc_cert_sha256(&mut f, &mut size4, &mut offset)?);",
      "",
      "---------------",
      "--- Hunk 4 ---",
      "[Context before]",
      "98:         ))?;",
      "99:     }",
      "102: }",
      "",
      "[Removed Lines]",
      "101:     Err(anyhow::anyhow!(\"Unknown error\"))",
      "",
      "[Added Lines]",
      "77:     match (v2_signing, v3_signing) {",
      "78:         (None, Some(s)) => Ok(s),",
      "79:         (Some(s), None) => Ok(s),",
      "80:         (Some(s1), Some(s2)) => {",
      "81:             if s1 == s2 {",
      "82:                 Ok(s1)",
      "83:             } else {",
      "84:                 Err(anyhow::anyhow!(",
      "85:                     \"Inconsisent signature, v2: {}, v3: {}!\",",
      "86:                     s1.1,",
      "87:                     s2.1",
      "88:                 ))",
      "89:             }",
      "90:         }",
      "91:         _ => Err(anyhow::anyhow!(\"Unknown signature!\")),",
      "92:     }",
      "93: }",
      "95: fn calc_cert_sha256(",
      "96:     f: &mut std::fs::File,",
      "97:     size4: &mut [u8; 4],",
      "98:     offset: &mut u32,",
      "99: ) -> Result<(u32, String)> {",
      "100:     f.read_exact(size4)?; // signer-sequence length",
      "101:     f.read_exact(size4)?; // signer length",
      "102:     f.read_exact(size4)?; // signed data length",
      "105:     f.read_exact(size4)?; // digests-sequence length",
      "106:     let pos = u32::from_le_bytes(*size4); // skip digests",
      "107:     f.seek(SeekFrom::Current(i64::from(pos)))?;",
      "110:     f.read_exact(size4)?; // certificates length",
      "111:     f.read_exact(size4)?; // certificate length",
      "114:     let cert_len = u32::from_le_bytes(*size4);",
      "115:     let mut cert: Vec<u8> = vec![0; cert_len as usize];",
      "116:     f.read_exact(&mut cert)?;",
      "119:     Ok((cert_len, sha256::digest(&cert)))",
      "",
      "---------------"
    ],
    "userspace/ksud/src/cli.rs||userspace/ksud/src/cli.rs": [
      "File: userspace/ksud/src/cli.rs -> userspace/ksud/src/cli.rs",
      "--- Hunk 1 ---",
      "[Context before]",
      "228:             Debug::SetManager { apk } => debug::set_manager(&apk),",
      "229:             Debug::GetSign { apk } => {",
      "230:                 let sign = apk_sign::get_apk_signature(&apk)?;",
      "232:                 Ok(())",
      "233:             }",
      "234:             Debug::Version => {",
      "",
      "[Removed Lines]",
      "231:                 println!(\"size: {:#x}, hash: {:#x}\", sign.0, sign.1);",
      "",
      "[Added Lines]",
      "231:                 println!(\"size: {:#x}, hash: {}\", sign.0, sign.1);",
      "",
      "---------------"
    ],
    "userspace/ksud/src/debug.rs||userspace/ksud/src/debug.rs": [
      "File: userspace/ksud/src/debug.rs -> userspace/ksud/src/debug.rs",
      "--- Hunk 1 ---",
      "[Context before]",
      "15:     Ok(content)",
      "16: }",
      "19:     let kernel_param_path = Path::new(KERNEL_PARAM_PATH).join(\"parameters\");",
      "20:     let expeced_size_path = kernel_param_path.join(\"ksu_expected_size\");",
      "21:     let expeced_hash_path = kernel_param_path.join(\"ksu_expected_hash\");",
      "23:     println!(",
      "25:         read_u32(&expeced_size_path)?,",
      "27:     );",
      "29:     std::fs::write(&expeced_size_path, size.to_string())?;",
      "32:     println!(",
      "34:         read_u32(&expeced_size_path)?,",
      "36:     );",
      "38:     Ok(())",
      "",
      "[Removed Lines]",
      "18: fn set_kernel_param(size: u32, hash: u32) -> Result<()> {",
      "24:         \"before size: {:#x} hash: {:#x}\",",
      "26:         read_u32(&expeced_hash_path)?",
      "30:     std::fs::write(&expeced_hash_path, hash.to_string())?;",
      "33:         \"after size: {:#x} hash: {:#x}\",",
      "35:         read_u32(&expeced_hash_path)?",
      "",
      "[Added Lines]",
      "18: fn set_kernel_param(size: u32, hash: String) -> Result<()> {",
      "25:         \"before size: {:#x} hash: {}\",",
      "27:         std::fs::read_to_string(&expeced_hash_path)?",
      "31:     std::fs::write(&expeced_hash_path, hash)?;",
      "34:         \"after size: {:#x} hash: {}\",",
      "36:         std::fs::read_to_string(&expeced_hash_path)?",
      "",
      "---------------"
    ]
  },
  "candidates": [
    {
      "candidate_hash": "d7bc853bfc8ad44ba59927689efc12e131331d02",
      "candidate_info": {
        "commit_hash": "d7bc853bfc8ad44ba59927689efc12e131331d02",
        "repo": "tiann/kernelsu",
        "commit_url": "https://github.com/tiann/kernelsu/commit/d7bc853bfc8ad44ba59927689efc12e131331d02",
        "files": [
          "userspace/ksud/Cargo.lock",
          "userspace/ksud/Cargo.toml",
          "userspace/ksud/src/module.rs",
          "userspace/ksud/src/utils.rs"
        ],
        "message": "ksud: use sparse image to avoiding resize image. close #1220",
        "before_after_code_files": [
          "userspace/ksud/Cargo.lock||userspace/ksud/Cargo.lock",
          "userspace/ksud/src/module.rs||userspace/ksud/src/module.rs",
          "userspace/ksud/src/utils.rs||userspace/ksud/src/utils.rs"
        ]
      },
      "candidate_patch_features": {
        "candidate_earlier_than_patch": 0,
        "same_branch_evolution": 1,
        "olp_code_files": {
          "patch": [
            "userspace/ksud/Cargo.lock||userspace/ksud/Cargo.lock"
          ],
          "candidate": [
            "userspace/ksud/Cargo.lock||userspace/ksud/Cargo.lock"
          ]
        }
      },
      "candidate_diff": {
        "userspace/ksud/Cargo.lock||userspace/ksud/Cargo.lock": [
          "File: userspace/ksud/Cargo.lock -> userspace/ksud/Cargo.lock",
          "--- Hunk 1 ---",
          "[Context before]",
          "29: source = \"registry+https://github.com/rust-lang/crates.io-index\"",
          "30: checksum = \"9e8b47f52ea9bae42228d07ec09eb676433d7c4ed1ebdf0f1d1c29ed446f1ab8\"",
          "31: dependencies = [",
          "33:  \"cipher\",",
          "34:  \"cpufeatures\",",
          "35:  \"opaque-debug\",",
          "",
          "[Removed Lines]",
          "32:  \"cfg-if\",",
          "",
          "[Added Lines]",
          "32:  \"cfg-if 1.0.0\",",
          "",
          "---------------",
          "--- Hunk 2 ---",
          "[Context before]",
          "80: [[package]]",
          "81: name = \"anyhow\"",
          "83: source = \"registry+https://github.com/rust-lang/crates.io-index\"",
          "86: [[package]]",
          "87: name = \"async-trait\"",
          "",
          "[Removed Lines]",
          "82: version = \"1.0.68\"",
          "84: checksum = \"2cb2f989d18dd141ab8ae82f64d1a8cdd37e0840f73a406896cf5e99502fab61\"",
          "",
          "[Added Lines]",
          "82: version = \"1.0.79\"",
          "84: checksum = \"080e9890a082662b09c1ad45f567faeeb47f22b5fb23895fbe1e651e718e25ca\"",
          "",
          "---------------",
          "--- Hunk 3 ---",
          "[Context before]",
          "91: dependencies = [",
          "92:  \"proc-macro2\",",
          "93:  \"quote\",",
          "95: ]",
          "97: [[package]]",
          "",
          "[Removed Lines]",
          "94:  \"syn 2.0.38\",",
          "",
          "[Added Lines]",
          "94:  \"syn 2.0.48\",",
          "",
          "---------------",
          "--- Hunk 4 ---",
          "[Context before]",
          "108: dependencies = [",
          "109:  \"addr2line\",",
          "110:  \"cc\",",
          "112:  \"libc\",",
          "113:  \"miniz_oxide\",",
          "114:  \"object\",",
          "",
          "[Removed Lines]",
          "111:  \"cfg-if\",",
          "",
          "[Added Lines]",
          "111:  \"cfg-if 1.0.0\",",
          "",
          "---------------",
          "--- Hunk 5 ---",
          "[Context before]",
          "218:  \"nom\",",
          "219: ]",
          "221: [[package]]",
          "222: name = \"cfg-if\"",
          "223: version = \"1.0.0\"",
          "",
          "[Removed Lines]",
          "[None]",
          "",
          "[Added Lines]",
          "221: [[package]]",
          "222: name = \"cfg-if\"",
          "223: version = \"0.1.10\"",
          "224: source = \"registry+https://github.com/rust-lang/crates.io-index\"",
          "225: checksum = \"4785bdd1c96b2a846b2bd7cc02e86b6b3dbf14e7e53446c4f54c92a361040822\"",
          "",
          "---------------",
          "--- Hunk 6 ---",
          "[Context before]",
          "353: source = \"registry+https://github.com/rust-lang/crates.io-index\"",
          "354: checksum = \"b540bd8bc810d3885c6ea91e2018302f68baba2129ab3e88f32389ee9370880d\"",
          "355: dependencies = [",
          "357: ]",
          "359: [[package]]",
          "",
          "[Removed Lines]",
          "356:  \"cfg-if\",",
          "",
          "[Added Lines]",
          "362:  \"cfg-if 1.0.0\",",
          "",
          "---------------",
          "--- Hunk 7 ---",
          "[Context before]",
          "362: source = \"registry+https://github.com/rust-lang/crates.io-index\"",
          "363: checksum = \"2801af0d36612ae591caa9568261fddce32ce6e08a7275ea334a06a4ad021a2c\"",
          "364: dependencies = [",
          "366:  \"crossbeam-channel\",",
          "367:  \"crossbeam-deque\",",
          "368:  \"crossbeam-epoch\",",
          "",
          "[Removed Lines]",
          "365:  \"cfg-if\",",
          "",
          "[Added Lines]",
          "371:  \"cfg-if 1.0.0\",",
          "",
          "---------------",
          "--- Hunk 8 ---",
          "[Context before]",
          "373: [[package]]",
          "374: name = \"crossbeam-channel\"",
          "376: source = \"registry+https://github.com/rust-lang/crates.io-index\"",
          "378: dependencies = [",
          "380:  \"crossbeam-utils\",",
          "381: ]",
          "383: [[package]]",
          "384: name = \"crossbeam-deque\"",
          "386: source = \"registry+https://github.com/rust-lang/crates.io-index\"",
          "388: dependencies = [",
          "390:  \"crossbeam-epoch\",",
          "391:  \"crossbeam-utils\",",
          "392: ]",
          "394: [[package]]",
          "395: name = \"crossbeam-epoch\"",
          "397: source = \"registry+https://github.com/rust-lang/crates.io-index\"",
          "399: dependencies = [",
          "402:  \"crossbeam-utils\",",
          "405: ]",
          "407: [[package]]",
          "",
          "[Removed Lines]",
          "375: version = \"0.5.6\"",
          "377: checksum = \"c2dd04ddaf88237dc3b8d8f9a3c1004b506b54b3313403944054d23c0870c521\"",
          "379:  \"cfg-if\",",
          "385: version = \"0.8.2\"",
          "387: checksum = \"715e8152b692bba2d374b53d4875445368fdf21a94751410af607a5ac677d1fc\"",
          "389:  \"cfg-if\",",
          "396: version = \"0.9.13\"",
          "398: checksum = \"01a9af1f4c2ef74bb8aa1f7e19706bc72d03598c8a570bb5de72243c7a9d9d5a\"",
          "400:  \"autocfg\",",
          "401:  \"cfg-if\",",
          "403:  \"memoffset\",",
          "404:  \"scopeguard\",",
          "",
          "[Added Lines]",
          "381: version = \"0.5.11\"",
          "383: checksum = \"176dc175b78f56c0f321911d9c8eb2b77a78a4860b9c19db83835fea1a46649b\"",
          "390: version = \"0.8.5\"",
          "392: checksum = \"613f8cc01fe9cf1a3eb3d7f488fd2fa8388403e97039e2f73692932e291a770d\"",
          "400: version = \"0.9.18\"",
          "402: checksum = \"5b82ac4a3c2ca9c3460964f020e1402edd5753411d7737aa39c3714ad1b5420e\"",
          "",
          "---------------",
          "--- Hunk 9 ---",
          "[Context before]",
          "410: source = \"registry+https://github.com/rust-lang/crates.io-index\"",
          "411: checksum = \"d1cfb3ea8a53f37c40dea2c7bedcbd88bdfae54f5e2175d6ecaff1c988353add\"",
          "412: dependencies = [",
          "414:  \"crossbeam-utils\",",
          "415: ]",
          "417: [[package]]",
          "418: name = \"crossbeam-utils\"",
          "420: source = \"registry+https://github.com/rust-lang/crates.io-index\"",
          "426: [[package]]",
          "427: name = \"crypto-common\"",
          "",
          "[Removed Lines]",
          "413:  \"cfg-if\",",
          "419: version = \"0.8.14\"",
          "421: checksum = \"4fb766fa798726286dbbb842f174001dab8abc7b627a1dd86e0b7222a95d929f\"",
          "422: dependencies = [",
          "423:  \"cfg-if\",",
          "424: ]",
          "",
          "[Added Lines]",
          "413:  \"cfg-if 1.0.0\",",
          "419: version = \"0.8.19\"",
          "421: checksum = \"248e3bacc7dc6baa3b21e405ee045c3047101a49145e7e9eca583ab4c2ca5345\"",
          "",
          "---------------",
          "--- Hunk 10 ---",
          "[Context before]",
          "511: source = \"registry+https://github.com/rust-lang/crates.io-index\"",
          "512: checksum = \"7268b386296a025e474d5140678f75d6de9493ae55a5d709eeb9dd08149945e1\"",
          "513: dependencies = [",
          "515: ]",
          "517: [[package]]",
          "",
          "[Removed Lines]",
          "514:  \"cfg-if\",",
          "",
          "[Added Lines]",
          "511:  \"cfg-if 1.0.0\",",
          "",
          "---------------",
          "--- Hunk 11 ---",
          "[Context before]",
          "541: [[package]]",
          "542: name = \"errno\"",
          "544: source = \"registry+https://github.com/rust-lang/crates.io-index\"",
          "546: dependencies = [",
          "547:  \"libc\",",
          "549: ]",
          "551: [[package]]",
          "",
          "[Removed Lines]",
          "543: version = \"0.3.5\"",
          "545: checksum = \"ac3e13f66a2f95e32a39eaa81f6b95d42878ca0e1db0c7543723dfe12557e860\"",
          "548:  \"windows-sys 0.48.0\",",
          "",
          "[Added Lines]",
          "540: version = \"0.3.8\"",
          "542: checksum = \"a258e46cdc063eb8519c00b9fc845fc47bcfca4130e2f08e88665ceda8474245\"",
          "545:  \"windows-sys 0.52.0\",",
          "",
          "---------------",
          "--- Hunk 12 ---",
          "[Context before]",
          "610: source = \"registry+https://github.com/rust-lang/crates.io-index\"",
          "611: checksum = \"c05aeb6a22b8f62540c194aac980f2115af067bfe15a0734d7277a768d396b31\"",
          "612: dependencies = [",
          "614:  \"libc\",",
          "615:  \"wasi 0.11.0+wasi-snapshot-preview1\",",
          "616: ]",
          "",
          "[Removed Lines]",
          "613:  \"cfg-if\",",
          "",
          "[Added Lines]",
          "610:  \"cfg-if 1.0.0\",",
          "",
          "---------------",
          "--- Hunk 13 ---",
          "[Context before]",
          "642:  \"libc\",",
          "643: ]",
          "645: [[package]]",
          "646: name = \"hex\"",
          "647: version = \"0.4.3\"",
          "",
          "[Removed Lines]",
          "[None]",
          "",
          "[Added Lines]",
          "642: [[package]]",
          "643: name = \"hermit-abi\"",
          "644: version = \"0.3.4\"",
          "645: source = \"registry+https://github.com/rust-lang/crates.io-index\"",
          "646: checksum = \"5d3d0e0f38255e7fa3cf31335b3a56f05febd18025f4db5ef7a0cfb4f8da651f\"",
          "",
          "---------------",
          "--- Hunk 14 ---",
          "[Context before]",
          "657:  \"digest\",",
          "658: ]",
          "660: [[package]]",
          "661: name = \"home\"",
          "662: version = \"0.5.5\"",
          "",
          "[Removed Lines]",
          "[None]",
          "",
          "[Added Lines]",
          "663: [[package]]",
          "664: name = \"hole-punch\"",
          "665: version = \"0.0.4-alpha.0\"",
          "666: source = \"git+https://github.com/tiann/hole-punch#11ab7a61bfb98682b72fd7f58a47d8e5d997328e\"",
          "667: dependencies = [",
          "668:  \"cfg-if 0.1.10\",",
          "669:  \"errno 0.2.8\",",
          "670:  \"libc\",",
          "671:  \"memmap\",",
          "672:  \"thiserror\",",
          "673:  \"winapi\",",
          "674: ]",
          "",
          "---------------",
          "--- Hunk 15 ---",
          "[Context before]",
          "755: source = \"registry+https://github.com/rust-lang/crates.io-index\"",
          "756: checksum = \"28dfb6c8100ccc63462345b67d1bbc3679177c75ee4bf59bf29c8b1d110b8189\"",
          "757: dependencies = [",
          "759:  \"io-lifetimes\",",
          "760:  \"rustix 0.36.7\",",
          "761:  \"windows-sys 0.42.0\",",
          "",
          "[Removed Lines]",
          "758:  \"hermit-abi\",",
          "",
          "[Added Lines]",
          "774:  \"hermit-abi 0.2.6\",",
          "",
          "---------------",
          "--- Hunk 16 ---",
          "[Context before]",
          "830:  \"env_logger\",",
          "831:  \"extattr\",",
          "832:  \"getopts\",",
          "833:  \"humansize\",",
          "834:  \"is_executable\",",
          "835:  \"java-properties\",",
          "",
          "[Removed Lines]",
          "[None]",
          "",
          "[Added Lines]",
          "849:  \"hole-punch\",",
          "",
          "---------------",
          "--- Hunk 17 ---",
          "[Context before]",
          "866: [[package]]",
          "867: name = \"libc\"",
          "869: source = \"registry+https://github.com/rust-lang/crates.io-index\"",
          "872: [[package]]",
          "873: name = \"libflate\"",
          "",
          "[Removed Lines]",
          "868: version = \"0.2.149\"",
          "870: checksum = \"a08173bc88b7955d1b3145aa561539096c421ac8debde8cbc3612ec635fee29b\"",
          "",
          "[Added Lines]",
          "885: version = \"0.2.152\"",
          "887: checksum = \"13e3bf6590cbc649f4d1a3eefc9d5d6eb746f5200ffb04e5e142700b8faa56e7\"",
          "",
          "---------------",
          "--- Hunk 18 ---",
          "[Context before]",
          "895: source = \"registry+https://github.com/rust-lang/crates.io-index\"",
          "896: checksum = \"b67380fd3b2fbe7527a606e18729d21c6f3951633d0500574c4dc22d2d638b9f\"",
          "897: dependencies = [",
          "899:  \"winapi\",",
          "900: ]",
          "",
          "[Removed Lines]",
          "898:  \"cfg-if\",",
          "",
          "[Added Lines]",
          "915:  \"cfg-if 1.0.0\",",
          "",
          "---------------",
          "--- Hunk 19 ---",
          "[Context before]",
          "923: [[package]]",
          "924: name = \"linux-raw-sys\"",
          "926: source = \"registry+https://github.com/rust-lang/crates.io-index\"",
          "929: [[package]]",
          "930: name = \"log\"",
          "932: source = \"registry+https://github.com/rust-lang/crates.io-index\"",
          "938: [[package]]",
          "939: name = \"loopdev\"",
          "",
          "[Removed Lines]",
          "925: version = \"0.4.10\"",
          "927: checksum = \"da2479e8c062e40bf0066ffa0bc823de0a9368974af99c9f6df941d2c231e03f\"",
          "931: version = \"0.4.17\"",
          "933: checksum = \"abb12e687cfb44aa40f41fc3978ef76448f9b6038cad6aef4259d3c095a2382e\"",
          "934: dependencies = [",
          "935:  \"cfg-if\",",
          "936: ]",
          "",
          "[Added Lines]",
          "942: version = \"0.4.13\"",
          "944: checksum = \"01cda141df6706de531b6c46c3a33ecca755538219bd484262fa09410c13539c\"",
          "948: version = \"0.4.20\"",
          "950: checksum = \"b5e6163cb8c49088c2c36f57875e58ccd8c87c7427f7fbd50ea6710b2f3f2e8f\"",
          "",
          "---------------",
          "--- Hunk 20 ---",
          "[Context before]",
          "948: [[package]]",
          "949: name = \"memchr\"",
          "951: source = \"registry+https://github.com/rust-lang/crates.io-index\"",
          "954: [[package]]",
          "957: source = \"registry+https://github.com/rust-lang/crates.io-index\"",
          "959: dependencies = [",
          "961: ]",
          "963: [[package]]",
          "",
          "[Removed Lines]",
          "950: version = \"2.5.0\"",
          "952: checksum = \"2dffe52ecf27772e601905b7522cb4ef790d2cc203488bbd0e2fe85fcb74566d\"",
          "955: name = \"memoffset\"",
          "956: version = \"0.7.1\"",
          "958: checksum = \"5de893c32cde5f383baa4c04c5d6dbdd735cfd4a794b0debdb2bb1b421da5ff4\"",
          "960:  \"autocfg\",",
          "",
          "[Added Lines]",
          "964: version = \"2.7.1\"",
          "966: checksum = \"523dc4f511e55ab87b694dc30d0f820d60906ef06413f93d4d7a1385599cc149\"",
          "969: name = \"memmap\"",
          "970: version = \"0.7.0\"",
          "972: checksum = \"6585fd95e7bb50d6cc31e20d4cf9afb4e2ba16c5846fc76793f11218da9c475b\"",
          "974:  \"libc\",",
          "975:  \"winapi\",",
          "",
          "---------------",
          "--- Hunk 21 ---",
          "[Context before]",
          "1007: [[package]]",
          "1008: name = \"num_cpus\"",
          "1010: source = \"registry+https://github.com/rust-lang/crates.io-index\"",
          "1012: dependencies = [",
          "1014:  \"libc\",",
          "1015: ]",
          "",
          "[Removed Lines]",
          "1009: version = \"1.15.0\"",
          "1011: checksum = \"0fac9e2da13b5eb447a6ce3d392f23a29d8694bff781bf03a16cd9ac8697593b\"",
          "1013:  \"hermit-abi\",",
          "",
          "[Added Lines]",
          "1024: version = \"1.16.0\"",
          "1026: checksum = \"4161fcb6d602d4d2081af7c3a45852d875a03dd337a6bfdd6e06407b61342a43\"",
          "1028:  \"hermit-abi 0.3.4\",",
          "",
          "---------------",
          "--- Hunk 22 ---",
          "[Context before]",
          "1121: [[package]]",
          "1122: name = \"proc-macro2\"",
          "1124: source = \"registry+https://github.com/rust-lang/crates.io-index\"",
          "1126: dependencies = [",
          "1127:  \"unicode-ident\",",
          "1128: ]",
          "",
          "[Removed Lines]",
          "1123: version = \"1.0.69\"",
          "1125: checksum = \"134c189feb4956b20f6f547d2cf727d4c0fe06722b20a0eec87ed445a97f92da\"",
          "",
          "[Added Lines]",
          "1138: version = \"1.0.78\"",
          "1140: checksum = \"e2422ad645d89c99f8f3e6b88a9fdeca7fabeac836b1002371c4367c8f984aae\"",
          "",
          "---------------",
          "--- Hunk 23 ---",
          "[Context before]",
          "1139:  \"hex\",",
          "1140:  \"lazy_static\",",
          "1141:  \"procfs-core\",",
          "1143: ]",
          "1145: [[package]]",
          "",
          "[Removed Lines]",
          "1142:  \"rustix 0.38.21\",",
          "",
          "[Added Lines]",
          "1157:  \"rustix 0.38.30\",",
          "",
          "---------------",
          "--- Hunk 24 ---",
          "[Context before]",
          "1156: [[package]]",
          "1157: name = \"quote\"",
          "1159: source = \"registry+https://github.com/rust-lang/crates.io-index\"",
          "1161: dependencies = [",
          "1162:  \"proc-macro2\",",
          "1163: ]",
          "",
          "[Removed Lines]",
          "1158: version = \"1.0.33\"",
          "1160: checksum = \"5267fca4496028628a95160fc423a33e8b2e6af8a5302579e322e4b520293cae\"",
          "",
          "[Added Lines]",
          "1173: version = \"1.0.35\"",
          "1175: checksum = \"291ec9ab5efd934aaf503a6466c5d5251535d108ee747472c3977cc5acc868ef\"",
          "",
          "---------------",
          "--- Hunk 25 ---",
          "[Context before]",
          "1356: [[package]]",
          "1357: name = \"rustix\"",
          "1359: source = \"registry+https://github.com/rust-lang/crates.io-index\"",
          "1361: dependencies = [",
          "1362:  \"bitflags 2.4.1\",",
          "1364:  \"libc\",",
          "1367: ]",
          "1369: [[package]]",
          "",
          "[Removed Lines]",
          "1358: version = \"0.38.21\"",
          "1360: checksum = \"2b426b0506e5d50a7d8dafcf2e81471400deb602392c7dd110815afb4eaf02a3\"",
          "1363:  \"errno 0.3.5\",",
          "1365:  \"linux-raw-sys 0.4.10\",",
          "1366:  \"windows-sys 0.48.0\",",
          "",
          "[Added Lines]",
          "1373: version = \"0.38.30\"",
          "1375: checksum = \"322394588aaf33c24007e8bb3238ee3e4c5c09c084ab32bc73890b99ff326bca\"",
          "1378:  \"errno 0.3.8\",",
          "1380:  \"linux-raw-sys 0.4.13\",",
          "1381:  \"windows-sys 0.52.0\",",
          "",
          "---------------",
          "--- Hunk 26 ---",
          "[Context before]",
          "1381:  \"winapi-util\",",
          "1382: ]",
          "1390: [[package]]",
          "1391: name = \"scratch\"",
          "1392: version = \"1.0.3\"",
          "",
          "[Removed Lines]",
          "1384: [[package]]",
          "1385: name = \"scopeguard\"",
          "1386: version = \"1.1.0\"",
          "1387: source = \"registry+https://github.com/rust-lang/crates.io-index\"",
          "1388: checksum = \"d29ab0c6d3fc0ee92fe66e2d99f700eab17a8d57d1c1d3b748380fb20baa78cd\"",
          "",
          "[Added Lines]",
          "[None]",
          "",
          "---------------",
          "--- Hunk 27 ---",
          "[Context before]",
          "1416: source = \"registry+https://github.com/rust-lang/crates.io-index\"",
          "1417: checksum = \"f04293dc80c3993519f2d7f6f511707ee7094fe0c6d3406feb330cdb3540eba3\"",
          "1418: dependencies = [",
          "1420:  \"cpufeatures\",",
          "1421:  \"digest\",",
          "1422: ]",
          "",
          "[Removed Lines]",
          "1419:  \"cfg-if\",",
          "",
          "[Added Lines]",
          "1428:  \"cfg-if 1.0.0\",",
          "",
          "---------------",
          "--- Hunk 28 ---",
          "[Context before]",
          "1427: source = \"registry+https://github.com/rust-lang/crates.io-index\"",
          "1428: checksum = \"82e6b795fe2e3b1e845bafcb27aa35405c4d47cdfc92af5fc8d3002f76cebdc0\"",
          "1429: dependencies = [",
          "1431:  \"cpufeatures\",",
          "1432:  \"digest\",",
          "1433: ]",
          "",
          "[Removed Lines]",
          "1430:  \"cfg-if\",",
          "",
          "[Added Lines]",
          "1439:  \"cfg-if 1.0.0\",",
          "",
          "---------------",
          "--- Hunk 29 ---",
          "[Context before]",
          "1488: [[package]]",
          "1489: name = \"syn\"",
          "1491: source = \"registry+https://github.com/rust-lang/crates.io-index\"",
          "1493: dependencies = [",
          "1494:  \"proc-macro2\",",
          "1495:  \"quote\",",
          "",
          "[Removed Lines]",
          "1490: version = \"2.0.38\"",
          "1492: checksum = \"e96b79aaa137db8f61e26363a0c9b47d8b4ec75da28b7d1d614c2303e232408b\"",
          "",
          "[Added Lines]",
          "1499: version = \"2.0.48\"",
          "1501: checksum = \"0f3531638e407dfc0814761abb7c00a5b54992b849452a0646b7f65c9f770f3f\"",
          "",
          "---------------",
          "--- Hunk 30 ---",
          "[Context before]",
          "1531: [[package]]",
          "1532: name = \"thiserror\"",
          "1534: source = \"registry+https://github.com/rust-lang/crates.io-index\"",
          "1536: dependencies = [",
          "1537:  \"thiserror-impl\",",
          "1538: ]",
          "1540: [[package]]",
          "1541: name = \"thiserror-impl\"",
          "1543: source = \"registry+https://github.com/rust-lang/crates.io-index\"",
          "1545: dependencies = [",
          "1546:  \"proc-macro2\",",
          "1547:  \"quote\",",
          "1549: ]",
          "1551: [[package]]",
          "",
          "[Removed Lines]",
          "1533: version = \"1.0.38\"",
          "1535: checksum = \"6a9cd18aa97d5c45c6603caea1da6628790b37f7a34b6ca89522331c5180fed0\"",
          "1542: version = \"1.0.38\"",
          "1544: checksum = \"1fb327af4685e4d03fa8cbcf1716380da910eeb2bb8be417e7f9fd3fb164f36f\"",
          "1548:  \"syn 1.0.107\",",
          "",
          "[Added Lines]",
          "1542: version = \"1.0.56\"",
          "1544: checksum = \"d54378c645627613241d077a3a79db965db602882668f9136ac42af9ecb730ad\"",
          "1551: version = \"1.0.56\"",
          "1553: checksum = \"fa0faa943b50f3db30a20aa7e265dbc66076993efed8463e8de414e5d06d3471\"",
          "1557:  \"syn 2.0.48\",",
          "",
          "---------------",
          "--- Hunk 31 ---",
          "[Context before]",
          "1593: source = \"registry+https://github.com/rust-lang/crates.io-index\"",
          "1594: checksum = \"8ce8c33a8d48bd45d624a6e523445fd21ec13d3653cd51f681abf67418f54eb8\"",
          "1595: dependencies = [",
          "1597:  \"pin-project-lite\",",
          "1598:  \"tracing-attributes\",",
          "1599:  \"tracing-core\",",
          "",
          "[Removed Lines]",
          "1596:  \"cfg-if\",",
          "",
          "[Added Lines]",
          "1605:  \"cfg-if 1.0.0\",",
          "",
          "---------------",
          "--- Hunk 32 ---",
          "[Context before]",
          "1652: [[package]]",
          "1653: name = \"walkdir\"",
          "1655: source = \"registry+https://github.com/rust-lang/crates.io-index\"",
          "1657: dependencies = [",
          "1658:  \"same-file\",",
          "1660:  \"winapi-util\",",
          "1661: ]",
          "",
          "[Removed Lines]",
          "1654: version = \"2.3.2\"",
          "1656: checksum = \"808cf2735cd4b6866113f648b791c6adc5714537bc222d9347bb203386ffda56\"",
          "1659:  \"winapi\",",
          "",
          "[Added Lines]",
          "1663: version = \"2.4.0\"",
          "1665: checksum = \"d71d857dc86794ca4c280d616f7da00d2dbfd8cd788846559a6813e6aa4b54ee\"",
          "",
          "---------------",
          "--- Hunk 33 ---",
          "[Context before]",
          "1678: source = \"registry+https://github.com/rust-lang/crates.io-index\"",
          "1679: checksum = \"31f8dcbc21f30d9b8f2ea926ecb58f6b91192c17e9d33594b3df58b2007ca53b\"",
          "1680: dependencies = [",
          "1682:  \"wasm-bindgen-macro\",",
          "1683: ]",
          "",
          "[Removed Lines]",
          "1681:  \"cfg-if\",",
          "",
          "[Added Lines]",
          "1689:  \"cfg-if 1.0.0\",",
          "",
          "---------------",
          "--- Hunk 34 ---",
          "[Context before]",
          "1735:  \"either\",",
          "1736:  \"home\",",
          "1737:  \"once_cell\",",
          "1739:  \"windows-sys 0.48.0\",",
          "1740: ]",
          "",
          "[Removed Lines]",
          "1738:  \"rustix 0.38.21\",",
          "",
          "[Added Lines]",
          "1746:  \"rustix 0.38.30\",",
          "",
          "---------------",
          "--- Hunk 35 ---",
          "[Context before]",
          "1803:  \"windows-targets 0.48.5\",",
          "1804: ]",
          "1806: [[package]]",
          "1807: name = \"windows-targets\"",
          "1808: version = \"0.42.1\"",
          "",
          "[Removed Lines]",
          "[None]",
          "",
          "[Added Lines]",
          "1814: [[package]]",
          "1815: name = \"windows-sys\"",
          "1816: version = \"0.52.0\"",
          "1817: source = \"registry+https://github.com/rust-lang/crates.io-index\"",
          "1818: checksum = \"282be5f36a8ce781fad8c8ae18fa3f9beff57ec1b52cb3de0789201425d9a33d\"",
          "1819: dependencies = [",
          "1820:  \"windows-targets 0.52.0\",",
          "1821: ]",
          "",
          "---------------",
          "--- Hunk 36 ---",
          "[Context before]",
          "1833:  \"windows_x86_64_msvc 0.48.5\",",
          "1834: ]",
          "1836: [[package]]",
          "1837: name = \"windows_aarch64_gnullvm\"",
          "1838: version = \"0.42.1\"",
          "",
          "[Removed Lines]",
          "[None]",
          "",
          "[Added Lines]",
          "1853: [[package]]",
          "1854: name = \"windows-targets\"",
          "1855: version = \"0.52.0\"",
          "1856: source = \"registry+https://github.com/rust-lang/crates.io-index\"",
          "1857: checksum = \"8a18201040b24831fbb9e4eb208f8892e1f50a37feb53cc7ff887feb8f50e7cd\"",
          "1858: dependencies = [",
          "1859:  \"windows_aarch64_gnullvm 0.52.0\",",
          "1860:  \"windows_aarch64_msvc 0.52.0\",",
          "1861:  \"windows_i686_gnu 0.52.0\",",
          "1862:  \"windows_i686_msvc 0.52.0\",",
          "1863:  \"windows_x86_64_gnu 0.52.0\",",
          "1864:  \"windows_x86_64_gnullvm 0.52.0\",",
          "1865:  \"windows_x86_64_msvc 0.52.0\",",
          "1866: ]",
          "",
          "---------------",
          "--- Hunk 37 ---",
          "[Context before]",
          "1845: source = \"registry+https://github.com/rust-lang/crates.io-index\"",
          "1846: checksum = \"2b38e32f0abccf9987a4e3079dfb67dcd799fb61361e53e2882c3cbaf0d905d8\"",
          "1848: [[package]]",
          "1849: name = \"windows_aarch64_msvc\"",
          "1850: version = \"0.42.1\"",
          "",
          "[Removed Lines]",
          "[None]",
          "",
          "[Added Lines]",
          "1880: [[package]]",
          "1881: name = \"windows_aarch64_gnullvm\"",
          "1882: version = \"0.52.0\"",
          "1883: source = \"registry+https://github.com/rust-lang/crates.io-index\"",
          "1884: checksum = \"cb7764e35d4db8a7921e09562a0304bf2f93e0a51bfccee0bd0bb0b666b015ea\"",
          "",
          "---------------",
          "--- Hunk 38 ---",
          "[Context before]",
          "1857: source = \"registry+https://github.com/rust-lang/crates.io-index\"",
          "1858: checksum = \"dc35310971f3b2dbbf3f0690a219f40e2d9afcf64f9ab7cc1be722937c26b4bc\"",
          "1860: [[package]]",
          "1861: name = \"windows_i686_gnu\"",
          "1862: version = \"0.42.1\"",
          "",
          "[Removed Lines]",
          "[None]",
          "",
          "[Added Lines]",
          "1898: [[package]]",
          "1899: name = \"windows_aarch64_msvc\"",
          "1900: version = \"0.52.0\"",
          "1901: source = \"registry+https://github.com/rust-lang/crates.io-index\"",
          "1902: checksum = \"bbaa0368d4f1d2aaefc55b6fcfee13f41544ddf36801e793edbbfd7d7df075ef\"",
          "",
          "---------------",
          "--- Hunk 39 ---",
          "[Context before]",
          "1869: source = \"registry+https://github.com/rust-lang/crates.io-index\"",
          "1870: checksum = \"a75915e7def60c94dcef72200b9a8e58e5091744960da64ec734a6c6e9b3743e\"",
          "1872: [[package]]",
          "1873: name = \"windows_i686_msvc\"",
          "1874: version = \"0.42.1\"",
          "",
          "[Removed Lines]",
          "[None]",
          "",
          "[Added Lines]",
          "1916: [[package]]",
          "1917: name = \"windows_i686_gnu\"",
          "1918: version = \"0.52.0\"",
          "1919: source = \"registry+https://github.com/rust-lang/crates.io-index\"",
          "1920: checksum = \"a28637cb1fa3560a16915793afb20081aba2c92ee8af57b4d5f28e4b3e7df313\"",
          "",
          "---------------",
          "--- Hunk 40 ---",
          "[Context before]",
          "1881: source = \"registry+https://github.com/rust-lang/crates.io-index\"",
          "1882: checksum = \"8f55c233f70c4b27f66c523580f78f1004e8b5a8b659e05a4eb49d4166cca406\"",
          "1884: [[package]]",
          "1885: name = \"windows_x86_64_gnu\"",
          "1886: version = \"0.42.1\"",
          "",
          "[Removed Lines]",
          "[None]",
          "",
          "[Added Lines]",
          "1934: [[package]]",
          "1935: name = \"windows_i686_msvc\"",
          "1936: version = \"0.52.0\"",
          "1937: source = \"registry+https://github.com/rust-lang/crates.io-index\"",
          "1938: checksum = \"ffe5e8e31046ce6230cc7215707b816e339ff4d4d67c65dffa206fd0f7aa7b9a\"",
          "",
          "---------------",
          "--- Hunk 41 ---",
          "[Context before]",
          "1893: source = \"registry+https://github.com/rust-lang/crates.io-index\"",
          "1894: checksum = \"53d40abd2583d23e4718fddf1ebec84dbff8381c07cae67ff7768bbf19c6718e\"",
          "1896: [[package]]",
          "1897: name = \"windows_x86_64_gnullvm\"",
          "1898: version = \"0.42.1\"",
          "",
          "[Removed Lines]",
          "[None]",
          "",
          "[Added Lines]",
          "1952: [[package]]",
          "1953: name = \"windows_x86_64_gnu\"",
          "1954: version = \"0.52.0\"",
          "1955: source = \"registry+https://github.com/rust-lang/crates.io-index\"",
          "1956: checksum = \"3d6fa32db2bc4a2f5abeacf2b69f7992cd09dca97498da74a151a3132c26befd\"",
          "",
          "---------------",
          "--- Hunk 42 ---",
          "[Context before]",
          "1905: source = \"registry+https://github.com/rust-lang/crates.io-index\"",
          "1906: checksum = \"0b7b52767868a23d5bab768e390dc5f5c55825b6d30b86c844ff2dc7414044cc\"",
          "1908: [[package]]",
          "1909: name = \"windows_x86_64_msvc\"",
          "1910: version = \"0.42.1\"",
          "",
          "[Removed Lines]",
          "[None]",
          "",
          "[Added Lines]",
          "1970: [[package]]",
          "1971: name = \"windows_x86_64_gnullvm\"",
          "1972: version = \"0.52.0\"",
          "1973: source = \"registry+https://github.com/rust-lang/crates.io-index\"",
          "1974: checksum = \"1a657e1e9d3f514745a572a6846d3c7aa7dbe1658c056ed9c3344c4109a6949e\"",
          "",
          "---------------",
          "--- Hunk 43 ---",
          "[Context before]",
          "1917: source = \"registry+https://github.com/rust-lang/crates.io-index\"",
          "1918: checksum = \"ed94fce61571a4006852b7389a063ab983c02eb1bb37b47f8272ce92d06d9538\"",
          "1920: [[package]]",
          "1921: name = \"zip\"",
          "1922: version = \"0.5.13\"",
          "",
          "[Removed Lines]",
          "[None]",
          "",
          "[Added Lines]",
          "1988: [[package]]",
          "1989: name = \"windows_x86_64_msvc\"",
          "1990: version = \"0.52.0\"",
          "1991: source = \"registry+https://github.com/rust-lang/crates.io-index\"",
          "1992: checksum = \"dff9641d1cd4be8d1a070daf9e3773c5f67e78b4d9d42263020c057706765c04\"",
          "",
          "---------------"
        ],
        "userspace/ksud/src/module.rs||userspace/ksud/src/module.rs": [
          "File: userspace/ksud/src/module.rs -> userspace/ksud/src/module.rs",
          "--- Hunk 1 ---",
          "[Context before]",
          "3: use crate::{",
          "4:     assets, defs, mount,",
          "5:     restorecon::{restore_syscon, setsyscon},",
          "7: };",
          "9: use anyhow::{anyhow, bail, ensure, Context, Result};",
          "",
          "[Removed Lines]",
          "6:     sepolicy,",
          "",
          "[Added Lines]",
          "6:     sepolicy, utils,",
          "",
          "---------------",
          "--- Hunk 2 ---",
          "[Context before]",
          "14: use std::{",
          "15:     collections::HashMap,",
          "16:     env::var as env_var,",
          "18:     io::Cursor,",
          "19:     path::{Path, PathBuf},",
          "20:     process::{Command, Stdio},",
          "",
          "[Removed Lines]",
          "17:     fs::{remove_dir_all, remove_file, set_permissions, File, Permissions},",
          "",
          "[Added Lines]",
          "17:     fs::{remove_dir_all, remove_file, set_permissions, File, OpenOptions, Permissions},",
          "",
          "---------------",
          "--- Hunk 3 ---",
          "[Context before]",
          "118:     foreach_module(true, f)",
          "119: }",
          "140: fn check_image(img: &str) -> Result<()> {",
          "141:     let result = Command::new(\"e2fsck\")",
          "142:         .args([\"-yf\", img])",
          "",
          "[Removed Lines]",
          "121: fn get_minimal_image_size(img: &str) -> Result<u64> {",
          "122:     check_image(img)?;",
          "124:     let output = Command::new(\"resize2fs\")",
          "125:         .args([\"-P\", img])",
          "126:         .stdout(Stdio::piped())",
          "127:         .output()?;",
          "129:     let output = String::from_utf8_lossy(&output.stdout);",
          "130:     println!(\"- {}\", output.trim());",
          "131:     let regex = regex::Regex::new(r\"filesystem: (\\d+)\")?;",
          "132:     let result = regex",
          "133:         .captures(&output)",
          "134:         .ok_or(anyhow::anyhow!(\"regex not match\"))?;",
          "135:     let result = &result[1];",
          "136:     let result = u64::from_str(result)?;",
          "137:     Ok(result)",
          "138: }",
          "",
          "[Added Lines]",
          "[None]",
          "",
          "---------------",
          "--- Hunk 4 ---",
          "[Context before]",
          "157:     Ok(())",
          "158: }",
          "185: pub fn load_sepolicy_rule() -> Result<()> {",
          "186:     foreach_active_module(|path| {",
          "187:         let rule_file = path.join(\"sepolicy.rule\");",
          "",
          "[Removed Lines]",
          "160: fn grow_image_size(img: &str, extra_size: u64) -> Result<()> {",
          "161:     let minimal_size = get_minimal_image_size(img)?; // the minimal size is in KB",
          "162:     let target_size = minimal_size * 1024 + extra_size;",
          "165:     check_image(img)?;",
          "167:     println!(",
          "168:         \"- Target image size: {}\",",
          "169:         humansize::format_size(target_size, humansize::DECIMAL)",
          "170:     );",
          "171:     let target_size = target_size / 1024 + 1024;",
          "172:     info!(\"resize image to {target_size}K, minimal size is {minimal_size}K\");",
          "173:     let result = Command::new(\"resize2fs\")",
          "174:         .args([img, &format!(\"{target_size}K\")])",
          "175:         .stdout(Stdio::piped())",
          "176:         .status()",
          "177:         .with_context(|| format!(\"Failed to exec resize2fs {img}\"))?;",
          "178:     ensure!(result.success(), \"Failed to resize2fs: {}\", result);",
          "180:     check_image(img)?;",
          "182:     Ok(())",
          "183: }",
          "",
          "[Added Lines]",
          "[None]",
          "",
          "---------------",
          "--- Hunk 5 ---",
          "[Context before]",
          "370:         std::fs::remove_file(tmp_module_path)?;",
          "371:     }",
          "374:     let zip_uncompressed_size = get_zip_uncompressed_size(zip)?;",
          "377:     info!(",
          "378:         \"zip uncompressed size: {}\",",
          "379:         humansize::format_size(zip_uncompressed_size, humansize::DECIMAL)",
          "380:     );",
          "386:     println!(\"- Preparing image\");",
          "387:     println!(",
          "",
          "[Removed Lines]",
          "373:     let default_reserve_size = 256 * 1024 * 1024;",
          "375:     let grow_size = default_reserve_size + zip_uncompressed_size;",
          "381:     info!(",
          "382:         \"grow size: {}\",",
          "383:         humansize::format_size(grow_size, humansize::DECIMAL)",
          "384:     );",
          "",
          "[Added Lines]",
          "[None]",
          "",
          "---------------",
          "--- Hunk 6 ---",
          "[Context before]",
          "389:         humansize::format_size(zip_uncompressed_size, humansize::DECIMAL)",
          "390:     );",
          "392:     if !modules_img_exist && !modules_update_img_exist {",
          "395:         info!(\"Creating brand new module image\");",
          "396:         File::create(tmp_module_img)",
          "397:             .context(\"Failed to create ext4 image file\")?",
          "402:         let result = Command::new(\"mkfs.ext4\")",
          "",
          "[Removed Lines]",
          "398:             .set_len(grow_size)",
          "399:             .context(\"Failed to extend ext4 image\")?;",
          "",
          "[Added Lines]",
          "342:     let sparse_image_size = 256 * (1 << 30); // 256G",
          "349:             .set_len(sparse_image_size)",
          "350:             .context(\"Failed to truncate ext4 image\")?;",
          "",
          "---------------",
          "--- Hunk 7 ---",
          "[Context before]",
          "410:             \"Failed to format ext4 image: {}\",",
          "411:             String::from_utf8(result.stderr).unwrap()",
          "412:         );",
          "415:     } else if modules_update_img_exist {",
          "417:         info!(\"Using existing modules_update.img as tmp image\");",
          "419:             format!(",
          "420:                 \"Failed to copy {} to {}\",",
          "421:                 modules_update_img.display(),",
          "422:                 tmp_module_img",
          "423:             )",
          "424:         })?;",
          "427:     } else {",
          "429:         info!(\"Using existing modules.img as tmp image\");",
          "431:             format!(",
          "432:                 \"Failed to copy {} to {}\",",
          "433:                 modules_img.display(),",
          "434:                 tmp_module_img",
          "435:             )",
          "436:         })?;",
          "439:     }",
          "442:     ensure_dir_exists(module_update_tmp_dir)?;",
          "",
          "[Removed Lines]",
          "414:         check_image(tmp_module_img)?;",
          "418:         std::fs::copy(modules_update_img, tmp_module_img).with_context(|| {",
          "426:         grow_image_size(tmp_module_img, grow_size)?;",
          "430:         std::fs::copy(modules_img, tmp_module_img).with_context(|| {",
          "438:         grow_image_size(tmp_module_img, grow_size)?;",
          "",
          "[Added Lines]",
          "367:         utils::copy_sparse_file(modules_update_img, tmp_module_img).with_context(|| {",
          "377:         utils::copy_sparse_file(modules_img, tmp_module_img).with_context(|| {",
          "386:         if std::fs::metadata(modules_img)?.len() < sparse_image_size {",
          "387:             println!(\"- Truncate legacy image to new size\");",
          "388:             OpenOptions::new()",
          "389:                 .write(true)",
          "390:                 .open(tmp_module_img)",
          "391:                 .context(\"Failed to open ext4 image\")?",
          "392:                 .set_len(sparse_image_size)",
          "393:                 .context(\"Failed to truncate ext4 image\")?;",
          "395:             check_image(tmp_module_img)?;",
          "396:             Command::new(\"resize2fs\")",
          "397:                 .arg(tmp_module_img)",
          "398:                 .stdout(Stdio::piped())",
          "399:                 .status()?;",
          "400:         }",
          "402:     check_image(tmp_module_img)?;",
          "",
          "---------------",
          "--- Hunk 8 ---",
          "[Context before]",
          "474:     if std::fs::rename(tmp_module_img, defs::MODULE_UPDATE_IMG).is_err() {",
          "475:         warn!(\"Rename image failed, try copy it.\");",
          "477:             .with_context(|| \"Failed to copy image.\".to_string())?;",
          "478:         let _ = std::fs::remove_file(tmp_module_img);",
          "479:     }",
          "",
          "[Removed Lines]",
          "476:         std::fs::copy(tmp_module_img, defs::MODULE_UPDATE_IMG)",
          "",
          "[Added Lines]",
          "439:         utils::copy_sparse_file(tmp_module_img, defs::MODULE_UPDATE_IMG)",
          "",
          "---------------",
          "--- Hunk 9 ---",
          "[Context before]",
          "513:             modules_update_img.display(),",
          "514:             modules_update_tmp_img.display()",
          "515:         );",
          "517:     } else {",
          "518:         info!(",
          "519:             \"copy {} to {}\",",
          "520:             modules_img.display(),",
          "521:             modules_update_tmp_img.display()",
          "522:         );",
          "524:     }",
          "",
          "[Removed Lines]",
          "516:         std::fs::copy(modules_update_img, modules_update_tmp_img)?;",
          "523:         std::fs::copy(modules_img, modules_update_tmp_img)?;",
          "",
          "[Added Lines]",
          "479:         utils::copy_sparse_file(modules_update_img, modules_update_tmp_img)?;",
          "486:         utils::copy_sparse_file(modules_img, modules_update_tmp_img)?;",
          "",
          "---------------",
          "--- Hunk 10 ---",
          "[Context before]",
          "535:     if let Err(e) = std::fs::rename(modules_update_tmp_img, defs::MODULE_UPDATE_IMG) {",
          "536:         warn!(\"Rename image failed: {e}, try copy it.\");",
          "538:             .with_context(|| \"Failed to copy image.\".to_string())?;",
          "539:         let _ = std::fs::remove_file(modules_update_tmp_img);",
          "540:     }",
          "",
          "[Removed Lines]",
          "537:         std::fs::copy(modules_update_tmp_img, defs::MODULE_UPDATE_IMG)",
          "",
          "[Added Lines]",
          "500:         utils::copy_sparse_file(modules_update_tmp_img, defs::MODULE_UPDATE_IMG)",
          "",
          "---------------"
        ],
        "userspace/ksud/src/utils.rs||userspace/ksud/src/utils.rs": [
          "File: userspace/ksud/src/utils.rs -> userspace/ksud/src/utils.rs",
          "--- Hunk 1 ---",
          "[Context before]",
          "12: #[cfg(unix)]",
          "13: use std::os::unix::prelude::PermissionsExt;",
          "15: pub fn ensure_clean_dir(dir: &str) -> Result<()> {",
          "16:     let path = Path::new(dir);",
          "17:     log::debug!(\"ensure_clean_dir: {}\", path.display());",
          "",
          "[Removed Lines]",
          "[None]",
          "",
          "[Added Lines]",
          "15: use hole_punch::*;",
          "16: use std::io::{Read, Seek, SeekFrom};",
          "",
          "---------------",
          "--- Hunk 2 ---",
          "[Context before]",
          "182:     }",
          "183:     \"\"",
          "184: }",
          "",
          "[Removed Lines]",
          "[None]",
          "",
          "[Added Lines]",
          "190: pub fn copy_sparse_file<P: AsRef<Path>, Q: AsRef<Path>>(src: P, dst: Q) -> Result<()> {",
          "191:     let mut src_file = File::open(src.as_ref())?;",
          "192:     let mut dst_file = OpenOptions::new()",
          "193:         .write(true)",
          "194:         .create(true)",
          "195:         .truncate(true)",
          "196:         .open(dst.as_ref())?;",
          "198:     dst_file.set_len(src_file.metadata()?.len())?;",
          "200:     let segments = src_file.scan_chunks()?;",
          "201:     for segment in segments {",
          "202:         if let SegmentType::Data = segment.segment_type {",
          "203:             let start = segment.start;",
          "204:             let end = segment.end;",
          "206:             src_file.seek(SeekFrom::Start(start))?;",
          "207:             dst_file.seek(SeekFrom::Start(start))?;",
          "209:             let mut buffer = [0; 4096];",
          "210:             let mut total_bytes_copied = 0;",
          "212:             while total_bytes_copied < end - start {",
          "213:                 let bytes_to_read =",
          "214:                     std::cmp::min(buffer.len() as u64, end - start - total_bytes_copied);",
          "215:                 let bytes_read = src_file.read(&mut buffer[..bytes_to_read as usize])?;",
          "217:                 if bytes_read == 0 {",
          "218:                     break;",
          "219:                 }",
          "221:                 dst_file.write_all(&buffer[..bytes_read])?;",
          "222:                 total_bytes_copied += bytes_read as u64;",
          "223:             }",
          "224:         }",
          "225:     }",
          "227:     Ok(())",
          "228: }",
          "",
          "---------------"
        ]
      }
    },
    {
      "candidate_hash": "402bf8858db78c644925bf2afa86b1a989b42b57",
      "candidate_info": {
        "commit_hash": "402bf8858db78c644925bf2afa86b1a989b42b57",
        "repo": "tiann/kernelsu",
        "commit_url": "https://github.com/tiann/kernelsu/commit/402bf8858db78c644925bf2afa86b1a989b42b57",
        "files": [
          "userspace/ksud/Cargo.lock",
          "userspace/ksud/Cargo.toml"
        ],
        "message": "build(deps): bump the crates group across 1 directory with 9 updates (#2002)\n\nBumps the crates group with 9 updates in the /userspace/ksud directory:\n\n| Package | From | To |\n| --- | --- | --- |\n| [zip](https://github.com/zip-rs/zip2) | `2.1.6` | `2.2.0` |\n| [libc](https://github.com/rust-lang/libc) | `0.2.156` | `0.2.158` |\n| [which](https://github.com/harryfei/which-rs) | `6.0.2` | `6.0.3` |\n| [cc](https://github.com/rust-lang/cc-rs) | `1.1.13` | `1.1.14` |\n| [flate2](https://github.com/rust-lang/flate2-rs) | `1.0.31` | `1.0.32`\n|\n| [quote](https://github.com/dtolnay/quote) | `1.0.36` | `1.0.37` |\n| [syn](https://github.com/dtolnay/syn) | `2.0.74` | `2.0.75` |\n| [tokio](https://github.com/tokio-rs/tokio) | `1.39.2` | `1.39.3` |\n| [unicode-xid](https://github.com/unicode-rs/unicode-xid) | `0.2.4` |\n`0.2.5` |\n\n\nUpdates `zip` from 2.1.6 to 2.2.0\n<details>\n<summary>Release notes</summary>\n<p><em>Sourced from <a\nhref=\"https://github.com/zip-rs/zip2/releases\">zip's\nreleases</a>.</em></p>\n<blockquote>\n<h2>v2.2.0</h2>\n<h3><!-- raw HTML omitted -->\ud83d\ude80 Features</h3>\n<ul>\n<li>Expose <code>ZipArchive::central_directory_start</code> (<a\nhref=\"https://redirect.github.com/zip-rs/zip2/pull/232\">#232</a>)</li>\n</ul>\n</blockquote>\n</details>\n<details>\n<summary>Changelog</summary>\n<p><em>Sourced from <a\nhref=\"https://github.com/zip-rs/zip2/blob/master/CHANGELOG.md\">zip's\nchangelog</a>.</em></p>\n<blockquote>\n<h2><a\nhref=\"https://github.com/zip-rs/zip2/compare/v2.1.6...v2.2.0\">2.2.0</a>\n- 2024-08-11</h2>\n<h3><!-- raw HTML omitted -->\ud83d\ude80 Features</h3>\n<ul>\n<li>Expose <code>ZipArchive::central_directory_start</code> (<a\nhref=\"https://redirect.github.com/zip-rs/zip2/pull/232\">#232</a>)</li>\n</ul>\n</blockquote>\n</details>\n<details>\n<summary>Commits</summary>\n<ul>\n<li><a\nhref=\"https://github.com/zip-rs/zip2/commit/6d3945645b7f3805068dd8c50d4fe56a66651069\"><code>6d39456</code></a>\nchore: release (<a\nhref=\"https://redirect.github.com/zip-rs/zip2/issues/234\">#234</a>)</li>\n<li><a\nhref=\"https://github.com/zip-rs/zip2/commit/af33ed343da5769e0587d638e435d67151990f10\"><code>af33ed3</code></a>\nfeat: Expose <code>ZipArchive::central_directory_start</code> (<a\nhref=\"https://redirect.github.com/zip-rs/zip2/issues/232\">#232</a>)</li>\n<li><a\nhref=\"https://github.com/zip-rs/zip2/commit/3f6768ec5a51605bcb3e7a636c75ac98137223fb\"><code>3f6768e</code></a>\ndocs: Update list of supported features (<a\nhref=\"https://redirect.github.com/zip-rs/zip2/issues/230\">#230</a>)</li>\n<li><a\nhref=\"https://github.com/zip-rs/zip2/commit/3a427c4f781719091ca7a5b58617dc31eb9a25cb\"><code>3a427c4</code></a>\ndeps: Update dependencies with <code>cargo upgrade</code></li>\n<li>See full diff in <a\nhref=\"https://github.com/zip-rs/zip2/compare/v2.1.6...v2.2.0\">compare\nview</a></li>\n</ul>\n</details>\n<br />\n\nUpdates `libc` from 0.2.156 to 0.2.158\n<details>\n<summary>Release notes</summary>\n<p><em>Sourced from <a\nhref=\"https://github.com/rust-lang/libc/releases\">libc's\nreleases</a>.</em></p>\n<blockquote>\n<h2>0.2.158</h2>\n<h3>Other</h3>\n<ul>\n<li>WASI: fix missing <code>Iterator</code> with\n<code>rustc-dep-of-std</code> in <a\nhref=\"https://redirect.github.com/rust-lang/libc/pull/3856#event-13924913068\">rust-lang/libc#3856</a></li>\n</ul>\n<h2>0.2.157</h2>\n<h3>Added</h3>\n<ul>\n<li>Apple: add <code>_NSGetArgv</code>, <code>_NSGetArgc</code> and\n<code>_NSGetProgname</code> in <a\nhref=\"https://redirect.github.com/rust-lang/libc/pull/3702\">rust-lang/libc#3702</a></li>\n<li>Build: add <code>RUSTC_WRAPPER</code> support in <a\nhref=\"https://redirect.github.com/rust-lang/libc/pull/3845\">rust-lang/libc#3845</a></li>\n<li>FreeBSD: add <code>execvpe</code> support from 14.1 release in <a\nhref=\"https://redirect.github.com/rust-lang/libc/pull/3745\">rust-lang/libc#3745</a></li>\n<li>Fuchsia: add <code>SO_BINDTOIFINDEX</code></li>\n<li>Linux: add <code>klogctl</code> in <a\nhref=\"https://redirect.github.com/rust-lang/libc/pull/3777\">rust-lang/libc#3777</a></li>\n<li>MacOS: add <code>fcntl</code> OFD commands in <a\nhref=\"https://redirect.github.com/rust-lang/libc/pull/3563\">rust-lang/libc#3563</a></li>\n<li>NetBSD: add <code>_lwp_park</code> in <a\nhref=\"https://redirect.github.com/rust-lang/libc/pull/3721\">rust-lang/libc#3721</a></li>\n<li>Solaris: add missing networking support in <a\nhref=\"https://redirect.github.com/rust-lang/libc/pull/3717\">rust-lang/libc#3717</a></li>\n<li>Unix: add <code>pthread_equal</code> in <a\nhref=\"https://redirect.github.com/rust-lang/libc/pull/3773\">rust-lang/libc#3773</a></li>\n<li>WASI: add <code>select</code>, <code>FD_SET</code>,\n<code>FD_ZERO</code>, <code>FD_ISSET </code> in <a\nhref=\"https://redirect.github.com/rust-lang/libc/pull/3681\">rust-lang/libc#3681</a></li>\n</ul>\n<h3>Fixed</h3>\n<ul>\n<li>TEEOS: fix octal notation for <code>O_*</code> constants in <a\nhref=\"https://redirect.github.com/rust-lang/libc/pull/3841\">rust-lang/libc#3841</a></li>\n</ul>\n<h3>Changed</h3>\n<ul>\n<li>FreeBSD: always use freebsd12 when <code>rustc_dep_of_std</code> is\nset in <a\nhref=\"https://redirect.github.com/rust-lang/libc/pull/3723\">rust-lang/libc#3723</a></li>\n</ul>\n</blockquote>\n</details>\n<details>\n<summary>Changelog</summary>\n<p><em>Sourced from <a\nhref=\"https://github.com/rust-lang/libc/blob/0.2.158/CHANGELOG.md\">libc's\nchangelog</a>.</em></p>\n<blockquote>\n<h2><a\nhref=\"https://github.com/rust-lang/libc/compare/0.2.157...0.2.158\">0.2.158</a>\n- 2024-08-19</h2>\n<h3>Other</h3>\n<ul>\n<li>WASI: fix missing <code>Iterator</code> with\n<code>rustc-dep-of-std</code> in <a\nhref=\"https://redirect.github.com/rust-lang/libc/pull/3856#event-13924913068\">rust-lang/libc#3856</a></li>\n</ul>\n<h2><a\nhref=\"https://github.com/rust-lang/libc/compare/0.2.156...0.2.157\">0.2.157</a>\n- 2024-08-17</h2>\n<h3>Added</h3>\n<ul>\n<li>Apple: add <code>_NSGetArgv</code>, <code>_NSGetArgc</code> and\n<code>_NSGetProgname</code> in <a\nhref=\"https://redirect.github.com/rust-lang/libc/pull/3702\">rust-lang/libc#3702</a></li>\n<li>Build: add <code>RUSTC_WRAPPER</code> support in <a\nhref=\"https://redirect.github.com/rust-lang/libc/pull/3845\">rust-lang/libc#3845</a></li>\n<li>FreeBSD: add <code>execvpe</code> support from 14.1 release in <a\nhref=\"https://redirect.github.com/rust-lang/libc/pull/3745\">rust-lang/libc#3745</a></li>\n<li>Fuchsia: add <code>SO_BINDTOIFINDEX</code></li>\n<li>Linux: add <code>klogctl</code> in <a\nhref=\"https://redirect.github.com/rust-lang/libc/pull/3777\">rust-lang/libc#3777</a></li>\n<li>MacOS: add <code>fcntl</code> OFD commands in <a\nhref=\"https://redirect.github.com/rust-lang/libc/pull/3563\">rust-lang/libc#3563</a></li>\n<li>NetBSD: add <code>_lwp_park</code> in <a\nhref=\"https://redirect.github.com/rust-lang/libc/pull/3721\">rust-lang/libc#3721</a></li>\n<li>Solaris: add missing networking support in <a\nhref=\"https://redirect.github.com/rust-lang/libc/pull/3717\">rust-lang/libc#3717</a></li>\n<li>Unix: add <code>pthread_equal</code> in <a\nhref=\"https://redirect.github.com/rust-lang/libc/pull/3773\">rust-lang/libc#3773</a></li>\n<li>WASI: add <code>select</code>, <code>FD_SET</code>,\n<code>FD_ZERO</code>, <code>FD_ISSET </code> in <a\nhref=\"https://redirect.github.com/rust-lang/libc/pull/3681\">rust-lang/libc#3681</a></li>\n</ul>\n<h3>Fixed</h3>\n<ul>\n<li>TEEOS: fix octal notation for <code>O_*</code> constants in <a\nhref=\"https://redirect.github.com/rust-lang/libc/pull/3841\">rust-lang/libc#3841</a></li>\n</ul>\n<h3>Changed</h3>\n<ul>\n<li>FreeBSD: always use freebsd12 when <code>rustc_dep_of_std</code> is\nset in <a\nhref=\"https://redirect.github.com/rust-lang/libc/pull/3723\">rust-lang/libc#3723</a></li>\n</ul>\n</blockquote>\n</details>\n<details>\n<summary>Commits</summary>\n<ul>\n<li><a\nhref=\"https://github.com/rust-lang/libc/commit/c809c58c6873c05c9aa8cb3b9142f6c4d2818e57\"><code>c809c58</code></a>\nMerge pull request <a\nhref=\"https://redirect.github.com/rust-lang/libc/issues/3857\">#3857</a>\nfrom rust-lang/release-plz-2024-08-19T05-21-04Z</li>\n<li><a\nhref=\"https://github.com/rust-lang/libc/commit/0d28de58336f62ba1c21fe29125104c27bd4c19e\"><code>0d28de5</code></a>\nUpdate CHANGELOG.md</li>\n<li><a\nhref=\"https://github.com/rust-lang/libc/commit/284bd9e94d86a0f16235fe96d6390968855b11a5\"><code>284bd9e</code></a>\nchore: release</li>\n<li><a\nhref=\"https://github.com/rust-lang/libc/commit/268268146e312e4abafc6048b486db82afb540e3\"><code>2682681</code></a>\nMerge pull request <a\nhref=\"https://redirect.github.com/rust-lang/libc/issues/3856\">#3856</a>\nfrom tgross35/backport-wasi-fix</li>\n<li><a\nhref=\"https://github.com/rust-lang/libc/commit/71440ab668b710c986fd02bfe901eaa573a66444\"><code>71440ab</code></a>\n[wasi] Add use core::iter::Iterator;</li>\n<li><a\nhref=\"https://github.com/rust-lang/libc/commit/6637dbe2365d0649ae592c9533a2f7b93ba7200a\"><code>6637dbe</code></a>\nMerge pull request <a\nhref=\"https://redirect.github.com/rust-lang/libc/issues/3830\">#3830</a>\nfrom rust-lang/release-plz-2024-08-15T20-50-10Z</li>\n<li><a\nhref=\"https://github.com/rust-lang/libc/commit/51d81e3be8d56fd4dbf2d56cf8b9ea6b3f453150\"><code>51d81e3</code></a>\nUpdate CHANGELOG.md</li>\n<li><a\nhref=\"https://github.com/rust-lang/libc/commit/217b2ab86e6a43a8665225ae6552b980f56010fe\"><code>217b2ab</code></a>\nchore: release</li>\n<li><a\nhref=\"https://github.com/rust-lang/libc/commit/6d2b8a07676dd081b4779d9a91466e0f37a7893d\"><code>6d2b8a0</code></a>\nMerge pull request <a\nhref=\"https://redirect.github.com/rust-lang/libc/issues/3852\">#3852</a>\nfrom tgross35/backport-onion</li>\n<li><a\nhref=\"https://github.com/rust-lang/libc/commit/64ee9dfc5e1026b6ff1813cfde54dc8c3646c947\"><code>64ee9df</code></a>\nMerge pull request <a\nhref=\"https://redirect.github.com/rust-lang/libc/issues/3851\">#3851</a>\nfrom tgross35/backport-romaine</li>\n<li>Additional commits viewable in <a\nhref=\"https://github.com/rust-lang/libc/compare/0.2.156...0.2.158\">compare\nview</a></li>\n</ul>\n</details>\n<br />\n\nUpdates `which` from 6.0.2 to 6.0.3\n<details>\n<summary>Release notes</summary>\n<p><em>Sourced from <a\nhref=\"https://github.com/harryfei/which-rs/releases\">which's\nreleases</a>.</em></p>\n<blockquote>\n<h2>6.0.3</h2>\n<ul>\n<li>Enhance <code>tracing</code> feature with some <code>debug</code>\nlevel logs for higher level logic.</li>\n</ul>\n</blockquote>\n</details>\n<details>\n<summary>Changelog</summary>\n<p><em>Sourced from <a\nhref=\"https://github.com/harryfei/which-rs/blob/master/CHANGELOG.md\">which's\nchangelog</a>.</em></p>\n<blockquote>\n<h2>6.0.3</h2>\n<ul>\n<li>Enhance <code>tracing</code> feature with some <code>debug</code>\nlevel logs for higher level logic.</li>\n</ul>\n</blockquote>\n</details>\n<details>\n<summary>Commits</summary>\n<ul>\n<li><a\nhref=\"https://github.com/harryfei/which-rs/commit/efd571d4b5baf4a5a44f4f2c42c04ce32050c13e\"><code>efd571d</code></a>\nbump version, update changelog</li>\n<li><a\nhref=\"https://github.com/harryfei/which-rs/commit/d95a471a9fbc2dbce4a0ea4be989067e41cd5b96\"><code>d95a471</code></a>\nAdd more high level debug logs</li>\n<li><a\nhref=\"https://github.com/harryfei/which-rs/commit/7b6c81c1979820cf43405d0ae2fc4ec6e5886bab\"><code>7b6c81c</code></a>\nadd changelog entry</li>\n<li>See full diff in <a\nhref=\"https://github.com/harryfei/which-rs/compare/6.0.2...6.0.3\">compare\nview</a></li>\n</ul>\n</details>\n<br />\n\nUpdates `cc` from 1.1.13 to 1.1.14\n<details>\n<summary>Release notes</summary>\n<p><em>Sourced from <a\nhref=\"https://github.com/rust-lang/cc-rs/releases\">cc's\nreleases</a>.</em></p>\n<blockquote>\n<h2>cc-v1.1.14</h2>\n<h3>Other</h3>\n<ul>\n<li>allow finding tools from path if VisualStudioDir is set</li>\n</ul>\n</blockquote>\n</details>\n<details>\n<summary>Changelog</summary>\n<p><em>Sourced from <a\nhref=\"https://github.com/rust-lang/cc-rs/blob/main/CHANGELOG.md\">cc's\nchangelog</a>.</em></p>\n<blockquote>\n<h2><a\nhref=\"https://github.com/rust-lang/cc-rs/compare/cc-v1.1.13...cc-v1.1.14\">1.1.14</a>\n- 2024-08-23</h2>\n<h3>Other</h3>\n<ul>\n<li>allow finding tools from path if VisualStudioDir is set</li>\n</ul>\n</blockquote>\n</details>\n<details>\n<summary>Commits</summary>\n<ul>\n<li><a\nhref=\"https://github.com/rust-lang/cc-rs/commit/ff5fc7a69a9e41fd979073fdf8851a2b05306bd9\"><code>ff5fc7a</code></a>\nchore: release (<a\nhref=\"https://redirect.github.com/rust-lang/cc-rs/issues/1191\">#1191</a>)</li>\n<li><a\nhref=\"https://github.com/rust-lang/cc-rs/commit/5b4bd71155579d1b477e5f6e9c630bfb686a6352\"><code>5b4bd71</code></a>\nMerge pull request <a\nhref=\"https://redirect.github.com/rust-lang/cc-rs/issues/1190\">#1190</a>\nfrom russelltg/msvc_in_customcommand</li>\n<li><a\nhref=\"https://github.com/rust-lang/cc-rs/commit/c2aa0d36952250b45000b5d6cd6df19e049ca8d5\"><code>c2aa0d3</code></a>\nmsvc: allow finding tools from path if VisualStudioDir is set</li>\n<li>See full diff in <a\nhref=\"https://github.com/rust-lang/cc-rs/compare/cc-v1.1.13...cc-v1.1.14\">compare\nview</a></li>\n</ul>\n</details>\n<br />\n\nUpdates `flate2` from 1.0.31 to 1.0.32\n<details>\n<summary>Release notes</summary>\n<p><em>Sourced from <a\nhref=\"https://github.com/rust-lang/flate2-rs/releases\">flate2's\nreleases</a>.</em></p>\n<blockquote>\n<h2>1.0.32 - turn panic into error</h2>\n<h2>What's Changed</h2>\n<h3>Fix</h3>\n<ul>\n<li>Return error instead of packing on Z_MEM_ERROR by <a\nhref=\"https://github.com/crazymerlyn\"><code>@\u200bcrazymerlyn</code></a> in\n<a\nhref=\"https://redirect.github.com/rust-lang/flate2-rs/pull/423\">rust-lang/flate2-rs#423</a></li>\n</ul>\n<h3>Other</h3>\n<ul>\n<li>prepare new release by <a\nhref=\"https://github.com/Byron\"><code>@\u200bByron</code></a> in <a\nhref=\"https://redirect.github.com/rust-lang/flate2-rs/pull/416\">rust-lang/flate2-rs#416</a></li>\n<li>update miniz_oxide dependency to 0.8.x by <a\nhref=\"https://github.com/oyvindln\"><code>@\u200boyvindln</code></a> in <a\nhref=\"https://redirect.github.com/rust-lang/flate2-rs/pull/420\">rust-lang/flate2-rs#420</a></li>\n<li>update maintenance guide with recent news by <a\nhref=\"https://github.com/Byron\"><code>@\u200bByron</code></a> in <a\nhref=\"https://redirect.github.com/rust-lang/flate2-rs/pull/419\">rust-lang/flate2-rs#419</a></li>\n<li>Check minimal version of Rust that compiles by <a\nhref=\"https://github.com/jongiddy\"><code>@\u200bjongiddy</code></a> in <a\nhref=\"https://redirect.github.com/rust-lang/flate2-rs/pull/421\">rust-lang/flate2-rs#421</a></li>\n<li>Remove non-existent build in CI by <a\nhref=\"https://github.com/jongiddy\"><code>@\u200bjongiddy</code></a> in <a\nhref=\"https://redirect.github.com/rust-lang/flate2-rs/pull/422\">rust-lang/flate2-rs#422</a></li>\n</ul>\n<h2>New Contributors</h2>\n<ul>\n<li><a\nhref=\"https://github.com/crazymerlyn\"><code>@\u200bcrazymerlyn</code></a>\nmade their first contribution in <a\nhref=\"https://redirect.github.com/rust-lang/flate2-rs/pull/423\">rust-lang/flate2-rs#423</a></li>\n</ul>\n<p><strong>Full Changelog</strong>: <a\nhref=\"https://github.com/rust-lang/flate2-rs/compare/1.0.31...1.0.32\">https://github.com/rust-lang/flate2-rs/compare/1.0.31...1.0.32</a></p>\n</blockquote>\n</details>\n<details>\n<summary>Changelog</summary>\n<p><em>Sourced from <a\nhref=\"https://github.com/rust-lang/flate2-rs/blob/main/CHANGELOG.md\">flate2's\nchangelog</a>.</em></p>\n<blockquote>\n<h1>Changelog</h1>\n<p>All notable changes to this project will be documented in this\nfile.</p>\n<p>The format is based on <a\nhref=\"https://keepachangelog.com/en/1.0.0/\">Keep a Changelog</a>,\nand this project adheres to <a\nhref=\"https://semver.org/spec/v2.0.0.html\">Semantic Versioning</a>.</p>\n</blockquote>\n</details>\n<details>\n<summary>Commits</summary>\n<ul>\n<li><a\nhref=\"https://github.com/rust-lang/flate2-rs/commit/367ec7476817925ef3215196826828e814b035be\"><code>367ec74</code></a>\nMerge pull request <a\nhref=\"https://redirect.github.com/rust-lang/flate2-rs/issues/423\">#423</a>\nfrom crazymerlyn/memerror</li>\n<li><a\nhref=\"https://github.com/rust-lang/flate2-rs/commit/6084e47797d58616f1c7adf818a048e8b0f015ad\"><code>6084e47</code></a>\nBump version</li>\n<li><a\nhref=\"https://github.com/rust-lang/flate2-rs/commit/d0fdac59646ea0d6cc61522405dada6113b0fc58\"><code>d0fdac5</code></a>\nReturn error instead of packing on Z_MEM_ERROR</li>\n<li><a\nhref=\"https://github.com/rust-lang/flate2-rs/commit/5d1ecf6a979974cbf92f176628fb600440190aa7\"><code>5d1ecf6</code></a>\nMerge pull request <a\nhref=\"https://redirect.github.com/rust-lang/flate2-rs/issues/422\">#422</a>\nfrom jongiddy/fix-main-ci</li>\n<li><a\nhref=\"https://github.com/rust-lang/flate2-rs/commit/35b4a63dc3128e8f19ea53761abacdafeb6e13ab\"><code>35b4a63</code></a>\nRemove non-existent build in CI</li>\n<li><a\nhref=\"https://github.com/rust-lang/flate2-rs/commit/d616177ca3813066d7e92a29779706eb4b5a9ea2\"><code>d616177</code></a>\nMerge pull request <a\nhref=\"https://redirect.github.com/rust-lang/flate2-rs/issues/421\">#421</a>\nfrom jongiddy/test-minimal-version</li>\n<li><a\nhref=\"https://github.com/rust-lang/flate2-rs/commit/140b285de79f6bffc9cc63e665851ce5f6e03586\"><code>140b285</code></a>\nCheck minimal version of Rust that compiles</li>\n<li><a\nhref=\"https://github.com/rust-lang/flate2-rs/commit/74b3c7337123c36d9995e8209e206c510c808cfb\"><code>74b3c73</code></a>\nMerge pull request <a\nhref=\"https://redirect.github.com/rust-lang/flate2-rs/issues/419\">#419</a>\nfrom Byron/maintenance-guide</li>\n<li><a\nhref=\"https://github.com/rust-lang/flate2-rs/commit/af8bcdb7441c5ad9e108dea0d23b4582a1eb663d\"><code>af8bcdb</code></a>\nupdate maintenance guide with recent news</li>\n<li><a\nhref=\"https://github.com/rust-lang/flate2-rs/commit/dc6cab461c6c132ccd0fa9ee5c4604f0fd1bc9a2\"><code>dc6cab4</code></a>\nMerge pull request <a\nhref=\"https://redirect.github.com/rust-lang/flate2-rs/issues/420\">#420</a>\nfrom oyvindln/update_miniz_oxide</li>\n<li>Additional commits viewable in <a\nhref=\"https://github.com/rust-lang/flate2-rs/compare/1.0.31...1.0.32\">compare\nview</a></li>\n</ul>\n</details>\n<br />\n\nUpdates `quote` from 1.0.36 to 1.0.37\n<details>\n<summary>Release notes</summary>\n<p><em>Sourced from <a\nhref=\"https://github.com/dtolnay/quote/releases\">quote's\nreleases</a>.</em></p>\n<blockquote>\n<h2>1.0.37</h2>\n<ul>\n<li>Implement ToTokens for CStr and CString (<a\nhref=\"https://redirect.github.com/dtolnay/quote/issues/283\">#283</a>)</li>\n</ul>\n</blockquote>\n</details>\n<details>\n<summary>Commits</summary>\n<ul>\n<li><a\nhref=\"https://github.com/dtolnay/quote/commit/b1ebffa035363a430862e033aa3268e8cb17affa\"><code>b1ebffa</code></a>\nRelease 1.0.37</li>\n<li><a\nhref=\"https://github.com/dtolnay/quote/commit/43acd77961424b3cb5035688f74d14d556eefe90\"><code>43acd77</code></a>\nDelete unneeded use of <code>ref</code></li>\n<li><a\nhref=\"https://github.com/dtolnay/quote/commit/9382c2182ea10f8e0f90d1e5f15ca3f20a777dff\"><code>9382c21</code></a>\nMerge pull request <a\nhref=\"https://redirect.github.com/dtolnay/quote/issues/283\">#283</a>\nfrom dtolnay/cstr</li>\n<li><a\nhref=\"https://github.com/dtolnay/quote/commit/6ac432877bbfe43892677e32af7e3f0e28b6333e\"><code>6ac4328</code></a>\nAdd C string tests</li>\n<li><a\nhref=\"https://github.com/dtolnay/quote/commit/9fb0591a17893eea81260351c6eb431e1fd83524\"><code>9fb0591</code></a>\nImplement ToTokens for CStr and CString</li>\n<li><a\nhref=\"https://github.com/dtolnay/quote/commit/ba7a9d08c9acba8ae97926dcc18822b20441c0fa\"><code>ba7a9d0</code></a>\nOrganize test imports</li>\n<li><a\nhref=\"https://github.com/dtolnay/quote/commit/aa9970f9838a5b6dd5438c662921470f873e2b3a\"><code>aa9970f</code></a>\nInline the macro that generates primitive impls</li>\n<li><a\nhref=\"https://github.com/dtolnay/quote/commit/ba411091c98c311526774adde73e724448836337\"><code>ba41109</code></a>\nMerge pull request <a\nhref=\"https://redirect.github.com/dtolnay/quote/issues/282\">#282</a>\nfrom dtolnay/tokens</li>\n<li><a\nhref=\"https://github.com/dtolnay/quote/commit/c77340a4c6869690ad7b40069e8ca1cb90e4abb8\"><code>c77340a</code></a>\nConsistently use 'tokens' as the name of the &amp;mut TokenStream\narg</li>\n<li><a\nhref=\"https://github.com/dtolnay/quote/commit/a4a0abf12fa0137eca5aaa74fe88ca6694e78746\"><code>a4a0abf</code></a>\nMerge pull request <a\nhref=\"https://redirect.github.com/dtolnay/quote/issues/281\">#281</a>\nfrom dtolnay/char</li>\n<li>Additional commits viewable in <a\nhref=\"https://github.com/dtolnay/quote/compare/1.0.36...1.0.37\">compare\nview</a></li>\n</ul>\n</details>\n<br />\n\nUpdates `syn` from 2.0.74 to 2.0.75\n<details>\n<summary>Release notes</summary>\n<p><em>Sourced from <a\nhref=\"https://github.com/dtolnay/syn/releases\">syn's\nreleases</a>.</em></p>\n<blockquote>\n<h2>2.0.75</h2>\n<ul>\n<li>Automatically fill in missing turbofish when printing ExprPath and\nother paths in expression position (<a\nhref=\"https://redirect.github.com/dtolnay/syn/issues/1722\">#1722</a>)</li>\n</ul>\n</blockquote>\n</details>\n<details>\n<summary>Commits</summary>\n<ul>\n<li><a\nhref=\"https://github.com/dtolnay/syn/commit/d1746fe29d18ca704ed285844c365a14a77e8757\"><code>d1746fe</code></a>\nRelease 2.0.75</li>\n<li><a\nhref=\"https://github.com/dtolnay/syn/commit/b6936825a637376dd7584653e13776034759d3fd\"><code>b693682</code></a>\nMerge pull request <a\nhref=\"https://redirect.github.com/dtolnay/syn/issues/1722\">#1722</a>\nfrom dtolnay/exprpath</li>\n<li><a\nhref=\"https://github.com/dtolnay/syn/commit/e459ee75bb60f54ce3ca1fb42f515936c06582a4\"><code>e459ee7</code></a>\nInsert turbofish into paths in expression position</li>\n<li><a\nhref=\"https://github.com/dtolnay/syn/commit/3bb65aaae153130c3053bc691080aad9eb60a55c\"><code>3bb65aa</code></a>\nAdd mod-style printing for paths that cannot contain generic args</li>\n<li><a\nhref=\"https://github.com/dtolnay/syn/commit/ae8c84ab744b8c95d6b2607d3987590c12ef5280\"><code>ae8c84a</code></a>\nHandwrite ToTokens impl for Meta</li>\n<li><a\nhref=\"https://github.com/dtolnay/syn/commit/5dbfeae027d3d5356289bbd37f5daede30a838cc\"><code>5dbfeae</code></a>\nName the expr_style argument at all call sites of\npath::parsing::qpath</li>\n<li>See full diff in <a\nhref=\"https://github.com/dtolnay/syn/compare/2.0.74...2.0.75\">compare\nview</a></li>\n</ul>\n</details>\n<br />\n\nUpdates `tokio` from 1.39.2 to 1.39.3\n<details>\n<summary>Release notes</summary>\n<p><em>Sourced from <a\nhref=\"https://github.com/tokio-rs/tokio/releases\">tokio's\nreleases</a>.</em></p>\n<blockquote>\n<h2>Tokio v1.39.3</h2>\n<h1>1.39.3 (August 17th, 2024)</h1>\n<p>This release fixes a regression where the unix socket api stopped\naccepting the abstract socket namespace. (<a\nhref=\"https://redirect.github.com/tokio-rs/tokio/issues/6772\">#6772</a>)</p>\n<p><a\nhref=\"https://redirect.github.com/tokio-rs/tokio/issues/6772\">#6772</a>:\n<a\nhref=\"https://redirect.github.com/tokio-rs/tokio/pull/6772\">tokio-rs/tokio#6772</a></p>\n</blockquote>\n</details>\n<details>\n<summary>Commits</summary>\n<ul>\n<li><a\nhref=\"https://github.com/tokio-rs/tokio/commit/3d439ab7119daba4afaed4cc5a4d99f440adc88b\"><code>3d439ab</code></a>\nchore: prepare Tokio v1.39.3 (<a\nhref=\"https://redirect.github.com/tokio-rs/tokio/issues/6782\">#6782</a>)</li>\n<li><a\nhref=\"https://github.com/tokio-rs/tokio/commit/b2ea40bb543a5116109b37e1fd64713c116e4312\"><code>b2ea40b</code></a>\nnet: add handling for abstract socket name (<a\nhref=\"https://redirect.github.com/tokio-rs/tokio/issues/6772\">#6772</a>)</li>\n<li>See full diff in <a\nhref=\"https://github.com/tokio-rs/tokio/compare/tokio-1.39.2...tokio-1.39.3\">compare\nview</a></li>\n</ul>\n</details>\n<br />\n\nUpdates `unicode-xid` from 0.2.4 to 0.2.5\n<details>\n<summary>Commits</summary>\n<ul>\n<li><a\nhref=\"https://github.com/unicode-rs/unicode-xid/commit/705256be0288a2d15ffb832ed3d8f25e8c14f49f\"><code>705256b</code></a>\nBump to 0.2.5</li>\n<li><a\nhref=\"https://github.com/unicode-rs/unicode-xid/commit/9342d8a0cb3d17a301218f4d7b274db4f1cb6db9\"><code>9342d8a</code></a>\nMerge pull request <a\nhref=\"https://redirect.github.com/unicode-rs/unicode-xid/issues/37\">#37</a>\nfrom blyxyas/modernize</li>\n<li><a\nhref=\"https://github.com/unicode-rs/unicode-xid/commit/0faa1ed6ba39792dde157ce885270dac635bd61c\"><code>0faa1ed</code></a>\nModernise the codebase (desc.)</li>\n<li><a\nhref=\"https://github.com/unicode-rs/unicode-xid/commit/f8cbac9c54783f43e1da18d2979a8f976aeebfc2\"><code>f8cbac9</code></a>\nMerge pull request <a\nhref=\"https://redirect.github.com/unicode-rs/unicode-xid/issues/36\">#36</a>\nfrom Marcondiro/master</li>\n<li><a\nhref=\"https://github.com/unicode-rs/unicode-xid/commit/9afe467f17b2251a13acfeeef4054c4a290de2dc\"><code>9afe467</code></a>\nUpdate ci.yml</li>\n<li><a\nhref=\"https://github.com/unicode-rs/unicode-xid/commit/bc5656fb33c6a47e8c1bea9ec90b204f4efb559a\"><code>bc5656f</code></a>\nUpdate ci.yml</li>\n<li><a\nhref=\"https://github.com/unicode-rs/unicode-xid/commit/c80c8cf5ebe0117922793da4fb70ad00d78c255e\"><code>c80c8cf</code></a>\nUpdate ci.yml</li>\n<li><a\nhref=\"https://github.com/unicode-rs/unicode-xid/commit/2f4eee5312b31818983942946fc27044d5f68a15\"><code>2f4eee5</code></a>\nUpdate ci.yml</li>\n<li><a\nhref=\"https://github.com/unicode-rs/unicode-xid/commit/03269aa2673575fcb435f7a1208acea0bdbc3ffe\"><code>03269aa</code></a>\nUpdate ci.yml</li>\n<li><a\nhref=\"https://github.com/unicode-rs/unicode-xid/commit/324374cd548f003c512a52362427c19a5d00b937\"><code>324374c</code></a>\nBump Unicode to version 15.1.0, regenerate tables</li>\n<li>Additional commits viewable in <a\nhref=\"https://github.com/unicode-rs/unicode-xid/compare/v0.2.4...v0.2.5\">compare\nview</a></li>\n</ul>\n</details>\n<br />\n\n\nDependabot will resolve any conflicts with this PR as long as you don't\nalter it yourself. You can also trigger a rebase manually by commenting\n`@dependabot rebase`.\n\n[//]: # (dependabot-automerge-start)\n[//]: # (dependabot-automerge-end)\n\n---\n\n<details>\n<summary>Dependabot commands and options</summary>\n<br />\n\nYou can trigger Dependabot actions by commenting on this PR:\n- `@dependabot rebase` will rebase this PR\n- `@dependabot recreate` will recreate this PR, overwriting any edits\nthat have been made to it\n- `@dependabot merge` will merge this PR after your CI passes on it\n- `@dependabot squash and merge` will squash and merge this PR after\nyour CI passes on it\n- `@dependabot cancel merge` will cancel a previously requested merge\nand block automerging\n- `@dependabot reopen` will reopen this PR if it is closed\n- `@dependabot close` will close this PR and stop Dependabot recreating\nit. You can achieve the same result by closing it manually\n- `@dependabot show <dependency name> ignore conditions` will show all\nof the ignore conditions of the specified dependency\n- `@dependabot ignore <dependency name> major version` will close this\ngroup update PR and stop Dependabot creating any more for the specific\ndependency's major version (unless you unignore this specific\ndependency's major version or upgrade to it yourself)\n- `@dependabot ignore <dependency name> minor version` will close this\ngroup update PR and stop Dependabot creating any more for the specific\ndependency's minor version (unless you unignore this specific\ndependency's minor version or upgrade to it yourself)\n- `@dependabot ignore <dependency name>` will close this group update PR\nand stop Dependabot creating any more for the specific dependency\n(unless you unignore this specific dependency or upgrade to it yourself)\n- `@dependabot unignore <dependency name>` will remove all of the ignore\nconditions of the specified dependency\n- `@dependabot unignore <dependency name> <ignore condition>` will\nremove the ignore condition of the specified dependency and ignore\nconditions\n\n\n</details>\n\nSigned-off-by: dependabot[bot] <support@github.com>\nCo-authored-by: dependabot[bot] <49699333+dependabot[bot]@users.noreply.github.com>",
        "before_after_code_files": [
          "userspace/ksud/Cargo.lock||userspace/ksud/Cargo.lock"
        ]
      },
      "candidate_patch_features": {
        "candidate_earlier_than_patch": 0,
        "same_branch_evolution": 1,
        "olp_code_files": {
          "patch": [
            "userspace/ksud/Cargo.lock||userspace/ksud/Cargo.lock"
          ],
          "candidate": [
            "userspace/ksud/Cargo.lock||userspace/ksud/Cargo.lock"
          ]
        }
      },
      "candidate_diff": {
        "userspace/ksud/Cargo.lock||userspace/ksud/Cargo.lock": [
          "File: userspace/ksud/Cargo.lock -> userspace/ksud/Cargo.lock",
          "--- Hunk 1 ---",
          "[Context before]",
          "17: source = \"registry+https://github.com/rust-lang/crates.io-index\"",
          "18: checksum = \"f26201604c87b1e01bd3d98f8d5d9a8fcbb815e8cedb41ffccbeb4bf593a35fe\"",
          "20: [[package]]",
          "21: name = \"adler32\"",
          "22: version = \"1.2.0\"",
          "",
          "[Removed Lines]",
          "[None]",
          "",
          "[Added Lines]",
          "20: [[package]]",
          "21: name = \"adler2\"",
          "22: version = \"2.0.0\"",
          "23: source = \"registry+https://github.com/rust-lang/crates.io-index\"",
          "24: checksum = \"512761e0bb2578dd7380c6baaa0f4ce03e84f95e960231d1dec8bf4d7d6e2627\"",
          "",
          "---------------",
          "--- Hunk 2 ---",
          "[Context before]",
          "170:  \"cc\",",
          "171:  \"cfg-if 1.0.0\",",
          "172:  \"libc\",",
          "174:  \"object\",",
          "175:  \"rustc-demangle\",",
          "176: ]",
          "",
          "[Removed Lines]",
          "173:  \"miniz_oxide\",",
          "",
          "[Added Lines]",
          "179:  \"miniz_oxide 0.7.4\",",
          "",
          "---------------",
          "--- Hunk 3 ---",
          "[Context before]",
          "217: [[package]]",
          "218: name = \"cc\"",
          "220: source = \"registry+https://github.com/rust-lang/crates.io-index\"",
          "222: dependencies = [",
          "223:  \"shlex\",",
          "224: ]",
          "",
          "[Removed Lines]",
          "219: version = \"1.1.13\"",
          "221: checksum = \"72db2f7947ecee9b03b510377e8bb9077afa27176fdbff55c51027e976fdcc48\"",
          "",
          "[Added Lines]",
          "225: version = \"1.1.14\"",
          "227: checksum = \"50d2eb3cd3d1bf4529e31c215ee6f93ec5a3d536d9f578f93d9d33ee19562932\"",
          "",
          "---------------",
          "--- Hunk 4 ---",
          "[Context before]",
          "584: [[package]]",
          "585: name = \"flate2\"",
          "587: source = \"registry+https://github.com/rust-lang/crates.io-index\"",
          "589: dependencies = [",
          "590:  \"crc32fast\",",
          "592: ]",
          "594: [[package]]",
          "",
          "[Removed Lines]",
          "586: version = \"1.0.31\"",
          "588: checksum = \"7f211bbe8e69bbd0cfdea405084f128ae8b4aaa6b0b522fc8f2b009084797920\"",
          "591:  \"miniz_oxide\",",
          "",
          "[Added Lines]",
          "592: version = \"1.0.32\"",
          "594: checksum = \"9c0596c1eac1f9e04ed902702e9878208b336edc9d6fddc8a48387349bab3666\"",
          "597:  \"miniz_oxide 0.8.0\",",
          "",
          "---------------",
          "--- Hunk 5 ---",
          "[Context before]",
          "834: [[package]]",
          "835: name = \"libc\"",
          "837: source = \"registry+https://github.com/rust-lang/crates.io-index\"",
          "840: [[package]]",
          "841: name = \"libflate\"",
          "",
          "[Removed Lines]",
          "836: version = \"0.2.156\"",
          "838: checksum = \"a5f43f184355eefb8d17fc948dbecf6c13be3c141f20d834ae842193a448c72a\"",
          "",
          "[Added Lines]",
          "842: version = \"0.2.158\"",
          "844: checksum = \"d8adc4bb1803a324070e64a98ae98f38934d91957a99cfb3a43dcbc01bc56439\"",
          "",
          "---------------",
          "--- Hunk 6 ---",
          "[Context before]",
          "935:  \"adler\",",
          "936: ]",
          "938: [[package]]",
          "939: name = \"nom\"",
          "940: version = \"7.1.3\"",
          "",
          "[Removed Lines]",
          "[None]",
          "",
          "[Added Lines]",
          "944: [[package]]",
          "945: name = \"miniz_oxide\"",
          "946: version = \"0.8.0\"",
          "947: source = \"registry+https://github.com/rust-lang/crates.io-index\"",
          "948: checksum = \"e2d80299ef12ff69b16a84bb182e3b9df68b5a91574d3d4fa6e41b65deec4df1\"",
          "949: dependencies = [",
          "950:  \"adler2\",",
          "951: ]",
          "",
          "---------------",
          "--- Hunk 7 ---",
          "[Context before]",
          "1034: [[package]]",
          "1035: name = \"quote\"",
          "1037: source = \"registry+https://github.com/rust-lang/crates.io-index\"",
          "1039: dependencies = [",
          "1040:  \"proc-macro2\",",
          "1041: ]",
          "",
          "[Removed Lines]",
          "1036: version = \"1.0.36\"",
          "1038: checksum = \"0fa76aaf39101c457836aec0ce2316dbdc3ab723cdda1c6bd4e6ad4208acaca7\"",
          "",
          "[Added Lines]",
          "1051: version = \"1.0.37\"",
          "1053: checksum = \"b5b9d34b8991d19d98081b46eacdd8eb58c6f2b201139f7c5f643cc155a633af\"",
          "",
          "---------------",
          "--- Hunk 8 ---",
          "[Context before]",
          "1282: [[package]]",
          "1283: name = \"syn\"",
          "1285: source = \"registry+https://github.com/rust-lang/crates.io-index\"",
          "1287: dependencies = [",
          "1288:  \"proc-macro2\",",
          "1289:  \"quote\",",
          "",
          "[Removed Lines]",
          "1284: version = \"2.0.74\"",
          "1286: checksum = \"1fceb41e3d546d0bd83421d3409b1460cc7444cd389341a4c880fe7a042cb3d7\"",
          "",
          "[Added Lines]",
          "1299: version = \"2.0.75\"",
          "1301: checksum = \"f6af063034fc1935ede7be0122941bafa9bacb949334d090b77ca98b5817c7d9\"",
          "",
          "---------------",
          "--- Hunk 9 ---",
          "[Context before]",
          "1345: [[package]]",
          "1346: name = \"tokio\"",
          "1348: source = \"registry+https://github.com/rust-lang/crates.io-index\"",
          "1350: dependencies = [",
          "1351:  \"backtrace\",",
          "1352:  \"bytes\",",
          "",
          "[Removed Lines]",
          "1347: version = \"1.39.2\"",
          "1349: checksum = \"daa4fb1bc778bd6f04cbfc4bb2d06a7396a8f299dc33ea1900cedaa316f467b1\"",
          "",
          "[Added Lines]",
          "1362: version = \"1.39.3\"",
          "1364: checksum = \"9babc99b9923bfa4804bd74722ff02c0381021eafa4db9949217e3be8e84fff5\"",
          "",
          "---------------",
          "--- Hunk 10 ---",
          "[Context before]",
          "1374: [[package]]",
          "1375: name = \"unicode-xid\"",
          "1377: source = \"registry+https://github.com/rust-lang/crates.io-index\"",
          "1380: [[package]]",
          "1381: name = \"utf8parse\"",
          "",
          "[Removed Lines]",
          "1376: version = \"0.2.4\"",
          "1378: checksum = \"f962df74c8c05a667b5ee8bcf162993134c104e96440b663c8daa176dc772d8c\"",
          "",
          "[Added Lines]",
          "1391: version = \"0.2.5\"",
          "1393: checksum = \"229730647fbc343e3a80e463c1db7f78f3855d3f3739bee0dda773c9a037c90a\"",
          "",
          "---------------",
          "--- Hunk 11 ---",
          "[Context before]",
          "1463: [[package]]",
          "1464: name = \"which\"",
          "1466: source = \"registry+https://github.com/rust-lang/crates.io-index\"",
          "1468: dependencies = [",
          "1469:  \"either\",",
          "1470:  \"home\",",
          "",
          "[Removed Lines]",
          "1465: version = \"6.0.2\"",
          "1467: checksum = \"3d9c5ed668ee1f17edb3b627225343d210006a90bb1e3745ce1f30b1fb115075\"",
          "",
          "[Added Lines]",
          "1480: version = \"6.0.3\"",
          "1482: checksum = \"b4ee928febd44d98f2f459a4a79bd4d928591333a494a10a868418ac1b39cf1f\"",
          "",
          "---------------",
          "--- Hunk 12 ---",
          "[Context before]",
          "1624: [[package]]",
          "1625: name = \"zip\"",
          "1627: source = \"registry+https://github.com/rust-lang/crates.io-index\"",
          "1629: dependencies = [",
          "1630:  \"arbitrary\",",
          "1631:  \"crc32fast\",",
          "",
          "[Removed Lines]",
          "1626: version = \"2.1.6\"",
          "1628: checksum = \"40dd8c92efc296286ce1fbd16657c5dbefff44f1b4ca01cc5f517d8b7b3d3e2e\"",
          "",
          "[Added Lines]",
          "1641: version = \"2.2.0\"",
          "1643: checksum = \"dc5e4288ea4057ae23afc69a4472434a87a2495cafce6632fd1c4ec9f5cf3494\"",
          "",
          "---------------"
        ]
      }
    },
    {
      "candidate_hash": "084182d7fbb1b9280df00cda977d2fc1956f3f22",
      "candidate_info": {
        "commit_hash": "084182d7fbb1b9280df00cda977d2fc1956f3f22",
        "repo": "tiann/kernelsu",
        "commit_url": "https://github.com/tiann/kernelsu/commit/084182d7fbb1b9280df00cda977d2fc1956f3f22",
        "files": [
          "userspace/ksud/Cargo.lock"
        ],
        "message": "build(deps): bump syn from 2.0.71 to 2.0.72 in /userspace/ksud in the crates group (#1902)",
        "before_after_code_files": [
          "userspace/ksud/Cargo.lock||userspace/ksud/Cargo.lock"
        ]
      },
      "candidate_patch_features": {
        "candidate_earlier_than_patch": 0,
        "same_branch_evolution": 1,
        "olp_code_files": {
          "patch": [
            "userspace/ksud/Cargo.lock||userspace/ksud/Cargo.lock"
          ],
          "candidate": [
            "userspace/ksud/Cargo.lock||userspace/ksud/Cargo.lock"
          ]
        }
      },
      "candidate_diff": {
        "userspace/ksud/Cargo.lock||userspace/ksud/Cargo.lock": [
          "File: userspace/ksud/Cargo.lock -> userspace/ksud/Cargo.lock",
          "--- Hunk 1 ---",
          "[Context before]",
          "1451: [[package]]",
          "1452: name = \"syn\"",
          "1454: source = \"registry+https://github.com/rust-lang/crates.io-index\"",
          "1456: dependencies = [",
          "1457:  \"proc-macro2\",",
          "1458:  \"quote\",",
          "",
          "[Removed Lines]",
          "1453: version = \"2.0.71\"",
          "1455: checksum = \"b146dcf730474b4bcd16c311627b31ede9ab149045db4d6088b3becaea046462\"",
          "",
          "[Added Lines]",
          "1453: version = \"2.0.72\"",
          "1455: checksum = \"dc4b9b9bf2add8093d3f2c0204471e951b2285580335de42f9d2534f3ae7a8af\"",
          "",
          "---------------"
        ]
      }
    },
    {
      "candidate_hash": "eb5b36f138fb0559d6e582363c096bcc04dd1c49",
      "candidate_info": {
        "commit_hash": "eb5b36f138fb0559d6e582363c096bcc04dd1c49",
        "repo": "tiann/kernelsu",
        "commit_url": "https://github.com/tiann/kernelsu/commit/eb5b36f138fb0559d6e582363c096bcc04dd1c49",
        "files": [
          "userspace/ksud/src/debug.rs"
        ],
        "message": "ksud: Fix debug set manager",
        "before_after_code_files": [
          "userspace/ksud/src/debug.rs||userspace/ksud/src/debug.rs"
        ]
      },
      "candidate_patch_features": {
        "candidate_earlier_than_patch": 0,
        "same_branch_evolution": 1,
        "olp_code_files": {
          "patch": [
            "userspace/ksud/src/debug.rs||userspace/ksud/src/debug.rs"
          ],
          "candidate": [
            "userspace/ksud/src/debug.rs||userspace/ksud/src/debug.rs"
          ]
        }
      },
      "candidate_diff": {
        "userspace/ksud/src/debug.rs||userspace/ksud/src/debug.rs": [
          "File: userspace/ksud/src/debug.rs -> userspace/ksud/src/debug.rs",
          "--- Hunk 1 ---",
          "[Context before]",
          "4:     process::Command,",
          "5: };",
          "9: const KERNEL_PARAM_PATH: &str = \"/sys/module/kernelsu\";",
          "11: fn read_u32(path: &PathBuf) -> Result<u32> {",
          "",
          "[Removed Lines]",
          "7: use crate::apk_sign::get_apk_signature;",
          "",
          "[Added Lines]",
          "[None]",
          "",
          "---------------",
          "--- Hunk 2 ---",
          "[Context before]",
          "15:     Ok(content)",
          "16: }",
          "19:     let kernel_param_path = Path::new(KERNEL_PARAM_PATH).join(\"parameters\");",
          "39:     Ok(())",
          "40: }",
          "50: }",
          "52: pub fn set_manager(pkg: &str) -> Result<()> {",
          "",
          "[Removed Lines]",
          "18: fn set_kernel_param(size: u32, hash: String) -> Result<()> {",
          "21:     let expeced_size_path = kernel_param_path.join(\"ksu_expected_size\");",
          "22:     let expeced_hash_path = kernel_param_path.join(\"ksu_expected_hash\");",
          "24:     print!(",
          "25:         \"before size: {:#x} hash: {}\",",
          "26:         read_u32(&expeced_size_path)?,",
          "27:         std::fs::read_to_string(&expeced_hash_path)?",
          "28:     );",
          "30:     std::fs::write(&expeced_size_path, size.to_string())?;",
          "31:     std::fs::write(&expeced_hash_path, hash)?;",
          "33:     print!(",
          "34:         \"after size: {:#x} hash: {}\",",
          "35:         read_u32(&expeced_size_path)?,",
          "36:         std::fs::read_to_string(&expeced_hash_path)?",
          "37:     );",
          "42: fn get_apk_path(package_name: &str) -> Result<String> {",
          "44:     let output = Command::new(\"pm\").args([\"path\", package_name]).output()?;",
          "47:     let output = String::from_utf8_lossy(&output.stdout);",
          "48:     let path = output.trim().replace(\"package:\", \"\");",
          "49:     Ok(path)",
          "",
          "[Added Lines]",
          "16: fn set_kernel_param(uid: u32) -> Result<()> {",
          "19:     let ksu_debug_manager_uid = kernel_param_path.join(\"ksu_debug_manager_uid\");",
          "20:     let before_uid = read_u32(&ksu_debug_manager_uid)?;",
          "21:     std::fs::write(&ksu_debug_manager_uid, uid.to_string())?;",
          "22:     let after_uid = read_u32(&ksu_debug_manager_uid)?;",
          "24:     println!(\"set manager uid: {before_uid} -> {after_uid}\");",
          "29: #[cfg(target_os = \"android\")]",
          "30: fn get_pkg_uid(pkg: &str) -> Result<u32> {",
          "32:     let uid = rustix::fs::stat(format!(\"/data/data/{pkg}\"))",
          "33:         .with_context(|| format!(\"stat /data/data/{}\", pkg))?",
          "34:         .st_uid;",
          "35:     Ok(uid)",
          "",
          "---------------",
          "--- Hunk 3 ---",
          "[Context before]",
          "55:         \"CONFIG_KSU_DEBUG is not enabled\"",
          "56:     );",
          "63:     let _ = Command::new(\"am\").args([\"force-stop\", pkg]).status();",
          "64:     Ok(())",
          "",
          "[Removed Lines]",
          "58:     let path = get_apk_path(pkg).with_context(|| format!(\"{pkg} does not exist!\"))?;",
          "59:     let sign = get_apk_signature(&path)?;",
          "60:     set_kernel_param(sign.0, sign.1)?;",
          "",
          "[Added Lines]",
          "44:     #[cfg(target_os = \"android\")]",
          "45:     let uid = get_pkg_uid(pkg)?;",
          "46:     #[cfg(not(target_os = \"android\"))]",
          "47:     let uid = 0;",
          "48:     set_kernel_param(uid)?;",
          "",
          "---------------"
        ]
      }
    },
    {
      "candidate_hash": "c1a2cbf1e4e9a417b329bc86c77c3b16afc943bf",
      "candidate_info": {
        "commit_hash": "c1a2cbf1e4e9a417b329bc86c77c3b16afc943bf",
        "repo": "tiann/kernelsu",
        "commit_url": "https://github.com/tiann/kernelsu/commit/c1a2cbf1e4e9a417b329bc86c77c3b16afc943bf",
        "files": [
          "userspace/ksud/Cargo.lock",
          "userspace/ksud/Cargo.toml",
          "userspace/ksud/src/event.rs",
          "userspace/ksud/src/ksu.rs",
          "userspace/ksud/src/utils.rs"
        ],
        "message": "Use rustix to replace some unsafe calls",
        "before_after_code_files": [
          "userspace/ksud/Cargo.lock||userspace/ksud/Cargo.lock",
          "userspace/ksud/src/event.rs||userspace/ksud/src/event.rs",
          "userspace/ksud/src/ksu.rs||userspace/ksud/src/ksu.rs",
          "userspace/ksud/src/utils.rs||userspace/ksud/src/utils.rs"
        ]
      },
      "candidate_patch_features": {
        "candidate_earlier_than_patch": 0,
        "same_branch_evolution": 1,
        "olp_code_files": {
          "patch": [
            "userspace/ksud/Cargo.lock||userspace/ksud/Cargo.lock"
          ],
          "candidate": [
            "userspace/ksud/Cargo.lock||userspace/ksud/Cargo.lock"
          ]
        }
      },
      "candidate_diff": {
        "userspace/ksud/Cargo.lock||userspace/ksud/Cargo.lock": [
          "File: userspace/ksud/Cargo.lock -> userspace/ksud/Cargo.lock",
          "--- Hunk 1 ---",
          "[Context before]",
          "257: [[package]]",
          "258: name = \"clang-sys\"",
          "260: source = \"registry+https://github.com/rust-lang/crates.io-index\"",
          "262: dependencies = [",
          "263:  \"glob\",",
          "264:  \"libc\",",
          "",
          "[Removed Lines]",
          "259: version = \"1.4.0\"",
          "261: checksum = \"fa2e27ae6ab525c3d369ded447057bca5438d86dc3a68f6faafb8269ba82ebf3\"",
          "",
          "[Added Lines]",
          "259: version = \"1.7.0\"",
          "261: checksum = \"67523a3b4be3ce1989d607a828d036249522dd9c1c8de7f4dd2dae43a37369d1\"",
          "",
          "---------------",
          "--- Hunk 2 ---",
          "[Context before]",
          "858:  \"regex\",",
          "859:  \"retry\",",
          "860:  \"rust-embed\",",
          "861:  \"serde\",",
          "862:  \"serde_json\",",
          "863:  \"sha256\",",
          "",
          "[Removed Lines]",
          "[None]",
          "",
          "[Added Lines]",
          "861:  \"rustix 0.38.30\",",
          "",
          "---------------",
          "--- Hunk 3 ---",
          "[Context before]",
          "909: [[package]]",
          "910: name = \"libloading\"",
          "912: source = \"registry+https://github.com/rust-lang/crates.io-index\"",
          "914: dependencies = [",
          "915:  \"cfg-if 1.0.0\",",
          "917: ]",
          "919: [[package]]",
          "",
          "[Removed Lines]",
          "911: version = \"0.7.4\"",
          "913: checksum = \"b67380fd3b2fbe7527a606e18729d21c6f3951633d0500574c4dc22d2d638b9f\"",
          "916:  \"winapi\",",
          "",
          "[Added Lines]",
          "912: version = \"0.8.1\"",
          "914: checksum = \"c571b676ddfc9a8c12f1f3d3085a7b163966a8fd8098a90640953ce5f6170161\"",
          "917:  \"windows-sys 0.48.0\",",
          "",
          "---------------",
          "--- Hunk 4 ---",
          "[Context before]",
          "1376: dependencies = [",
          "1377:  \"bitflags 2.4.1\",",
          "1378:  \"errno 0.3.8\",",
          "1379:  \"libc\",",
          "1380:  \"linux-raw-sys 0.4.13\",",
          "1381:  \"windows-sys 0.52.0\",",
          "1382: ]",
          "",
          "[Removed Lines]",
          "[None]",
          "",
          "[Added Lines]",
          "1380:  \"itoa\",",
          "1383:  \"once_cell\",",
          "",
          "---------------",
          "--- Hunk 5 ---",
          "[Context before]",
          "1457: [[package]]",
          "1458: name = \"shlex\"",
          "1460: source = \"registry+https://github.com/rust-lang/crates.io-index\"",
          "1463: [[package]]",
          "1464: name = \"smart-default\"",
          "",
          "[Removed Lines]",
          "1459: version = \"1.1.0\"",
          "1461: checksum = \"43b2853a4d09f215c24cc5489c992ce46052d359b5109343cbafbf26bc62f8a3\"",
          "",
          "[Added Lines]",
          "1462: version = \"1.3.0\"",
          "1464: checksum = \"0fda2ff0d084019ba4d7c6f371c95d8fd75ce3524c3cb8fb653a3023f6323e64\"",
          "",
          "---------------",
          "--- Hunk 6 ---",
          "[Context before]",
          "1599: [[package]]",
          "1600: name = \"tracing\"",
          "1602: source = \"registry+https://github.com/rust-lang/crates.io-index\"",
          "1604: dependencies = [",
          "1606:  \"pin-project-lite\",",
          "1607:  \"tracing-attributes\",",
          "1608:  \"tracing-core\",",
          "",
          "[Removed Lines]",
          "1601: version = \"0.1.37\"",
          "1603: checksum = \"8ce8c33a8d48bd45d624a6e523445fd21ec13d3653cd51f681abf67418f54eb8\"",
          "1605:  \"cfg-if 1.0.0\",",
          "",
          "[Added Lines]",
          "1604: version = \"0.1.40\"",
          "1606: checksum = \"c3523ab5a71916ccf420eebdf5521fcef02141234bbc0b8a49f2fdc4544364ef\"",
          "",
          "---------------",
          "--- Hunk 7 ---",
          "[Context before]",
          "1611: [[package]]",
          "1612: name = \"tracing-attributes\"",
          "1614: source = \"registry+https://github.com/rust-lang/crates.io-index\"",
          "1616: dependencies = [",
          "1617:  \"proc-macro2\",",
          "1618:  \"quote\",",
          "1620: ]",
          "1622: [[package]]",
          "1623: name = \"tracing-core\"",
          "1625: source = \"registry+https://github.com/rust-lang/crates.io-index\"",
          "1627: dependencies = [",
          "1628:  \"once_cell\",",
          "1629: ]",
          "",
          "[Removed Lines]",
          "1613: version = \"0.1.23\"",
          "1615: checksum = \"4017f8f45139870ca7e672686113917c71c7a6e02d4924eda67186083c03081a\"",
          "1619:  \"syn 1.0.107\",",
          "1624: version = \"0.1.30\"",
          "1626: checksum = \"24eb03ba0eab1fd845050058ce5e616558e8f8d8fca633e6b163fe25c797213a\"",
          "",
          "[Added Lines]",
          "1615: version = \"0.1.27\"",
          "1617: checksum = \"34704c8d6ebcbc939824180af020566b01a7c01f80641264eba0999f6c2b6be7\"",
          "1621:  \"syn 2.0.48\",",
          "1626: version = \"0.1.32\"",
          "1628: checksum = \"c06d3da6113f116aaee68e4d601191614c9053067f9ab7f6edbcb161237daa54\"",
          "",
          "---------------"
        ],
        "userspace/ksud/src/event.rs||userspace/ksud/src/event.rs": [
          "File: userspace/ksud/src/event.rs -> userspace/ksud/src/event.rs",
          "--- Hunk 1 ---",
          "[Context before]",
          "1: use anyhow::{bail, Context, Result};",
          "2: use log::{info, warn};",
          "4: use std::{collections::HashMap, path::Path};",
          "6: use crate::module::prune_modules;",
          "",
          "[Removed Lines]",
          "3: use std::path::PathBuf;",
          "",
          "[Added Lines]",
          "[None]",
          "",
          "---------------"
        ],
        "userspace/ksud/src/ksu.rs||userspace/ksud/src/ksu.rs": [
          "File: userspace/ksud/src/ksu.rs -> userspace/ksud/src/ksu.rs",
          "--- Hunk 1 ---",
          "[Context before]",
          "14:     utils::{self, umask},",
          "15: };",
          "17: pub const KERNEL_SU_OPTION: u32 = 0xDEAD_BEEF;",
          "19: const CMD_GRANT_ROOT: u64 = 0;",
          "",
          "[Removed Lines]",
          "[None]",
          "",
          "[Added Lines]",
          "17: #[cfg(any(target_os = \"linux\", target_os = \"android\"))]",
          "18: use rustix::{",
          "19:     process::getuid,",
          "20:     thread::{set_thread_res_gid, set_thread_res_uid, Gid, Uid},",
          "21: };",
          "",
          "---------------",
          "--- Hunk 2 ---",
          "[Context before]",
          "65:         if !groups.is_empty() {",
          "66:             libc::setgroups(groups.len(), groups.as_ptr());",
          "67:         }",
          "70:     }",
          "71: }",
          "",
          "[Removed Lines]",
          "68:         libc::setresgid(gid, gid, gid);",
          "69:         libc::setresuid(uid, uid, uid);",
          "",
          "[Added Lines]",
          "74:     }",
          "75:     #[cfg(any(target_os = \"linux\", target_os = \"android\"))]",
          "76:     {",
          "77:         let gid = unsafe { Gid::from_raw(gid) };",
          "78:         let uid = unsafe { Uid::from_raw(uid) };",
          "79:         set_thread_res_gid(gid, gid, gid).ok();",
          "80:         set_thread_res_uid(uid, uid, uid).ok();",
          "",
          "---------------",
          "--- Hunk 3 ---",
          "[Context before]",
          "203:     }",
          "207:     if free_idx < matches.free.len() {",
          "208:         let name = &matches.free[free_idx];",
          "209:         uid = unsafe {",
          "",
          "[Removed Lines]",
          "206:     let mut uid = unsafe { libc::getuid() };",
          "",
          "[Added Lines]",
          "217:     let mut uid = getuid().as_raw();",
          "",
          "---------------"
        ],
        "userspace/ksud/src/utils.rs||userspace/ksud/src/utils.rs": [
          "File: userspace/ksud/src/utils.rs -> userspace/ksud/src/utils.rs",
          "--- Hunk 1 ---",
          "[Context before]",
          "15: use hole_punch::*;",
          "16: use std::io::{Read, Seek, SeekFrom};",
          "18: pub fn ensure_clean_dir(dir: &str) -> Result<()> {",
          "19:     let path = Path::new(dir);",
          "20:     log::debug!(\"ensure_clean_dir: {}\", path.display());",
          "",
          "[Removed Lines]",
          "[None]",
          "",
          "[Added Lines]",
          "18: #[cfg(any(target_os = \"linux\", target_os = \"android\"))]",
          "19: use rustix::{",
          "20:     process,",
          "21:     thread::{move_into_link_name_space, unshare, LinkNameSpaceType, UnshareFlags},",
          "22: };",
          "",
          "---------------",
          "--- Hunk 2 ---",
          "[Context before]",
          "116: #[cfg(any(target_os = \"linux\", target_os = \"android\"))]",
          "117: pub fn switch_mnt_ns(pid: i32) -> Result<()> {",
          "120:     let path = format!(\"/proc/{pid}/ns/mnt\");",
          "122:     let current_dir = std::env::current_dir();",
          "124:     if let std::result::Result::Ok(current_dir) = current_dir {",
          "125:         let _ = std::env::set_current_dir(current_dir);",
          "126:     }",
          "128:     Ok(())",
          "129: }",
          "131: #[cfg(any(target_os = \"linux\", target_os = \"android\"))]",
          "132: pub fn unshare_mnt_ns() -> Result<()> {",
          "136:     Ok(())",
          "137: }",
          "",
          "[Removed Lines]",
          "118:     use anyhow::ensure;",
          "119:     use std::os::fd::AsRawFd;",
          "121:     let fd = std::fs::File::open(path)?;",
          "123:     let ret = unsafe { libc::setns(fd.as_raw_fd(), libc::CLONE_NEWNS) };",
          "127:     ensure!(ret == 0, \"switch mnt ns failed\");",
          "133:     use anyhow::ensure;",
          "134:     let ret = unsafe { libc::unshare(libc::CLONE_NEWNS) };",
          "135:     ensure!(ret == 0, \"unshare mnt ns failed\");",
          "",
          "[Added Lines]",
          "124:     use rustix::{",
          "125:         fd::AsFd,",
          "126:         fs::{open, Mode, OFlags},",
          "127:     };",
          "129:     let fd = open(path, OFlags::RDONLY, Mode::from_raw_mode(0))?;",
          "131:     move_into_link_name_space(fd.as_fd(), Some(LinkNameSpaceType::Mount))?;",
          "140:     unshare(UnshareFlags::NEWNS)?;",
          "",
          "---------------",
          "--- Hunk 3 ---",
          "[Context before]",
          "165: #[cfg(any(target_os = \"linux\", target_os = \"android\"))]",
          "166: pub fn umask(mask: u32) {",
          "168: }",
          "170: #[cfg(not(any(target_os = \"linux\", target_os = \"android\")))]",
          "",
          "[Removed Lines]",
          "167:     unsafe { libc::umask(mask) };",
          "",
          "[Added Lines]",
          "172:     process::umask(rustix::fs::Mode::from_raw_mode(mask));",
          "",
          "---------------"
        ]
      }
    }
  ]
}