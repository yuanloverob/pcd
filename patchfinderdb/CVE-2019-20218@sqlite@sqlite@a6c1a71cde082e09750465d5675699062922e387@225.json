{
  "cve_id": "CVE-2019-20218",
  "cve_desc": "selectExpander in select.c in SQLite 3.30.1 proceeds with WITH stack unwinding even after a parsing error.",
  "repo": "sqlite/sqlite",
  "patch_hash": "a6c1a71cde082e09750465d5675699062922e387",
  "patch_info": {
    "commit_hash": "a6c1a71cde082e09750465d5675699062922e387",
    "repo": "sqlite/sqlite",
    "commit_url": "https://github.com/sqlite/sqlite/commit/a6c1a71cde082e09750465d5675699062922e387",
    "files": [
      "manifest",
      "manifest.uuid",
      "src/select.c",
      "test/altertab3.test"
    ],
    "message": "Do not attempt to unwind the WITH stack in the Parse object following an error. This fixes a separate case to [de6e6d68].\n\nFossilOrigin-Name: d29edef93451cc67a5d69c1cce1b1832d9ca8fff1f600afdd51338b74d077b92",
    "before_after_code_files": [
      "manifest.uuid||manifest.uuid",
      "src/select.c||src/select.c",
      "test/altertab3.test||test/altertab3.test"
    ]
  },
  "patch_diff": {
    "manifest.uuid||manifest.uuid": [
      "File: manifest.uuid -> manifest.uuid",
      "--- Hunk 1 ---",
      "[Context before]",
      "[No context available]",
      "",
      "[Removed Lines]",
      "1: 597896ed0ae9e2960a8f39576bd7f77a11dccc1da84b6a44ebb5c38d90ebc330",
      "",
      "[Added Lines]",
      "[None]",
      "",
      "---------------"
    ],
    "src/select.c||src/select.c": [
      "File: src/select.c -> src/select.c",
      "--- Hunk 1 ---",
      "[Context before]",
      "4982:     return WRC_Abort;",
      "4983:   }",
      "",
      "[Removed Lines]",
      "4981:   if( db->mallocFailed || sqliteProcessJoin(pParse, p) ){",
      "",
      "[Added Lines]",
      "4981:   if( pParse->nErr || db->mallocFailed || sqliteProcessJoin(pParse, p) ){",
      "",
      "---------------"
    ],
    "test/altertab3.test||test/altertab3.test": [
      "File: test/altertab3.test -> test/altertab3.test",
      "--- Hunk 1 ---",
      "[Context before]",
      "531:   ALTER TABLE t1 RENAME TO t1x;",
      "532: } {1 {error in trigger r1: no such table: main.t2}}",
      "534: finish_test",
      "",
      "[Removed Lines]",
      "[None]",
      "",
      "[Added Lines]",
      "534: #------------------------------------------------------------------------",
      "535: #",
      "536: reset_db",
      "537: do_execsql_test 23.1 {",
      "538:   CREATE TABLE v0 (a);",
      "539:   CREATE VIEW v2 (v3) AS",
      "540:     WITH x1 AS (SELECT * FROM v2)",
      "541:     SELECT v3 AS x, v3 AS y FROM v2;",
      "542: }",
      "544: do_catchsql_test 23.2 {",
      "545:   SELECT * FROM v2",
      "546: } {1 {view v2 is circularly defined}}",
      "548: db close",
      "549: sqlite3 db test.db",
      "551: do_catchsql_test 23.3 {",
      "552:   ALTER TABLE v0 RENAME TO t3 ;",
      "553: } {1 {error in view v2: view v2 is circularly defined}}",
      "",
      "---------------"
    ]
  },
  "candidates": [
    {
      "candidate_hash": "db586e48432ac81c81d454af4f5e879743dd9f7b",
      "candidate_info": {
        "commit_hash": "db586e48432ac81c81d454af4f5e879743dd9f7b",
        "repo": "sqlite/sqlite",
        "commit_url": "https://github.com/sqlite/sqlite/commit/db586e48432ac81c81d454af4f5e879743dd9f7b",
        "files": [
          "manifest",
          "manifest.uuid",
          "src/where.c"
        ],
        "message": "Add a missing VdbeCoverage() macro.\n\nFossilOrigin-Name: 33da6092d3d04b6eb6ab396b8c4f668e3529e26bf11e26f5fcb9b61fe3470197",
        "before_after_code_files": [
          "manifest.uuid||manifest.uuid",
          "src/where.c||src/where.c"
        ]
      },
      "candidate_patch_features": {
        "candidate_earlier_than_patch": 1,
        "same_branch_evolution": 1,
        "olp_code_files": {
          "patch": [
            "manifest.uuid||manifest.uuid"
          ],
          "candidate": [
            "manifest.uuid||manifest.uuid"
          ]
        }
      },
      "candidate_diff": {
        "manifest.uuid||manifest.uuid": [
          "File: manifest.uuid -> manifest.uuid",
          "--- Hunk 1 ---",
          "[Context before]",
          "[No context available]",
          "",
          "[Removed Lines]",
          "1: 47cd634c98b502d40a493455ba6d73cbd0dae74944f9cf06fcbcd025f4b49d6e",
          "",
          "[Added Lines]",
          "[None]",
          "",
          "---------------"
        ],
        "src/where.c||src/where.c": [
          "File: src/where.c -> src/where.c",
          "--- Hunk 1 ---",
          "[Context before]",
          "5217:       if( pLevel->regBignull ){",
          "5218:         sqlite3VdbeResolveLabel(v, pLevel->addrBignull);",
          "5219:         sqlite3VdbeAddOp2(v, OP_IfNotZero, pLevel->regBignull, pLevel->p2-1);",
          "5220:       }",
          "5221: #ifndef SQLITE_DISABLE_SKIPAHEAD_DISTINCT",
          "5222:       if( addrSeek ) sqlite3VdbeJumpHere(v, addrSeek);",
          "",
          "[Removed Lines]",
          "[None]",
          "",
          "[Added Lines]",
          "5220:         VdbeCoverage(v);",
          "",
          "---------------"
        ]
      }
    },
    {
      "candidate_hash": "b1129c423f0cda7c76a3664dd91e84701f431cc5",
      "candidate_info": {
        "commit_hash": "b1129c423f0cda7c76a3664dd91e84701f431cc5",
        "repo": "sqlite/sqlite",
        "commit_url": "https://github.com/sqlite/sqlite/commit/b1129c423f0cda7c76a3664dd91e84701f431cc5",
        "files": [
          "manifest",
          "manifest.uuid",
          "src/insert.c",
          "test/gencol1.test"
        ],
        "message": "Fix the handling of NOT NULL constraint violations for generated columns in a REPLACE statement.  Ticket [2399f5986134f79c]\n\nFossilOrigin-Name: 77b1c90add514050fe62f22751362fecacd99f9775346cffc60e09c326e64e10",
        "before_after_code_files": [
          "manifest.uuid||manifest.uuid",
          "src/insert.c||src/insert.c",
          "test/gencol1.test||test/gencol1.test"
        ]
      },
      "candidate_patch_features": {
        "candidate_earlier_than_patch": 1,
        "same_branch_evolution": 1,
        "olp_code_files": {
          "patch": [
            "manifest.uuid||manifest.uuid"
          ],
          "candidate": [
            "manifest.uuid||manifest.uuid"
          ]
        }
      },
      "candidate_diff": {
        "manifest.uuid||manifest.uuid": [
          "File: manifest.uuid -> manifest.uuid",
          "--- Hunk 1 ---",
          "[Context before]",
          "[No context available]",
          "",
          "[Removed Lines]",
          "1: 5710845b6314f924b490434b4446169f4bb50576aaa940472af68150db16e127",
          "",
          "[Added Lines]",
          "[None]",
          "",
          "---------------"
        ],
        "src/insert.c||src/insert.c": [
          "File: src/insert.c -> src/insert.c",
          "--- Hunk 1 ---",
          "[Context before]",
          "1518:           addr1 = sqlite3VdbeMakeLabel(pParse);",
          "1519:           sqlite3VdbeAddOp2(v, OP_NotNull, iReg, addr1);",
          "1520:             VdbeCoverage(v);",
          "1524:           onError = OE_Abort;",
          "",
          "[Removed Lines]",
          "1521:           sqlite3ExprCode(pParse, pTab->aCol[i].pDflt, regNewData+1+i);",
          "1522:           sqlite3VdbeAddOp2(v, OP_NotNull, iReg, addr1);",
          "1523:             VdbeCoverage(v);",
          "",
          "[Added Lines]",
          "1521:           if( (pTab->aCol[i].colFlags & COLFLAG_GENERATED)==0 ){",
          "1522:             sqlite3ExprCode(pParse, pTab->aCol[i].pDflt, regNewData+1+i);",
          "1523:             sqlite3VdbeAddOp2(v, OP_NotNull, iReg, addr1);",
          "1524:               VdbeCoverage(v);",
          "1525:           }",
          "",
          "---------------"
        ],
        "test/gencol1.test||test/gencol1.test": [
          "File: test/gencol1.test -> test/gencol1.test",
          "--- Hunk 1 ---",
          "[Context before]",
          "205:   SELECT id,x,'|' FROM t1a ORDER BY id;",
          "206: } {1 1 | 3 7 |}",
          "208: finish_test",
          "",
          "[Removed Lines]",
          "[None]",
          "",
          "[Added Lines]",
          "208: do_catchsql_test gencol1-6.10 {",
          "209:   DROP TABLE IF EXISTS t0;",
          "210:   CREATE TABLE t0(c0 NOT NULL AS(c1), c1);",
          "211:   REPLACE INTO t0(c1) VALUES(NULL);",
          "212: } {1 {NOT NULL constraint failed: t0.c0}}",
          "",
          "---------------"
        ]
      }
    },
    {
      "candidate_hash": "98c94e60d0b6a59c63cb0618be8307d34e3b97a6",
      "candidate_info": {
        "commit_hash": "98c94e60d0b6a59c63cb0618be8307d34e3b97a6",
        "repo": "sqlite/sqlite",
        "commit_url": "https://github.com/sqlite/sqlite/commit/98c94e60d0b6a59c63cb0618be8307d34e3b97a6",
        "files": [
          "manifest",
          "manifest.uuid",
          "src/whereexpr.c",
          "test/rowvalue.test"
        ],
        "message": "Previous check-in to fix [b47e3627ecaadbde] was incomplete.  This check-in completes the fix and adds a test cases.\n\nFossilOrigin-Name: c7da1c01f1f239e68c2173ac5748b8c5798271e43bdcee68f51f97cd0ca92bd5",
        "before_after_code_files": [
          "manifest.uuid||manifest.uuid",
          "src/whereexpr.c||src/whereexpr.c",
          "test/rowvalue.test||test/rowvalue.test"
        ]
      },
      "candidate_patch_features": {
        "candidate_earlier_than_patch": 1,
        "same_branch_evolution": 1,
        "olp_code_files": {
          "patch": [
            "manifest.uuid||manifest.uuid"
          ],
          "candidate": [
            "manifest.uuid||manifest.uuid"
          ]
        }
      },
      "candidate_diff": {
        "manifest.uuid||manifest.uuid": [
          "File: manifest.uuid -> manifest.uuid",
          "--- Hunk 1 ---",
          "[Context before]",
          "[No context available]",
          "",
          "[Removed Lines]",
          "1: 9ff80a9bf8fee776e2f282d0597215b77d48093ebc71d047ad1457da0582ddbc",
          "",
          "[Added Lines]",
          "[None]",
          "",
          "---------------"
        ],
        "src/whereexpr.c||src/whereexpr.c": [
          "File: src/whereexpr.c -> src/whereexpr.c",
          "--- Hunk 1 ---",
          "[Context before]",
          "113: static u16 exprCommute(Parse *pParse, Expr *pExpr){",
          "116:     pExpr->flags ^= EP_Commuted;",
          "117:   }",
          "118:   SWAP(Expr*,pExpr->pRight,pExpr->pLeft);",
          "",
          "[Removed Lines]",
          "114:   if( sqlite3BinaryCompareCollSeq(pParse, pExpr->pLeft, pExpr->pRight) !=",
          "115:       sqlite3BinaryCompareCollSeq(pParse, pExpr->pRight, pExpr->pLeft) ){",
          "",
          "[Added Lines]",
          "114:   if( pExpr->pLeft->op==TK_VECTOR",
          "115:    || pExpr->pRight->op==TK_VECTOR",
          "116:    || sqlite3BinaryCompareCollSeq(pParse, pExpr->pLeft, pExpr->pRight) !=",
          "117:       sqlite3BinaryCompareCollSeq(pParse, pExpr->pRight, pExpr->pLeft)",
          "118:   ){",
          "",
          "---------------"
        ],
        "test/rowvalue.test||test/rowvalue.test": [
          "File: test/rowvalue.test -> test/rowvalue.test",
          "--- Hunk 1 ---",
          "[Context before]",
          "570:   SELECT (SELECT 5,6 UNION SELECT 3,4 ORDER BY 1 DESC) IN (SELECT 5,6);",
          "571: } {1 0 1 0 0 1 0 1}",
          "573: finish_test",
          "",
          "[Removed Lines]",
          "[None]",
          "",
          "[Added Lines]",
          "573: # 2019-10-21 Ticket b47e3627ecaadbde",
          "574: #",
          "575: do_execsql_test 23.100 {",
          "576:   DROP TABLE IF EXISTS t0;",
          "577:   CREATE TABLE t0(aa COLLATE NOCASE, bb);",
          "578:   INSERT INTO t0 VALUES('a', 'A');",
          "579:   SELECT (+bb,1) >= (aa, 1), (aa,1)<=(+bb,1) FROM t0;",
          "580:   SELECT 2 FROM t0 WHERE (+bb,1) >= (aa,1);",
          "581:   SELECT 3 FROM t0 WHERE (aa,1) <= (+bb,1);",
          "582: } {0 1 3}",
          "583: do_execsql_test 23.110 {",
          "584:   SELECT (SELECT +bb,1) >= (aa, 1), (aa,1)<=(SELECT +bb,1) FROM t0;",
          "585:   SELECT 2 FROM t0 WHERE (SELECT +bb,1) >= (aa,1);",
          "586:   SELECT 3 FROM t0 WHERE (aa,1) <= (SELECT +bb,1);",
          "587: } {0 1 3}",
          "",
          "---------------"
        ]
      }
    },
    {
      "candidate_hash": "ba14c69b4fc447c3749308a3d889b0da55083e5d",
      "candidate_info": {
        "commit_hash": "ba14c69b4fc447c3749308a3d889b0da55083e5d",
        "repo": "sqlite/sqlite",
        "commit_url": "https://github.com/sqlite/sqlite/commit/ba14c69b4fc447c3749308a3d889b0da55083e5d",
        "files": [
          "manifest",
          "manifest.uuid",
          "src/btree.c",
          "test/corruptL.test"
        ],
        "message": "Fix a couple of assert() statments in btree.c that could fail with corrupt databases.\n\nFossilOrigin-Name: 5eb5e8289fa71e5e29e081d33d4a59c64b463bf6b06d7070c05c46d77d808ad4",
        "before_after_code_files": [
          "manifest.uuid||manifest.uuid",
          "src/btree.c||src/btree.c",
          "test/corruptL.test||test/corruptL.test"
        ]
      },
      "candidate_patch_features": {
        "candidate_earlier_than_patch": 1,
        "same_branch_evolution": 1,
        "olp_code_files": {
          "patch": [
            "manifest.uuid||manifest.uuid"
          ],
          "candidate": [
            "manifest.uuid||manifest.uuid"
          ]
        }
      },
      "candidate_diff": {
        "manifest.uuid||manifest.uuid": [
          "File: manifest.uuid -> manifest.uuid",
          "--- Hunk 1 ---",
          "[Context before]",
          "[No context available]",
          "",
          "[Removed Lines]",
          "1: d0d5689371577b2861d4a9464443d055f3256f3f51d89e0388233a4cbe2601ee",
          "",
          "[Added Lines]",
          "[None]",
          "",
          "---------------"
        ],
        "src/btree.c||src/btree.c": [
          "File: src/btree.c -> src/btree.c",
          "--- Hunk 1 ---",
          "[Context before]",
          "6110:     TRACE((\"ALLOCATE: %d from end of file\\n\", *pPgno));",
          "6111:   }",
          "6115: end_allocate_page:",
          "6116:   releasePage(pTrunk);",
          "",
          "[Removed Lines]",
          "6113:   assert( *pPgno!=PENDING_BYTE_PAGE(pBt) );",
          "",
          "[Added Lines]",
          "6113:   assert( CORRUPT_DB || *pPgno!=PENDING_BYTE_PAGE(pBt) );",
          "",
          "---------------",
          "--- Hunk 2 ---",
          "[Context before]",
          "7175:     CellArray b;",
          "7177:     assert( sqlite3PagerIswriteable(pNew->pDbPage) );",
          "7179:     zeroPage(pNew, PTF_INTKEY|PTF_LEAFDATA|PTF_LEAF);",
          "7180:     b.nCell = 1;",
          "7181:     b.pRef = pPage;",
          "",
          "[Removed Lines]",
          "7178:     assert( pPage->aData[0]==(PTF_INTKEY|PTF_LEAFDATA|PTF_LEAF) );",
          "",
          "[Added Lines]",
          "7178:     assert( CORRUPT_DB || pPage->aData[0]==(PTF_INTKEY|PTF_LEAFDATA|PTF_LEAF) );",
          "",
          "---------------"
        ],
        "test/corruptL.test||test/corruptL.test": [
          "File: test/corruptL.test -> test/corruptL.test",
          "--- Hunk 1 ---",
          "[Context before]",
          "376: } {1 {database disk image is malformed}}",
          "379: finish_test",
          "",
          "[Removed Lines]",
          "[None]",
          "",
          "[Added Lines]",
          "379: #-------------------------------------------------------------------------",
          "380: reset_db",
          "381: do_test 5.0 {",
          "382:   sqlite3 db {}",
          "383:   db deserialize [decode_hexdb {",
          "384: | size 192512 pagesize 4096 filename crash-9ae5502296c949.db",
          "385: | page 1 offset 0",
          "386: |      0: 53 51 4c 69 74 65 20 66 6f 72 6d 61 74 20 33 00   SQLite format 3.",
          "387: |     16: 10 00 01 01 00 40 20 20 00 00 00 00 00 00 00 2f   .....@  ......./",
          "388: |     32: 00 00 00 1b 00 00 00 13 00 00 00 03 00 00 00 04   ................",
          "389: |     48: 00 00 00 00 00 00 00 06 00 00 00 01 00 00 00 00   ................",
          "390: |     64: 00 00 00 01 00 00 00 00 00 00 00 00 00 00 00 00   ................",
          "391: |     96: 00 00 00 00 0d 00 00 00 04 0e e2 00 0f 96 0f 44   ...............D",
          "392: |    112: 0f 10 0e e2 00 00 00 00 00 00 00 00 00 00 00 00   ................",
          "393: |   3808: 00 00 2c 04 06 17 15 11 01 41 69 6e 64 65 78 74   ..,......Aindext",
          "394: |   3824: 31 78 32 74 31 06 43 52 45 41 54 45 20 49 4e 44   1x2t1.CREATE IND",
          "395: |   3840: 45 58 20 74 31 78 32 20 4f 4e 20 74 31 28 62 29   EX t1x2 ON t1(b)",
          "396: |   3856: 32 03 06 17 15 11 01 4d 69 6e 64 65 78 74 31 78   2......Mindext1x",
          "397: |   3872: 31 74 31 05 43 52 45 41 54 45 20 49 4e 44 45 58   1t1.CREATE INDEX",
          "398: |   3888: 20 74 31 78 31 20 4f 4e 20 74 31 28 67 2b 68 2c    t1x1 ON t1(g+h,",
          "399: |   3904: 6a 2c 6b 29 50 02 06 17 2b 2b 01 59 74 61 62 6c   j,k)P...++.Ytabl",
          "400: |   3920: 65 73 71 6c 69 74 65 5f 73 65 71 75 65 6e 63 65   esqlite_sequence",
          "401: |   3936: 73 71 6c 69 74 65 5f 73 65 71 75 65 6e 63 65 04   sqlite_sequence.",
          "402: |   3952: 43 52 45 41 54 45 20 54 41 42 4c 45 20 73 71 6c   CREATE TABLE sql",
          "403: |   3968: 69 74 65 5f 73 65 71 75 65 6e 63 65 28 6e 61 6d   ite_sequence(nam",
          "404: |   3984: 65 2c 73 65 71 29 68 01 07 17 11 11 01 81 3b 74   e,seq)h.......;t",
          "405: |   4000: 61 62 6c 65 74 31 74 31 03 43 52 45 41 54 45 20   ablet1t1.CREATE",
          "406: |   4016: 54 41 42 4c 45 20 74 31 28 61 20 49 4e 54 45 47   TABLE t1(a INTEG",
          "407: |   4032: 45 52 20 50 52 49 4d 41 52 59 20 4b 45 59 20 41   ER PRIMARY KEY A",
          "408: |   4048: 55 54 4f 49 4e 43 52 45 4d 45 4e 54 2c 0a 62 2c   UTOINCREMENT,.b,",
          "409: |   4064: 63 2c 64 2c 65 2c 66 2c 67 2c 68 2c 6a 2c 6b 2c   c,d,e,f,g,h,j,k,",
          "410: |   4080: 6c 2c 6d 2c 6e 2c 6f 2c 70 2c 71 2c 72 2c 73 29   l,m,n,o,p,q,r,s)",
          "411: | page 2 offset 4096",
          "412: |      0: 01 00 00 00 00 01 00 00 00 00 01 00 00 00 00 01   ................",
          "413: |     16: 00 00 00 00 02 10 00 00 00 05 00 00 00 03 02 00   ................",
          "414: |     32: 00 00 00 05 00 00 00 03 02 00 00 00 00 05 00 00   ................",
          "415: |     48: 00 03 02 00 00 00 00 05 00 00 00 03 02 00 00 00   ................",
          "416: |     64: 00 05 00 00 00 03 02 00 00 00 00 05 00 00 00 03   ................",
          "417: |     80: 02 00 00 00 00 05 00 00 00 03 02 00 00 00 00 05   ................",
          "418: |     96: 00 00 00 03 02 00 00 00 00 05 00 00 00 03 05 00   ................",
          "419: |    112: 00 00 03 03 00 00 00 23 02 00 00 00 00 03 00 00   .......#........",
          "420: |    128: 00 23 02 00 00 00 00 03 00 00 00 23 02 00 00 00   .#.........#....",
          "421: |    144: 00 03 00 00 00 23 02 00 00 00 00 03 00 00 00 23   .....#.........#",
          "422: |    160: 05 00 00 00 06 05 00 00 00 06 02 00 00 00 00 03   ................",
          "423: |    176: 00 00 00 06 02 00 00 00 00 03 00 00 00 24 02 00   .............$..",
          "424: |    192: 00 00 00 03 00 00 00 24 02 00 00 00 00 03 00 00   .......$........",
          "425: |    208: 00 24 02 00 00 00 00 02 00 00 00 00 03 00 00 00   .$..............",
          "426: |    224: 24 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00   $...............",
          "427: | page 3 offset 8192",
          "428: |      0: 05 00 00 00 09 0f d0 00 00 00 00 19 0f fb 0f f6   ................",
          "429: |     16: 0f f1 0f ec 0f e7 0f e2 0f dc 0f d6 0f d0 0f a0   ................",
          "430: |     32: 0f a0 0f a0 0f a0 0f a0 0f a0 0f a0 0f a0 0f a0   ................",
          "431: |   1072: 00 97 4c 0a 14 00 ae 7c 00 00 00 00 00 00 00 00   ..L....|........",
          "432: |   1088: 00 00 00 00 00 00 00 09 00 00 00 00 00 00 00 00   ................",
          "433: |   4000: 0f ac 00 06 00 00 00 00 00 30 00 00 00 00 00 00   .........0......",
          "434: |   4048: 00 00 00 16 81 2a 00 00 00 14 81 16 00 00 00 12   .....*..........",
          "435: |   4064: 81 02 00 00 00 10 6e 00 00 00 0e 5a 00 00 00 0c   ......n....Z....",
          "436: |   4080: 46 00 00 00 0a 32 00 00 00 08 1e 00 00 00 18 0a   F....2..........",
          "437: | page 4 offset 12288",
          "438: |      0: 0d 00 00 00 01 0f f7 00 0f f7 00 00 00 00 00 00   ................",
          "439: |   4080: 00 00 00 00 00 00 00 07 01 03 11 02 74 31 00 be   ............t1..",
          "440: | page 5 offset 16384",
          "441: |      0: 0a 0f 7c 00 0a 0f 74 00 0f f9 0f eb 0f dd 0f cf   ..|...t.........",
          "442: |     16: 0f c1 0f b3 0f a4 0f 94 0f 84 0f 74 0f 74 0f 74   ...........t.t.t",
          "443: |     32: 0f 74 0f 74 0f 74 0f 74 0f 74 0f 74 0f 74 00 00   .t.t.t.t.t.t.t..",
          "444: |   3952: 00 00 00 00 07 05 00 00 00 02 00 be 0f 8c 00 08   ................",
          "445: |   3968: 00 00 00 00 07 05 00 00 00 02 00 aa 0f 9c 00 08   ................",
          "446: |   3984: 00 00 00 00 07 05 00 00 00 02 00 96 0f ac 00 08   ................",
          "447: |   4000: 00 00 00 00 07 05 00 00 00 02 00 82 0f ba 00 07   ................",
          "448: |   4016: 00 00 00 06 05 00 00 00 01 6e 0f c8 00 07 00 00   .........n......",
          "449: |   4032: 00 06 05 00 00 00 01 5a 0f d6 00 07 00 00 00 06   .......Z........",
          "450: |   4048: 05 00 00 00 01 46 0f e4 00 07 00 00 00 06 05 00   .....F..........",
          "451: |   4064: 00 00 01 32 0f f2 00 07 00 00 00 06 05 00 00 00   ...2............",
          "452: |   4080: 01 1e 00 00 00 07 00 00 00 06 05 00 00 00 01 0a   ................",
          "453: | page 6 offset 20480",
          "454: |      0: 02 00 00 00 01 0e 0d 00 00 00 00 24 0e 0d 0c 1a   ...........$....",
          "455: |     16: 06 55 04 66 02 77 00 88 00 00 00 00 00 00 00 00   .U.f.w..........",
          "456: |    128: 00 00 00 00 00 00 00 00 97 3d 04 ae 7c 01 00 00   .........=..|...",
          "457: |    624: 00 00 00 00 00 00 21 97 3d 04 ae 7c 01 00 00 00   ......!.=..|....",
          "458: |   1120: 00 00 00 00 00 20 97 3d 04 ae 7c 01 00 00 00 00   ..... .=..|.....",
          "459: |   1616: 00 00 00 00 1f 97 3d 04 ae 7c 01 00 00 00 00 00   ......=..|......",
          "460: |   2112: 00 00 00 1e 97 3d 04 ae 7c 01 00 00 00 00 00 00   .....=..|.......",
          "461: |   2608: 00 00 1d 97 3d 04 ae 7c 01 00 00 00 00 00 00 00   ....=..|........",
          "462: |   3088: 00 00 00 00 00 00 00 00 00 00 00 00 01 f3 00 00   ................",
          "463: |   3600: 23 97 3d 04 ae 7c 01 00 00 00 00 00 00 00 00 00   #.=..|..........",
          "464: |   4080: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 26   ...............&",
          "465: | page 8 offset 28672",
          "466: |      0: 0d 00 00 00 01 04 30 00 04 30 00 00 00 00 00 00   ......0..0......",
          "467: |   1072: 97 4d 1e 14 00 ae 7c 00 00 00 00 00 00 00 00 00   .M....|.........",
          "468: |   1088: 00 00 00 00 00 00 01 00 00 00 00 00 00 00 00 00   ................",
          "469: |   4080: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 03   ................",
          "470: | page 10 offset 36864",
          "471: |    256: 0d 00 00 00 01 04 30 00 04 30 00 00 00 00 00 00   ......0..0......",
          "472: |   1072: 97 4d 32 14 00 ae 7c 00 00 00 00 00 00 00 00 00   .M2...|.........",
          "473: |   1088: 00 00 00 00 00 00 01 00 00 00 00 00 00 00 00 00   ................",
          "474: |   4080: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 05   ................",
          "475: | page 12 offset 45056",
          "476: |      0: 0d 00 00 00 01 04 30 00 04 30 00 00 00 00 00 00   ......0..0......",
          "477: |   1072: 97 4d 46 14 00 ae 7c 00 00 00 00 00 00 00 00 00   .MF...|.........",
          "478: |   1088: 00 00 00 00 00 00 01 00 00 00 00 00 00 00 00 00   ................",
          "479: |   4080: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 07   ................",
          "480: | page 14 offset 53248",
          "481: |      0: 0d 00 00 00 01 04 30 00 04 30 00 00 00 00 00 00   ......0..0......",
          "482: |   1072: 97 4d 5a 14 00 ae 7c 00 00 00 00 00 00 00 00 00   .MZ...|.........",
          "483: |   1088: 00 00 00 00 00 00 01 00 00 00 00 00 00 00 00 00   ................",
          "484: |   4080: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 09   ................",
          "485: | page 16 offset 61440",
          "486: |      0: 0d 00 00 00 01 04 30 00 04 30 00 00 00 00 00 00   ......0..0......",
          "487: |   1072: 97 4d 6e 14 00 ae 7c 00 00 00 00 00 00 00 00 00   .Mn...|.........",
          "488: |   1088: 00 00 00 00 00 00 01 00 00 00 00 00 00 00 00 00   ................",
          "489: |   4080: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 0b   ................",
          "490: | page 18 offset 69632",
          "491: |      0: 0d 00 00 00 01 04 2f 00 04 2f 00 00 00 00 00 00   ....../../......",
          "492: |   1056: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 97   ................",
          "493: |   1072: 4d 81 02 14 00 ae 7c 00 00 00 00 00 00 00 00 00   M.....|.........",
          "494: |   1088: 00 00 00 00 00 00 01 00 00 00 00 00 00 00 00 00   ................",
          "495: |   4080: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 0d   ................",
          "496: | page 20 offset 77824",
          "497: |      0: 0d 00 00 00 01 04 2f 00 04 2f 00 00 00 00 00 00   ....../../......",
          "498: |   1056: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 97   ................",
          "499: |   1072: 4d 81 16 14 00 ae 7c 00 00 00 00 00 00 00 00 00   M.....|.........",
          "500: |   1088: 00 00 00 00 00 00 01 00 00 00 00 00 00 00 00 00   ................",
          "501: |   4080: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 0f   ................",
          "502: | page 22 offset 86016",
          "503: |      0: 0d 00 00 00 01 04 2f 00 04 2f 00 00 00 00 00 00   ....../../......",
          "504: |   1056: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 97   ................",
          "505: |   1072: 4d 81 2a 14 00 ae 7c 00 00 00 00 00 00 00 00 00   M.*...|.........",
          "506: |   1088: 00 00 00 00 00 00 01 00 00 00 00 00 00 00 00 00   ................",
          "507: |   4080: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 11   ................",
          "508: | page 24 offset 94208",
          "509: |      0: 0d 00 00 00 01 04 31 00 04 31 00 00 00 00 00 00   ......1..1......",
          "510: |   1072: 00 97 4c 0a 14 00 ae 7c 00 00 00 00 00 00 00 00   ..L....|........",
          "511: |   1088: 00 00 00 00 00 00 00 09 00 00 00 00 00 00 00 00   ................",
          "512: | page 25 offset 98304",
          "513: |      0: 0d 00 00 00 01 04 2f 00 04 2f 00 00 00 00 00 00   ....../../......",
          "514: |   1056: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 97   ................",
          "515: |   1072: 4d 81 3e 14 00 ae 7c 00 00 00 00 00 00 00 00 00   M.>...|.........",
          "516: |   1088: 00 00 00 00 00 00 01 00 00 00 00 00 00 00 00 00   ................",
          "517: |   4080: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 13   ................",
          "518: | page 26 offset 102400",
          "519: |   2512: 00 00 00 00 00 00 00 0a 00 00 00 00 00 00 00 00   ................",
          "520: | page 27 offset 106496",
          "521: |      0: 00 00 00 00 00 00 00 12 00 00 00 07 00 00 00 1d   ................",
          "522: |     16: 00 00 00 09 00 00 00 1f 00 00 00 0b 00 00 00 21   ...............!",
          "523: |     32: 00 00 00 0d 00 00 00 25 00 00 00 0f 00 00 00 19   .......%........",
          "524: |     48: 00 00 00 11 00 00 00 29 00 00 00 13 00 00 00 2b   .......).......+",
          "525: |     64: 00 00 00 15 00 00 00 2d 00 00 00 2e 00 00 00 17   .......-........",
          "526: | page 28 offset 110592",
          "527: |   2512: 00 00 00 00 00 00 00 1e 00 00 00 00 00 00 00 00   ................",
          "528: | page 30 offset 118784",
          "529: |   2512: 00 00 00 00 00 00 00 32 00 00 00 00 00 00 00 00   .......2........",
          "530: | page 32 offset 126976",
          "531: |   2512: 00 00 00 00 00 00 00 46 00 00 00 00 00 00 00 00   .......F........",
          "532: | page 34 offset 135168",
          "533: |   2512: 00 00 00 00 00 00 00 5a 00 00 00 00 00 00 00 00   .......Z........",
          "534: | page 35 offset 139264",
          "535: |      0: 0a 08 44 00 05 02 77 00 0e 11 0a 33 06 55 02 77   ..D...w....3.U.w",
          "536: |     16: 04 66 00 88 00 88 00 88 00 00 00 00 00 00 00 00   .f..............",
          "537: |    128: 00 00 00 00 00 00 00 00 04 66 01 ef 00 00 00 00   .........f......",
          "538: |    624: 00 00 00 00 00 00 00 97 3d 04 ae 7c 01 00 00 00   ........=..|....",
          "539: |   1120: 00 00 00 00 00 20 97 3d 04 ae 7c 01 00 00 00 00   ..... .=..|.....",
          "540: |   1616: 00 00 00 00 22 97 3d 04 ae 7c 01 00 00 00 00 00   ......=..|......",
          "541: |   2112: 00 00 00 1e 0c 22 01 ef 00 00 00 00 00 00 00 00   ................",
          "542: |   2608: 00 00 00 97 3d 04 ae 7c 01 00 00 00 00 00 00 00   ....=..|........",
          "543: |   3104: 00 1c 00 00 01 ef 00 00 00 00 00 00 00 00 00 00   ................",
          "544: |   3600: 00 97 3d 04 ae 7c 01 00 00 00 00 00 00 00 00 00   ..=..|..........",
          "545: |   4080: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 1a   ................",
          "546: | page 36 offset 143360",
          "547: |      0: 0a 08 44 00 04 02 77 00 06 55 02 77 04 66 0e 11   ..D...w..U.w.f..",
          "548: |     16: 00 88 00 88 00 88 0e 11 00 00 00 00 00 00 00 00   ................",
          "549: |    128: 00 00 00 00 00 00 00 00 04 76 01 ef 00 00 00 00   .........v......",
          "550: |    624: 00 00 00 00 00 00 00 97 3e 04 ae 7c 02 00 00 00   ........>..|....",
          "551: |   1120: 00 00 00 00 00 2a 97 3e 04 ae 7c 02 00 00 00 00   .....*.>..|.....",
          "552: |   1616: 00 00 00 00 2c 97 3e 04 ae 7c 02 00 00 00 00 00   ....,.>..|......",
          "553: |   2112: 00 00 00 28 00 00 05 cd 00 00 00 00 00 00 00 00   ...(............",
          "554: |   3600: 00 97 3e 04 ae 7c 02 00 00 00 00 00 00 00 00 00   ..>..|..........",
          "555: |   4080: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 2f   .............../",
          "556: | page 38 offset 151552",
          "557: |   2512: 00 00 00 00 00 00 00 6e 00 00 00 00 00 00 00 00   .......n........",
          "558: | page 40 offset 159744",
          "559: |   2512: 00 00 00 00 00 00 00 00 82 00 00 00 00 00 00 00   ................",
          "560: | page 42 offset 167936",
          "561: |   2512: 00 00 00 00 00 00 00 00 96 00 00 00 00 00 00 00   ................",
          "562: | page 44 offset 176128",
          "563: |   2512: 00 00 00 00 00 00 00 00 aa 00 00 00 00 00 00 00   ................",
          "564: | page 47 offset 188416",
          "565: |   2512: 00 00 00 00 00 00 00 00 be 00 00 00 00 00 00 00   ................",
          "566: | end crash-9ae5502296c949.db",
          "567: }]} {}",
          "569: do_catchsql_test 5.1 {",
          "570:   INSERT INTO t1(b) VALUES(zeroblob(40000));",
          "571: } {1 {database disk image is malformed}}",
          "573: do_catchsql_test 5.2 {",
          "574:   DROP INDEX t1x2;",
          "575: } {0 {}}",
          "577: do_catchsql_test 5.3 {",
          "578:   INSERT INTO t1(b) VALUES(zeroblob(40000));",
          "579: } {1 {database disk image is malformed}}",
          "",
          "---------------"
        ]
      }
    },
    {
      "candidate_hash": "edf8a7bf5712a7eaf51c6033d23e29d22aa14df3",
      "candidate_info": {
        "commit_hash": "edf8a7bf5712a7eaf51c6033d23e29d22aa14df3",
        "repo": "sqlite/sqlite",
        "commit_url": "https://github.com/sqlite/sqlite/commit/edf8a7bf5712a7eaf51c6033d23e29d22aa14df3",
        "files": [
          "manifest",
          "manifest.uuid",
          "src/os_unix.c"
        ],
        "message": "In the previous check-in, the variable should be openMode, not openFlags.\n\nFossilOrigin-Name: 77b0db22d6c7a031f332bfcf1c8fcd94e464de9f2396f0327ee761a30ebc8b60",
        "before_after_code_files": [
          "manifest.uuid||manifest.uuid",
          "src/os_unix.c||src/os_unix.c"
        ]
      },
      "candidate_patch_features": {
        "candidate_earlier_than_patch": 1,
        "same_branch_evolution": 1,
        "olp_code_files": {
          "patch": [
            "manifest.uuid||manifest.uuid"
          ],
          "candidate": [
            "manifest.uuid||manifest.uuid"
          ]
        }
      },
      "candidate_diff": {
        "manifest.uuid||manifest.uuid": [
          "File: manifest.uuid -> manifest.uuid",
          "--- Hunk 1 ---",
          "[Context before]",
          "[No context available]",
          "",
          "[Removed Lines]",
          "1: ab853724a7e01ca32167d294c3c80d6632e805bdf39b6d56db82226a00ad72dc",
          "",
          "[Added Lines]",
          "[None]",
          "",
          "---------------"
        ],
        "src/os_unix.c||src/os_unix.c": [
          "File: src/os_unix.c -> src/os_unix.c",
          "--- Hunk 1 ---",
          "[Context before]",
          "6075:       robustFchown(fd, uid, gid);",
          "6076:     }",
          "6077:   }",
          "",
          "[Removed Lines]",
          "6074:     if( openFlags && (flags & (SQLITE_OPEN_WAL|SQLITE_OPEN_MAIN_JOURNAL))!=0 ){",
          "",
          "[Added Lines]",
          "6074:     if( openMode && (flags & (SQLITE_OPEN_WAL|SQLITE_OPEN_MAIN_JOURNAL))!=0 ){",
          "",
          "---------------"
        ]
      }
    }
  ]
}