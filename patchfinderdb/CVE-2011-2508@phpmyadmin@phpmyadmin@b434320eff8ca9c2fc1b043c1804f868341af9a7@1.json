{
  "cve_id": "CVE-2011-2508",
  "cve_desc": "Directory traversal vulnerability in libraries/display_tbl.lib.php in phpMyAdmin 3.x before 3.3.10.2 and 3.4.x before 3.4.3.1, when a certain MIME transformation feature is enabled, allows remote authenticated users to include and execute arbitrary local files via a .. (dot dot) in a GLOBALS[mime_map][$meta->name][transformation] parameter.",
  "repo": "phpmyadmin/phpmyadmin",
  "patch_hash": "b434320eff8ca9c2fc1b043c1804f868341af9a7",
  "patch_info": {
    "commit_hash": "b434320eff8ca9c2fc1b043c1804f868341af9a7",
    "repo": "phpmyadmin/phpmyadmin",
    "commit_url": "https://github.com/phpmyadmin/phpmyadmin/commit/b434320eff8ca9c2fc1b043c1804f868341af9a7",
    "files": [
      "ChangeLog",
      "libraries/display_tbl.lib.php"
    ],
    "message": "Fixed filtering of a file path, which allowed for directory traversal, see PMASA-2011-8",
    "before_after_code_files": [
      "libraries/display_tbl.lib.php||libraries/display_tbl.lib.php"
    ]
  },
  "patch_diff": {
    "libraries/display_tbl.lib.php||libraries/display_tbl.lib.php": [
      "File: libraries/display_tbl.lib.php -> libraries/display_tbl.lib.php",
      "--- Hunk 1 ---",
      "[Context before]",
      "1308:             if ($GLOBALS['cfgRelation']['mimework'] && $GLOBALS['cfg']['BrowseMIME']) {",
      "1310:                 if (isset($GLOBALS['mime_map'][$meta->name]['mimetype']) && isset($GLOBALS['mime_map'][$meta->name]['transformation']) && !empty($GLOBALS['mime_map'][$meta->name]['transformation'])) {",
      "1313:                     if (file_exists('./libraries/transformations/' . $include_file)) {",
      "1314:                         $transformfunction_name = str_replace('.inc.php', '', $GLOBALS['mime_map'][$meta->name]['transformation']);",
      "",
      "[Removed Lines]",
      "1311:                     $include_file = $GLOBALS['mime_map'][$meta->name]['transformation'];",
      "",
      "[Added Lines]",
      "1311:                     $include_file = PMA_securePath($GLOBALS['mime_map'][$meta->name]['transformation']);",
      "",
      "---------------"
    ]
  },
  "candidates": [
    {
      "candidate_hash": "4cffda8ced2134a5921ffc5b8563c075c591812d",
      "candidate_info": {
        "commit_hash": "4cffda8ced2134a5921ffc5b8563c075c591812d",
        "repo": "phpmyadmin/phpmyadmin",
        "commit_url": "https://github.com/phpmyadmin/phpmyadmin/commit/4cffda8ced2134a5921ffc5b8563c075c591812d",
        "files": [
          "libraries/display_tbl.lib.php"
        ],
        "message": "Fix some checkstyle CloseBracketLine, ContentAfterOpenBracket warnings",
        "before_after_code_files": [
          "libraries/display_tbl.lib.php||libraries/display_tbl.lib.php"
        ]
      },
      "candidate_patch_features": {
        "candidate_earlier_than_patch": 0,
        "same_branch_evolution": 1,
        "olp_code_files": {
          "patch": [
            "libraries/display_tbl.lib.php||libraries/display_tbl.lib.php"
          ],
          "candidate": [
            "libraries/display_tbl.lib.php||libraries/display_tbl.lib.php"
          ]
        }
      },
      "candidate_diff": {
        "libraries/display_tbl.lib.php||libraries/display_tbl.lib.php": [
          "File: libraries/display_tbl.lib.php -> libraries/display_tbl.lib.php",
          "--- Hunk 1 ---",
          "[Context before]",
          "110:             $tmp = preg_match(",
          "111:                 '@^SHOW[[:space:]]+(VARIABLES|(FULL[[:space:]]+)?'",
          "115:                 && strpos(' ' . strtoupper($which[1]), 'PROCESSLIST') > 0) {",
          "116:                 $do_display['edit_lnk'] = 'nn'; // no edit link",
          "117:                 $do_display['del_lnk']  = 'kp'; // \"kill process\" type edit link",
          "",
          "[Removed Lines]",
          "112:                 . 'PROCESSLIST|STATUS|TABLE|GRANTS|CREATE|LOGS|DATABASES|FIELDS)@i',",
          "113:                 $GLOBALS['sql_query'], $which);",
          "114:             if (isset($which[1])",
          "",
          "[Added Lines]",
          "112:                 . 'PROCESSLIST|STATUS|TABLE|GRANTS|CREATE|LOGS|DATABASES|FIELDS)@i',",
          "113:                 $GLOBALS['sql_query'], $which",
          "114:                 );",
          "115:             if (isset($which[1])",
          "",
          "---------------",
          "--- Hunk 2 ---",
          "[Context before]",
          "140:                             || $do_display['ins_row'] != '0');",
          "142:                 if ($is_link",
          "144:                         || $fields_meta[$i]->table != $prev_table)",
          "145:                 ) {",
          "146:                     $do_display['edit_lnk'] = 'nn'; // don't display links",
          "147:                     $do_display['del_lnk']  = 'nn';",
          "",
          "[Removed Lines]",
          "143:                     && ($fields_meta[$i]->table == ''",
          "",
          "[Added Lines]",
          "144:                     && ($fields_meta[$i]->table == ''",
          "",
          "---------------",
          "--- Hunk 3 ---",
          "[Context before]",
          "184:             && ! PMA_Table::isView($db, $table)) {",
          "",
          "[Removed Lines]",
          "182:         if (isset($unlim_num_rows)",
          "183:             && $unlim_num_rows < 2",
          "",
          "[Added Lines]",
          "183:         if (isset($unlim_num_rows)",
          "184:             && $unlim_num_rows < 2",
          "",
          "---------------",
          "--- Hunk 4 ---",
          "[Context before]",
          "247:         $caption_output .= $caption;",
          "248:     }",
          "251:         || 'both' === $GLOBALS['cfg']['NavigationBarIconic']) {",
          "252:         $caption_output .= '&nbsp;' . $title;",
          "253:     }",
          "",
          "[Removed Lines]",
          "250:     if (false === $GLOBALS['cfg']['NavigationBarIconic']",
          "",
          "[Added Lines]",
          "251:     if (false === $GLOBALS['cfg']['NavigationBarIconic']",
          "",
          "---------------",
          "--- Hunk 5 ---",
          "[Context before]",
          "256: <td>",
          "257:     <form action=\"sql.php\" method=\"post\" <?php echo $onsubmit; ?>>",
          "258:         <?php echo PMA_generate_common_hidden_inputs($db, $table); ?>",
          "260:             echo $html_sql_query; ?>\" />",
          "261:         <input type=\"hidden\" name=\"pos\" value=\"<?php echo $pos; ?>\" />",
          "262:         <input type=\"hidden\" name=\"goto\" value=\"<?php echo $goto; ?>\" />",
          "263:         <?php echo $input_for_real_end; ?>",
          "265:             echo ($GLOBALS['cfg']['AjaxEnable'] ? ' class=\"ajax\" ' : '' );",
          "267:             echo $title_output . $onclick; ?> />",
          "268:     </form>",
          "269: </td>",
          "",
          "[Removed Lines]",
          "259:         <input type=\"hidden\" name=\"sql_query\" value=\"<?php",
          "264:         <input type=\"submit\" name=\"navig\" <?php",
          "266:             ?> value=\"<?php echo $caption_output; ?>\"<?php",
          "",
          "[Added Lines]",
          "260:         <input type=\"hidden\" name=\"sql_query\" value=\"<?php",
          "265:         <input type=\"submit\" name=\"navig\" <?php",
          "267:             ?> value=\"<?php echo $caption_output; ?>\"<?php",
          "",
          "---------------",
          "--- Hunk 6 ---",
          "[Context before]",
          "298:     $id_for_direction_dropdown)",
          "299: {",
          "300:     global $db, $table, $goto;",
          "",
          "[Removed Lines]",
          "297: function PMA_displayTableNavigation($pos_next, $pos_prev, $sql_query,",
          "",
          "[Added Lines]",
          "298: function PMA_displayTableNavigation($pos_next, $pos_prev, $sql_query,",
          "",
          "---------------",
          "--- Hunk 7 ---",
          "[Context before]",
          "320:     <td class=\"navigation_separator\"></td>",
          "321:     <?php",
          "324:         && $_SESSION['tmp_user_values']['max_rows'] != 'all') {",
          "325:         PMA_displayTableNavigationOneButton(",
          "327:         PMA_displayTableNavigationOneButton(",
          "331:     } // end move back",
          "",
          "[Removed Lines]",
          "323:     if ($_SESSION['tmp_user_values']['pos']",
          "326:             '&lt;&lt;', _pgettext('First page', 'Begin'), 0, $html_sql_query);",
          "328:             '&lt;', _pgettext('Previous page', 'Previous'), $pos_prev,",
          "329:             $html_sql_query);",
          "",
          "[Added Lines]",
          "324:     if ($_SESSION['tmp_user_values']['pos']",
          "327:             '&lt;&lt;', _pgettext('First page', 'Begin'), 0, $html_sql_query",
          "328:             );",
          "330:             '&lt;', _pgettext('Previous page', 'Previous'), $pos_prev,",
          "331:             $html_sql_query",
          "332:             );",
          "",
          "---------------",
          "--- Hunk 8 ---",
          "[Context before]",
          "336:     if ('all' != $_SESSION['tmp_user_values']['max_rows']) { //if1",
          "342:         if ($nbTotalPage > 1) { //if2",
          "343:        ?>",
          "",
          "[Removed Lines]",
          "337:         $pageNow = @floor($_SESSION['tmp_user_values']['pos']",
          "338:             / $_SESSION['tmp_user_values']['max_rows']) + 1;",
          "339:         $nbTotalPage = @ceil($unlim_num_rows",
          "340:             / $_SESSION['tmp_user_values']['max_rows']);",
          "",
          "[Added Lines]",
          "340:         $pageNow = @floor(",
          "341:             $_SESSION['tmp_user_values']['pos']",
          "342:             / $_SESSION['tmp_user_values']['max_rows']",
          "343:             ) + 1;",
          "344:         $nbTotalPage = @ceil(",
          "345:             $unlim_num_rows",
          "346:             / $_SESSION['tmp_user_values']['max_rows']",
          "347:             );",
          "",
          "---------------",
          "--- Hunk 9 ---",
          "[Context before]",
          "371:     } //_if1",
          "376:             || ($GLOBALS['cfg']['MaxRows'] * 5 >= $unlim_num_rows))) {",
          "377:         echo \"\\n\";",
          "378:         ?>",
          "379:     <td>",
          "380:         <form action=\"sql.php\" method=\"post\">",
          "381:             <?php echo PMA_generate_common_hidden_inputs($db, $table); ?>",
          "383:                 echo $html_sql_query; ?>\" />",
          "384:             <input type=\"hidden\" name=\"pos\" value=\"0\" />",
          "385:             <input type=\"hidden\" name=\"session_max_rows\" value=\"all\" />",
          "386:             <input type=\"hidden\" name=\"goto\" value=\"<?php echo $goto; ?>\" />",
          "388:                 echo __('Show all'); ?>\" />",
          "389:         </form>",
          "390:     </td>",
          "",
          "[Removed Lines]",
          "374:     if (($num_rows < $unlim_num_rows)",
          "375:         && ($GLOBALS['cfg']['ShowAll']",
          "382:             <input type=\"hidden\" name=\"sql_query\" value=\"<?php",
          "387:             <input type=\"submit\" name=\"navig\" value=\"<?php",
          "",
          "[Added Lines]",
          "381:     if (($num_rows < $unlim_num_rows)",
          "382:         && ($GLOBALS['cfg']['ShowAll']",
          "389:             <input type=\"hidden\" name=\"sql_query\" value=\"<?php",
          "394:             <input type=\"submit\" name=\"navig\" value=\"<?php",
          "",
          "---------------",
          "--- Hunk 10 ---",
          "[Context before]",
          "392:     } // end show all",
          "396:             + $_SESSION['tmp_user_values']['max_rows'] < $unlim_num_rows)",
          "397:         && $num_rows >= $_SESSION['tmp_user_values']['max_rows']",
          "398:         && $_SESSION['tmp_user_values']['max_rows'] != 'all'",
          "",
          "[Removed Lines]",
          "395:     if (($_SESSION['tmp_user_values']['pos']",
          "",
          "[Added Lines]",
          "402:     if (($_SESSION['tmp_user_values']['pos']",
          "",
          "---------------",
          "--- Hunk 11 ---",
          "[Context before]",
          "419:         PMA_displayTableNavigationOneButton(",
          "420:             '&gt;&gt;',",
          "421:             _pgettext('Last page', 'End'),",
          "424:             $html_sql_query,",
          "427:                         + $_SESSION['tmp_user_values']['max_rows'] < $unlim_num_rows",
          "430:                 : 'false') . '\"',",
          "431:             $input_for_real_end,",
          "432:             $onclick",
          "",
          "[Removed Lines]",
          "422:             @((ceil($unlim_num_rows / $_SESSION['tmp_user_values']['max_rows'])- 1)",
          "425:             'onsubmit=\"return '",
          "426:                 . (($_SESSION['tmp_user_values']['pos']",
          "428:                     && $num_rows >= $_SESSION['tmp_user_values']['max_rows'])",
          "429:                 ? 'true'",
          "",
          "[Added Lines]",
          "429:             @((ceil($unlim_num_rows / $_SESSION['tmp_user_values']['max_rows'])- 1)",
          "432:             'onsubmit=\"return '",
          "433:                 . (($_SESSION['tmp_user_values']['pos']",
          "435:                     && $num_rows >= $_SESSION['tmp_user_values']['max_rows'])",
          "436:                 ? 'true'",
          "",
          "---------------",
          "--- Hunk 12 ---",
          "[Context before]",
          "458:     <td class=\"navigation_goto\">",
          "459:         <form action=\"sql.php\" method=\"post\"",
          "464:     ?>', 0<?php echo $unlim_num_rows > 0 ? ',' . $unlim_num_rows - 1 : ''; ?>))\">",
          "465:             <?php echo PMA_generate_common_hidden_inputs($db, $table); ?>",
          "467:                 echo $html_sql_query; ?>\" />",
          "468:             <input type=\"hidden\" name=\"goto\" value=\"<?php echo $goto; ?>\" />",
          "471:                 ?> value=\"<?php echo __('Show'); ?> :\" />",
          "472:             <?php echo __('Start row') . ': ' . \"\\n\"; ?>",
          "475:                 class=\"textfield\" onfocus=\"this.select()\" />",
          "476:             <?php echo __('Number of rows') . ': ' . \"\\n\"; ?>",
          "481:                 class=\"textfield\" onfocus=\"this.select()\" />",
          "482:         <?php",
          "483:         if ($GLOBALS['cfg']['ShowDisplayDirection']) {",
          "",
          "[Removed Lines]",
          "460:     onsubmit=\"return (checkFormElementInRange(this, 'session_max_rows', '<?php",
          "461:     echo str_replace('\\'', '\\\\\\'', __('%d is not valid row number.'));",
          "462:     ?>', 1) &amp;&amp; checkFormElementInRange(this, 'pos', '<?php",
          "463:     echo str_replace('\\'', '\\\\\\'', __('%d is not valid row number.'));",
          "466:             <input type=\"hidden\" name=\"sql_query\" value=\"<?php",
          "469:             <input type=\"submit\" name=\"navig\" <?php",
          "470:                 echo ($GLOBALS['cfg']['AjaxEnable'] ? ' class=\"ajax\"' : '');",
          "473:             <input type=\"text\" name=\"pos\" size=\"3\" value=\"<?php",
          "474:                 echo (($pos_next >= $unlim_num_rows) ? 0 : $pos_next); ?>\"",
          "477:             <input type=\"text\" name=\"session_max_rows\" size=\"3\" value=\"<?php",
          "478:                 echo (($_SESSION['tmp_user_values']['max_rows'] != 'all')",
          "479:                     ? $_SESSION['tmp_user_values']['max_rows']",
          "480:                     : $GLOBALS['cfg']['MaxRows']); ?>\"",
          "",
          "[Added Lines]",
          "467:     onsubmit=\"return (checkFormElementInRange(this, 'session_max_rows', '<?php",
          "468:     echo str_replace('\\'', '\\\\\\'', __('%d is not valid row number.'));",
          "469:     ?>', 1) &amp;&amp; checkFormElementInRange(this, 'pos', '<?php",
          "470:     echo str_replace('\\'', '\\\\\\'', __('%d is not valid row number.'));",
          "473:             <input type=\"hidden\" name=\"sql_query\" value=\"<?php",
          "476:             <input type=\"submit\" name=\"navig\" <?php",
          "477:                 echo ($GLOBALS['cfg']['AjaxEnable'] ? ' class=\"ajax\"' : '');",
          "480:             <input type=\"text\" name=\"pos\" size=\"3\" value=\"<?php",
          "481:                 echo (($pos_next >= $unlim_num_rows) ? 0 : $pos_next); ?>\"",
          "484:             <input type=\"text\" name=\"session_max_rows\" size=\"3\" value=\"<?php",
          "485:                 echo (($_SESSION['tmp_user_values']['max_rows'] != 'all')",
          "486:                     ? $_SESSION['tmp_user_values']['max_rows']",
          "487:                     : $GLOBALS['cfg']['MaxRows']); ?>\"",
          "",
          "---------------",
          "--- Hunk 13 ---",
          "[Context before]",
          "486:             $choices = array(",
          "487:                 'horizontal'        => __('horizontal'),",
          "488:                 'horizontalflipped' => __('horizontal (rotated headers)'),",
          "493:             unset($choices);",
          "494:         }",
          "496:         printf(",
          "497:             __('Headers every %s rows'),",
          "501:         );",
          "502:         echo \"\\n\";",
          "503:         ?>",
          "",
          "[Removed Lines]",
          "489:                 'vertical'          => __('vertical'));",
          "490:             echo PMA_generate_html_dropdown('disp_direction', $choices,",
          "491:                 $_SESSION['tmp_user_values']['disp_direction'],",
          "492:                 $id_for_direction_dropdown);",
          "498:             '<input type=\"text\" size=\"3\" name=\"repeat_cells\" value=\"'",
          "499:                 . $_SESSION['tmp_user_values']['repeat_cells']",
          "500:                 . '\" class=\"textfield\" />'",
          "",
          "[Added Lines]",
          "496:                 'vertical'          => __('vertical')",
          "497:                 );",
          "498:             echo PMA_generate_html_dropdown(",
          "499:                 'disp_direction', $choices,",
          "500:                 $_SESSION['tmp_user_values']['disp_direction'],",
          "501:                 $id_for_direction_dropdown",
          "502:                 );",
          "508:             '<input type=\"text\" size=\"3\" name=\"repeat_cells\" value=\"'",
          "509:             . $_SESSION['tmp_user_values']['repeat_cells']",
          "510:             . '\" class=\"textfield\" />'",
          "",
          "---------------",
          "--- Hunk 14 ---",
          "[Context before]",
          "543:     $sort_direction)",
          "544: {",
          "545:     global $db, $table, $goto;",
          "",
          "[Removed Lines]",
          "541: function PMA_displayTableHeaders(&$is_display, &$fields_meta, $fields_cnt = 0,",
          "542:     $analyzed_sql = '', $sort_expression, $sort_expression_nodirection,",
          "",
          "[Added Lines]",
          "551: function PMA_displayTableHeaders(&$is_display, &$fields_meta, $fields_cnt = 0,",
          "552:     $analyzed_sql = '', $sort_expression, $sort_expression_nodirection,",
          "",
          "---------------",
          "--- Hunk 15 ---",
          "[Context before]",
          "584:             if ($indexes) {",
          "586:                 if ($_SESSION['tmp_user_values']['disp_direction'] == 'horizontal'",
          "588:                         == 'horizontalflipped'",
          "589:                 ) {",
          "590:                     $span = $fields_cnt;",
          "",
          "[Removed Lines]",
          "587:                     || $_SESSION['tmp_user_values']['disp_direction']",
          "",
          "[Added Lines]",
          "597:                     || $_SESSION['tmp_user_values']['disp_direction']",
          "",
          "---------------",
          "--- Hunk 16 ---",
          "[Context before]",
          "594:                     if ($is_display['del_lnk'] != 'nn') {",
          "595:                         $span++;",
          "596:                     }",
          "598:                         && $is_display['del_lnk'] != 'nn') {",
          "599:                         $span++;",
          "600:                     }",
          "601:                 } else {",
          "604:                 }",
          "606:                 echo '<form action=\"sql.php\" method=\"post\">' . \"\\n\";",
          "607:                 echo PMA_generate_common_hidden_inputs($db, $table);",
          "609:                     . ': <select name=\"sql_query\" class=\"autosubmit\">' . \"\\n\";",
          "610:                 $used_index = false;",
          "611:                 $local_order = (isset($sort_expression) ? $sort_expression : '');",
          "612:                 foreach ($indexes as $index) {",
          "615:                         . '` ASC';",
          "618:                         . '` DESC';",
          "621:                         || $local_order == $desc_sort;",
          "625:                         $unsorted_sql_query_first_part = $my_reg[1];",
          "626:                         $unsorted_sql_query_second_part = $my_reg[2];",
          "627:                     } else {",
          "",
          "[Removed Lines]",
          "597:                     if ($is_display['del_lnk'] != 'kp'",
          "602:                     $span = $num_rows + floor($num_rows",
          "603:                         / $_SESSION['tmp_user_values']['repeat_cells']) + 1;",
          "608:                 echo __('Sort by key')",
          "613:                     $asc_sort = '`'",
          "614:                         . implode('` ASC, `', array_keys($index->getColumns()))",
          "616:                     $desc_sort = '`'",
          "617:                         . implode('` DESC, `', array_keys($index->getColumns()))",
          "619:                     $used_index = $used_index",
          "620:                         || $local_order == $asc_sort",
          "622:                     if (preg_match('@(.*)([[:space:]](LIMIT (.*)|PROCEDURE (.*)|'",
          "623:                             . 'FOR UPDATE|LOCK IN SHARE MODE))@is',",
          "624:                         $unsorted_sql_query, $my_reg)) {",
          "",
          "[Added Lines]",
          "607:                     if ($is_display['del_lnk'] != 'kp'",
          "612:                     $span = $num_rows + floor(",
          "613:                         $num_rows",
          "614:                         / $_SESSION['tmp_user_values']['repeat_cells']",
          "615:                         ) + 1;",
          "620:                 echo __('Sort by key')",
          "625:                     $asc_sort = '`'",
          "626:                         . implode('` ASC, `', array_keys($index->getColumns()))",
          "628:                     $desc_sort = '`'",
          "629:                         . implode('` DESC, `', array_keys($index->getColumns()))",
          "631:                     $used_index = $used_index",
          "632:                         || $local_order == $asc_sort",
          "634:                     if (preg_match(",
          "635:                         '@(.*)([[:space:]](LIMIT (.*)|PROCEDURE (.*)|'",
          "636:                             . 'FOR UPDATE|LOCK IN SHARE MODE))@is',",
          "637:                         $unsorted_sql_query, $my_reg",
          "638:                         )) {",
          "",
          "---------------",
          "--- Hunk 17 ---",
          "[Context before]",
          "629:                         $unsorted_sql_query_second_part = '';",
          "630:                     }",
          "631:                     echo '<option value=\"'",
          "637:                             : '')",
          "638:                         . '>' . htmlspecialchars($index->getName()) . ' ('",
          "639:                         . __('Ascending') . ')</option>';",
          "640:                     echo '<option value=\"'",
          "646:                             : '')",
          "647:                         . '>' . htmlspecialchars($index->getName()) . ' ('",
          "648:                         . __('Descending') . ')</option>';",
          "649:                 }",
          "652:                     . '</option>';",
          "653:                 echo '</select>' . \"\\n\";",
          "654:                 echo '</form>' . \"\\n\";",
          "",
          "[Removed Lines]",
          "632:                         . htmlspecialchars($unsorted_sql_query_first_part  . \"\\n\"",
          "633:                             . ' ORDER BY ' . $asc_sort",
          "634:                             . $unsorted_sql_query_second_part)",
          "635:                         . '\"' . ($local_order == $asc_sort",
          "636:                             ? ' selected=\"selected\"'",
          "641:                         . htmlspecialchars($unsorted_sql_query_first_part . \"\\n\"",
          "642:                             . ' ORDER BY ' . $desc_sort",
          "643:                             . $unsorted_sql_query_second_part)",
          "644:                         . '\"' . ($local_order == $desc_sort",
          "645:                             ? ' selected=\"selected\"'",
          "650:                 echo '<option value=\"' . htmlspecialchars($unsorted_sql_query) . '\"'",
          "651:                     . ($used_index ? '' : ' selected=\"selected\"') . '>' . __('None')",
          "",
          "[Added Lines]",
          "646:                         . htmlspecialchars(",
          "647:                             $unsorted_sql_query_first_part  . \"\\n\"",
          "648:                             . ' ORDER BY ' . $asc_sort",
          "649:                             . $unsorted_sql_query_second_part",
          "650:                             )",
          "651:                         . '\"' . ($local_order == $asc_sort",
          "652:                             ? ' selected=\"selected\"'",
          "657:                         . htmlspecialchars(",
          "658:                             $unsorted_sql_query_first_part . \"\\n\"",
          "659:                             . ' ORDER BY ' . $desc_sort",
          "660:                             . $unsorted_sql_query_second_part",
          "661:                             )",
          "662:                         . '\"' . ($local_order == $desc_sort",
          "663:                             ? ' selected=\"selected\"'",
          "668:                 echo '<option value=\"' . htmlspecialchars($unsorted_sql_query) . '\"'",
          "669:                     . ($used_index ? '' : ' selected=\"selected\"') . '>' . __('None')",
          "",
          "---------------",
          "--- Hunk 18 ---",
          "[Context before]",
          "662:         . $GLOBALS['cfg']['SaveCellsAtOnce'] . '\" />';",
          "663:     echo '<div class=\"common_hidden_inputs\">';",
          "664:     echo PMA_generate_common_hidden_inputs($db, $table);",
          "",
          "[Removed Lines]",
          "661:     echo '<input id=\"save_cells_at_once\" type=\"hidden\" value=\"'",
          "",
          "[Added Lines]",
          "679:     echo '<input id=\"save_cells_at_once\" type=\"hidden\" value=\"'",
          "",
          "---------------",
          "--- Hunk 19 ---",
          "[Context before]",
          "669:         $pmatable = new PMA_Table($GLOBALS['table'], $GLOBALS['db']);",
          "670:         $col_order = $pmatable->getUiProp(PMA_Table::PROP_COLUMN_ORDER);",
          "671:         if ($col_order) {",
          "673:                 . implode(',', $col_order) . '\" />';",
          "674:         }",
          "675:         $col_visib = $pmatable->getUiProp(PMA_Table::PROP_COLUMN_VISIB);",
          "676:         if ($col_visib) {",
          "678:                 . implode(',', $col_visib) . '\" />';",
          "679:         }",
          "681:         if (! PMA_Table::isView($GLOBALS['table'], $GLOBALS['db'])) {",
          "682:             echo '<input id=\"table_create_time\" type=\"hidden\" value=\"'",
          "685:         }",
          "686:     }",
          "",
          "[Removed Lines]",
          "672:             echo '<input id=\"col_order\" type=\"hidden\" value=\"'",
          "677:             echo '<input id=\"col_visib\" type=\"hidden\" value=\"'",
          "683:                . PMA_Table::sGetStatusInfo(",
          "684:                     $GLOBALS['db'], $GLOBALS['table'], 'Create_time') . '\" />';",
          "",
          "[Added Lines]",
          "690:             echo '<input id=\"col_order\" type=\"hidden\" value=\"'",
          "695:             echo '<input id=\"col_visib\" type=\"hidden\" value=\"'",
          "701:                 . PMA_Table::sGetStatusInfo(",
          "702:                 $GLOBALS['db'], $GLOBALS['table'], 'Create_time'",
          "703:                 ) . '\" />';",
          "",
          "---------------",
          "--- Hunk 20 ---",
          "[Context before]",
          "715:             'P'   => __('Partial texts'),",
          "716:             'F'   => __('Full texts')",
          "717:         );",
          "720:         echo '</div>';",
          "",
          "[Removed Lines]",
          "718:         PMA_display_html_radio('display_text', $choices,",
          "719:             $_SESSION['tmp_user_values']['display_text']);",
          "",
          "[Added Lines]",
          "737:         PMA_display_html_radio(",
          "738:             'display_text', $choices,",
          "739:             $_SESSION['tmp_user_values']['display_text']",
          "740:             );",
          "",
          "---------------",
          "--- Hunk 21 ---",
          "[Context before]",
          "739:             $url_params_full_text['display_text'] = 'F';",
          "740:         }",
          "743:             . $tmp_txt . '\" title=\"' . $tmp_txt . '\" />';",
          "744:         $tmp_url = 'sql.php' . PMA_generate_common_url($url_params_full_text);",
          "746:             = PMA_linkOrButton($tmp_url, $tmp_image, array(), false);",
          "747:         unset($tmp_image_file, $tmp_txt, $tmp_url, $tmp_image);",
          "751:             && $GLOBALS['cfgRelation']['displaywork']) {",
          "752:             echo '<div class=\"formelement\">';",
          "753:             $choices = array(",
          "754:                 'K'   => __('Relational key'),",
          "755:                 'D'   => __('Relational display column')",
          "756:             );",
          "759:             echo '</div>';",
          "760:         }",
          "762:         echo '<div class=\"formelement\">';",
          "765:         echo '<br />';",
          "768:         echo '<br />';",
          "772:         echo '</div>';",
          "",
          "[Removed Lines]",
          "742:         $tmp_image = '<img class=\"fulltext\" src=\"' . $tmp_image_file . '\" alt=\"'",
          "745:         $full_or_partial_text_link",
          "750:         if ($GLOBALS['cfgRelation']['relwork']",
          "757:             PMA_display_html_radio('relational_display', $choices,",
          "758:                 $_SESSION['tmp_user_values']['relational_display']);",
          "763:         PMA_display_html_checkbox('display_binary', __('Show binary contents'),",
          "764:             ! empty($_SESSION['tmp_user_values']['display_binary']), false);",
          "766:         PMA_display_html_checkbox('display_blob', __('Show BLOB contents'),",
          "767:             ! empty($_SESSION['tmp_user_values']['display_blob']), false);",
          "769:         PMA_display_html_checkbox('display_binary_as_hex',",
          "770:             __('Show binary contents as HEX'),",
          "771:             ! empty($_SESSION['tmp_user_values']['display_binary_as_hex']), false);",
          "",
          "[Added Lines]",
          "763:         $tmp_image = '<img class=\"fulltext\" src=\"' . $tmp_image_file . '\" alt=\"'",
          "766:         $full_or_partial_text_link",
          "771:         if ($GLOBALS['cfgRelation']['relwork']",
          "778:             PMA_display_html_radio(",
          "779:                 'relational_display', $choices,",
          "780:                 $_SESSION['tmp_user_values']['relational_display']",
          "781:                 );",
          "786:         PMA_display_html_checkbox(",
          "787:             'display_binary', __('Show binary contents'),",
          "788:             ! empty($_SESSION['tmp_user_values']['display_binary']), false",
          "789:             );",
          "791:         PMA_display_html_checkbox(",
          "792:             'display_blob', __('Show BLOB contents'),",
          "793:             ! empty($_SESSION['tmp_user_values']['display_blob']), false",
          "794:             );",
          "796:         PMA_display_html_checkbox(",
          "797:             'display_binary_as_hex', __('Show binary contents as HEX'),",
          "798:             ! empty($_SESSION['tmp_user_values']['display_binary_as_hex']), false",
          "799:             );",
          "",
          "---------------",
          "--- Hunk 22 ---",
          "[Context before]",
          "778:         echo '<div class=\"formelement\">';",
          "782:         echo '</div>';",
          "784:         if (! PMA_DRIZZLE) {",
          "",
          "[Removed Lines]",
          "779:         PMA_display_html_checkbox('hide_transformation',",
          "780:             __('Hide browser transformation'),",
          "781:             ! empty($_SESSION['tmp_user_values']['hide_transformation']), false);",
          "",
          "[Added Lines]",
          "807:         PMA_display_html_checkbox(",
          "808:             'hide_transformation', __('Hide browser transformation'),",
          "809:             ! empty($_SESSION['tmp_user_values']['hide_transformation']), false",
          "810:             );",
          "",
          "---------------",
          "--- Hunk 23 ---",
          "[Context before]",
          "788:                 'WKT'   => __('Well Known Text'),",
          "789:                 'WKB'   => __('Well Known Binary')",
          "790:             );",
          "793:             echo '</div>';",
          "794:         }",
          "",
          "[Removed Lines]",
          "791:             PMA_display_html_radio('geometry_display', $choices,",
          "792:                 $_SESSION['tmp_user_values']['geometry_display']);",
          "",
          "[Added Lines]",
          "820:             PMA_display_html_radio(",
          "821:                 'geometry_display', $choices,",
          "822:                 $_SESSION['tmp_user_values']['geometry_display']",
          "823:                 );",
          "",
          "---------------",
          "--- Hunk 24 ---",
          "[Context before]",
          "831:     if ($_SESSION['tmp_user_values']['disp_direction'] == 'horizontal'",
          "832:         || $_SESSION['tmp_user_values']['disp_direction'] == 'horizontalflipped'",
          "833:     ) {",
          "835:             && $is_display['del_lnk'] != 'nn')",
          "836:                   ? ' colspan=\"4\"'",
          "837:                   : '';",
          "838:     } else {",
          "840:             && $is_display['del_lnk'] != 'nn')",
          "841:                   ? ' rowspan=\"4\"'",
          "842:                   : '';",
          "",
          "[Removed Lines]",
          "834:         $colspan  = ($is_display['edit_lnk'] != 'nn'",
          "839:         $rowspan  = ($is_display['edit_lnk'] != 'nn'",
          "",
          "[Added Lines]",
          "865:         $colspan  = ($is_display['edit_lnk'] != 'nn'",
          "870:         $rowspan  = ($is_display['edit_lnk'] != 'nn'",
          "",
          "---------------",
          "--- Hunk 25 ---",
          "[Context before]",
          "846:     if (($is_display['edit_lnk'] == 'nn' && $is_display['del_lnk'] == 'nn')",
          "847:         && $is_display['text_btn'] == '1'",
          "848:     ) {",
          "850:             && $is_display['del_lnk'] != 'nn') ? 4 : 0;",
          "851:         if ($_SESSION['tmp_user_values']['disp_direction'] == 'horizontal'",
          "852:             || $_SESSION['tmp_user_values']['disp_direction'] == 'horizontalflipped'",
          "",
          "[Removed Lines]",
          "849:         $vertical_display['emptypre'] = ($is_display['edit_lnk'] != 'nn'",
          "",
          "[Added Lines]",
          "880:         $vertical_display['emptypre'] = ($is_display['edit_lnk'] != 'nn'",
          "",
          "---------------",
          "--- Hunk 26 ---",
          "[Context before]",
          "860:         } else {",
          "861:             ?>",
          "862: <tr>",
          "864:         / $_SESSION['tmp_user_values']['repeat_cells']) + 1; ?>\"></th>",
          "865: </tr>",
          "866:             <?php",
          "",
          "[Removed Lines]",
          "863:     <th colspan=\"<?php echo $num_rows + floor($num_rows",
          "",
          "[Added Lines]",
          "894:     <th colspan=\"<?php echo $num_rows + floor($num_rows",
          "",
          "---------------",
          "--- Hunk 27 ---",
          "[Context before]",
          "873:         || $GLOBALS['cfg']['RowActionLinks'] == 'both')",
          "874:         && $is_display['text_btn'] == '1'",
          "875:     ) {",
          "877:             && $is_display['del_lnk'] != 'nn') ? 4 : 0;",
          "878:         if ($_SESSION['tmp_user_values']['disp_direction'] == 'horizontal'",
          "879:             || $_SESSION['tmp_user_values']['disp_direction'] == 'horizontalflipped'",
          "880:         ) {",
          "881:             ?>",
          "883:                     echo $full_or_partial_text_link; ?></th>",
          "884:             <?php",
          "886:         } else {",
          "888:                 '    <th ' . $rowspan . ' class=\"vmiddle\">' . \"\\n\"",
          "889:                 . '        ' . \"\\n\"",
          "890:                 . '    </th>' . \"\\n\";",
          "",
          "[Removed Lines]",
          "872:     elseif (($GLOBALS['cfg']['RowActionLinks'] == 'left'",
          "876:         $vertical_display['emptypre'] = ($is_display['edit_lnk'] != 'nn'",
          "882:                 <th <?php echo $colspan; ?>><?php",
          "887:             $vertical_display['textbtn'] =",
          "",
          "[Added Lines]",
          "903:     elseif (($GLOBALS['cfg']['RowActionLinks'] == 'left'",
          "907:         $vertical_display['emptypre'] = ($is_display['edit_lnk'] != 'nn'",
          "913:                 <th <?php echo $colspan; ?>><?php",
          "918:             $vertical_display['textbtn'] =",
          "",
          "---------------",
          "--- Hunk 28 ---",
          "[Context before]",
          "892:     }",
          "896:             || $GLOBALS['cfg']['RowActionLinks'] == 'both')",
          "897:         && ($is_display['edit_lnk'] != 'nn' || $is_display['del_lnk'] != 'nn')) {",
          "899:             && $is_display['del_lnk'] != 'nn') ? 4 : 0;",
          "900:         if ($_SESSION['tmp_user_values']['disp_direction'] == 'horizontal'",
          "901:             || $_SESSION['tmp_user_values']['disp_direction'] == 'horizontalflipped'",
          "",
          "[Removed Lines]",
          "895:     elseif (($GLOBALS['cfg']['RowActionLinks'] == 'left'",
          "898:         $vertical_display['emptypre'] = ($is_display['edit_lnk'] != 'nn'",
          "",
          "[Added Lines]",
          "926:     elseif (($GLOBALS['cfg']['RowActionLinks'] == 'left'",
          "929:         $vertical_display['emptypre'] = ($is_display['edit_lnk'] != 'nn'",
          "",
          "---------------",
          "--- Hunk 29 ---",
          "[Context before]",
          "909:         } // end vertical mode",
          "910:     }",
          "914:     elseif ($GLOBALS['cfg']['RowActionLinks'] == 'none'",
          "916:             || $_SESSION['tmp_user_values']['disp_direction'] == 'horizontalflipped')",
          "917:     ) {",
          "918:         echo '<th></th>';",
          "",
          "[Removed Lines]",
          "915:         && ($_SESSION['tmp_user_values']['disp_direction'] == 'horizontal'",
          "",
          "[Added Lines]",
          "946:         && ($_SESSION['tmp_user_values']['disp_direction'] == 'horizontal'",
          "",
          "---------------",
          "--- Hunk 30 ---",
          "[Context before]",
          "939:         }",
          "940:     }",
          "945:         && ! $_SESSION['tmp_user_values']['hide_transformation']) {",
          "946:         include_once './libraries/transformations.lib.php';",
          "947:         $GLOBALS['mime_map'] = PMA_getMIME($db, $table);",
          "",
          "[Removed Lines]",
          "942:     if ($GLOBALS['cfgRelation']['commwork']",
          "943:         && $GLOBALS['cfgRelation']['mimework']",
          "944:         && $GLOBALS['cfg']['BrowseMIME']",
          "",
          "[Added Lines]",
          "973:     if ($GLOBALS['cfgRelation']['commwork']",
          "974:         && $GLOBALS['cfgRelation']['mimework']",
          "975:         && $GLOBALS['cfg']['BrowseMIME']",
          "",
          "---------------",
          "--- Hunk 31 ---",
          "[Context before]",
          "955:     ) {",
          "957:         $wi = 0;",
          "959:             && is_array($analyzed_sql[0]['where_clause_identifiers'])) {",
          "961:                 as $wci_nr => $wci) {",
          "962:                 $highlight_columns[$wci] = 'true';",
          "963:             }",
          "",
          "[Removed Lines]",
          "958:         if (isset($analyzed_sql[0]['where_clause_identifiers'])",
          "960:             foreach ($analyzed_sql[0]['where_clause_identifiers']",
          "",
          "[Added Lines]",
          "989:         if (isset($analyzed_sql[0]['where_clause_identifiers'])",
          "991:             foreach ($analyzed_sql[0]['where_clause_identifiers']",
          "",
          "---------------",
          "--- Hunk 32 ---",
          "[Context before]",
          "979:         $i = $col_order ? $col_order[$j] : $j;",
          "983:             || isset($highlight_columns[PMA_backquote($fields_meta[$i]->name)])) {",
          "984:             $condition_field = true;",
          "985:         } else {",
          "",
          "[Removed Lines]",
          "982:         if (isset($highlight_columns[$fields_meta[$i]->name])",
          "",
          "[Added Lines]",
          "1013:         if (isset($highlight_columns[$fields_meta[$i]->name])",
          "",
          "---------------",
          "--- Hunk 33 ---",
          "[Context before]",
          "1020:             $name_to_use_in_sort = $fields_meta[$i]->name;",
          "1021:             $is_orgname = false;",
          "1023:                 && strlen($fields_meta[$i]->orgname)) {",
          "1024:                 $name_to_use_in_sort = $fields_meta[$i]->orgname;",
          "1025:                 $is_orgname = true;",
          "",
          "[Removed Lines]",
          "1022:             if (isset($fields_meta[$i]->orgname)",
          "",
          "[Added Lines]",
          "1053:             if (isset($fields_meta[$i]->orgname)",
          "",
          "---------------",
          "--- Hunk 34 ---",
          "[Context before]",
          "1045:                     && strpos($sort_expression_nodirection, $sort_tbl) === false",
          "1046:                     && strpos($sort_expression_nodirection, '(') === false",
          "1047:                 ) {",
          "1049:                         . $sort_expression_nodirection;",
          "1050:                 } else {",
          "1051:                     $new_sort_expression_nodirection = $sort_expression_nodirection;",
          "",
          "[Removed Lines]",
          "1048:                     $new_sort_expression_nodirection = $sort_tbl",
          "",
          "[Added Lines]",
          "1079:                     $new_sort_expression_nodirection = $sort_tbl",
          "",
          "---------------",
          "--- Hunk 35 ---",
          "[Context before]",
          "1054:                 $is_in_sort = false;",
          "1055:                 $sort_name = str_replace('`', '', $sort_tbl) . $name_to_use_in_sort;",
          "1057:                         $new_sort_expression_nodirection)",
          "1059:                         $sort_expression_nodirection)",
          "1060:                 ) {",
          "1061:                     $is_in_sort = true;",
          "",
          "[Removed Lines]",
          "1056:                 if ($sort_name == str_replace('`', '',",
          "1058:                     || $sort_name == str_replace('`', '',",
          "",
          "[Added Lines]",
          "1087:                 if ($sort_name == str_replace('`', '',",
          "1089:                     || $sort_name == str_replace('`', '',",
          "",
          "---------------",
          "--- Hunk 36 ---",
          "[Context before]",
          "1069:             if (strpos($name_to_use_in_sort, '(') !== false && ! $is_orgname) {",
          "1070:                 $sort_order = \"\\n\" . 'ORDER BY ' . $name_to_use_in_sort . ' ';",
          "1071:             } else {",
          "1073:                     . PMA_backquote($name_to_use_in_sort) . ' ';",
          "1074:             }",
          "1075:             unset($name_to_use_in_sort);",
          "",
          "[Removed Lines]",
          "1072:                 $sort_order = \"\\n\" . 'ORDER BY ' . $sort_tbl",
          "",
          "[Added Lines]",
          "1103:                 $sort_order = \"\\n\" . 'ORDER BY ' . $sort_tbl",
          "",
          "---------------",
          "--- Hunk 37 ---",
          "[Context before]",
          "1081:                 $GLOBALS['cfg']['Order'] = strtoupper($GLOBALS['cfg']['Order']);",
          "1082:                 if ($GLOBALS['cfg']['Order'] === 'SMART') {",
          "1084:                         $fields_meta[$i]->type)) ? 'DESC' : 'ASC';",
          "1085:                 } else {",
          "1086:                     $sort_order .= $GLOBALS['cfg']['Order'];",
          "",
          "[Removed Lines]",
          "1083:                     $sort_order .= (preg_match('@time|date@i',",
          "",
          "[Added Lines]",
          "1114:                     $sort_order .= (preg_match('@time|date@i',",
          "",
          "---------------",
          "--- Hunk 38 ---",
          "[Context before]",
          "1088:                 $order_img   = '';",
          "1089:             } elseif ('DESC' == $sort_direction) {",
          "1090:                 $sort_order .= ' ASC';",
          "1092:                     array('class' => \"soimg$i\", 'title' => ''));",
          "1094:                     array('class' => \"soimg$i hide\", 'title' => ''));",
          "1095:             } else {",
          "1096:                 $sort_order .= ' DESC';",
          "1098:                     array('class' => \"soimg$i\", 'title' => ''));",
          "1100:                     array('class' => \"soimg$i hide\", 'title' => ''));",
          "1101:             }",
          "",
          "[Removed Lines]",
          "1091:                 $order_img   = ' ' . PMA_getImage('s_desc.png', __('Descending'),",
          "1093:                 $order_img  .= ' ' . PMA_getImage('s_asc.png', __('Ascending'),",
          "1097:                 $order_img   = ' ' . PMA_getImage('s_asc.png', __('Ascending'),",
          "1099:                 $order_img  .= ' ' . PMA_getImage('s_desc.png', __('Descending'),",
          "",
          "[Added Lines]",
          "1122:                 $order_img   = ' ' . PMA_getImage('s_desc.png', __('Descending'),",
          "1124:                 $order_img  .= ' ' . PMA_getImage('s_asc.png', __('Ascending'),",
          "1128:                 $order_img   = ' ' . PMA_getImage('s_asc.png', __('Ascending'),",
          "1130:                 $order_img  .= ' ' . PMA_getImage('s_desc.png', __('Descending'),",
          "",
          "---------------",
          "--- Hunk 39 ---",
          "[Context before]",
          "1139:                 $order_link_params['style'] = 'direction: ltr; writing-mode: tb-rl;';",
          "1140:             }",
          "1141:             $order_link_params['title'] = __('Sort');",
          "1147:                 : htmlspecialchars($fields_meta[$i]->name));",
          "1149:                 $order_link_content . $order_img, $order_link_params, false, true);",
          "1151:             if ($_SESSION['tmp_user_values']['disp_direction'] == 'horizontal'",
          "1153:                     == 'horizontalflipped'",
          "1154:             ) {",
          "1155:                 echo '<th';",
          "",
          "[Removed Lines]",
          "1142:             $order_link_content = ($_SESSION['tmp_user_values']['disp_direction']",
          "1143:                 == 'horizontalflipped'",
          "1144:                 && $GLOBALS['cfg']['HeaderFlipType'] == 'fake'",
          "1145:                 ? PMA_flipstring(htmlspecialchars($fields_meta[$i]->name),",
          "1146:                     \"<br />\\n\")",
          "1148:             $order_link = PMA_linkOrButton($order_url,",
          "1152:                 || $_SESSION['tmp_user_values']['disp_direction']",
          "",
          "[Added Lines]",
          "1173:             $order_link_content = ($_SESSION['tmp_user_values']['disp_direction']",
          "1174:                 == 'horizontalflipped'",
          "1175:                 && $GLOBALS['cfg']['HeaderFlipType'] == 'fake'",
          "1176:                 ? PMA_flipstring(htmlspecialchars($fields_meta[$i]->name),",
          "1177:                     \"<br />\\n\")",
          "1179:             $order_link = PMA_linkOrButton($order_url,",
          "1183:                 || $_SESSION['tmp_user_values']['disp_direction']",
          "",
          "---------------",
          "--- Hunk 40 ---",
          "[Context before]",
          "1170:                 }",
          "1171:                 echo ' class=\"' . implode(' ', $th_class);",
          "1174:                         == 'horizontalflipped') {",
          "1175:                     echo ' vbottom';",
          "1176:                 }",
          "1178:                     . '\">' . $order_link . $comments . '</th>';",
          "1179:             }",
          "1180:             $vertical_display['desc'][] = '    <th '",
          "",
          "[Removed Lines]",
          "1173:                 if ($_SESSION['tmp_user_values']['disp_direction']",
          "1177:                 echo '\" data-column=\"' . htmlspecialchars($fields_meta[$i]->name)",
          "",
          "[Added Lines]",
          "1204:                 if ($_SESSION['tmp_user_values']['disp_direction']",
          "1208:                 echo '\" data-column=\"' . htmlspecialchars($fields_meta[$i]->name)",
          "",
          "---------------",
          "--- Hunk 41 ---",
          "[Context before]",
          "1188:         else {",
          "1189:             if ($_SESSION['tmp_user_values']['disp_direction'] == 'horizontal'",
          "1191:                     == 'horizontalflipped'",
          "1192:             ) {",
          "1193:                 echo '<th';",
          "",
          "[Removed Lines]",
          "1190:                 || $_SESSION['tmp_user_values']['disp_direction']",
          "",
          "[Added Lines]",
          "1221:                 || $_SESSION['tmp_user_values']['disp_direction']",
          "",
          "---------------",
          "--- Hunk 42 ---",
          "[Context before]",
          "1200:                     $th_class[] = 'condition';",
          "1201:                 }",
          "1202:                 echo ' class=\"' . implode(' ', $th_class);",
          "1204:                         == 'horizontalflipped') {",
          "1205:                     echo ' vbottom';",
          "1206:                 }",
          "1207:                 echo '\"';",
          "1209:                         == 'horizontalflipped'",
          "1210:                     && $GLOBALS['cfg']['HeaderFlipType'] == 'css'",
          "1211:                 ) {",
          "1212:                     echo ' style=\"direction: ltr; writing-mode: tb-rl;\"';",
          "1213:                 }",
          "1215:                     . '\">';",
          "1217:                         == 'horizontalflipped'",
          "1218:                     && $GLOBALS['cfg']['HeaderFlipType'] == 'fake'",
          "1219:                 ) {",
          "1221:                         '<br />');",
          "1222:                 } else {",
          "1223:                     echo htmlspecialchars($fields_meta[$i]->name);",
          "",
          "[Removed Lines]",
          "1203:                 if ($_SESSION['tmp_user_values']['disp_direction']",
          "1208:                 if ($_SESSION['tmp_user_values']['disp_direction']",
          "1214:                 echo ' data-column=\"' . htmlspecialchars($fields_meta[$i]->name)",
          "1216:                 if ($_SESSION['tmp_user_values']['disp_direction']",
          "1220:                     echo PMA_flipstring(htmlspecialchars($fields_meta[$i]->name),",
          "",
          "[Added Lines]",
          "1234:                 if ($_SESSION['tmp_user_values']['disp_direction']",
          "1239:                 if ($_SESSION['tmp_user_values']['disp_direction']",
          "1245:                 echo ' data-column=\"' . htmlspecialchars($fields_meta[$i]->name)",
          "1247:                 if ($_SESSION['tmp_user_values']['disp_direction']",
          "1251:                     echo PMA_flipstring(htmlspecialchars($fields_meta[$i]->name),",
          "",
          "---------------",
          "--- Hunk 43 ---",
          "[Context before]",
          "1227:             $vertical_display['desc'][] = '    <th '",
          "1228:                 . 'class=\"draggable'",
          "1229:                 . ($condition_field ? ' condition\"' : '')",
          "1231:                 . '\">' . \"\\n\" . '        ' . htmlspecialchars($fields_meta[$i]->name)",
          "1232:                 . \"\\n\" . $comments . '    </th>';",
          "1233:         } // end else (2.2)",
          "",
          "[Removed Lines]",
          "1230:                 . '\" data-column=\"' . htmlspecialchars($fields_meta[$i]->name)",
          "",
          "[Added Lines]",
          "1261:                 . '\" data-column=\"' . htmlspecialchars($fields_meta[$i]->name)",
          "",
          "---------------",
          "--- Hunk 44 ---",
          "[Context before]",
          "1239:             || $GLOBALS['cfg']['RowActionLinks'] == 'both')",
          "1240:         && ($is_display['edit_lnk'] != 'nn' || $is_display['del_lnk'] != 'nn')",
          "1241:         && $is_display['text_btn'] == '1'",
          "1242:     ) {",
          "1246:             : 1;",
          "1247:         if ($_SESSION['tmp_user_values']['disp_direction'] == 'horizontal'",
          "1248:             || $_SESSION['tmp_user_values']['disp_direction'] == 'horizontalflipped'",
          "",
          "[Removed Lines]",
          "1238:     if (($GLOBALS['cfg']['RowActionLinks'] == 'right'",
          "1243:         $vertical_display['emptyafter'] =",
          "1244:             ($is_display['edit_lnk'] != 'nn' && $is_display['del_lnk'] != 'nn')",
          "1245:             ? 4",
          "",
          "[Added Lines]",
          "1269:     if (($GLOBALS['cfg']['RowActionLinks'] == 'right'",
          "1274:         $vertical_display['emptyafter'] =",
          "1275:             ($is_display['edit_lnk'] != 'nn' && $is_display['del_lnk'] != 'nn')",
          "1276:             ? 4",
          "",
          "---------------",
          "--- Hunk 45 ---",
          "[Context before]",
          "1254:             <?php",
          "1256:         } else {",
          "1258:                 . ' class=\"vmiddle\">' . \"\\n\"",
          "1259:                 . '        ' . \"\\n\"",
          "1260:                 . '    </th>' . \"\\n\";",
          "",
          "[Removed Lines]",
          "1257:             $vertical_display['textbtn'] = '    <th ' . $rowspan",
          "",
          "[Added Lines]",
          "1288:             $vertical_display['textbtn'] = '    <th ' . $rowspan",
          "",
          "---------------",
          "--- Hunk 46 ---",
          "[Context before]",
          "1267:             || $GLOBALS['cfg']['RowActionLinks'] == 'both')",
          "1268:         && ($is_display['edit_lnk'] == 'nn' && $is_display['del_lnk'] == 'nn')",
          "1269:         && (! isset($GLOBALS['is_header_sent']) || ! $GLOBALS['is_header_sent'])",
          "1270:     ) {",
          "1274:             : 1;",
          "1275:         if ($_SESSION['tmp_user_values']['disp_direction'] == 'horizontal'",
          "1276:             || $_SESSION['tmp_user_values']['disp_direction'] == 'horizontalflipped'",
          "",
          "[Removed Lines]",
          "1266:     elseif (($GLOBALS['cfg']['RowActionLinks'] == 'left'",
          "1271:         $vertical_display['emptyafter'] =",
          "1272:             ($is_display['edit_lnk'] != 'nn' && $is_display['del_lnk'] != 'nn')",
          "1273:             ? 4",
          "",
          "[Added Lines]",
          "1297:     elseif (($GLOBALS['cfg']['RowActionLinks'] == 'left'",
          "1302:         $vertical_display['emptyafter'] =",
          "1303:             ($is_display['edit_lnk'] != 'nn' && $is_display['del_lnk'] != 'nn')",
          "1304:             ? 4",
          "",
          "---------------",
          "--- Hunk 47 ---",
          "[Context before]",
          "1310: function PMA_buildValueDisplay($class, $condition_field, $value)",
          "1311: {",
          "1313:         . '\">' . $value . '</td>';",
          "1314: }",
          "",
          "[Removed Lines]",
          "1312:     return '<td class=\"left ' . $class . ($condition_field ? ' condition' : '')",
          "",
          "[Added Lines]",
          "1343:     return '<td class=\"left ' . $class . ($condition_field ? ' condition' : '')",
          "",
          "---------------",
          "--- Hunk 48 ---",
          "[Context before]",
          "1326: function PMA_buildNullDisplay($class, $condition_field, $meta, $align = '')",
          "1327: {",
          "1330:         $meta, '') . ' null\"><i>NULL</i></td>';",
          "1331: }",
          "",
          "[Removed Lines]",
          "1329:     return '<td ' . $align . ' class=\"' . PMA_addClass($class, $condition_field,",
          "",
          "[Added Lines]",
          "1360:     return '<td ' . $align . ' class=\"' . PMA_addClass($class, $condition_field,",
          "",
          "---------------",
          "--- Hunk 49 ---",
          "[Context before]",
          "1343: function PMA_buildEmptyDisplay($class, $condition_field, $meta, $align = '')",
          "1344: {",
          "1345:     $nowrap = ' nowrap';",
          "1347:         $meta, $nowrap)  . '\"></td>';",
          "1348: }",
          "",
          "[Removed Lines]",
          "1346:     return '<td ' . $align . ' class=\"' . PMA_addClass($class, $condition_field,",
          "",
          "[Added Lines]",
          "1377:     return '<td ' . $align . ' class=\"' . PMA_addClass($class, $condition_field,",
          "",
          "---------------",
          "--- Hunk 50 ---",
          "[Context before]",
          "1364:     $is_field_truncated = false, $transform_function = '', $default_function = '')",
          "1365: {",
          "",
          "[Removed Lines]",
          "1363: function PMA_addClass($class, $condition_field, $meta, $nowrap,",
          "",
          "[Added Lines]",
          "1394: function PMA_addClass($class, $condition_field, $meta, $nowrap,",
          "",
          "---------------",
          "--- Hunk 51 ---",
          "[Context before]",
          "1423:     global $db, $table, $goto;",
          "1424:     global $sql_query, $fields_meta, $fields_cnt;",
          "1425:     global $vertical_display, $highlight_columns;",
          "1429:     $url_sql_query          = $sql_query;",
          "",
          "[Removed Lines]",
          "1426:     global $row; // mostly because of browser transformations,",
          "",
          "[Added Lines]",
          "1457:     global $row; // mostly because of browser transformations,",
          "",
          "---------------",
          "--- Hunk 52 ---",
          "[Context before]",
          "1532:             = PMA_getUniqueCondition($dt_result, $fields_cnt, $fields_meta, $row);",
          "1533:         $where_clause_html = urlencode($where_clause);",
          "1537:         if ($is_display['edit_lnk'] != 'nn' || $is_display['del_lnk'] != 'nn') {",
          "1541:             if ($GLOBALS['cfg']['PropertiesIconic'] === 'both') {",
          "",
          "[Removed Lines]",
          "1531:         list($where_clause, $clause_is_unique, $condition_array)",
          "",
          "[Added Lines]",
          "1562:         list($where_clause, $clause_is_unique, $condition_array)",
          "",
          "---------------",
          "--- Hunk 53 ---",
          "[Context before]",
          "1580:                 );",
          "1581:                 $lnk_goto = 'sql.php' . PMA_generate_common_url($_url_params, 'text');",
          "1584:                     . PMA_backquote($table)",
          "1588:                         : ' LIMIT 1');",
          "1590:                 $_url_params = array(",
          "",
          "[Removed Lines]",
          "1583:                 $del_query = 'DELETE FROM ' . PMA_backquote($db) . '.'",
          "1585:                     . ' WHERE ' . $where_clause .",
          "1586:                     ($clause_is_unique",
          "1587:                         ? ''",
          "",
          "[Added Lines]",
          "1614:                 $del_query = 'DELETE FROM ' . PMA_backquote($db) . '.'",
          "1616:                     . ' WHERE ' . $where_clause .",
          "1617:                     ($clause_is_unique",
          "1618:                         ? ''",
          "",
          "---------------",
          "--- Hunk 54 ---",
          "[Context before]",
          "1596:                 );",
          "1597:                 $del_url  = 'sql.php' . PMA_generate_common_url($_url_params);",
          "1600:                           . PMA_jsFormat($table)",
          "1601:                           . ' WHERE ' . PMA_jsFormat($where_clause, false)",
          "1602:                           . ($clause_is_unique ? '' : ' LIMIT 1');",
          "",
          "[Removed Lines]",
          "1599:                 $js_conf  = 'DELETE FROM ' . PMA_jsFormat($db) . '.'",
          "",
          "[Added Lines]",
          "1630:                 $js_conf  = 'DELETE FROM ' . PMA_jsFormat($db) . '.'",
          "",
          "---------------",
          "--- Hunk 55 ---",
          "[Context before]",
          "1624:             } // end if (1.2.2)",
          "1628:                     || $GLOBALS['cfg']['RowActionLinks'] == 'both')",
          "1629:                 && ($_SESSION['tmp_user_values']['disp_direction'] == 'horizontal'",
          "1631:                     == 'horizontalflipped')",
          "1632:             ) {",
          "1633:                 if (! isset($js_conf)) {",
          "1634:                     $js_conf = '';",
          "1635:                 }",
          "1639:                     $edit_str, $copy_str, $del_str, $js_conf);",
          "1640:             } elseif (($GLOBALS['cfg']['RowActionLinks'] == 'none')",
          "1641:                 && ($_SESSION['tmp_user_values']['disp_direction'] == 'horizontal'",
          "1643:                     == 'horizontalflipped')",
          "1644:             ) {",
          "1645:                 if (! isset($js_conf)) {",
          "1646:                     $js_conf = '';",
          "1647:                 }",
          "1651:                     $edit_str, $copy_str, $del_str, $js_conf);",
          "1652:             } // end if (1.3)",
          "1653:         } // end if (1)",
          "",
          "[Removed Lines]",
          "1627:             if (($GLOBALS['cfg']['RowActionLinks'] == 'left'",
          "1630:                 || $_SESSION['tmp_user_values']['disp_direction']",
          "1636:                 echo PMA_generateCheckboxAndLinks('left', $del_url, $is_display,",
          "1637:                     $row_no, $where_clause, $where_clause_html, $condition_array,",
          "1638:                     $del_query, 'l', $edit_url, $copy_url, $edit_anchor_class,",
          "1642:                 || $_SESSION['tmp_user_values']['disp_direction']",
          "1648:                 echo PMA_generateCheckboxAndLinks('none', $del_url, $is_display,",
          "1649:                     $row_no, $where_clause, $where_clause_html, $condition_array,",
          "1650:                     $del_query, 'l', $edit_url, $copy_url, $edit_anchor_class,",
          "",
          "[Added Lines]",
          "1658:             if (($GLOBALS['cfg']['RowActionLinks'] == 'left'",
          "1661:                 || $_SESSION['tmp_user_values']['disp_direction']",
          "1667:                 echo PMA_generateCheckboxAndLinks('left', $del_url, $is_display,",
          "1668:                     $row_no, $where_clause, $where_clause_html, $condition_array,",
          "1669:                     $del_query, 'l', $edit_url, $copy_url, $edit_anchor_class,",
          "1673:                 || $_SESSION['tmp_user_values']['disp_direction']",
          "1679:                 echo PMA_generateCheckboxAndLinks('none', $del_url, $is_display,",
          "1680:                     $row_no, $where_clause, $where_clause_html, $condition_array,",
          "1681:                     $del_query, 'l', $edit_url, $copy_url, $edit_anchor_class,",
          "",
          "---------------",
          "--- Hunk 56 ---",
          "[Context before]",
          "1663:             $relation_class = isset($map[$meta->name]) ? 'relation' : '';",
          "1664:             $hide_class = ($col_visib && !$col_visib[$j] &&",
          "1669:                                : '';",
          "1672:                 || $meta->type == 'datetime') {",
          "1673:                 $field_type_class = 'datetimefield';",
          "1674:             } else if ($meta->type == 'date') {",
          "",
          "[Removed Lines]",
          "1666:                            $_SESSION['tmp_user_values']['disp_direction']",
          "1667:                            != 'vertical')",
          "1668:                                ? 'hide'",
          "1671:             if (substr($meta->type, 0, 9) == 'timestamp'",
          "",
          "[Added Lines]",
          "1697:                            $_SESSION['tmp_user_values']['disp_direction']",
          "1698:                            != 'vertical')",
          "1699:                                ? 'hide'",
          "1702:             if (substr($meta->type, 0, 9) == 'timestamp'",
          "",
          "---------------",
          "--- Hunk 57 ---",
          "[Context before]",
          "1683:             $class = 'data ' . $grid_edit_class . ' ' . $not_null_class . ' '",
          "",
          "[Removed Lines]",
          "1684:                 . $relation_class . ' ' . $hide_class . ' ' . $field_type_class;",
          "",
          "[Added Lines]",
          "1715:                 . $relation_class . ' ' . $hide_class . ' ' . $field_type_class;",
          "",
          "---------------",
          "--- Hunk 58 ---",
          "[Context before]",
          "1693:                 $condition_field = false;",
          "1694:             }",
          "1698:                     || ($GLOBALS['printview'] != '1'))) {",
          "1700:                 $class .= ' row_' . $row_no;",
          "",
          "[Removed Lines]",
          "1696:             if ($_SESSION['tmp_user_values']['disp_direction'] == 'vertical'",
          "1697:                 && (! isset($GLOBALS['printview'])",
          "",
          "[Added Lines]",
          "1727:             if ($_SESSION['tmp_user_values']['disp_direction'] == 'vertical'",
          "1728:                 && (! isset($GLOBALS['printview'])",
          "",
          "---------------",
          "--- Hunk 59 ---",
          "[Context before]",
          "1711:             $transform_function = $default_function;",
          "1712:             $transform_options = array();",
          "1715:                 && $GLOBALS['cfg']['BrowseMIME']) {",
          "1719:                     && !empty($GLOBALS['mime_map'][$meta->name]",
          "1720:                         ['transformation'])) {",
          "1721:                     $include_file = PMA_securePath(",
          "1722:                         $GLOBALS['mime_map'][$meta->name]['transformation']);",
          "1725:                         . $include_file)) {",
          "1726:                         $transformfunction_name = str_replace(",
          "1728:                             $GLOBALS['mime_map'][$meta->name]['transformation']);",
          "1730:                         include_once './libraries/transformations/' . $include_file;",
          "1733:                             . $transformfunction_name)) {",
          "1735:                                 . $transformfunction_name;",
          "1736:                             $transform_options  = PMA_transformation_getOptions(",
          "1737:                                 (isset($GLOBALS['mime_map'][$meta->name]",
          "1739:                                     ? $GLOBALS['mime_map'][$meta->name]",
          "1741:                                     : ''));",
          "1742:                             $meta->mimetype     = str_replace(",
          "1744:                                 $GLOBALS['mime_map'][$meta->name]['mimetype']);",
          "1745:                         }",
          "1746:                     } // end if file_exists",
          "",
          "[Removed Lines]",
          "1714:             if ($GLOBALS['cfgRelation']['mimework']",
          "1717:                 if (isset($GLOBALS['mime_map'][$meta->name]['mimetype'])",
          "1718:                     && isset($GLOBALS['mime_map'][$meta->name]['transformation'])",
          "1724:                     if (file_exists('./libraries/transformations/'",
          "1727:                             '.inc.php', '',",
          "1732:                         if (function_exists('PMA_transformation_'",
          "1734:                             $transform_function = 'PMA_transformation_'",
          "1738:                                         ['transformation_options'])",
          "1740:                                         ['transformation_options']",
          "1743:                                 '_', '/',",
          "",
          "[Added Lines]",
          "1745:             if ($GLOBALS['cfgRelation']['mimework']",
          "1748:                 if (isset($GLOBALS['mime_map'][$meta->name]['mimetype'])",
          "1749:                     && isset($GLOBALS['mime_map'][$meta->name]['transformation'])",
          "1755:                     if (file_exists('./libraries/transformations/'",
          "1758:                             '.inc.php', '',",
          "1763:                         if (function_exists('PMA_transformation_'",
          "1765:                             $transform_function = 'PMA_transformation_'",
          "1769:                                         ['transformation_options'])",
          "1771:                                         ['transformation_options']",
          "1774:                                 '_', '/',",
          "",
          "---------------",
          "--- Hunk 60 ---",
          "[Context before]",
          "1758:                 $_url_params['sql_query'] = $url_sql_query;",
          "1759:             }",
          "1762:                 = PMA_generate_common_url($_url_params);",
          "",
          "[Removed Lines]",
          "1761:             $transform_options['wrapper_link']",
          "",
          "[Added Lines]",
          "1792:             $transform_options['wrapper_link']",
          "",
          "---------------",
          "--- Hunk 61 ---",
          "[Context before]",
          "1772:                 if (! isset($row[$i]) || is_null($row[$i])) {",
          "1775:                         '');",
          "1776:                 } elseif ($row[$i] != '') {",
          "1778:                     $nowrap = ' nowrap';",
          "1779:                     $where_comparison = ' = ' . $row[$i];",
          "1786:                             $is_field_truncated);",
          "1787:                 } else {",
          "1790:                             $meta, '');",
          "1791:                 }",
          "",
          "[Removed Lines]",
          "1773:                     $vertical_display['data'][$row_no][$i] =",
          "1774:                     PMA_buildNullDisplay('right '.$class, $condition_field, $meta,",
          "1781:                     $vertical_display['data'][$row_no][$i]     = '<td '",
          "1782:                         . PMA_prepare_row_data('right '.$class, $condition_field,",
          "1783:                             $analyzed_sql, $meta, $map, $row[$i],",
          "1784:                             $transform_function, $default_function, $nowrap,",
          "1785:                             $where_comparison, $transform_options,",
          "1788:                     $vertical_display['data'][$row_no][$i]",
          "1789:                         = PMA_buildEmptyDisplay('right '.$class, $condition_field,",
          "",
          "[Added Lines]",
          "1804:                     $vertical_display['data'][$row_no][$i] =",
          "1805:                     PMA_buildNullDisplay('right '.$class, $condition_field, $meta,",
          "1812:                     $vertical_display['data'][$row_no][$i]     = '<td '",
          "1813:                         . PMA_prepare_row_data('right '.$class, $condition_field,",
          "1814:                             $analyzed_sql, $meta, $map, $row[$i],",
          "1815:                             $transform_function, $default_function, $nowrap,",
          "1816:                             $where_comparison, $transform_options,",
          "1819:                     $vertical_display['data'][$row_no][$i]",
          "1820:                         = PMA_buildEmptyDisplay('right '.$class, $condition_field,",
          "",
          "---------------",
          "--- Hunk 62 ---",
          "[Context before]",
          "1802:                     $class = str_replace('grid_edit', '', $class);",
          "1804:                     if (! isset($row[$i]) || is_null($row[$i])) {",
          "1806:                             = PMA_buildNullDisplay($class, $condition_field, $meta);",
          "1807:                     } else {",
          "1811:                             $_url_params);",
          "1815:                                 $blobtext);",
          "1816:                         unset($blobtext);",
          "1817:                     }",
          "1819:                 } else {",
          "1820:                     if (! isset($row[$i]) || is_null($row[$i])) {",
          "1822:                             = PMA_buildNullDisplay($class, $condition_field, $meta);",
          "1823:                     } elseif ($row[$i] != '') {",
          "1827:                             && $_SESSION['tmp_user_values']['display_text'] == 'P') {",
          "1829:                                 $GLOBALS['cfg']['LimitChars']) . '...';",
          "1830:                             $is_field_truncated = true;",
          "1831:                         }",
          "1837:                             : $default_function($row[$i], array(), $meta));",
          "1839:                         if ($is_field_truncated) {",
          "1840:                             $class .= ' truncated';",
          "1841:                         }",
          "1845:                                 $row[$i]);",
          "1846:                     } else {",
          "1848:                             = PMA_buildEmptyDisplay($class, $condition_field, $meta);",
          "1849:                     }",
          "1850:                 }",
          "1852:             } elseif ($meta->type == 'geometry') {",
          "1856:                 $class = str_replace('grid_edit', '', $class);",
          "1858:                 if (! isset($row[$i]) || is_null($row[$i])) {",
          "1860:                         = PMA_buildNullDisplay($class, $condition_field, $meta);",
          "1861:                 } elseif ($row[$i] != '') {",
          "1863:                     if ('GEOM' == $_SESSION['tmp_user_values']['geometry_display']) {",
          "1864:                         $geometry_text = PMA_handle_non_printable_contents(",
          "1867:                             $default_function, $meta",
          "1868:                         );",
          "1871:                                 $geometry_text);",
          "1875:                         == $_SESSION['tmp_user_values']['geometry_display']) {",
          "1876:                         $where_comparison = ' = ' . $row[$i];",
          "",
          "[Removed Lines]",
          "1805:                         $vertical_display['data'][$row_no][$i]",
          "1808:                         $blobtext = PMA_handle_non_printable_contents('BLOB',",
          "1809:                             (isset($row[$i]) ? $row[$i] : ''), $transform_function,",
          "1810:                             $transform_options, $default_function, $meta,",
          "1813:                         $vertical_display['data'][$row_no][$i]",
          "1814:                             = PMA_buildValueDisplay($class, $condition_field,",
          "1821:                         $vertical_display['data'][$row_no][$i]",
          "1826:                         if (PMA_strlen($row[$i]) > $GLOBALS['cfg']['LimitChars']",
          "1828:                             $row[$i] = PMA_substr($row[$i], 0,",
          "1834:                         $row[$i]     = ($default_function != $transform_function",
          "1835:                             ? $transform_function($row[$i], $transform_options,",
          "1836:                                 $meta)",
          "1843:                         $vertical_display['data'][$row_no][$i]",
          "1844:                             = PMA_buildValueDisplay($class, $condition_field,",
          "1847:                         $vertical_display['data'][$row_no][$i]",
          "1859:                     $vertical_display['data'][$row_no][$i]",
          "1865:                             'GEOMETRY', (isset($row[$i]) ? $row[$i] : ''),",
          "1866:                             $transform_function, $transform_options,",
          "1869:                         $vertical_display['data'][$row_no][$i]",
          "1870:                             = PMA_buildValueDisplay($class, $condition_field,",
          "1874:                     } elseif ('WKT'",
          "",
          "[Added Lines]",
          "1836:                         $vertical_display['data'][$row_no][$i]",
          "1839:                         $blobtext = PMA_handle_non_printable_contents('BLOB',",
          "1840:                             (isset($row[$i]) ? $row[$i] : ''), $transform_function,",
          "1841:                             $transform_options, $default_function, $meta,",
          "1844:                         $vertical_display['data'][$row_no][$i]",
          "1845:                             = PMA_buildValueDisplay($class, $condition_field,",
          "1852:                         $vertical_display['data'][$row_no][$i]",
          "1857:                         if (PMA_strlen($row[$i]) > $GLOBALS['cfg']['LimitChars']",
          "1859:                             $row[$i] = PMA_substr($row[$i], 0,",
          "1865:                         $row[$i]     = ($default_function != $transform_function",
          "1866:                             ? $transform_function($row[$i], $transform_options,",
          "1867:                                 $meta)",
          "1874:                         $vertical_display['data'][$row_no][$i]",
          "1875:                             = PMA_buildValueDisplay($class, $condition_field,",
          "1878:                         $vertical_display['data'][$row_no][$i]",
          "1890:                     $vertical_display['data'][$row_no][$i]",
          "1896:                             'GEOMETRY', (isset($row[$i]) ? $row[$i] : ''),",
          "1897:                             $transform_function, $transform_options,",
          "1900:                         $vertical_display['data'][$row_no][$i]",
          "1901:                             = PMA_buildValueDisplay($class, $condition_field,",
          "1905:                     } elseif ('WKT'",
          "",
          "---------------",
          "--- Hunk 63 ---",
          "[Context before]",
          "1881:                         if (PMA_strlen($wktval) > $GLOBALS['cfg']['LimitChars']",
          "1882:                             && $_SESSION['tmp_user_values']['display_text'] == 'P'",
          "1883:                         ) {",
          "1885:                                 $GLOBALS['cfg']['LimitChars']) . '...';",
          "1886:                             $is_field_truncated = true;",
          "1887:                         }",
          "1890:                             . PMA_prepare_row_data(",
          "1894:                             $is_field_truncated);",
          "",
          "[Removed Lines]",
          "1884:                             $wktval = PMA_substr($wktval, 0,",
          "1889:                         $vertical_display['data'][$row_no][$i] = '<td '",
          "1891:                             $class, $condition_field, $analyzed_sql, $meta, $map,",
          "1892:                             $wktval, $transform_function, $default_function, '',",
          "1893:                             $where_comparison, $transform_options,",
          "",
          "[Added Lines]",
          "1915:                             $wktval = PMA_substr($wktval, 0,",
          "1920:                         $vertical_display['data'][$row_no][$i] = '<td '",
          "1922:                             $class, $condition_field, $analyzed_sql, $meta, $map,",
          "1923:                             $wktval, $transform_function, $default_function, '',",
          "1924:                             $where_comparison, $transform_options,",
          "",
          "---------------",
          "--- Hunk 64 ---",
          "[Context before]",
          "1908:                             }",
          "1910:                             if (PMA_strlen($wkbval) > $GLOBALS['cfg']['LimitChars']",
          "1912:                                     == 'P'",
          "1913:                             ) {",
          "1915:                                     $GLOBALS['cfg']['LimitChars']) . '...';",
          "1916:                                 $is_field_truncated = true;",
          "1917:                             }",
          "1924:                                     $is_field_truncated);",
          "1925:                         } else {",
          "1926:                             $wkbval = PMA_handle_non_printable_contents(",
          "1929:                                 $_url_params);",
          "1932:                                     $wkbval);",
          "1933:                         }",
          "1934:                     }",
          "1935:                 } else {",
          "1937:                         = PMA_buildEmptyDisplay($class, $condition_field, $meta);",
          "1938:                 }",
          "",
          "[Removed Lines]",
          "1911:                                 && $_SESSION['tmp_user_values']['display_text']",
          "1914:                                 $wkbval = PMA_substr($wkbval, 0,",
          "1919:                             $vertical_display['data'][$row_no][$i] = '<td '",
          "1920:                                 . PMA_prepare_row_data($class, $condition_field,",
          "1921:                                     $analyzed_sql, $meta, $map, $wkbval,",
          "1922:                                     $transform_function, $default_function, '',",
          "1923:                                     $where_comparison, $transform_options,",
          "1927:                                 'BINARY', $row[$i], $transform_function,",
          "1928:                                 $transform_options, $default_function, $meta,",
          "1930:                             $vertical_display['data'][$row_no][$i]",
          "1931:                                 = PMA_buildValueDisplay($class, $condition_field,",
          "1936:                     $vertical_display['data'][$row_no][$i]",
          "",
          "[Added Lines]",
          "1942:                                 && $_SESSION['tmp_user_values']['display_text']",
          "1945:                                 $wkbval = PMA_substr($wkbval, 0,",
          "1950:                             $vertical_display['data'][$row_no][$i] = '<td '",
          "1951:                                 . PMA_prepare_row_data($class, $condition_field,",
          "1952:                                     $analyzed_sql, $meta, $map, $wkbval,",
          "1953:                                     $transform_function, $default_function, '',",
          "1954:                                     $where_comparison, $transform_options,",
          "1958:                                 'BINARY', $row[$i], $transform_function,",
          "1959:                                 $transform_options, $default_function, $meta,",
          "1961:                             $vertical_display['data'][$row_no][$i]",
          "1962:                                 = PMA_buildValueDisplay($class, $condition_field,",
          "1967:                     $vertical_display['data'][$row_no][$i]",
          "",
          "---------------",
          "--- Hunk 65 ---",
          "[Context before]",
          "1952:                         && $_SESSION['tmp_user_values']['display_text'] == 'P'",
          "1953:                         && !strpos($transform_function, 'link') === true) {",
          "1955:                             $GLOBALS['cfg']['LimitChars']) . '...';",
          "1956:                         $is_field_truncated = true;",
          "1957:                     }",
          "",
          "[Removed Lines]",
          "1951:                     if (PMA_strlen($row[$i]) > $GLOBALS['cfg']['LimitChars']",
          "1954:                         $row[$i] = PMA_substr($row[$i], 0,",
          "",
          "[Added Lines]",
          "1982:                     if (PMA_strlen($row[$i]) > $GLOBALS['cfg']['LimitChars']",
          "1985:                         $row[$i] = PMA_substr($row[$i], 0,",
          "",
          "---------------",
          "--- Hunk 66 ---",
          "[Context before]",
          "1971:                             && $GLOBALS['is_analyse'])) {",
          "1972:                         if ($_SESSION['tmp_user_values']['display_binary']) {",
          "",
          "[Removed Lines]",
          "1968:                     } elseif (stristr($field_flags, 'BINARY')",
          "1969:                         && $meta->type == 'string'",
          "1970:                         && !(isset($GLOBALS['is_analyse'])",
          "",
          "[Added Lines]",
          "1999:                     } elseif (stristr($field_flags, 'BINARY')",
          "2000:                         && $meta->type == 'string'",
          "2001:                         && !(isset($GLOBALS['is_analyse'])",
          "",
          "---------------",
          "--- Hunk 67 ---",
          "[Context before]",
          "1982:                         } else {",
          "1987:                                 $default_function, $meta, $_url_params);",
          "1988:                             $formatted = true;",
          "1989:                         }",
          "1990:                     }",
          "1992:                     if ($formatted) {",
          "1995:                                 $row[$i]);",
          "1996:                     } else {",
          "1998:                         $function_nowrap = $transform_function . '_nowrap';",
          "2002:                             : false);",
          "2008:                             : '');",
          "2010:                             . '\\'';",
          "2016:                                 $is_field_truncated);",
          "2017:                     }",
          "2018:                 } else {",
          "2020:                         = PMA_buildEmptyDisplay($class, $condition_field, $meta);",
          "2021:                 }",
          "2022:             }",
          "2025:             if ($_SESSION['tmp_user_values']['disp_direction'] == 'horizontal'",
          "2027:                     == 'horizontalflipped'",
          "2028:             ) {",
          "2029:                 echo $vertical_display['data'][$row_no][$i];",
          "2030:             }",
          "2032:             if (isset($vertical_display['rowdata'][$i][$row_no])) {",
          "2034:                     .= $vertical_display['data'][$row_no][$i];",
          "2035:             } else {",
          "2037:                     = $vertical_display['data'][$row_no][$i];",
          "2038:             }",
          "2039:         } // end for (2)",
          "2043:                 || $GLOBALS['cfg']['RowActionLinks'] == 'both')",
          "2044:             && ($_SESSION['tmp_user_values']['disp_direction'] == 'horizontal'",
          "2046:                     == 'horizontalflipped')",
          "2047:         ) {",
          "2048:             if (! isset($js_conf)) {",
          "2049:                 $js_conf = '';",
          "2050:             }",
          "2053:                 $del_query, 'r', $edit_url, $copy_url, $edit_anchor_class, $edit_str,",
          "2054:                 $copy_str, $del_str, $js_conf);",
          "2055:         } // end if (3)",
          "",
          "[Removed Lines]",
          "1985:                             $row[$i] = PMA_handle_non_printable_contents('BINARY',",
          "1986:                                 $row[$i], $transform_function, $transform_options,",
          "1993:                         $vertical_display['data'][$row_no][$i]",
          "1994:                             = PMA_buildValueDisplay($class, $condition_field,",
          "1999:                         $bool_nowrap = (($default_function != $transform_function",
          "2000:                                 && function_exists($function_nowrap))",
          "2001:                             ? $function_nowrap($transform_options)",
          "2005:                         $nowrap = ((preg_match('@DATE|TIME@i', $meta->type)",
          "2006:                                 || $bool_nowrap)",
          "2007:                             ? ' nowrap'",
          "2009:                         $where_comparison = ' = \\'' . PMA_sqlAddSlashes($row[$i])",
          "2011:                         $vertical_display['data'][$row_no][$i]     = '<td '",
          "2012:                             . PMA_prepare_row_data($class, $condition_field,",
          "2013:                                 $analyzed_sql, $meta, $map, $row[$i],",
          "2014:                                 $transform_function, $default_function, $nowrap,",
          "2015:                                 $where_comparison, $transform_options,",
          "2019:                     $vertical_display['data'][$row_no][$i]",
          "2026:                 || $_SESSION['tmp_user_values']['disp_direction']",
          "2033:                 $vertical_display['rowdata'][$i][$row_no]",
          "2036:                 $vertical_display['rowdata'][$i][$row_no]",
          "2042:         if (($GLOBALS['cfg']['RowActionLinks'] == 'right'",
          "2045:                 || $_SESSION['tmp_user_values']['disp_direction']",
          "2051:             echo PMA_generateCheckboxAndLinks('right', $del_url, $is_display,",
          "2052:                 $row_no, $where_clause, $where_clause_html, $condition_array,",
          "",
          "[Added Lines]",
          "2016:                             $row[$i] = PMA_handle_non_printable_contents('BINARY',",
          "2017:                                 $row[$i], $transform_function, $transform_options,",
          "2024:                         $vertical_display['data'][$row_no][$i]",
          "2025:                             = PMA_buildValueDisplay($class, $condition_field,",
          "2030:                         $bool_nowrap = (($default_function != $transform_function",
          "2031:                                 && function_exists($function_nowrap))",
          "2032:                             ? $function_nowrap($transform_options)",
          "2036:                         $nowrap = ((preg_match('@DATE|TIME@i', $meta->type)",
          "2037:                                 || $bool_nowrap)",
          "2038:                             ? ' nowrap'",
          "2040:                         $where_comparison = ' = \\'' . PMA_sqlAddSlashes($row[$i])",
          "2042:                         $vertical_display['data'][$row_no][$i]     = '<td '",
          "2043:                             . PMA_prepare_row_data($class, $condition_field,",
          "2044:                                 $analyzed_sql, $meta, $map, $row[$i],",
          "2045:                                 $transform_function, $default_function, $nowrap,",
          "2046:                                 $where_comparison, $transform_options,",
          "2050:                     $vertical_display['data'][$row_no][$i]",
          "2057:                 || $_SESSION['tmp_user_values']['disp_direction']",
          "2064:                 $vertical_display['rowdata'][$i][$row_no]",
          "2067:                 $vertical_display['rowdata'][$i][$row_no]",
          "2073:         if (($GLOBALS['cfg']['RowActionLinks'] == 'right'",
          "2076:                 || $_SESSION['tmp_user_values']['disp_direction']",
          "2082:             echo PMA_generateCheckboxAndLinks('right', $del_url, $is_display,",
          "2083:                 $row_no, $where_clause, $where_clause_html, $condition_array,",
          "",
          "---------------",
          "--- Hunk 68 ---",
          "[Context before]",
          "2090:         if (isset($edit_url)) {",
          "2091:             $vertical_display['edit'][$row_no]   .= PMA_generateEditLink($edit_url,",
          "2093:                 . $vertical_class, $edit_str, $where_clause, $where_clause_html);",
          "2094:         } else {",
          "2095:             unset($vertical_display['edit'][$row_no]);",
          "2096:         }",
          "2098:         if (isset($copy_url)) {",
          "2101:                 $alternating_color_class . $vertical_class);",
          "2102:         } else {",
          "2103:             unset($vertical_display['copy'][$row_no]);",
          "",
          "[Removed Lines]",
          "2092:                 $alternating_color_class . ' ' . $edit_anchor_class",
          "2099:             $vertical_display['copy'][$row_no]   .= PMA_generateCopyLink($copy_url,",
          "2100:                 $copy_str, $where_clause, $where_clause_html,",
          "",
          "[Added Lines]",
          "2123:                 $alternating_color_class . ' ' . $edit_anchor_class",
          "2130:             $vertical_display['copy'][$row_no]   .= PMA_generateCopyLink($copy_url,",
          "2131:                 $copy_str, $where_clause, $where_clause_html,",
          "",
          "---------------",
          "--- Hunk 69 ---",
          "[Context before]",
          "2107:             if (! isset($js_conf)) {",
          "2108:                 $js_conf = '';",
          "2109:             }",
          "2111:                 $del_str, $js_conf, $alternating_color_class . $vertical_class);",
          "2112:         } else {",
          "2113:             unset($vertical_display['delete'][$row_no]);",
          "2114:         }",
          "2120:             : '');",
          "2121:         $row_no++;",
          "2122:     } // end while",
          "",
          "[Removed Lines]",
          "2110:             $vertical_display['delete'][$row_no] .= PMA_generateDeleteLink($del_url,",
          "2116:         echo (($_SESSION['tmp_user_values']['disp_direction'] == 'horizontal'",
          "2117:                 || $_SESSION['tmp_user_values']['disp_direction']",
          "2118:                     == 'horizontalflipped')",
          "2119:             ? \"\\n\"",
          "",
          "[Added Lines]",
          "2141:             $vertical_display['delete'][$row_no] .= PMA_generateDeleteLink($del_url,",
          "2147:         echo (($_SESSION['tmp_user_values']['disp_direction'] == 'horizontal'",
          "2148:                 || $_SESSION['tmp_user_values']['disp_direction']",
          "2149:                     == 'horizontalflipped')",
          "2150:             ? \"\\n\"",
          "",
          "---------------",
          "--- Hunk 70 ---",
          "[Context before]",
          "2146:     if ($GLOBALS['cfg']['RowActionLinks'] != 'right'",
          "2147:         && is_array($vertical_display['row_delete'])",
          "2149:             || !empty($vertical_display['textbtn']))",
          "2150:     ) {",
          "2151:         echo '<tr>' . \"\\n\";",
          "2152:         if ($GLOBALS['cfg']['RowActionLinks'] == 'none') {",
          "2155:             echo '<th></th>' . \"\\n\";",
          "2156:         }",
          "2157:         echo $vertical_display['textbtn'];",
          "2158:         $cell_displayed = 0;",
          "2159:         foreach ($vertical_display['row_delete'] as $val) {",
          "2162:                 && !($cell_displayed % $_SESSION['tmp_user_values']",
          "2163:                     ['repeat_cells'])) {",
          "2164:                 echo '<th' .",
          "2167:                         ? ' rowspan=\"4\"'",
          "2168:                         : '') .",
          "2169:                      '></th>' . \"\\n\";",
          "",
          "[Removed Lines]",
          "2148:         && (count($vertical_display['row_delete']) > 0",
          "2160:             if (($cell_displayed != 0)",
          "2161:                 && ($_SESSION['tmp_user_values']['repeat_cells'] != 0)",
          "2165:                      (($is_display['edit_lnk'] != 'nn'",
          "2166:                             && $is_display['del_lnk'] != 'nn')",
          "",
          "[Added Lines]",
          "2179:         && (count($vertical_display['row_delete']) > 0",
          "2191:             if (($cell_displayed != 0)",
          "2192:                 && ($_SESSION['tmp_user_values']['repeat_cells'] != 0)",
          "2196:                      (($is_display['edit_lnk'] != 'nn'",
          "2197:                             && $is_display['del_lnk'] != 'nn')",
          "",
          "---------------",
          "--- Hunk 71 ---",
          "[Context before]",
          "2175:     } // end if",
          "2179:             || $GLOBALS['cfg']['RowActionLinks'] == 'both')",
          "2180:         && is_array($vertical_display['edit'])",
          "2182:             || !empty($vertical_display['textbtn']))",
          "2183:     ) {",
          "2184:         echo '<tr>' . \"\\n\";",
          "",
          "[Removed Lines]",
          "2178:     if (($GLOBALS['cfg']['RowActionLinks'] == 'left'",
          "2181:         && (count($vertical_display['edit']) > 0",
          "",
          "[Added Lines]",
          "2209:     if (($GLOBALS['cfg']['RowActionLinks'] == 'left'",
          "2212:         && (count($vertical_display['edit']) > 0",
          "",
          "---------------",
          "--- Hunk 72 ---",
          "[Context before]",
          "2192:     } // end if",
          "2196:             || $GLOBALS['cfg']['RowActionLinks'] == 'both')",
          "2197:         && is_array($vertical_display['copy'])",
          "2199:             || !empty($vertical_display['textbtn']))",
          "2200:     ) {",
          "2201:         echo '<tr>' . \"\\n\";",
          "",
          "[Removed Lines]",
          "2195:     if (($GLOBALS['cfg']['RowActionLinks'] == 'left'",
          "2198:         && (count($vertical_display['copy']) > 0",
          "",
          "[Added Lines]",
          "2226:     if (($GLOBALS['cfg']['RowActionLinks'] == 'left'",
          "2229:         && (count($vertical_display['copy']) > 0",
          "",
          "---------------",
          "--- Hunk 73 ---",
          "[Context before]",
          "2209:     } // end if",
          "2213:             || $GLOBALS['cfg']['RowActionLinks'] == 'both')",
          "2214:         && is_array($vertical_display['delete'])",
          "2216:             || !empty($vertical_display['textbtn']))",
          "2217:     ) {",
          "2218:         echo '<tr>' . \"\\n\";",
          "2220:             && ! is_array($vertical_display['row_delete'])) {",
          "2221:             echo $vertical_display['textbtn'];",
          "2222:         }",
          "",
          "[Removed Lines]",
          "2212:     if (($GLOBALS['cfg']['RowActionLinks'] == 'left'",
          "2215:         && (count($vertical_display['delete']) > 0",
          "2219:         if (! is_array($vertical_display['edit'])",
          "",
          "[Added Lines]",
          "2243:     if (($GLOBALS['cfg']['RowActionLinks'] == 'left'",
          "2246:         && (count($vertical_display['delete']) > 0",
          "2250:         if (! is_array($vertical_display['edit'])",
          "",
          "---------------",
          "--- Hunk 74 ---",
          "[Context before]",
          "2242:         $key = $col_order ? $col_order[$j] : $j;",
          "2245:             . '>' . \"\\n\";",
          "2246:         echo $val;",
          "2248:         $cell_displayed = 0;",
          "2249:         foreach ($vertical_display['rowdata'][$key] as $subval) {",
          "2252:                 && !($cell_displayed % $_SESSION['tmp_user_values']",
          "2253:                     ['repeat_cells'])) {",
          "2254:                 echo $val;",
          "",
          "[Removed Lines]",
          "2244:         echo '<tr' . (($col_visib && !$col_visib[$j]) ? ' class=\"hide\"' : '')",
          "2250:             if (($cell_displayed != 0)",
          "2251:                 && ($_SESSION['tmp_user_values']['repeat_cells'] != 0)",
          "",
          "[Added Lines]",
          "2275:         echo '<tr' . (($col_visib && !$col_visib[$j]) ? ' class=\"hide\"' : '')",
          "2281:             if (($cell_displayed != 0)",
          "2282:                 && ($_SESSION['tmp_user_values']['repeat_cells'] != 0)",
          "",
          "---------------",
          "--- Hunk 75 ---",
          "[Context before]",
          "2262:     } // end while",
          "2266:             || $GLOBALS['cfg']['RowActionLinks'] == 'both')",
          "2267:         && is_array($vertical_display['row_delete'])",
          "2269:             || !empty($vertical_display['textbtn']))",
          "2270:     ) {",
          "2271:         echo '<tr>' . \"\\n\";",
          "2272:         echo $vertical_display['textbtn'];",
          "2273:         $cell_displayed = 0;",
          "2274:         foreach ($vertical_display['row_delete'] as $val) {",
          "2277:                 && !($cell_displayed % $_SESSION['tmp_user_values']",
          "2278:                     ['repeat_cells'])) {",
          "2279:                 echo '<th' .",
          "2281:                         && $is_display['del_lnk'] != 'nn') ? ' rowspan=\"4\"' : '') .",
          "2282:                      '></th>' . \"\\n\";",
          "2283:             }",
          "",
          "[Removed Lines]",
          "2265:     if (($GLOBALS['cfg']['RowActionLinks'] == 'right'",
          "2268:         && (count($vertical_display['row_delete']) > 0",
          "2275:             if (($cell_displayed != 0)",
          "2276:                 && ($_SESSION['tmp_user_values']['repeat_cells'] != 0)",
          "2280:                      (($is_display['edit_lnk'] != 'nn'",
          "",
          "[Added Lines]",
          "2296:     if (($GLOBALS['cfg']['RowActionLinks'] == 'right'",
          "2299:         && (count($vertical_display['row_delete']) > 0",
          "2306:             if (($cell_displayed != 0)",
          "2307:                 && ($_SESSION['tmp_user_values']['repeat_cells'] != 0)",
          "2311:                      (($is_display['edit_lnk'] != 'nn'",
          "",
          "---------------",
          "--- Hunk 76 ---",
          "[Context before]",
          "2289:     } // end if",
          "2293:             || $GLOBALS['cfg']['RowActionLinks'] == 'both')",
          "2294:         && is_array($vertical_display['edit'])",
          "2296:             || !empty($vertical_display['textbtn']))",
          "2297:     ) {",
          "2298:         echo '<tr>' . \"\\n\";",
          "",
          "[Removed Lines]",
          "2292:     if (($GLOBALS['cfg']['RowActionLinks'] == 'right'",
          "2295:         && (count($vertical_display['edit']) > 0",
          "",
          "[Added Lines]",
          "2323:     if (($GLOBALS['cfg']['RowActionLinks'] == 'right'",
          "2326:         && (count($vertical_display['edit']) > 0",
          "",
          "---------------",
          "--- Hunk 77 ---",
          "[Context before]",
          "2306:     } // end if",
          "2310:             || $GLOBALS['cfg']['RowActionLinks'] == 'both')",
          "2311:         && is_array($vertical_display['copy'])",
          "2313:             || !empty($vertical_display['textbtn']))",
          "2314:     ) {",
          "2315:         echo '<tr>' . \"\\n\";",
          "",
          "[Removed Lines]",
          "2309:     if (($GLOBALS['cfg']['RowActionLinks'] == 'right'",
          "2312:         && (count($vertical_display['copy']) > 0",
          "",
          "[Added Lines]",
          "2340:     if (($GLOBALS['cfg']['RowActionLinks'] == 'right'",
          "2343:         && (count($vertical_display['copy']) > 0",
          "",
          "---------------",
          "--- Hunk 78 ---",
          "[Context before]",
          "2323:     } // end if",
          "2327:             || $GLOBALS['cfg']['RowActionLinks'] == 'both')",
          "2328:         && is_array($vertical_display['delete'])",
          "2330:             || !empty($vertical_display['textbtn']))",
          "2331:     ) {",
          "2332:         echo '<tr>' . \"\\n\";",
          "2334:             && ! is_array($vertical_display['row_delete'])) {",
          "2335:             echo $vertical_display['textbtn'];",
          "2336:         }",
          "",
          "[Removed Lines]",
          "2326:     if (($GLOBALS['cfg']['RowActionLinks'] == 'right'",
          "2329:         && (count($vertical_display['delete']) > 0",
          "2333:         if (! is_array($vertical_display['edit'])",
          "",
          "[Added Lines]",
          "2357:     if (($GLOBALS['cfg']['RowActionLinks'] == 'right'",
          "2360:         && (count($vertical_display['delete']) > 0",
          "2364:         if (! is_array($vertical_display['edit'])",
          "",
          "---------------",
          "--- Hunk 79 ---",
          "[Context before]",
          "2361:     $_SESSION['tmp_user_values']['query'][$sql_md5]['sql'] = $GLOBALS['sql_query'];",
          "2364:         array('horizontal', 'vertical', 'horizontalflipped'))) {",
          "2366:             = $_REQUEST['disp_direction'];",
          "2367:         unset($_REQUEST['disp_direction']);",
          "2368:     } elseif (empty($_SESSION['tmp_user_values']['query'][$sql_md5]",
          "2369:             ['disp_direction'])) {",
          "2371:         = $GLOBALS['cfg']['DefaultDisplay'];",
          "2372:     }",
          "2374:     if (PMA_isValid($_REQUEST['repeat_cells'], 'numeric')) {",
          "2376:         = $_REQUEST['repeat_cells'];",
          "2377:         unset($_REQUEST['repeat_cells']);",
          "2378:     } elseif (empty($_SESSION['tmp_user_values']['query'][$sql_md5]",
          "2379:             ['repeat_cells'])) {",
          "2381:         = $GLOBALS['cfg']['RepeatCells'];",
          "2382:     }",
          "",
          "[Removed Lines]",
          "2363:     if (PMA_isValid($_REQUEST['disp_direction'],",
          "2365:         $_SESSION['tmp_user_values']['query'][$sql_md5]['disp_direction']",
          "2370:         $_SESSION['tmp_user_values']['query'][$sql_md5]['disp_direction']",
          "2375:         $_SESSION['tmp_user_values']['query'][$sql_md5]['repeat_cells']",
          "2380:         $_SESSION['tmp_user_values']['query'][$sql_md5]['repeat_cells']",
          "",
          "[Added Lines]",
          "2394:     if (PMA_isValid($_REQUEST['disp_direction'],",
          "2396:         $_SESSION['tmp_user_values']['query'][$sql_md5]['disp_direction']",
          "2401:         $_SESSION['tmp_user_values']['query'][$sql_md5]['disp_direction']",
          "2406:         $_SESSION['tmp_user_values']['query'][$sql_md5]['repeat_cells']",
          "2411:         $_SESSION['tmp_user_values']['query'][$sql_md5]['repeat_cells']",
          "",
          "---------------",
          "--- Hunk 80 ---",
          "[Context before]",
          "2387:         && (int) $_REQUEST['session_max_rows'] == $_REQUEST['session_max_rows'])",
          "2388:         || $_REQUEST['session_max_rows'] == 'all'",
          "2389:     ) {",
          "2391:             = $_REQUEST['session_max_rows'];",
          "2392:         unset($_REQUEST['session_max_rows']);",
          "2393:     } elseif (empty($_SESSION['tmp_user_values']['query'][$sql_md5]['max_rows'])) {",
          "",
          "[Removed Lines]",
          "2390:         $_SESSION['tmp_user_values']['query'][$sql_md5]['max_rows']",
          "",
          "[Added Lines]",
          "2421:         $_SESSION['tmp_user_values']['query'][$sql_md5]['max_rows']",
          "",
          "---------------",
          "--- Hunk 81 ---",
          "[Context before]",
          "2403:     }",
          "2405:     if (PMA_isValid($_REQUEST['display_text'], array('P', 'F'))) {",
          "2407:                 = $_REQUEST['display_text'];",
          "2408:         unset($_REQUEST['display_text']);",
          "2409:     } elseif (empty($_SESSION['tmp_user_values']['query'][$sql_md5]",
          "",
          "[Removed Lines]",
          "2406:         $_SESSION['tmp_user_values']['query'][$sql_md5]['display_text']",
          "",
          "[Added Lines]",
          "2437:         $_SESSION['tmp_user_values']['query'][$sql_md5]['display_text']",
          "",
          "---------------",
          "--- Hunk 82 ---",
          "[Context before]",
          "2421:     }",
          "2423:     if (PMA_isValid($_REQUEST['geometry_display'], array('WKT', 'WKB', 'GEOM'))) {",
          "2425:             $_REQUEST['geometry_display'];",
          "2426:         unset($_REQUEST['geometry_display']);",
          "2427:     } elseif (empty($_SESSION['tmp_user_values']['query'][$sql_md5]",
          "",
          "[Removed Lines]",
          "2424:         $_SESSION['tmp_user_values']['query'][$sql_md5]['geometry_display'] =",
          "",
          "[Added Lines]",
          "2455:         $_SESSION['tmp_user_values']['query'][$sql_md5]['geometry_display'] =",
          "",
          "---------------",
          "--- Hunk 83 ---",
          "[Context before]",
          "2445:     }",
          "2447:     if (isset($_REQUEST['display_binary_as_hex'])) {",
          "2449:             = true;",
          "2450:         unset($_REQUEST['display_binary_as_hex']);",
          "2451:     } elseif (isset($_REQUEST['display_options_form'])) {",
          "",
          "[Removed Lines]",
          "2448:         $_SESSION['tmp_user_values']['query'][$sql_md5]['display_binary_as_hex']",
          "",
          "[Added Lines]",
          "2479:         $_SESSION['tmp_user_values']['query'][$sql_md5]['display_binary_as_hex']",
          "",
          "---------------",
          "--- Hunk 84 ---",
          "[Context before]",
          "2457:     } else {",
          "2460:             && true === $GLOBALS['cfg']['DisplayBinaryAsHex']) {",
          "2462:                 = true;",
          "2463:         }",
          "2464:     }",
          "",
          "[Removed Lines]",
          "2459:         if (isset($GLOBALS['cfg']['DisplayBinaryAsHex'])",
          "2461:             $_SESSION['tmp_user_values']['query'][$sql_md5]['display_binary_as_hex']",
          "",
          "[Added Lines]",
          "2490:         if (isset($GLOBALS['cfg']['DisplayBinaryAsHex'])",
          "2492:             $_SESSION['tmp_user_values']['query'][$sql_md5]['display_binary_as_hex']",
          "",
          "---------------",
          "--- Hunk 85 ---",
          "[Context before]",
          "2472:     }",
          "2474:     if (isset($_REQUEST['hide_transformation'])) {",
          "2476:             = true;",
          "2477:         unset($_REQUEST['hide_transformation']);",
          "2478:     } elseif (isset($_REQUEST['display_options_form'])) {",
          "",
          "[Removed Lines]",
          "2475:         $_SESSION['tmp_user_values']['query'][$sql_md5]['hide_transformation']",
          "",
          "[Added Lines]",
          "2506:         $_SESSION['tmp_user_values']['query'][$sql_md5]['hide_transformation']",
          "",
          "---------------",
          "--- Hunk 86 ---",
          "[Context before]",
          "2495:     }",
          "2499:         = $_SESSION['tmp_user_values']['query'][$sql_md5]['display_text'];",
          "2501:         = $_SESSION['tmp_user_values']['query'][$sql_md5]['relational_display'];",
          "2503:         = $_SESSION['tmp_user_values']['query'][$sql_md5]['geometry_display'];",
          "2507:         : false;",
          "2509:         = isset($_SESSION['tmp_user_values']['query'][$sql_md5]",
          "2512:         : false;",
          "2516:         : false;",
          "2518:         = isset($_SESSION['tmp_user_values']['query'][$sql_md5]",
          "2521:         : false;",
          "2523:         = $_SESSION['tmp_user_values']['query'][$sql_md5]['pos'];",
          "2525:         = $_SESSION['tmp_user_values']['query'][$sql_md5]['max_rows'];",
          "2527:         = $_SESSION['tmp_user_values']['query'][$sql_md5]['repeat_cells'];",
          "2529:         = $_SESSION['tmp_user_values']['query'][$sql_md5]['disp_direction'];",
          "2530: }",
          "",
          "[Removed Lines]",
          "2498:     $_SESSION['tmp_user_values']['display_text']",
          "2500:     $_SESSION['tmp_user_values']['relational_display']",
          "2502:     $_SESSION['tmp_user_values']['geometry_display']",
          "2504:     $_SESSION['tmp_user_values']['display_binary']",
          "2505:         = isset($_SESSION['tmp_user_values']['query'][$sql_md5]['display_binary'])",
          "2506:         ? true",
          "2508:     $_SESSION['tmp_user_values']['display_binary_as_hex']",
          "2510:             ['display_binary_as_hex'])",
          "2511:         ? true",
          "2513:     $_SESSION['tmp_user_values']['display_blob']",
          "2514:         = isset($_SESSION['tmp_user_values']['query'][$sql_md5]['display_blob'])",
          "2515:         ? true",
          "2517:     $_SESSION['tmp_user_values']['hide_transformation']",
          "2519:             ['hide_transformation'])",
          "2520:         ? true",
          "2522:     $_SESSION['tmp_user_values']['pos']",
          "2524:     $_SESSION['tmp_user_values']['max_rows']",
          "2526:     $_SESSION['tmp_user_values']['repeat_cells']",
          "2528:     $_SESSION['tmp_user_values']['disp_direction']",
          "",
          "[Added Lines]",
          "2529:     $_SESSION['tmp_user_values']['display_text']",
          "2531:     $_SESSION['tmp_user_values']['relational_display']",
          "2533:     $_SESSION['tmp_user_values']['geometry_display']",
          "2535:     $_SESSION['tmp_user_values']['display_binary']",
          "2536:         = isset($_SESSION['tmp_user_values']['query'][$sql_md5]['display_binary'])",
          "2537:         ? true",
          "2539:     $_SESSION['tmp_user_values']['display_binary_as_hex']",
          "2541:             ['display_binary_as_hex'])",
          "2542:         ? true",
          "2544:     $_SESSION['tmp_user_values']['display_blob']",
          "2545:         = isset($_SESSION['tmp_user_values']['query'][$sql_md5]['display_blob'])",
          "2546:         ? true",
          "2548:     $_SESSION['tmp_user_values']['hide_transformation']",
          "2550:             ['hide_transformation'])",
          "2551:         ? true",
          "2553:     $_SESSION['tmp_user_values']['pos']",
          "2555:     $_SESSION['tmp_user_values']['max_rows']",
          "2557:     $_SESSION['tmp_user_values']['repeat_cells']",
          "2559:     $_SESSION['tmp_user_values']['disp_direction']",
          "",
          "---------------",
          "--- Hunk 87 ---",
          "[Context before]",
          "2584:     if ($is_innodb",
          "2585:         && ! isset($analyzed_sql[0]['queryflags']['union'])",
          "2586:         && ! isset($analyzed_sql[0]['table_ref'][1]['table_name'])",
          "2588:             || $analyzed_sql[0]['where_clause'] == '1 ')",
          "2589:     ) {",
          "",
          "[Removed Lines]",
          "2587:         && (empty($analyzed_sql[0]['where_clause'])",
          "",
          "[Added Lines]",
          "2618:         && (empty($analyzed_sql[0]['where_clause'])",
          "",
          "---------------",
          "--- Hunk 88 ---",
          "[Context before]",
          "2609:             $pos_next     = 0;",
          "2610:             $pos_prev     = 0;",
          "2611:         } else {",
          "2613:                             + $_SESSION['tmp_user_values']['max_rows'];",
          "2615:                             - $_SESSION['tmp_user_values']['max_rows'];",
          "2616:             if ($pos_prev < 0) {",
          "2617:                 $pos_prev = 0;",
          "",
          "[Removed Lines]",
          "2612:             $pos_next     = $_SESSION['tmp_user_values']['pos']",
          "2614:             $pos_prev     = $_SESSION['tmp_user_values']['pos']",
          "",
          "[Added Lines]",
          "2643:             $pos_next     = $_SESSION['tmp_user_values']['pos']",
          "2645:             $pos_prev     = $_SESSION['tmp_user_values']['pos']",
          "",
          "---------------",
          "--- Hunk 89 ---",
          "[Context before]",
          "2626:     if (! empty($analyzed_sql[0]['order_by_clause'])) {",
          "2628:             $analyzed_sql[0]['order_by_clause']));",
          "2632:         preg_match('@(.*)([[:space:]]*(ASC|DESC))@si', $sort_expression, $matches);",
          "2635:             : $sort_expression;",
          "2636:         $sort_direction = isset($matches[2]) ? trim($matches[2]) : '';",
          "2637:         unset($matches);",
          "",
          "[Removed Lines]",
          "2627:         $sort_expression = trim(str_replace('  ', ' ',",
          "2633:         $sort_expression_nodirection = isset($matches[1])",
          "2634:             ? trim($matches[1])",
          "",
          "[Added Lines]",
          "2658:         $sort_expression = trim(str_replace('  ', ' ',",
          "2664:         $sort_expression_nodirection = isset($matches[1])",
          "2665:             ? trim($matches[1])",
          "",
          "---------------",
          "--- Hunk 90 ---",
          "[Context before]",
          "2646:             $sort_table = $table;",
          "2647:             $sort_column = $sort_expression_nodirection;",
          "2648:         } else {",
          "2650:                 = explode('.', $sort_expression_nodirection);",
          "2651:         }",
          "2652:         $sort_table = PMA_unQuote($sort_table);",
          "",
          "[Removed Lines]",
          "2649:             list($sort_table, $sort_column)",
          "",
          "[Added Lines]",
          "2680:             list($sort_table, $sort_column)",
          "",
          "---------------",
          "--- Hunk 91 ---",
          "[Context before]",
          "2671:             $meta = $fields_meta[$sorted_column_index];",
          "2672:             if (stristr($meta->type, 'BLOB') || $meta->type == 'geometry') {",
          "2673:                 $column_for_first_row = PMA_handle_non_printable_contents(",
          "2675:                     $transform_options, $default_function, $meta, null);",
          "2676:             } else {",
          "2677:                 $column_for_first_row = $row[$sorted_column_index];",
          "2678:             }",
          "2680:                 $GLOBALS['cfg']['LimitChars']));",
          "2682:             PMA_DBI_data_seek($dt_result, $num_rows - 1);",
          "",
          "[Removed Lines]",
          "2674:                     $meta->type, $row[$sorted_column_index], $transform_function,",
          "2679:             $column_for_first_row = strtoupper(substr($column_for_first_row, 0,",
          "",
          "[Added Lines]",
          "2705:                     $meta->type, $row[$sorted_column_index], $transform_function,",
          "2710:             $column_for_first_row = strtoupper(substr($column_for_first_row, 0,",
          "",
          "---------------",
          "--- Hunk 92 ---",
          "[Context before]",
          "2685:             $meta = $fields_meta[$sorted_column_index];",
          "2686:             if (stristr($meta->type, 'BLOB') || $meta->type == 'geometry') {",
          "2689:                     $transform_options, $default_function, $meta, null);",
          "2690:             } else {",
          "2691:                 $column_for_last_row = $row[$sorted_column_index];",
          "2692:             }",
          "2694:                 $GLOBALS['cfg']['LimitChars']));",
          "2696:             PMA_DBI_data_seek($dt_result, 0);",
          "2700:                 . htmlspecialchars($column_for_last_row) . '</strong>]';",
          "2702:                 $default_function, $transform_function, $transform_options);",
          "2703:         }",
          "2704:         unset($sorted_column_index, $sort_table, $sort_column);",
          "",
          "[Removed Lines]",
          "2687:                 $column_for_last_row = PMA_handle_non_printable_contents($meta->type,",
          "2688:                     $row[$sorted_column_index], $transform_function,",
          "2693:             $column_for_last_row = strtoupper(substr($column_for_last_row, 0,",
          "2698:             $sorted_column_message = ' [' . htmlspecialchars($sort_column)",
          "2699:                 . ': <strong>' . htmlspecialchars($column_for_first_row) . ' - '",
          "2701:             unset($row, $column_for_first_row, $column_for_last_row, $meta,",
          "",
          "[Added Lines]",
          "2718:                 $column_for_last_row = PMA_handle_non_printable_contents($meta->type,",
          "2719:                     $row[$sorted_column_index], $transform_function,",
          "2724:             $column_for_last_row = strtoupper(substr($column_for_last_row, 0,",
          "2729:             $sorted_column_message = ' [' . htmlspecialchars($sort_column)",
          "2730:                 . ': <strong>' . htmlspecialchars($column_for_first_row) . ' - '",
          "2732:             unset($row, $column_for_first_row, $column_for_last_row, $meta,",
          "",
          "---------------",
          "--- Hunk 93 ---",
          "[Context before]",
          "2722:             } else {",
          "2723:                 $last_shown_rec = $limit_data['start'] + $total - 1;",
          "2724:             }",
          "2726:                 || $pos_next > $total) {",
          "2727:             $first_shown_rec = $_SESSION['tmp_user_values']['pos'];",
          "2728:             $last_shown_rec  = $total - 1;",
          "",
          "[Removed Lines]",
          "2725:         } elseif ($_SESSION['tmp_user_values']['max_rows'] == 'all'",
          "",
          "[Added Lines]",
          "2756:         } elseif ($_SESSION['tmp_user_values']['max_rows'] == 'all'",
          "",
          "---------------",
          "--- Hunk 94 ---",
          "[Context before]",
          "2772:         PMA_showMessage($message, $sql_query, 'success');",
          "2774:     } elseif (! isset($GLOBALS['printview']) || $GLOBALS['printview'] != '1') {",
          "2776:             $sql_query, 'success');",
          "2777:     }",
          "",
          "[Removed Lines]",
          "2775:         PMA_showMessage(__('Your SQL query has been executed successfully'),",
          "",
          "[Added Lines]",
          "2806:         PMA_showMessage(__('Your SQL query has been executed successfully'),",
          "",
          "---------------",
          "--- Hunk 95 ---",
          "[Context before]",
          "2791:     }",
          "2793:     if ($is_display['nav_bar'] == '1' && empty($analyzed_sql[0]['limit_clause'])) {",
          "2795:             'top_direction_dropdown');",
          "2796:         echo \"\\n\";",
          "2797:     } elseif (! isset($GLOBALS['printview']) || $GLOBALS['printview'] != '1') {",
          "",
          "[Removed Lines]",
          "2794:         PMA_displayTableNavigation($pos_next, $pos_prev, $sql_query,",
          "",
          "[Added Lines]",
          "2825:         PMA_displayTableNavigation($pos_next, $pos_prev, $sql_query,",
          "",
          "---------------",
          "--- Hunk 96 ---",
          "[Context before]",
          "2808:     $target=array();",
          "2810:         && is_array($analyzed_sql[0]['table_ref'])) {",
          "2812:             as $table_ref_position => $table_ref) {",
          "2813:             $target[] = $analyzed_sql[0]['table_ref'][$table_ref_position]",
          "2814:                 ['table_true_name'];",
          "",
          "[Removed Lines]",
          "2809:     if (isset($analyzed_sql[0]['table_ref'])",
          "2811:         foreach ($analyzed_sql[0]['table_ref']",
          "",
          "[Added Lines]",
          "2840:     if (isset($analyzed_sql[0]['table_ref'])",
          "2842:         foreach ($analyzed_sql[0]['table_ref']",
          "",
          "---------------",
          "--- Hunk 97 ---",
          "[Context before]",
          "2828:         $exist_rel = PMA_getForeigners($db, $table, '', 'both');",
          "2829:         if ($exist_rel) {",
          "2830:             foreach ($exist_rel as $master_field => $rel) {",
          "2832:                     $rel['foreign_table']);",
          "2833:                 $map[$master_field] = array($rel['foreign_table'],",
          "2834:                                       $rel['foreign_field'],",
          "",
          "[Removed Lines]",
          "2831:                 $display_field = PMA_getDisplayField($rel['foreign_db'],",
          "",
          "[Added Lines]",
          "2862:                 $display_field = PMA_getDisplayField($rel['foreign_db'],",
          "",
          "---------------",
          "--- Hunk 98 ---",
          "[Context before]",
          "2844:         $sort_expression, $sort_expression_nodirection, $sort_direction);",
          "2845:     $url_query = '';",
          "2846:     echo '<tbody>' . \"\\n\";",
          "2848:         $analyzed_sql);",
          "2850:     if ($_SESSION['tmp_user_values']['disp_direction'] == 'vertical') {",
          "",
          "[Removed Lines]",
          "2843:     PMA_displayTableHeaders($is_display, $fields_meta, $fields_cnt, $analyzed_sql,",
          "2847:     $clause_is_unique = PMA_displayTableBody($dt_result, $is_display, $map,",
          "",
          "[Added Lines]",
          "2874:     PMA_displayTableHeaders($is_display, $fields_meta, $fields_cnt, $analyzed_sql,",
          "2878:     $clause_is_unique = PMA_displayTableBody($dt_result, $is_display, $map,",
          "",
          "---------------",
          "--- Hunk 99 ---",
          "[Context before]",
          "2874:         $checkall_url = 'sql.php' . PMA_generate_common_url($_url_params);",
          "2876:         if ($_SESSION['tmp_user_values']['disp_direction'] == 'vertical') {",
          "2878:                 = 'if (setCheckboxes(\\'resultsForm\\', true)) return false;';",
          "2880:                 = 'if (setCheckboxes(\\'resultsForm\\', false)) return false;';",
          "2881:         } else {",
          "2883:                 = 'if (markAllRows(\\'resultsForm\\')) return false;';",
          "2885:                 = 'if (unMarkAllRows(\\'resultsForm\\')) return false;';",
          "2886:         }",
          "2888:             $checkall_params, false);",
          "2890:             $uncheckall_params, false);",
          "2891:         if ($_SESSION['tmp_user_values']['disp_direction'] != 'vertical') {",
          "2892:             echo '<img class=\"selectallarrow\" width=\"38\" height=\"22\"'",
          "2894:                 . $GLOBALS['text_dir'] . '.png' . '\"'",
          "2895:                 .' alt=\"' . __('With selected:') . '\" />';",
          "2896:         }",
          "",
          "[Removed Lines]",
          "2877:             $checkall_params['onclick']",
          "2879:             $uncheckall_params['onclick']",
          "2882:             $checkall_params['onclick']",
          "2884:             $uncheckall_params['onclick']",
          "2887:         $checkall_link = PMA_linkOrButton($checkall_url, __('Check All'),",
          "2889:         $uncheckall_link = PMA_linkOrButton($uncheckall_url, __('Uncheck All'),",
          "2893:                 .' src=\"' . $GLOBALS['pmaThemeImage'] . 'arrow_'",
          "",
          "[Added Lines]",
          "2908:             $checkall_params['onclick']",
          "2910:             $uncheckall_params['onclick']",
          "2913:             $checkall_params['onclick']",
          "2915:             $uncheckall_params['onclick']",
          "2918:         $checkall_link = PMA_linkOrButton($checkall_url, __('Check All'),",
          "2920:         $uncheckall_link = PMA_linkOrButton($uncheckall_url, __('Uncheck All'),",
          "2924:                 .' src=\"' . $GLOBALS['pmaThemeImage'] . 'arrow_'",
          "",
          "---------------",
          "--- Hunk 100 ---",
          "[Context before]",
          "2934:     if ($is_display['nav_bar'] == '1' && empty($analyzed_sql[0]['limit_clause'])) {",
          "2935:         echo '<br />' . \"\\n\";",
          "2937:             'bottom_direction_dropdown');",
          "2938:     } elseif (! isset($GLOBALS['printview']) || $GLOBALS['printview'] != '1') {",
          "2939:         echo \"\\n\" . '<br /><br />' . \"\\n\";",
          "",
          "[Removed Lines]",
          "2936:         PMA_displayTableNavigation($pos_next, $pos_prev, $sql_query,",
          "",
          "[Added Lines]",
          "2967:         PMA_displayTableNavigation($pos_next, $pos_prev, $sql_query,",
          "",
          "---------------",
          "--- Hunk 101 ---",
          "[Context before]",
          "2949: {",
          "2950:     $buffer = htmlspecialchars($buffer);",
          "2951:     $buffer = str_replace(",
          "2954:         str_replace('  ', ' &nbsp;', $buffer));",
          "2955:     $buffer = preg_replace(\"@((\\015\\012)|(\\015)|(\\012))@\", '<br />', $buffer);",
          "",
          "[Removed Lines]",
          "2952:         \"\\011\",",
          "2953:         ' &nbsp;&nbsp;&nbsp;',",
          "",
          "[Added Lines]",
          "2983:         \"\\011\",",
          "2984:         ' &nbsp;&nbsp;&nbsp;',",
          "",
          "---------------",
          "--- Hunk 102 ---",
          "[Context before]",
          "3012:                 $_url_params['display_text'] = 'F';",
          "3013:                 echo PMA_linkOrButton(",
          "3014:                     'sql.php' . PMA_generate_common_url($_url_params),",
          "3016:                         true),",
          "3017:                     '', true, true, 'print_view'",
          "3018:                 ) . \"\\n\";",
          "",
          "[Removed Lines]",
          "3015:                     PMA_getIcon('b_print.png', __('Print view (with full texts)'),",
          "",
          "[Added Lines]",
          "3046:                     PMA_getIcon('b_print.png', __('Print view (with full texts)'),",
          "",
          "---------------",
          "--- Hunk 103 ---",
          "[Context before]",
          "3034:         && ! isset($analyzed_sql[0]['queryflags']['procedure'])) {",
          "3036:             && ! isset($analyzed_sql[0]['table_ref'][1]['table_true_name'])) {",
          "3037:             $_url_params['single_table'] = 'true';",
          "3038:         }",
          "",
          "[Removed Lines]",
          "3031:     if (isset($analyzed_sql[0])",
          "3032:         && $analyzed_sql[0]['querytype'] == 'SELECT'",
          "3033:         && ! isset($printview)",
          "3035:         if (isset($analyzed_sql[0]['table_ref'][0]['table_true_name'])",
          "",
          "[Added Lines]",
          "3062:     if (isset($analyzed_sql[0])",
          "3063:         && $analyzed_sql[0]['querytype'] == 'SELECT'",
          "3064:         && ! isset($printview)",
          "3066:         if (isset($analyzed_sql[0]['table_ref'][0]['table_true_name'])",
          "",
          "---------------",
          "--- Hunk 104 ---",
          "[Context before]",
          "3133:     $transform_options, $default_function, $meta, $url_params = array())",
          "3134: {",
          "3135:     $result = '[' . $category;",
          "",
          "[Removed Lines]",
          "3132: function PMA_handle_non_printable_contents($category, $content, $transform_function,",
          "",
          "[Added Lines]",
          "3163: function PMA_handle_non_printable_contents($category, $content, $transform_function,",
          "",
          "---------------",
          "--- Hunk 105 ---",
          "[Context before]",
          "3151:             $result = $transform_function($result, $transform_options, $meta);",
          "3152:         } else {",
          "3153:             $result = $default_function($result, array(), $meta);",
          "3155:                 && $_SESSION['tmp_user_values']['display_blob']) {",
          "3157:                 $result = htmlspecialchars(PMA_replace_binary_contents($content));",
          "3158:             }",
          "3160:             if (count($url_params) > 0) {",
          "3162:                     . PMA_generate_common_url($url_params) . '\">' . $result . '</a>';",
          "3163:             }",
          "3164:         }",
          "",
          "[Removed Lines]",
          "3154:             if (stristr($meta->type, 'BLOB')",
          "3161:                 $result = '<a href=\"tbl_get_field.php'",
          "",
          "[Added Lines]",
          "3185:             if (stristr($meta->type, 'BLOB')",
          "3192:                 $result = '<a href=\"tbl_get_field.php'",
          "",
          "---------------",
          "--- Hunk 106 ---",
          "[Context before]",
          "3190:     $transform_options, $is_field_truncated )",
          "3191: {",
          "3193:     global $db;",
          "3196:         $is_field_truncated, $transform_function, $default_function) . '\">';",
          "3199:         && is_array($analyzed_sql[0]['select_expr'])) {",
          "3201:             as $select_expr_position => $select_expr) {",
          "3202:             $alias = $analyzed_sql[0]['select_expr'][$select_expr_position]['alias'];",
          "3203:             if (isset($alias) && strlen($alias)) {",
          "",
          "[Removed Lines]",
          "3188: function PMA_prepare_row_data($class, $condition_field, $analyzed_sql, $meta, $map,",
          "3189:     $data, $transform_function, $default_function, $nowrap, $where_comparison,",
          "3195:     $result = ' class=\"' . PMA_addClass($class, $condition_field, $meta, $nowrap,",
          "3198:     if (isset($analyzed_sql[0]['select_expr'])",
          "3200:         foreach ($analyzed_sql[0]['select_expr']",
          "",
          "[Added Lines]",
          "3219: function PMA_prepare_row_data($class, $condition_field, $analyzed_sql, $meta, $map,",
          "3220:     $data, $transform_function, $default_function, $nowrap, $where_comparison,",
          "3226:     $result = ' class=\"' . PMA_addClass($class, $condition_field, $meta, $nowrap,",
          "3229:     if (isset($analyzed_sql[0]['select_expr'])",
          "3231:         foreach ($analyzed_sql[0]['select_expr']",
          "",
          "---------------",
          "--- Hunk 107 ---",
          "[Context before]",
          "3232:         } // end if... else...",
          "3234:         if (isset($GLOBALS['printview']) && $GLOBALS['printview'] == '1') {",
          "3238:                 . ' <code>[-&gt;' . $dispval . ']</code>';",
          "3239:         } else {",
          "",
          "[Removed Lines]",
          "3235:             $result .= ($transform_function != $default_function",
          "3236:                     ? $transform_function($data, $transform_options, $meta)",
          "3237:                     : $transform_function($data, array(), $meta))",
          "",
          "[Added Lines]",
          "3266:             $result .= ($transform_function != $default_function",
          "3267:                     ? $transform_function($data, $transform_options, $meta)",
          "3268:                     : $transform_function($data, array(), $meta))",
          "",
          "---------------",
          "--- Hunk 108 ---",
          "[Context before]",
          "3252:                 'table' => $map[$meta->name][0],",
          "3253:                 'pos'   => '0',",
          "3254:                 'sql_query' => 'SELECT * FROM '",
          "3256:                                     . PMA_backquote($map[$meta->name][0])",
          "3257:                                     . ' WHERE ' . PMA_backquote($map[$meta->name][1])",
          "3258:                                     . $where_comparison,",
          "",
          "[Removed Lines]",
          "3255:                                     . PMA_backquote($map[$meta->name][3]) . '.'",
          "",
          "[Added Lines]",
          "3286:                                     . PMA_backquote($map[$meta->name][3]) . '.'",
          "",
          "---------------",
          "--- Hunk 109 ---",
          "[Context before]",
          "3277:             $result .= '</a>';",
          "3278:         }",
          "3279:     } else {",
          "3282:             : $transform_function($data, array(), $meta));",
          "3283:     }",
          "",
          "[Removed Lines]",
          "3280:         $result .= ($transform_function != $default_function",
          "3281:             ? $transform_function($data, $transform_options, $meta)",
          "",
          "[Added Lines]",
          "3311:         $result .= ($transform_function != $default_function",
          "3312:             ? $transform_function($data, $transform_options, $meta)",
          "",
          "---------------",
          "--- Hunk 110 ---",
          "[Context before]",
          "3292:                                 'table' => $meta->orgtable,",
          "3293:                                 'pos'   => '0',",
          "3294:                                 'sql_query' => 'SELECT * FROM '",
          "3296:                                                     . PMA_backquote($meta->orgtable)",
          "3298:                                                     . PMA_backquote($meta->orgname)",
          "3299:                                                     . $where_comparison,",
          "3300:         );",
          "3303:             . PMA_generate_common_url($_url_params_for_show_data_row). '\" />';",
          "3305:     }",
          "",
          "[Removed Lines]",
          "3295:                                                     . PMA_backquote($db) . '.'",
          "3297:                                                     . ' WHERE '",
          "3302:         $result .= '<input type=\"hidden\" class=\"data_browse_link\" value=\"'",
          "",
          "[Added Lines]",
          "3326:                                                     . PMA_backquote($db) . '.'",
          "3328:                                                     . ' WHERE '",
          "3333:         $result .= '<input type=\"hidden\" class=\"data_browse_link\" value=\"'",
          "",
          "---------------",
          "--- Hunk 111 ---",
          "[Context before]",
          "3329:     $where_clause_html, $condition_array, $del_query, $id_suffix, $class)",
          "3330: {",
          "3331:     $ret = '';",
          "",
          "[Removed Lines]",
          "3328: function PMA_generateCheckboxForMulti($del_url, $is_display, $row_no,",
          "",
          "[Added Lines]",
          "3359: function PMA_generateCheckboxForMulti($del_url, $is_display, $row_no,",
          "",
          "---------------",
          "--- Hunk 112 ---",
          "[Context before]",
          "3335:             $ret .= 'class=\"' . $class . '\"';",
          "3336:         }",
          "3337:         $ret .= ' class=\"center\">'",
          "3339:            . '\" name=\"rows_to_delete[' . $row_no . ']\"'",
          "3340:            . ' class=\"multi_checkbox\"'",
          "3344:                : '') . ' />'",
          "3346:            . htmlspecialchars(json_encode($condition_array)) . '\" />'",
          "3347:            . '    </td>';",
          "3348:     }",
          "",
          "[Removed Lines]",
          "3338:            . '<input type=\"checkbox\" id=\"id_rows_to_delete' . $row_no . $id_suffix",
          "3341:            . ' value=\"' . $where_clause_html . '\" '",
          "3342:            . (isset($GLOBALS['checkall'])",
          "3343:                ? 'checked=\"checked\"'",
          "3345:            . '<input type=\"hidden\" class=\"condition_array\" value=\"'",
          "",
          "[Added Lines]",
          "3369:            . '<input type=\"checkbox\" id=\"id_rows_to_delete' . $row_no . $id_suffix",
          "3372:            . ' value=\"' . $where_clause_html . '\" '",
          "3373:            . (isset($GLOBALS['checkall'])",
          "3374:                ? 'checked=\"checked\"'",
          "3376:            . '<input type=\"hidden\" class=\"condition_array\" value=\"'",
          "",
          "---------------",
          "--- Hunk 113 ---",
          "[Context before]",
          "3364:     $where_clause_html)",
          "3365: {",
          "3366:     $ret = '';",
          "",
          "[Removed Lines]",
          "3363: function PMA_generateEditLink($edit_url, $class, $edit_str, $where_clause,",
          "",
          "[Added Lines]",
          "3394: function PMA_generateEditLink($edit_url, $class, $edit_str, $where_clause,",
          "",
          "---------------",
          "--- Hunk 114 ---",
          "[Context before]",
          "3374:         if (! empty($where_clause)) {",
          "3376:                 . $where_clause_html . '\" />';",
          "3377:         }",
          "3378:         $ret .= '</span></td>';",
          "",
          "[Removed Lines]",
          "3375:             $ret .= '<input type=\"hidden\" class=\"where_clause\" value =\"'",
          "",
          "[Added Lines]",
          "3406:             $ret .= '<input type=\"hidden\" class=\"where_clause\" value =\"'",
          "",
          "---------------",
          "--- Hunk 115 ---",
          "[Context before]",
          "3395:     $where_clause_html, $class)",
          "3396: {",
          "3397:     $ret = '';",
          "",
          "[Removed Lines]",
          "3394: function PMA_generateCopyLink($copy_url, $copy_str, $where_clause,",
          "",
          "[Added Lines]",
          "3425: function PMA_generateCopyLink($copy_url, $copy_str, $where_clause,",
          "",
          "---------------",
          "--- Hunk 116 ---",
          "[Context before]",
          "3409:         if (! empty($where_clause)) {",
          "3411:                 . $where_clause_html . '\" />';",
          "3412:         }",
          "3413:         $ret .= '</span></td>';",
          "",
          "[Removed Lines]",
          "3410:             $ret .= '<input type=\"hidden\" class=\"where_clause\" value=\"'",
          "",
          "[Added Lines]",
          "3441:             $ret .= '<input type=\"hidden\" class=\"where_clause\" value=\"'",
          "",
          "---------------",
          "--- Hunk 117 ---",
          "[Context before]",
          "3468:     $edit_url, $copy_url, $class, $edit_str, $copy_str, $del_str, $js_conf)",
          "3469: {",
          "3470:     $ret = '';",
          "3472:     if ($position == 'left') {",
          "3475:             '', '', '');",
          "3478:             $where_clause_html, '');",
          "3481:             $where_clause_html, '');",
          "3483:         $ret .= PMA_generateDeleteLink($del_url, $del_str, $js_conf, '', '');",
          "",
          "[Removed Lines]",
          "3466: function PMA_generateCheckboxAndLinks($position, $del_url, $is_display, $row_no,",
          "3467:     $where_clause, $where_clause_html, $condition_array, $del_query, $id_suffix,",
          "3473:         $ret .= PMA_generateCheckboxForMulti($del_url, $is_display, $row_no,",
          "3474:             $where_clause_html, $condition_array, $del_query, $id_suffix = '_left',",
          "3477:         $ret .= PMA_generateEditLink($edit_url, $class, $edit_str, $where_clause,",
          "3480:         $ret .= PMA_generateCopyLink($copy_url, $copy_str, $where_clause,",
          "",
          "[Added Lines]",
          "3497: function PMA_generateCheckboxAndLinks($position, $del_url, $is_display, $row_no,",
          "3498:     $where_clause, $where_clause_html, $condition_array, $del_query, $id_suffix,",
          "3504:         $ret .= PMA_generateCheckboxForMulti($del_url, $is_display, $row_no,",
          "3505:             $where_clause_html, $condition_array, $del_query, $id_suffix = '_left',",
          "3508:         $ret .= PMA_generateEditLink($edit_url, $class, $edit_str, $where_clause,",
          "3511:         $ret .= PMA_generateCopyLink($copy_url, $copy_str, $where_clause,",
          "",
          "---------------",
          "--- Hunk 118 ---",
          "[Context before]",
          "3485:     } elseif ($position == 'right') {",
          "3486:         $ret .= PMA_generateDeleteLink($del_url, $del_str, $js_conf, '', '');",
          "3489:             $where_clause_html, '');",
          "3492:             $where_clause_html, '');",
          "3496:             '', '', '');",
          "3497:     } else { // $position == 'none'",
          "3500:             '', '', '');",
          "3501:     }",
          "3502:     return $ret;",
          "",
          "[Removed Lines]",
          "3488:         $ret .= PMA_generateCopyLink($copy_url, $copy_str, $where_clause,",
          "3491:         $ret .= PMA_generateEditLink($edit_url, $class, $edit_str, $where_clause,",
          "3494:         $ret .= PMA_generateCheckboxForMulti($del_url, $is_display, $row_no,",
          "3495:             $where_clause_html, $condition_array, $del_query, $id_suffix = '_right',",
          "3498:         $ret .= PMA_generateCheckboxForMulti($del_url, $is_display, $row_no,",
          "3499:             $where_clause_html, $condition_array, $del_query, $id_suffix = '_left',",
          "",
          "[Added Lines]",
          "3519:         $ret .= PMA_generateCopyLink($copy_url, $copy_str, $where_clause,",
          "3522:         $ret .= PMA_generateEditLink($edit_url, $class, $edit_str, $where_clause,",
          "3525:         $ret .= PMA_generateCheckboxForMulti($del_url, $is_display, $row_no,",
          "3526:             $where_clause_html, $condition_array, $del_query, $id_suffix = '_right',",
          "3529:         $ret .= PMA_generateCheckboxForMulti($del_url, $is_display, $row_no,",
          "3530:             $where_clause_html, $condition_array, $del_query, $id_suffix = '_left',",
          "",
          "---------------"
        ]
      }
    },
    {
      "candidate_hash": "aacbb06828c49f6427917f8b7cf82e7f9ed3a671",
      "candidate_info": {
        "commit_hash": "aacbb06828c49f6427917f8b7cf82e7f9ed3a671",
        "repo": "phpmyadmin/phpmyadmin",
        "commit_url": "https://github.com/phpmyadmin/phpmyadmin/commit/aacbb06828c49f6427917f8b7cf82e7f9ed3a671",
        "files": [
          "libraries/display_tbl.lib.php"
        ],
        "message": "Fix indentation of multi line function calls",
        "before_after_code_files": [
          "libraries/display_tbl.lib.php||libraries/display_tbl.lib.php"
        ]
      },
      "candidate_patch_features": {
        "candidate_earlier_than_patch": 0,
        "same_branch_evolution": 1,
        "olp_code_files": {
          "patch": [
            "libraries/display_tbl.lib.php||libraries/display_tbl.lib.php"
          ],
          "candidate": [
            "libraries/display_tbl.lib.php||libraries/display_tbl.lib.php"
          ]
        }
      },
      "candidate_diff": {
        "libraries/display_tbl.lib.php||libraries/display_tbl.lib.php": [
          "File: libraries/display_tbl.lib.php -> libraries/display_tbl.lib.php",
          "--- Hunk 1 ---",
          "[Context before]",
          "334:     ) {",
          "336:         $table_navigation_html .= PMA_getMoveBackwardButtonsForTableNavigation(",
          "340:     } // end move back",
          "",
          "[Removed Lines]",
          "337:                 $html_sql_query, $pos_prev",
          "338:             );",
          "",
          "[Added Lines]",
          "337:             $html_sql_query, $pos_prev",
          "338:         );",
          "",
          "---------------",
          "--- Hunk 2 ---",
          "[Context before]",
          "345:     if ($_SESSION['tmp_user_values']['max_rows'] != 'all') { //if1",
          "347:         $pageNow = @floor(",
          "352:         $nbTotalPage = @ceil(",
          "357:         if ($nbTotalPage > 1) { //if2",
          "",
          "[Removed Lines]",
          "348:                 $_SESSION['tmp_user_values']['pos']",
          "349:                 / $_SESSION['tmp_user_values']['max_rows']",
          "350:             ) + 1;",
          "353:                 $unlim_num_rows",
          "354:                 / $_SESSION['tmp_user_values']['max_rows']",
          "355:             );",
          "",
          "[Added Lines]",
          "348:             $_SESSION['tmp_user_values']['pos']",
          "349:             / $_SESSION['tmp_user_values']['max_rows']",
          "350:         ) + 1;",
          "353:             $unlim_num_rows",
          "354:             / $_SESSION['tmp_user_values']['max_rows']",
          "355:         );",
          "",
          "---------------",
          "--- Hunk 3 ---",
          "[Context before]",
          "371:                 . '\" method=\"post\">';",
          "373:             $table_navigation_html .= PMA_pageselector(",
          "378:             $table_navigation_html .= '</form>'",
          "379:                 . '</td>';",
          "",
          "[Removed Lines]",
          "374:                     $_SESSION['tmp_user_values']['max_rows'],",
          "375:                     $pageNow, $nbTotalPage, 200, 5, 5, 20, 10",
          "376:                 );",
          "",
          "[Added Lines]",
          "374:                 $_SESSION['tmp_user_values']['max_rows'],",
          "375:                 $pageNow, $nbTotalPage, 200, 5, 5, 20, 10",
          "376:             );",
          "",
          "---------------",
          "--- Hunk 4 ---",
          "[Context before]",
          "387:     ) {",
          "389:         $table_navigation_html .= PMA_getShowAllButtonForTableNavigation(",
          "393:     } // end show all",
          "",
          "[Removed Lines]",
          "390:                 $db, $table, $html_sql_query, $goto",
          "391:             );",
          "",
          "[Added Lines]",
          "390:             $db, $table, $html_sql_query, $goto",
          "391:         );",
          "",
          "---------------",
          "--- Hunk 5 ---",
          "[Context before]",
          "400:     ) {",
          "402:         $table_navigation_html .= PMA_getMoveFarwardButtonsForTableNavigation(",
          "407:     } // end move toward",
          "",
          "[Removed Lines]",
          "403:                 $html_sql_query, $pos_next, $is_innodb,",
          "404:                 $unlim_num_rows, $num_rows",
          "405:             );",
          "",
          "[Added Lines]",
          "403:             $html_sql_query, $pos_next, $is_innodb,",
          "404:             $unlim_num_rows, $num_rows",
          "405:         );",
          "",
          "---------------",
          "--- Hunk 6 ---",
          "[Context before]",
          "450:     $table_navigation_html .= PMA_generate_common_hidden_inputs($db, $table);",
          "452:     $table_navigation_html .= PMA_getAdditionalFieldsForTableNavigation(",
          "457:     $table_navigation_html .= '</form>'",
          "458:         . '</td>'",
          "",
          "[Removed Lines]",
          "453:             $html_sql_query, $goto, $pos_next,",
          "454:             $unlim_num_rows, $id_for_direction_dropdown",
          "455:         );",
          "",
          "[Added Lines]",
          "453:         $html_sql_query, $goto, $pos_next,",
          "454:         $unlim_num_rows, $id_for_direction_dropdown",
          "455:     );",
          "",
          "---------------",
          "--- Hunk 7 ---",
          "[Context before]",
          "478: function PMA_getMoveBackwardButtonsForTableNavigation($html_sql_query, $pos_prev)",
          "479: {",
          "480:     return PMA_getTableNavigationButton(",
          "487: }",
          "",
          "[Removed Lines]",
          "481:             '&lt;&lt;', _pgettext('First page', 'Begin'), 0, $html_sql_query",
          "482:         )",
          "483:         . PMA_getTableNavigationButton(",
          "484:             '&lt;', _pgettext('Previous page', 'Previous'), $pos_prev,",
          "485:             $html_sql_query",
          "486:         );",
          "",
          "[Added Lines]",
          "481:         '&lt;&lt;', _pgettext('First page', 'Begin'), 0, $html_sql_query",
          "482:     )",
          "483:     . PMA_getTableNavigationButton(",
          "484:         '&lt;', _pgettext('Previous page', 'Previous'), $pos_prev,",
          "485:         $html_sql_query",
          "486:     );",
          "",
          "---------------",
          "--- Hunk 8 ---",
          "[Context before]",
          "561:     $buttons_html .= PMA_getTableNavigationButton(",
          "569:     return $buttons_html;",
          "",
          "[Removed Lines]",
          "562:             '&gt;&gt;',",
          "563:             _pgettext('Last page', 'End'),",
          "564:             @((ceil($unlim_num_rows / $_SESSION['tmp_user_values']['max_rows'])- 1)",
          "566:             $html_sql_query, $onsubmit, $input_for_real_end, $onclick",
          "567:         );",
          "",
          "[Added Lines]",
          "562:         '&gt;&gt;',",
          "563:         _pgettext('Last page', 'End'),",
          "564:         @((ceil($unlim_num_rows / $_SESSION['tmp_user_values']['max_rows'])- 1)",
          "566:         $html_sql_query, $onsubmit, $input_for_real_end, $onclick",
          "567:     );",
          "",
          "---------------",
          "--- Hunk 9 ---",
          "[Context before]",
          "619:             );",
          "621:         $additional_fields_html .= PMA_getDropdown(",
          "626:         unset($choices);",
          "627:     }",
          "",
          "[Removed Lines]",
          "622:                 'disp_direction', $choices,",
          "623:                 $_SESSION['tmp_user_values']['disp_direction'],",
          "624:                 $id_for_direction_dropdown",
          "625:             );",
          "",
          "[Added Lines]",
          "622:             'disp_direction', $choices,",
          "623:             $_SESSION['tmp_user_values']['disp_direction'],",
          "624:             $id_for_direction_dropdown",
          "625:         );",
          "",
          "---------------",
          "--- Hunk 10 ---",
          "[Context before]",
          "721:             if ($indexes) {",
          "722:                 $table_headers_html .= PMA_getSortByKeyDropDown(",
          "726:             }",
          "727:         }",
          "728:     }",
          "",
          "[Removed Lines]",
          "723:                         $db, $table, $indexes, $sort_expression,",
          "724:                         $unsorted_sql_query",
          "725:                     );",
          "",
          "[Added Lines]",
          "723:                     $db, $table, $indexes, $sort_expression,",
          "724:                     $unsorted_sql_query",
          "725:                 );",
          "",
          "---------------",
          "--- Hunk 11 ---",
          "[Context before]",
          "752:         $full_or_partial_text_link = PMA_getFullOrPartialTextButtonOrLink(",
          "755:     }",
          "758:     $table_headers_html .= PMA_getFormForMultiRowOperations(",
          "763:     if ($directionCondition) {",
          "",
          "[Removed Lines]",
          "753:                 $db, $table, $sql_query, $goto",
          "754:             );",
          "759:             $db, $table, $is_display['del_lnk']",
          "760:         );",
          "",
          "[Added Lines]",
          "753:             $db, $table, $sql_query, $goto",
          "754:         );",
          "759:         $db, $table, $is_display['del_lnk']",
          "760:     );",
          "",
          "---------------",
          "--- Hunk 12 ---",
          "[Context before]",
          "949:             $name_to_use_in_sort = str_replace(' )', ')', $name_to_use_in_sort);",
          "951:             $is_in_sort = PMA_isInSorted(",
          "",
          "[Removed Lines]",
          "952:                     $sort_expression, $sort_expression_nodirection,",
          "953:                     $sort_tbl, $name_to_use_in_sort",
          "954:                 );",
          "",
          "[Added Lines]",
          "952:                 $sort_expression, $sort_expression_nodirection,",
          "953:                 $sort_tbl, $name_to_use_in_sort",
          "954:             );",
          "",
          "---------------",
          "--- Hunk 13 ---",
          "[Context before]",
          "972:             list($sort_order, $order_img) = PMA_getSortingUrlParams(",
          "977:             if (preg_match('@(.*)([[:space:]](LIMIT (.*)|PROCEDURE (.*)|FOR UPDATE|'",
          "979:             ) {",
          "980:                 $sorted_sql_query = $regs3[1] . $sort_order . $regs3[2];",
          "981:             } else {",
          "",
          "[Removed Lines]",
          "973:                     $is_in_sort, $sort_direction, $fields_meta[$i],",
          "974:                     $sort_order, $i",
          "975:                 );",
          "978:                     . 'LOCK IN SHARE MODE))@is', $unsorted_sql_query, $regs3)",
          "",
          "[Added Lines]",
          "973:                 $is_in_sort, $sort_direction, $fields_meta[$i],",
          "974:                 $sort_order, $i",
          "975:             );",
          "978:                 . 'LOCK IN SHARE MODE))@is', $unsorted_sql_query, $regs3)",
          "",
          "---------------",
          "--- Hunk 14 ---",
          "[Context before]",
          "995:             $order_link = PMA_getSortOrderLink(",
          "999:             if ($directionCondition) {",
          "1000:                 $table_headers_html .= PMA_getDraggableClassForSortableColumns(",
          "1004:             }",
          "1006:             $vertical_display['desc'][] = '    <th '",
          "",
          "[Removed Lines]",
          "996:                     $order_img, $i, $direction, $fields_meta[$i], $order_url",
          "997:                 );",
          "1001:                         $col_visib, $col_visib[$j], $condition_field,",
          "1002:                         $direction, $fields_meta[$i], $order_link, $comments",
          "1003:                     );",
          "",
          "[Added Lines]",
          "996:                 $order_img, $i, $direction, $fields_meta[$i], $order_url",
          "997:             );",
          "1001:                     $col_visib, $col_visib[$j], $condition_field,",
          "1002:                     $direction, $fields_meta[$i], $order_link, $comments",
          "1003:                 );",
          "",
          "---------------",
          "--- Hunk 15 ---",
          "[Context before]",
          "1016:             if ($directionCondition) {",
          "1017:                 $table_headers_html .= PMA_getDraggableClassForNonSortableColumns(",
          "1021:             }",
          "1023:             $vertical_display['desc'][] = '    <th '",
          "",
          "[Removed Lines]",
          "1018:                         $col_visib, $col_visib[$j], $condition_field,",
          "1019:                         $direction, $fields_meta[$i], $comments",
          "1020:                     );",
          "",
          "[Added Lines]",
          "1018:                     $col_visib, $col_visib[$j], $condition_field,",
          "1019:                     $direction, $fields_meta[$i], $comments",
          "1020:                 );",
          "",
          "---------------",
          "--- Hunk 16 ---",
          "[Context before]",
          "1260:     );",
          "1262:     $options_html .= PMA_getRadioFields(",
          "1268:     if ($GLOBALS['cfgRelation']['relwork']",
          "1269:         && $GLOBALS['cfgRelation']['displaywork']",
          "",
          "[Removed Lines]",
          "1263:             'display_text', $choices,",
          "1264:             $_SESSION['tmp_user_values']['display_text']",
          "1265:         )",
          "1266:         . '</div>';",
          "",
          "[Added Lines]",
          "1263:         'display_text', $choices,",
          "1264:         $_SESSION['tmp_user_values']['display_text']",
          "1265:     )",
          "1266:     . '</div>';",
          "",
          "---------------",
          "--- Hunk 17 ---",
          "[Context before]",
          "1275:         );",
          "1277:         $options_html .= PMA_getRadioFields(",
          "1282:     }",
          "1284:     $options_html .= '<div class=\"formelement\">'",
          "",
          "[Removed Lines]",
          "1278:                 'relational_display', $choices,",
          "1279:                 $_SESSION['tmp_user_values']['relational_display']",
          "1280:             )",
          "1281:             . '</div>';",
          "",
          "[Added Lines]",
          "1278:             'relational_display', $choices,",
          "1279:             $_SESSION['tmp_user_values']['relational_display']",
          "1280:         )",
          "1281:         . '</div>';",
          "",
          "---------------",
          "--- Hunk 18 ---",
          "[Context before]",
          "1318:         );",
          "1320:         $options_html .= PMA_getRadioFields(",
          "1324:             . '</div>';",
          "1325:     }",
          "",
          "[Removed Lines]",
          "1321:                 'geometry_display', $choices,",
          "1322:                 $_SESSION['tmp_user_values']['geometry_display']",
          "1323:             )",
          "",
          "[Added Lines]",
          "1321:             'geometry_display', $choices,",
          "1322:             $_SESSION['tmp_user_values']['geometry_display']",
          "1323:         )",
          "",
          "---------------",
          "--- Hunk 19 ---",
          "[Context before]",
          "1528:         if ($GLOBALS['cfg']['Order'] === 'SMART') {",
          "1529:             $sort_order .= (preg_match(",
          "1533:         } else {",
          "1534:             $sort_order .= $GLOBALS['cfg']['Order'];",
          "1535:         }",
          "",
          "[Removed Lines]",
          "1530:                     '@time|date@i',",
          "1531:                     $fields_meta->type",
          "1532:                 )) ? 'DESC' : 'ASC';",
          "",
          "[Added Lines]",
          "1530:                 '@time|date@i',",
          "1531:                 $fields_meta->type",
          "1532:             )) ? 'DESC' : 'ASC';",
          "",
          "---------------",
          "--- Hunk 20 ---",
          "[Context before]",
          "1540:         $sort_order .= ' ASC';",
          "1541:         $order_img   = ' ' . PMA_getImage(",
          "1546:         $order_img  .= ' ' . PMA_getImage(",
          "1551:     } else {",
          "1553:         $sort_order .= ' DESC';",
          "1554:         $order_img   = ' ' . PMA_getImage(",
          "1559:         $order_img  .= ' ' . PMA_getImage(",
          "1563:     }",
          "1565:     return array($sort_order, $order_img);",
          "",
          "[Removed Lines]",
          "1542:                 's_desc.png', __('Descending'),",
          "1543:                 array('class' => \"soimg$column_index\", 'title' => '')",
          "1544:             );",
          "1547:                 's_asc.png', __('Ascending'),",
          "1548:                 array('class' => \"soimg$column_index hide\", 'title' => '')",
          "1549:             );",
          "1555:                 's_asc.png', __('Ascending'),",
          "1556:                 array('class' => \"soimg$column_index\", 'title' => '')",
          "1557:             );",
          "1560:                 's_desc.png', __('Descending'),",
          "1561:                 array('class' => \"soimg$column_index hide\", 'title' => '')",
          "1562:             );",
          "",
          "[Added Lines]",
          "1542:             's_desc.png', __('Descending'),",
          "1543:             array('class' => \"soimg$column_index\", 'title' => '')",
          "1544:         );",
          "1547:             's_asc.png', __('Ascending'),",
          "1548:             array('class' => \"soimg$column_index hide\", 'title' => '')",
          "1549:         );",
          "1555:             's_asc.png', __('Ascending'),",
          "1556:             array('class' => \"soimg$column_index\", 'title' => '')",
          "1557:         );",
          "1560:             's_desc.png', __('Descending'),",
          "1561:             array('class' => \"soimg$column_index hide\", 'title' => '')",
          "1562:         );",
          "",
          "---------------",
          "--- Hunk 21 ---",
          "[Context before]",
          "1619:         : htmlspecialchars($fields_meta->name);",
          "1621:     return PMA_linkOrButton(",
          "1626: }",
          "",
          "[Removed Lines]",
          "1622:             $order_url, $order_link_content . $order_img,",
          "1623:             $order_link_params, false, true",
          "1624:         );",
          "",
          "[Added Lines]",
          "1622:         $order_url, $order_link_content . $order_img,",
          "1623:         $order_link_params, false, true",
          "1624:     );",
          "",
          "---------------",
          "--- Hunk 22 ---",
          "[Context before]",
          "1734:     ) {",
          "1736:         $draggable_html .= PMA_flipstring(",
          "1740:     } else {",
          "1741:         $draggable_html .= htmlspecialchars($fields_meta->name);",
          "",
          "[Removed Lines]",
          "1737:                 htmlspecialchars($fields_meta->name), '<br />'",
          "1738:             );",
          "",
          "[Added Lines]",
          "1737:             htmlspecialchars($fields_meta->name), '<br />'",
          "1738:         );",
          "",
          "---------------",
          "--- Hunk 23 ---",
          "[Context before]",
          "1931:         $table_body_html .= PMA_getVerticalDisplaySupportSegments(",
          "1935:         $alternating_color_class = ($odd_row ? 'odd' : 'even');",
          "1936:         $odd_row = ! $odd_row;",
          "",
          "[Removed Lines]",
          "1932:                 $vertical_display, $row_no, $directionCondition",
          "1933:             );",
          "",
          "[Added Lines]",
          "1932:             $vertical_display, $row_no, $directionCondition",
          "1933:         );",
          "",
          "---------------",
          "--- Hunk 24 ---",
          "[Context before]",
          "1993:             ) {",
          "1995:                 $table_body_html .= PMA_getPlacedLinks(",
          "2002:             } elseif (($GLOBALS['cfg']['RowActionLinks'] == 'none')",
          "2003:                 && $directionCondition",
          "2004:             ) {",
          "2006:                 $table_body_html .= PMA_getPlacedLinks(",
          "2013:             } // end if (1.3)",
          "2014:         } // end if (1)",
          "",
          "[Removed Lines]",
          "1996:                         'left', $del_url, $is_display, $row_no, $where_clause,",
          "1997:                         $where_clause_html, $condition_array, $del_query, 'l',",
          "1998:                         $edit_url, $copy_url, $edit_anchor_class, $edit_str,",
          "1999:                         $copy_str, $del_str, $js_conf",
          "2000:                     );",
          "2007:                         'none', $del_url, $is_display, $row_no, $where_clause,",
          "2008:                         $where_clause_html, $condition_array, $del_query, 'l',",
          "2009:                         $edit_url, $copy_url, $edit_anchor_class, $edit_str,",
          "2010:                         $copy_str, $del_str, $js_conf",
          "2011:                     );",
          "",
          "[Added Lines]",
          "1996:                     'left', $del_url, $is_display, $row_no, $where_clause,",
          "1997:                     $where_clause_html, $condition_array, $del_query, 'l',",
          "1998:                     $edit_url, $copy_url, $edit_anchor_class, $edit_str,",
          "1999:                     $copy_str, $del_str, $js_conf",
          "2000:                 );",
          "2007:                     'none', $del_url, $is_display, $row_no, $where_clause,",
          "2008:                     $where_clause_html, $condition_array, $del_query, 'l',",
          "2009:                     $edit_url, $copy_url, $edit_anchor_class, $edit_str,",
          "2010:                     $copy_str, $del_str, $js_conf",
          "2011:                 );",
          "",
          "---------------",
          "--- Hunk 25 ---",
          "[Context before]",
          "2039:             $class = PMA_getResettedClassForInlineEdit(",
          "",
          "[Removed Lines]",
          "2040:                     $grid_edit_class, $not_null_class, $relation_class,",
          "2041:                     $hide_class, $field_type_class, $row_no",
          "2042:                 );",
          "",
          "[Added Lines]",
          "2040:                 $grid_edit_class, $not_null_class, $relation_class,",
          "2041:                 $hide_class, $field_type_class, $row_no",
          "2042:             );",
          "",
          "---------------",
          "--- Hunk 26 ---",
          "[Context before]",
          "2064:                 ) {",
          "2066:                     $include_file = PMA_securePath(",
          "2070:                     if (file_exists('./libraries/transformations/' . $include_file)) {",
          "2072:                         $transformfunction_name = str_replace(",
          "2077:                         include_once './libraries/transformations/' . $include_file;",
          "",
          "[Removed Lines]",
          "2067:                             $GLOBALS['mime_map'][$meta->name]['transformation']",
          "2068:                         );",
          "2073:                                 '.inc.php', '',",
          "2074:                                 $GLOBALS['mime_map'][$meta->name]['transformation']",
          "2075:                             );",
          "",
          "[Added Lines]",
          "2067:                         $GLOBALS['mime_map'][$meta->name]['transformation']",
          "2068:                     );",
          "2073:                             '.inc.php', '',",
          "2074:                             $GLOBALS['mime_map'][$meta->name]['transformation']",
          "2075:                         );",
          "",
          "---------------",
          "--- Hunk 27 ---",
          "[Context before]",
          "2082:                                 . $transformfunction_name;",
          "2084:                             $transform_options  = PMA_transformation_getOptions(",
          "2090:                             $meta->mimetype = str_replace(",
          "2094:                         }",
          "2095:                     } // end if file_exists",
          "2096:                 } // end if transformation is set",
          "",
          "[Removed Lines]",
          "2085:                                     isset($GLOBALS['mime_map'][$meta->name]['transformation_options'])",
          "2086:                                     ? $GLOBALS['mime_map'][$meta->name]['transformation_options']",
          "2087:                                     : ''",
          "2088:                                 );",
          "2091:                                     '_', '/',",
          "2092:                                     $GLOBALS['mime_map'][$meta->name]['mimetype']",
          "2093:                                 );",
          "",
          "[Added Lines]",
          "2085:                                 isset($GLOBALS['mime_map'][$meta->name]['transformation_options'])",
          "2086:                                 ? $GLOBALS['mime_map'][$meta->name]['transformation_options']",
          "2087:                                 : ''",
          "2088:                             );",
          "2091:                                 '_', '/',",
          "2092:                                 $GLOBALS['mime_map'][$meta->name]['mimetype']",
          "2093:                             );",
          "",
          "---------------",
          "--- Hunk 28 ---",
          "[Context before]",
          "2186:         ) {",
          "2188:             $table_body_html .= PMA_getPlacedLinks(",
          "2195:         } // end if (3)",
          "",
          "[Removed Lines]",
          "2189:                     'right', $del_url, $is_display, $row_no, $where_clause,",
          "2190:                     $where_clause_html, $condition_array, $del_query, 'r',",
          "2191:                     $edit_url, $copy_url, $edit_anchor_class, $edit_str,",
          "2192:                     $copy_str, $del_str, $js_conf",
          "2193:                 );",
          "",
          "[Added Lines]",
          "2189:                 'right', $del_url, $is_display, $row_no, $where_clause,",
          "2190:                 $where_clause_html, $condition_array, $del_query, 'r',",
          "2191:                 $edit_url, $copy_url, $edit_anchor_class, $edit_str,",
          "2192:                 $copy_str, $del_str, $js_conf",
          "2193:             );",
          "",
          "---------------",
          "--- Hunk 29 ---",
          "[Context before]",
          "2219:         if (!empty($del_url) && ($is_display['del_lnk'] != 'kp')) {",
          "2221:             $vertical_display['row_delete'][$row_no] .= PMA_getCheckboxForMultiRowSubmissions(",
          "2227:         } else {",
          "2228:             unset($vertical_display['row_delete'][$row_no]);",
          "",
          "[Removed Lines]",
          "2222:                     $del_url, $is_display, $row_no, $where_clause_html,",
          "2223:                     $condition_array, $del_query, '[%_PMA_CHECKBOX_DIR_%]',",
          "2224:                     $alternating_color_class . $vertical_class",
          "2225:                 );",
          "",
          "[Added Lines]",
          "2222:                 $del_url, $is_display, $row_no, $where_clause_html,",
          "2223:                 $condition_array, $del_query, '[%_PMA_CHECKBOX_DIR_%]',",
          "2224:                 $alternating_color_class . $vertical_class",
          "2225:             );",
          "",
          "---------------",
          "--- Hunk 30 ---",
          "[Context before]",
          "2231:         if (isset($edit_url)) {",
          "2233:             $vertical_display['edit'][$row_no] .= PMA_getEditLink(",
          "2241:         } else {",
          "2242:             unset($vertical_display['edit'][$row_no]);",
          "",
          "[Removed Lines]",
          "2234:                     $edit_url,",
          "2235:                     $alternating_color_class . ' ' . $edit_anchor_class",
          "2236:                     . $vertical_class, $edit_str,",
          "2237:                     $where_clause,",
          "2238:                     $where_clause_html",
          "2239:                 );",
          "",
          "[Added Lines]",
          "2234:                 $edit_url,",
          "2235:                 $alternating_color_class . ' ' . $edit_anchor_class",
          "2236:                 . $vertical_class, $edit_str,",
          "2237:                 $where_clause,",
          "2238:                 $where_clause_html",
          "2239:             );",
          "",
          "---------------",
          "--- Hunk 31 ---",
          "[Context before]",
          "2245:         if (isset($copy_url)) {",
          "2247:             $vertical_display['copy'][$row_no] .= PMA_getCopyLink(",
          "2252:         } else {",
          "2253:             unset($vertical_display['copy'][$row_no]);",
          "",
          "[Removed Lines]",
          "2248:                     $copy_url, $copy_str, $where_clause, $where_clause_html,",
          "2249:                     $alternating_color_class . $vertical_class",
          "2250:                 );",
          "",
          "[Added Lines]",
          "2248:                 $copy_url, $copy_str, $where_clause, $where_clause_html,",
          "2249:                 $alternating_color_class . $vertical_class",
          "2250:             );",
          "",
          "---------------",
          "--- Hunk 32 ---",
          "[Context before]",
          "2260:             }",
          "2262:             $vertical_display['delete'][$row_no] .= PMA_getDeleteLink(",
          "2267:         } else {",
          "2268:             unset($vertical_display['delete'][$row_no]);",
          "",
          "[Removed Lines]",
          "2263:                     $del_url, $del_str, $js_conf,",
          "2264:                     $alternating_color_class . $vertical_class",
          "2265:                 );",
          "",
          "[Added Lines]",
          "2263:                 $del_url, $del_str, $js_conf,",
          "2264:                 $alternating_color_class . $vertical_class",
          "2265:             );",
          "",
          "---------------",
          "--- Hunk 33 ---",
          "[Context before]",
          "2559:     }",
          "2561:     return PMA_getCheckboxAndLinks(",
          "2568: }",
          "",
          "[Removed Lines]",
          "2562:             $dir, $del_url, $is_display,",
          "2563:             $row_no, $where_clause, $where_clause_html, $condition_array,",
          "2564:             $del_query, 'l', $edit_url, $copy_url, $edit_anchor_class,",
          "2565:             $edit_str, $copy_str, $del_str, $js_conf",
          "2566:         );",
          "",
          "[Added Lines]",
          "2562:         $dir, $del_url, $is_display,",
          "2563:         $row_no, $where_clause, $where_clause_html, $condition_array,",
          "2564:         $del_query, 'l', $edit_url, $copy_url, $edit_anchor_class,",
          "2565:         $edit_str, $copy_str, $del_str, $js_conf",
          "2566:     );",
          "",
          "---------------",
          "--- Hunk 34 ---",
          "[Context before]",
          "2657:     if (! isset($column) || is_null($column)) {",
          "2659:         $cell = PMA_buildNullDisplay(",
          "2663:     } elseif ($column != '') {",
          "2665:         $nowrap = ' nowrap';",
          "2666:         $where_comparison = ' = ' . $column;",
          "2676:     } else {",
          "2678:         $cell = PMA_buildEmptyDisplay(",
          "2681:     }",
          "2683:     return $cell;",
          "",
          "[Removed Lines]",
          "2660:                 'right '.$class, $condition_field, $meta, ''",
          "2661:             );",
          "2668:         $cell = '<td '",
          "2669:             . PMA_getRowData(",
          "2670:                 'right '.$class, $condition_field,",
          "2671:                 $analyzed_sql, $meta, $map, $column,",
          "2672:                 $transform_function, $default_function, $nowrap,",
          "2673:                 $where_comparison, $transform_options,",
          "2674:                 $is_field_truncated",
          "2675:             );",
          "2679:                 'right '.$class, $condition_field, $meta, ''",
          "2680:             );",
          "",
          "[Added Lines]",
          "2660:             'right '.$class, $condition_field, $meta, ''",
          "2661:         );",
          "2668:         $cell = '<td ' . PMA_getRowData(",
          "2669:             'right '.$class, $condition_field,",
          "2670:             $analyzed_sql, $meta, $map, $column,",
          "2671:             $transform_function, $default_function, $nowrap,",
          "2672:             $where_comparison, $transform_options,",
          "2673:             $is_field_truncated",
          "2674:         );",
          "2678:             'right '.$class, $condition_field, $meta, ''",
          "2679:         );",
          "",
          "---------------",
          "--- Hunk 35 ---",
          "[Context before]",
          "2720:         } else {",
          "2722:             $blobtext = PMA_handleNonPrintableContents(",
          "2728:             $cell = PMA_buildValueDisplay(",
          "2731:             unset($blobtext);",
          "2732:         }",
          "2734:     } else {",
          "2736:         if (! isset($column) || is_null($column)) {",
          "",
          "[Removed Lines]",
          "2723:                     'BLOB', (isset($column) ? $column : ''),",
          "2724:                     $transform_function, $transform_options,",
          "2725:                     $default_function, $meta, $_url_params",
          "2726:                 );",
          "2729:                     $class, $condition_field, $blobtext",
          "2730:                 );",
          "",
          "[Added Lines]",
          "2722:                 'BLOB', (isset($column) ? $column : ''),",
          "2723:                 $transform_function, $transform_options,",
          "2724:                 $default_function, $meta, $_url_params",
          "2725:             );",
          "2728:                 $class, $condition_field, $blobtext",
          "2729:             );",
          "",
          "---------------",
          "--- Hunk 36 ---",
          "[Context before]",
          "2806:         if ($_SESSION['tmp_user_values']['geometry_display'] == 'GEOM') {",
          "2808:             $geometry_text = PMA_handleNonPrintableContents(",
          "2814:             $cell = PMA_buildValueDisplay(",
          "2819:         } elseif ($_SESSION['tmp_user_values']['geometry_display'] == 'WKT') {",
          "2821:             $where_comparison = ' = ' . $column;",
          "",
          "[Removed Lines]",
          "2809:                     'GEOMETRY', (isset($column) ? $column : ''),",
          "2810:                     $transform_function, $transform_options,",
          "2811:                     $default_function, $meta",
          "2812:                 );",
          "2815:                     $class, $condition_field, $geometry_text",
          "2816:                 );",
          "",
          "[Added Lines]",
          "2808:                 'GEOMETRY', (isset($column) ? $column : ''),",
          "2809:                 $transform_function, $transform_options,",
          "2810:                 $default_function, $meta",
          "2811:             );",
          "2814:                 $class, $condition_field, $geometry_text",
          "2815:             );",
          "",
          "---------------",
          "--- Hunk 37 ---",
          "[Context before]",
          "2831:                 $is_field_truncated = true;",
          "2832:             }",
          "2843:         } else {",
          "2845:             if ($_SESSION['tmp_user_values']['display_binary']) {",
          "",
          "[Removed Lines]",
          "2834:             $cell = '<td '",
          "2835:                 . PMA_getRowData(",
          "2836:                     $class, $condition_field, $analyzed_sql, $meta, $map,",
          "2837:                     $wktval, $transform_function, $default_function, '',",
          "2838:                     $where_comparison, $transform_options,",
          "2839:                     $is_field_truncated",
          "2840:                 );",
          "",
          "[Added Lines]",
          "2833:             $cell = '<td ' . PMA_getRowData(",
          "2834:                 $class, $condition_field, $analyzed_sql, $meta, $map,",
          "2835:                 $wktval, $transform_function, $default_function, '',",
          "2836:                 $where_comparison, $transform_options,",
          "2837:                 $is_field_truncated",
          "2838:             );",
          "",
          "---------------",
          "--- Hunk 38 ---",
          "[Context before]",
          "2852:                     $wkbval = PMA_substr(bin2hex($column), 8);",
          "2853:                 } else {",
          "2854:                     $wkbval = htmlspecialchars(",
          "2857:                 }",
          "2859:                 if ((PMA_strlen($wkbval) > $GLOBALS['cfg']['LimitChars'])",
          "",
          "[Removed Lines]",
          "2855:                             PMA_replaceBinaryContents($column)",
          "2856:                         );",
          "",
          "[Added Lines]",
          "2853:                         PMA_replaceBinaryContents($column)",
          "2854:                     );",
          "",
          "---------------",
          "--- Hunk 39 ---",
          "[Context before]",
          "2864:                     $is_field_truncated = true;",
          "2865:                 }",
          "2876:             } else {",
          "2877:                 $wkbval = PMA_handleNonPrintableContents(",
          "2883:                 $cell = PMA_buildValueDisplay($class, $condition_field, $wkbval);",
          "2884:             }",
          "",
          "[Removed Lines]",
          "2867:                 $cell = '<td '",
          "2868:                     . PMA_getRowData(",
          "2869:                         $class, $condition_field,",
          "2870:                         $analyzed_sql, $meta, $map, $wkbval,",
          "2871:                         $transform_function, $default_function, '',",
          "2872:                         $where_comparison, $transform_options,",
          "2873:                         $is_field_truncated",
          "2874:                     );",
          "2878:                         'BINARY', $column, $transform_function,",
          "2879:                         $transform_options, $default_function, $meta,",
          "2880:                         $_url_params",
          "2881:                     );",
          "",
          "[Added Lines]",
          "2865:                 $cell = '<td ' . PMA_getRowData(",
          "2866:                     $class, $condition_field,",
          "2867:                     $analyzed_sql, $meta, $map, $wkbval,",
          "2868:                     $transform_function, $default_function, '',",
          "2869:                     $where_comparison, $transform_options,",
          "2870:                     $is_field_truncated",
          "2871:                 );",
          "2875:                     'BINARY', $column, $transform_function,",
          "2876:                     $transform_options, $default_function, $meta,",
          "2877:                     $_url_params",
          "2878:                 );",
          "",
          "---------------",
          "--- Hunk 40 ---",
          "[Context before]",
          "2944:         if (isset($meta->_type) && $meta->_type === MYSQLI_TYPE_BIT) {",
          "2946:             $column = PMA_printableBitValue(",
          "",
          "[Removed Lines]",
          "2947:                     $column, $meta->length",
          "2948:                 );",
          "",
          "[Added Lines]",
          "2944:                 $column, $meta->length",
          "2945:             );",
          "",
          "---------------",
          "--- Hunk 41 ---",
          "[Context before]",
          "2965:                     $column = bin2hex($column);",
          "2966:                 } else {",
          "2967:                     $column = htmlspecialchars(",
          "2970:                 }",
          "2972:             } else {",
          "2975:                 $column = PMA_handleNonPrintableContents(",
          "2980:                 $formatted = true;",
          "2981:             }",
          "2982:         }",
          "",
          "[Removed Lines]",
          "2968:                             PMA_replaceBinaryContents($column)",
          "2969:                         );",
          "2976:                         'BINARY', $column, $transform_function,",
          "2977:                         $transform_options, $default_function,",
          "2978:                         $meta, $_url_params",
          "2979:                     );",
          "",
          "[Added Lines]",
          "2965:                         PMA_replaceBinaryContents($column)",
          "2966:                     );",
          "2973:                     'BINARY', $column, $transform_function,",
          "2974:                     $transform_options, $default_function,",
          "2975:                     $meta, $_url_params",
          "2976:                 );",
          "",
          "---------------",
          "--- Hunk 42 ---",
          "[Context before]",
          "2984:         if ($formatted) {",
          "2986:             $cell = PMA_buildValueDisplay(",
          "2990:         } else {",
          "",
          "[Removed Lines]",
          "2987:                     $class, $condition_field, $column",
          "2988:                 );",
          "",
          "[Added Lines]",
          "2984:                 $class, $condition_field, $column",
          "2985:             );",
          "",
          "---------------",
          "--- Hunk 43 ---",
          "[Context before]",
          "3070:         || !empty($vertical_display['textbtn']))",
          "3071:     ) {",
          "3072:         $vertical_table_html .= PMA_getOperationLinksForVerticleTable(",
          "3075:     } // end if",
          "",
          "[Removed Lines]",
          "3073:                 $vertical_display ,'edit'",
          "3074:             );",
          "",
          "[Added Lines]",
          "3070:             $vertical_display ,'edit'",
          "3071:         );",
          "",
          "---------------",
          "--- Hunk 44 ---",
          "[Context before]",
          "3082:         || !empty($vertical_display['textbtn']))",
          "3083:     ) {",
          "3084:         $vertical_table_html .= PMA_getOperationLinksForVerticleTable(",
          "3087:     } // end if",
          "",
          "[Removed Lines]",
          "3085:                 $vertical_display ,'copy'",
          "3086:             );",
          "",
          "[Added Lines]",
          "3082:             $vertical_display ,'copy'",
          "3083:         );",
          "",
          "---------------",
          "--- Hunk 45 ---",
          "[Context before]",
          "3094:         || !empty($vertical_display['textbtn']))",
          "3095:     ) {",
          "3096:         $vertical_table_html .= PMA_getOperationLinksForVerticleTable(",
          "3099:     } // end if",
          "3101:     list($col_order, $col_visib) = PMA_getColumnParams();",
          "",
          "[Removed Lines]",
          "3097:                 $vertical_display, 'delete'",
          "3098:             );",
          "",
          "[Added Lines]",
          "3094:             $vertical_display, 'delete'",
          "3095:         );",
          "",
          "---------------",
          "--- Hunk 46 ---",
          "[Context before]",
          "3151:         || !empty($vertical_display['textbtn']))",
          "3152:     ) {",
          "3153:         $vertical_table_html .= PMA_getOperationLinksForVerticleTable(",
          "3156:     } // end if",
          "",
          "[Removed Lines]",
          "3154:                 $vertical_display, 'edit'",
          "3155:             );",
          "",
          "[Added Lines]",
          "3151:             $vertical_display, 'edit'",
          "3152:         );",
          "",
          "---------------",
          "--- Hunk 47 ---",
          "[Context before]",
          "3163:         || !empty($vertical_display['textbtn']))",
          "3164:     ) {",
          "3165:         $vertical_table_html .= PMA_getOperationLinksForVerticleTable(",
          "3168:     } // end if",
          "",
          "[Removed Lines]",
          "3166:                 $vertical_display, 'copy'",
          "3167:             );",
          "",
          "[Added Lines]",
          "3163:             $vertical_display, 'copy'",
          "3164:         );",
          "",
          "---------------",
          "--- Hunk 48 ---",
          "[Context before]",
          "3175:         || !empty($vertical_display['textbtn']))",
          "3176:     ) {",
          "3177:         $vertical_table_html .= PMA_getOperationLinksForVerticleTable(",
          "3180:     }",
          "3182:     return $vertical_table_html;",
          "",
          "[Removed Lines]",
          "3178:                 $vertical_display, 'delete'",
          "3179:             );",
          "",
          "[Added Lines]",
          "3175:             $vertical_display, 'delete'",
          "3176:         );",
          "",
          "---------------",
          "--- Hunk 49 ---",
          "[Context before]",
          "3282:     $_SESSION['tmp_user_values']['query'][$sql_md5]['sql'] = $GLOBALS['sql_query'];",
          "3284:     $valid_disp_dir = PMA_isValid(",
          "3289:     if ($valid_disp_dir) {",
          "3290:         $_SESSION['tmp_user_values']['query'][$sql_md5]['disp_direction']",
          "",
          "[Removed Lines]",
          "3285:             $_REQUEST['disp_direction'],",
          "3286:             array('horizontal', 'vertical', 'horizontalflipped')",
          "3287:         );",
          "",
          "[Added Lines]",
          "3282:         $_REQUEST['disp_direction'],",
          "3283:         array('horizontal', 'vertical', 'horizontalflipped')",
          "3284:     );",
          "",
          "---------------",
          "--- Hunk 50 ---",
          "[Context before]",
          "3515:         $pre_count = '~';",
          "3516:         $after_count = PMA_showHint(",
          "3521:     } else {",
          "3522:         $pre_count = '';",
          "3523:         $after_count = '';",
          "",
          "[Removed Lines]",
          "3517:                 PMA_sanitize(",
          "3518:                     __('May be approximate. See [a@./Documentation.html#faq3_11@Documentation]FAQ 3.11[/a]')",
          "3519:                 )",
          "3520:             );",
          "",
          "[Added Lines]",
          "3514:             PMA_sanitize(",
          "3515:                 __('May be approximate. See [a@./Documentation.html#faq3_11@Documentation]FAQ 3.11[/a]')",
          "3516:             )",
          "3517:         );",
          "",
          "---------------",
          "--- Hunk 51 ---",
          "[Context before]",
          "3547:     $sorted_column_message = PMA_getSortedColumnMessage(",
          "",
          "[Removed Lines]",
          "3548:             $dt_result, $fields_meta, $num_rows,",
          "3549:             $sort_expression_nodirection, $table",
          "3550:         );",
          "",
          "[Added Lines]",
          "3545:         $dt_result, $fields_meta, $num_rows,",
          "3546:         $sort_expression_nodirection, $table",
          "3547:     );",
          "",
          "---------------",
          "--- Hunk 52 ---",
          "[Context before]",
          "3556:     if (($is_display['nav_bar'] == '1') && isset($pos_next)) {",
          "3558:         $message = PMA_setMessageInformation(",
          "3564:         $table_html .= PMA_getMessage($message, $sql_query, 'success');",
          "3566:     } elseif (! isset($GLOBALS['printview']) || ($GLOBALS['printview'] != '1')) {",
          "3568:         $table_html .= PMA_getMessage(",
          "3572:     }",
          "",
          "[Removed Lines]",
          "3559:                 $db, $table, $sorted_column_message,",
          "3560:                 $analyzed_sql[0]['limit_clause'], $unlim_num_rows,",
          "3561:                 $total, $pos_next, $pre_count, $after_count",
          "3562:             );",
          "3569:                 __('Your SQL query has been executed successfully'),",
          "3570:                 $sql_query, 'success'",
          "3571:             );",
          "",
          "[Added Lines]",
          "3556:             $db, $table, $sorted_column_message,",
          "3557:             $analyzed_sql[0]['limit_clause'], $unlim_num_rows,",
          "3558:             $total, $pos_next, $pre_count, $after_count",
          "3559:         );",
          "3566:             __('Your SQL query has been executed successfully'),",
          "3567:             $sql_query, 'success'",
          "3568:         );",
          "",
          "---------------",
          "--- Hunk 53 ---",
          "[Context before]",
          "3590:     if (($is_display['nav_bar'] == '1') && empty($analyzed_sql[0]['limit_clause'])) {",
          "3592:         $table_html .= PMA_getTableNavigation(",
          "3597:     } elseif (! isset($GLOBALS['printview']) || ($GLOBALS['printview'] != '1')) {",
          "3598:         $table_html .= \"\\n\" . '<br /><br />' . \"\\n\";",
          "",
          "[Removed Lines]",
          "3593:                 $pos_next, $pos_prev, $sql_query, 'top_direction_dropdown'",
          "3594:             )",
          "3595:             . \"\\n\";",
          "",
          "[Added Lines]",
          "3590:             $pos_next, $pos_prev, $sql_query, 'top_direction_dropdown'",
          "3591:         )",
          "3592:         . \"\\n\";",
          "",
          "---------------",
          "--- Hunk 54 ---",
          "[Context before]",
          "3636:             foreach ($exist_rel as $master_field => $rel) {",
          "3638:                 $display_field = PMA_getDisplayField(",
          "3642:                 $map[$master_field] = array(",
          "3643:                         $rel['foreign_table'],",
          "",
          "[Removed Lines]",
          "3639:                         $rel['foreign_db'], $rel['foreign_table']",
          "3640:                     );",
          "",
          "[Added Lines]",
          "3636:                     $rel['foreign_db'], $rel['foreign_table']",
          "3637:                 );",
          "",
          "---------------",
          "--- Hunk 55 ---",
          "[Context before]",
          "3654:     $table_html .= PMA_getTableHeaders(",
          "3660:     $url_query = '';",
          "3661:     $table_html .= PMA_getTableBody(",
          "3666:     if ($_SESSION['tmp_user_values']['disp_direction'] == 'vertical') {",
          "",
          "[Removed Lines]",
          "3655:             $is_display, $fields_meta, $fields_cnt, $analyzed_sql,",
          "3656:             $sort_expression, $sort_expression_nodirection, $sort_direction",
          "3657:         )",
          "3658:         . '<tbody>' . \"\\n\";",
          "3662:             $dt_result, $is_display, $map, $analyzed_sql",
          "3663:         );",
          "",
          "[Added Lines]",
          "3652:         $is_display, $fields_meta, $fields_cnt, $analyzed_sql,",
          "3653:         $sort_expression, $sort_expression_nodirection, $sort_direction",
          "3654:     )",
          "3655:     . '<tbody>' . \"\\n\";",
          "3659:         $dt_result, $is_display, $map, $analyzed_sql",
          "3660:     );",
          "",
          "---------------",
          "--- Hunk 56 ---",
          "[Context before]",
          "3676:     if ($is_display['del_lnk'] == 'dr' && $is_display['del_lnk'] != 'kp') {",
          "3678:         $table_html .= PMA_getMultiRowOperationLinks(",
          "3683:     }",
          "",
          "[Removed Lines]",
          "3679:                 $dt_result, $fields_cnt, $fields_meta, $num_rows, $analyzed_sql,",
          "3680:                 $db, $table, $sql_query, $goto, $is_display['del_lnk']",
          "3681:             );",
          "",
          "[Added Lines]",
          "3676:             $dt_result, $fields_cnt, $fields_meta, $num_rows, $analyzed_sql,",
          "3677:             $db, $table, $sql_query, $goto, $is_display['del_lnk']",
          "3678:         );",
          "",
          "---------------",
          "--- Hunk 57 ---",
          "[Context before]",
          "3689:         $table_html .= '<br />' . \"\\n\";",
          "3690:         $table_html .= PMA_getTableNavigation(",
          "3694:     } elseif (! isset($GLOBALS['printview']) || $GLOBALS['printview'] != '1') {",
          "3695:         $table_html .= \"\\n\" . '<br /><br />' . \"\\n\";",
          "",
          "[Removed Lines]",
          "3691:                 $pos_next, $pos_prev, $sql_query, 'bottom_direction_dropdown'",
          "3692:             );",
          "",
          "[Added Lines]",
          "3688:             $pos_next, $pos_prev, $sql_query, 'bottom_direction_dropdown'",
          "3689:         );",
          "",
          "---------------",
          "--- Hunk 58 ---",
          "[Context before]",
          "3752:     if (! empty($order_by_clause)) {",
          "3754:         $sort_expression = trim(",
          "",
          "[Removed Lines]",
          "3755:                 str_replace('  ', ' ', $order_by_clause)",
          "3756:             );",
          "",
          "[Added Lines]",
          "3752:             str_replace('  ', ' ', $order_by_clause)",
          "3753:         );",
          "",
          "---------------",
          "--- Hunk 59 ---",
          "[Context before]",
          "3835:             if (stristr($meta->type, 'BLOB') || ($meta->type == 'geometry')) {",
          "3837:                 $column_for_first_row = PMA_handleNonPrintableContents(",
          "3842:             } else {",
          "3843:                 $column_for_first_row = $row[$sorted_column_index];",
          "3844:             }",
          "3846:             $column_for_first_row = strtoupper(",
          "3851:             PMA_DBI_data_seek($dt_result, $num_rows - 1);",
          "",
          "[Removed Lines]",
          "3838:                         $meta->type, $row[$sorted_column_index], $transform_function,",
          "3839:                         $transform_options, $default_function, $meta, null",
          "3840:                     );",
          "3847:                     substr($column_for_first_row, 0, $GLOBALS['cfg']['LimitChars'])",
          "3848:                 );",
          "",
          "[Added Lines]",
          "3835:                     $meta->type, $row[$sorted_column_index], $transform_function,",
          "3836:                     $transform_options, $default_function, $meta, null",
          "3837:                 );",
          "3844:                 substr($column_for_first_row, 0, $GLOBALS['cfg']['LimitChars'])",
          "3845:             );",
          "",
          "---------------",
          "--- Hunk 60 ---",
          "[Context before]",
          "3856:             if (stristr($meta->type, 'BLOB') || ($meta->type == 'geometry')) {",
          "3858:                 $column_for_last_row = PMA_handleNonPrintableContents(",
          "3863:             } else {",
          "3864:                 $column_for_last_row = $row[$sorted_column_index];",
          "3865:             }",
          "3867:             $column_for_last_row = strtoupper(",
          "3872:             PMA_DBI_data_seek($dt_result, 0);",
          "",
          "[Removed Lines]",
          "3859:                         $meta->type, $row[$sorted_column_index], $transform_function,",
          "3860:                         $transform_options, $default_function, $meta, null",
          "3861:                     );",
          "3868:                     substr($column_for_last_row, 0, $GLOBALS['cfg']['LimitChars'])",
          "3869:                 );",
          "",
          "[Added Lines]",
          "3856:                     $meta->type, $row[$sorted_column_index], $transform_function,",
          "3857:                     $transform_options, $default_function, $meta, null",
          "3858:                 );",
          "3865:                 substr($column_for_last_row, 0, $GLOBALS['cfg']['LimitChars'])",
          "3866:             );",
          "",
          "---------------",
          "--- Hunk 61 ---",
          "[Context before]",
          "3945:     ) {",
          "3947:         $message = PMA_Message::notice(",
          "3951:         $message->addParam('[a@./Documentation.html#cfg_MaxExactCount@_blank]');",
          "3952:         $message->addParam('[/a]');",
          "",
          "[Removed Lines]",
          "3948:                 __('This view has at least this number of rows. Please refer to %sdocumentation%s.')",
          "3949:             );",
          "",
          "[Added Lines]",
          "3945:             __('This view has at least this number of rows. Please refer to %sdocumentation%s.')",
          "3946:         );",
          "",
          "---------------",
          "--- Hunk 62 ---",
          "[Context before]",
          "4051:     }",
          "4053:     $checkall_link = PMA_linkOrButton(",
          "4057:     $uncheckall_link = PMA_linkOrButton(",
          "4061:     if ($_SESSION['tmp_user_values']['disp_direction'] != 'vertical') {",
          "",
          "[Removed Lines]",
          "4054:             $checkall_url, __('Check All'), $checkall_params, false",
          "4055:         );",
          "4058:             $uncheckall_url, __('Uncheck All'), $uncheckall_params, false",
          "4059:         );",
          "",
          "[Added Lines]",
          "4051:         $checkall_url, __('Check All'), $checkall_params, false",
          "4052:     );",
          "4055:         $uncheckall_url, __('Uncheck All'), $uncheckall_params, false",
          "4056:     );",
          "",
          "---------------",
          "--- Hunk 63 ---",
          "[Context before]",
          "4072:         . '<i>' . __('With selected:') . '</i>' . \"\\n\";",
          "4074:     $links_html .= PMA_getButtonOrImage(",
          "4079:     $links_html .= PMA_getButtonOrImage(",
          "4084:     if (isset($analyzed_sql[0]) && $analyzed_sql[0]['querytype'] == 'SELECT') {",
          "4085:         $links_html .= PMA_getButtonOrImage(",
          "4089:     }",
          "4091:     $links_html .= \"\\n\";",
          "",
          "[Removed Lines]",
          "4075:             'submit_mult', 'mult_submit', 'submit_mult_change',",
          "4076:             __('Change'), 'b_edit.png', 'edit'",
          "4077:         );",
          "4080:             'submit_mult', 'mult_submit', 'submit_mult_delete',",
          "4081:             $delete_text, 'b_drop.png', 'delete'",
          "4082:         );",
          "4086:                 'submit_mult', 'mult_submit', 'submit_mult_export',",
          "4087:                 __('Export'), 'b_tblexport.png', 'export'",
          "4088:             );",
          "",
          "[Added Lines]",
          "4072:         'submit_mult', 'mult_submit', 'submit_mult_change',",
          "4073:         __('Change'), 'b_edit.png', 'edit'",
          "4074:     );",
          "4077:         'submit_mult', 'mult_submit', 'submit_mult_delete',",
          "4078:         $delete_text, 'b_drop.png', 'delete'",
          "4079:     );",
          "4083:             'submit_mult', 'mult_submit', 'submit_mult_export',",
          "4084:             __('Export'), 'b_tblexport.png', 'export'",
          "4085:         );",
          "",
          "---------------",
          "--- Hunk 64 ---",
          "[Context before]",
          "4187:             $url_query = PMA_generate_common_url($_url_params);",
          "4189:             $results_operations_html .= PMA_linkOrButton(",
          "4196:             if ($_SESSION['tmp_user_values']['display_text']) {",
          "4198:                 $_url_params['display_text'] = 'F';",
          "4200:                 $results_operations_html .= PMA_linkOrButton(",
          "4208:                 unset($_url_params['display_text']);",
          "4209:             }",
          "4210:         } // end displays \"printable view\"",
          "",
          "[Removed Lines]",
          "4190:                     'sql.php' . $url_query,",
          "4191:                     PMA_getIcon('b_print.png', __('Print view'), true),",
          "4192:                     '', true, true, 'print_view'",
          "4193:                 )",
          "4194:                 . \"\\n\";",
          "4201:                         'sql.php' . PMA_generate_common_url($_url_params),",
          "4202:                         PMA_getIcon(",
          "4203:                             'b_print.png', __('Print view (with full texts)'), true",
          "4204:                         ),",
          "4205:                         '', true, true, 'print_view'",
          "4206:                     )",
          "4207:                     . \"\\n\";",
          "",
          "[Added Lines]",
          "4187:                 'sql.php' . $url_query,",
          "4188:                 PMA_getIcon('b_print.png', __('Print view'), true),",
          "4189:                 '', true, true, 'print_view'",
          "4190:             )",
          "4191:             . \"\\n\";",
          "4198:                     'sql.php' . PMA_generate_common_url($_url_params),",
          "4199:                     PMA_getIcon(",
          "4200:                         'b_print.png', __('Print view (with full texts)'), true",
          "4201:                     ),",
          "4202:                     '', true, true, 'print_view'",
          "4203:                 )",
          "4204:                 . \"\\n\";",
          "",
          "---------------",
          "--- Hunk 65 ---",
          "[Context before]",
          "4253:         }",
          "4255:         $results_operations_html .= PMA_linkOrButton(",
          "4263:         $results_operations_html .= PMA_linkOrButton(",
          "4271:         $geometry_found = false;",
          "",
          "[Removed Lines]",
          "4256:                 'tbl_export.php' . PMA_generate_common_url($_url_params),",
          "4257:                 PMA_getIcon('b_tblexport.png', __('Export'), true),",
          "4258:                 '', true, true, ''",
          "4259:             )",
          "4260:             . \"\\n\";",
          "4264:                 'tbl_chart.php' . PMA_generate_common_url($_url_params),",
          "4265:                 PMA_getIcon('b_chart.png', __('Display chart'), true),",
          "4266:                 '', true, true, ''",
          "4267:             )",
          "4268:             . \"\\n\";",
          "",
          "[Added Lines]",
          "4253:             'tbl_export.php' . PMA_generate_common_url($_url_params),",
          "4254:             PMA_getIcon('b_tblexport.png', __('Export'), true),",
          "4255:             '', true, true, ''",
          "4256:         )",
          "4257:         . \"\\n\";",
          "4261:             'tbl_chart.php' . PMA_generate_common_url($_url_params),",
          "4262:             PMA_getIcon('b_chart.png', __('Display chart'), true),",
          "4263:             '', true, true, ''",
          "4264:         )",
          "4265:         . \"\\n\";",
          "",
          "---------------",
          "--- Hunk 66 ---",
          "[Context before]",
          "4280:         if ($geometry_found) {",
          "4281:             $results_operations_html .= PMA_linkOrButton(",
          "4287:         }",
          "4288:     }",
          "",
          "[Removed Lines]",
          "4282:                     'tbl_gis_visualization.php' . PMA_generate_common_url($_url_params),",
          "4283:                     PMA_getIcon('b_globe.gif', __('Visualize GIS data'), true),",
          "4284:                     '', true, true, ''",
          "4285:                 )",
          "4286:                 . \"\\n\";",
          "",
          "[Added Lines]",
          "4279:                 'tbl_gis_visualization.php' . PMA_generate_common_url($_url_params),",
          "4280:                 PMA_getIcon('b_globe.gif', __('Visualize GIS data'), true),",
          "4281:                 '', true, true, ''",
          "4282:             )",
          "4283:             . \"\\n\";",
          "",
          "---------------",
          "--- Hunk 67 ---",
          "[Context before]",
          "4746:     if ($position == 'left') {",
          "4748:         $ret .= PMA_getCheckboxForMultiRowSubmissions(",
          "4753:         $ret .= PMA_getEditLink(",
          "4757:         $ret .= PMA_getCopyLink(",
          "4761:         $ret .= PMA_getDeleteLink($del_url, $del_str, $js_conf, '', '');",
          "",
          "[Removed Lines]",
          "4749:                 $del_url, $is_display, $row_no, $where_clause_html, $condition_array,",
          "4750:                 $del_query, $id_suffix = '_left', '', '', ''",
          "4751:             );",
          "4754:                 $edit_url, $class, $edit_str, $where_clause, $where_clause_html, ''",
          "4755:             );",
          "4758:                 $copy_url, $copy_str, $where_clause, $where_clause_html, ''",
          "4759:             );",
          "",
          "[Added Lines]",
          "4746:             $del_url, $is_display, $row_no, $where_clause_html, $condition_array,",
          "4747:             $del_query, $id_suffix = '_left', '', '', ''",
          "4748:         );",
          "4751:             $edit_url, $class, $edit_str, $where_clause, $where_clause_html, ''",
          "4752:         );",
          "4755:             $copy_url, $copy_str, $where_clause, $where_clause_html, ''",
          "4756:         );",
          "",
          "---------------",
          "--- Hunk 68 ---",
          "[Context before]",
          "4765:         $ret .= PMA_getDeleteLink($del_url, $del_str, $js_conf, '', '');",
          "4767:         $ret .= PMA_getCopyLink(",
          "4771:         $ret .= PMA_getEditLink(",
          "4775:         $ret .= PMA_getCheckboxForMultiRowSubmissions(",
          "4780:     } else { // $position == 'none'",
          "4782:         $ret .= PMA_getCheckboxForMultiRowSubmissions(",
          "4786:     }",
          "4788:     return $ret;",
          "",
          "[Removed Lines]",
          "4768:                 $copy_url, $copy_str, $where_clause, $where_clause_html, ''",
          "4769:             );",
          "4772:                 $edit_url, $class, $edit_str, $where_clause, $where_clause_html, ''",
          "4773:             );",
          "4776:                 $del_url, $is_display, $row_no, $where_clause_html, $condition_array,",
          "4777:                 $del_query, $id_suffix = '_right', '', '', ''",
          "4778:             );",
          "4783:                 $del_url, $is_display, $row_no, $where_clause_html, $condition_array,",
          "4784:                 $del_query, $id_suffix = '_left', '', '', ''",
          "4785:             );",
          "",
          "[Added Lines]",
          "4765:             $copy_url, $copy_str, $where_clause, $where_clause_html, ''",
          "4766:         );",
          "4769:             $edit_url, $class, $edit_str, $where_clause, $where_clause_html, ''",
          "4770:         );",
          "4773:             $del_url, $is_display, $row_no, $where_clause_html, $condition_array,",
          "4774:             $del_query, $id_suffix = '_right', '', '', ''",
          "4775:         );",
          "4780:             $del_url, $is_display, $row_no, $where_clause_html, $condition_array,",
          "4781:             $del_query, $id_suffix = '_left', '', '', ''",
          "4782:         );",
          "",
          "---------------"
        ]
      }
    },
    {
      "candidate_hash": "8877c8c08170a18021ba43630c9c69126eb36fe9",
      "candidate_info": {
        "commit_hash": "8877c8c08170a18021ba43630c9c69126eb36fe9",
        "repo": "phpmyadmin/phpmyadmin",
        "commit_url": "https://github.com/phpmyadmin/phpmyadmin/commit/8877c8c08170a18021ba43630c9c69126eb36fe9",
        "files": [
          "libraries/display_tbl.lib.php"
        ],
        "message": "* Coding style improvements - In some instances preferred a bit longer lines over sane breaking of lines",
        "before_after_code_files": [
          "libraries/display_tbl.lib.php||libraries/display_tbl.lib.php"
        ]
      },
      "candidate_patch_features": {
        "candidate_earlier_than_patch": 0,
        "same_branch_evolution": 1,
        "olp_code_files": {
          "patch": [
            "libraries/display_tbl.lib.php||libraries/display_tbl.lib.php"
          ],
          "candidate": [
            "libraries/display_tbl.lib.php||libraries/display_tbl.lib.php"
          ]
        }
      },
      "candidate_diff": {
        "libraries/display_tbl.lib.php||libraries/display_tbl.lib.php": [
          "File: libraries/display_tbl.lib.php -> libraries/display_tbl.lib.php",
          "--- Hunk 1 ---",
          "[Context before]",
          "114:             );",
          "115:             if (isset($which[1])",
          "116:                 && strpos(' ' . strtoupper($which[1]), 'PROCESSLIST') > 0",
          "118:                 $do_display['edit_lnk'] = 'nn'; // no edit link",
          "119:                 $do_display['del_lnk']  = 'kp'; // \"kill process\" type edit link",
          "120:             } else {",
          "",
          "[Removed Lines]",
          "117:                 ) {",
          "",
          "[Added Lines]",
          "117:             ) {",
          "",
          "---------------",
          "--- Hunk 2 ---",
          "[Context before]",
          "136:             $prev_table = $fields_meta[0]->table;",
          "137:             $do_display['text_btn']  = (string) '1';",
          "138:             for ($i = 0; $i < $GLOBALS['fields_cnt']; $i++) {",
          "144:                 if ($is_link",
          "145:                     && ($fields_meta[$i]->table == ''",
          "",
          "[Removed Lines]",
          "139:                 $is_link = ($do_display['edit_lnk'] != 'nn'",
          "140:                             || $do_display['del_lnk'] != 'nn'",
          "141:                             || $do_display['sort_lnk'] != '0'",
          "142:                             || $do_display['ins_row'] != '0');",
          "",
          "[Added Lines]",
          "139:                 $is_link = $do_display['edit_lnk'] != 'nn'",
          "140:                     || $do_display['del_lnk'] != 'nn'",
          "141:                     || $do_display['sort_lnk'] != '0'",
          "142:                     || $do_display['ins_row'] != '0';",
          "",
          "---------------",
          "--- Hunk 3 ---",
          "[Context before]",
          "241: function PMA_displayTableNavigationOneButton($caption, $title, $pos, $html_sql_query,",
          "245:     global $db, $table, $goto;",
          "247:     $caption_output = '';",
          "",
          "[Removed Lines]",
          "242:     $onsubmit = '', $input_for_real_end = '', $onclick = '')",
          "243: {",
          "",
          "[Added Lines]",
          "242:     $onsubmit = '', $input_for_real_end = '', $onclick = ''",
          "243: ) {",
          "",
          "---------------",
          "--- Hunk 4 ---",
          "[Context before]",
          "301: function PMA_displayTableNavigation($pos_next, $pos_prev, $sql_query,",
          "303:     global $db, $table, $goto;",
          "304:     global $num_rows, $unlim_num_rows;",
          "305:     global $is_innodb;",
          "",
          "[Removed Lines]",
          "302:     $id_for_direction_dropdown) {",
          "",
          "[Added Lines]",
          "301:     $id_for_direction_dropdown",
          "302: ) {",
          "",
          "---------------",
          "--- Hunk 5 ---",
          "[Context before]",
          "326:     if ($_SESSION['tmp_user_values']['pos']",
          "327:         && $_SESSION['tmp_user_values']['max_rows'] != 'all'",
          "329:         PMA_displayTableNavigationOneButton(",
          "330:             '&lt;&lt;', _pgettext('First page', 'Begin'), 0, $html_sql_query",
          "331:         );",
          "",
          "[Removed Lines]",
          "328:         ) {",
          "",
          "[Added Lines]",
          "328:     ) {",
          "",
          "---------------",
          "--- Hunk 6 ---",
          "[Context before]",
          "425:             $input_for_real_end = $onclick = '';",
          "426:         }",
          "429:         PMA_displayTableNavigationOneButton(",
          "430:             '&gt;&gt;',",
          "",
          "[Removed Lines]",
          "[None]",
          "",
          "[Added Lines]",
          "428:         $onsubmit = 'onsubmit=\"return '",
          "429:             . ($_SESSION['tmp_user_values']['pos']",
          "430:                     + $_SESSION['tmp_user_values']['max_rows'] < $unlim_num_rows",
          "431:                 && $num_rows >= $_SESSION['tmp_user_values']['max_rows'])",
          "432:             ? 'true'",
          "433:             : 'false' . '\"';",
          "",
          "---------------",
          "--- Hunk 7 ---",
          "[Context before]",
          "432:             @((ceil($unlim_num_rows / $_SESSION['tmp_user_values']['max_rows'])- 1)",
          "434:             $html_sql_query,",
          "441:             $input_for_real_end,",
          "442:             $onclick",
          "443:         );",
          "",
          "[Removed Lines]",
          "435:             'onsubmit=\"return '",
          "436:                 . (($_SESSION['tmp_user_values']['pos']",
          "437:                         + $_SESSION['tmp_user_values']['max_rows'] < $unlim_num_rows",
          "438:                     && $num_rows >= $_SESSION['tmp_user_values']['max_rows'])",
          "439:                 ? 'true'",
          "440:                 : 'false') . '\"',",
          "",
          "[Added Lines]",
          "441:             $onsubmit,",
          "",
          "---------------",
          "--- Hunk 8 ---",
          "[Context before]",
          "554: function PMA_displayTableHeaders(&$is_display, &$fields_meta, $fields_cnt = 0,",
          "555:     $analyzed_sql = '', $sort_expression = '', $sort_expression_nodirection = '',",
          "558:     global $db, $table, $goto;",
          "559:     global $sql_query, $num_rows;",
          "",
          "[Removed Lines]",
          "556:     $sort_direction = '') {",
          "",
          "[Added Lines]",
          "557:     $sort_direction = ''",
          "558: ) {",
          "",
          "---------------",
          "--- Hunk 9 ---",
          "[Context before]",
          "601:             if ($indexes) {",
          "603:                 if ($direction == 'horizontal'",
          "606:                 ) {",
          "607:                     $span = $fields_cnt;",
          "608:                     if ($is_display['edit_lnk'] != 'nn') {",
          "",
          "[Removed Lines]",
          "604:                     || $direction",
          "605:                         == 'horizontalflipped'",
          "",
          "[Added Lines]",
          "606:                     || $direction == 'horizontalflipped'",
          "",
          "---------------",
          "--- Hunk 10 ---",
          "[Context before]",
          "612:                         $span++;",
          "613:                     }",
          "614:                     if ($is_display['del_lnk'] != 'kp'",
          "616:                         $span++;",
          "617:                     }",
          "618:                 } else {",
          "619:                     $span = $num_rows + floor(",
          "623:                 }",
          "625:                 echo '<form action=\"sql.php\" method=\"post\">' . \"\\n\";",
          "",
          "[Removed Lines]",
          "615:                         && $is_display['del_lnk'] != 'nn') {",
          "620:                         $num_rows",
          "621:                         / $_SESSION['tmp_user_values']['repeat_cells']",
          "622:                         ) + 1;",
          "",
          "[Added Lines]",
          "616:                         && $is_display['del_lnk'] != 'nn'",
          "617:                     ) {",
          "622:                         $num_rows / $_SESSION['tmp_user_values']['repeat_cells']",
          "623:                     ) + 1;",
          "",
          "---------------",
          "--- Hunk 11 ---",
          "[Context before]",
          "654:                             $unsorted_sql_query_first_part  . \"\\n\"",
          "655:                             . ' ORDER BY ' . $asc_sort",
          "656:                             . $unsorted_sql_query_second_part",
          "658:                         . '\"' . ($local_order == $asc_sort",
          "659:                             ? ' selected=\"selected\"'",
          "660:                             : '')",
          "",
          "[Removed Lines]",
          "657:                             )",
          "",
          "[Added Lines]",
          "658:                         )",
          "",
          "---------------",
          "--- Hunk 12 ---",
          "[Context before]",
          "665:                             $unsorted_sql_query_first_part . \"\\n\"",
          "666:                             . ' ORDER BY ' . $desc_sort",
          "667:                             . $unsorted_sql_query_second_part",
          "669:                         . '\"' . ($local_order == $desc_sort",
          "670:                             ? ' selected=\"selected\"'",
          "671:                             : '')",
          "",
          "[Removed Lines]",
          "668:                             )",
          "",
          "[Added Lines]",
          "669:                         )",
          "",
          "---------------",
          "--- Hunk 13 ---",
          "[Context before]",
          "706:         if (! PMA_Table::isView($GLOBALS['table'], $GLOBALS['db'])) {",
          "707:             echo '<input id=\"table_create_time\" type=\"hidden\" value=\"'",
          "708:                 . PMA_Table::sGetStatusInfo(",
          "710:                 ) . '\" />';",
          "711:         }",
          "712:     }",
          "",
          "[Removed Lines]",
          "709:                 $GLOBALS['db'], $GLOBALS['table'], 'Create_time'",
          "",
          "[Added Lines]",
          "710:                     $GLOBALS['db'], $GLOBALS['table'], 'Create_time'",
          "",
          "---------------",
          "--- Hunk 14 ---",
          "[Context before]",
          "744:         PMA_display_html_radio(",
          "745:             'display_text', $choices,",
          "746:             $_SESSION['tmp_user_values']['display_text']",
          "748:         echo '</div>';",
          "",
          "[Removed Lines]",
          "747:             );",
          "",
          "[Added Lines]",
          "748:         );",
          "",
          "---------------",
          "--- Hunk 15 ---",
          "[Context before]",
          "778:         if ($GLOBALS['cfgRelation']['relwork']",
          "780:             echo '<div class=\"formelement\">';",
          "781:             $choices = array(",
          "782:                 'K'   => __('Relational key'),",
          "",
          "[Removed Lines]",
          "779:             && $GLOBALS['cfgRelation']['displaywork']) {",
          "",
          "[Added Lines]",
          "780:             && $GLOBALS['cfgRelation']['displaywork']",
          "781:         ) {",
          "",
          "---------------",
          "--- Hunk 16 ---",
          "[Context before]",
          "785:             PMA_display_html_radio(",
          "786:                 'relational_display', $choices,",
          "787:                 $_SESSION['tmp_user_values']['relational_display']",
          "789:             echo '</div>';",
          "790:         }",
          "",
          "[Removed Lines]",
          "788:                 );",
          "",
          "[Added Lines]",
          "790:             );",
          "",
          "---------------",
          "--- Hunk 17 ---",
          "[Context before]",
          "793:         PMA_display_html_checkbox(",
          "794:             'display_binary', __('Show binary contents'),",
          "795:             ! empty($_SESSION['tmp_user_values']['display_binary']), false",
          "797:         echo '<br />';",
          "798:         PMA_display_html_checkbox(",
          "799:             'display_blob', __('Show BLOB contents'),",
          "800:             ! empty($_SESSION['tmp_user_values']['display_blob']), false",
          "802:         echo '<br />';",
          "803:         PMA_display_html_checkbox(",
          "804:             'display_binary_as_hex', __('Show binary contents as HEX'),",
          "805:             ! empty($_SESSION['tmp_user_values']['display_binary_as_hex']), false",
          "807:         echo '</div>';",
          "",
          "[Removed Lines]",
          "796:             );",
          "801:             );",
          "806:             );",
          "",
          "[Added Lines]",
          "798:         );",
          "803:         );",
          "808:         );",
          "",
          "---------------",
          "--- Hunk 18 ---",
          "[Context before]",
          "814:         PMA_display_html_checkbox(",
          "815:             'hide_transformation', __('Hide browser transformation'),",
          "816:             ! empty($_SESSION['tmp_user_values']['hide_transformation']), false",
          "818:         echo '</div>';",
          "820:         if (! PMA_DRIZZLE) {",
          "",
          "[Removed Lines]",
          "817:             );",
          "",
          "[Added Lines]",
          "819:         );",
          "",
          "---------------",
          "--- Hunk 19 ---",
          "[Context before]",
          "827:             PMA_display_html_radio(",
          "828:                 'geometry_display', $choices,",
          "829:                 $_SESSION['tmp_user_values']['geometry_display']",
          "831:             echo '</div>';",
          "832:         }",
          "",
          "[Removed Lines]",
          "830:                 );",
          "",
          "[Added Lines]",
          "832:             );",
          "",
          "---------------",
          "--- Hunk 20 ---",
          "[Context before]",
          "922:             <?php",
          "924:         } else {",
          "927:                 . '        ' . \"\\n\"",
          "928:                 . '    </th>' . \"\\n\";",
          "929:         } // end vertical mode",
          "",
          "[Removed Lines]",
          "925:             $vertical_display['textbtn'] =",
          "926:                 '    <th ' . $rowspan . ' class=\"vmiddle\">' . \"\\n\"",
          "",
          "[Added Lines]",
          "927:             $vertical_display['textbtn']",
          "928:                 = '    <th ' . $rowspan . ' class=\"vmiddle\">' . \"\\n\"",
          "",
          "---------------",
          "--- Hunk 21 ---",
          "[Context before]",
          "980:     if ($GLOBALS['cfgRelation']['commwork']",
          "981:         && $GLOBALS['cfgRelation']['mimework']",
          "982:         && $GLOBALS['cfg']['BrowseMIME']",
          "984:         include_once './libraries/transformations.lib.php';",
          "985:         $GLOBALS['mime_map'] = PMA_getMIME($db, $table);",
          "986:     }",
          "",
          "[Removed Lines]",
          "983:         && ! $_SESSION['tmp_user_values']['hide_transformation']) {",
          "",
          "[Added Lines]",
          "985:         && ! $_SESSION['tmp_user_values']['hide_transformation']",
          "986:     ) {",
          "",
          "---------------",
          "--- Hunk 22 ---",
          "[Context before]",
          "995:         $wi = 0;",
          "996:         if (isset($analyzed_sql[0]['where_clause_identifiers'])",
          "998:             foreach ($analyzed_sql[0]['where_clause_identifiers']",
          "999:                 as $wci_nr => $wci) {",
          "1000:                 $highlight_columns[$wci] = 'true';",
          "",
          "[Removed Lines]",
          "997:             && is_array($analyzed_sql[0]['where_clause_identifiers'])) {",
          "",
          "[Added Lines]",
          "1000:             && is_array($analyzed_sql[0]['where_clause_identifiers'])",
          "1001:         ) {",
          "",
          "---------------",
          "--- Hunk 23 ---",
          "[Context before]",
          "1020:         if (isset($highlight_columns[$fields_meta[$i]->name])",
          "1022:             $condition_field = true;",
          "1023:         } else {",
          "1024:             $condition_field = false;",
          "",
          "[Removed Lines]",
          "1021:             || isset($highlight_columns[PMA_backquote($fields_meta[$i]->name)])) {",
          "",
          "[Added Lines]",
          "1025:             || isset($highlight_columns[PMA_backquote($fields_meta[$i]->name)])",
          "1026:         ) {",
          "",
          "---------------",
          "--- Hunk 24 ---",
          "[Context before]",
          "1029:             && isset($comments_map[$fields_meta[$i]->table])",
          "1030:             && isset($comments_map[$fields_meta[$i]->table][$fields_meta[$i]->name])",
          "1031:         ) {",
          "1034:                 . '</span>';",
          "1035:         } else {",
          "1036:             $comments = '';",
          "",
          "[Removed Lines]",
          "1032:             $comments = '<span class=\"tblcomment\">' . htmlspecialchars(",
          "1033:                     $comments_map[$fields_meta[$i]->table][$fields_meta[$i]->name])",
          "",
          "[Added Lines]",
          "1037:             $comments = '<span class=\"tblcomment\">'",
          "1038:                 . htmlspecialchars(",
          "1039:                     $comments_map[$fields_meta[$i]->table][$fields_meta[$i]->name]",
          "1040:                 )",
          "",
          "---------------",
          "--- Hunk 25 ---",
          "[Context before]",
          "1058:             $name_to_use_in_sort = $fields_meta[$i]->name;",
          "1059:             $is_orgname = false;",
          "1060:             if (isset($fields_meta[$i]->orgname)",
          "1062:                 $name_to_use_in_sort = $fields_meta[$i]->orgname;",
          "1063:                 $is_orgname = true;",
          "1064:             }",
          "",
          "[Removed Lines]",
          "1061:                 && strlen($fields_meta[$i]->orgname)) {",
          "",
          "[Added Lines]",
          "1068:                 && strlen($fields_meta[$i]->orgname)",
          "1069:             ) {",
          "",
          "---------------",
          "--- Hunk 26 ---",
          "[Context before]",
          "1092:                 $is_in_sort = false;",
          "1093:                 $sort_name = str_replace('`', '', $sort_tbl) . $name_to_use_in_sort;",
          "1098:                 ) {",
          "1099:                     $is_in_sort = true;",
          "1100:                 }",
          "",
          "[Removed Lines]",
          "1094:                 if ($sort_name == str_replace('`', '',",
          "1095:                         $new_sort_expression_nodirection)",
          "1096:                     || $sort_name == str_replace('`', '',",
          "1097:                         $sort_expression_nodirection)",
          "",
          "[Added Lines]",
          "1102:                 if ($sort_name == str_replace('`', '', $new_sort_expression_nodirection)",
          "1103:                     || $sort_name == str_replace('`', '', $sort_expression_nodirection)",
          "",
          "---------------",
          "--- Hunk 27 ---",
          "[Context before]",
          "1119:                 $GLOBALS['cfg']['Order'] = strtoupper($GLOBALS['cfg']['Order']);",
          "1120:                 if ($GLOBALS['cfg']['Order'] === 'SMART') {",
          "1123:                 } else {",
          "1124:                     $sort_order .= $GLOBALS['cfg']['Order'];",
          "1125:                 }",
          "1126:                 $order_img   = '';",
          "1127:             } elseif ('DESC' == $sort_direction) {",
          "1128:                 $sort_order .= ' ASC';",
          "1133:             } else {",
          "1134:                 $sort_order .= ' DESC';",
          "1139:             }",
          "1141:             if (preg_match('@(.*)([[:space:]](LIMIT (.*)|PROCEDURE (.*)|FOR UPDATE|'",
          "1143:                 $sorted_sql_query = $regs3[1] . $sort_order . $regs3[2];",
          "1144:             } else {",
          "1145:                 $sorted_sql_query = $unsorted_sql_query . $sort_order;",
          "",
          "[Removed Lines]",
          "1121:                     $sort_order .= (preg_match('@time|date@i',",
          "1122:                         $fields_meta[$i]->type)) ? 'DESC' : 'ASC';",
          "1129:                 $order_img   = ' ' . PMA_getImage('s_desc.png', __('Descending'),",
          "1130:                     array('class' => \"soimg$i\", 'title' => ''));",
          "1131:                 $order_img  .= ' ' . PMA_getImage('s_asc.png', __('Ascending'),",
          "1132:                     array('class' => \"soimg$i hide\", 'title' => ''));",
          "1135:                 $order_img   = ' ' . PMA_getImage('s_asc.png', __('Ascending'),",
          "1136:                     array('class' => \"soimg$i\", 'title' => ''));",
          "1137:                 $order_img  .= ' ' . PMA_getImage('s_desc.png', __('Descending'),",
          "1138:                     array('class' => \"soimg$i hide\", 'title' => ''));",
          "1142:                     . 'LOCK IN SHARE MODE))@is', $unsorted_sql_query, $regs3)) {",
          "",
          "[Added Lines]",
          "1127:                     $sort_order .= (preg_match(",
          "1128:                         '@time|date@i',",
          "1129:                         $fields_meta[$i]->type",
          "1130:                     )) ? 'DESC' : 'ASC';",
          "1137:                 $order_img   = ' ' . PMA_getImage(",
          "1138:                     's_desc.png', __('Descending'),",
          "1139:                     array('class' => \"soimg$i\", 'title' => '')",
          "1140:                 );",
          "1141:                 $order_img  .= ' ' . PMA_getImage(",
          "1142:                     's_asc.png', __('Ascending'),",
          "1143:                     array('class' => \"soimg$i hide\", 'title' => '')",
          "1144:                 );",
          "1147:                 $order_img   = ' ' . PMA_getImage(",
          "1148:                     's_asc.png', __('Ascending'),",
          "1149:                     array('class' => \"soimg$i\", 'title' => '')",
          "1150:                 );",
          "1151:                 $order_img  .= ' ' . PMA_getImage(",
          "1152:                     's_desc.png', __('Descending'),",
          "1153:                     array('class' => \"soimg$i hide\", 'title' => '')",
          "1154:                 );",
          "1158:                     . 'LOCK IN SHARE MODE))@is', $unsorted_sql_query, $regs3)",
          "1159:             ) {",
          "",
          "---------------",
          "--- Hunk 28 ---",
          "[Context before]",
          "1180:             $order_link_content = ($direction",
          "1181:                 == 'horizontalflipped'",
          "1182:                 && $GLOBALS['cfg']['HeaderFlipType'] == 'fake'",
          "1185:                 : htmlspecialchars($fields_meta[$i]->name));",
          "1189:             if ($direction == 'horizontal'",
          "1192:             ) {",
          "1193:                 echo '<th';",
          "1194:                 $th_class = array();",
          "",
          "[Removed Lines]",
          "1183:                 ? PMA_flipstring(htmlspecialchars($fields_meta[$i]->name),",
          "1184:                     \"<br />\\n\")",
          "1186:             $order_link = PMA_linkOrButton($order_url,",
          "1187:                 $order_link_content . $order_img, $order_link_params, false, true);",
          "1190:                 || $direction",
          "1191:                     == 'horizontalflipped'",
          "",
          "[Added Lines]",
          "1200:                 ? PMA_flipstring(",
          "1201:                     htmlspecialchars($fields_meta[$i]->name),",
          "1202:                     \"<br />\\n\"",
          "1203:                 )",
          "1205:             $order_link = PMA_linkOrButton(",
          "1206:                 $order_url, $order_link_content . $order_img,",
          "1207:                 $order_link_params, false, true",
          "1208:             );",
          "1211:                 || $direction == 'horizontalflipped'",
          "",
          "---------------",
          "--- Hunk 29 ---",
          "[Context before]",
          "1208:                 }",
          "1209:                 echo ' class=\"' . implode(' ', $th_class);",
          "1213:                     echo ' vbottom';",
          "1214:                 }",
          "1215:                 echo '\" data-column=\"' . htmlspecialchars($fields_meta[$i]->name)",
          "",
          "[Removed Lines]",
          "1211:                 if ($direction",
          "1212:                         == 'horizontalflipped') {",
          "",
          "[Added Lines]",
          "1231:                 if ($direction == 'horizontalflipped') {",
          "",
          "---------------",
          "--- Hunk 30 ---",
          "[Context before]",
          "1226:         else {",
          "1227:             if ($direction == 'horizontal'",
          "1230:             ) {",
          "1231:                 echo '<th';",
          "1232:                 $th_class = array();",
          "",
          "[Removed Lines]",
          "1228:                 || $direction",
          "1229:                     == 'horizontalflipped'",
          "",
          "[Added Lines]",
          "1247:                 || $direction == 'horizontalflipped'",
          "",
          "---------------",
          "--- Hunk 31 ---",
          "[Context before]",
          "1238:                     $th_class[] = 'condition';",
          "1239:                 }",
          "1240:                 echo ' class=\"' . implode(' ', $th_class);",
          "1243:                     echo ' vbottom';",
          "1244:                 }",
          "1245:                 echo '\"';",
          "1248:                     && $GLOBALS['cfg']['HeaderFlipType'] == 'css'",
          "1249:                 ) {",
          "1250:                     echo ' style=\"direction: ltr; writing-mode: tb-rl;\"';",
          "1251:                 }",
          "1252:                 echo ' data-column=\"' . htmlspecialchars($fields_meta[$i]->name)",
          "1253:                     . '\">';",
          "1256:                     && $GLOBALS['cfg']['HeaderFlipType'] == 'fake'",
          "1257:                 ) {",
          "1260:                 } else {",
          "1261:                     echo htmlspecialchars($fields_meta[$i]->name);",
          "1262:                 }",
          "",
          "[Removed Lines]",
          "1241:                 if ($direction",
          "1242:                         == 'horizontalflipped') {",
          "1246:                 if ($direction",
          "1247:                         == 'horizontalflipped'",
          "1254:                 if ($direction",
          "1255:                         == 'horizontalflipped'",
          "1258:                     echo PMA_flipstring(htmlspecialchars($fields_meta[$i]->name),",
          "1259:                         '<br />');",
          "",
          "[Added Lines]",
          "1259:                 if ($direction == 'horizontalflipped') {",
          "1263:                 if ($direction == 'horizontalflipped'",
          "1270:                 if ($direction == 'horizontalflipped'",
          "1273:                     echo PMA_flipstring(",
          "1274:                         htmlspecialchars($fields_meta[$i]->name), '<br />'",
          "1275:                     );",
          "",
          "---------------",
          "--- Hunk 32 ---",
          "[Context before]",
          "1276:     if (($GLOBALS['cfg']['RowActionLinks'] == 'right'",
          "1278:         && ($is_display['edit_lnk'] != 'nn' || $is_display['del_lnk'] != 'nn')",
          "1279:         && $is_display['text_btn'] == '1'",
          "1280:     ) {",
          "",
          "[Removed Lines]",
          "1277:             || $GLOBALS['cfg']['RowActionLinks'] == 'both')",
          "",
          "[Added Lines]",
          "1293:         || $GLOBALS['cfg']['RowActionLinks'] == 'both')",
          "",
          "---------------",
          "--- Hunk 33 ---",
          "[Context before]",
          "1304:     elseif (($GLOBALS['cfg']['RowActionLinks'] == 'left'",
          "1306:         && ($is_display['edit_lnk'] == 'nn' && $is_display['del_lnk'] == 'nn')",
          "1307:         && (! isset($GLOBALS['is_header_sent']) || ! $GLOBALS['is_header_sent'])",
          "1308:     ) {",
          "",
          "[Removed Lines]",
          "1305:             || $GLOBALS['cfg']['RowActionLinks'] == 'both')",
          "",
          "[Added Lines]",
          "1321:         || $GLOBALS['cfg']['RowActionLinks'] == 'both')",
          "",
          "---------------",
          "--- Hunk 34 ---",
          "[Context before]",
          "1364: function PMA_buildNullDisplay($class, $condition_field, $meta, $align = '')",
          "1365: {",
          "1369: }",
          "",
          "[Removed Lines]",
          "1367:     return '<td ' . $align . ' class=\"' . PMA_addClass($class, $condition_field,",
          "1368:         $meta, '') . ' null\"><i>NULL</i></td>';",
          "",
          "[Added Lines]",
          "1383:     return '<td ' . $align . ' class=\"' . PMA_addClass(",
          "1384:         $class, $condition_field, $meta, ''",
          "1385:     )",
          "1386:     . ' null\"><i>NULL</i></td>';",
          "",
          "---------------",
          "--- Hunk 35 ---",
          "[Context before]",
          "1381: function PMA_buildEmptyDisplay($class, $condition_field, $meta, $align = '')",
          "1382: {",
          "1383:     $nowrap = ' nowrap';",
          "1386: }",
          "",
          "[Removed Lines]",
          "1384:     return '<td ' . $align . ' class=\"' . PMA_addClass($class, $condition_field,",
          "1385:         $meta, $nowrap)  . '\"></td>';",
          "",
          "[Added Lines]",
          "1402:     return '<td ' . $align . ' class=\"' . PMA_addClass(",
          "1403:         $class, $condition_field, $meta, $nowrap",
          "1404:     )",
          "1405:     . '\"></td>';",
          "",
          "---------------",
          "--- Hunk 36 ---",
          "[Context before]",
          "1401: function PMA_addClass($class, $condition_field, $meta, $nowrap,",
          "1405:     $enum_class = '';",
          "1406:     if (strpos($meta->flags, 'enum') !== false) {",
          "",
          "[Removed Lines]",
          "1402:     $is_field_truncated = false, $transform_function = '', $default_function = '')",
          "1403: {",
          "",
          "[Added Lines]",
          "1422:     $is_field_truncated = false, $transform_function = '', $default_function = ''",
          "1423: ) {",
          "",
          "---------------",
          "--- Hunk 37 ---",
          "[Context before]",
          "1593:                     'goto'             => 'sql.php',",
          "1594:                 );",
          "1595:                 $edit_url = 'tbl_change.php' . PMA_generate_common_url(",
          "1597:                 $copy_url = 'tbl_change.php' . PMA_generate_common_url(",
          "1600:                 $edit_str = PMA_getIcon('b_edit.png', __('Edit'));",
          "1601:                 $copy_str = PMA_getIcon('b_insrow.png', __('Copy'));",
          "",
          "[Removed Lines]",
          "1596:                     $_url_params + array('default_action' => 'update'));",
          "1598:                     $_url_params + array('default_action' => 'insert'));",
          "",
          "[Added Lines]",
          "1616:                     $_url_params + array('default_action' => 'update')",
          "1617:                 );",
          "1619:                     $_url_params + array('default_action' => 'insert')",
          "1620:                 );",
          "",
          "---------------",
          "--- Hunk 38 ---",
          "[Context before]",
          "1648:                     'goto'      => 'main.php',",
          "1649:                 );",
          "1650:                 $lnk_goto = 'sql.php' . PMA_generate_common_url(",
          "1653:                 $_url_params = array(",
          "1654:                     'db'        => 'mysql',",
          "",
          "[Removed Lines]",
          "1651:                     $_url_params, 'text');",
          "",
          "[Added Lines]",
          "1673:                     $_url_params, 'text'",
          "1674:                 );",
          "",
          "---------------",
          "--- Hunk 39 ---",
          "[Context before]",
          "1665:             if (($GLOBALS['cfg']['RowActionLinks'] == 'left'",
          "1667:                 && ($_SESSION['tmp_user_values']['disp_direction'] == 'horizontal'",
          "1670:             ) {",
          "1671:                 if (! isset($js_conf)) {",
          "1672:                     $js_conf = '';",
          "1673:                 }",
          "1675:                     $row_no, $where_clause, $where_clause_html, $condition_array,",
          "1676:                     $del_query, 'l', $edit_url, $copy_url, $edit_anchor_class,",
          "1678:             } elseif (($GLOBALS['cfg']['RowActionLinks'] == 'none')",
          "1679:                 && ($_SESSION['tmp_user_values']['disp_direction'] == 'horizontal'",
          "1682:             ) {",
          "1683:                 if (! isset($js_conf)) {",
          "1684:                     $js_conf = '';",
          "1685:                 }",
          "1687:                     $row_no, $where_clause, $where_clause_html, $condition_array,",
          "1688:                     $del_query, 'l', $edit_url, $copy_url, $edit_anchor_class,",
          "1690:             } // end if (1.3)",
          "1691:         } // end if (1)",
          "",
          "[Removed Lines]",
          "1666:                     || $GLOBALS['cfg']['RowActionLinks'] == 'both')",
          "1668:                 || $_SESSION['tmp_user_values']['disp_direction']",
          "1669:                     == 'horizontalflipped')",
          "1674:                 echo PMA_generateCheckboxAndLinks('left', $del_url, $is_display,",
          "1677:                     $edit_str, $copy_str, $del_str, $js_conf);",
          "1680:                 || $_SESSION['tmp_user_values']['disp_direction']",
          "1681:                     == 'horizontalflipped')",
          "1686:                 echo PMA_generateCheckboxAndLinks('none', $del_url, $is_display,",
          "1689:                     $edit_str, $copy_str, $del_str, $js_conf);",
          "",
          "[Added Lines]",
          "1689:                 || $GLOBALS['cfg']['RowActionLinks'] == 'both')",
          "1691:                 || $_SESSION['tmp_user_values']['disp_direction'] == 'horizontalflipped')",
          "1696:                 echo PMA_generateCheckboxAndLinks(",
          "1697:                     'left', $del_url, $is_display,",
          "1700:                     $edit_str, $copy_str, $del_str, $js_conf",
          "1701:                 );",
          "1704:                 || $_SESSION['tmp_user_values']['disp_direction'] == 'horizontalflipped')",
          "1709:                 echo PMA_generateCheckboxAndLinks(",
          "1710:                     'none', $del_url, $is_display,",
          "1713:                     $edit_str, $copy_str, $del_str, $js_conf",
          "1714:                 );",
          "",
          "---------------",
          "--- Hunk 40 ---",
          "[Context before]",
          "1699:             $meta    = $fields_meta[$i];",
          "1700:             $not_null_class = $meta->not_null ? 'not_null' : '';",
          "1701:             $relation_class = isset($map[$meta->name]) ? 'relation' : '';",
          "1709:             if (substr($meta->type, 0, 9) == 'timestamp'",
          "1711:                 $field_type_class = 'datetimefield';",
          "1712:             } else if ($meta->type == 'date') {",
          "1713:                 $field_type_class = 'datefield';",
          "",
          "[Removed Lines]",
          "1702:             $hide_class = ($col_visib && !$col_visib[$j] &&",
          "1704:                            $_SESSION['tmp_user_values']['disp_direction']",
          "1705:                            != 'vertical')",
          "1706:                                ? 'hide'",
          "1707:                                : '';",
          "1710:                 || $meta->type == 'datetime') {",
          "",
          "[Added Lines]",
          "1727:             $hide_class = ($col_visib && !$col_visib[$j]",
          "1729:                 && $_SESSION['tmp_user_values']['disp_direction'] != 'vertical')",
          "1730:                 ? 'hide'",
          "1731:                 : '';",
          "1734:                 || $meta->type == 'datetime'",
          "1735:             ) {",
          "",
          "---------------",
          "--- Hunk 41 ---",
          "[Context before]",
          "1729:                 $condition_field = true;",
          "1730:             } else {",
          "1731:                 $condition_field = false;",
          "1732:             }",
          "1734:             if ($_SESSION['tmp_user_values']['disp_direction'] == 'vertical'",
          "1738:                 $class .= ' row_' . $row_no;",
          "1739:                 if ($GLOBALS['cfg']['BrowsePointerEnable'] == true) {",
          "",
          "[Removed Lines]",
          "1727:             if (isset($highlight_columns) && (isset($highlight_columns[$meta->name])",
          "1728:                 || isset($highlight_columns[PMA_backquote($meta->name)]))) {",
          "1735:                 && (! isset($GLOBALS['printview'])",
          "1736:                     || ($GLOBALS['printview'] != '1'))) {",
          "",
          "[Added Lines]",
          "1752:             if (isset($highlight_columns)",
          "1753:                 && (isset($highlight_columns[$meta->name])",
          "1754:                 || isset($highlight_columns[PMA_backquote($meta->name)]))",
          "1755:             ) {",
          "1762:                 && (! isset($GLOBALS['printview']) || ($GLOBALS['printview'] != '1'))",
          "1763:             ) {",
          "",
          "---------------",
          "--- Hunk 42 ---",
          "[Context before]",
          "1750:             $transform_options = array();",
          "1752:             if ($GLOBALS['cfgRelation']['mimework']",
          "1755:                 if (isset($GLOBALS['mime_map'][$meta->name]['mimetype'])",
          "1756:                     && isset($GLOBALS['mime_map'][$meta->name]['transformation'])",
          "1759:                     $include_file = PMA_securePath(",
          "1764:                         $transformfunction_name = str_replace(",
          "1765:                             '.inc.php', '',",
          "1768:                         include_once './libraries/transformations/' . $include_file;",
          "1772:                             $transform_function = 'PMA_transformation_'",
          "1773:                                 . $transformfunction_name;",
          "1774:                             $transform_options  = PMA_transformation_getOptions(",
          "1781:                                 '_', '/',",
          "1783:                         }",
          "1784:                     } // end if file_exists",
          "1785:                 } // end if transformation is set",
          "",
          "[Removed Lines]",
          "1753:                 && $GLOBALS['cfg']['BrowseMIME']) {",
          "1757:                     && !empty($GLOBALS['mime_map'][$meta->name]",
          "1758:                         ['transformation'])) {",
          "1760:                         $GLOBALS['mime_map'][$meta->name]['transformation']);",
          "1762:                     if (file_exists('./libraries/transformations/'",
          "1763:                         . $include_file)) {",
          "1766:                             $GLOBALS['mime_map'][$meta->name]['transformation']);",
          "1770:                         if (function_exists('PMA_transformation_'",
          "1771:                             . $transformfunction_name)) {",
          "1775:                                 (isset($GLOBALS['mime_map'][$meta->name]",
          "1776:                                         ['transformation_options'])",
          "1777:                                     ? $GLOBALS['mime_map'][$meta->name]",
          "1778:                                         ['transformation_options']",
          "1779:                                     : ''));",
          "1780:                             $meta->mimetype     = str_replace(",
          "1782:                                 $GLOBALS['mime_map'][$meta->name]['mimetype']);",
          "",
          "[Added Lines]",
          "1780:                 && $GLOBALS['cfg']['BrowseMIME']",
          "1781:             ) {",
          "1784:                     && !empty($GLOBALS['mime_map'][$meta->name]['transformation'])",
          "1785:                 ) {",
          "1787:                         $GLOBALS['mime_map'][$meta->name]['transformation']",
          "1788:                     );",
          "1789:                     if (file_exists('./libraries/transformations/' . $include_file)) {",
          "1792:                             $GLOBALS['mime_map'][$meta->name]['transformation']",
          "1793:                         );",
          "1797:                         if (function_exists('PMA_transformation_' . $transformfunction_name)) {",
          "1801:                                 isset($GLOBALS['mime_map'][$meta->name]['transformation_options'])",
          "1802:                                 ? $GLOBALS['mime_map'][$meta->name]['transformation_options']",
          "1803:                                 : ''",
          "1804:                             );",
          "1805:                             $meta->mimetype = str_replace(",
          "1807:                                 $GLOBALS['mime_map'][$meta->name]['mimetype']",
          "1808:                             );",
          "",
          "---------------",
          "--- Hunk 43 ---",
          "[Context before]",
          "1810:                 if (! isset($row[$i]) || is_null($row[$i])) {",
          "1814:                 } elseif ($row[$i] != '') {",
          "1816:                     $nowrap = ' nowrap';",
          "1817:                     $where_comparison = ' = ' . $row[$i];",
          "1821:                             $analyzed_sql, $meta, $map, $row[$i],",
          "1822:                             $transform_function, $default_function, $nowrap,",
          "1823:                             $where_comparison, $transform_options,",
          "1825:                 } else {",
          "1829:                 }",
          "1833:             } elseif (stristr($meta->type, 'BLOB')) {",
          "",
          "[Removed Lines]",
          "1811:                     $vertical_display['data'][$row_no][$i] =",
          "1812:                     PMA_buildNullDisplay('right '.$class, $condition_field, $meta,",
          "1813:                         '');",
          "1819:                     $vertical_display['data'][$row_no][$i]     = '<td '",
          "1820:                         . PMA_prepare_row_data('right '.$class, $condition_field,",
          "1824:                             $is_field_truncated);",
          "1826:                     $vertical_display['data'][$row_no][$i]",
          "1827:                         = PMA_buildEmptyDisplay('right '.$class, $condition_field,",
          "1828:                             $meta, '');",
          "",
          "[Added Lines]",
          "1837:                     $vertical_display['data'][$row_no][$i] = PMA_buildNullDisplay(",
          "1838:                         'right '.$class, $condition_field, $meta, ''",
          "1839:                     );",
          "1845:                     $vertical_display['data'][$row_no][$i] = '<td '",
          "1846:                         . PMA_prepare_row_data(",
          "1847:                             'right '.$class, $condition_field,",
          "1851:                             $is_field_truncated",
          "1852:                         );",
          "1854:                     $vertical_display['data'][$row_no][$i] = PMA_buildEmptyDisplay(",
          "1855:                         'right '.$class, $condition_field, $meta, ''",
          "1856:                     );",
          "",
          "---------------",
          "--- Hunk 44 ---",
          "[Context before]",
          "1843:                         $vertical_display['data'][$row_no][$i]",
          "1844:                             = PMA_buildNullDisplay($class, $condition_field, $meta);",
          "1845:                     } else {",
          "1854:                         unset($blobtext);",
          "1855:                     }",
          "",
          "[Removed Lines]",
          "1846:                         $blobtext = PMA_handle_non_printable_contents('BLOB',",
          "1847:                             (isset($row[$i]) ? $row[$i] : ''), $transform_function,",
          "1848:                             $transform_options, $default_function, $meta,",
          "1849:                             $_url_params);",
          "1851:                         $vertical_display['data'][$row_no][$i]",
          "1852:                             = PMA_buildValueDisplay($class, $condition_field,",
          "1853:                                 $blobtext);",
          "",
          "[Added Lines]",
          "1873:                         $blobtext = PMA_handle_non_printable_contents(",
          "1874:                             'BLOB', (isset($row[$i]) ? $row[$i] : ''),",
          "1875:                             $transform_function, $transform_options,",
          "1876:                             $default_function, $meta, $_url_params",
          "1877:                         );",
          "1879:                         $vertical_display['data'][$row_no][$i] = PMA_buildValueDisplay(",
          "1880:                             $class, $condition_field, $blobtext",
          "1881:                         );",
          "",
          "---------------",
          "--- Hunk 45 ---",
          "[Context before]",
          "1864:                         if (PMA_strlen($row[$i]) > $GLOBALS['cfg']['LimitChars']",
          "1868:                             $is_field_truncated = true;",
          "1869:                         }",
          "1877:                         if ($is_field_truncated) {",
          "1878:                             $class .= ' truncated';",
          "1879:                         }",
          "1884:                     } else {",
          "1885:                         $vertical_display['data'][$row_no][$i]",
          "1886:                             = PMA_buildEmptyDisplay($class, $condition_field, $meta);",
          "",
          "[Removed Lines]",
          "1865:                             && $_SESSION['tmp_user_values']['display_text'] == 'P') {",
          "1866:                             $row[$i] = PMA_substr($row[$i], 0,",
          "1867:                                 $GLOBALS['cfg']['LimitChars']) . '...';",
          "1872:                         $row[$i]     = ($default_function != $transform_function",
          "1873:                             ? $transform_function($row[$i], $transform_options,",
          "1874:                                 $meta)",
          "1875:                             : $default_function($row[$i], array(), $meta));",
          "1881:                         $vertical_display['data'][$row_no][$i]",
          "1882:                             = PMA_buildValueDisplay($class, $condition_field,",
          "1883:                                 $row[$i]);",
          "",
          "[Added Lines]",
          "1893:                             && $_SESSION['tmp_user_values']['display_text'] == 'P'",
          "1894:                         ) {",
          "1895:                             $row[$i] = PMA_substr(",
          "1896:                                 $row[$i], 0, $GLOBALS['cfg']['LimitChars']",
          "1897:                             ) . '...';",
          "1902:                         $row[$i] = $default_function != $transform_function",
          "1903:                             ? $transform_function($row[$i], $transform_options, $meta)",
          "1904:                             : $default_function($row[$i], array(), $meta);",
          "1910:                         $vertical_display['data'][$row_no][$i] = PMA_buildValueDisplay(",
          "1911:                             $class, $condition_field, $row[$i]",
          "1912:                         );",
          "",
          "---------------",
          "--- Hunk 46 ---",
          "[Context before]",
          "1904:                             $transform_function, $transform_options,",
          "1905:                             $default_function, $meta",
          "1906:                         );",
          "1914:                         $where_comparison = ' = ' . $row[$i];",
          "",
          "[Removed Lines]",
          "1907:                         $vertical_display['data'][$row_no][$i]",
          "1908:                             = PMA_buildValueDisplay($class, $condition_field,",
          "1909:                                 $geometry_text);",
          "1912:                     } elseif ('WKT'",
          "1913:                         == $_SESSION['tmp_user_values']['geometry_display']) {",
          "",
          "[Added Lines]",
          "1936:                         $vertical_display['data'][$row_no][$i] = PMA_buildValueDisplay(",
          "1937:                             $class, $condition_field, $geometry_text",
          "1938:                         );",
          "1941:                     } elseif ('WKT' == $_SESSION['tmp_user_values']['geometry_display']) {",
          "",
          "---------------",
          "--- Hunk 47 ---",
          "[Context before]",
          "1919:                         if (PMA_strlen($wktval) > $GLOBALS['cfg']['LimitChars']",
          "1920:                             && $_SESSION['tmp_user_values']['display_text'] == 'P'",
          "1921:                         ) {",
          "1924:                             $is_field_truncated = true;",
          "1925:                         }",
          "1927:                         $vertical_display['data'][$row_no][$i] = '<td '",
          "1928:                             . PMA_prepare_row_data(",
          "1935:                     } else {",
          "",
          "[Removed Lines]",
          "1922:                             $wktval = PMA_substr($wktval, 0,",
          "1923:                                 $GLOBALS['cfg']['LimitChars']) . '...';",
          "1929:                             $class, $condition_field, $analyzed_sql, $meta, $map,",
          "1930:                             $wktval, $transform_function, $default_function, '',",
          "1931:                             $where_comparison, $transform_options,",
          "1932:                             $is_field_truncated);",
          "",
          "[Added Lines]",
          "1950:                             $wktval = PMA_substr(",
          "1951:                                 $wktval, 0, $GLOBALS['cfg']['LimitChars']",
          "1952:                             ) . '...';",
          "1958:                                 $class, $condition_field, $analyzed_sql, $meta, $map,",
          "1959:                                 $wktval, $transform_function, $default_function, '',",
          "1960:                                 $where_comparison, $transform_options,",
          "1961:                                 $is_field_truncated",
          "1962:                             );",
          "",
          "---------------",
          "--- Hunk 48 ---",
          "[Context before]",
          "1942:                                 $wkbval = PMA_substr(bin2hex($row[$i]), 8);",
          "1943:                             } else {",
          "1944:                                 $wkbval = htmlspecialchars(",
          "1946:                             }",
          "1948:                             if (PMA_strlen($wkbval) > $GLOBALS['cfg']['LimitChars']",
          "1951:                             ) {",
          "1954:                                 $is_field_truncated = true;",
          "1955:                             }",
          "1957:                             $vertical_display['data'][$row_no][$i] = '<td '",
          "1959:                                     $analyzed_sql, $meta, $map, $wkbval,",
          "1960:                                     $transform_function, $default_function, '',",
          "1961:                                     $where_comparison, $transform_options,",
          "1963:                         } else {",
          "1964:                             $wkbval = PMA_handle_non_printable_contents(",
          "1965:                                 'BINARY', $row[$i], $transform_function,",
          "1966:                                 $transform_options, $default_function, $meta,",
          "1968:                             $vertical_display['data'][$row_no][$i]",
          "1971:                         }",
          "1972:                     }",
          "1973:                 } else {",
          "",
          "[Removed Lines]",
          "1945:                                     PMA_replace_binary_contents($row[$i]));",
          "1949:                                 && $_SESSION['tmp_user_values']['display_text']",
          "1950:                                     == 'P'",
          "1952:                                 $wkbval = PMA_substr($wkbval, 0,",
          "1953:                                     $GLOBALS['cfg']['LimitChars']) . '...';",
          "1958:                                 . PMA_prepare_row_data($class, $condition_field,",
          "1962:                                     $is_field_truncated);",
          "1967:                                 $_url_params);",
          "1969:                                 = PMA_buildValueDisplay($class, $condition_field,",
          "1970:                                     $wkbval);",
          "",
          "[Added Lines]",
          "1975:                                     PMA_replace_binary_contents($row[$i])",
          "1976:                                 );",
          "1980:                                 && $_SESSION['tmp_user_values']['display_text'] == 'P'",
          "1982:                                 $wkbval = PMA_substr(",
          "1983:                                     $wkbval, 0, $GLOBALS['cfg']['LimitChars']",
          "1984:                                 ) . '...';",
          "1989:                                 . PMA_prepare_row_data(",
          "1990:                                     $class, $condition_field,",
          "1994:                                     $is_field_truncated",
          "1995:                                 );",
          "2000:                                 $_url_params",
          "2001:                             );",
          "2003:                                 = PMA_buildValueDisplay($class, $condition_field, $wkbval);",
          "",
          "---------------",
          "--- Hunk 49 ---",
          "[Context before]",
          "1989:                     if (PMA_strlen($row[$i]) > $GLOBALS['cfg']['LimitChars']",
          "1990:                         && $_SESSION['tmp_user_values']['display_text'] == 'P'",
          "1994:                         $is_field_truncated = true;",
          "1995:                     }",
          "",
          "[Removed Lines]",
          "1991:                         && !strpos($transform_function, 'link') === true) {",
          "1992:                         $row[$i] = PMA_substr($row[$i], 0,",
          "1993:                             $GLOBALS['cfg']['LimitChars']) . '...';",
          "",
          "[Added Lines]",
          "2024:                         && !strpos($transform_function, 'link') === true",
          "2025:                     ) {",
          "2026:                         $row[$i] = PMA_substr(",
          "2027:                             $row[$i], 0, $GLOBALS['cfg']['LimitChars']",
          "2028:                         ) . '...';",
          "",
          "---------------",
          "--- Hunk 50 ---",
          "[Context before]",
          "1999:                     $formatted = false;",
          "2000:                     if (isset($meta->_type) && $meta->_type === MYSQLI_TYPE_BIT) {",
          "2001:                         $row[$i] = PMA_printable_bit_value(",
          "2006:                     } elseif (stristr($field_flags, 'BINARY')",
          "2007:                         && $meta->type == 'string'",
          "2010:                         if ($_SESSION['tmp_user_values']['display_binary']) {",
          "2013:                             if ($_SESSION['tmp_user_values']['display_binary_as_hex']",
          "2015:                                 $row[$i] = bin2hex($row[$i]);",
          "2016:                             } else {",
          "2017:                                 $row[$i] = htmlspecialchars(",
          "2019:                             }",
          "2020:                         } else {",
          "2026:                             $formatted = true;",
          "2027:                         }",
          "2028:                     }",
          "2030:                     if ($formatted) {",
          "2034:                     } else {",
          "2036:                         $function_nowrap = $transform_function . '_nowrap';",
          "",
          "[Removed Lines]",
          "2002:                             $row[$i], $meta->length);",
          "2008:                         && !(isset($GLOBALS['is_analyse'])",
          "2009:                             && $GLOBALS['is_analyse'])) {",
          "2014:                                 && PMA_contains_nonprintable_ascii($row[$i])) {",
          "2018:                                     PMA_replace_binary_contents($row[$i]));",
          "2023:                             $row[$i] = PMA_handle_non_printable_contents('BINARY',",
          "2024:                                 $row[$i], $transform_function, $transform_options,",
          "2025:                                 $default_function, $meta, $_url_params);",
          "2031:                         $vertical_display['data'][$row_no][$i]",
          "2032:                             = PMA_buildValueDisplay($class, $condition_field,",
          "2033:                                 $row[$i]);",
          "",
          "[Added Lines]",
          "2037:                             $row[$i], $meta->length",
          "2038:                         );",
          "2044:                         && !(isset($GLOBALS['is_analyse']) && $GLOBALS['is_analyse'])",
          "2045:                     ) {",
          "2050:                                 && PMA_contains_nonprintable_ascii($row[$i])",
          "2051:                             ) {",
          "2055:                                     PMA_replace_binary_contents($row[$i])",
          "2056:                                 );",
          "2061:                             $row[$i] = PMA_handle_non_printable_contents(",
          "2062:                                 'BINARY', $row[$i], $transform_function,",
          "2063:                                 $transform_options, $default_function,",
          "2064:                                 $meta, $_url_params",
          "2065:                             );",
          "2071:                         $vertical_display['data'][$row_no][$i] = PMA_buildValueDisplay(",
          "2072:                             $class, $condition_field, $row[$i]",
          "2073:                         );",
          "",
          "---------------",
          "--- Hunk 51 ---",
          "[Context before]",
          "2047:                         $where_comparison = ' = \\'' . PMA_sqlAddSlashes($row[$i])",
          "2048:                             . '\\'';",
          "2049:                         $vertical_display['data'][$row_no][$i]     = '<td '",
          "2051:                                 $analyzed_sql, $meta, $map, $row[$i],",
          "2052:                                 $transform_function, $default_function, $nowrap,",
          "2053:                                 $where_comparison, $transform_options,",
          "2055:                     }",
          "2056:                 } else {",
          "2057:                     $vertical_display['data'][$row_no][$i]",
          "",
          "[Removed Lines]",
          "2050:                             . PMA_prepare_row_data($class, $condition_field,",
          "2054:                                 $is_field_truncated);",
          "",
          "[Added Lines]",
          "2090:                             . PMA_prepare_row_data(",
          "2091:                                 $class, $condition_field,",
          "2095:                                 $is_field_truncated",
          "2096:                             );",
          "",
          "---------------",
          "--- Hunk 52 ---",
          "[Context before]",
          "2063:             if ($_SESSION['tmp_user_values']['disp_direction'] == 'horizontal'",
          "2066:             ) {",
          "2067:                 echo $vertical_display['data'][$row_no][$i];",
          "2068:             }",
          "",
          "[Removed Lines]",
          "2064:                 || $_SESSION['tmp_user_values']['disp_direction']",
          "2065:                     == 'horizontalflipped'",
          "",
          "[Added Lines]",
          "2106:                 || $_SESSION['tmp_user_values']['disp_direction'] == 'horizontalflipped'",
          "",
          "---------------",
          "--- Hunk 53 ---",
          "[Context before]",
          "2080:         if (($GLOBALS['cfg']['RowActionLinks'] == 'right'",
          "2082:             && ($_SESSION['tmp_user_values']['disp_direction'] == 'horizontal'",
          "2085:         ) {",
          "2086:             if (! isset($js_conf)) {",
          "2087:                 $js_conf = '';",
          "2088:             }",
          "2090:                 $row_no, $where_clause, $where_clause_html, $condition_array,",
          "2091:                 $del_query, 'r', $edit_url, $copy_url, $edit_anchor_class, $edit_str,",
          "2093:         } // end if (3)",
          "2095:         if ($_SESSION['tmp_user_values']['disp_direction'] == 'horizontal'",
          "",
          "[Removed Lines]",
          "2081:                 || $GLOBALS['cfg']['RowActionLinks'] == 'both')",
          "2083:                 || $_SESSION['tmp_user_values']['disp_direction']",
          "2084:                     == 'horizontalflipped')",
          "2089:             echo PMA_generateCheckboxAndLinks('right', $del_url, $is_display,",
          "2092:                 $copy_str, $del_str, $js_conf);",
          "",
          "[Added Lines]",
          "2122:             || $GLOBALS['cfg']['RowActionLinks'] == 'both')",
          "2124:             || $_SESSION['tmp_user_values']['disp_direction'] == 'horizontalflipped')",
          "2129:             echo PMA_generateCheckboxAndLinks(",
          "2130:                 'right', $del_url, $is_display,",
          "2133:                 $copy_str, $del_str, $js_conf",
          "2134:             );",
          "",
          "---------------",
          "--- Hunk 54 ---",
          "[Context before]",
          "2120:             $vertical_display['row_delete'][$row_no] .= PMA_generateCheckboxForMulti(",
          "2121:                 $del_url, $is_display, $row_no, $where_clause_html, $condition_array,",
          "2122:                 $del_query, '[%_PMA_CHECKBOX_DIR_%]',",
          "2124:         } else {",
          "2125:             unset($vertical_display['row_delete'][$row_no]);",
          "2126:         }",
          "2128:         if (isset($edit_url)) {",
          "2130:                 $alternating_color_class . ' ' . $edit_anchor_class",
          "2132:         } else {",
          "2133:             unset($vertical_display['edit'][$row_no]);",
          "2134:         }",
          "2136:         if (isset($copy_url)) {",
          "2140:         } else {",
          "2141:             unset($vertical_display['copy'][$row_no]);",
          "2142:         }",
          "",
          "[Removed Lines]",
          "2123:                 $alternating_color_class . $vertical_class);",
          "2129:             $vertical_display['edit'][$row_no]   .= PMA_generateEditLink($edit_url,",
          "2131:                 . $vertical_class, $edit_str, $where_clause, $where_clause_html);",
          "2137:             $vertical_display['copy'][$row_no]   .= PMA_generateCopyLink($copy_url,",
          "2138:                 $copy_str, $where_clause, $where_clause_html,",
          "2139:                 $alternating_color_class . $vertical_class);",
          "",
          "[Added Lines]",
          "2165:                 $alternating_color_class . $vertical_class",
          "2166:             );",
          "2172:             $vertical_display['edit'][$row_no] .= PMA_generateEditLink(",
          "2173:                 $edit_url,",
          "2175:                 . $vertical_class, $edit_str,",
          "2176:                 $where_clause,",
          "2177:                 $where_clause_html",
          "2178:             );",
          "2184:             $vertical_display['copy'][$row_no] .= PMA_generateCopyLink(",
          "2185:                 $copy_url, $copy_str, $where_clause, $where_clause_html,",
          "2186:                 $alternating_color_class . $vertical_class",
          "2187:             );",
          "",
          "---------------",
          "--- Hunk 55 ---",
          "[Context before]",
          "2145:             if (! isset($js_conf)) {",
          "2146:                 $js_conf = '';",
          "2147:             }",
          "2150:         } else {",
          "2151:             unset($vertical_display['delete'][$row_no]);",
          "2152:         }",
          "2154:         echo (($_SESSION['tmp_user_values']['disp_direction'] == 'horizontal'",
          "2157:             ? \"\\n\"",
          "2158:             : '');",
          "2159:         $row_no++;",
          "",
          "[Removed Lines]",
          "2148:             $vertical_display['delete'][$row_no] .= PMA_generateDeleteLink($del_url,",
          "2149:                 $del_str, $js_conf, $alternating_color_class . $vertical_class);",
          "2155:                 || $_SESSION['tmp_user_values']['disp_direction']",
          "2156:                     == 'horizontalflipped')",
          "",
          "[Added Lines]",
          "2196:             $vertical_display['delete'][$row_no] .= PMA_generateDeleteLink(",
          "2197:                 $del_url, $del_str, $js_conf,",
          "2198:                 $alternating_color_class . $vertical_class",
          "2199:             );",
          "2205:             || $_SESSION['tmp_user_values']['disp_direction'] == 'horizontalflipped')",
          "",
          "---------------",
          "--- Hunk 56 ---",
          "[Context before]",
          "2184:     if ($GLOBALS['cfg']['RowActionLinks'] != 'right'",
          "2185:         && is_array($vertical_display['row_delete'])",
          "2186:         && (count($vertical_display['row_delete']) > 0",
          "2188:     ) {",
          "2189:         echo '<tr>' . \"\\n\";",
          "2190:         if ($GLOBALS['cfg']['RowActionLinks'] == 'none') {",
          "",
          "[Removed Lines]",
          "2187:             || !empty($vertical_display['textbtn']))",
          "",
          "[Added Lines]",
          "2236:         || !empty($vertical_display['textbtn']))",
          "",
          "---------------",
          "--- Hunk 57 ---",
          "[Context before]",
          "2197:         foreach ($vertical_display['row_delete'] as $val) {",
          "2198:             if (($cell_displayed != 0)",
          "2199:                 && ($_SESSION['tmp_user_values']['repeat_cells'] != 0)",
          "2202:                 echo '<th' .",
          "2205:                         ? ' rowspan=\"4\"'",
          "2208:             }",
          "2209:             echo str_replace('[%_PMA_CHECKBOX_DIR_%]', '_left', $val);",
          "2210:             $cell_displayed++;",
          "",
          "[Removed Lines]",
          "2200:                 && !($cell_displayed % $_SESSION['tmp_user_values']",
          "2201:                     ['repeat_cells'])) {",
          "2203:                      (($is_display['edit_lnk'] != 'nn'",
          "2204:                             && $is_display['del_lnk'] != 'nn')",
          "2206:                         : '') .",
          "2207:                      '></th>' . \"\\n\";",
          "",
          "[Added Lines]",
          "2249:                 && !($cell_displayed % $_SESSION['tmp_user_values']['repeat_cells'])",
          "2250:             ) {",
          "2252:                     (($is_display['edit_lnk'] != 'nn' && $is_display['del_lnk'] != 'nn')",
          "2254:                         : '')",
          "2255:                     . '></th>' . \"\\n\";",
          "",
          "---------------",
          "--- Hunk 58 ---",
          "[Context before]",
          "2216:     if (($GLOBALS['cfg']['RowActionLinks'] == 'left'",
          "2218:         && is_array($vertical_display['edit'])",
          "2219:         && (count($vertical_display['edit']) > 0",
          "2221:     ) {",
          "2222:         echo '<tr>' . \"\\n\";",
          "2223:         if (! is_array($vertical_display['row_delete'])) {",
          "",
          "[Removed Lines]",
          "2217:             || $GLOBALS['cfg']['RowActionLinks'] == 'both')",
          "2220:             || !empty($vertical_display['textbtn']))",
          "",
          "[Added Lines]",
          "2265:         || $GLOBALS['cfg']['RowActionLinks'] == 'both')",
          "2268:         || !empty($vertical_display['textbtn']))",
          "",
          "---------------",
          "--- Hunk 59 ---",
          "[Context before]",
          "2233:     if (($GLOBALS['cfg']['RowActionLinks'] == 'left'",
          "2235:         && is_array($vertical_display['copy'])",
          "2236:         && (count($vertical_display['copy']) > 0",
          "2238:     ) {",
          "2239:         echo '<tr>' . \"\\n\";",
          "2240:         if (! is_array($vertical_display['row_delete'])) {",
          "",
          "[Removed Lines]",
          "2234:             || $GLOBALS['cfg']['RowActionLinks'] == 'both')",
          "2237:             || !empty($vertical_display['textbtn']))",
          "",
          "[Added Lines]",
          "2282:         || $GLOBALS['cfg']['RowActionLinks'] == 'both')",
          "2285:         || !empty($vertical_display['textbtn']))",
          "",
          "---------------",
          "--- Hunk 60 ---",
          "[Context before]",
          "2250:     if (($GLOBALS['cfg']['RowActionLinks'] == 'left'",
          "2252:         && is_array($vertical_display['delete'])",
          "2253:         && (count($vertical_display['delete']) > 0",
          "2255:     ) {",
          "2256:         echo '<tr>' . \"\\n\";",
          "2257:         if (! is_array($vertical_display['edit'])",
          "2259:             echo $vertical_display['textbtn'];",
          "2260:         }",
          "2261:         foreach ($vertical_display['delete'] as $val) {",
          "",
          "[Removed Lines]",
          "2251:             || $GLOBALS['cfg']['RowActionLinks'] == 'both')",
          "2254:             || !empty($vertical_display['textbtn']))",
          "2258:             && ! is_array($vertical_display['row_delete'])) {",
          "",
          "[Added Lines]",
          "2299:         || $GLOBALS['cfg']['RowActionLinks'] == 'both')",
          "2302:         || !empty($vertical_display['textbtn']))",
          "2306:             && ! is_array($vertical_display['row_delete'])",
          "2307:         ) {",
          "",
          "---------------",
          "--- Hunk 61 ---",
          "[Context before]",
          "2287:         foreach ($vertical_display['rowdata'][$key] as $subval) {",
          "2288:             if (($cell_displayed != 0)",
          "2289:                 && ($_SESSION['tmp_user_values']['repeat_cells'] != 0)",
          "2292:                 echo $val;",
          "2293:             }",
          "",
          "[Removed Lines]",
          "2290:                 && !($cell_displayed % $_SESSION['tmp_user_values']",
          "2291:                     ['repeat_cells'])) {",
          "",
          "[Added Lines]",
          "2339:                 && !($cell_displayed % $_SESSION['tmp_user_values']['repeat_cells'])",
          "2340:             ) {",
          "",
          "---------------",
          "--- Hunk 62 ---",
          "[Context before]",
          "2303:     if (($GLOBALS['cfg']['RowActionLinks'] == 'right'",
          "2305:         && is_array($vertical_display['row_delete'])",
          "2306:         && (count($vertical_display['row_delete']) > 0",
          "2308:     ) {",
          "2309:         echo '<tr>' . \"\\n\";",
          "2310:         echo $vertical_display['textbtn'];",
          "",
          "[Removed Lines]",
          "2304:             || $GLOBALS['cfg']['RowActionLinks'] == 'both')",
          "2307:             || !empty($vertical_display['textbtn']))",
          "",
          "[Added Lines]",
          "2353:         || $GLOBALS['cfg']['RowActionLinks'] == 'both')",
          "2356:         || !empty($vertical_display['textbtn']))",
          "",
          "---------------",
          "--- Hunk 63 ---",
          "[Context before]",
          "2312:         foreach ($vertical_display['row_delete'] as $val) {",
          "2313:             if (($cell_displayed != 0)",
          "2314:                 && ($_SESSION['tmp_user_values']['repeat_cells'] != 0)",
          "2317:                 echo '<th' .",
          "2321:             }",
          "2323:             echo str_replace('[%_PMA_CHECKBOX_DIR_%]', '_right', $val);",
          "",
          "[Removed Lines]",
          "2315:                 && !($cell_displayed % $_SESSION['tmp_user_values']",
          "2316:                     ['repeat_cells'])) {",
          "2318:                      (($is_display['edit_lnk'] != 'nn'",
          "2319:                         && $is_display['del_lnk'] != 'nn') ? ' rowspan=\"4\"' : '') .",
          "2320:                      '></th>' . \"\\n\";",
          "",
          "[Added Lines]",
          "2364:                 && !($cell_displayed % $_SESSION['tmp_user_values']['repeat_cells'])",
          "2365:             ) {",
          "2367:                     (($is_display['edit_lnk'] != 'nn'",
          "2368:                         && $is_display['del_lnk'] != 'nn') ? ' rowspan=\"4\"' : '')",
          "2369:                     . '></th>' . \"\\n\";",
          "",
          "---------------",
          "--- Hunk 64 ---",
          "[Context before]",
          "2330:     if (($GLOBALS['cfg']['RowActionLinks'] == 'right'",
          "2332:         && is_array($vertical_display['edit'])",
          "2333:         && (count($vertical_display['edit']) > 0",
          "2335:     ) {",
          "2336:         echo '<tr>' . \"\\n\";",
          "2337:         if (! is_array($vertical_display['row_delete'])) {",
          "",
          "[Removed Lines]",
          "2331:             || $GLOBALS['cfg']['RowActionLinks'] == 'both')",
          "2334:             || !empty($vertical_display['textbtn']))",
          "",
          "[Added Lines]",
          "2380:         || $GLOBALS['cfg']['RowActionLinks'] == 'both')",
          "2383:         || !empty($vertical_display['textbtn']))",
          "",
          "---------------",
          "--- Hunk 65 ---",
          "[Context before]",
          "2347:     if (($GLOBALS['cfg']['RowActionLinks'] == 'right'",
          "2349:         && is_array($vertical_display['copy'])",
          "2350:         && (count($vertical_display['copy']) > 0",
          "2352:     ) {",
          "2353:         echo '<tr>' . \"\\n\";",
          "2354:         if (! is_array($vertical_display['row_delete'])) {",
          "",
          "[Removed Lines]",
          "2348:             || $GLOBALS['cfg']['RowActionLinks'] == 'both')",
          "2351:             || !empty($vertical_display['textbtn']))",
          "",
          "[Added Lines]",
          "2397:         || $GLOBALS['cfg']['RowActionLinks'] == 'both')",
          "2400:         || !empty($vertical_display['textbtn']))",
          "",
          "---------------",
          "--- Hunk 66 ---",
          "[Context before]",
          "2364:     if (($GLOBALS['cfg']['RowActionLinks'] == 'right'",
          "2366:         && is_array($vertical_display['delete'])",
          "2367:         && (count($vertical_display['delete']) > 0",
          "2369:     ) {",
          "2370:         echo '<tr>' . \"\\n\";",
          "2371:         if (! is_array($vertical_display['edit'])",
          "2373:             echo $vertical_display['textbtn'];",
          "2374:         }",
          "2375:         foreach ($vertical_display['delete'] as $val) {",
          "",
          "[Removed Lines]",
          "2365:             || $GLOBALS['cfg']['RowActionLinks'] == 'both')",
          "2368:             || !empty($vertical_display['textbtn']))",
          "2372:             && ! is_array($vertical_display['row_delete'])) {",
          "",
          "[Added Lines]",
          "2414:         || $GLOBALS['cfg']['RowActionLinks'] == 'both')",
          "2417:         || !empty($vertical_display['textbtn']))",
          "2421:             && ! is_array($vertical_display['row_delete'])",
          "2422:         ) {",
          "",
          "---------------",
          "--- Hunk 67 ---",
          "[Context before]",
          "2399:     $_SESSION['tmp_user_values']['query'][$sql_md5]['sql'] = $GLOBALS['sql_query'];",
          "2403:         $_SESSION['tmp_user_values']['query'][$sql_md5]['disp_direction']",
          "2404:             = $_REQUEST['disp_direction'];",
          "2405:         unset($_REQUEST['disp_direction']);",
          "2408:         $_SESSION['tmp_user_values']['query'][$sql_md5]['disp_direction']",
          "2410:     }",
          "2412:     if (PMA_isValid($_REQUEST['repeat_cells'], 'numeric')) {",
          "2413:         $_SESSION['tmp_user_values']['query'][$sql_md5]['repeat_cells']",
          "2415:         unset($_REQUEST['repeat_cells']);",
          "2418:         $_SESSION['tmp_user_values']['query'][$sql_md5]['repeat_cells']",
          "2420:     }",
          "",
          "[Removed Lines]",
          "2401:     if (PMA_isValid($_REQUEST['disp_direction'],",
          "2402:         array('horizontal', 'vertical', 'horizontalflipped'))) {",
          "2406:     } elseif (empty($_SESSION['tmp_user_values']['query'][$sql_md5]",
          "2407:             ['disp_direction'])) {",
          "2409:         = $GLOBALS['cfg']['DefaultDisplay'];",
          "2414:         = $_REQUEST['repeat_cells'];",
          "2416:     } elseif (empty($_SESSION['tmp_user_values']['query'][$sql_md5]",
          "2417:             ['repeat_cells'])) {",
          "2419:         = $GLOBALS['cfg']['RepeatCells'];",
          "",
          "[Added Lines]",
          "2451:     $valid_disp_dir = PMA_isValid(",
          "2452:         $_REQUEST['disp_direction'],",
          "2453:         array('horizontal', 'vertical', 'horizontalflipped')",
          "2454:     );",
          "2455:     if ($valid_disp_dir) {",
          "2459:     } elseif (empty($_SESSION['tmp_user_values']['query'][$sql_md5]['disp_direction'])) {",
          "2461:             = $GLOBALS['cfg']['DefaultDisplay'];",
          "2466:             = $_REQUEST['repeat_cells'];",
          "2468:     } elseif (empty($_SESSION['tmp_user_values']['query'][$sql_md5]['repeat_cells'])) {",
          "2470:             = $GLOBALS['cfg']['RepeatCells'];",
          "",
          "---------------",
          "--- Hunk 68 ---",
          "[Context before]",
          "2430:         unset($_REQUEST['session_max_rows']);",
          "2431:     } elseif (empty($_SESSION['tmp_user_values']['query'][$sql_md5]['max_rows'])) {",
          "2432:         $_SESSION['tmp_user_values']['query'][$sql_md5]['max_rows']",
          "2434:     }",
          "2436:     if (PMA_isValid($_REQUEST['pos'], 'numeric')) {",
          "",
          "[Removed Lines]",
          "2433:                  = $GLOBALS['cfg']['MaxRows'];",
          "",
          "[Added Lines]",
          "2484:             = $GLOBALS['cfg']['MaxRows'];",
          "",
          "---------------",
          "--- Hunk 69 ---",
          "[Context before]",
          "2443:     if (PMA_isValid($_REQUEST['display_text'], array('P', 'F'))) {",
          "2444:         $_SESSION['tmp_user_values']['query'][$sql_md5]['display_text']",
          "2446:         unset($_REQUEST['display_text']);",
          "2449:         $_SESSION['tmp_user_values']['query'][$sql_md5]['display_text'] = 'P';",
          "2450:     }",
          "",
          "[Removed Lines]",
          "2445:                 = $_REQUEST['display_text'];",
          "2447:     } elseif (empty($_SESSION['tmp_user_values']['query'][$sql_md5]",
          "2448:             ['display_text'])) {",
          "",
          "[Added Lines]",
          "2496:             = $_REQUEST['display_text'];",
          "2498:     } elseif (empty($_SESSION['tmp_user_values']['query'][$sql_md5]['display_text'])) {",
          "",
          "---------------",
          "--- Hunk 70 ---",
          "[Context before]",
          "2453:         $_SESSION['tmp_user_values']['query'][$sql_md5]['relational_display']",
          "2454:             = $_REQUEST['relational_display'];",
          "2455:         unset($_REQUEST['relational_display']);",
          "2458:         $_SESSION['tmp_user_values']['query'][$sql_md5]['relational_display'] = 'K';",
          "2459:     }",
          "2461:     if (PMA_isValid($_REQUEST['geometry_display'], array('WKT', 'WKB', 'GEOM'))) {",
          "2464:         unset($_REQUEST['geometry_display']);",
          "2467:         $_SESSION['tmp_user_values']['query'][$sql_md5]['geometry_display'] = 'GEOM';",
          "2468:     }",
          "",
          "[Removed Lines]",
          "2456:     } elseif (empty($_SESSION['tmp_user_values']['query'][$sql_md5]",
          "2457:             ['relational_display'])) {",
          "2462:         $_SESSION['tmp_user_values']['query'][$sql_md5]['geometry_display'] =",
          "2463:             $_REQUEST['geometry_display'];",
          "2465:     } elseif (empty($_SESSION['tmp_user_values']['query'][$sql_md5]",
          "2466:             ['geometry_display'])) {",
          "",
          "[Added Lines]",
          "2506:     } elseif (empty($_SESSION['tmp_user_values']['query'][$sql_md5]['relational_display'])) {",
          "2511:         $_SESSION['tmp_user_values']['query'][$sql_md5]['geometry_display']",
          "2512:             = $_REQUEST['geometry_display'];",
          "2514:     } elseif (empty($_SESSION['tmp_user_values']['query'][$sql_md5]['geometry_display'])) {",
          "",
          "---------------",
          "--- Hunk 71 ---",
          "[Context before]",
          "2488:         unset($_REQUEST['display_binary_as_hex']);",
          "2489:     } elseif (isset($_REQUEST['display_options_form'])) {",
          "2493:     } elseif (isset($_REQUEST['full_text_button'])) {",
          "2495:     } else {",
          "2497:         if (isset($GLOBALS['cfg']['DisplayBinaryAsHex'])",
          "2499:             $_SESSION['tmp_user_values']['query'][$sql_md5]['display_binary_as_hex']",
          "2500:                 = true;",
          "2501:         }",
          "",
          "[Removed Lines]",
          "2491:         unset($_SESSION['tmp_user_values']['query'][$sql_md5]",
          "2492:             ['display_binary_as_hex']);",
          "2498:             && true === $GLOBALS['cfg']['DisplayBinaryAsHex']) {",
          "",
          "[Added Lines]",
          "2539:         unset($_SESSION['tmp_user_values']['query'][$sql_md5]['display_binary_as_hex']);",
          "2545:             && true === $GLOBALS['cfg']['DisplayBinaryAsHex']",
          "2546:         ) {",
          "",
          "---------------",
          "--- Hunk 72 ---",
          "[Context before]",
          "2515:         unset($_REQUEST['hide_transformation']);",
          "2516:     } elseif (isset($_REQUEST['display_options_form'])) {",
          "2520:     }",
          "",
          "[Removed Lines]",
          "2518:         unset($_SESSION['tmp_user_values']['query'][$sql_md5]",
          "2519:             ['hide_transformation']);",
          "",
          "[Added Lines]",
          "2566:         unset($_SESSION['tmp_user_values']['query'][$sql_md5]['hide_transformation']);",
          "",
          "---------------",
          "--- Hunk 73 ---",
          "[Context before]",
          "2544:         ? true",
          "2545:         : false;",
          "2546:     $_SESSION['tmp_user_values']['display_binary_as_hex']",
          "2549:         ? true",
          "2550:         : false;",
          "2551:     $_SESSION['tmp_user_values']['display_blob']",
          "",
          "[Removed Lines]",
          "2547:         = isset($_SESSION['tmp_user_values']['query'][$sql_md5]",
          "2548:             ['display_binary_as_hex'])",
          "",
          "[Added Lines]",
          "2594:         = isset($_SESSION['tmp_user_values']['query'][$sql_md5]['display_binary_as_hex'])",
          "",
          "---------------",
          "--- Hunk 74 ---",
          "[Context before]",
          "2553:         ? true",
          "2554:         : false;",
          "2555:     $_SESSION['tmp_user_values']['hide_transformation']",
          "2558:         ? true",
          "2559:         : false;",
          "2560:     $_SESSION['tmp_user_values']['pos']",
          "",
          "[Removed Lines]",
          "2556:         = isset($_SESSION['tmp_user_values']['query'][$sql_md5]",
          "2557:             ['hide_transformation'])",
          "",
          "[Added Lines]",
          "2602:         = isset($_SESSION['tmp_user_values']['query'][$sql_md5]['hide_transformation'])",
          "",
          "---------------",
          "--- Hunk 75 ---",
          "[Context before]",
          "2623:         && ! isset($analyzed_sql[0]['queryflags']['union'])",
          "2624:         && ! isset($analyzed_sql[0]['table_ref'][1]['table_name'])",
          "2625:         && (empty($analyzed_sql[0]['where_clause'])",
          "2627:     ) {",
          "2629:         $pre_count = '~';",
          "2632:     } else {",
          "2633:         $pre_count = '';",
          "2634:         $after_count = '';",
          "",
          "[Removed Lines]",
          "2626:             || $analyzed_sql[0]['where_clause'] == '1 ')",
          "2630:         $after_count = PMA_showHint(PMA_sanitize(__(",
          "2631:             'May be approximate. See [a@./Documentation.html#faq3_11@Documentation]FAQ 3.11[/a]')));",
          "",
          "[Added Lines]",
          "2671:         || $analyzed_sql[0]['where_clause'] == '1 ')",
          "2675:         $after_count = PMA_showHint(",
          "2676:             PMA_sanitize(",
          "2677:                 __('May be approximate. See [a@./Documentation.html#faq3_11@Documentation]FAQ 3.11[/a]')",
          "2678:             )",
          "2679:         );",
          "",
          "---------------",
          "--- Hunk 76 ---",
          "[Context before]",
          "2664:     if (! empty($analyzed_sql[0]['order_by_clause'])) {",
          "",
          "[Removed Lines]",
          "2665:         $sort_expression = trim(str_replace('  ', ' ',",
          "2666:             $analyzed_sql[0]['order_by_clause']));",
          "",
          "[Added Lines]",
          "2713:         $sort_expression = trim(",
          "2714:             str_replace('  ', ' ', $analyzed_sql[0]['order_by_clause'])",
          "2715:         );",
          "",
          "---------------",
          "--- Hunk 77 ---",
          "[Context before]",
          "2710:             if (stristr($meta->type, 'BLOB') || $meta->type == 'geometry') {",
          "2711:                 $column_for_first_row = PMA_handle_non_printable_contents(",
          "2712:                     $meta->type, $row[$sorted_column_index], $transform_function,",
          "2714:             } else {",
          "2715:                 $column_for_first_row = $row[$sorted_column_index];",
          "2716:             }",
          "2720:             PMA_DBI_data_seek($dt_result, $num_rows - 1);",
          "2721:             $row = PMA_DBI_fetch_row($dt_result);",
          "2723:             $meta = $fields_meta[$sorted_column_index];",
          "2724:             if (stristr($meta->type, 'BLOB') || $meta->type == 'geometry') {",
          "2728:             } else {",
          "2729:                 $column_for_last_row = $row[$sorted_column_index];",
          "2730:             }",
          "2734:             PMA_DBI_data_seek($dt_result, 0);",
          "",
          "[Removed Lines]",
          "2713:                     $transform_options, $default_function, $meta, null);",
          "2717:             $column_for_first_row = strtoupper(substr($column_for_first_row, 0,",
          "2718:                 $GLOBALS['cfg']['LimitChars']));",
          "2725:                 $column_for_last_row = PMA_handle_non_printable_contents($meta->type,",
          "2726:                     $row[$sorted_column_index], $transform_function,",
          "2727:                     $transform_options, $default_function, $meta, null);",
          "2731:             $column_for_last_row = strtoupper(substr($column_for_last_row, 0,",
          "2732:                 $GLOBALS['cfg']['LimitChars']));",
          "",
          "[Added Lines]",
          "2762:                     $transform_options, $default_function, $meta, null",
          "2763:                 );",
          "2767:             $column_for_first_row = strtoupper(",
          "2768:                 substr($column_for_first_row, 0, $GLOBALS['cfg']['LimitChars'])",
          "2769:             );",
          "2776:                 $column_for_last_row = PMA_handle_non_printable_contents(",
          "2777:                     $meta->type, $row[$sorted_column_index], $transform_function,",
          "2778:                     $transform_options, $default_function, $meta, null",
          "2779:                 );",
          "2783:             $column_for_last_row = strtoupper(",
          "2784:                 substr($column_for_last_row, 0, $GLOBALS['cfg']['LimitChars'])",
          "2785:             );",
          "",
          "---------------",
          "--- Hunk 78 ---",
          "[Context before]",
          "2772:         if (PMA_Table::isView($db, $table)",
          "2773:             && $total == $GLOBALS['cfg']['MaxExactCountViews']",
          "2774:         ) {",
          "2777:             $message->addParam('[a@./Documentation.html#cfg_MaxExactCount@_blank]');",
          "2778:             $message->addParam('[/a]');",
          "2779:             $message_view_warning = PMA_showHint($message);",
          "",
          "[Removed Lines]",
          "2775:             $message = PMA_Message::notice(__(",
          "2776:                 'This view has at least this number of rows. Please refer to %sdocumentation%s.'));",
          "",
          "[Added Lines]",
          "2828:             $message = PMA_Message::notice(",
          "2829:                 __('This view has at least this number of rows. Please refer to %sdocumentation%s.')",
          "2830:             );",
          "",
          "---------------",
          "--- Hunk 79 ---",
          "[Context before]",
          "2810:         PMA_showMessage($message, $sql_query, 'success');",
          "2812:     } elseif (! isset($GLOBALS['printview']) || $GLOBALS['printview'] != '1') {",
          "2815:     }",
          "",
          "[Removed Lines]",
          "2813:         PMA_showMessage(__('Your SQL query has been executed successfully'),",
          "2814:             $sql_query, 'success');",
          "",
          "[Added Lines]",
          "2867:         PMA_showMessage(",
          "2868:             __('Your SQL query has been executed successfully'),",
          "2869:             $sql_query, 'success'",
          "2870:         );",
          "",
          "---------------",
          "--- Hunk 80 ---",
          "[Context before]",
          "2829:     }",
          "2831:     if ($is_display['nav_bar'] == '1' && empty($analyzed_sql[0]['limit_clause'])) {",
          "2834:         echo \"\\n\";",
          "2835:     } elseif (! isset($GLOBALS['printview']) || $GLOBALS['printview'] != '1') {",
          "2836:         echo \"\\n\" . '<br /><br />' . \"\\n\";",
          "",
          "[Removed Lines]",
          "2832:         PMA_displayTableNavigation($pos_next, $pos_prev, $sql_query,",
          "2833:             'top_direction_dropdown');",
          "",
          "[Added Lines]",
          "2888:         PMA_displayTableNavigation(",
          "2889:             $pos_next, $pos_prev, $sql_query, 'top_direction_dropdown'",
          "2890:         );",
          "",
          "---------------",
          "--- Hunk 81 ---",
          "[Context before]",
          "2846:     $target=array();",
          "2847:     if (isset($analyzed_sql[0]['table_ref'])",
          "2849:         foreach ($analyzed_sql[0]['table_ref']",
          "2850:             as $table_ref_position => $table_ref) {",
          "2853:         }",
          "2854:     }",
          "2855:     $tabs    = '(\\'' . join('\\',\\'', $target) . '\\')';",
          "",
          "[Removed Lines]",
          "2848:         && is_array($analyzed_sql[0]['table_ref'])) {",
          "2851:             $target[] = $analyzed_sql[0]['table_ref'][$table_ref_position]",
          "2852:                 ['table_true_name'];",
          "",
          "[Added Lines]",
          "2905:         && is_array($analyzed_sql[0]['table_ref'])",
          "2906:     ) {",
          "2909:             $target[] = $analyzed_sql[0]['table_ref'][$table_ref_position]['table_true_name'];",
          "",
          "---------------",
          "--- Hunk 82 ---",
          "[Context before]",
          "2866:         $exist_rel = PMA_getForeigners($db, $table, '', 'both');",
          "2867:         if ($exist_rel) {",
          "2868:             foreach ($exist_rel as $master_field => $rel) {",
          "2875:             } // end while",
          "2876:         } // end if",
          "2877:     } // end if",
          "2883:     $url_query = '';",
          "2884:     echo '<tbody>' . \"\\n\";",
          "2888:     if ($_SESSION['tmp_user_values']['disp_direction'] == 'vertical') {",
          "2889:         PMA_displayVerticalTable();",
          "",
          "[Removed Lines]",
          "2869:                 $display_field = PMA_getDisplayField($rel['foreign_db'],",
          "2870:                     $rel['foreign_table']);",
          "2871:                 $map[$master_field] = array($rel['foreign_table'],",
          "2872:                                       $rel['foreign_field'],",
          "2873:                                       $display_field,",
          "2874:                                       $rel['foreign_db']);",
          "2881:     PMA_displayTableHeaders($is_display, $fields_meta, $fields_cnt, $analyzed_sql,",
          "2882:         $sort_expression, $sort_expression_nodirection, $sort_direction);",
          "2885:     $clause_is_unique = PMA_displayTableBody($dt_result, $is_display, $map,",
          "2886:         $analyzed_sql);",
          "",
          "[Added Lines]",
          "2926:                 $display_field = PMA_getDisplayField(",
          "2927:                     $rel['foreign_db'], $rel['foreign_table']",
          "2928:                 );",
          "2929:                 $map[$master_field] = array(",
          "2930:                     $rel['foreign_table'],",
          "2931:                     $rel['foreign_field'],",
          "2932:                     $display_field,",
          "2933:                     $rel['foreign_db']",
          "2934:                 );",
          "2941:     PMA_displayTableHeaders(",
          "2942:         $is_display, $fields_meta, $fields_cnt, $analyzed_sql,",
          "2943:         $sort_expression, $sort_expression_nodirection, $sort_direction",
          "2944:     );",
          "2947:     $clause_is_unique = PMA_displayTableBody(",
          "2948:         $dt_result, $is_display, $map, $analyzed_sql",
          "2949:     );",
          "",
          "---------------",
          "--- Hunk 83 ---",
          "[Context before]",
          "2922:             $uncheckall_params['onclick']",
          "2923:                 = 'if (unMarkAllRows(\\'resultsForm\\')) return false;';",
          "2924:         }",
          "2929:         if ($_SESSION['tmp_user_values']['disp_direction'] != 'vertical') {",
          "2930:             echo '<img class=\"selectallarrow\" width=\"38\" height=\"22\"'",
          "2931:                 .' src=\"' . $GLOBALS['pmaThemeImage'] . 'arrow_'",
          "",
          "[Removed Lines]",
          "2925:         $checkall_link = PMA_linkOrButton($checkall_url, __('Check All'),",
          "2926:             $checkall_params, false);",
          "2927:         $uncheckall_link = PMA_linkOrButton($uncheckall_url, __('Uncheck All'),",
          "2928:             $uncheckall_params, false);",
          "",
          "[Added Lines]",
          "2988:         $checkall_link = PMA_linkOrButton(",
          "2989:             $checkall_url, __('Check All'), $checkall_params, false",
          "2990:         );",
          "2991:         $uncheckall_link = PMA_linkOrButton(",
          "2992:             $uncheckall_url, __('Uncheck All'), $uncheckall_params, false",
          "2993:         );",
          "",
          "---------------",
          "--- Hunk 84 ---",
          "[Context before]",
          "2972:     if ($is_display['nav_bar'] == '1' && empty($analyzed_sql[0]['limit_clause'])) {",
          "2973:         echo '<br />' . \"\\n\";",
          "2976:     } elseif (! isset($GLOBALS['printview']) || $GLOBALS['printview'] != '1') {",
          "2977:         echo \"\\n\" . '<br /><br />' . \"\\n\";",
          "2978:     }",
          "",
          "[Removed Lines]",
          "2974:         PMA_displayTableNavigation($pos_next, $pos_prev, $sql_query,",
          "2975:             'bottom_direction_dropdown');",
          "",
          "[Added Lines]",
          "3039:         PMA_displayTableNavigation(",
          "3040:             $pos_next, $pos_prev, $sql_query, 'bottom_direction_dropdown'",
          "3041:         );",
          "",
          "---------------",
          "--- Hunk 85 ---",
          "[Context before]",
          "2992:     $buffer = str_replace(",
          "2993:         \"\\011\",",
          "2994:         ' &nbsp;&nbsp;&nbsp;',",
          "2996:     $buffer = preg_replace(\"@((\\015\\012)|(\\015)|(\\012))@\", '<br />', $buffer);",
          "2998:     return $buffer;",
          "",
          "[Removed Lines]",
          "2995:         str_replace('  ', ' &nbsp;', $buffer));",
          "",
          "[Added Lines]",
          "3061:         str_replace('  ', ' &nbsp;', $buffer)",
          "3062:     );",
          "",
          "---------------",
          "--- Hunk 86 ---",
          "[Context before]",
          "3053:                 $_url_params['display_text'] = 'F';",
          "3054:                 echo PMA_linkOrButton(",
          "3055:                     'sql.php' . PMA_generate_common_url($_url_params),",
          "3058:                     '', true, true, 'print_view'",
          "3059:                 ) . \"\\n\";",
          "3060:                 unset($_url_params['display_text']);",
          "",
          "[Removed Lines]",
          "3056:                     PMA_getIcon('b_print.png', __('Print view (with full texts)'),",
          "3057:                         true),",
          "",
          "[Added Lines]",
          "3123:                     PMA_getIcon(",
          "3124:                         'b_print.png', __('Print view (with full texts)'), true",
          "3125:                     ),",
          "",
          "---------------",
          "--- Hunk 87 ---",
          "[Context before]",
          "3072:     if (isset($analyzed_sql[0])",
          "3073:         && $analyzed_sql[0]['querytype'] == 'SELECT'",
          "3074:         && ! isset($printview)",
          "3076:         if (isset($analyzed_sql[0]['table_ref'][0]['table_true_name'])",
          "3078:             $_url_params['single_table'] = 'true';",
          "3079:         }",
          "3080:         if (!$header_shown) {",
          "",
          "[Removed Lines]",
          "3075:         && ! isset($analyzed_sql[0]['queryflags']['procedure'])) {",
          "3077:             && ! isset($analyzed_sql[0]['table_ref'][1]['table_true_name'])) {",
          "",
          "[Added Lines]",
          "3143:         && ! isset($analyzed_sql[0]['queryflags']['procedure'])",
          "3144:     ) {",
          "3146:             && ! isset($analyzed_sql[0]['table_ref'][1]['table_true_name'])",
          "3147:         ) {",
          "",
          "---------------",
          "--- Hunk 88 ---",
          "[Context before]",
          "3173: function PMA_handle_non_printable_contents($category, $content, $transform_function,",
          "3176:     $result = '[' . $category;",
          "3177:     if (is_null($content)) {",
          "3178:         $result .= ' - NULL';",
          "",
          "[Removed Lines]",
          "3174:     $transform_options, $default_function, $meta, $url_params = array())",
          "3175: {",
          "",
          "[Added Lines]",
          "3244:     $transform_options, $default_function, $meta, $url_params = array()",
          "3245: ) {",
          "",
          "---------------",
          "--- Hunk 89 ---",
          "[Context before]",
          "3193:         } else {",
          "3194:             $result = $default_function($result, array(), $meta);",
          "3195:             if (stristr($meta->type, 'BLOB')",
          "3198:                 $result = htmlspecialchars(PMA_replace_binary_contents($content));",
          "3199:             }",
          "",
          "[Removed Lines]",
          "3196:                 && $_SESSION['tmp_user_values']['display_blob']) {",
          "",
          "[Added Lines]",
          "3266:                 && $_SESSION['tmp_user_values']['display_blob']",
          "3267:             ) {",
          "",
          "---------------",
          "--- Hunk 90 ---",
          "[Context before]",
          "3229: function PMA_prepare_row_data($class, $condition_field, $analyzed_sql, $meta, $map,",
          "3230:     $data, $transform_function, $default_function, $nowrap, $where_comparison,",
          "3234:     global $db;",
          "3239:     if (isset($analyzed_sql[0]['select_expr'])",
          "3241:         foreach ($analyzed_sql[0]['select_expr']",
          "3242:             as $select_expr_position => $select_expr) {",
          "3243:             $alias = $analyzed_sql[0]['select_expr'][$select_expr_position]['alias'];",
          "3244:             if (isset($alias) && strlen($alias)) {",
          "3247:                 if ($alias == $meta->name) {",
          "",
          "[Removed Lines]",
          "3231:     $transform_options, $is_field_truncated )",
          "3232: {",
          "3236:     $result = ' class=\"' . PMA_addClass($class, $condition_field, $meta, $nowrap,",
          "3237:         $is_field_truncated, $transform_function, $default_function) . '\">';",
          "3240:         && is_array($analyzed_sql[0]['select_expr'])) {",
          "3245:                 $true_column = $analyzed_sql[0]['select_expr'][$select_expr_position]",
          "3246:                     ['column'];",
          "",
          "[Added Lines]",
          "3302:     $transform_options, $is_field_truncated",
          "3303: ) {",
          "3306:     $result = ' class=\"' . PMA_addClass(",
          "3307:         $class, $condition_field, $meta, $nowrap,",
          "3308:         $is_field_truncated, $transform_function, $default_function",
          "3309:     ) . '\">';",
          "3312:         && is_array($analyzed_sql[0]['select_expr'])",
          "3313:     ) {",
          "3318:                 $true_column = $analyzed_sql[0]['select_expr'][$select_expr_position]['column'];",
          "",
          "---------------",
          "--- Hunk 91 ---",
          "[Context before]",
          "3293:                 'table' => $map[$meta->name][0],",
          "3294:                 'pos'   => '0',",
          "3295:                 'sql_query' => 'SELECT * FROM '",
          "3300:             );",
          "3301:             $result .= '<a href=\"sql.php' . PMA_generate_common_url($_url_params)",
          "3302:                  . '\"' . $title . '>';",
          "",
          "[Removed Lines]",
          "3296:                                     . PMA_backquote($map[$meta->name][3]) . '.'",
          "3297:                                     . PMA_backquote($map[$meta->name][0])",
          "3298:                                     . ' WHERE ' . PMA_backquote($map[$meta->name][1])",
          "3299:                                     . $where_comparison,",
          "",
          "[Added Lines]",
          "3368:                     . PMA_backquote($map[$meta->name][3]) . '.'",
          "3369:                     . PMA_backquote($map[$meta->name][0])",
          "3370:                     . ' WHERE ' . PMA_backquote($map[$meta->name][1])",
          "3371:                     . $where_comparison,",
          "",
          "---------------",
          "--- Hunk 92 ---",
          "[Context before]",
          "3369: function PMA_generateCheckboxForMulti($del_url, $is_display, $row_no,",
          "3372:     $ret = '';",
          "3373:     if (! empty($del_url) && $is_display['del_lnk'] != 'kp') {",
          "3374:         $ret .= '<td ';",
          "",
          "[Removed Lines]",
          "3370:     $where_clause_html, $condition_array, $del_query, $id_suffix, $class)",
          "3371: {",
          "",
          "[Added Lines]",
          "3442:     $where_clause_html, $condition_array, $del_query, $id_suffix, $class",
          "3443: ) {",
          "",
          "---------------",
          "--- Hunk 93 ---",
          "[Context before]",
          "3404: function PMA_generateEditLink($edit_url, $class, $edit_str, $where_clause,",
          "3407:     $ret = '';",
          "3408:     if (! empty($edit_url)) {",
          "3409:         $ret .= '<td class=\"' . $class . ' center\" ' . ' ><span class=\"nowrap\">'",
          "",
          "[Removed Lines]",
          "3405:     $where_clause_html)",
          "3406: {",
          "",
          "[Added Lines]",
          "3477:     $where_clause_html",
          "3478: ) {",
          "",
          "---------------",
          "--- Hunk 94 ---",
          "[Context before]",
          "3435: function PMA_generateCopyLink($copy_url, $copy_str, $where_clause,",
          "3438:     $ret = '';",
          "3439:     if (! empty($copy_url)) {",
          "3440:         $ret .= '<td class=\"';",
          "",
          "[Removed Lines]",
          "3436:     $where_clause_html, $class)",
          "3437: {",
          "",
          "[Added Lines]",
          "3508:     $where_clause_html, $class",
          "3509: ) {",
          "",
          "---------------",
          "--- Hunk 95 ---",
          "[Context before]",
          "3507: function PMA_generateCheckboxAndLinks($position, $del_url, $is_display, $row_no,",
          "3508:     $where_clause, $where_clause_html, $condition_array, $del_query, $id_suffix,",
          "3511:     $ret = '';",
          "3513:     if ($position == 'left') {",
          "3524:         $ret .= PMA_generateDeleteLink($del_url, $del_str, $js_conf, '', '');",
          "3526:     } elseif ($position == 'right') {",
          "3527:         $ret .= PMA_generateDeleteLink($del_url, $del_str, $js_conf, '', '');",
          "3538:     } else { // $position == 'none'",
          "3542:     }",
          "3543:     return $ret;",
          "3544: }",
          "",
          "[Removed Lines]",
          "3509:     $edit_url, $copy_url, $class, $edit_str, $copy_str, $del_str, $js_conf)",
          "3510: {",
          "3514:         $ret .= PMA_generateCheckboxForMulti($del_url, $is_display, $row_no,",
          "3515:             $where_clause_html, $condition_array, $del_query, $id_suffix = '_left',",
          "3516:             '', '', '');",
          "3518:         $ret .= PMA_generateEditLink($edit_url, $class, $edit_str, $where_clause,",
          "3519:             $where_clause_html, '');",
          "3521:         $ret .= PMA_generateCopyLink($copy_url, $copy_str, $where_clause,",
          "3522:             $where_clause_html, '');",
          "3529:         $ret .= PMA_generateCopyLink($copy_url, $copy_str, $where_clause,",
          "3530:             $where_clause_html, '');",
          "3532:         $ret .= PMA_generateEditLink($edit_url, $class, $edit_str, $where_clause,",
          "3533:             $where_clause_html, '');",
          "3535:         $ret .= PMA_generateCheckboxForMulti($del_url, $is_display, $row_no,",
          "3536:             $where_clause_html, $condition_array, $del_query, $id_suffix = '_right',",
          "3537:             '', '', '');",
          "3539:         $ret .= PMA_generateCheckboxForMulti($del_url, $is_display, $row_no,",
          "3540:             $where_clause_html, $condition_array, $del_query, $id_suffix = '_left',",
          "3541:             '', '', '');",
          "",
          "[Added Lines]",
          "3581:     $edit_url, $copy_url, $class, $edit_str, $copy_str, $del_str, $js_conf",
          "3582: ) {",
          "3586:         $ret .= PMA_generateCheckboxForMulti(",
          "3587:             $del_url, $is_display, $row_no, $where_clause_html, $condition_array,",
          "3588:             $del_query, $id_suffix = '_left', '', '', ''",
          "3589:         );",
          "3591:         $ret .= PMA_generateEditLink(",
          "3592:             $edit_url, $class, $edit_str, $where_clause, $where_clause_html, ''",
          "3593:         );",
          "3595:         $ret .= PMA_generateCopyLink(",
          "3596:             $copy_url, $copy_str, $where_clause, $where_clause_html, ''",
          "3597:         );",
          "3604:         $ret .= PMA_generateCopyLink(",
          "3605:             $copy_url, $copy_str, $where_clause, $where_clause_html, ''",
          "3606:         );",
          "3608:         $ret .= PMA_generateEditLink(",
          "3609:             $edit_url, $class, $edit_str, $where_clause, $where_clause_html, ''",
          "3610:         );",
          "3612:         $ret .= PMA_generateCheckboxForMulti(",
          "3613:             $del_url, $is_display, $row_no, $where_clause_html, $condition_array,",
          "3614:             $del_query, $id_suffix = '_right', '', '', ''",
          "3615:         );",
          "3617:         $ret .= PMA_generateCheckboxForMulti(",
          "3618:             $del_url, $is_display, $row_no, $where_clause_html, $condition_array,",
          "3619:             $del_query, $id_suffix = '_left', '', '', ''",
          "3620:         );",
          "",
          "---------------"
        ]
      }
    }
  ]
}