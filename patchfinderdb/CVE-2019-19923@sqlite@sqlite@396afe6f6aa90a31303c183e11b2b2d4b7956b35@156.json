{
  "cve_id": "CVE-2019-19923",
  "cve_desc": "flattenSubquery in select.c in SQLite 3.30.1 mishandles certain uses of SELECT DISTINCT involving a LEFT JOIN in which the right-hand side is a view. This can cause a NULL pointer dereference (or incorrect results).",
  "repo": "sqlite/sqlite",
  "patch_hash": "396afe6f6aa90a31303c183e11b2b2d4b7956b35",
  "patch_info": {
    "commit_hash": "396afe6f6aa90a31303c183e11b2b2d4b7956b35",
    "repo": "sqlite/sqlite",
    "commit_url": "https://github.com/sqlite/sqlite/commit/396afe6f6aa90a31303c183e11b2b2d4b7956b35",
    "files": [
      "manifest",
      "manifest.uuid",
      "src/select.c",
      "test/join.test"
    ],
    "message": "Continue to back away from the LEFT JOIN optimization of check-in [41c27bc0ff1d3135] by disallowing query flattening if the outer query is DISTINCT.  Without this fix, if an index scan is run on the table within the view on the right-hand side of the LEFT JOIN, stale result registers might be accessed yielding incorrect results, and/or an OP_IfNullRow opcode might be invoked on the un-opened table, resulting in a NULL-pointer dereference.  This problem was found by the Yongheng and Rui fuzzer.\n\nFossilOrigin-Name: 862974312edf00e9d1068115d1a39b7235b7db68b6d86b81d38a12f025a4748e",
    "before_after_code_files": [
      "manifest.uuid||manifest.uuid",
      "src/select.c||src/select.c",
      "test/join.test||test/join.test"
    ]
  },
  "patch_diff": {
    "manifest.uuid||manifest.uuid": [
      "File: manifest.uuid -> manifest.uuid",
      "--- Hunk 1 ---",
      "[Context before]",
      "[No context available]",
      "",
      "[Removed Lines]",
      "1: 289158aa24b066c453d2bce4bc2dead1c56fb0b23c3f7c4810b34b13627cef34",
      "",
      "[Added Lines]",
      "[None]",
      "",
      "---------------"
    ],
    "src/select.c||src/select.c": [
      "File: src/select.c -> src/select.c",
      "--- Hunk 1 ---",
      "[Context before]",
      "3797:   if( (pSubitem->fg.jointype & JT_OUTER)!=0 ){",
      "3798:     isLeftJoin = 1;",
      "3801:       return 0;",
      "3802:     }",
      "3803:   }",
      "",
      "[Removed Lines]",
      "3799:     if( pSubSrc->nSrc>1 || isAgg || IsVirtual(pSubSrc->a[0].pTab) ){",
      "",
      "[Added Lines]",
      "3804:     ){",
      "",
      "---------------"
    ],
    "test/join.test||test/join.test": [
      "File: test/join.test -> test/join.test",
      "--- Hunk 1 ---",
      "[Context before]",
      "975:   SELECT 24, * FROM t1 LEFT JOIN t0 ON +aa ISNULL;",
      "976: } {13 1 {} 14 1 {} 23 1 {} 24 1 {}}",
      "978: finish_test",
      "",
      "[Removed Lines]",
      "[None]",
      "",
      "[Added Lines]",
      "978: # 2019-12-18 problem with a LEFT JOIN where the RHS is a view.",
      "979: # Detected by Yongheng and Rui.",
      "980: # Follows from the optimization attempt of check-in 41c27bc0ff1d3135",
      "981: # on 2017-04-18",
      "982: #",
      "983: reset_db",
      "984: do_execsql_test join-22.10 {",
      "985:   CREATE TABLE t0(a, b);",
      "986:   CREATE INDEX t0a ON t0(a);",
      "987:   INSERT INTO t0 VALUES(10,10),(10,11),(10,12);",
      "988:   SELECT DISTINCT c FROM t0 LEFT JOIN (SELECT a+1 AS c FROM t0) ORDER BY c ;",
      "989: } {11}",
      "",
      "---------------"
    ]
  },
  "candidates": [
    {
      "candidate_hash": "d430c2eb46e0fd8ce179037d12f68b8125d24a25",
      "candidate_info": {
        "commit_hash": "d430c2eb46e0fd8ce179037d12f68b8125d24a25",
        "repo": "sqlite/sqlite",
        "commit_url": "https://github.com/sqlite/sqlite/commit/d430c2eb46e0fd8ce179037d12f68b8125d24a25",
        "files": [
          "LICENSE.md",
          "README.md",
          "ext/fts5/fts5Int.h",
          "ext/fts5/fts5_hash.c",
          "ext/fts5/fts5_index.c",
          "ext/fts5/test/fts5aa.test",
          "manifest",
          "manifest.uuid",
          "src/alter.c",
          "src/os_unix.c",
          "src/sqlite.h.in",
          "src/vdbeaux.c",
          "src/wherecode.c",
          "test/altertab3.test",
          "test/sessionfuzz.c",
          "test/window8.tcl",
          "test/window8.test"
        ],
        "message": "Update this branch with latest trunk changes.\n\nFossilOrigin-Name: 98cc26598718e5557ee00aa77336024c91e483ec6de650e172ad1b44a6f0a77b",
        "before_after_code_files": [
          "ext/fts5/fts5Int.h||ext/fts5/fts5Int.h",
          "ext/fts5/fts5_hash.c||ext/fts5/fts5_hash.c",
          "ext/fts5/fts5_index.c||ext/fts5/fts5_index.c",
          "ext/fts5/test/fts5aa.test||ext/fts5/test/fts5aa.test",
          "manifest.uuid||manifest.uuid",
          "src/alter.c||src/alter.c",
          "src/os_unix.c||src/os_unix.c",
          "src/sqlite.h.in||src/sqlite.h.in",
          "src/vdbeaux.c||src/vdbeaux.c",
          "src/wherecode.c||src/wherecode.c",
          "test/altertab3.test||test/altertab3.test",
          "test/sessionfuzz.c||test/sessionfuzz.c",
          "test/window8.tcl||test/window8.tcl",
          "test/window8.test||test/window8.test"
        ]
      },
      "candidate_patch_features": {
        "candidate_earlier_than_patch": 1,
        "same_branch_evolution": 1,
        "olp_code_files": {
          "patch": [
            "manifest.uuid||manifest.uuid"
          ],
          "candidate": [
            "manifest.uuid||manifest.uuid"
          ]
        }
      },
      "candidate_diff": {
        "ext/fts5/fts5Int.h||ext/fts5/fts5Int.h": [
          "File: ext/fts5/fts5Int.h -> ext/fts5/fts5Int.h",
          "--- Hunk 1 ---",
          "[Context before]",
          "584: int sqlite3Fts5HashQuery(",
          "589: );",
          "",
          "[Removed Lines]",
          "[None]",
          "",
          "[Added Lines]",
          "586:   int nPre,",
          "",
          "---------------"
        ],
        "ext/fts5/fts5_hash.c||ext/fts5/fts5_hash.c": [
          "File: ext/fts5/fts5_hash.c -> ext/fts5/fts5_hash.c",
          "--- Hunk 1 ---",
          "[Context before]",
          "187:   return SQLITE_OK;",
          "188: }",
          "191:   if( p->iSzPoslist ){",
          "193:     if( pHash->eDetail==FTS5_DETAIL_NONE ){",
          "195:       if( p->bDel ){",
          "197:         if( p->bContent ){",
          "199:         }",
          "200:       }",
          "201:     }else{",
          "205:       assert( p->bDel==0 || p->bDel==1 );",
          "",
          "[Removed Lines]",
          "190: static void fts5HashAddPoslistSize(Fts5Hash *pHash, Fts5HashEntry *p){",
          "192:     u8 *pPtr = (u8*)p;",
          "194:       assert( p->nData==p->iSzPoslist );",
          "196:         pPtr[p->nData++] = 0x00;",
          "198:           pPtr[p->nData++] = 0x00;",
          "",
          "[Added Lines]",
          "190: static int fts5HashAddPoslistSize(",
          "191:   Fts5Hash *pHash,",
          "192:   Fts5HashEntry *p,",
          "193:   Fts5HashEntry *p2",
          "194: ){",
          "195:   int nRet = 0;",
          "197:     u8 *pPtr = p2 ? (u8*)p2 : (u8*)p;",
          "198:     int nData = p->nData;",
          "200:       assert( nData==p->iSzPoslist );",
          "202:         pPtr[nData++] = 0x00;",
          "204:           pPtr[nData++] = 0x00;",
          "",
          "---------------",
          "--- Hunk 2 ---",
          "[Context before]",
          "209:         int nByte = sqlite3Fts5GetVarintLen((u32)nPos);",
          "210:         memmove(&pPtr[p->iSzPoslist + nByte], &pPtr[p->iSzPoslist + 1], nSz);",
          "211:         sqlite3Fts5PutVarint(&pPtr[p->iSzPoslist], nPos);",
          "213:       }",
          "214:     }",
          "219:   }",
          "220: }",
          "",
          "[Removed Lines]",
          "212:         p->nData += (nByte-1);",
          "216:     p->iSzPoslist = 0;",
          "217:     p->bDel = 0;",
          "218:     p->bContent = 0;",
          "",
          "[Added Lines]",
          "218:         nData += (nByte-1);",
          "222:     nRet = nData - p->nData;",
          "223:     if( p2==0 ){",
          "224:       p->iSzPoslist = 0;",
          "225:       p->bDel = 0;",
          "226:       p->bContent = 0;",
          "227:       p->nData = nData;",
          "228:     }",
          "230:   return nRet;",
          "",
          "---------------",
          "--- Hunk 3 ---",
          "[Context before]",
          "330:   if( iRowid!=p->iRowid ){",
          "332:     p->nData += sqlite3Fts5PutVarint(&pPtr[p->nData], iRowid - p->iRowid);",
          "333:     p->iRowid = iRowid;",
          "334:     bNew = 1;",
          "",
          "[Removed Lines]",
          "331:     fts5HashAddPoslistSize(pHash, p);",
          "",
          "[Added Lines]",
          "342:     fts5HashAddPoslistSize(pHash, p, 0);",
          "",
          "---------------",
          "--- Hunk 4 ---",
          "[Context before]",
          "445:   for(iSlot=0; iSlot<pHash->nSlot; iSlot++){",
          "446:     Fts5HashEntry *pIter;",
          "447:     for(pIter=pHash->aSlot[iSlot]; pIter; pIter=pIter->pHashNext){",
          "449:         Fts5HashEntry *pEntry = pIter;",
          "450:         pEntry->pScanNext = 0;",
          "451:         for(i=0; ap[i]; i++){",
          "",
          "[Removed Lines]",
          "448:       if( pTerm==0 || 0==memcmp(fts5EntryKey(pIter), pTerm, nTerm) ){",
          "",
          "[Added Lines]",
          "459:       if( pTerm==0",
          "460:        || (pIter->nKey+1>=nTerm && 0==memcmp(fts5EntryKey(pIter), pTerm, nTerm))",
          "461:       ){",
          "",
          "---------------",
          "--- Hunk 5 ---",
          "[Context before]",
          "474: int sqlite3Fts5HashQuery(",
          "479: ){",
          "480:   unsigned int iHash = fts5HashKey(pHash->nSlot, (const u8*)pTerm, nTerm);",
          "",
          "[Removed Lines]",
          "[None]",
          "",
          "[Added Lines]",
          "489:   int nPre,",
          "",
          "---------------",
          "--- Hunk 6 ---",
          "[Context before]",
          "488:   }",
          "490:   if( p ){",
          "494:   }else{",
          "497:   }",
          "",
          "[Removed Lines]",
          "491:     fts5HashAddPoslistSize(pHash, p);",
          "",
          "[Added Lines]",
          "505:     int nHashPre = sizeof(Fts5HashEntry) + nTerm + 1;",
          "506:     int nList = p->nData - nHashPre;",
          "507:     u8 *pRet = (u8*)(*ppOut = sqlite3_malloc64(nPre + nList + 10));",
          "508:     if( pRet ){",
          "509:       Fts5HashEntry *pFaux = (Fts5HashEntry*)&pRet[nPre-nHashPre];",
          "510:       memcpy(&pRet[nPre], &((u8*)p)[nHashPre], nList);",
          "511:       nList += fts5HashAddPoslistSize(pHash, p, pFaux);",
          "513:     }else{",
          "515:       return SQLITE_NOMEM;",
          "516:     }",
          "",
          "---------------",
          "--- Hunk 7 ---",
          "[Context before]",
          "525:   if( (p = pHash->pScan) ){",
          "526:     char *zKey = fts5EntryKey(p);",
          "527:     int nTerm = (int)strlen(zKey);",
          "",
          "[Removed Lines]",
          "528:     fts5HashAddPoslistSize(pHash, p);",
          "",
          "[Added Lines]",
          "551:     fts5HashAddPoslistSize(pHash, p, 0);",
          "",
          "---------------"
        ],
        "ext/fts5/fts5_index.c||ext/fts5/fts5_index.c": [
          "File: ext/fts5/fts5_index.c -> ext/fts5/fts5_index.c",
          "--- Hunk 1 ---",
          "[Context before]",
          "2459: ){",
          "2461:   int nList = 0;",
          "2462:   const u8 *z = 0;",
          "2463:   int n = 0;",
          "2465:   assert( p->pHash );",
          "2466:   assert( p->rc==SQLITE_OK );",
          "2468:   if( pTerm==0 || (flags & FTS5INDEX_QUERY_SCAN) ){",
          "2469:     p->rc = sqlite3Fts5HashScanInit(p->pHash, (const char*)pTerm, nTerm);",
          "2470:     sqlite3Fts5HashScanEntry(p->pHash, (const char**)&z, &pList, &nList);",
          "2471:     n = (z ? (int)strlen((const char*)z) : 0);",
          "2472:   }else{",
          "2475:     z = pTerm;",
          "2476:     n = nTerm;",
          "2477:   }",
          "2481:     sqlite3Fts5BufferSet(&p->rc, &pIter->term, n, z);",
          "2485:     pLeaf->nn = pLeaf->szLeaf = nList;",
          "2486:     pIter->pLeaf = pLeaf;",
          "2487:     pIter->iLeafOffset = fts5GetVarint(pLeaf->p, (u64*)&pIter->iRowid);",
          "",
          "[Removed Lines]",
          "2460:   const u8 *pList = 0;",
          "2473:     pIter->flags |= FTS5_SEGITER_ONETERM;",
          "2474:     sqlite3Fts5HashQuery(p->pHash, (const char*)pTerm, nTerm, &pList, &nList);",
          "2479:   if( pList ){",
          "2480:     Fts5Data *pLeaf;",
          "2482:     pLeaf = fts5IdxMalloc(p, sizeof(Fts5Data));",
          "2483:     if( pLeaf==0 ) return;",
          "2484:     pLeaf->p = (u8*)pList;",
          "",
          "[Added Lines]",
          "2463:   Fts5Data *pLeaf = 0;",
          "2469:     const u8 *pList = 0;",
          "2474:     if( pList ){",
          "2475:       pLeaf = fts5IdxMalloc(p, sizeof(Fts5Data));",
          "2476:       if( pLeaf ){",
          "2477:         pLeaf->p = pList;",
          "2478:       }",
          "2479:     }",
          "2481:     p->rc = sqlite3Fts5HashQuery(p->pHash, sizeof(Fts5Data),",
          "2482:         (const char*)pTerm, nTerm, (void**)&pLeaf, &nList",
          "2483:     );",
          "2484:     if( pLeaf ){",
          "2485:       pLeaf->p = (u8*)&pLeaf[1];",
          "2486:     }",
          "2489:     pIter->flags |= FTS5_SEGITER_ONETERM;",
          "2492:   if( pLeaf ){",
          "",
          "---------------"
        ],
        "ext/fts5/test/fts5aa.test||ext/fts5/test/fts5aa.test": [
          "File: ext/fts5/test/fts5aa.test -> ext/fts5/test/fts5aa.test",
          "--- Hunk 1 ---",
          "[Context before]",
          "427:   db eval { UPDATE n1_config SET v=50 WHERE k='version' }",
          "428:   set fd [db incrblob main n1_data block 10]",
          "429:   fconfigure $fd -encoding binary -translation binary",
          "431:   close $fd",
          "432: }",
          "433: db func funk funk",
          "",
          "[Removed Lines]",
          "430:   puts -nonewline $fd \"\\x44\\x45\"",
          "",
          "[Added Lines]",
          "430: #  puts -nonewline $fd \"\\x44\\x45\"",
          "",
          "---------------",
          "--- Hunk 2 ---",
          "[Context before]",
          "603:   SELECT * FROM t11, t10 WHERE t10.rowid IS NULL;",
          "604: }",
          "606: }",
          "608: expand_all_sql db",
          "",
          "[Removed Lines]",
          "[None]",
          "",
          "[Added Lines]",
          "606: #-------------------------------------------------------------------------",
          "607: do_execsql_test 24.0 {",
          "608:   CREATE VIRTUAL TABLE t12 USING fts5(x, detail=%DETAIL%);",
          "609:   INSERT INTO t12 VALUES('aaaa');",
          "610: }",
          "611: do_execsql_test 24.1 {",
          "612:   BEGIN;",
          "613:     DELETE FROM t12 WHERE rowid=1;",
          "614:     SELECT * FROM t12('aaaa');",
          "615:     INSERT INTO t12 VALUES('aaaa');",
          "616:   END;",
          "617: }",
          "618: do_execsql_test 24.2 {",
          "619:   INSERT INTO t12(t12) VALUES('integrity-check');",
          "620: }",
          "621: do_execsql_test 24.3 {",
          "622:     SELECT * FROM t12('aaaa');",
          "623: } {aaaa}",
          "625: #-------------------------------------------------------------------------",
          "626: do_execsql_test 25.0 {",
          "627:   CREATE VIRTUAL TABLE t13 USING fts5(x, detail=%DETAIL%);",
          "628: }",
          "629: do_execsql_test 25.1 {",
          "630:   BEGIN;",
          "631:   INSERT INTO t13 VALUES('AAAA');",
          "632: SELECT * FROM t13('BBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBB*');",
          "634:   END;",
          "635: }",
          "",
          "---------------"
        ],
        "manifest.uuid||manifest.uuid": [
          "File: manifest.uuid -> manifest.uuid",
          "--- Hunk 1 ---",
          "[Context before]",
          "[No context available]",
          "",
          "[Removed Lines]",
          "1: a6d61dfd4780eccfce5f7a5ead6c04e3b78bc4a461551fd7dd602550e0d51084",
          "",
          "[Added Lines]",
          "[None]",
          "",
          "---------------"
        ],
        "src/alter.c||src/alter.c": [
          "File: src/alter.c -> src/alter.c",
          "--- Hunk 1 ---",
          "[Context before]",
          "166:   }",
          "167: #endif",
          "174:   v = sqlite3GetVdbe(pParse);",
          "175:   if( v==0 ){",
          "176:     goto exit_rename_table;",
          "177:   }",
          "180:   zTabName = pTab->zName;",
          "",
          "[Removed Lines]",
          "[None]",
          "",
          "[Added Lines]",
          "177:   sqlite3MayAbort(pParse);",
          "",
          "---------------",
          "--- Hunk 2 ---",
          "[Context before]",
          "243:     int i = ++pParse->nMem;",
          "244:     sqlite3VdbeLoadString(v, i, zName);",
          "245:     sqlite3VdbeAddOp4(v, OP_VRename, i, 0, 0,(const char*)pVTab, P4_VTAB);",
          "247:   }",
          "248: #endif",
          "",
          "[Removed Lines]",
          "246:     sqlite3MayAbort(pParse);",
          "",
          "[Added Lines]",
          "[None]",
          "",
          "---------------",
          "--- Hunk 3 ---",
          "[Context before]",
          "567:   zNew = sqlite3NameFromToken(db, pNew);",
          "568:   if( !zNew ) goto exit_rename_column;",
          "569:   assert( pNew->n>0 );",
          "",
          "[Removed Lines]",
          "[None]",
          "",
          "[Added Lines]",
          "566:   sqlite3MayAbort(pParse);",
          "",
          "---------------"
        ],
        "src/os_unix.c||src/os_unix.c": [
          "File: src/os_unix.c -> src/os_unix.c",
          "--- Hunk 1 ---",
          "[Context before]",
          "7822:     UNIXVFS(\"unix\",          autolockIoFinder ),",
          "7823: #elif OS_VXWORKS",
          "7824:     UNIXVFS(\"unix\",          vxworksIoFinder ),",
          "7828: #else",
          "7829:     UNIXVFS(\"unix\",          posixIoFinder ),",
          "7830: #endif",
          "",
          "[Removed Lines]",
          "7825: #elif __Fuchsia__",
          "7827:     UNIXVFS(\"unix\",          dotlockIoFinder ),",
          "",
          "[Added Lines]",
          "[None]",
          "",
          "---------------"
        ],
        "src/sqlite.h.in||src/sqlite.h.in": [
          "File: src/sqlite.h.in -> src/sqlite.h.in"
        ],
        "src/vdbeaux.c||src/vdbeaux.c": [
          "File: src/vdbeaux.c -> src/vdbeaux.c",
          "--- Hunk 1 ---",
          "[Context before]",
          "637:     int opcode = pOp->opcode;",
          "638:     if( opcode==OP_Destroy || opcode==OP_VUpdate || opcode==OP_VRename",
          "639:      || opcode==OP_VDestroy",
          "640:      || ((opcode==OP_Halt || opcode==OP_HaltIfNull)",
          "641:       && ((pOp->p1)!=SQLITE_OK && pOp->p2==OE_Abort))",
          "642:     ){",
          "",
          "[Removed Lines]",
          "[None]",
          "",
          "[Added Lines]",
          "640:      || (opcode==OP_Function0 && pOp->p4.pFunc->funcFlags&SQLITE_FUNC_INTERNAL)",
          "",
          "---------------"
        ],
        "src/wherecode.c||src/wherecode.c": [
          "File: src/wherecode.c -> src/wherecode.c"
        ],
        "test/altertab3.test||test/altertab3.test": [
          "File: test/altertab3.test -> test/altertab3.test",
          "--- Hunk 1 ---",
          "[Context before]",
          "81:   SELECT sql FROM sqlite_master WHERE name = 'v1'",
          "82: } {{CREATE VIEW v1 AS SELECT * FROM t1 WHERE a=1 OR (bbb IN ())}}",
          "86: finish_test",
          "",
          "[Removed Lines]",
          "[None]",
          "",
          "[Added Lines]",
          "84: #-------------------------------------------------------------------------",
          "85: reset_db",
          "86: do_execsql_test 4.0 {",
          "87:   CREATE TABLE t1(a, b);",
          "88:   CREATE TABLE t3(e, f);",
          "89:   CREATE TRIGGER tr1 AFTER INSERT ON t1 BEGIN",
          "90:     INSERT INTO t2 VALUES(new.a, new.b);",
          "91:   END;",
          "92: }",
          "94: do_catchsql_test 4.1.2 {",
          "95:   BEGIN;",
          "96:     ALTER TABLE t3 RENAME TO t4;",
          "97: } {1 {error in trigger tr1: no such table: main.t2}}",
          "98: do_execsql_test 4.1.2 {",
          "99:   COMMIT;",
          "100: }",
          "101: do_execsql_test 4.1.3 {",
          "102:   SELECT * FROM sqlite_master WHERE type='table' AND name!='t1';",
          "103: } {table t3 t3 3 {CREATE TABLE t3(e, f)}}",
          "106: do_catchsql_test 4.2.1 {",
          "107:   BEGIN;",
          "108:     ALTER TABLE t3 RENAME e TO eee;",
          "109: } {1 {error in trigger tr1: no such table: main.t2}}",
          "110: do_execsql_test 4.2.2 {",
          "111:   COMMIT;",
          "112: }",
          "113: do_execsql_test 4.2.3 {",
          "114:   SELECT * FROM sqlite_master WHERE type='table' AND name!='t1';",
          "115: } {table t3 t3 3 {CREATE TABLE t3(e, f)}}",
          "",
          "---------------"
        ],
        "test/sessionfuzz.c||test/sessionfuzz.c": [
          "File: test/sessionfuzz.c -> test/sessionfuzz.c",
          "--- Hunk 1 ---",
          "[Context before]",
          "830: ){",
          "831:   (void)NotUsed;",
          "832:   (void)p;",
          "834:   return SQLITE_CHANGESET_OMIT;",
          "835: }",
          "",
          "[Removed Lines]",
          "833:   printf(\"Conflict %d\\n\", eConflict);",
          "",
          "[Added Lines]",
          "[None]",
          "",
          "---------------"
        ],
        "test/window8.tcl||test/window8.tcl": [
          "File: test/window8.tcl -> test/window8.tcl",
          "--- Hunk 1 ---",
          "[Context before]",
          "96:   execsql_test 1.$tn.7 \"",
          "97:     SELECT a, b, sum(c) OVER (ORDER BY a,b $f2) FROM t3 ORDER BY 1, 2, 3;",
          "98:   \"",
          "99: }",
          "",
          "[Removed Lines]",
          "[None]",
          "",
          "[Added Lines]",
          "100:   execsql_test 1.$tn.8 \"",
          "101:     SELECT a, b,",
          "102:       sum(c) OVER (ORDER BY a $f2),",
          "103:       sum(c) OVER (ORDER BY a $frame),",
          "104:       sum(c) OVER (ORDER BY a,b $f2),",
          "105:       sum(c) OVER (ORDER BY a,b $frame)",
          "106:     FROM t3 ORDER BY 1, 2, 3;",
          "107:   \"",
          "",
          "---------------"
        ],
        "test/window8.test||test/window8.test": [
          "File: test/window8.test -> test/window8.test",
          "--- Hunk 1 ---",
          "[Context before]",
          "178:   JJ aa 40937   JJ aa 40937   JJ aa 40937   JJ bb 42951   JJ bb 42951",
          "179:   JJ bb 42951   JJ bb 42951}",
          "181: do_execsql_test 1.2.1 {",
          "182:   SELECT a, b, sum(c) OVER (ORDER BY a  GROUPS BETWEEN UNBOUNDED PRECEDING AND CURRENT ROW ) FROM t3 ORDER BY 1, 2, 3;",
          "183: } {AA aa 4685   AA aa 4685   AA aa 4685   AA aa 4685   AA bb 4685   AA bb 4685",
          "",
          "[Removed Lines]",
          "[None]",
          "",
          "[Added Lines]",
          "181: do_execsql_test 1.1.8 {",
          "182:   SELECT a, b,",
          "183:       sum(c) OVER (ORDER BY a  GROUPS BETWEEN UNBOUNDED PRECEDING AND 1 PRECEDING  EXCLUDE CURRENT ROW),",
          "184:       sum(c) OVER (ORDER BY a  GROUPS BETWEEN UNBOUNDED PRECEDING AND 1 PRECEDING ),",
          "185:       sum(c) OVER (ORDER BY a,b  GROUPS BETWEEN UNBOUNDED PRECEDING AND 1 PRECEDING  EXCLUDE CURRENT ROW),",
          "186:       sum(c) OVER (ORDER BY a,b  GROUPS BETWEEN UNBOUNDED PRECEDING AND 1 PRECEDING )",
          "187:     FROM t3 ORDER BY 1, 2, 3;",
          "188: } {AA aa {} {} {} {}   AA aa {} {} {} {}   AA aa {} {} {} {}",
          "189:   AA aa {} {} {} {}   AA bb {} {} 2307 2307   AA bb {} {} 2307 2307",
          "190:   AA bb {} {} 2307 2307   AA bb {} {} 2307 2307   BB aa 4685 4685 4685 4685",
          "191:   BB aa 4685 4685 4685 4685   BB aa 4685 4685 4685 4685",
          "192:   BB aa 4685 4685 4685 4685   BB aa 4685 4685 4685 4685",
          "193:   BB aa 4685 4685 4685 4685   BB bb 4685 4685 7558 7558",
          "194:   BB bb 4685 4685 7558 7558   BB bb 4685 4685 7558 7558",
          "195:   BB bb 4685 4685 7558 7558   BB bb 4685 4685 7558 7558",
          "196:   BB bb 4685 4685 7558 7558   CC aa 12025 12025 12025 12025",
          "197:   CC aa 12025 12025 12025 12025   CC aa 12025 12025 12025 12025",
          "198:   CC aa 12025 12025 12025 12025   CC bb 12025 12025 13979 13979",
          "199:   CC bb 12025 12025 13979 13979   DD aa 15147 15147 15147 15147",
          "200:   DD aa 15147 15147 15147 15147   DD aa 15147 15147 15147 15147",
          "201:   DD bb 15147 15147 16472 16472   DD bb 15147 15147 16472 16472",
          "202:   DD bb 15147 15147 16472 16472   DD bb 15147 15147 16472 16472",
          "203:   EE aa 19179 19179 19179 19179   EE aa 19179 19179 19179 19179",
          "204:   EE bb 19179 19179 20069 20069   EE bb 19179 19179 20069 20069",
          "205:   EE bb 19179 19179 20069 20069   FF aa 21718 21718 21718 21718",
          "206:   FF aa 21718 21718 21718 21718   FF aa 21718 21718 21718 21718",
          "207:   FF aa 21718 21718 21718 21718   FF bb 21718 21718 23881 23881",
          "208:   FF bb 21718 21718 23881 23881   FF bb 21718 21718 23881 23881",
          "209:   FF bb 21718 21718 23881 23881   FF bb 21718 21718 23881 23881",
          "210:   FF bb 21718 21718 23881 23881   GG aa 27386 27386 27386 27386",
          "211:   GG aa 27386 27386 27386 27386   GG aa 27386 27386 27386 27386",
          "212:   GG aa 27386 27386 27386 27386   GG bb 27386 27386 28983 28983",
          "213:   GG bb 27386 27386 28983 28983   GG bb 27386 27386 28983 28983",
          "214:   GG bb 27386 27386 28983 28983   HH aa 31854 31854 31854 31854",
          "215:   HH aa 31854 31854 31854 31854   HH aa 31854 31854 31854 31854",
          "216:   HH bb 31854 31854 34103 34103   HH bb 31854 31854 34103 34103",
          "217:   HH bb 31854 31854 34103 34103   HH bb 31854 31854 34103 34103",
          "218:   HH bb 31854 31854 34103 34103   HH bb 31854 31854 34103 34103",
          "219:   II aa 37297 37297 37297 37297   II aa 37297 37297 37297 37297",
          "220:   II bb 37297 37297 38347 38347   II bb 37297 37297 38347 38347",
          "221:   II bb 37297 37297 38347 38347   II bb 37297 37297 38347 38347",
          "222:   II bb 37297 37297 38347 38347   JJ aa 40937 40937 40937 40937",
          "223:   JJ aa 40937 40937 40937 40937   JJ aa 40937 40937 40937 40937",
          "224:   JJ aa 40937 40937 40937 40937   JJ bb 40937 40937 42951 42951",
          "225:   JJ bb 40937 40937 42951 42951   JJ bb 40937 40937 42951 42951",
          "226:   JJ bb 40937 40937 42951 42951}",
          "",
          "---------------",
          "--- Hunk 2 ---",
          "[Context before]",
          "303:   JJ aa 42052   JJ aa 42183   JJ aa 42717   JJ aa 42838   JJ bb 43898",
          "304:   JJ bb 44383   JJ bb 44401   JJ bb 44480}",
          "306: do_execsql_test 1.3.1 {",
          "307:   SELECT a, b, sum(c) OVER (ORDER BY a  GROUPS BETWEEN UNBOUNDED PRECEDING AND 1 FOLLOWING ) FROM t3 ORDER BY 1, 2, 3;",
          "308: } {AA aa 12025   AA aa 12025   AA aa 12025   AA aa 12025   AA bb 12025",
          "",
          "[Removed Lines]",
          "[None]",
          "",
          "[Added Lines]",
          "353: do_execsql_test 1.2.8 {",
          "354:   SELECT a, b,",
          "355:       sum(c) OVER (ORDER BY a  GROUPS BETWEEN UNBOUNDED PRECEDING AND CURRENT ROW  EXCLUDE CURRENT ROW),",
          "356:       sum(c) OVER (ORDER BY a  GROUPS BETWEEN UNBOUNDED PRECEDING AND CURRENT ROW ),",
          "357:       sum(c) OVER (ORDER BY a,b  GROUPS BETWEEN UNBOUNDED PRECEDING AND CURRENT ROW  EXCLUDE CURRENT ROW),",
          "358:       sum(c) OVER (ORDER BY a,b  GROUPS BETWEEN UNBOUNDED PRECEDING AND CURRENT ROW )",
          "359:     FROM t3 ORDER BY 1, 2, 3;",
          "360: } {AA aa 3751 4685 1373 2307   AA aa 3774 4685 1396 2307",
          "361:   AA aa 4446 4685 2068 2307   AA aa 4462 4685 2084 2307",
          "362:   AA bb 3815 4685 3815 4685   AA bb 4058 4685 4058 4685",
          "363:   AA bb 4113 4685 4113 4685   AA bb 4376 4685 4376 4685",
          "364:   BB aa 11263 12025 6796 7558   BB aa 11365 12025 6898 7558",
          "365:   BB aa 11613 12025 7146 7558   BB aa 11626 12025 7159 7558",
          "366:   BB aa 11632 12025 7165 7558   BB aa 11778 12025 7311 7558",
          "367:   BB bb 11185 12025 11185 12025   BB bb 11233 12025 11233 12025",
          "368:   BB bb 11239 12025 11239 12025   BB bb 11314 12025 11314 12025",
          "369:   BB bb 11320 12025 11320 12025   BB bb 11392 12025 11392 12025",
          "370:   CC aa 14388 15147 13220 13979   CC aa 14540 15147 13372 13979",
          "371:   CC aa 14717 15147 13549 13979   CC aa 14989 15147 13821 13979",
          "372:   CC bb 14325 15147 14325 15147   CC bb 14801 15147 14801 15147",
          "373:   DD aa 18334 19179 15627 16472   DD aa 18923 19179 16216 16472",
          "374:   DD aa 18955 19179 16248 16472   DD bb 18220 19179 18220 19179",
          "375:   DD bb 18385 19179 18385 19179   DD bb 18463 19179 18463 19179",
          "376:   DD bb 18941 19179 18941 19179   EE aa 20941 21718 19292 20069",
          "377:   EE aa 21605 21718 19956 20069   EE bb 20950 21718 20950 21718",
          "378:   EE bb 21089 21718 21089 21718   EE bb 21466 21718 21466 21718",
          "379:   FF aa 26716 27386 23211 23881   FF aa 26719 27386 23214 23881",
          "380:   FF aa 26768 27386 23263 23881   FF aa 27178 27386 23673 23881",
          "381:   FF bb 26448 27386 26448 27386   FF bb 26516 27386 26516 27386",
          "382:   FF bb 26660 27386 26660 27386   FF bb 26812 27386 26812 27386",
          "383:   FF bb 27091 27386 27091 27386   FF bb 27284 27386 27284 27386",
          "384:   GG aa 31220 31854 28349 28983   GG aa 31374 31854 28503 28983",
          "385:   GG aa 31519 31854 28648 28983   GG aa 31706 31854 28835 28983",
          "386:   GG bb 30916 31854 30916 31854   GG bb 30925 31854 30925 31854",
          "387:   GG bb 31010 31854 31010 31854   GG bb 31694 31854 31694 31854",
          "388:   HH aa 36318 37297 33124 34103   HH aa 36507 37297 33313 34103",
          "389:   HH aa 36817 37297 33623 34103   HH bb 36334 37297 36334 37297",
          "390:   HH bb 36567 37297 36567 37297   HH bb 36614 37297 36614 37297",
          "391:   HH bb 36942 37297 36942 37297   HH bb 36967 37297 36967 37297",
          "392:   HH bb 37164 37297 37164 37297   II aa 40285 40937 37695 38347",
          "393:   II aa 40539 40937 37949 38347   II bb 40132 40937 40132 40937",
          "394:   II bb 40266 40937 40266 40937   II bb 40494 40937 40494 40937",
          "395:   II bb 40516 40937 40516 40937   II bb 40687 40937 40687 40937",
          "396:   JJ aa 43838 44737 42052 42951   JJ aa 43969 44737 42183 42951",
          "397:   JJ aa 44503 44737 42717 42951   JJ aa 44624 44737 42838 42951",
          "398:   JJ bb 43898 44737 43898 44737   JJ bb 44383 44737 44383 44737",
          "399:   JJ bb 44401 44737 44401 44737   JJ bb 44480 44737 44480 44737}",
          "",
          "---------------",
          "--- Hunk 3 ---",
          "[Context before]",
          "428:   II bb 42701   JJ aa 43838   JJ aa 43969   JJ aa 44503   JJ aa 44624",
          "429:   JJ bb 43898   JJ bb 44383   JJ bb 44401   JJ bb 44480}",
          "431: do_execsql_test 1.4.1 {",
          "432:   SELECT a, b, sum(c) OVER (ORDER BY a  GROUPS BETWEEN UNBOUNDED PRECEDING AND UNBOUNDED FOLLOWING ) FROM t3 ORDER BY 1, 2, 3;",
          "433: } {AA aa 44737   AA aa 44737   AA aa 44737   AA aa 44737   AA bb 44737",
          "",
          "[Removed Lines]",
          "[None]",
          "",
          "[Added Lines]",
          "526: do_execsql_test 1.3.8 {",
          "527:   SELECT a, b,",
          "528:       sum(c) OVER (ORDER BY a  GROUPS BETWEEN UNBOUNDED PRECEDING AND 1 FOLLOWING  EXCLUDE CURRENT ROW),",
          "529:       sum(c) OVER (ORDER BY a  GROUPS BETWEEN UNBOUNDED PRECEDING AND 1 FOLLOWING ),",
          "530:       sum(c) OVER (ORDER BY a,b  GROUPS BETWEEN UNBOUNDED PRECEDING AND 1 FOLLOWING  EXCLUDE CURRENT ROW),",
          "531:       sum(c) OVER (ORDER BY a,b  GROUPS BETWEEN UNBOUNDED PRECEDING AND 1 FOLLOWING )",
          "532:     FROM t3 ORDER BY 1, 2, 3;",
          "533: } {AA aa 11091 12025 3751 4685   AA aa 11114 12025 3774 4685",
          "534:   AA aa 11786 12025 4446 4685   AA aa 11802 12025 4462 4685",
          "535:   AA bb 11155 12025 6688 7558   AA bb 11398 12025 6931 7558",
          "536:   AA bb 11453 12025 6986 7558   AA bb 11716 12025 7249 7558",
          "537:   BB aa 14385 15147 11263 12025   BB aa 14487 15147 11365 12025",
          "538:   BB aa 14735 15147 11613 12025   BB aa 14748 15147 11626 12025",
          "539:   BB aa 14754 15147 11632 12025   BB aa 14900 15147 11778 12025",
          "540:   BB bb 14307 15147 13139 13979   BB bb 14355 15147 13187 13979",
          "541:   BB bb 14361 15147 13193 13979   BB bb 14436 15147 13268 13979",
          "542:   BB bb 14442 15147 13274 13979   BB bb 14514 15147 13346 13979",
          "543:   CC aa 18420 19179 14388 15147   CC aa 18572 19179 14540 15147",
          "544:   CC aa 18749 19179 14717 15147   CC aa 19021 19179 14989 15147",
          "545:   CC bb 18357 19179 15650 16472   CC bb 18833 19179 16126 16472",
          "546:   DD aa 20873 21718 18334 19179   DD aa 21462 21718 18923 19179",
          "547:   DD aa 21494 21718 18955 19179   DD bb 20759 21718 19110 20069",
          "548:   DD bb 20924 21718 19275 20069   DD bb 21002 21718 19353 20069",
          "549:   DD bb 21480 21718 19831 20069   EE aa 26609 27386 20941 21718",
          "550:   EE aa 27273 27386 21605 21718   EE bb 26618 27386 23113 23881",
          "551:   EE bb 26757 27386 23252 23881   EE bb 27134 27386 23629 23881",
          "552:   FF aa 31184 31854 26716 27386   FF aa 31187 31854 26719 27386",
          "553:   FF aa 31236 31854 26768 27386   FF aa 31646 31854 27178 27386",
          "554:   FF bb 30916 31854 28045 28983   FF bb 30984 31854 28113 28983",
          "555:   FF bb 31128 31854 28257 28983   FF bb 31280 31854 28409 28983",
          "556:   FF bb 31559 31854 28688 28983   FF bb 31752 31854 28881 28983",
          "557:   GG aa 36663 37297 31220 31854   GG aa 36817 37297 31374 31854",
          "558:   GG aa 36962 37297 31519 31854   GG aa 37149 37297 31706 31854",
          "559:   GG bb 36359 37297 33165 34103   GG bb 36368 37297 33174 34103",
          "560:   GG bb 36453 37297 33259 34103   GG bb 37137 37297 33943 34103",
          "561:   HH aa 39958 40937 36318 37297   HH aa 40147 40937 36507 37297",
          "562:   HH aa 40457 40937 36817 37297   HH bb 39974 40937 37384 38347",
          "563:   HH bb 40207 40937 37617 38347   HH bb 40254 40937 37664 38347",
          "564:   HH bb 40582 40937 37992 38347   HH bb 40607 40937 38017 38347",
          "565:   HH bb 40804 40937 38214 38347   II aa 44085 44737 40285 40937",
          "566:   II aa 44339 44737 40539 40937   II bb 43932 44737 42146 42951",
          "567:   II bb 44066 44737 42280 42951   II bb 44294 44737 42508 42951",
          "568:   II bb 44316 44737 42530 42951   II bb 44487 44737 42701 42951",
          "569:   JJ aa 43838 44737 43838 44737   JJ aa 43969 44737 43969 44737",
          "570:   JJ aa 44503 44737 44503 44737   JJ aa 44624 44737 44624 44737",
          "571:   JJ bb 43898 44737 43898 44737   JJ bb 44383 44737 44383 44737",
          "572:   JJ bb 44401 44737 44401 44737   JJ bb 44480 44737 44480 44737}",
          "",
          "---------------",
          "--- Hunk 4 ---",
          "[Context before]",
          "553:   II bb 44316   II bb 44487   JJ aa 43838   JJ aa 43969   JJ aa 44503",
          "554:   JJ aa 44624   JJ bb 43898   JJ bb 44383   JJ bb 44401   JJ bb 44480}",
          "556: do_execsql_test 1.5.1 {",
          "557:   SELECT a, b, sum(c) OVER (ORDER BY a  GROUPS BETWEEN 1 PRECEDING         AND 2 PRECEDING ) FROM t3 ORDER BY 1, 2, 3;",
          "558: } {AA aa {}   AA aa {}   AA aa {}   AA aa {}   AA bb {}   AA bb {}   AA bb {}",
          "",
          "[Removed Lines]",
          "[None]",
          "",
          "[Added Lines]",
          "699: do_execsql_test 1.4.8 {",
          "700:   SELECT a, b,",
          "701:       sum(c) OVER (ORDER BY a  GROUPS BETWEEN UNBOUNDED PRECEDING AND UNBOUNDED FOLLOWING  EXCLUDE CURRENT ROW),",
          "702:       sum(c) OVER (ORDER BY a  GROUPS BETWEEN UNBOUNDED PRECEDING AND UNBOUNDED FOLLOWING ),",
          "703:       sum(c) OVER (ORDER BY a,b  GROUPS BETWEEN UNBOUNDED PRECEDING AND UNBOUNDED FOLLOWING  EXCLUDE CURRENT ROW),",
          "704:       sum(c) OVER (ORDER BY a,b  GROUPS BETWEEN UNBOUNDED PRECEDING AND UNBOUNDED FOLLOWING )",
          "705:     FROM t3 ORDER BY 1, 2, 3;",
          "706: } {AA aa 43803 44737 43803 44737   AA aa 43826 44737 43826 44737",
          "707:   AA aa 44498 44737 44498 44737   AA aa 44514 44737 44514 44737",
          "708:   AA bb 43867 44737 43867 44737   AA bb 44110 44737 44110 44737",
          "709:   AA bb 44165 44737 44165 44737   AA bb 44428 44737 44428 44737",
          "710:   BB aa 43975 44737 43975 44737   BB aa 44077 44737 44077 44737",
          "711:   BB aa 44325 44737 44325 44737   BB aa 44338 44737 44338 44737",
          "712:   BB aa 44344 44737 44344 44737   BB aa 44490 44737 44490 44737",
          "713:   BB bb 43897 44737 43897 44737   BB bb 43945 44737 43945 44737",
          "714:   BB bb 43951 44737 43951 44737   BB bb 44026 44737 44026 44737",
          "715:   BB bb 44032 44737 44032 44737   BB bb 44104 44737 44104 44737",
          "716:   CC aa 43978 44737 43978 44737   CC aa 44130 44737 44130 44737",
          "717:   CC aa 44307 44737 44307 44737   CC aa 44579 44737 44579 44737",
          "718:   CC bb 43915 44737 43915 44737   CC bb 44391 44737 44391 44737",
          "719:   DD aa 43892 44737 43892 44737   DD aa 44481 44737 44481 44737",
          "720:   DD aa 44513 44737 44513 44737   DD bb 43778 44737 43778 44737",
          "721:   DD bb 43943 44737 43943 44737   DD bb 44021 44737 44021 44737",
          "722:   DD bb 44499 44737 44499 44737   EE aa 43960 44737 43960 44737",
          "723:   EE aa 44624 44737 44624 44737   EE bb 43969 44737 43969 44737",
          "724:   EE bb 44108 44737 44108 44737   EE bb 44485 44737 44485 44737",
          "725:   FF aa 44067 44737 44067 44737   FF aa 44070 44737 44070 44737",
          "726:   FF aa 44119 44737 44119 44737   FF aa 44529 44737 44529 44737",
          "727:   FF bb 43799 44737 43799 44737   FF bb 43867 44737 43867 44737",
          "728:   FF bb 44011 44737 44011 44737   FF bb 44163 44737 44163 44737",
          "729:   FF bb 44442 44737 44442 44737   FF bb 44635 44737 44635 44737",
          "730:   GG aa 44103 44737 44103 44737   GG aa 44257 44737 44257 44737",
          "731:   GG aa 44402 44737 44402 44737   GG aa 44589 44737 44589 44737",
          "732:   GG bb 43799 44737 43799 44737   GG bb 43808 44737 43808 44737",
          "733:   GG bb 43893 44737 43893 44737   GG bb 44577 44737 44577 44737",
          "734:   HH aa 43758 44737 43758 44737   HH aa 43947 44737 43947 44737",
          "735:   HH aa 44257 44737 44257 44737   HH bb 43774 44737 43774 44737",
          "736:   HH bb 44007 44737 44007 44737   HH bb 44054 44737 44054 44737",
          "737:   HH bb 44382 44737 44382 44737   HH bb 44407 44737 44407 44737",
          "738:   HH bb 44604 44737 44604 44737   II aa 44085 44737 44085 44737",
          "739:   II aa 44339 44737 44339 44737   II bb 43932 44737 43932 44737",
          "740:   II bb 44066 44737 44066 44737   II bb 44294 44737 44294 44737",
          "741:   II bb 44316 44737 44316 44737   II bb 44487 44737 44487 44737",
          "742:   JJ aa 43838 44737 43838 44737   JJ aa 43969 44737 43969 44737",
          "743:   JJ aa 44503 44737 44503 44737   JJ aa 44624 44737 44624 44737",
          "744:   JJ bb 43898 44737 43898 44737   JJ bb 44383 44737 44383 44737",
          "745:   JJ bb 44401 44737 44401 44737   JJ bb 44480 44737 44480 44737}",
          "",
          "---------------",
          "--- Hunk 5 ---",
          "[Context before]",
          "658:   II bb {}   II bb {}   JJ aa {}   JJ aa {}   JJ aa {}   JJ aa {}   JJ bb {}",
          "659:   JJ bb {}   JJ bb {}   JJ bb {}}",
          "661: do_execsql_test 1.6.1 {",
          "662:   SELECT a, b, sum(c) OVER (ORDER BY a  GROUPS BETWEEN 2 PRECEDING         AND 1 PRECEDING ) FROM t3 ORDER BY 1, 2, 3;",
          "663: } {AA aa {}   AA aa {}   AA aa {}   AA aa {}   AA bb {}   AA bb {}   AA bb {}",
          "",
          "[Removed Lines]",
          "[None]",
          "",
          "[Added Lines]",
          "852: do_execsql_test 1.5.8 {",
          "853:   SELECT a, b,",
          "854:       sum(c) OVER (ORDER BY a  GROUPS BETWEEN 1 PRECEDING         AND 2 PRECEDING  EXCLUDE CURRENT ROW),",
          "855:       sum(c) OVER (ORDER BY a  GROUPS BETWEEN 1 PRECEDING         AND 2 PRECEDING ),",
          "856:       sum(c) OVER (ORDER BY a,b  GROUPS BETWEEN 1 PRECEDING         AND 2 PRECEDING  EXCLUDE CURRENT ROW),",
          "857:       sum(c) OVER (ORDER BY a,b  GROUPS BETWEEN 1 PRECEDING         AND 2 PRECEDING )",
          "858:     FROM t3 ORDER BY 1, 2, 3;",
          "859: } {AA aa {} {} {} {}   AA aa {} {} {} {}   AA aa {} {} {} {}",
          "860:   AA aa {} {} {} {}   AA bb {} {} {} {}   AA bb {} {} {} {}",
          "861:   AA bb {} {} {} {}   AA bb {} {} {} {}   BB aa {} {} {} {}",
          "862:   BB aa {} {} {} {}   BB aa {} {} {} {}   BB aa {} {} {} {}",
          "863:   BB aa {} {} {} {}   BB aa {} {} {} {}   BB bb {} {} {} {}",
          "864:   BB bb {} {} {} {}   BB bb {} {} {} {}   BB bb {} {} {} {}",
          "865:   BB bb {} {} {} {}   BB bb {} {} {} {}   CC aa {} {} {} {}",
          "866:   CC aa {} {} {} {}   CC aa {} {} {} {}   CC aa {} {} {} {}",
          "867:   CC bb {} {} {} {}   CC bb {} {} {} {}   DD aa {} {} {} {}",
          "868:   DD aa {} {} {} {}   DD aa {} {} {} {}   DD bb {} {} {} {}",
          "869:   DD bb {} {} {} {}   DD bb {} {} {} {}   DD bb {} {} {} {}",
          "870:   EE aa {} {} {} {}   EE aa {} {} {} {}   EE bb {} {} {} {}",
          "871:   EE bb {} {} {} {}   EE bb {} {} {} {}   FF aa {} {} {} {}",
          "872:   FF aa {} {} {} {}   FF aa {} {} {} {}   FF aa {} {} {} {}",
          "873:   FF bb {} {} {} {}   FF bb {} {} {} {}   FF bb {} {} {} {}",
          "874:   FF bb {} {} {} {}   FF bb {} {} {} {}   FF bb {} {} {} {}",
          "875:   GG aa {} {} {} {}   GG aa {} {} {} {}   GG aa {} {} {} {}",
          "876:   GG aa {} {} {} {}   GG bb {} {} {} {}   GG bb {} {} {} {}",
          "877:   GG bb {} {} {} {}   GG bb {} {} {} {}   HH aa {} {} {} {}",
          "878:   HH aa {} {} {} {}   HH aa {} {} {} {}   HH bb {} {} {} {}",
          "879:   HH bb {} {} {} {}   HH bb {} {} {} {}   HH bb {} {} {} {}",
          "880:   HH bb {} {} {} {}   HH bb {} {} {} {}   II aa {} {} {} {}",
          "881:   II aa {} {} {} {}   II bb {} {} {} {}   II bb {} {} {} {}",
          "882:   II bb {} {} {} {}   II bb {} {} {} {}   II bb {} {} {} {}",
          "883:   JJ aa {} {} {} {}   JJ aa {} {} {} {}   JJ aa {} {} {} {}",
          "884:   JJ aa {} {} {} {}   JJ bb {} {} {} {}   JJ bb {} {} {} {}",
          "885:   JJ bb {} {} {} {}   JJ bb {} {} {} {}}",
          "",
          "---------------",
          "--- Hunk 6 ---",
          "[Context before]",
          "777:   JJ aa 3640   JJ aa 3640   JJ aa 3640   JJ aa 3640   JJ bb 4604   JJ bb 4604",
          "778:   JJ bb 4604   JJ bb 4604}",
          "780: do_execsql_test 1.7.1 {",
          "781:   SELECT a, b, sum(c) OVER (ORDER BY a  GROUPS BETWEEN 3 PRECEDING         AND 1 PRECEDING ) FROM t3 ORDER BY 1, 2, 3;",
          "782: } {AA aa {}   AA aa {}   AA aa {}   AA aa {}   AA bb {}   AA bb {}   AA bb {}",
          "",
          "[Removed Lines]",
          "[None]",
          "",
          "[Added Lines]",
          "1006: do_execsql_test 1.6.8 {",
          "1007:   SELECT a, b,",
          "1008:       sum(c) OVER (ORDER BY a  GROUPS BETWEEN 2 PRECEDING         AND 1 PRECEDING  EXCLUDE CURRENT ROW),",
          "1009:       sum(c) OVER (ORDER BY a  GROUPS BETWEEN 2 PRECEDING         AND 1 PRECEDING ),",
          "1010:       sum(c) OVER (ORDER BY a,b  GROUPS BETWEEN 2 PRECEDING         AND 1 PRECEDING  EXCLUDE CURRENT ROW),",
          "1011:       sum(c) OVER (ORDER BY a,b  GROUPS BETWEEN 2 PRECEDING         AND 1 PRECEDING )",
          "1012:     FROM t3 ORDER BY 1, 2, 3;",
          "1013: } {AA aa {} {} {} {}   AA aa {} {} {} {}   AA aa {} {} {} {}",
          "1014:   AA aa {} {} {} {}   AA bb {} {} 2307 2307   AA bb {} {} 2307 2307",
          "1015:   AA bb {} {} 2307 2307   AA bb {} {} 2307 2307   BB aa 4685 4685 4685 4685",
          "1016:   BB aa 4685 4685 4685 4685   BB aa 4685 4685 4685 4685",
          "1017:   BB aa 4685 4685 4685 4685   BB aa 4685 4685 4685 4685",
          "1018:   BB aa 4685 4685 4685 4685   BB bb 4685 4685 5251 5251",
          "1019:   BB bb 4685 4685 5251 5251   BB bb 4685 4685 5251 5251",
          "1020:   BB bb 4685 4685 5251 5251   BB bb 4685 4685 5251 5251",
          "1021:   BB bb 4685 4685 5251 5251   CC aa 12025 12025 7340 7340",
          "1022:   CC aa 12025 12025 7340 7340   CC aa 12025 12025 7340 7340",
          "1023:   CC aa 12025 12025 7340 7340   CC bb 12025 12025 6421 6421",
          "1024:   CC bb 12025 12025 6421 6421   DD aa 10462 10462 3122 3122",
          "1025:   DD aa 10462 10462 3122 3122   DD aa 10462 10462 3122 3122",
          "1026:   DD bb 10462 10462 2493 2493   DD bb 10462 10462 2493 2493",
          "1027:   DD bb 10462 10462 2493 2493   DD bb 10462 10462 2493 2493",
          "1028:   EE aa 7154 7154 4032 4032   EE aa 7154 7154 4032 4032",
          "1029:   EE bb 7154 7154 3597 3597   EE bb 7154 7154 3597 3597",
          "1030:   EE bb 7154 7154 3597 3597   FF aa 6571 6571 2539 2539",
          "1031:   FF aa 6571 6571 2539 2539   FF aa 6571 6571 2539 2539",
          "1032:   FF aa 6571 6571 2539 2539   FF bb 6571 6571 3812 3812",
          "1033:   FF bb 6571 6571 3812 3812   FF bb 6571 6571 3812 3812",
          "1034:   FF bb 6571 6571 3812 3812   FF bb 6571 6571 3812 3812",
          "1035:   FF bb 6571 6571 3812 3812   GG aa 8207 8207 5668 5668",
          "1036:   GG aa 8207 8207 5668 5668   GG aa 8207 8207 5668 5668",
          "1037:   GG aa 8207 8207 5668 5668   GG bb 8207 8207 5102 5102",
          "1038:   GG bb 8207 8207 5102 5102   GG bb 8207 8207 5102 5102",
          "1039:   GG bb 8207 8207 5102 5102   HH aa 10136 10136 4468 4468",
          "1040:   HH aa 10136 10136 4468 4468   HH aa 10136 10136 4468 4468",
          "1041:   HH bb 10136 10136 5120 5120   HH bb 10136 10136 5120 5120",
          "1042:   HH bb 10136 10136 5120 5120   HH bb 10136 10136 5120 5120",
          "1043:   HH bb 10136 10136 5120 5120   HH bb 10136 10136 5120 5120",
          "1044:   II aa 9911 9911 5443 5443   II aa 9911 9911 5443 5443",
          "1045:   II bb 9911 9911 4244 4244   II bb 9911 9911 4244 4244",
          "1046:   II bb 9911 9911 4244 4244   II bb 9911 9911 4244 4244",
          "1047:   II bb 9911 9911 4244 4244   JJ aa 9083 9083 3640 3640",
          "1048:   JJ aa 9083 9083 3640 3640   JJ aa 9083 9083 3640 3640",
          "1049:   JJ aa 9083 9083 3640 3640   JJ bb 9083 9083 4604 4604",
          "1050:   JJ bb 9083 9083 4604 4604   JJ bb 9083 9083 4604 4604",
          "1051:   JJ bb 9083 9083 4604 4604}",
          "",
          "---------------",
          "--- Hunk 7 ---",
          "[Context before]",
          "896:   JJ aa 6834   JJ aa 6834   JJ aa 6834   JJ aa 6834   JJ bb 5654   JJ bb 5654",
          "897:   JJ bb 5654   JJ bb 5654}",
          "899: do_execsql_test 1.8.1 {",
          "900:   SELECT a, b, sum(c) OVER (ORDER BY a  GROUPS BETWEEN 3 PRECEDING         AND 0 PRECEDING ) FROM t3 ORDER BY 1, 2, 3;",
          "901: } {AA aa 4685   AA aa 4685   AA aa 4685   AA aa 4685   AA bb 4685   AA bb 4685",
          "",
          "[Removed Lines]",
          "[None]",
          "",
          "[Added Lines]",
          "1172: do_execsql_test 1.7.8 {",
          "1173:   SELECT a, b,",
          "1174:       sum(c) OVER (ORDER BY a  GROUPS BETWEEN 3 PRECEDING         AND 1 PRECEDING  EXCLUDE CURRENT ROW),",
          "1175:       sum(c) OVER (ORDER BY a  GROUPS BETWEEN 3 PRECEDING         AND 1 PRECEDING ),",
          "1176:       sum(c) OVER (ORDER BY a,b  GROUPS BETWEEN 3 PRECEDING         AND 1 PRECEDING  EXCLUDE CURRENT ROW),",
          "1177:       sum(c) OVER (ORDER BY a,b  GROUPS BETWEEN 3 PRECEDING         AND 1 PRECEDING )",
          "1178:     FROM t3 ORDER BY 1, 2, 3;",
          "1179: } {AA aa {} {} {} {}   AA aa {} {} {} {}   AA aa {} {} {} {}",
          "1180:   AA aa {} {} {} {}   AA bb {} {} 2307 2307   AA bb {} {} 2307 2307",
          "1181:   AA bb {} {} 2307 2307   AA bb {} {} 2307 2307   BB aa 4685 4685 4685 4685",
          "1182:   BB aa 4685 4685 4685 4685   BB aa 4685 4685 4685 4685",
          "1183:   BB aa 4685 4685 4685 4685   BB aa 4685 4685 4685 4685",
          "1184:   BB aa 4685 4685 4685 4685   BB bb 4685 4685 7558 7558",
          "1185:   BB bb 4685 4685 7558 7558   BB bb 4685 4685 7558 7558",
          "1186:   BB bb 4685 4685 7558 7558   BB bb 4685 4685 7558 7558",
          "1187:   BB bb 4685 4685 7558 7558   CC aa 12025 12025 9718 9718",
          "1188:   CC aa 12025 12025 9718 9718   CC aa 12025 12025 9718 9718",
          "1189:   CC aa 12025 12025 9718 9718   CC bb 12025 12025 9294 9294",
          "1190:   CC bb 12025 12025 9294 9294   DD aa 15147 15147 7589 7589",
          "1191:   DD aa 15147 15147 7589 7589   DD aa 15147 15147 7589 7589",
          "1192:   DD bb 15147 15147 4447 4447   DD bb 15147 15147 4447 4447",
          "1193:   DD bb 15147 15147 4447 4447   DD bb 15147 15147 4447 4447",
          "1194:   EE aa 14494 14494 5200 5200   EE aa 14494 14494 5200 5200",
          "1195:   EE bb 14494 14494 4922 4922   EE bb 14494 14494 4922 4922",
          "1196:   EE bb 14494 14494 4922 4922   FF aa 9693 9693 5246 5246",
          "1197:   FF aa 9693 9693 5246 5246   FF aa 9693 9693 5246 5246",
          "1198:   FF aa 9693 9693 5246 5246   FF bb 9693 9693 4702 4702",
          "1199:   FF bb 9693 9693 4702 4702   FF bb 9693 9693 4702 4702",
          "1200:   FF bb 9693 9693 4702 4702   FF bb 9693 9693 4702 4702",
          "1201:   FF bb 9693 9693 4702 4702   GG aa 12239 12239 7317 7317",
          "1202:   GG aa 12239 12239 7317 7317   GG aa 12239 12239 7317 7317",
          "1203:   GG aa 12239 12239 7317 7317   GG bb 12239 12239 7265 7265",
          "1204:   GG bb 12239 12239 7265 7265   GG bb 12239 12239 7265 7265",
          "1205:   GG bb 12239 12239 7265 7265   HH aa 12675 12675 7973 7973",
          "1206:   HH aa 12675 12675 7973 7973   HH aa 12675 12675 7973 7973",
          "1207:   HH bb 12675 12675 6717 6717   HH bb 12675 12675 6717 6717",
          "1208:   HH bb 12675 12675 6717 6717   HH bb 12675 12675 6717 6717",
          "1209:   HH bb 12675 12675 6717 6717   HH bb 12675 12675 6717 6717",
          "1210:   II aa 15579 15579 8314 8314   II aa 15579 15579 8314 8314",
          "1211:   II bb 15579 15579 6493 6493   II bb 15579 15579 6493 6493",
          "1212:   II bb 15579 15579 6493 6493   II bb 15579 15579 6493 6493",
          "1213:   II bb 15579 15579 6493 6493   JJ aa 13551 13551 6834 6834",
          "1214:   JJ aa 13551 13551 6834 6834   JJ aa 13551 13551 6834 6834",
          "1215:   JJ aa 13551 13551 6834 6834   JJ bb 13551 13551 5654 5654",
          "1216:   JJ bb 13551 13551 5654 5654   JJ bb 13551 13551 5654 5654",
          "1217:   JJ bb 13551 13551 5654 5654}",
          "",
          "---------------",
          "--- Hunk 8 ---",
          "[Context before]",
          "1018:   II bb 8640   II bb 8662   II bb 8833   JJ aa 7949   JJ aa 8080   JJ aa 8614",
          "1019:   JJ aa 8735   JJ bb 6601   JJ bb 7086   JJ bb 7104   JJ bb 7183}",
          "1021: do_execsql_test 1.9.1 {",
          "1022:   SELECT a, b, sum(c) OVER (ORDER BY a  GROUPS BETWEEN 2 PRECEDING         AND CURRENT ROW ) FROM t3 ORDER BY 1, 2, 3;",
          "1023: } {AA aa 4685   AA aa 4685   AA aa 4685   AA aa 4685   AA bb 4685   AA bb 4685",
          "",
          "[Removed Lines]",
          "[None]",
          "",
          "[Added Lines]",
          "1341: do_execsql_test 1.8.8 {",
          "1342:   SELECT a, b,",
          "1343:       sum(c) OVER (ORDER BY a  GROUPS BETWEEN 3 PRECEDING         AND 0 PRECEDING  EXCLUDE CURRENT ROW),",
          "1344:       sum(c) OVER (ORDER BY a  GROUPS BETWEEN 3 PRECEDING         AND 0 PRECEDING ),",
          "1345:       sum(c) OVER (ORDER BY a,b  GROUPS BETWEEN 3 PRECEDING         AND 0 PRECEDING  EXCLUDE CURRENT ROW),",
          "1346:       sum(c) OVER (ORDER BY a,b  GROUPS BETWEEN 3 PRECEDING         AND 0 PRECEDING )",
          "1347:     FROM t3 ORDER BY 1, 2, 3;",
          "1348: } {AA aa 3751 4685 1373 2307   AA aa 3774 4685 1396 2307",
          "1349:   AA aa 4446 4685 2068 2307   AA aa 4462 4685 2084 2307",
          "1350:   AA bb 3815 4685 3815 4685   AA bb 4058 4685 4058 4685",
          "1351:   AA bb 4113 4685 4113 4685   AA bb 4376 4685 4376 4685",
          "1352:   BB aa 11263 12025 6796 7558   BB aa 11365 12025 6898 7558",
          "1353:   BB aa 11613 12025 7146 7558   BB aa 11626 12025 7159 7558",
          "1354:   BB aa 11632 12025 7165 7558   BB aa 11778 12025 7311 7558",
          "1355:   BB bb 11185 12025 11185 12025   BB bb 11233 12025 11233 12025",
          "1356:   BB bb 11239 12025 11239 12025   BB bb 11314 12025 11314 12025",
          "1357:   BB bb 11320 12025 11320 12025   BB bb 11392 12025 11392 12025",
          "1358:   CC aa 14388 15147 10913 11672   CC aa 14540 15147 11065 11672",
          "1359:   CC aa 14717 15147 11242 11672   CC aa 14989 15147 11514 11672",
          "1360:   CC bb 14325 15147 9640 10462   CC bb 14801 15147 10116 10462",
          "1361:   DD aa 18334 19179 8069 8914   DD aa 18923 19179 8658 8914",
          "1362:   DD aa 18955 19179 8690 8914   DD bb 18220 19179 6195 7154",
          "1363:   DD bb 18385 19179 6360 7154   DD bb 18463 19179 6438 7154",
          "1364:   DD bb 18941 19179 6916 7154   EE aa 16256 17033 5313 6090",
          "1365:   EE aa 16920 17033 5977 6090   EE bb 16265 17033 5803 6571",
          "1366:   EE bb 16404 17033 5942 6571   EE bb 16781 17033 6319 6571",
          "1367:   FF aa 14691 15361 6739 7409   FF aa 14694 15361 6742 7409",
          "1368:   FF aa 14743 15361 6791 7409   FF aa 15153 15361 7201 7409",
          "1369:   FF bb 14423 15361 7269 8207   FF bb 14491 15361 7337 8207",
          "1370:   FF bb 14635 15361 7481 8207   FF bb 14787 15361 7633 8207",
          "1371:   FF bb 15066 15361 7912 8207   FF bb 15259 15361 8105 8207",
          "1372:   GG aa 16073 16707 8280 8914   GG aa 16227 16707 8434 8914",
          "1373:   GG aa 16372 16707 8579 8914   GG aa 16559 16707 8766 8914",
          "1374:   GG bb 15769 16707 9198 10136   GG bb 15778 16707 9207 10136",
          "1375:   GG bb 15863 16707 9292 10136   GG bb 16547 16707 9976 10136",
          "1376:   HH aa 17139 18118 9243 10222   HH aa 17328 18118 9432 10222",
          "1377:   HH aa 17638 18118 9742 10222   HH bb 17155 18118 8948 9911",
          "1378:   HH bb 17388 18118 9181 9911   HH bb 17435 18118 9228 9911",
          "1379:   HH bb 17763 18118 9556 9911   HH bb 17788 18118 9581 9911",
          "1380:   HH bb 17985 18118 9778 9911   II aa 18567 19219 8712 9364",
          "1381:   II aa 18821 19219 8966 9364   II bb 18414 19219 8278 9083",
          "1382:   II bb 18548 19219 8412 9083   II bb 18776 19219 8640 9083",
          "1383:   II bb 18798 19219 8662 9083   II bb 18969 19219 8833 9083",
          "1384:   JJ aa 16452 17351 7949 8848   JJ aa 16583 17351 8080 8848",
          "1385:   JJ aa 17117 17351 8614 8848   JJ aa 17238 17351 8735 8848",
          "1386:   JJ bb 16512 17351 6601 7440   JJ bb 16997 17351 7086 7440",
          "1387:   JJ bb 17015 17351 7104 7440   JJ bb 17094 17351 7183 7440}",
          "",
          "---------------",
          "--- Hunk 9 ---",
          "[Context before]",
          "1139:   JJ aa 4755   JJ aa 4886   JJ aa 5420   JJ aa 5541   JJ bb 5551   JJ bb 6036",
          "1140:   JJ bb 6054   JJ bb 6133}",
          "1142: do_execsql_test 1.10.1 {",
          "1143:   SELECT a, b, sum(c) OVER (ORDER BY a  GROUPS BETWEEN 3 PRECEDING         AND 0 FOLLOWING ) FROM t3 ORDER BY 1, 2, 3;",
          "1144: } {AA aa 4685   AA aa 4685   AA aa 4685   AA aa 4685   AA bb 4685   AA bb 4685",
          "",
          "[Removed Lines]",
          "[None]",
          "",
          "[Added Lines]",
          "1510: do_execsql_test 1.9.8 {",
          "1511:   SELECT a, b,",
          "1512:       sum(c) OVER (ORDER BY a  GROUPS BETWEEN 2 PRECEDING         AND CURRENT ROW  EXCLUDE CURRENT ROW),",
          "1513:       sum(c) OVER (ORDER BY a  GROUPS BETWEEN 2 PRECEDING         AND CURRENT ROW ),",
          "1514:       sum(c) OVER (ORDER BY a,b  GROUPS BETWEEN 2 PRECEDING         AND CURRENT ROW  EXCLUDE CURRENT ROW),",
          "1515:       sum(c) OVER (ORDER BY a,b  GROUPS BETWEEN 2 PRECEDING         AND CURRENT ROW )",
          "1516:     FROM t3 ORDER BY 1, 2, 3;",
          "1517: } {AA aa 3751 4685 1373 2307   AA aa 3774 4685 1396 2307",
          "1518:   AA aa 4446 4685 2068 2307   AA aa 4462 4685 2084 2307",
          "1519:   AA bb 3815 4685 3815 4685   AA bb 4058 4685 4058 4685",
          "1520:   AA bb 4113 4685 4113 4685   AA bb 4376 4685 4376 4685",
          "1521:   BB aa 11263 12025 6796 7558   BB aa 11365 12025 6898 7558",
          "1522:   BB aa 11613 12025 7146 7558   BB aa 11626 12025 7159 7558",
          "1523:   BB aa 11632 12025 7165 7558   BB aa 11778 12025 7311 7558",
          "1524:   BB bb 11185 12025 8878 9718   BB bb 11233 12025 8926 9718",
          "1525:   BB bb 11239 12025 8932 9718   BB bb 11314 12025 9007 9718",
          "1526:   BB bb 11320 12025 9013 9718   BB bb 11392 12025 9085 9718",
          "1527:   CC aa 14388 15147 8535 9294   CC aa 14540 15147 8687 9294",
          "1528:   CC aa 14717 15147 8864 9294   CC aa 14989 15147 9136 9294",
          "1529:   CC bb 14325 15147 6767 7589   CC bb 14801 15147 7243 7589",
          "1530:   DD aa 13649 14494 3602 4447   DD aa 14238 14494 4191 4447",
          "1531:   DD aa 14270 14494 4223 4447   DD bb 13535 14494 4241 5200",
          "1532:   DD bb 13700 14494 4406 5200   DD bb 13778 14494 4484 5200",
          "1533:   DD bb 14256 14494 4962 5200   EE aa 8916 9693 4145 4922",
          "1534:   EE aa 9580 9693 4809 4922   EE bb 8925 9693 4478 5246",
          "1535:   EE bb 9064 9693 4617 5246   EE bb 9441 9693 4994 5246",
          "1536:   FF aa 11569 12239 4032 4702   FF aa 11572 12239 4035 4702",
          "1537:   FF aa 11621 12239 4084 4702   FF aa 12031 12239 4494 4702",
          "1538:   FF bb 11301 12239 6379 7317   FF bb 11369 12239 6447 7317",
          "1539:   FF bb 11513 12239 6591 7317   FF bb 11665 12239 6743 7317",
          "1540:   FF bb 11944 12239 7022 7317   FF bb 12137 12239 7215 7317",
          "1541:   GG aa 12041 12675 6631 7265   GG aa 12195 12675 6785 7265",
          "1542:   GG aa 12340 12675 6930 7265   GG aa 12527 12675 7117 7265",
          "1543:   GG bb 11737 12675 7035 7973   GG bb 11746 12675 7044 7973",
          "1544:   GG bb 11831 12675 7129 7973   GG bb 12515 12675 7813 7973",
          "1545:   HH aa 14600 15579 5738 6717   HH aa 14789 15579 5927 6717",
          "1546:   HH aa 15099 15579 6237 6717   HH bb 14616 15579 7351 8314",
          "1547:   HH bb 14849 15579 7584 8314   HH bb 14896 15579 7631 8314",
          "1548:   HH bb 15224 15579 7959 8314   HH bb 15249 15579 7984 8314",
          "1549:   HH bb 15446 15579 8181 8314   II aa 12899 13551 5841 6493",
          "1550:   II aa 13153 13551 6095 6493   II bb 12746 13551 6029 6834",
          "1551:   II bb 12880 13551 6163 6834   II bb 13108 13551 6391 6834",
          "1552:   II bb 13130 13551 6413 6834   II bb 13301 13551 6584 6834",
          "1553:   JJ aa 11984 12883 4755 5654   JJ aa 12115 12883 4886 5654",
          "1554:   JJ aa 12649 12883 5420 5654   JJ aa 12770 12883 5541 5654",
          "1555:   JJ bb 12044 12883 5551 6390   JJ bb 12529 12883 6036 6390",
          "1556:   JJ bb 12547 12883 6054 6390   JJ bb 12626 12883 6133 6390}",
          "",
          "---------------",
          "--- Hunk 10 ---",
          "[Context before]",
          "1261:   II bb 8640   II bb 8662   II bb 8833   JJ aa 7949   JJ aa 8080   JJ aa 8614",
          "1262:   JJ aa 8735   JJ bb 6601   JJ bb 7086   JJ bb 7104   JJ bb 7183}",
          "1264: do_execsql_test 1.11.1 {",
          "1265:   SELECT a, b, sum(c) OVER (ORDER BY a  GROUPS BETWEEN 2 PRECEDING         AND UNBOUNDED FOLLOWING ) FROM t3 ORDER BY 1, 2, 3;",
          "1266: } {AA aa 44737   AA aa 44737   AA aa 44737   AA aa 44737   AA bb 44737",
          "",
          "[Removed Lines]",
          "[None]",
          "",
          "[Added Lines]",
          "1680: do_execsql_test 1.10.8 {",
          "1681:   SELECT a, b,",
          "1682:       sum(c) OVER (ORDER BY a  GROUPS BETWEEN 3 PRECEDING         AND 0 FOLLOWING  EXCLUDE CURRENT ROW),",
          "1683:       sum(c) OVER (ORDER BY a  GROUPS BETWEEN 3 PRECEDING         AND 0 FOLLOWING ),",
          "1684:       sum(c) OVER (ORDER BY a,b  GROUPS BETWEEN 3 PRECEDING         AND 0 FOLLOWING  EXCLUDE CURRENT ROW),",
          "1685:       sum(c) OVER (ORDER BY a,b  GROUPS BETWEEN 3 PRECEDING         AND 0 FOLLOWING )",
          "1686:     FROM t3 ORDER BY 1, 2, 3;",
          "1687: } {AA aa 3751 4685 1373 2307   AA aa 3774 4685 1396 2307",
          "1688:   AA aa 4446 4685 2068 2307   AA aa 4462 4685 2084 2307",
          "1689:   AA bb 3815 4685 3815 4685   AA bb 4058 4685 4058 4685",
          "1690:   AA bb 4113 4685 4113 4685   AA bb 4376 4685 4376 4685",
          "1691:   BB aa 11263 12025 6796 7558   BB aa 11365 12025 6898 7558",
          "1692:   BB aa 11613 12025 7146 7558   BB aa 11626 12025 7159 7558",
          "1693:   BB aa 11632 12025 7165 7558   BB aa 11778 12025 7311 7558",
          "1694:   BB bb 11185 12025 11185 12025   BB bb 11233 12025 11233 12025",
          "1695:   BB bb 11239 12025 11239 12025   BB bb 11314 12025 11314 12025",
          "1696:   BB bb 11320 12025 11320 12025   BB bb 11392 12025 11392 12025",
          "1697:   CC aa 14388 15147 10913 11672   CC aa 14540 15147 11065 11672",
          "1698:   CC aa 14717 15147 11242 11672   CC aa 14989 15147 11514 11672",
          "1699:   CC bb 14325 15147 9640 10462   CC bb 14801 15147 10116 10462",
          "1700:   DD aa 18334 19179 8069 8914   DD aa 18923 19179 8658 8914",
          "1701:   DD aa 18955 19179 8690 8914   DD bb 18220 19179 6195 7154",
          "1702:   DD bb 18385 19179 6360 7154   DD bb 18463 19179 6438 7154",
          "1703:   DD bb 18941 19179 6916 7154   EE aa 16256 17033 5313 6090",
          "1704:   EE aa 16920 17033 5977 6090   EE bb 16265 17033 5803 6571",
          "1705:   EE bb 16404 17033 5942 6571   EE bb 16781 17033 6319 6571",
          "1706:   FF aa 14691 15361 6739 7409   FF aa 14694 15361 6742 7409",
          "1707:   FF aa 14743 15361 6791 7409   FF aa 15153 15361 7201 7409",
          "1708:   FF bb 14423 15361 7269 8207   FF bb 14491 15361 7337 8207",
          "1709:   FF bb 14635 15361 7481 8207   FF bb 14787 15361 7633 8207",
          "1710:   FF bb 15066 15361 7912 8207   FF bb 15259 15361 8105 8207",
          "1711:   GG aa 16073 16707 8280 8914   GG aa 16227 16707 8434 8914",
          "1712:   GG aa 16372 16707 8579 8914   GG aa 16559 16707 8766 8914",
          "1713:   GG bb 15769 16707 9198 10136   GG bb 15778 16707 9207 10136",
          "1714:   GG bb 15863 16707 9292 10136   GG bb 16547 16707 9976 10136",
          "1715:   HH aa 17139 18118 9243 10222   HH aa 17328 18118 9432 10222",
          "1716:   HH aa 17638 18118 9742 10222   HH bb 17155 18118 8948 9911",
          "1717:   HH bb 17388 18118 9181 9911   HH bb 17435 18118 9228 9911",
          "1718:   HH bb 17763 18118 9556 9911   HH bb 17788 18118 9581 9911",
          "1719:   HH bb 17985 18118 9778 9911   II aa 18567 19219 8712 9364",
          "1720:   II aa 18821 19219 8966 9364   II bb 18414 19219 8278 9083",
          "1721:   II bb 18548 19219 8412 9083   II bb 18776 19219 8640 9083",
          "1722:   II bb 18798 19219 8662 9083   II bb 18969 19219 8833 9083",
          "1723:   JJ aa 16452 17351 7949 8848   JJ aa 16583 17351 8080 8848",
          "1724:   JJ aa 17117 17351 8614 8848   JJ aa 17238 17351 8735 8848",
          "1725:   JJ bb 16512 17351 6601 7440   JJ bb 16997 17351 7086 7440",
          "1726:   JJ bb 17015 17351 7104 7440   JJ bb 17094 17351 7183 7440}",
          "",
          "---------------",
          "--- Hunk 11 ---",
          "[Context before]",
          "1386:   II bb 10213   II bb 10384   JJ aa 6541   JJ aa 6672   JJ aa 7206",
          "1387:   JJ aa 7327   JJ bb 5551   JJ bb 6036   JJ bb 6054   JJ bb 6133}",
          "1389: do_execsql_test 1.12.1 {",
          "1390:   SELECT a, b, sum(c) OVER (ORDER BY a  GROUPS BETWEEN CURRENT ROW         AND 0 FOLLOWING ) FROM t3 ORDER BY 1, 2, 3;",
          "1391: } {AA aa 4685   AA aa 4685   AA aa 4685   AA aa 4685   AA bb 4685   AA bb 4685",
          "",
          "[Removed Lines]",
          "[None]",
          "",
          "[Added Lines]",
          "1853: do_execsql_test 1.11.8 {",
          "1854:   SELECT a, b,",
          "1855:       sum(c) OVER (ORDER BY a  GROUPS BETWEEN 2 PRECEDING         AND UNBOUNDED FOLLOWING  EXCLUDE CURRENT ROW),",
          "1856:       sum(c) OVER (ORDER BY a  GROUPS BETWEEN 2 PRECEDING         AND UNBOUNDED FOLLOWING ),",
          "1857:       sum(c) OVER (ORDER BY a,b  GROUPS BETWEEN 2 PRECEDING         AND UNBOUNDED FOLLOWING  EXCLUDE CURRENT ROW),",
          "1858:       sum(c) OVER (ORDER BY a,b  GROUPS BETWEEN 2 PRECEDING         AND UNBOUNDED FOLLOWING )",
          "1859:     FROM t3 ORDER BY 1, 2, 3;",
          "1860: } {AA aa 43803 44737 43803 44737   AA aa 43826 44737 43826 44737",
          "1861:   AA aa 44498 44737 44498 44737   AA aa 44514 44737 44514 44737",
          "1862:   AA bb 43867 44737 43867 44737   AA bb 44110 44737 44110 44737",
          "1863:   AA bb 44165 44737 44165 44737   AA bb 44428 44737 44428 44737",
          "1864:   BB aa 43975 44737 43975 44737   BB aa 44077 44737 44077 44737",
          "1865:   BB aa 44325 44737 44325 44737   BB aa 44338 44737 44338 44737",
          "1866:   BB aa 44344 44737 44344 44737   BB aa 44490 44737 44490 44737",
          "1867:   BB bb 43897 44737 41590 42430   BB bb 43945 44737 41638 42430",
          "1868:   BB bb 43951 44737 41644 42430   BB bb 44026 44737 41719 42430",
          "1869:   BB bb 44032 44737 41725 42430   BB bb 44104 44737 41797 42430",
          "1870:   CC aa 43978 44737 39293 40052   CC aa 44130 44737 39445 40052",
          "1871:   CC aa 44307 44737 39622 40052   CC aa 44579 44737 39894 40052",
          "1872:   CC bb 43915 44737 36357 37179   CC bb 44391 44737 36833 37179",
          "1873:   DD aa 39207 40052 31867 32712   DD aa 39796 40052 32456 32712",
          "1874:   DD aa 39828 40052 32488 32712   DD bb 39093 40052 29799 30758",
          "1875:   DD bb 39258 40052 29964 30758   DD bb 39336 40052 30042 30758",
          "1876:   DD bb 39814 40052 30520 30758   EE aa 31935 32712 28813 29590",
          "1877:   EE aa 32599 32712 29477 29590   EE bb 31944 32712 27497 28265",
          "1878:   EE bb 32083 32712 27636 28265   EE bb 32460 32712 28013 28265",
          "1879:   FF aa 28920 29590 24888 25558   FF aa 28923 29590 24891 25558",
          "1880:   FF aa 28972 29590 24940 25558   FF aa 29382 29590 25350 25558",
          "1881:   FF bb 28652 29590 23730 24668   FF bb 28720 29590 23798 24668",
          "1882:   FF bb 28864 29590 23942 24668   FF bb 29016 29590 24094 24668",
          "1883:   FF bb 29295 29590 24373 24668   FF bb 29488 29590 24566 24668",
          "1884:   GG aa 24924 25558 22385 23019   GG aa 25078 25558 22539 23019",
          "1885:   GG aa 25223 25558 22684 23019   GG aa 25410 25558 22871 23019",
          "1886:   GG bb 24620 25558 19918 20856   GG bb 24629 25558 19927 20856",
          "1887:   GG bb 24714 25558 20012 20856   GG bb 25398 25558 20696 20856",
          "1888:   HH aa 22040 23019 16372 17351   HH aa 22229 23019 16561 17351",
          "1889:   HH aa 22539 23019 16871 17351   HH bb 22056 23019 14791 15754",
          "1890:   HH bb 22289 23019 15024 15754   HH bb 22336 23019 15071 15754",
          "1891:   HH bb 22664 23019 15399 15754   HH bb 22689 23019 15424 15754",
          "1892:   HH bb 22886 23019 15621 15754   II aa 16699 17351 12231 12883",
          "1893:   II aa 16953 17351 12485 12883   II bb 16546 17351 9829 10634",
          "1894:   II bb 16680 17351 9963 10634   II bb 16908 17351 10191 10634",
          "1895:   II bb 16930 17351 10213 10634   II bb 17101 17351 10384 10634",
          "1896:   JJ aa 11984 12883 6541 7440   JJ aa 12115 12883 6672 7440",
          "1897:   JJ aa 12649 12883 7206 7440   JJ aa 12770 12883 7327 7440",
          "1898:   JJ bb 12044 12883 5551 6390   JJ bb 12529 12883 6036 6390",
          "1899:   JJ bb 12547 12883 6054 6390   JJ bb 12626 12883 6133 6390}",
          "",
          "---------------",
          "--- Hunk 12 ---",
          "[Context before]",
          "1503:   JJ aa 1115   JJ aa 1246   JJ aa 1780   JJ aa 1901   JJ bb 947   JJ bb 1432",
          "1504:   JJ bb 1450   JJ bb 1529}",
          "1506: do_execsql_test 1.13.1 {",
          "1507:   SELECT a, b, sum(c) OVER (ORDER BY a  GROUPS BETWEEN CURRENT ROW         AND 1 FOLLOWING ) FROM t3 ORDER BY 1, 2, 3;",
          "1508: } {AA aa 12025   AA aa 12025   AA aa 12025   AA aa 12025   AA bb 12025",
          "",
          "[Removed Lines]",
          "[None]",
          "",
          "[Added Lines]",
          "2018: do_execsql_test 1.12.8 {",
          "2019:   SELECT a, b,",
          "2020:       sum(c) OVER (ORDER BY a  GROUPS BETWEEN CURRENT ROW         AND 0 FOLLOWING  EXCLUDE CURRENT ROW),",
          "2021:       sum(c) OVER (ORDER BY a  GROUPS BETWEEN CURRENT ROW         AND 0 FOLLOWING ),",
          "2022:       sum(c) OVER (ORDER BY a,b  GROUPS BETWEEN CURRENT ROW         AND 0 FOLLOWING  EXCLUDE CURRENT ROW),",
          "2023:       sum(c) OVER (ORDER BY a,b  GROUPS BETWEEN CURRENT ROW         AND 0 FOLLOWING )",
          "2024:     FROM t3 ORDER BY 1, 2, 3;",
          "2025: } {AA aa 3751 4685 1373 2307   AA aa 3774 4685 1396 2307",
          "2026:   AA aa 4446 4685 2068 2307   AA aa 4462 4685 2084 2307",
          "2027:   AA bb 3815 4685 1508 2378   AA bb 4058 4685 1751 2378",
          "2028:   AA bb 4113 4685 1806 2378   AA bb 4376 4685 2069 2378",
          "2029:   BB aa 6578 7340 2111 2873   BB aa 6680 7340 2213 2873",
          "2030:   BB aa 6928 7340 2461 2873   BB aa 6941 7340 2474 2873",
          "2031:   BB aa 6947 7340 2480 2873   BB aa 7093 7340 2626 2873",
          "2032:   BB bb 6500 7340 3627 4467   BB bb 6548 7340 3675 4467",
          "2033:   BB bb 6554 7340 3681 4467   BB bb 6629 7340 3756 4467",
          "2034:   BB bb 6635 7340 3762 4467   BB bb 6707 7340 3834 4467",
          "2035:   CC aa 2363 3122 1195 1954   CC aa 2515 3122 1347 1954",
          "2036:   CC aa 2692 3122 1524 1954   CC aa 2964 3122 1796 1954",
          "2037:   CC bb 2300 3122 346 1168   CC bb 2776 3122 822 1168",
          "2038:   DD aa 3187 4032 480 1325   DD aa 3776 4032 1069 1325",
          "2039:   DD aa 3808 4032 1101 1325   DD bb 3073 4032 1748 2707",
          "2040:   DD bb 3238 4032 1913 2707   DD bb 3316 4032 1991 2707",
          "2041:   DD bb 3794 4032 2469 2707   EE aa 1762 2539 113 890",
          "2042:   EE aa 2426 2539 777 890   EE bb 1771 2539 881 1649",
          "2043:   EE bb 1910 2539 1020 1649   EE bb 2287 2539 1397 1649",
          "2044:   FF aa 4998 5668 1493 2163   FF aa 5001 5668 1496 2163",
          "2045:   FF aa 5050 5668 1545 2163   FF aa 5460 5668 1955 2163",
          "2046:   FF bb 4730 5668 2567 3505   FF bb 4798 5668 2635 3505",
          "2047:   FF bb 4942 5668 2779 3505   FF bb 5094 5668 2931 3505",
          "2048:   FF bb 5373 5668 3210 3505   FF bb 5566 5668 3403 3505",
          "2049:   GG aa 3834 4468 963 1597   GG aa 3988 4468 1117 1597",
          "2050:   GG aa 4133 4468 1262 1597   GG aa 4320 4468 1449 1597",
          "2051:   GG bb 3530 4468 1933 2871   GG bb 3539 4468 1942 2871",
          "2052:   GG bb 3624 4468 2027 2871   GG bb 4308 4468 2711 2871",
          "2053:   HH aa 4464 5443 1270 2249   HH aa 4653 5443 1459 2249",
          "2054:   HH aa 4963 5443 1769 2249   HH bb 4480 5443 2231 3194",
          "2055:   HH bb 4713 5443 2464 3194   HH bb 4760 5443 2511 3194",
          "2056:   HH bb 5088 5443 2839 3194   HH bb 5113 5443 2864 3194",
          "2057:   HH bb 5310 5443 3061 3194   II aa 2988 3640 398 1050",
          "2058:   II aa 3242 3640 652 1050   II bb 2835 3640 1785 2590",
          "2059:   II bb 2969 3640 1919 2590   II bb 3197 3640 2147 2590",
          "2060:   II bb 3219 3640 2169 2590   II bb 3390 3640 2340 2590",
          "2061:   JJ aa 2901 3800 1115 2014   JJ aa 3032 3800 1246 2014",
          "2062:   JJ aa 3566 3800 1780 2014   JJ aa 3687 3800 1901 2014",
          "2063:   JJ bb 2961 3800 947 1786   JJ bb 3446 3800 1432 1786",
          "2064:   JJ bb 3464 3800 1450 1786   JJ bb 3543 3800 1529 1786}",
          "",
          "---------------",
          "--- Hunk 13 ---",
          "[Context before]",
          "1621:   JJ aa 2901   JJ aa 3032   JJ aa 3566   JJ aa 3687   JJ bb 947   JJ bb 1432",
          "1622:   JJ bb 1450   JJ bb 1529}",
          "1624: do_execsql_test 1.14.1 {",
          "1625:   SELECT a, b, sum(c) OVER (ORDER BY a  GROUPS BETWEEN CURRENT ROW         AND 100 FOLLOWING ) FROM t3 ORDER BY 1, 2, 3;",
          "1626: } {AA aa 44737   AA aa 44737   AA aa 44737   AA aa 44737   AA bb 44737",
          "",
          "[Removed Lines]",
          "[None]",
          "",
          "[Added Lines]",
          "2184: do_execsql_test 1.13.8 {",
          "2185:   SELECT a, b,",
          "2186:       sum(c) OVER (ORDER BY a  GROUPS BETWEEN CURRENT ROW         AND 1 FOLLOWING  EXCLUDE CURRENT ROW),",
          "2187:       sum(c) OVER (ORDER BY a  GROUPS BETWEEN CURRENT ROW         AND 1 FOLLOWING ),",
          "2188:       sum(c) OVER (ORDER BY a,b  GROUPS BETWEEN CURRENT ROW         AND 1 FOLLOWING  EXCLUDE CURRENT ROW),",
          "2189:       sum(c) OVER (ORDER BY a,b  GROUPS BETWEEN CURRENT ROW         AND 1 FOLLOWING )",
          "2190:     FROM t3 ORDER BY 1, 2, 3;",
          "2191: } {AA aa 11091 12025 3751 4685   AA aa 11114 12025 3774 4685",
          "2192:   AA aa 11786 12025 4446 4685   AA aa 11802 12025 4462 4685",
          "2193:   AA bb 11155 12025 4381 5251   AA bb 11398 12025 4624 5251",
          "2194:   AA bb 11453 12025 4679 5251   AA bb 11716 12025 4942 5251",
          "2195:   BB aa 9700 10462 6578 7340   BB aa 9802 10462 6680 7340",
          "2196:   BB aa 10050 10462 6928 7340   BB aa 10063 10462 6941 7340",
          "2197:   BB aa 10069 10462 6947 7340   BB aa 10215 10462 7093 7340",
          "2198:   BB bb 9622 10462 5581 6421   BB bb 9670 10462 5629 6421",
          "2199:   BB bb 9676 10462 5635 6421   BB bb 9751 10462 5710 6421",
          "2200:   BB bb 9757 10462 5716 6421   BB bb 9829 10462 5788 6421",
          "2201:   CC aa 6395 7154 2363 3122   CC aa 6547 7154 2515 3122",
          "2202:   CC aa 6724 7154 2692 3122   CC aa 6996 7154 2964 3122",
          "2203:   CC bb 6332 7154 1671 2493   CC bb 6808 7154 2147 2493",
          "2204:   DD aa 5726 6571 3187 4032   DD aa 6315 6571 3776 4032",
          "2205:   DD aa 6347 6571 3808 4032   DD bb 5612 6571 2638 3597",
          "2206:   DD bb 5777 6571 2803 3597   DD bb 5855 6571 2881 3597",
          "2207:   DD bb 6333 6571 3359 3597   EE aa 7430 8207 1762 2539",
          "2208:   EE aa 8094 8207 2426 2539   EE bb 7439 8207 3044 3812",
          "2209:   EE bb 7578 8207 3183 3812   EE bb 7955 8207 3560 3812",
          "2210:   FF aa 9466 10136 4998 5668   FF aa 9469 10136 5001 5668",
          "2211:   FF aa 9518 10136 5050 5668   FF aa 9928 10136 5460 5668",
          "2212:   FF bb 9198 10136 4164 5102   FF bb 9266 10136 4232 5102",
          "2213:   FF bb 9410 10136 4376 5102   FF bb 9562 10136 4528 5102",
          "2214:   FF bb 9841 10136 4807 5102   FF bb 10034 10136 5000 5102",
          "2215:   GG aa 9277 9911 3834 4468   GG aa 9431 9911 3988 4468",
          "2216:   GG aa 9576 9911 4133 4468   GG aa 9763 9911 4320 4468",
          "2217:   GG bb 8973 9911 4182 5120   GG bb 8982 9911 4191 5120",
          "2218:   GG bb 9067 9911 4276 5120   GG bb 9751 9911 4960 5120",
          "2219:   HH aa 8104 9083 4464 5443   HH aa 8293 9083 4653 5443",
          "2220:   HH aa 8603 9083 4963 5443   HH bb 8120 9083 3281 4244",
          "2221:   HH bb 8353 9083 3514 4244   HH bb 8400 9083 3561 4244",
          "2222:   HH bb 8728 9083 3889 4244   HH bb 8753 9083 3914 4244",
          "2223:   HH bb 8950 9083 4111 4244   II aa 6788 7440 2988 3640",
          "2224:   II aa 7042 7440 3242 3640   II bb 6635 7440 3799 4604",
          "2225:   II bb 6769 7440 3933 4604   II bb 6997 7440 4161 4604",
          "2226:   II bb 7019 7440 4183 4604   II bb 7190 7440 4354 4604",
          "2227:   JJ aa 2901 3800 2901 3800   JJ aa 3032 3800 3032 3800",
          "2228:   JJ aa 3566 3800 3566 3800   JJ aa 3687 3800 3687 3800",
          "2229:   JJ bb 2961 3800 947 1786   JJ bb 3446 3800 1432 1786",
          "2230:   JJ bb 3464 3800 1450 1786   JJ bb 3543 3800 1529 1786}",
          "",
          "---------------",
          "--- Hunk 14 ---",
          "[Context before]",
          "1746:   II bb 6140   JJ aa 2901   JJ aa 3032   JJ aa 3566   JJ aa 3687   JJ bb 947",
          "1747:   JJ bb 1432   JJ bb 1450   JJ bb 1529}",
          "1749: do_execsql_test 1.15.1 {",
          "1750:   SELECT a, b, sum(c) OVER (ORDER BY a  GROUPS BETWEEN CURRENT ROW         AND UNBOUNDED FOLLOWING ) FROM t3 ORDER BY 1, 2, 3;",
          "1751: } {AA aa 44737   AA aa 44737   AA aa 44737   AA aa 44737   AA bb 44737",
          "",
          "[Removed Lines]",
          "[None]",
          "",
          "[Added Lines]",
          "2357: do_execsql_test 1.14.8 {",
          "2358:   SELECT a, b,",
          "2359:       sum(c) OVER (ORDER BY a  GROUPS BETWEEN CURRENT ROW         AND 100 FOLLOWING  EXCLUDE CURRENT ROW),",
          "2360:       sum(c) OVER (ORDER BY a  GROUPS BETWEEN CURRENT ROW         AND 100 FOLLOWING ),",
          "2361:       sum(c) OVER (ORDER BY a,b  GROUPS BETWEEN CURRENT ROW         AND 100 FOLLOWING  EXCLUDE CURRENT ROW),",
          "2362:       sum(c) OVER (ORDER BY a,b  GROUPS BETWEEN CURRENT ROW         AND 100 FOLLOWING )",
          "2363:     FROM t3 ORDER BY 1, 2, 3;",
          "2364: } {AA aa 43803 44737 43803 44737   AA aa 43826 44737 43826 44737",
          "2365:   AA aa 44498 44737 44498 44737   AA aa 44514 44737 44514 44737",
          "2366:   AA bb 43867 44737 41560 42430   AA bb 44110 44737 41803 42430",
          "2367:   AA bb 44165 44737 41858 42430   AA bb 44428 44737 42121 42430",
          "2368:   BB aa 39290 40052 39290 40052   BB aa 39392 40052 39392 40052",
          "2369:   BB aa 39640 40052 39640 40052   BB aa 39653 40052 39653 40052",
          "2370:   BB aa 39659 40052 39659 40052   BB aa 39805 40052 39805 40052",
          "2371:   BB bb 39212 40052 36339 37179   BB bb 39260 40052 36387 37179",
          "2372:   BB bb 39266 40052 36393 37179   BB bb 39341 40052 36468 37179",
          "2373:   BB bb 39347 40052 36474 37179   BB bb 39419 40052 36546 37179",
          "2374:   CC aa 31953 32712 31953 32712   CC aa 32105 32712 32105 32712",
          "2375:   CC aa 32282 32712 32282 32712   CC aa 32554 32712 32554 32712",
          "2376:   CC bb 31890 32712 29936 30758   CC bb 32366 32712 30412 30758",
          "2377:   DD aa 28745 29590 28745 29590   DD aa 29334 29590 29334 29590",
          "2378:   DD aa 29366 29590 29366 29590   DD bb 28631 29590 27306 28265",
          "2379:   DD bb 28796 29590 27471 28265   DD bb 28874 29590 27549 28265",
          "2380:   DD bb 29352 29590 28027 28265   EE aa 24781 25558 24781 25558",
          "2381:   EE aa 25445 25558 25445 25558   EE bb 24790 25558 23900 24668",
          "2382:   EE bb 24929 25558 24039 24668   EE bb 25306 25558 24416 24668",
          "2383:   FF aa 22349 23019 22349 23019   FF aa 22352 23019 22352 23019",
          "2384:   FF aa 22401 23019 22401 23019   FF aa 22811 23019 22811 23019",
          "2385:   FF bb 22081 23019 19918 20856   FF bb 22149 23019 19986 20856",
          "2386:   FF bb 22293 23019 20130 20856   FF bb 22445 23019 20282 20856",
          "2387:   FF bb 22724 23019 20561 20856   FF bb 22917 23019 20754 20856",
          "2388:   GG aa 16717 17351 16717 17351   GG aa 16871 17351 16871 17351",
          "2389:   GG aa 17016 17351 17016 17351   GG aa 17203 17351 17203 17351",
          "2390:   GG bb 16413 17351 14816 15754   GG bb 16422 17351 14825 15754",
          "2391:   GG bb 16507 17351 14910 15754   GG bb 17191 17351 15594 15754",
          "2392:   HH aa 11904 12883 11904 12883   HH aa 12093 12883 12093 12883",
          "2393:   HH aa 12403 12883 12403 12883   HH bb 11920 12883 9671 10634",
          "2394:   HH bb 12153 12883 9904 10634   HH bb 12200 12883 9951 10634",
          "2395:   HH bb 12528 12883 10279 10634   HH bb 12553 12883 10304 10634",
          "2396:   HH bb 12750 12883 10501 10634   II aa 6788 7440 6788 7440",
          "2397:   II aa 7042 7440 7042 7440   II bb 6635 7440 5585 6390",
          "2398:   II bb 6769 7440 5719 6390   II bb 6997 7440 5947 6390",
          "2399:   II bb 7019 7440 5969 6390   II bb 7190 7440 6140 6390",
          "2400:   JJ aa 2901 3800 2901 3800   JJ aa 3032 3800 3032 3800",
          "2401:   JJ aa 3566 3800 3566 3800   JJ aa 3687 3800 3687 3800",
          "2402:   JJ bb 2961 3800 947 1786   JJ bb 3446 3800 1432 1786",
          "2403:   JJ bb 3464 3800 1450 1786   JJ bb 3543 3800 1529 1786}",
          "",
          "---------------",
          "--- Hunk 15 ---",
          "[Context before]",
          "1871:   II bb 6140   JJ aa 2901   JJ aa 3032   JJ aa 3566   JJ aa 3687   JJ bb 947",
          "1872:   JJ bb 1432   JJ bb 1450   JJ bb 1529}",
          "1874: do_execsql_test 1.16.1 {",
          "1875:   SELECT a, b, sum(c) OVER (ORDER BY a  GROUPS BETWEEN 0 FOLLOWING         AND 0 FOLLOWING ) FROM t3 ORDER BY 1, 2, 3;",
          "1876: } {AA aa 4685   AA aa 4685   AA aa 4685   AA aa 4685   AA bb 4685   AA bb 4685",
          "",
          "[Removed Lines]",
          "[None]",
          "",
          "[Added Lines]",
          "2530: do_execsql_test 1.15.8 {",
          "2531:   SELECT a, b,",
          "2532:       sum(c) OVER (ORDER BY a  GROUPS BETWEEN CURRENT ROW         AND UNBOUNDED FOLLOWING  EXCLUDE CURRENT ROW),",
          "2533:       sum(c) OVER (ORDER BY a  GROUPS BETWEEN CURRENT ROW         AND UNBOUNDED FOLLOWING ),",
          "2534:       sum(c) OVER (ORDER BY a,b  GROUPS BETWEEN CURRENT ROW         AND UNBOUNDED FOLLOWING  EXCLUDE CURRENT ROW),",
          "2535:       sum(c) OVER (ORDER BY a,b  GROUPS BETWEEN CURRENT ROW         AND UNBOUNDED FOLLOWING )",
          "2536:     FROM t3 ORDER BY 1, 2, 3;",
          "2537: } {AA aa 43803 44737 43803 44737   AA aa 43826 44737 43826 44737",
          "2538:   AA aa 44498 44737 44498 44737   AA aa 44514 44737 44514 44737",
          "2539:   AA bb 43867 44737 41560 42430   AA bb 44110 44737 41803 42430",
          "2540:   AA bb 44165 44737 41858 42430   AA bb 44428 44737 42121 42430",
          "2541:   BB aa 39290 40052 39290 40052   BB aa 39392 40052 39392 40052",
          "2542:   BB aa 39640 40052 39640 40052   BB aa 39653 40052 39653 40052",
          "2543:   BB aa 39659 40052 39659 40052   BB aa 39805 40052 39805 40052",
          "2544:   BB bb 39212 40052 36339 37179   BB bb 39260 40052 36387 37179",
          "2545:   BB bb 39266 40052 36393 37179   BB bb 39341 40052 36468 37179",
          "2546:   BB bb 39347 40052 36474 37179   BB bb 39419 40052 36546 37179",
          "2547:   CC aa 31953 32712 31953 32712   CC aa 32105 32712 32105 32712",
          "2548:   CC aa 32282 32712 32282 32712   CC aa 32554 32712 32554 32712",
          "2549:   CC bb 31890 32712 29936 30758   CC bb 32366 32712 30412 30758",
          "2550:   DD aa 28745 29590 28745 29590   DD aa 29334 29590 29334 29590",
          "2551:   DD aa 29366 29590 29366 29590   DD bb 28631 29590 27306 28265",
          "2552:   DD bb 28796 29590 27471 28265   DD bb 28874 29590 27549 28265",
          "2553:   DD bb 29352 29590 28027 28265   EE aa 24781 25558 24781 25558",
          "2554:   EE aa 25445 25558 25445 25558   EE bb 24790 25558 23900 24668",
          "2555:   EE bb 24929 25558 24039 24668   EE bb 25306 25558 24416 24668",
          "2556:   FF aa 22349 23019 22349 23019   FF aa 22352 23019 22352 23019",
          "2557:   FF aa 22401 23019 22401 23019   FF aa 22811 23019 22811 23019",
          "2558:   FF bb 22081 23019 19918 20856   FF bb 22149 23019 19986 20856",
          "2559:   FF bb 22293 23019 20130 20856   FF bb 22445 23019 20282 20856",
          "2560:   FF bb 22724 23019 20561 20856   FF bb 22917 23019 20754 20856",
          "2561:   GG aa 16717 17351 16717 17351   GG aa 16871 17351 16871 17351",
          "2562:   GG aa 17016 17351 17016 17351   GG aa 17203 17351 17203 17351",
          "2563:   GG bb 16413 17351 14816 15754   GG bb 16422 17351 14825 15754",
          "2564:   GG bb 16507 17351 14910 15754   GG bb 17191 17351 15594 15754",
          "2565:   HH aa 11904 12883 11904 12883   HH aa 12093 12883 12093 12883",
          "2566:   HH aa 12403 12883 12403 12883   HH bb 11920 12883 9671 10634",
          "2567:   HH bb 12153 12883 9904 10634   HH bb 12200 12883 9951 10634",
          "2568:   HH bb 12528 12883 10279 10634   HH bb 12553 12883 10304 10634",
          "2569:   HH bb 12750 12883 10501 10634   II aa 6788 7440 6788 7440",
          "2570:   II aa 7042 7440 7042 7440   II bb 6635 7440 5585 6390",
          "2571:   II bb 6769 7440 5719 6390   II bb 6997 7440 5947 6390",
          "2572:   II bb 7019 7440 5969 6390   II bb 7190 7440 6140 6390",
          "2573:   JJ aa 2901 3800 2901 3800   JJ aa 3032 3800 3032 3800",
          "2574:   JJ aa 3566 3800 3566 3800   JJ aa 3687 3800 3687 3800",
          "2575:   JJ bb 2961 3800 947 1786   JJ bb 3446 3800 1432 1786",
          "2576:   JJ bb 3464 3800 1450 1786   JJ bb 3543 3800 1529 1786}",
          "",
          "---------------",
          "--- Hunk 16 ---",
          "[Context before]",
          "1988:   JJ aa 1115   JJ aa 1246   JJ aa 1780   JJ aa 1901   JJ bb 947   JJ bb 1432",
          "1989:   JJ bb 1450   JJ bb 1529}",
          "1991: do_execsql_test 1.17.1 {",
          "1992:   SELECT a, b, sum(c) OVER (ORDER BY a  GROUPS BETWEEN 1 FOLLOWING         AND 0 FOLLOWING ) FROM t3 ORDER BY 1, 2, 3;",
          "1993: } {AA aa {}   AA aa {}   AA aa {}   AA aa {}   AA bb {}   AA bb {}   AA bb {}",
          "",
          "[Removed Lines]",
          "[None]",
          "",
          "[Added Lines]",
          "2695: do_execsql_test 1.16.8 {",
          "2696:   SELECT a, b,",
          "2697:       sum(c) OVER (ORDER BY a  GROUPS BETWEEN 0 FOLLOWING         AND 0 FOLLOWING  EXCLUDE CURRENT ROW),",
          "2698:       sum(c) OVER (ORDER BY a  GROUPS BETWEEN 0 FOLLOWING         AND 0 FOLLOWING ),",
          "2699:       sum(c) OVER (ORDER BY a,b  GROUPS BETWEEN 0 FOLLOWING         AND 0 FOLLOWING  EXCLUDE CURRENT ROW),",
          "2700:       sum(c) OVER (ORDER BY a,b  GROUPS BETWEEN 0 FOLLOWING         AND 0 FOLLOWING )",
          "2701:     FROM t3 ORDER BY 1, 2, 3;",
          "2702: } {AA aa 3751 4685 1373 2307   AA aa 3774 4685 1396 2307",
          "2703:   AA aa 4446 4685 2068 2307   AA aa 4462 4685 2084 2307",
          "2704:   AA bb 3815 4685 1508 2378   AA bb 4058 4685 1751 2378",
          "2705:   AA bb 4113 4685 1806 2378   AA bb 4376 4685 2069 2378",
          "2706:   BB aa 6578 7340 2111 2873   BB aa 6680 7340 2213 2873",
          "2707:   BB aa 6928 7340 2461 2873   BB aa 6941 7340 2474 2873",
          "2708:   BB aa 6947 7340 2480 2873   BB aa 7093 7340 2626 2873",
          "2709:   BB bb 6500 7340 3627 4467   BB bb 6548 7340 3675 4467",
          "2710:   BB bb 6554 7340 3681 4467   BB bb 6629 7340 3756 4467",
          "2711:   BB bb 6635 7340 3762 4467   BB bb 6707 7340 3834 4467",
          "2712:   CC aa 2363 3122 1195 1954   CC aa 2515 3122 1347 1954",
          "2713:   CC aa 2692 3122 1524 1954   CC aa 2964 3122 1796 1954",
          "2714:   CC bb 2300 3122 346 1168   CC bb 2776 3122 822 1168",
          "2715:   DD aa 3187 4032 480 1325   DD aa 3776 4032 1069 1325",
          "2716:   DD aa 3808 4032 1101 1325   DD bb 3073 4032 1748 2707",
          "2717:   DD bb 3238 4032 1913 2707   DD bb 3316 4032 1991 2707",
          "2718:   DD bb 3794 4032 2469 2707   EE aa 1762 2539 113 890",
          "2719:   EE aa 2426 2539 777 890   EE bb 1771 2539 881 1649",
          "2720:   EE bb 1910 2539 1020 1649   EE bb 2287 2539 1397 1649",
          "2721:   FF aa 4998 5668 1493 2163   FF aa 5001 5668 1496 2163",
          "2722:   FF aa 5050 5668 1545 2163   FF aa 5460 5668 1955 2163",
          "2723:   FF bb 4730 5668 2567 3505   FF bb 4798 5668 2635 3505",
          "2724:   FF bb 4942 5668 2779 3505   FF bb 5094 5668 2931 3505",
          "2725:   FF bb 5373 5668 3210 3505   FF bb 5566 5668 3403 3505",
          "2726:   GG aa 3834 4468 963 1597   GG aa 3988 4468 1117 1597",
          "2727:   GG aa 4133 4468 1262 1597   GG aa 4320 4468 1449 1597",
          "2728:   GG bb 3530 4468 1933 2871   GG bb 3539 4468 1942 2871",
          "2729:   GG bb 3624 4468 2027 2871   GG bb 4308 4468 2711 2871",
          "2730:   HH aa 4464 5443 1270 2249   HH aa 4653 5443 1459 2249",
          "2731:   HH aa 4963 5443 1769 2249   HH bb 4480 5443 2231 3194",
          "2732:   HH bb 4713 5443 2464 3194   HH bb 4760 5443 2511 3194",
          "2733:   HH bb 5088 5443 2839 3194   HH bb 5113 5443 2864 3194",
          "2734:   HH bb 5310 5443 3061 3194   II aa 2988 3640 398 1050",
          "2735:   II aa 3242 3640 652 1050   II bb 2835 3640 1785 2590",
          "2736:   II bb 2969 3640 1919 2590   II bb 3197 3640 2147 2590",
          "2737:   II bb 3219 3640 2169 2590   II bb 3390 3640 2340 2590",
          "2738:   JJ aa 2901 3800 1115 2014   JJ aa 3032 3800 1246 2014",
          "2739:   JJ aa 3566 3800 1780 2014   JJ aa 3687 3800 1901 2014",
          "2740:   JJ bb 2961 3800 947 1786   JJ bb 3446 3800 1432 1786",
          "2741:   JJ bb 3464 3800 1450 1786   JJ bb 3543 3800 1529 1786}",
          "",
          "---------------",
          "--- Hunk 17 ---",
          "[Context before]",
          "2093:   II bb {}   II bb {}   JJ aa {}   JJ aa {}   JJ aa {}   JJ aa {}   JJ bb {}",
          "2094:   JJ bb {}   JJ bb {}   JJ bb {}}",
          "2096: do_execsql_test 1.18.1 {",
          "2097:   SELECT a, b, sum(c) OVER (ORDER BY a  GROUPS BETWEEN 1 FOLLOWING         AND 5 FOLLOWING ) FROM t3 ORDER BY 1, 2, 3;",
          "2098: } {AA aa 22701   AA aa 22701   AA aa 22701   AA aa 22701   AA bb 22701",
          "",
          "[Removed Lines]",
          "[None]",
          "",
          "[Added Lines]",
          "2848: do_execsql_test 1.17.8 {",
          "2849:   SELECT a, b,",
          "2850:       sum(c) OVER (ORDER BY a  GROUPS BETWEEN 1 FOLLOWING         AND 0 FOLLOWING  EXCLUDE CURRENT ROW),",
          "2851:       sum(c) OVER (ORDER BY a  GROUPS BETWEEN 1 FOLLOWING         AND 0 FOLLOWING ),",
          "2852:       sum(c) OVER (ORDER BY a,b  GROUPS BETWEEN 1 FOLLOWING         AND 0 FOLLOWING  EXCLUDE CURRENT ROW),",
          "2853:       sum(c) OVER (ORDER BY a,b  GROUPS BETWEEN 1 FOLLOWING         AND 0 FOLLOWING )",
          "2854:     FROM t3 ORDER BY 1, 2, 3;",
          "2855: } {AA aa {} {} {} {}   AA aa {} {} {} {}   AA aa {} {} {} {}",
          "2856:   AA aa {} {} {} {}   AA bb {} {} {} {}   AA bb {} {} {} {}",
          "2857:   AA bb {} {} {} {}   AA bb {} {} {} {}   BB aa {} {} {} {}",
          "2858:   BB aa {} {} {} {}   BB aa {} {} {} {}   BB aa {} {} {} {}",
          "2859:   BB aa {} {} {} {}   BB aa {} {} {} {}   BB bb {} {} {} {}",
          "2860:   BB bb {} {} {} {}   BB bb {} {} {} {}   BB bb {} {} {} {}",
          "2861:   BB bb {} {} {} {}   BB bb {} {} {} {}   CC aa {} {} {} {}",
          "2862:   CC aa {} {} {} {}   CC aa {} {} {} {}   CC aa {} {} {} {}",
          "2863:   CC bb {} {} {} {}   CC bb {} {} {} {}   DD aa {} {} {} {}",
          "2864:   DD aa {} {} {} {}   DD aa {} {} {} {}   DD bb {} {} {} {}",
          "2865:   DD bb {} {} {} {}   DD bb {} {} {} {}   DD bb {} {} {} {}",
          "2866:   EE aa {} {} {} {}   EE aa {} {} {} {}   EE bb {} {} {} {}",
          "2867:   EE bb {} {} {} {}   EE bb {} {} {} {}   FF aa {} {} {} {}",
          "2868:   FF aa {} {} {} {}   FF aa {} {} {} {}   FF aa {} {} {} {}",
          "2869:   FF bb {} {} {} {}   FF bb {} {} {} {}   FF bb {} {} {} {}",
          "2870:   FF bb {} {} {} {}   FF bb {} {} {} {}   FF bb {} {} {} {}",
          "2871:   GG aa {} {} {} {}   GG aa {} {} {} {}   GG aa {} {} {} {}",
          "2872:   GG aa {} {} {} {}   GG bb {} {} {} {}   GG bb {} {} {} {}",
          "2873:   GG bb {} {} {} {}   GG bb {} {} {} {}   HH aa {} {} {} {}",
          "2874:   HH aa {} {} {} {}   HH aa {} {} {} {}   HH bb {} {} {} {}",
          "2875:   HH bb {} {} {} {}   HH bb {} {} {} {}   HH bb {} {} {} {}",
          "2876:   HH bb {} {} {} {}   HH bb {} {} {} {}   II aa {} {} {} {}",
          "2877:   II aa {} {} {} {}   II bb {} {} {} {}   II bb {} {} {} {}",
          "2878:   II bb {} {} {} {}   II bb {} {} {} {}   II bb {} {} {} {}",
          "2879:   JJ aa {} {} {} {}   JJ aa {} {} {} {}   JJ aa {} {} {} {}",
          "2880:   JJ aa {} {} {} {}   JJ bb {} {} {} {}   JJ bb {} {} {} {}",
          "2881:   JJ bb {} {} {} {}   JJ bb {} {} {} {}}",
          "",
          "---------------",
          "--- Hunk 18 ---",
          "[Context before]",
          "2218:   JJ aa 1786   JJ aa 1786   JJ aa 1786   JJ bb {}   JJ bb {}   JJ bb {}",
          "2219:   JJ bb {}}",
          "2221: do_execsql_test 1.19.1 {",
          "2222:   SELECT a, b, sum(c) OVER (ORDER BY a  GROUPS BETWEEN 1 FOLLOWING         AND UNBOUNDED FOLLOWING ) FROM t3 ORDER BY 1, 2, 3;",
          "2223: } {AA aa 40052   AA aa 40052   AA aa 40052   AA aa 40052   AA bb 40052",
          "",
          "[Removed Lines]",
          "[None]",
          "",
          "[Added Lines]",
          "3008: do_execsql_test 1.18.8 {",
          "3009:   SELECT a, b,",
          "3010:       sum(c) OVER (ORDER BY a  GROUPS BETWEEN 1 FOLLOWING         AND 5 FOLLOWING  EXCLUDE CURRENT ROW),",
          "3011:       sum(c) OVER (ORDER BY a  GROUPS BETWEEN 1 FOLLOWING         AND 5 FOLLOWING ),",
          "3012:       sum(c) OVER (ORDER BY a,b  GROUPS BETWEEN 1 FOLLOWING         AND 5 FOLLOWING  EXCLUDE CURRENT ROW),",
          "3013:       sum(c) OVER (ORDER BY a,b  GROUPS BETWEEN 1 FOLLOWING         AND 5 FOLLOWING )",
          "3014:     FROM t3 ORDER BY 1, 2, 3;",
          "3015: } {AA aa 22701 22701 12840 12840   AA aa 22701 22701 12840 12840",
          "3016:   AA aa 22701 22701 12840 12840   AA aa 22701 22701 12840 12840",
          "3017:   AA bb 22701 22701 11787 11787   AA bb 22701 22701 11787 11787",
          "3018:   AA bb 22701 22701 11787 11787   AA bb 22701 22701 11787 11787",
          "3019:   BB aa 19829 19829 11621 11621   BB aa 19829 19829 11621 11621",
          "3020:   BB aa 19829 19829 11621 11621   BB aa 19829 19829 11621 11621",
          "3021:   BB aa 19829 19829 11621 11621   BB aa 19829 19829 11621 11621",
          "3022:   BB bb 19829 19829 8044 8044   BB bb 19829 19829 8044 8044",
          "3023:   BB bb 19829 19829 8044 8044   BB bb 19829 19829 8044 8044",
          "3024:   BB bb 19829 19829 8044 8044   BB bb 19829 19829 8044 8044",
          "3025:   CC aa 22150 22150 7739 7739   CC aa 22150 22150 7739 7739",
          "3026:   CC aa 22150 22150 7739 7739   CC aa 22150 22150 7739 7739",
          "3027:   CC bb 22150 22150 8734 8734   CC bb 22150 22150 8734 8734",
          "3028:   DD aa 21758 21758 10914 10914   DD aa 21758 21758 10914 10914",
          "3029:   DD aa 21758 21758 10914 10914   DD bb 21758 21758 9804 9804",
          "3030:   DD bb 21758 21758 9804 9804   DD bb 21758 21758 9804 9804",
          "3031:   DD bb 21758 21758 9804 9804   EE aa 23019 23019 11785 11785",
          "3032:   EE aa 23019 23019 11785 11785   EE bb 23019 23019 12385 12385",
          "3033:   EE bb 23019 23019 12385 12385   EE bb 23019 23019 12385 12385",
          "3034:   FF aa 17351 17351 13416 13416   FF aa 17351 17351 13416 13416",
          "3035:   FF aa 17351 17351 13416 13416   FF aa 17351 17351 13416 13416",
          "3036:   FF bb 17351 17351 10961 10961   FF bb 17351 17351 10961 10961",
          "3037:   FF bb 17351 17351 10961 10961   FF bb 17351 17351 10961 10961",
          "3038:   FF bb 17351 17351 10961 10961   FF bb 17351 17351 10961 10961",
          "3039:   GG aa 12883 12883 11954 11954   GG aa 12883 12883 11954 11954",
          "3040:   GG aa 12883 12883 11954 11954   GG aa 12883 12883 11954 11954",
          "3041:   GG bb 12883 12883 11097 11097   GG bb 12883 12883 11097 11097",
          "3042:   GG bb 12883 12883 11097 11097   GG bb 12883 12883 11097 11097",
          "3043:   HH aa 7440 7440 10634 10634   HH aa 7440 7440 10634 10634",
          "3044:   HH aa 7440 7440 10634 10634   HH bb 7440 7440 7440 7440",
          "3045:   HH bb 7440 7440 7440 7440   HH bb 7440 7440 7440 7440",
          "3046:   HH bb 7440 7440 7440 7440   HH bb 7440 7440 7440 7440",
          "3047:   HH bb 7440 7440 7440 7440   II aa 3800 3800 6390 6390",
          "3048:   II aa 3800 3800 6390 6390   II bb 3800 3800 3800 3800",
          "3049:   II bb 3800 3800 3800 3800   II bb 3800 3800 3800 3800",
          "3050:   II bb 3800 3800 3800 3800   II bb 3800 3800 3800 3800",
          "3051:   JJ aa {} {} 1786 1786   JJ aa {} {} 1786 1786   JJ aa {} {} 1786 1786",
          "3052:   JJ aa {} {} 1786 1786   JJ bb {} {} {} {}   JJ bb {} {} {} {}",
          "3053:   JJ bb {} {} {} {}   JJ bb {} {} {} {}}",
          "",
          "---------------",
          "--- Hunk 19 ---",
          "[Context before]",
          "2343:   JJ aa 1786   JJ aa 1786   JJ aa 1786   JJ aa 1786   JJ bb {}   JJ bb {}",
          "2344:   JJ bb {}   JJ bb {}}",
          "2346: do_execsql_test 2.1.1 {",
          "2347:   SELECT row_number() OVER win",
          "2348:     FROM t3",
          "",
          "[Removed Lines]",
          "[None]",
          "",
          "[Added Lines]",
          "3180: do_execsql_test 1.19.8 {",
          "3181:   SELECT a, b,",
          "3182:       sum(c) OVER (ORDER BY a  GROUPS BETWEEN 1 FOLLOWING         AND UNBOUNDED FOLLOWING  EXCLUDE CURRENT ROW),",
          "3183:       sum(c) OVER (ORDER BY a  GROUPS BETWEEN 1 FOLLOWING         AND UNBOUNDED FOLLOWING ),",
          "3184:       sum(c) OVER (ORDER BY a,b  GROUPS BETWEEN 1 FOLLOWING         AND UNBOUNDED FOLLOWING  EXCLUDE CURRENT ROW),",
          "3185:       sum(c) OVER (ORDER BY a,b  GROUPS BETWEEN 1 FOLLOWING         AND UNBOUNDED FOLLOWING )",
          "3186:     FROM t3 ORDER BY 1, 2, 3;",
          "3187: } {AA aa 40052 40052 42430 42430   AA aa 40052 40052 42430 42430",
          "3188:   AA aa 40052 40052 42430 42430   AA aa 40052 40052 42430 42430",
          "3189:   AA bb 40052 40052 40052 40052   AA bb 40052 40052 40052 40052",
          "3190:   AA bb 40052 40052 40052 40052   AA bb 40052 40052 40052 40052",
          "3191:   BB aa 32712 32712 37179 37179   BB aa 32712 32712 37179 37179",
          "3192:   BB aa 32712 32712 37179 37179   BB aa 32712 32712 37179 37179",
          "3193:   BB aa 32712 32712 37179 37179   BB aa 32712 32712 37179 37179",
          "3194:   BB bb 32712 32712 32712 32712   BB bb 32712 32712 32712 32712",
          "3195:   BB bb 32712 32712 32712 32712   BB bb 32712 32712 32712 32712",
          "3196:   BB bb 32712 32712 32712 32712   BB bb 32712 32712 32712 32712",
          "3197:   CC aa 29590 29590 30758 30758   CC aa 29590 29590 30758 30758",
          "3198:   CC aa 29590 29590 30758 30758   CC aa 29590 29590 30758 30758",
          "3199:   CC bb 29590 29590 29590 29590   CC bb 29590 29590 29590 29590",
          "3200:   DD aa 25558 25558 28265 28265   DD aa 25558 25558 28265 28265",
          "3201:   DD aa 25558 25558 28265 28265   DD bb 25558 25558 25558 25558",
          "3202:   DD bb 25558 25558 25558 25558   DD bb 25558 25558 25558 25558",
          "3203:   DD bb 25558 25558 25558 25558   EE aa 23019 23019 24668 24668",
          "3204:   EE aa 23019 23019 24668 24668   EE bb 23019 23019 23019 23019",
          "3205:   EE bb 23019 23019 23019 23019   EE bb 23019 23019 23019 23019",
          "3206:   FF aa 17351 17351 20856 20856   FF aa 17351 17351 20856 20856",
          "3207:   FF aa 17351 17351 20856 20856   FF aa 17351 17351 20856 20856",
          "3208:   FF bb 17351 17351 17351 17351   FF bb 17351 17351 17351 17351",
          "3209:   FF bb 17351 17351 17351 17351   FF bb 17351 17351 17351 17351",
          "3210:   FF bb 17351 17351 17351 17351   FF bb 17351 17351 17351 17351",
          "3211:   GG aa 12883 12883 15754 15754   GG aa 12883 12883 15754 15754",
          "3212:   GG aa 12883 12883 15754 15754   GG aa 12883 12883 15754 15754",
          "3213:   GG bb 12883 12883 12883 12883   GG bb 12883 12883 12883 12883",
          "3214:   GG bb 12883 12883 12883 12883   GG bb 12883 12883 12883 12883",
          "3215:   HH aa 7440 7440 10634 10634   HH aa 7440 7440 10634 10634",
          "3216:   HH aa 7440 7440 10634 10634   HH bb 7440 7440 7440 7440",
          "3217:   HH bb 7440 7440 7440 7440   HH bb 7440 7440 7440 7440",
          "3218:   HH bb 7440 7440 7440 7440   HH bb 7440 7440 7440 7440",
          "3219:   HH bb 7440 7440 7440 7440   II aa 3800 3800 6390 6390",
          "3220:   II aa 3800 3800 6390 6390   II bb 3800 3800 3800 3800",
          "3221:   II bb 3800 3800 3800 3800   II bb 3800 3800 3800 3800",
          "3222:   II bb 3800 3800 3800 3800   II bb 3800 3800 3800 3800",
          "3223:   JJ aa {} {} 1786 1786   JJ aa {} {} 1786 1786   JJ aa {} {} 1786 1786",
          "3224:   JJ aa {} {} 1786 1786   JJ bb {} {} {} {}   JJ bb {} {} {} {}",
          "3225:   JJ bb {} {} {} {}   JJ bb {} {} {} {}}",
          "",
          "---------------"
        ]
      }
    },
    {
      "candidate_hash": "b2075011a7582bfa87ed426d5296cded24ea5095",
      "candidate_info": {
        "commit_hash": "b2075011a7582bfa87ed426d5296cded24ea5095",
        "repo": "sqlite/sqlite",
        "commit_url": "https://github.com/sqlite/sqlite/commit/b2075011a7582bfa87ed426d5296cded24ea5095",
        "files": [
          "ext/fts3/fts3_write.c",
          "manifest",
          "manifest.uuid",
          "test/fts4merge.test"
        ],
        "message": "Avoid an infinite loop in fts3/4 incremental-merge in the case where the lowest level in the database contains segments but no data (because there is a delete-marker for each valid entry). Fix for [bf1aab89].\n\nFossilOrigin-Name: 35beaee059a6cccead4311886ca928d936f23584cf435e35e265e98feea723dc",
        "before_after_code_files": [
          "ext/fts3/fts3_write.c||ext/fts3/fts3_write.c",
          "manifest.uuid||manifest.uuid",
          "test/fts4merge.test||test/fts4merge.test"
        ]
      },
      "candidate_patch_features": {
        "candidate_earlier_than_patch": 1,
        "same_branch_evolution": 1,
        "olp_code_files": {
          "patch": [
            "manifest.uuid||manifest.uuid"
          ],
          "candidate": [
            "manifest.uuid||manifest.uuid"
          ]
        }
      },
      "candidate_diff": {
        "ext/fts3/fts3_write.c||ext/fts3/fts3_write.c": [
          "File: ext/fts3/fts3_write.c -> ext/fts3/fts3_write.c",
          "--- Hunk 1 ---",
          "[Context before]",
          "4950:     }",
          "4951:     if( SQLITE_OK==rc && pCsr->nSegment==nSeg",
          "4952:      && SQLITE_OK==(rc = sqlite3Fts3SegReaderStart(p, pCsr, pFilter))",
          "4954:     ){",
          "4955:       if( bUseHint && iIdx>0 ){",
          "4956:         const char *zKey = pCsr->zTerm;",
          "4957:         int nKey = pCsr->nTerm;",
          "",
          "[Removed Lines]",
          "4953:      && SQLITE_ROW==(rc = sqlite3Fts3SegReaderStep(p, pCsr))",
          "",
          "[Added Lines]",
          "4954:       int bEmpty = 0;",
          "4955:       rc = sqlite3Fts3SegReaderStep(p, pCsr);",
          "4956:       if( rc==SQLITE_OK ){",
          "4957:         bEmpty = 1;",
          "4958:       }else if( rc!=SQLITE_ROW ){",
          "4959:         sqlite3Fts3SegReaderFinish(pCsr);",
          "4960:         break;",
          "4961:       }",
          "",
          "---------------",
          "--- Hunk 2 ---",
          "[Context before]",
          "4963:       if( rc==SQLITE_OK && pWriter->nLeafEst ){",
          "4964:         fts3LogMerge(nSeg, iAbsLevel);",
          "4972:         if( rc==SQLITE_OK ){",
          "",
          "[Removed Lines]",
          "4965:         do {",
          "4966:           rc = fts3IncrmergeAppend(p, pWriter, pCsr);",
          "4967:           if( rc==SQLITE_OK ) rc = sqlite3Fts3SegReaderStep(p, pCsr);",
          "4968:           if( pWriter->nWork>=nRem && rc==SQLITE_ROW ) rc = SQLITE_OK;",
          "4969:         }while( rc==SQLITE_ROW );",
          "",
          "[Added Lines]",
          "4972:         if( bEmpty==0 ){",
          "4973:           do {",
          "4974:             rc = fts3IncrmergeAppend(p, pWriter, pCsr);",
          "4975:             if( rc==SQLITE_OK ) rc = sqlite3Fts3SegReaderStep(p, pCsr);",
          "4976:             if( pWriter->nWork>=nRem && rc==SQLITE_ROW ) rc = SQLITE_OK;",
          "4977:           }while( rc==SQLITE_ROW );",
          "4978:         }",
          "",
          "---------------"
        ],
        "manifest.uuid||manifest.uuid": [
          "File: manifest.uuid -> manifest.uuid",
          "--- Hunk 1 ---",
          "[Context before]",
          "[No context available]",
          "",
          "[Removed Lines]",
          "1: bba975c7af3de9aeb5c62fb8b05d61b96e4ecd0b030008442bbdd345e1e5f134",
          "",
          "[Added Lines]",
          "[None]",
          "",
          "---------------"
        ],
        "test/fts4merge.test||test/fts4merge.test": [
          "File: test/fts4merge.test -> test/fts4merge.test",
          "--- Hunk 1 ---",
          "[Context before]",
          "326:     execsql { INSERT INTO t1(t1) VALUES('merge=200,10') }",
          "327:     expr { ([db total_changes] - $x)>1 }",
          "328:   } {0}",
          "330: }",
          "332: finish_test",
          "",
          "[Removed Lines]",
          "[None]",
          "",
          "[Added Lines]",
          "329: }",
          "331: #-------------------------------------------------------------------------",
          "332: # Test cases 8.* - ticket [bf1aab89].",
          "333: #",
          "334: set testprefix fts4merge",
          "335: reset_db",
          "336: do_execsql_test 8.0 {",
          "337:   CREATE VIRTUAL TABLE t1 USING fts4(a, order=DESC);",
          "338:   INSERT INTO t1(a) VALUES (0);",
          "339:   INSERT INTO t1(a) VALUES (0);",
          "340:   UPDATE t1 SET a = NULL;",
          "341: }",
          "343: do_execsql_test 8.1 {",
          "344:   INSERT INTO t1(t1) VALUES('merge=1,4');",
          "",
          "---------------"
        ]
      }
    },
    {
      "candidate_hash": "f3ce2483f52a31b5d63dcf292f7f766f21178839",
      "candidate_info": {
        "commit_hash": "f3ce2483f52a31b5d63dcf292f7f766f21178839",
        "repo": "sqlite/sqlite",
        "commit_url": "https://github.com/sqlite/sqlite/commit/f3ce2483f52a31b5d63dcf292f7f766f21178839",
        "files": [
          "manifest",
          "manifest.uuid",
          "src/prepare.c",
          "src/vdbeaux.c"
        ],
        "message": "Save CPU cycles in sqlite3Prepare() by, among other things, shifting the EXPLAIN column label logic over to sqlite3VdbeMakeReady().\n\nFossilOrigin-Name: 1ca5ef84506aac3e2f08baa36095b3befdeedf2a3443fcd9154a277b55cbf64b",
        "before_after_code_files": [
          "manifest.uuid||manifest.uuid",
          "src/prepare.c||src/prepare.c",
          "src/vdbeaux.c||src/vdbeaux.c"
        ]
      },
      "candidate_patch_features": {
        "candidate_earlier_than_patch": 1,
        "same_branch_evolution": 1,
        "olp_code_files": {
          "patch": [
            "manifest.uuid||manifest.uuid"
          ],
          "candidate": [
            "manifest.uuid||manifest.uuid"
          ]
        }
      },
      "candidate_diff": {
        "manifest.uuid||manifest.uuid": [
          "File: manifest.uuid -> manifest.uuid",
          "--- Hunk 1 ---",
          "[Context before]",
          "[No context available]",
          "",
          "[Removed Lines]",
          "1: 238e0835714696aba0631f288fcc30ec5fddb43893d469c6bf017f386b3cddee",
          "",
          "[Added Lines]",
          "[None]",
          "",
          "---------------"
        ],
        "src/prepare.c||src/prepare.c": [
          "File: src/prepare.c -> src/prepare.c",
          "--- Hunk 1 ---",
          "[Context before]",
          "643:   }",
          "644:   assert( 0==sParse.nQueryLoop );",
          "647:   if( sParse.checkSchema ){",
          "648:     schemaIsValid(&sParse);",
          "649:   }",
          "653:   if( pzTail ){",
          "655:   }",
          "684:   if( db->init.busy==0 ){",
          "685:     sqlite3VdbeSetSql(sParse.pVdbe, zSql, (int)(sParse.zTail-zSql), prepFlags);",
          "686:   }",
          "688:     if( sParse.pVdbe ) sqlite3VdbeFinalize(sParse.pVdbe);",
          "689:     assert(!(*ppStmt));",
          "690:   }else{",
          "",
          "[Removed Lines]",
          "646:   if( sParse.rc==SQLITE_DONE ) sParse.rc = SQLITE_OK;",
          "650:   if( db->mallocFailed ){",
          "651:     sParse.rc = SQLITE_NOMEM_BKPT;",
          "652:   }",
          "656:   rc = sParse.rc;",
          "658: #ifndef SQLITE_OMIT_EXPLAIN",
          "662:   if( sParse.explain && rc==SQLITE_OK && ALWAYS(sParse.pVdbe) ){",
          "663:     static const char * const azColName[] = {",
          "664:        \"addr\", \"opcode\", \"p1\", \"p2\", \"p3\", \"p4\", \"p5\", \"comment\",",
          "665:        \"id\", \"parent\", \"notused\", \"detail\"",
          "666:     };",
          "667:     int iFirst, mx;",
          "668:     if( sParse.explain==2 ){",
          "669:       sqlite3VdbeSetNumCols(sParse.pVdbe, 4);",
          "670:       iFirst = 8;",
          "671:       mx = 12;",
          "672:     }else{",
          "673:       sqlite3VdbeSetNumCols(sParse.pVdbe, 8);",
          "674:       iFirst = 0;",
          "675:       mx = 8;",
          "676:     }",
          "677:     for(i=iFirst; i<mx; i++){",
          "678:       sqlite3VdbeSetColName(sParse.pVdbe, i-iFirst, COLNAME_NAME,",
          "679:                             azColName[i], SQLITE_STATIC);",
          "680:     }",
          "681:   }",
          "682: #endif",
          "687:   if( rc!=SQLITE_OK || db->mallocFailed ){",
          "",
          "[Added Lines]",
          "646:   if( sParse.rc==SQLITE_DONE ){",
          "647:     sParse.rc = SQLITE_OK;",
          "648:   }",
          "659:   if( db->mallocFailed ){",
          "660:     sParse.rc = SQLITE_NOMEM_BKPT;",
          "661:   }",
          "662:   rc = sParse.rc;",
          "663:   if( rc!=SQLITE_OK ){",
          "",
          "---------------"
        ],
        "src/vdbeaux.c||src/vdbeaux.c": [
          "File: src/vdbeaux.c -> src/vdbeaux.c",
          "--- Hunk 1 ---",
          "[Context before]",
          "2224:   resolveP2Values(p, &nArg);",
          "2225:   p->usesStmtJournal = (u8)(pParse->isMultiWrite && pParse->mayAbort);",
          "2228:   }",
          "2229:   p->expired = 0;",
          "",
          "[Removed Lines]",
          "2226:   if( pParse->explain && nMem<10 ){",
          "2227:     nMem = 10;",
          "",
          "[Added Lines]",
          "2226:   if( pParse->explain ){",
          "2227:     static const char * const azColName[] = {",
          "2228:        \"addr\", \"opcode\", \"p1\", \"p2\", \"p3\", \"p4\", \"p5\", \"comment\",",
          "2229:        \"id\", \"parent\", \"notused\", \"detail\"",
          "2230:     };",
          "2231:     int iFirst, mx, i;",
          "2232:     if( nMem<10 ) nMem = 10;",
          "2233:     if( pParse->explain==2 ){",
          "2234:       sqlite3VdbeSetNumCols(p, 4);",
          "2235:       iFirst = 8;",
          "2236:       mx = 12;",
          "2237:     }else{",
          "2238:       sqlite3VdbeSetNumCols(p, 8);",
          "2239:       iFirst = 0;",
          "2240:       mx = 8;",
          "2241:     }",
          "2242:     for(i=iFirst; i<mx; i++){",
          "2243:       sqlite3VdbeSetColName(p, i-iFirst, COLNAME_NAME,",
          "2244:                             azColName[i], SQLITE_STATIC);",
          "2245:     }",
          "",
          "---------------"
        ]
      }
    },
    {
      "candidate_hash": "d901b168b58bb82192bcfc5dcb3b7ae316af1497",
      "candidate_info": {
        "commit_hash": "d901b168b58bb82192bcfc5dcb3b7ae316af1497",
        "repo": "sqlite/sqlite",
        "commit_url": "https://github.com/sqlite/sqlite/commit/d901b168b58bb82192bcfc5dcb3b7ae316af1497",
        "files": [
          "manifest",
          "manifest.uuid",
          "src/insert.c"
        ],
        "message": "Overnight, OSSFuzz helpfully pointed out a potential use-after-free bug in yesterdays changes, involving continued use of a pointer after the memory pointed to had been realloc()-ed.  Thanks Google.\n\nFossilOrigin-Name: c422afb507dc875751e6a72e4ba5f4f0793097c0de4533c1600311f689e76ed7",
        "before_after_code_files": [
          "manifest.uuid||manifest.uuid",
          "src/insert.c||src/insert.c"
        ]
      },
      "candidate_patch_features": {
        "candidate_earlier_than_patch": 1,
        "same_branch_evolution": 1,
        "olp_code_files": {
          "patch": [
            "manifest.uuid||manifest.uuid"
          ],
          "candidate": [
            "manifest.uuid||manifest.uuid"
          ]
        }
      },
      "candidate_diff": {
        "manifest.uuid||manifest.uuid": [
          "File: manifest.uuid -> manifest.uuid",
          "--- Hunk 1 ---",
          "[Context before]",
          "[No context available]",
          "",
          "[Removed Lines]",
          "1: 41cc8e3dab998f7efc898d18837ca7fdac94ea3f89954990c5231456bf725fee",
          "",
          "[Added Lines]",
          "[None]",
          "",
          "---------------"
        ],
        "src/insert.c||src/insert.c": [
          "File: src/insert.c -> src/insert.c",
          "--- Hunk 1 ---",
          "[Context before]",
          "1915:           while( nConflictCk>0 && !db->mallocFailed ){",
          "1926:             }",
          "1927:             nConflictCk--;",
          "1929:           }",
          "1931:           sqlite3UniqueConstraint(pParse, OE_Abort, pIdx);",
          "",
          "[Removed Lines]",
          "1914:           pOp = sqlite3VdbeGetOp(v, addrConflictCk);",
          "1916:             if( sqlite3OpcodeProperty[pOp->opcode]&OPFLG_JUMP ){",
          "1917:               p2 = lblRecheckOk;",
          "1918:             }else{",
          "1919:               p2 = pOp->p2;",
          "1920:             }",
          "1921:             if( pOp->opcode!=OP_IdxRowid ){",
          "1922:               sqlite3VdbeAddOp4(v, pOp->opcode, pOp->p1, p2, pOp->p3,",
          "1923:                                 pOp->p4.z, pOp->p4type);",
          "1924:               sqlite3VdbeChangeP5(v, pOp->p5);",
          "1925:               VdbeCoverageIf(v, p2!=pOp->p2 );",
          "1928:             pOp++;",
          "",
          "[Added Lines]",
          "1917:             x = *sqlite3VdbeGetOp(v, addrConflictCk);",
          "1918:             if( x.opcode!=OP_IdxRowid ){",
          "1920:               if( sqlite3OpcodeProperty[x.opcode]&OPFLG_JUMP ){",
          "1921:                 p2 = lblRecheckOk;",
          "1922:               }else{",
          "1923:                 p2 = x.p2;",
          "1924:               }",
          "1925:               sqlite3VdbeAddOp4(v, x.opcode, x.p1, p2, x.p3, x.p4.z, x.p4type);",
          "1926:               sqlite3VdbeChangeP5(v, x.p5);",
          "1927:               VdbeCoverageIf(v, p2!=x.p2);",
          "1930:             addrConflictCk++;",
          "",
          "---------------"
        ]
      }
    },
    {
      "candidate_hash": "98c5ad309fce1eeea6cfe624e1dfd341abca947a",
      "candidate_info": {
        "commit_hash": "98c5ad309fce1eeea6cfe624e1dfd341abca947a",
        "repo": "sqlite/sqlite",
        "commit_url": "https://github.com/sqlite/sqlite/commit/98c5ad309fce1eeea6cfe624e1dfd341abca947a",
        "files": [
          "manifest",
          "manifest.uuid",
          "src/shell.c.in"
        ],
        "message": "Have .recover store all orphaned rows in a single table, with extra columns to indicate the orphaned page and sub-tree they were discovered within.\n\nFossilOrigin-Name: 7221f6e33ed6a5a96ec61e25f2a1f70b84aae66e503d897eb7b7ff1aec42355d",
        "before_after_code_files": [
          "manifest.uuid||manifest.uuid",
          "src/shell.c.in||src/shell.c.in"
        ]
      },
      "candidate_patch_features": {
        "candidate_earlier_than_patch": 1,
        "same_branch_evolution": 1,
        "olp_code_files": {
          "patch": [
            "manifest.uuid||manifest.uuid"
          ],
          "candidate": [
            "manifest.uuid||manifest.uuid"
          ]
        }
      },
      "candidate_diff": {
        "manifest.uuid||manifest.uuid": [
          "File: manifest.uuid -> manifest.uuid",
          "--- Hunk 1 ---",
          "[Context before]",
          "[No context available]",
          "",
          "[Removed Lines]",
          "1: bee2652ac26370e612a8c81dd7554befc2d523442a2fbbc77dc73479e6a0d7fd",
          "",
          "[Added Lines]",
          "[None]",
          "",
          "---------------"
        ],
        "src/shell.c.in||src/shell.c.in": [
          "File: src/shell.c.in -> src/shell.c.in",
          "--- Hunk 1 ---",
          "[Context before]",
          "6226:     sqlite3_free(pTab->zQuoted);",
          "6227:     if( pTab->azlCol ){",
          "6228:       int i;",
          "6230:         sqlite3_free(pTab->azlCol[i]);",
          "6231:       }",
          "6232:       sqlite3_free(pTab->azlCol);",
          "",
          "[Removed Lines]",
          "6229:       for(i=0; i<pTab->nCol; i++){",
          "",
          "[Added Lines]",
          "6229:       for(i=0; i<=pTab->nCol; i++){",
          "",
          "---------------",
          "--- Hunk 2 ---",
          "[Context before]",
          "6235:   }",
          "6236: }",
          "6243:   int bIntkey,",
          "",
          "[Removed Lines]",
          "6238: static void recoverOldTable(",
          "6240:   RecoverTable *pTab,",
          "",
          "[Added Lines]",
          "6238: static RecoverTable *recoverOldTable(",
          "",
          "---------------",
          "--- Hunk 3 ---",
          "[Context before]",
          "6245: ){",
          "6247:   int rc = *pRc;",
          "6249:   if( rc==SQLITE_OK ){",
          "6250:     int nSqlCol = 0;",
          "6251:     int bSqlIntkey = 0;",
          "6252:     sqlite3_stmt *pStmt = 0;",
          "6254:     rc = sqlite3_open(\"\", &dbtmp);",
          "6255:     if( rc==SQLITE_OK ){",
          "6256:       rc = sqlite3_exec(dbtmp, \"PRAGMA writable_schema = on\", 0, 0, 0);",
          "",
          "[Removed Lines]",
          "[None]",
          "",
          "[Added Lines]",
          "6247:   RecoverTable *pTab = 0;",
          "6249:   pTab = (RecoverTable*)shellMalloc(&rc, sizeof(RecoverTable));",
          "",
          "---------------",
          "--- Hunk 4 ---",
          "[Context before]",
          "6285:     shellFinalize(&rc, pStmt);",
          "6287:     if( bIntkey==bSqlIntkey ){",
          "6288:       const char *zPk = \"_rowid_\";",
          "6289:       sqlite3_stmt *pPkFinder = 0;",
          "6292:           \"SELECT cid, name FROM pragma_table_info(%Q) \"",
          "6293:           \"  WHERE pk=1 AND type='integer' COLLATE nocase\"",
          "6300:       }",
          "6302:       pTab->zName = shellMPrintf(&rc, \"%s\", zName);",
          "6303:       pTab->zQuoted = shellMPrintf(&rc, \"%Q\", pTab->zName);",
          "6305:       pTab->nCol = nSqlCol;",
          "6308:         pTab->azlCol[0] = shellMPrintf(&rc, \"%Q\", zPk);",
          "6309:       }else{",
          "6314:           \"FROM pragma_table_info(%Q)\",",
          "6324:       }",
          "6325:       shellFinalize(&rc, pPkFinder);",
          "6326:     }",
          "6327:   }",
          "",
          "[Removed Lines]",
          "6291:       shellPreparePrintf(dbtmp, &rc, &pPkFinder,",
          "6294:           \"  AND NOT EXISTS (SELECT cid FROM pragma_table_info(%Q) WHERE pk=2)\",",
          "6295:           zName, zName",
          "6296:       );",
          "6297:       if( rc==SQLITE_OK && SQLITE_ROW==sqlite3_step(pPkFinder) ){",
          "6298:         pTab->iPk = sqlite3_column_int(pPkFinder, 0);",
          "6299:         zPk = (const char*)sqlite3_column_text(pPkFinder, 1);",
          "6304:       pTab->azlCol = (char**)shellMalloc(&rc, sizeof(char*) * nSqlCol);",
          "6307:       if( nSqlCol==1 && pTab->iPk==0 ){",
          "6310:         shellPreparePrintf(dbtmp, &rc, &pStmt,",
          "6311:           \"SELECT -1+row_number()          OVER (ORDER BY cid),\"",
          "6312:           \"    %Q||%Q||group_concat(name, ', ') FILTER (WHERE cid!=%d) \"",
          "6313:           \"           OVER (ORDER BY cid) \"",
          "6315:           (bIntkey ? zPk : \"\"), (bIntkey ? \", \" : \"\"),",
          "6316:           pTab->iPk, zName",
          "6317:         );",
          "6318:         while( rc==SQLITE_OK && SQLITE_ROW==sqlite3_step(pStmt) ){",
          "6319:           int idx = sqlite3_column_int(pStmt, 0);",
          "6320:           const char *zText = (const char*)sqlite3_column_text(pStmt, 1);",
          "6321:           pTab->azlCol[idx] = shellMPrintf(&rc, \"%s\", zText);",
          "6322:         }",
          "6323:         shellFinalize(&rc, pStmt);",
          "",
          "[Added Lines]",
          "6289:       int i;",
          "6293:       pTab->iPk = -2;",
          "6294:       if( bIntkey ){",
          "6295:         shellPreparePrintf(dbtmp, &rc, &pPkFinder,",
          "6298:           \"  AND NOT EXISTS (SELECT cid FROM pragma_table_info(%Q) WHERE pk=2)\"",
          "6299:           , zName, zName",
          "6300:         );",
          "6301:         if( rc==SQLITE_OK && SQLITE_ROW==sqlite3_step(pPkFinder) ){",
          "6302:           pTab->iPk = sqlite3_column_int(pPkFinder, 0);",
          "6303:           zPk = (const char*)sqlite3_column_text(pPkFinder, 1);",
          "6304:         }",
          "6309:       pTab->azlCol = (char**)shellMalloc(&rc, sizeof(char*) * (nSqlCol+1));",
          "6312:       if( bIntkey ){",
          "6315:         pTab->azlCol[0] = shellMPrintf(&rc, \"\");",
          "6316:       }",
          "6317:       i = 1;",
          "6318:       shellPreparePrintf(dbtmp, &rc, &pStmt,",
          "6319:           \"SELECT %Q || group_concat(name, ', ') \"",
          "6320:           \"  FILTER (WHERE cid!=%d) OVER (ORDER BY cid) \"",
          "6322:           bIntkey ? \", \" : \"\", pTab->iPk, zName",
          "6323:       );",
          "6324:       while( rc==SQLITE_OK && SQLITE_ROW==sqlite3_step(pStmt) ){",
          "6325:         const char *zText = (const char*)sqlite3_column_text(pStmt, 0);",
          "6326:         pTab->azlCol[i] = shellMPrintf(&rc, \"%s%s\", pTab->azlCol[0], zText);",
          "6327:         i++;",
          "6329:       shellFinalize(&rc, pStmt);",
          "",
          "---------------",
          "--- Hunk 5 ---",
          "[Context before]",
          "6329:  finished:",
          "6330:   sqlite3_close(dbtmp);",
          "6332: }",
          "6334: static RecoverTable *recoverNewTable(",
          "",
          "[Removed Lines]",
          "[None]",
          "",
          "[Added Lines]",
          "6338:   if( rc!=SQLITE_OK ){",
          "6339:     recoverFreeTable(pTab);",
          "6340:     pTab = 0;",
          "6341:   }",
          "6342:   return pTab;",
          "",
          "---------------",
          "--- Hunk 6 ---",
          "[Context before]",
          "6336:   int *pRc,",
          "6337:   int iRoot,",
          "6338:   int bIntkey,",
          "6340: ){",
          "6341:   sqlite3_stmt *pStmt = 0;",
          "6342:   RecoverTable *pRet = 0;",
          "",
          "[Removed Lines]",
          "6339:   int nCol",
          "",
          "[Added Lines]",
          "6350:   int nCol,",
          "6351:   int *pbNoop",
          "",
          "---------------",
          "--- Hunk 7 ---",
          "[Context before]",
          "6344:   const char *zSql = 0;",
          "6345:   const char *zName = 0;",
          "6351:   shellPreparePrintf(pState->db, pRc, &pStmt,",
          "",
          "[Removed Lines]",
          "6347:   pRet = (RecoverTable*)shellMalloc(pRc, sizeof(RecoverTable));",
          "6348:   if( pRet ) pRet->iPk = -2;",
          "",
          "[Added Lines]",
          "[None]",
          "",
          "---------------",
          "--- Hunk 8 ---",
          "[Context before]",
          "6360:     if( sqlite3_stricmp(zType, \"table\")==0 ){",
          "6361:       zName = (const char*)sqlite3_column_text(pStmt, 1);",
          "6362:       zSql = (const char*)sqlite3_column_text(pStmt, 2);",
          "6364:       break;",
          "6365:     }",
          "6366:   }",
          "6387:     );",
          "6392:     }",
          "6402:       }",
          "6403:     }",
          "6409:   }",
          "6412: }",
          "",
          "[Removed Lines]",
          "6363:       recoverOldTable(pRc, pRet, zName, zSql, bIntkey, nCol);",
          "6367:   shellFinalize(pRc, pStmt);",
          "6368:   if( bNoop ){",
          "6369:     sqlite3_free(pRet);",
          "6370:     return 0;",
          "6371:   }",
          "6373:   if( pRet && pRet->zName==0 ){",
          "6374:     sqlite3_stmt *pStmt = 0;",
          "6376:     pRet->zName = shellMPrintf(pRc, \"orphan_%d_%d\", nCol, iRoot);",
          "6377:     pRet->zQuoted = shellMPrintf(pRc, \"%Q\", pRet->zName);",
          "6378:     pRet->azlCol = (char**)shellMalloc(pRc, sizeof(char*) * nCol);",
          "6379:     pRet->nCol = nCol;",
          "6381:     shellPreparePrintf(pState->db, pRc, &pStmt,",
          "6382:       \"WITH s(i) AS (\"",
          "6383:       \"  SELECT 1 UNION ALL SELECT i+1 FROM s WHERE i<%d\"",
          "6384:       \")\"",
          "6385:       \"SELECT i-1, %Q || group_concat('c' || i, ', ') OVER (ORDER BY i) FROM s\",",
          "6386:       nCol, (bIntkey ? \"id, \" : \"\")",
          "6388:     while( *pRc==SQLITE_OK && SQLITE_ROW==sqlite3_step(pStmt) ){",
          "6389:       int idx = sqlite3_column_int(pStmt, 0);",
          "6390:       const char *zText = (const char*)sqlite3_column_text(pStmt, 1);",
          "6391:       pRet->azlCol[idx] = shellMPrintf(pRc, \"%s\", zText);",
          "6393:     shellFinalize(pRc, pStmt);",
          "6395:     if( *pRc==SQLITE_OK ){",
          "6396:       char *zCreate = shellMPrintf(pRc, \"CREATE TABLE %Q (%s)\",",
          "6397:         pRet->zName, pRet->azlCol[nCol-1]",
          "6398:       );",
          "6399:       if( zCreate ){",
          "6400:         raw_printf(pState->out, \"%s;\\n\", zCreate);",
          "6401:         sqlite3_free(zCreate);",
          "6404:   }",
          "6406:   if( *pRc!=SQLITE_OK ){",
          "6407:     recoverFreeTable(pRet);",
          "6408:     pRet = 0;",
          "6411:   return pRet;",
          "",
          "[Added Lines]",
          "6373:       pRet = recoverOldTable(pRc, zName, zSql, bIntkey, nCol);",
          "6378:   shellFinalize(pRc, pStmt);",
          "6380:   return pRet;",
          "6381: }",
          "6383: static RecoverTable *recoverOrphanTable(",
          "6384:   ShellState *pState,",
          "6385:   int *pRc,",
          "6386:   int nCol",
          "6387: ){",
          "6388:   RecoverTable *pTab = 0;",
          "6389:   if( nCol>=0 && *pRc==SQLITE_OK ){",
          "6390:     int i;",
          "6391:     raw_printf(pState->out,",
          "6392:         \"CREATE TABLE recover_orphan(rootpgno INTEGER, \"",
          "6393:         \"pgno INTEGER, nfield INTEGER, id INTEGER\"",
          "6395:     for(i=0; i<nCol; i++){",
          "6396:       raw_printf(pState->out, \", c%d\", i);",
          "6398:     raw_printf(pState->out, \");\\n\");",
          "6400:     pTab = (RecoverTable*)shellMalloc(pRc, sizeof(RecoverTable));",
          "6401:     if( pTab ){",
          "6402:       pTab->zName = shellMPrintf(pRc, \"%s\", \"recover_orphan\");",
          "6403:       pTab->zQuoted = shellMPrintf(pRc, \"%Q\", pTab->zName);",
          "6404:       pTab->nCol = nCol;",
          "6405:       pTab->iPk = -2;",
          "6406:       if( nCol>0 ){",
          "6407:         pTab->azlCol = (char**)shellMalloc(pRc, sizeof(char*) * (nCol+1));",
          "6408:         if( pTab->azlCol ){",
          "6409:           pTab->azlCol[nCol] = shellMPrintf(pRc, \"\");",
          "6410:           for(i=nCol-1; i>=0; i--){",
          "6411:             pTab->azlCol[i] = shellMPrintf(pRc, \"%s, NULL\", pTab->azlCol[i+1]);",
          "6412:           }",
          "6413:         }",
          "6417:     if( *pRc!=SQLITE_OK ){",
          "6418:       recoverFreeTable(pTab);",
          "6419:       pTab = 0;",
          "6420:     }",
          "6422:   return pTab;",
          "",
          "---------------",
          "--- Hunk 9 ---",
          "[Context before]",
          "6425:   int i;",
          "6428:   for(i=1; i<nArg; i++){",
          "",
          "[Removed Lines]",
          "[None]",
          "",
          "[Added Lines]",
          "6437:   int nOrphan = -1;",
          "6438:   RecoverTable *pOrphan = 0;",
          "",
          "---------------",
          "--- Hunk 10 ---",
          "[Context before]",
          "6545:     \"  SELECT pgno FROM recovery.map WHERE root=1\"",
          "6546:     \")\"",
          "6547:     \"GROUP BY pgno, cell;\"",
          "6548:   );",
          "",
          "[Removed Lines]",
          "[None]",
          "",
          "[Added Lines]",
          "6561:     \"CREATE INDEX recovery.schema_rootpage ON schema(rootpage);\"",
          "",
          "---------------",
          "--- Hunk 11 ---",
          "[Context before]",
          "6566:     shellFinalize(&rc, pStmt);",
          "6567:   }",
          "6569:   shellPrepare(pState->db, &rc,",
          "6570:       \"SELECT pgno FROM recovery.map WHERE root=?\", &pPages",
          "6571:   );",
          "",
          "[Removed Lines]",
          "[None]",
          "",
          "[Added Lines]",
          "6585:   shellPrepare(pState->db, &rc,",
          "6586:       \"SELECT coalesce(max(maxlen), -2) FROM recovery.map\"",
          "6587:       \"  WHERE root>1 AND root NOT IN (SELECT rootpage FROM recovery.schema)\"",
          "6588:       , &pLoop",
          "6589:   );",
          "6590:   if( rc==SQLITE_OK && SQLITE_ROW==sqlite3_step(pLoop) ){",
          "6591:     nOrphan = sqlite3_column_int(pLoop, 0);",
          "6592:   }",
          "6593:   shellFinalize(&rc, pLoop);",
          "6594:   pLoop = 0;",
          "6595:   pOrphan = recoverOrphanTable(pState, &rc, nOrphan);",
          "",
          "---------------",
          "--- Hunk 12 ---",
          "[Context before]",
          "6586:     int iRoot = sqlite3_column_int(pLoop, 0);",
          "6587:     int bIntkey = sqlite3_column_int(pLoop, 1);",
          "6588:     int nCol = sqlite3_column_int(pLoop, 2);",
          "6589:     RecoverTable *pTab;",
          "6603:           raw_printf(pState->out, \"INSERT INTO %s(%s) VALUES( %s );\\n\",",
          "6605:           );",
          "6606:         }",
          "6608:       }",
          "6610:     }",
          "6612:   }",
          "6613:   shellFinalize(&rc, pLoop);",
          "6614:   shellFinalize(&rc, pPages);",
          "6615:   shellFinalize(&rc, pCells);",
          "6618:   if( rc==SQLITE_OK ){",
          "",
          "[Removed Lines]",
          "6591:     pTab = recoverNewTable(pState, &rc, iRoot, bIntkey, nCol);",
          "6592:     if( pTab ){",
          "6593:       if( 0==sqlite3_stricmp(pTab->zName, \"sqlite_sequence\") ){",
          "6594:         raw_printf(pState->out, \"DELETE FROM sqlite_sequence;\\n\");",
          "6595:       }",
          "6596:       sqlite3_bind_int(pPages, 1, iRoot);",
          "6597:       sqlite3_bind_int(pCells, 2, pTab->iPk);",
          "6598:       while( rc==SQLITE_OK && SQLITE_ROW==sqlite3_step(pPages) ){",
          "6599:         sqlite3_bind_int(pCells, 1, sqlite3_column_int(pPages, 0));",
          "6600:         while( rc==SQLITE_OK && SQLITE_ROW==sqlite3_step(pCells) ){",
          "6601:           int iMax = sqlite3_column_int(pCells, 0);",
          "6602:           const char *zVal = (const char*)sqlite3_column_text(pCells, 1);",
          "6604:               pTab->zQuoted, pTab->azlCol[iMax>0?iMax:0], zVal",
          "6607:         shellReset(&rc, pCells);",
          "6609:       shellReset(&rc, pPages);",
          "6611:     recoverFreeTable(pTab);",
          "",
          "[Added Lines]",
          "6617:     int bNoop = 0;",
          "6620:     pTab = recoverNewTable(pState, &rc, iRoot, bIntkey, nCol, &bNoop);",
          "6621:     if( bNoop || rc ) continue;",
          "6622:     if( pTab==0 ) pTab = pOrphan;",
          "6624:     if( 0==sqlite3_stricmp(pTab->zName, \"sqlite_sequence\") ){",
          "6625:       raw_printf(pState->out, \"DELETE FROM sqlite_sequence;\\n\");",
          "6626:     }",
          "6627:     sqlite3_bind_int(pPages, 1, iRoot);",
          "6628:     sqlite3_bind_int(pCells, 2, pTab->iPk);",
          "6630:     while( rc==SQLITE_OK && SQLITE_ROW==sqlite3_step(pPages) ){",
          "6631:       int iPgno = sqlite3_column_int(pPages, 0);",
          "6632:       sqlite3_bind_int(pCells, 1, iPgno);",
          "6633:       while( rc==SQLITE_OK && SQLITE_ROW==sqlite3_step(pCells) ){",
          "6634:         int nField = sqlite3_column_int(pCells, 0);",
          "6635:         const char *zVal = (const char*)sqlite3_column_text(pCells, 1);",
          "6637:         nField = nField+1;",
          "6638:         if( pTab==pOrphan ){",
          "6639:           raw_printf(pState->out,",
          "6640:               \"INSERT INTO %s VALUES(%d, %d, %d, %s%s%s);\\n\",",
          "6641:               pTab->zQuoted, iRoot, iPgno, nField,",
          "6642:               bIntkey ? \"\" : \"NULL, \", zVal, pTab->azlCol[nField]",
          "6643:           );",
          "6644:         }else{",
          "6646:               pTab->zQuoted, pTab->azlCol[nField], zVal",
          "6650:       shellReset(&rc, pCells);",
          "6652:     shellReset(&rc, pPages);",
          "6653:     if( pTab!=pOrphan ) recoverFreeTable(pTab);",
          "6658:   recoverFreeTable(pOrphan);",
          "",
          "---------------"
        ]
      }
    }
  ]
}