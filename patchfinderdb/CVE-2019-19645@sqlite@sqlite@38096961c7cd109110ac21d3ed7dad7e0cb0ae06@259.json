{
  "cve_id": "CVE-2019-19645",
  "cve_desc": "alter.c in SQLite through 3.30.1 allows attackers to trigger infinite recursion via certain types of self-referential views in conjunction with ALTER TABLE statements.",
  "repo": "sqlite/sqlite",
  "patch_hash": "38096961c7cd109110ac21d3ed7dad7e0cb0ae06",
  "patch_info": {
    "commit_hash": "38096961c7cd109110ac21d3ed7dad7e0cb0ae06",
    "repo": "sqlite/sqlite",
    "commit_url": "https://github.com/sqlite/sqlite/commit/38096961c7cd109110ac21d3ed7dad7e0cb0ae06",
    "files": [
      "manifest",
      "manifest.uuid",
      "src/alter.c",
      "src/build.c",
      "src/sqliteInt.h",
      "test/altertab3.test"
    ],
    "message": "Avoid infinite recursion in the ALTER TABLE code when a view contains an unused CTE that references, directly or indirectly, the view itself.\n\nFossilOrigin-Name: 1d2e53a39b87e364685e21de137655b6eee725e4c6d27fc90865072d7c5892b5",
    "before_after_code_files": [
      "manifest.uuid||manifest.uuid",
      "src/alter.c||src/alter.c",
      "src/build.c||src/build.c",
      "src/sqliteInt.h||src/sqliteInt.h",
      "test/altertab3.test||test/altertab3.test"
    ]
  },
  "patch_diff": {
    "manifest.uuid||manifest.uuid": [
      "File: manifest.uuid -> manifest.uuid",
      "--- Hunk 1 ---",
      "[Context before]",
      "[No context available]",
      "",
      "[Removed Lines]",
      "1: c5d44143599f3fe98492b2b900fa3d77925c7be545096251055ceeab899a41f1",
      "",
      "[Added Lines]",
      "[None]",
      "",
      "---------------"
    ],
    "src/alter.c||src/alter.c": [
      "File: src/alter.c -> src/alter.c",
      "--- Hunk 1 ---",
      "[Context before]",
      "760:   Parse *pParse = pWalker->pParse;",
      "761:   int i;",
      "762:   if( pParse->nErr ) return WRC_Abort;",
      "763:   if( ALWAYS(p->pEList) ){",
      "764:     ExprList *pList = p->pEList;",
      "765:     for(i=0; i<pList->nExpr; i++){",
      "",
      "[Removed Lines]",
      "[None]",
      "",
      "[Added Lines]",
      "763:   if( p->selFlags & SF_View ) return WRC_Prune;",
      "",
      "---------------",
      "--- Hunk 2 ---",
      "[Context before]",
      "853: static int renameColumnSelectCb(Walker *pWalker, Select *p){",
      "854:   renameWalkWith(pWalker, p);",
      "855:   return WRC_Continue;",
      "856: }",
      "",
      "[Removed Lines]",
      "[None]",
      "",
      "[Added Lines]",
      "855:   if( p->selFlags & SF_View ) return WRC_Prune;",
      "",
      "---------------",
      "--- Hunk 3 ---",
      "[Context before]",
      "1316:   if( sParse.pNewTable ){",
      "1317:     Select *pSelect = sParse.pNewTable->pSelect;",
      "1318:     if( pSelect ){",
      "1319:       sParse.rc = SQLITE_OK;",
      "1321:       rc = (db->mallocFailed ? SQLITE_NOMEM : sParse.rc);",
      "1322:       if( rc==SQLITE_OK ){",
      "1323:         sqlite3WalkSelect(&sWalker, pSelect);",
      "",
      "[Removed Lines]",
      "1320:       sqlite3SelectPrep(&sParse, sParse.pNewTable->pSelect, 0);",
      "",
      "[Added Lines]",
      "1321:       pSelect->selFlags &= ~SF_View;",
      "1323:       sqlite3SelectPrep(&sParse, pSelect, 0);",
      "",
      "---------------",
      "--- Hunk 4 ---",
      "[Context before]",
      "1434:   int i;",
      "1435:   RenameCtx *p = pWalker->u.pRename;",
      "1436:   SrcList *pSrc = pSelect->pSrc;",
      "1437:   if( pSrc==0 ){",
      "1438:     assert( pWalker->pParse->db->mallocFailed );",
      "1439:     return WRC_Abort;",
      "",
      "[Removed Lines]",
      "[None]",
      "",
      "[Added Lines]",
      "1440:   if( pSelect->selFlags & SF_View ) return WRC_Prune;",
      "",
      "---------------",
      "--- Hunk 5 ---",
      "[Context before]",
      "1514:         if( pTab->pSelect ){",
      "1515:           if( isLegacy==0 ){",
      "1516:             NameContext sNC;",
      "1517:             memset(&sNC, 0, sizeof(sNC));",
      "1518:             sNC.pParse = &sParse;",
      "1520:             sqlite3SelectPrep(&sParse, pTab->pSelect, &sNC);",
      "1521:             if( sParse.nErr ) rc = sParse.rc;",
      "1522:             sqlite3WalkSelect(&sWalker, pTab->pSelect);",
      "",
      "[Removed Lines]",
      "[None]",
      "",
      "[Added Lines]",
      "1520:             Select *pSelect = pTab->pSelect;",
      "1525:             assert( pSelect->selFlags & SF_View );",
      "1526:             pSelect->selFlags &= ~SF_View;",
      "",
      "---------------"
    ],
    "src/build.c||src/build.c": [
      "File: src/build.c -> src/build.c",
      "--- Hunk 1 ---",
      "[Context before]",
      "2488:   if( IN_RENAME_OBJECT ){",
      "2489:     p->pSelect = pSelect;",
      "2490:     pSelect = 0;",
      "",
      "[Removed Lines]",
      "[None]",
      "",
      "[Added Lines]",
      "2488:   pSelect->selFlags |= SF_View;",
      "",
      "---------------"
    ],
    "src/sqliteInt.h||src/sqliteInt.h": [
      "File: src/sqliteInt.h -> src/sqliteInt.h"
    ],
    "test/altertab3.test||test/altertab3.test": [
      "File: test/altertab3.test -> test/altertab3.test",
      "--- Hunk 1 ---",
      "[Context before]",
      "487:   ALTER TABLE a RENAME a TO b;",
      "488: }",
      "491: finish_test",
      "",
      "[Removed Lines]",
      "[None]",
      "",
      "[Added Lines]",
      "490: #------------------------------------------------------------------------",
      "491: #",
      "492: reset_db",
      "493: do_execsql_test 22.1 {",
      "494:   CREATE TABLE t1(a);",
      "495:   CREATE VIEW v2(b) AS SELECT * FROM v2;",
      "496: }",
      "498: do_catchsql_test 22.2 {",
      "499:   ALTER TABLE t1 RENAME TO t4;",
      "500: } {1 {error in view v2: view v2 is circularly defined}}",
      "502: do_execsql_test 22.3 {",
      "503:   DROP VIEW v2;",
      "504:   CREATE VIEW v2(b) AS WITH t3 AS (SELECT b FROM v2) SELECT * FROM t3;",
      "505: }",
      "507: breakpoint",
      "508: do_catchsql_test 22.4 {",
      "509:   ALTER TABLE t1 RENAME TO t4;",
      "510: } {1 {error in view v2: view v2 is circularly defined}}",
      "512: do_execsql_test 22.5 {",
      "513:   DROP VIEW v2;",
      "514:   CREATE VIEW v2(b) AS WITH t3 AS (SELECT b FROM v2) VALUES(1);",
      "515: }",
      "517: do_catchsql_test 22.6 {",
      "518:   ALTER TABLE t1 RENAME TO t4;",
      "519: } {0 {}}",
      "",
      "---------------"
    ]
  },
  "candidates": [
    {
      "candidate_hash": "dcc427cf19603d5060742745dfca76352f9ced43",
      "candidate_info": {
        "commit_hash": "dcc427cf19603d5060742745dfca76352f9ced43",
        "repo": "sqlite/sqlite",
        "commit_url": "https://github.com/sqlite/sqlite/commit/dcc427cf19603d5060742745dfca76352f9ced43",
        "files": [
          "manifest",
          "manifest.uuid",
          "src/btree.c",
          "test/corruptL.test"
        ],
        "message": "Add an extra test for database corruption to defragmentPage().\n\nFossilOrigin-Name: 80e951fce3e5aaa224c8dba6449832d2efabcdc24e86eb6b7833f85cf08ecc00",
        "before_after_code_files": [
          "manifest.uuid||manifest.uuid",
          "src/btree.c||src/btree.c",
          "test/corruptL.test||test/corruptL.test"
        ]
      },
      "candidate_patch_features": {
        "candidate_earlier_than_patch": 1,
        "same_branch_evolution": 1,
        "olp_code_files": {
          "patch": [
            "manifest.uuid||manifest.uuid"
          ],
          "candidate": [
            "manifest.uuid||manifest.uuid"
          ]
        }
      },
      "candidate_diff": {
        "manifest.uuid||manifest.uuid": [
          "File: manifest.uuid -> manifest.uuid",
          "--- Hunk 1 ---",
          "[Context before]",
          "[No context available]",
          "",
          "[Removed Lines]",
          "1: 3649a77b79001ea6c5defe882f9934521b20b9d36aab26d03b5d42006c7fa228",
          "",
          "[Added Lines]",
          "[None]",
          "",
          "---------------"
        ],
        "src/btree.c||src/btree.c": [
          "File: src/btree.c -> src/btree.c",
          "--- Hunk 1 ---",
          "[Context before]",
          "1455:           if( iFree2+sz2 > usableSize ) return SQLITE_CORRUPT_PAGE(pPage);",
          "1456:           memmove(&data[iFree+sz+sz2], &data[iFree+sz], iFree2-(iFree+sz));",
          "1457:           sz += sz2;",
          "1458:         }",
          "1459:         cbrk = top+sz;",
          "1460:         assert( cbrk+(iFree-top) <= usableSize );",
          "1461:         memmove(&data[cbrk], &data[top], iFree-top);",
          "",
          "[Removed Lines]",
          "[None]",
          "",
          "[Added Lines]",
          "1458:         }else if( iFree+sz>usableSize ){",
          "1459:           return SQLITE_CORRUPT_PAGE(pPage);",
          "",
          "---------------"
        ],
        "test/corruptL.test||test/corruptL.test": [
          "File: test/corruptL.test -> test/corruptL.test",
          "--- Hunk 1 ---",
          "[Context before]",
          "727:   SELECT * FROM sqlite_master;",
          "728: } {1 {malformed database schema (t1x1) - invalid rootpage}}",
          "730: finish_test",
          "",
          "[Removed Lines]",
          "[None]",
          "",
          "[Added Lines]",
          "730: #-------------------------------------------------------------------------",
          "731: reset_db",
          "732: do_test 8.0 {",
          "733:   sqlite3 db {}",
          "734:   db deserialize [decode_hexdb {",
          "735: | size 2048 pagesize 512 filename a.db",
          "736: | page 1 offset 0",
          "737: |      0: 53 51 4c 69 74 65 20 66 6f 72 6d 61 74 20 33 00   SQLite format 3.",
          "738: |     16: 02 00 01 01 00 40 20 20 ff ff 00 0c 00 00 00 07   .....@  ........",
          "739: |     32: 0b 00 00 00 00 00 00 00 00 00 00 08 9c 00 00 04   ................",
          "740: |     48: 00 00 00 e0 09 00 00 01 00 00 00 01 00 00 00 00   ................",
          "741: |     64: 00 00 00 00 f2 ff 00 00 00 00 00 00 00 00 00 00   ................",
          "742: |     80: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 0c   ................",
          "743: |     96: 00 2e 2c 50 0d 00 00 00 06 01 06 00 01 da 01 b0   ..,P............",
          "744: |    112: 05 56 01 86 01 2a 01 06 00 00 00 00 00 06 00 00   .V...*..........",
          "745: |    128: 00 ff 00 00 ff ff ff e1 00 00 00 00 00 00 00 00   ................",
          "746: |    144: 00 00 00 00 00 00 00 00 00 01 00 00 00 00 00 00   ................",
          "747: |    160: 00 00 00 00 00 00 00 00 f2 00 00 00 00 00 00 00   ................",
          "748: |    176: 00 00 f9 ff ff ff ff ff ff ff 00 00 00 5f 00 fb   ............._..",
          "749: |    192: 00 00 00 00 00 00 00 00 00 e1 ff 00 00 00 00 00   ................",
          "750: |    208: 00 00 10 00 00 00 00 00 1e 00 00 00 fe 00 00 00   ................",
          "751: |    224: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 ca 00   ................",
          "752: |    240: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 35   ...............5",
          "753: |    256: 00 00 00 00 ef ff 22 07 06 17 11 11 01 30 39 38   .............098",
          "754: |    272: 62 6c 65 74 38 38 74 04 43 52 45 41 54 45 20 54   blet88t.CREATE T",
          "755: |    288: 41 42 4c 45 20 74 34 28 87 29 2a 06 06 17 13 11   ABLE t4(.)*.....",
          "756: |    304: 01 3f 69 4f 64 65 78 74 33 78 74 40 05 43 52 45   .?iOdext3xt@.CRE",
          "757: |    320: 41 54 45 20 49 6e 44 45 58 20 74 33 78 20 4f 4e   ATE InDEX t3x ON",
          "758: |    336: 20 74 33 28 78 29 2e 04 06 17 15 11 01 45 69 6e    t3(x).......Ein",
          "759: |    352: 00 04 00 00 34 63 64 74 3d 05 43 52 45 41 54 45   ....4cdt=.CREATE",
          "760: |    368: 20 49 4e 44 45 58 20 63 74 64 32 20 4f 4e 20 74    INDEX ctd2 ON t",
          "761: |    384: 32 28 0a 0c 44 29 28 05 06 17 11 11 01 3d 74 6c   2(..D)(......=tl",
          "762: |    400: 62 61 d4 65 33 74 33 04 43 52 45 41 54 45 20 54   ba.e3t3.CREATE T",
          "763: |    416: 41 42 4c 45 20 74 33 28 63 2c 78 2c 65 2c 66 29   ABLE t3(c,x,e,f)",
          "764: |    432: 28 02 06 17 11 11 01 3d 74 61 62 6c 65 74 32 74   (......=tablet2t",
          "765: |    448: 32 03 43 52 45 41 54 45 20 54 41 42 4c 45 20 74   2.CREATE TABLE t",
          "766: |    464: 32 28 63 2c 64 2c 65 2c 66 29 24 01 06 17 11 11   2(c,d,e,f)$.....",
          "767: |    480: 01 35 74 60 62 6c 65 74 31 74 31 02 43 52 45 41   .5t`blet1t1.CREA",
          "768: |    496: 54 45 20 54 41 42 4c 45 20 74 30 28 61 2c 62 29   TE TABLE t0(a,b)",
          "769: | page 2 offset 512",
          "770: |      0: 0d 00 ff 11 04 01 cf 80 01 fa 01 09 00 de 01 cf   ................",
          "771: |     16: 00 00 00 00 00 00 00 00 00 01 00 00 00 00 00 00   ................",
          "772: |     32: 00 00 08 00 00 00 00 00 00 11 00 00 00 00 00 13   ................",
          "773: |     48: 00 00 00 00 00 00 00 00 00 00 00 01 00 e0 ff ff   ................",
          "774: |     64: ff d2 ff ff ff 00 f8 ff ff ff 00 00 00 00 00 00   ................",
          "775: |     80: 00 ff ff 00 00 00 00 00 00 00 00 00 00 00 00 00   ................",
          "776: |     96: 00 00 00 00 ff de 00 00 00 00 00 00 00 00 00 00   ................",
          "777: |    112: 00 00 00 00 00 00 00 00 00 00 00 00 00 40 00 00   .............@..",
          "778: |    128: 2a 00 00 00 00 00 00 00 00 f7 00 00 00 00 00 00   *...............",
          "779: |    144: 00 00 00 00 00 21 00 00 00 00 00 00 00 00 00 00   .....!..........",
          "780: |    160: 01 64 00 00 00 00 04 80 ff ff ff 00 00 00 00 00   .d..............",
          "781: |    176: 00 00 00 00 00 00 00 00 1f 00 00 00 00 00 00 00   ................",
          "782: |    192: 00 00 40 00 00 00 00 00 00 00 00 00 00 00 00 00   ..@.............",
          "783: |    208: b5 00 00 00 00 00 00 40 00 00 00 00 00 00 00 00   .......@........",
          "784: |    224: 00 00 00 f6 00 ee ff ff ff 00 00 00 00 00 00 00   ................",
          "785: |    272: f2 00 00 00 00 00 00 00 00 00 f9 ff ff ff ff ff   ................",
          "786: |    288: ff ff 00 00 00 5f 00 fb 00 00 00 00 00 00 00 00   ....._..........",
          "787: |    320: 1e 00 00 00 fe 00 00 00 00 00 00 00 00 00 00 00   ................",
          "788: |    336: 00 00 00 00 00 00 ca 00 00 00 00 00 00 00 ff ec   ................",
          "789: |    352: 00 00 00 00 00 00 00 32 00 00 00 00 ef ff 22 07   .......2........",
          "790: |    368: 06 17 11 11 01 30 74 61 62 6c 65 74 38 38 74 04   .....0tablet88t.",
          "791: |    384: 43 52 45 41 54 45 20 54 41 42 4c 45 20 8c cb d7   CREATE TABLE ...",
          "792: |    400: 78 d6 d5 f9 f9 17 13 11 01 3f 69 4f 64 65 78 74   x........?iOdext",
          "793: |    416: 33 78 74 33 05 43 52 45 41 54 45 26 49 6e 44 45   3xt3.CREATE&InDE",
          "794: |    432: 58 20 74 33 78 00 00 00 00 00 00 00 00 00 00 00   X t3x...........",
          "795: |    464: 00 00 00 00 00 13 76 65 6e 65 69 67 68 74 13 03   ......veneight..",
          "796: |    480: 03 40 07 07 15 00 54 45 20 49 4e 44 45 58 20 74   .@....TE INDEX t",
          "797: |    496: 31 63 64 20 4f 4e 20 74 ce d7 f5 f0 44 09 01 02   1cd ON t....D...",
          "798: | page 3 offset 1024",
          "799: |      0: 0d 00 00 00 48 01 54 00 01 f6 e2 ec 01 c5 01 aa   ....H.T.........",
          "800: |     16: 30 34 28 87 29 32 06 f5 16 13 11 01 8e 61 24 64   04(.)2.......a$d",
          "801: |     32: 65 78 74 37 78 1f 33 6d 6d 6d 6d 6d 00 00 04 06   ext7x.3mmmmm....",
          "802: |     48: 6d 41 6d 6d 6e 6d 6d 00 00 02 00 6d 6d 6d 6d 6d   mAmmnmm....mmmmm",
          "803: |     64: 15 11 01 45 45 45 45 45 45 45 45 45 45 45 45 45   ...EEEEEEEEEEEEE",
          "804: |     80: 45 45 45 45 45 45 45 45 45 45 45 00 45 63 74 64   EEEEEEEEEEE.Ectd",
          "805: |     96: 34 20 4f 4e 20 61 62 6c 5d 74 38 38 74 04 43 52   4 ON abl]t88t.CR",
          "806: |    112: 45 41 54 45 20 54 41 42 4c 45 20 74 34 28 87 29   EATE TABLE t4(.)",
          "807: |    128: 2a 06 06 13 13 01 00 00 00 4f 64 6e 78 74 33 44   *........Odnxt3D",
          "808: |    144: 74 13 05 43 52 45 41 54 45 20 49 6e 44 45 00 00   t..CREATE InDE..",
          "809: |    160: 00 00 00 00 00 00 00 f9 ff ff ff ff ff ff ff 00   ................",
          "810: |    176: 00 00 5f 00 fb 00 00 2d 00 00 00 00 00 00 00 00   .._....-........",
          "811: |    192: 00 00 00 00 00 00 00 00 00 00 00 00 00 1e 00 00   ................",
          "812: |    208: 00 fe 00 00 00 00 17 15 11 01 45 69 6e 64 65 2e   ..........Einde.",
          "813: |    224: 5b 38 63 64 74 3d 05 43 52 45 41 54 45 20 49 4e   [8cdt=.CREATE IN",
          "814: |    240: 44 45 58 20 63 20 64 32 20 4f 4e 20 74 32 28 0a   DEX c d2 ON t2(.",
          "815: |    256: 0c 44 32 05 00 10 00 00 11 11 3d 74 6c 62 61 d4   .D2.......=tlba.",
          "816: |    272: 65 33 74 33 04 43 52 45 41 54 45 20 54 41 42 4c   e3t3.CREATE TABL",
          "817: |    288: 45 20 74 36 ff ff 7f ff 43 52 45 41 54 45 20 49   E t6....CREATE I",
          "818: |    304: 73 71 6c 69 74 65 5f 73 65 71 75 65 6e 63 65 28   sqlite_sequence(",
          "819: |    320: 0a 0c 44 29 28 05 06 17 11 11 01 3d 74 6c 62 61   ..D)(......=tlba",
          "820: |    336: 20 00 00 00 33 04 43 52 45 41 54 45 20 54 41 42    ...3.CREATE TAB",
          "821: |    352: 4c 45 20 74 33 28 63 2c 78 2c 65 2c 66 29 28 02   LE t3(c,x,e,f)(.",
          "822: |    368: 06 00 00 7f ff 40 41 54 45 20 49 6e 44 45 58 20   .....@ATE InDEX",
          "823: |    384: 74 33 78 20 4f 4e 20 74 31 28 78 29 2e 04 06 17   t3x ON t1(x)....",
          "824: |    400: 15 11 01 45 69 6e 64 65 2e 74 34 63 64 74 3d 05   ...Einde.t4cdt=.",
          "825: |    416: 00 00 00 00 00 00 00 00 00 00 00 4d 00 00 00 00   ...........M....",
          "826: |    432: 01 00 00 00 00 00 00 05 00 00 10 00 00 00 00 00   ................",
          "827: |    448: 00 01 00 00 00 00 01 00 00 00 00 07 40 14 00 00   ............@...",
          "828: |    464: 00 00 21 00 40 18 00 00 00 00 00 00 40 1c 00 00   ..!.@.......@...",
          "829: |    480: 00 00 ff ff ff 00 00 00 5f 00 fb 00 00 2d 00 00   ........_....-..",
          "830: |    496: 00 00 00 1e 00 00 00 fe 00 00 64 00 00 ff fb 02   ..........d.....",
          "831: | page 4 offset 1536",
          "832: |      0: 0d 00 39 00 00 02 00 00 00 00 00 00 00 00 00 00   ..9.............",
          "833: | end a.db",
          "834: }]} {}",
          "837: do_catchsql_test 8.1 {",
          "838:   INSERT INTO t3 SELECT * FROM t2;",
          "839: } {1 {database disk image is malformed}}",
          "",
          "---------------"
        ]
      }
    },
    {
      "candidate_hash": "44c99ecf9cd409c2f8b0992d973e9db102c812b8",
      "candidate_info": {
        "commit_hash": "44c99ecf9cd409c2f8b0992d973e9db102c812b8",
        "repo": "sqlite/sqlite",
        "commit_url": "https://github.com/sqlite/sqlite/commit/44c99ecf9cd409c2f8b0992d973e9db102c812b8",
        "files": [
          "manifest",
          "manifest.uuid",
          "test/altertab3.test"
        ],
        "message": "Add extra test case for one of the problems fixed by the previous commit.\n\nFossilOrigin-Name: 0bbceebb126c94b5159079a341fa16e8424b7f2f6b9364561516964e871fb6e0",
        "before_after_code_files": [
          "manifest.uuid||manifest.uuid",
          "test/altertab3.test||test/altertab3.test"
        ]
      },
      "candidate_patch_features": {
        "candidate_earlier_than_patch": 1,
        "same_branch_evolution": 1,
        "olp_code_files": {
          "patch": [
            "manifest.uuid||manifest.uuid",
            "test/altertab3.test||test/altertab3.test"
          ],
          "candidate": [
            "manifest.uuid||manifest.uuid",
            "test/altertab3.test||test/altertab3.test"
          ]
        }
      },
      "candidate_diff": {
        "manifest.uuid||manifest.uuid": [
          "File: manifest.uuid -> manifest.uuid",
          "--- Hunk 1 ---",
          "[Context before]",
          "[No context available]",
          "",
          "[Removed Lines]",
          "1: d3b6f1665f6fb5fc5cf1c0864d779d0b24746ada530f755c7b6ff34766bd2188",
          "",
          "[Added Lines]",
          "[None]",
          "",
          "---------------"
        ],
        "test/altertab3.test||test/altertab3.test": [
          "File: test/altertab3.test -> test/altertab3.test",
          "--- Hunk 1 ---",
          "[Context before]",
          "214:     SELECT true WHERE (SELECT a, b FROM (t1)) IN ();",
          "215:   END;",
          "216: }",
          "218: do_execsql_test 9.2 {",
          "219:   ALTER TABLE t1 RENAME TO t1x;",
          "220: }",
          "223: finish_test",
          "",
          "[Removed Lines]",
          "[None]",
          "",
          "[Added Lines]",
          "221: #-------------------------------------------------------------------------",
          "222: reset_db",
          "223: do_execsql_test 10.1 {",
          "224:   CREATE TABLE t1(a, b, c);",
          "225:   CREATE TABLE t2(a, b, c);",
          "226:   CREATE VIEW v1 AS SELECT * FROM t1 WHERE (",
          "227:     SELECT t1.a FROM t1, t2",
          "228:   ) IN () OR t1.a=5;",
          "229: }",
          "231: do_execsql_test 10.2 {",
          "232:   ALTER TABLE t2 RENAME TO t3;",
          "233:   SELECT sql FROM sqlite_master WHERE name='v1';",
          "234: } {",
          "235:   {CREATE VIEW v1 AS SELECT * FROM t1 WHERE (",
          "236:     SELECT t1.a FROM t1, t2",
          "237:   ) IN () OR t1.a=5}",
          "238: }",
          "",
          "---------------"
        ]
      }
    },
    {
      "candidate_hash": "39d1a2a100056edc4d7eafd0876e2cbcb21c4e71",
      "candidate_info": {
        "commit_hash": "39d1a2a100056edc4d7eafd0876e2cbcb21c4e71",
        "repo": "sqlite/sqlite",
        "commit_url": "https://github.com/sqlite/sqlite/commit/39d1a2a100056edc4d7eafd0876e2cbcb21c4e71",
        "files": [
          "manifest",
          "manifest.uuid",
          "src/sqlite.h.in"
        ],
        "message": "Minor documentation enhancements.  No changes to code.\n\nFossilOrigin-Name: 6153f3aada0cc9c5e773753797892ee78b518b0d76568382f5fbc9ee960f814c",
        "before_after_code_files": [
          "manifest.uuid||manifest.uuid",
          "src/sqlite.h.in||src/sqlite.h.in"
        ]
      },
      "candidate_patch_features": {
        "candidate_earlier_than_patch": 1,
        "same_branch_evolution": 1,
        "olp_code_files": {
          "patch": [
            "manifest.uuid||manifest.uuid"
          ],
          "candidate": [
            "manifest.uuid||manifest.uuid"
          ]
        }
      },
      "candidate_diff": {
        "manifest.uuid||manifest.uuid": [
          "File: manifest.uuid -> manifest.uuid",
          "--- Hunk 1 ---",
          "[Context before]",
          "[No context available]",
          "",
          "[Removed Lines]",
          "1: 9b14eb77548d3f65f5a4c9b16cecdbce8a3fb663692aa8315fbd21aab3e89f0d",
          "",
          "[Added Lines]",
          "[None]",
          "",
          "---------------"
        ],
        "src/sqlite.h.in||src/sqlite.h.in": [
          "File: src/sqlite.h.in -> src/sqlite.h.in"
        ]
      }
    },
    {
      "candidate_hash": "26391eeefe25dcaacb34e18e7042a890f05d15d1",
      "candidate_info": {
        "commit_hash": "26391eeefe25dcaacb34e18e7042a890f05d15d1",
        "repo": "sqlite/sqlite",
        "commit_url": "https://github.com/sqlite/sqlite/commit/26391eeefe25dcaacb34e18e7042a890f05d15d1",
        "files": [
          "main.mk",
          "manifest",
          "manifest.uuid",
          "test/dbfuzz2.c"
        ],
        "message": "Add the \"dbfuzz2\" target to main.mk.  Remove an unused local variable from dbfuzz2.c.\n\nFossilOrigin-Name: 05c7609cfd02f49114876267d7090f4e0ea2467f3aa7c65019c5986ec8f60a87",
        "before_after_code_files": [
          "main.mk||main.mk",
          "manifest.uuid||manifest.uuid",
          "test/dbfuzz2.c||test/dbfuzz2.c"
        ]
      },
      "candidate_patch_features": {
        "candidate_earlier_than_patch": 1,
        "same_branch_evolution": 1,
        "olp_code_files": {
          "patch": [
            "manifest.uuid||manifest.uuid"
          ],
          "candidate": [
            "manifest.uuid||manifest.uuid"
          ]
        }
      },
      "candidate_diff": {
        "main.mk||main.mk": [
          "File: main.mk -> main.mk",
          "--- Hunk 1 ---",
          "[Context before]",
          "574:    $(DBFUZZ_OPT) $(TOP)/test/dbfuzz.c sqlite3.c \\",
          "575:    $(TLIBS) $(THREADLIB)",
          "577: fuzzcheck$(EXE): $(TOP)/test/fuzzcheck.c sqlite3.c sqlite3.h $(TOP)/test/ossfuzz.c",
          "578:  $(TCCX) -o fuzzcheck$(EXE) -DSQLITE_THREADSAFE=0 -DSQLITE_OMIT_LOAD_EXTENSION \\",
          "579:   -DSQLITE_ENABLE_MEMSYS5 $(FUZZCHECK_OPT) -DSQLITE_OSS_FUZZ \\",
          "",
          "[Removed Lines]",
          "[None]",
          "",
          "[Added Lines]",
          "577: DBFUZZ2_OPTS = \\",
          "578:   -DSQLITE_THREADSAFE=0 \\",
          "579:   -DSQLITE_OMIT_LOAD_EXTENSION \\",
          "580:   -DSQLITE_ENABLE_DESERIALIZE \\",
          "581:   -DSQLITE_DEBUG \\",
          "582:   -DSQLITE_ENABLE_DBSTAT_VTAB \\",
          "583:   -DSQLITE_ENABLE_RTREE \\",
          "584:   -DSQLITE_ENABLE_FTS4 \\",
          "585:   -DSQLITE_ENABLE_FTS5",
          "587: dbfuzz2$(EXE): $(TOP)/test/dbfuzz2.c sqlite3.c sqlite3.h",
          "588:  $(TCCX) -I. -g -O0 -DSTANDALONE -o dbfuzz2$(EXE) \\",
          "589:    $(DBFUZZ2_OPTS) $(TOP)/test/dbfuzz2.c sqlite3.c  $(TLIBS) $(THREADLIB)",
          "",
          "---------------"
        ],
        "manifest.uuid||manifest.uuid": [
          "File: manifest.uuid -> manifest.uuid",
          "--- Hunk 1 ---",
          "[Context before]",
          "[No context available]",
          "",
          "[Removed Lines]",
          "1: 5547f39de993c708f72301ef25df190a2f007e0c4253799bdd9e86bb1ae41777",
          "",
          "[Added Lines]",
          "[None]",
          "",
          "---------------"
        ],
        "test/dbfuzz2.c||test/dbfuzz2.c": [
          "File: test/dbfuzz2.c -> test/dbfuzz2.c",
          "--- Hunk 1 ---",
          "[Context before]",
          "169: #ifdef STANDALONE",
          "170: int main(int argc, char **argv){",
          "171:   int i;",
          "173:   LLVMFuzzerInitialize(&argc, &argv);",
          "174:   for(i=1; i<argc; i++){",
          "175:     unsigned char *pIn;",
          "",
          "[Removed Lines]",
          "172:   int prevAmt = -1;",
          "",
          "[Added Lines]",
          "[None]",
          "",
          "---------------"
        ]
      }
    },
    {
      "candidate_hash": "53e8709b75e21fdba0967a65c855d410c724d4b0",
      "candidate_info": {
        "commit_hash": "53e8709b75e21fdba0967a65c855d410c724d4b0",
        "repo": "sqlite/sqlite",
        "commit_url": "https://github.com/sqlite/sqlite/commit/53e8709b75e21fdba0967a65c855d410c724d4b0",
        "files": [
          "manifest",
          "manifest.uuid",
          "test/view.test"
        ],
        "message": "New test case for check-in [74ef97bf51dd531a] that takes the fix in the previous check-in into account.\n\nFossilOrigin-Name: cb1d06521de5918a2324a41e207b48c5e5149c23b927b9e3e1f3c3b38b82658e",
        "before_after_code_files": [
          "manifest.uuid||manifest.uuid",
          "test/view.test||test/view.test"
        ]
      },
      "candidate_patch_features": {
        "candidate_earlier_than_patch": 1,
        "same_branch_evolution": 1,
        "olp_code_files": {
          "patch": [
            "manifest.uuid||manifest.uuid"
          ],
          "candidate": [
            "manifest.uuid||manifest.uuid"
          ]
        }
      },
      "candidate_diff": {
        "manifest.uuid||manifest.uuid": [
          "File: manifest.uuid -> manifest.uuid",
          "--- Hunk 1 ---",
          "[Context before]",
          "[No context available]",
          "",
          "[Removed Lines]",
          "1: 3cacc4b940fd69776d930deec9512df47a2f22cb04fb955e354a0b25bdec287c",
          "",
          "[Added Lines]",
          "[None]",
          "",
          "---------------"
        ],
        "test/view.test||test/view.test": [
          "File: test/view.test -> test/view.test",
          "--- Hunk 1 ---",
          "[Context before]",
          "715:   1 1 2 2",
          "716:   1 1 3 3",
          "717: }",
          "719: finish_test",
          "",
          "[Removed Lines]",
          "[None]",
          "",
          "[Added Lines]",
          "718: do_execsql_test view-26.1 {",
          "719:   WITH v17(x,y) AS (SELECT max(a), min(b) FROM t16 GROUP BY c)",
          "720:   SELECT * FROM v17 AS one, v17 AS two WHERE one.x=1;",
          "721: } {",
          "722:   1 1 1 1",
          "723:   1 1 2 2",
          "724:   1 1 3 3",
          "725: }",
          "",
          "---------------"
        ]
      }
    }
  ]
}