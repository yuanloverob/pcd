{
  "cve_id": "CVE-2020-22873",
  "cve_desc": "Buffer overflow vulnerability in function NumberToPrecisionCmd in jsish before 3.0.7, allows remote attackers to execute arbitrary code.",
  "repo": "pcmacdon/jsish",
  "patch_hash": "430ea27accd4d4ffddc946c9402e7c9064835a18",
  "patch_info": {
    "commit_hash": "430ea27accd4d4ffddc946c9402e7c9064835a18",
    "repo": "pcmacdon/jsish",
    "commit_url": "https://github.com/pcmacdon/jsish/commit/430ea27accd4d4ffddc946c9402e7c9064835a18",
    "files": [
      "src/jsi.h",
      "src/jsiCmds.c",
      "src/jsiCode.c",
      "src/jsiEval.c",
      "src/jsiFilesys.c",
      "src/jsiFunc.c",
      "src/jsiHash.c",
      "src/jsiInterp.c",
      "src/jsiJSON.c",
      "src/jsiMySql.c",
      "src/jsiNumber.c",
      "src/jsiOptions.c",
      "src/jsiPstate.c",
      "src/jsiRegexp.c",
      "src/jsiSqlite.c",
      "src/jsiString.c",
      "src/jsiTree.c",
      "src/jsiUtils.c",
      "src/jsiValue.c",
      "src/jsiWebSocket.c"
    ],
    "message": "Release \"3.0.7\": Fix toPrecision bug \"stack overflow #4\".\n\nFossilOrigin-Name: 6c7f0c37027d7f890b57cb38f776af39b8f81f03e60ceeb0a231a1d21e24b5de",
    "before_after_code_files": [
      "src/jsi.h||src/jsi.h",
      "src/jsiCmds.c||src/jsiCmds.c",
      "src/jsiCode.c||src/jsiCode.c",
      "src/jsiEval.c||src/jsiEval.c",
      "src/jsiFilesys.c||src/jsiFilesys.c",
      "src/jsiFunc.c||src/jsiFunc.c",
      "src/jsiHash.c||src/jsiHash.c",
      "src/jsiInterp.c||src/jsiInterp.c",
      "src/jsiJSON.c||src/jsiJSON.c",
      "src/jsiMySql.c||src/jsiMySql.c",
      "src/jsiNumber.c||src/jsiNumber.c",
      "src/jsiOptions.c||src/jsiOptions.c",
      "src/jsiPstate.c||src/jsiPstate.c",
      "src/jsiRegexp.c||src/jsiRegexp.c",
      "src/jsiSqlite.c||src/jsiSqlite.c",
      "src/jsiString.c||src/jsiString.c",
      "src/jsiTree.c||src/jsiTree.c",
      "src/jsiUtils.c||src/jsiUtils.c",
      "src/jsiValue.c||src/jsiValue.c",
      "src/jsiWebSocket.c||src/jsiWebSocket.c"
    ]
  },
  "patch_diff": {
    "src/jsi.h||src/jsi.h": [
      "File: src/jsi.h -> src/jsi.h",
      "--- Hunk 1 ---",
      "[Context before]",
      "5: #define JSI_VERSION_MAJOR   3",
      "6: #define JSI_VERSION_MINOR   0",
      "9: #define JSI_VERSION (JSI_VERSION_MAJOR + ((Jsi_Number)JSI_VERSION_MINOR/100.0) + ((Jsi_Number)JSI_VERSION_RELEASE/10000.0))",
      "",
      "[Removed Lines]",
      "7: #define JSI_VERSION_RELEASE 6",
      "",
      "[Added Lines]",
      "7: #define JSI_VERSION_RELEASE 7",
      "",
      "---------------",
      "--- Hunk 2 ---",
      "[Context before]",
      "217:     JSI_BUFSIZ=8192",
      "",
      "[Removed Lines]",
      "216:     JSI_MAX_NUMBER_STRING=50,",
      "",
      "[Added Lines]",
      "216:     JSI_MAX_NUMBER_STRING=100,",
      "",
      "---------------"
    ],
    "src/jsiCmds.c||src/jsiCmds.c": [
      "File: src/jsiCmds.c -> src/jsiCmds.c",
      "--- Hunk 1 ---",
      "[Context before]",
      "845:         Jsi_ObjInsert(interp, nobj, \"name\", Jsi_ValueNewStringDup(interp, name), 0);",
      "846:         Jsi_ObjInsert(interp, nobj, \"version\", Jsi_ValueNewNumber(interp, ptr->version), 0);",
      "847:         Jsi_ObjInsert(interp, nobj, \"lastReq\", Jsi_ValueNewNumber(interp, ptr->lastReq), 0);",
      "849:         jsi_VersionNormalize(ptr->version, buf, sizeof(buf));",
      "850:         Jsi_ObjInsert(interp, nobj, \"verStr\", Jsi_ValueNewStringDup(interp, buf), 0);",
      "851:         const char *cp = (ptr->loadFile?ptr->loadFile:\"\");",
      "",
      "[Removed Lines]",
      "848:         char buf[200];",
      "",
      "[Added Lines]",
      "848:         char buf[JSI_MAX_NUMBER_STRING*2];",
      "",
      "---------------",
      "--- Hunk 2 ---",
      "[Context before]",
      "1192:     Jsi_Value *vres;",
      "1193:     Jsi_Obj  *ores = Jsi_ObjNew(interp);",
      "1194:     Jsi_Value *nnv;",
      "1197:     vres = Jsi_ValueMakeObject(interp, NULL, ores);",
      "",
      "[Removed Lines]",
      "1195:     char *val, nam[200];",
      "",
      "[Added Lines]",
      "1195:     char *val, nam[JSI_BUFSIZ/2];",
      "",
      "---------------",
      "--- Hunk 3 ---",
      "[Context before]",
      "2700:     }",
      "2701:     if (bp.line<=0 && !bp.func)",
      "2702:         return Jsi_LogError(\"bad number\");",
      "2704:     bp.id = ++interp->debugOpts.breakIdx;",
      "2705:     bp.enabled = 1;",
      "2706:     snprintf(nbuf, sizeof(nbuf), \"%d\", bp.id);",
      "",
      "[Removed Lines]",
      "2703:     char nbuf[100];",
      "",
      "[Added Lines]",
      "2703:     char nbuf[JSI_MAX_NUMBER_STRING];",
      "",
      "---------------",
      "--- Hunk 4 ---",
      "[Context before]",
      "2718:     if (interp->breakpointHash)",
      "2719:     {",
      "2720:         int num;",
      "2722:         if (Jsi_GetIntFromValue(interp, val, &num) != JSI_OK)",
      "2723:             return Jsi_LogError(\"bad number\");",
      "",
      "[Removed Lines]",
      "2721:         char nbuf[100];",
      "",
      "[Added Lines]",
      "2721:         char nbuf[JSI_MAX_NUMBER_STRING];",
      "",
      "---------------",
      "--- Hunk 5 ---",
      "[Context before]",
      "2766:         return Jsi_HashKeysDump(interp, interp->breakpointHash, ret, 0);",
      "2767:     Jsi_Value *val = Jsi_ValueArrayIndex(interp, args, 0);",
      "2768:     int num;",
      "2770:     if (Jsi_GetIntFromValue(interp, val, &num) != JSI_OK)",
      "2771:         return Jsi_LogError(\"bad number\");",
      "",
      "[Removed Lines]",
      "2769:     char nbuf[100];",
      "",
      "[Added Lines]",
      "2769:     char nbuf[JSI_MAX_NUMBER_STRING];",
      "",
      "---------------",
      "--- Hunk 6 ---",
      "[Context before]",
      "3800:     Jsi_Value *flag = Jsi_ValueArrayIndex(interp, args, 1);",
      "3801:     if (!val) goto bail;",
      "3802:     if (Jsi_ValueIsNumber(interp, val)) {",
      "3804:         Jsi_Number n;",
      "3805:         if (Jsi_GetNumberFromValue(interp, val, &n) != JSI_OK)",
      "3806:             goto bail;",
      "",
      "[Removed Lines]",
      "3803:         char buf[200];",
      "",
      "[Added Lines]",
      "3803:         char buf[JSI_MAX_NUMBER_STRING*2];",
      "",
      "---------------",
      "--- Hunk 7 ---",
      "[Context before]",
      "3953:         if (bv)",
      "3954:             interp->timesStart = now;",
      "3955:         else {",
      "3957:             snprintf(buf, sizeof(buf), \" (times = %.6f sec)\\n\", (now-interp->timesStart));",
      "3958:             Jsi_Puts(interp, jsi_Stderr, buf, -1);",
      "3959:         }",
      "",
      "[Removed Lines]",
      "3956:             char buf[100];",
      "",
      "[Added Lines]",
      "3956:             char buf[JSI_MAX_NUMBER_STRING];",
      "",
      "---------------"
    ],
    "src/jsiCode.c||src/jsiCode.c": [
      "File: src/jsiCode.c -> src/jsiCode.c",
      "--- Hunk 1 ---",
      "[Context before]",
      "436:     if (_JSICASTINT(op->op) < 0 || op->op >= OP_LASTOP) {",
      "437:         snprintf(buf, bsiz, \"Bad opcode[%d] at %d\", op->op, currentip);",
      "438:     }",
      "440:     snprintf(nbuf, sizeof(nbuf), \"%d#%d\", currentip, op->Line);",
      "441:     snprintf(buf, bsiz, \"%-8s %s \", nbuf, jsi_op_names[op->op]);",
      "",
      "[Removed Lines]",
      "439:     char nbuf[100];",
      "",
      "[Added Lines]",
      "439:     char nbuf[JSI_MAX_NUMBER_STRING];",
      "",
      "---------------"
    ],
    "src/jsiEval.c||src/jsiEval.c": [
      "File: src/jsiEval.c -> src/jsiEval.c",
      "--- Hunk 1 ---",
      "[Context before]",
      "288: static const char *jsi_evalprint(Jsi_Value *v)",
      "289: {",
      "291:     if (!v)",
      "292:         return \"nil\";",
      "293:     if (v->vt == JSI_VT_NUMBER) {",
      "295:     } else if (v->vt == JSI_VT_BOOL) {",
      "297:     } else if (v->vt == JSI_VT_STRING) {",
      "299:     } else if (v->vt == JSI_VT_VARIABLE) {",
      "301:     } else if (v->vt == JSI_VT_NULL) {",
      "303:     } else if (v->vt == JSI_VT_OBJECT) {",
      "305:     } else if (v->vt == JSI_VT_UNDEF) {",
      "307:     }",
      "308:     return buf;",
      "309: }",
      "",
      "[Removed Lines]",
      "290:     static char buf[100];",
      "294:         snprintf(buf, 100, \"NUM:%\" JSI_NUMGFMT \" \", v->d.num);",
      "296:         snprintf(buf, 100, \"BOO:%d\", v->d.val);",
      "298:         snprintf(buf, 100, \"STR:'%s'\", v->d.s.str);",
      "300:         snprintf(buf, 100, \"VAR:%p\", v->d.lval);",
      "302:         snprintf(buf, 100, \"NULL\");",
      "304:         snprintf(buf, 100, \"OBJ:%p\", v->d.obj);",
      "306:         snprintf(buf, 100, \"UNDEFINED\");",
      "",
      "[Added Lines]",
      "290:     static char buf[JSI_MAX_NUMBER_STRING];",
      "294:         snprintf(buf, sizeof(buf), \"NUM:%\" JSI_NUMGFMT \" \", v->d.num);",
      "296:         snprintf(buf, sizeof(buf), \"BOO:%d\", v->d.val);",
      "298:         snprintf(buf, sizeof(buf), \"STR:'%s'\", v->d.s.str);",
      "300:         snprintf(buf, sizeof(buf), \"VAR:%p\", v->d.lval);",
      "302:         snprintf(buf, sizeof(buf), \"NULL\");",
      "304:         snprintf(buf, sizeof(buf), \"OBJ:%p\", v->d.obj);",
      "306:         snprintf(buf, sizeof(buf), \"UNDEFINED\");",
      "",
      "---------------",
      "--- Hunk 2 ---",
      "[Context before]",
      "403:     jsi_TryList *trylist, jsi_OpCode *ip, Jsi_OpCodes *opcodes)",
      "404: {",
      "405:     int i;",
      "407:     jsi_code_decode(interp, ip, ip - opcodes->codes, buf, sizeof(buf));",
      "408:     Jsi_Printf(interp, jsi_Stderr, \"%p: %-30.200s : THIS=%s, STACK=[\", ip, buf, jsi_evalprint(_this));",
      "409:     for (i = 0; i < interp->framePtr->Sp; ++i) {",
      "",
      "[Removed Lines]",
      "406:     char buf[200];",
      "",
      "[Added Lines]",
      "406:     char buf[JSI_MAX_NUMBER_STRING*2];",
      "",
      "---------------",
      "--- Hunk 3 ---",
      "[Context before]",
      "1538:                     break;",
      "1539:                 }",
      "1540:                 int bval = 0;",
      "1542:                 Jsi_Value *vv;",
      "1543:                 Jsi_Obj *obj = v->d.obj;",
      "1544:                 if (!cp) {",
      "",
      "[Removed Lines]",
      "1541:                 char nbuf[100];",
      "",
      "[Added Lines]",
      "1541:                 char nbuf[JSI_MAX_NUMBER_STRING];",
      "",
      "---------------",
      "--- Hunk 4 ---",
      "[Context before]",
      "2155:     Jsi_IncrRefCount(interp, fargs);",
      "2156:     rc = jsi_evalcode_sub(ps, opcodes, scope, fargs, _this, *vret);",
      "2157:     Jsi_DecrRefCount(interp, fargs);",
      "2159:         if ((interp->evalFlags&JSI_EVAL_RETURN)==0)",
      "2160:             Jsi_ValueMakeUndef(interp, vret);",
      "",
      "[Removed Lines]",
      "2158:     if (interp->didReturn == 0 && !interp->exited) {",
      "",
      "[Added Lines]",
      "2158:     if (interp->didReturn == 0 && !interp->exited && rc == JSI_OK) {",
      "",
      "---------------"
    ],
    "src/jsiFilesys.c||src/jsiFilesys.c": [
      "File: src/jsiFilesys.c -> src/jsiFilesys.c",
      "--- Hunk 1 ---",
      "[Context before]",
      "1178:     if ((str = getenv(\"HOME\")) == NULL) {",
      "1179:         struct passwd pwd, *pw;",
      "1181:         if (getpwuid_r(getuid(), &pwd, buf, sizeof(buf), &pw) == 0 && pw->pw_dir)",
      "1182:             str = pw->pw_dir;",
      "1183:     }",
      "",
      "[Removed Lines]",
      "1180:         char buf[20000];",
      "",
      "[Added Lines]",
      "1180:         char buf[JSI_BUFSIZ*3];",
      "",
      "---------------"
    ],
    "src/jsiFunc.c||src/jsiFunc.c": [
      "File: src/jsiFunc.c -> src/jsiFunc.c",
      "--- Hunk 1 ---",
      "[Context before]",
      "189: Jsi_RC jsi_ArgTypeCheck(Jsi_Interp *interp, int typ,  Jsi_Value *arg, const char *p1,",
      "190:     const char *p2, int index, Jsi_Func *func, bool isdefault) {",
      "191:     Jsi_RC rc = JSI_OK;",
      "193:     idxBuf[0] = 0;",
      "194:     if (func && arg->vt == JSI_VT_UNDEF && !interp->typeCheck.noundef && index>0 && !isdefault && !(typ&JSI_TT_UNDEFINED)) {",
      "195:         snprintf(idxBuf, sizeof(idxBuf), \" arg %d\", index);",
      "",
      "[Removed Lines]",
      "192:     char idxBuf[200];",
      "",
      "[Added Lines]",
      "192:     char idxBuf[JSI_MAX_NUMBER_STRING*2];",
      "",
      "---------------",
      "--- Hunk 2 ---",
      "[Context before]",
      "295:         Jsi_DString dStr = {};",
      "296:         const char *exp = jsi_typeName(interp, typ, &dStr);",
      "297:         const char *vtyp = jsi_TypeName(interp, (Jsi_ttype)atyp);",
      "299:         idxBuf[0] = 0;",
      "300:         if (index>0)",
      "301:             snprintf(idxBuf, sizeof(idxBuf), \" arg %d\", index);",
      "",
      "[Removed Lines]",
      "298:         char idxBuf[200];",
      "",
      "[Added Lines]",
      "298:         char idxBuf[JSI_MAX_NUMBER_STRING*2];",
      "",
      "---------------",
      "--- Hunk 3 ---",
      "[Context before]",
      "339:     if (ss==NULL && spec == NULL)",
      "340:         return JSI_OK;",
      "341:     int i, minArgs, maxArgs, mis = 0, varargs = 0;",
      "343:     if (func->type == FC_BUILDIN) {",
      "344:         varargs =  (spec->maxArgs<0);",
      "345:         maxArgs = spec->maxArgs + func->callflags.bits.addargs;",
      "",
      "[Removed Lines]",
      "342:     char nbuf[100];",
      "",
      "[Added Lines]",
      "342:     char nbuf[JSI_MAX_NUMBER_STRING];",
      "",
      "---------------"
    ],
    "src/jsiHash.c||src/jsiHash.c": [
      "File: src/jsiHash.c -> src/jsiHash.c",
      "--- Hunk 1 ---",
      "[Context before]",
      "623:     void *key = Jsi_HashKeyGet(hPtr);",
      "624:     if (opts->keyType == JSI_KEYS_ONEWORD)",
      "625:         return Jsi_ValueNewNumber(opts->interp, (Jsi_Number)(intptr_t)key);",
      "627:     snprintf(nbuf, sizeof(nbuf), \"%p\", key);",
      "628:     return Jsi_ValueNewStringDup(opts->interp, nbuf);",
      "629: }",
      "",
      "[Removed Lines]",
      "626:     char nbuf[100];",
      "",
      "[Added Lines]",
      "626:     char nbuf[JSI_MAX_NUMBER_STRING];",
      "",
      "---------------"
    ],
    "src/jsiInterp.c||src/jsiInterp.c": [
      "File: src/jsiInterp.c -> src/jsiInterp.c",
      "--- Hunk 1 ---",
      "[Context before]",
      "701: Jsi_Interp* Jsi_Main(Jsi_InterpOpts *opts)",
      "702: {",
      "704:     Jsi_Interp* interp = NULL;",
      "705:     int argc = 0, first = 1;",
      "706:     char **argv = NULL;",
      "",
      "[Removed Lines]",
      "703:     int rc = 0;",
      "",
      "[Added Lines]",
      "703:     Jsi_RC rc = JSI_OK;",
      "",
      "---------------",
      "--- Hunk 2 ---",
      "[Context before]",
      "929:     }",
      "930:     if (jsi_deleted) //TODO: rationalize jsi_deleted, jsi_exitCode, etc",
      "931:         return jsi_DoExit(rc==JSI_EXIT?NULL:interp, jsi_exitCode);",
      "934:         Jsi_Value *ret = Jsi_ReturnValue(interp);",
      "935:         if (!Jsi_ValueIsType(interp, ret, JSI_VT_UNDEF)) {",
      "",
      "[Removed Lines]",
      "932:     if (rc == 0) {",
      "",
      "[Added Lines]",
      "932:     if (rc == JSI_OK) {",
      "",
      "---------------",
      "--- Hunk 3 ---",
      "[Context before]",
      "940:         }",
      "941:     } else {",
      "942:         if (!interp->parent && !interp->isHelp)",
      "944:         return jsi_DoExit(interp, 1);",
      "945:     }",
      "",
      "[Removed Lines]",
      "943:             fputs(\"ERROR\\n\", stderr);",
      "",
      "[Added Lines]",
      "943:             fprintf(stderr, \"ERROR: %s\\n\", interp->errMsgBuf);",
      "",
      "---------------"
    ],
    "src/jsiJSON.c||src/jsiJSON.c": [
      "File: src/jsiJSON.c -> src/jsiJSON.c",
      "--- Hunk 1 ---",
      "[Context before]",
      "7: static void jsonNewDString(Jsi_Interp *interp, Jsi_DString *dStr, const char* str, int len)",
      "8: {",
      "10:     const char *cp = str;",
      "11:     int ulen;",
      "",
      "[Removed Lines]",
      "9:     char buf[100], *dp = buf;",
      "",
      "[Added Lines]",
      "9:     char buf[JSI_MAX_NUMBER_STRING], *dp = buf;",
      "",
      "---------------"
    ],
    "src/jsiMySql.c||src/jsiMySql.c": [
      "File: src/jsiMySql.c -> src/jsiMySql.c",
      "--- Hunk 1 ---",
      "[Context before]",
      "1170: static void mdbEvalSetColumnJSON(MyDbEvalContext *p, int iCol, Jsi_DString *dStr) {",
      "1171:     Jsi_Interp *interp = p->jdb->interp;",
      "1173:     MysqlPrep *prep = p->prep;",
      "1174:     SqlFieldResults *field = prep->fieldResult+iCol;",
      "1175:     if (field->isnull) {",
      "",
      "[Removed Lines]",
      "1172:     char nbuf[200];",
      "",
      "[Added Lines]",
      "1172:     char nbuf[JSI_MAX_NUMBER_STRING];",
      "",
      "---------------",
      "--- Hunk 2 ---",
      "[Context before]",
      "1220: static void mdbEvalSetColumn(MyDbEvalContext *p, int iCol, Jsi_DString *dStr) {",
      "1223:     MysqlPrep *prep = p->prep;",
      "1224:     SqlFieldResults *field = prep->fieldResult+iCol;",
      "1225:     Jsi_Interp *interp = p->jdb->interp;",
      "",
      "[Removed Lines]",
      "1222:     char nbuf[200];",
      "",
      "[Added Lines]",
      "1222:     char nbuf[JSI_MAX_NUMBER_STRING];",
      "",
      "---------------"
    ],
    "src/jsiNumber.c||src/jsiNumber.c": [
      "File: src/jsiNumber.c -> src/jsiNumber.c",
      "--- Hunk 1 ---",
      "[Context before]",
      "123: static Jsi_RC NumberToFixedCmd(Jsi_Interp *interp, Jsi_Value *args, Jsi_Value *_this,",
      "124:     Jsi_Value **ret, Jsi_Func *funcPtr)",
      "125: {",
      "127:     int prec = 0, skip = 0;",
      "128:     Jsi_Number num;",
      "129:     Jsi_Value *v;",
      "",
      "[Removed Lines]",
      "126:     char buf[100];",
      "",
      "[Added Lines]",
      "126:     char buf[JSI_MAX_NUMBER_STRING+1];",
      "",
      "---------------",
      "--- Hunk 2 ---",
      "[Context before]",
      "141: static Jsi_RC NumberToPrecisionCmd(Jsi_Interp *interp, Jsi_Value *args, Jsi_Value *_this,",
      "142:     Jsi_Value **ret, Jsi_Func *funcPtr)",
      "143: {",
      "145:     int prec = 0, skip = 0;",
      "146:     Jsi_Number num;",
      "147:     Jsi_Value *v;",
      "148:     ChkStringN(_this, funcPtr, v);",
      "149:     if (Jsi_GetIntFromValue(interp, Jsi_ValueArrayIndex(interp, args, skip), &prec) != JSI_OK)",
      "150:         return JSI_ERROR;",
      "152:     Jsi_GetDoubleFromValue(interp, v, &num);",
      "153:     snprintf(buf, sizeof(buf),\"%.*\" JSI_NUMFFMT, prec, num);",
      "154:     if (num<0)",
      "",
      "[Removed Lines]",
      "144:     char buf[100];",
      "151:     if (prec<=0) return JSI_ERROR;",
      "",
      "[Added Lines]",
      "144:     char buf[JSI_MAX_NUMBER_STRING*2];",
      "151:     if (prec<=0 || prec>JSI_MAX_NUMBER_STRING) return Jsi_LogError(\"precision must be between 1 and %d\", JSI_MAX_NUMBER_STRING);",
      "",
      "---------------",
      "--- Hunk 3 ---",
      "[Context before]",
      "163: static Jsi_RC NumberToExponentialCmd(Jsi_Interp *interp, Jsi_Value *args, Jsi_Value *_this,",
      "164:     Jsi_Value **ret, Jsi_Func *funcPtr)",
      "165: {",
      "167:     int prec = 0, skip = 0;",
      "168:     Jsi_Number num;",
      "169:     Jsi_Value *v;",
      "",
      "[Removed Lines]",
      "166:     char buf[100];",
      "",
      "[Added Lines]",
      "166:     char buf[JSI_MAX_NUMBER_STRING+1];",
      "",
      "---------------",
      "--- Hunk 4 ---",
      "[Context before]",
      "191: static Jsi_RC NumberToStringCmd(Jsi_Interp *interp, Jsi_Value *args, Jsi_Value *_this,",
      "192:     Jsi_Value **ret, Jsi_Func *funcPtr)",
      "193: {",
      "195:     int radix = 10, skip = 0, argc = Jsi_ValueGetLength(interp, args);",
      "196:     Jsi_Number num;",
      "197:     Jsi_Value *v;",
      "",
      "[Removed Lines]",
      "194:     char buf[500];",
      "",
      "[Added Lines]",
      "194:     char buf[JSI_MAX_NUMBER_STRING+1];",
      "",
      "---------------"
    ],
    "src/jsiOptions.c||src/jsiOptions.c": [
      "File: src/jsiOptions.c -> src/jsiOptions.c",
      "--- Hunk 1 ---",
      "[Context before]",
      "1876:         if (JSI_OK != jsi_EnumToValue(interp, eSpec, outValue, outStr, (void*)&nval, flags))",
      "1877:             return JSI_ERROR;",
      "1878:     } else if (outStr) {",
      "1880:         snprintf(obuf, sizeof(obuf), \"%\" PRId64, inum);",
      "1881:         Jsi_DSAppend(outStr, obuf, NULL);",
      "1882:     } else {",
      "",
      "[Removed Lines]",
      "1879:         char obuf[100];",
      "",
      "[Added Lines]",
      "1879:         char obuf[JSI_MAX_NUMBER_STRING];",
      "",
      "---------------"
    ],
    "src/jsiPstate.c||src/jsiPstate.c": [
      "File: src/jsiPstate.c -> src/jsiPstate.c",
      "--- Hunk 1 ---",
      "[Context before]",
      "239:     l->d.fp = fp;",
      "240:     Jsi_Rewind(ps->interp, fp);",
      "241:     if (skipbang) {",
      "244:             Jsi_Rewind(ps->interp, fp);",
      "245:         }",
      "246:     }",
      "",
      "[Removed Lines]",
      "242:         char buf[1000];",
      "243:         if (Jsi_Gets(ps->interp, fp, buf, 1000) && (buf[0] != '#' || buf[1] != '!')) {",
      "",
      "[Added Lines]",
      "242:         char buf[JSI_BUFSIZ];",
      "243:         if (Jsi_Gets(ps->interp, fp, buf, sizeof(buf)) && (buf[0] != '#' || buf[1] != '!')) {",
      "",
      "---------------"
    ],
    "src/jsiRegexp.c||src/jsiRegexp.c": [
      "File: src/jsiRegexp.c -> src/jsiRegexp.c",
      "--- Hunk 1 ---",
      "[Context before]",
      "162:     int r  = regexec(reg, v, 1, &pos, regexec_flags);",
      "164:     if (r >= REG_BADPAT) {",
      "167:         regerror(r, reg, buf, sizeof(buf));",
      "168:         return Jsi_LogError(\"error while matching pattern: %s\", buf);",
      "",
      "[Removed Lines]",
      "165:         char buf[100];",
      "",
      "[Added Lines]",
      "165:         char buf[JSI_MAX_NUMBER_STRING];",
      "",
      "---------------"
    ],
    "src/jsiSqlite.c||src/jsiSqlite.c": [
      "File: src/jsiSqlite.c -> src/jsiSqlite.c",
      "--- Hunk 1 ---",
      "[Context before]",
      "1396:     bool b;",
      "1397:     if( rc != JSI_OK) {",
      "1399:         snprintf(buf, sizeof(buf), \"error in function: %.200s\", p->zName);",
      "1400:         sqlite3_result_error(context, buf, -1);",
      "",
      "[Removed Lines]",
      "1398:         char buf[250];",
      "",
      "[Added Lines]",
      "1398:         char buf[JSI_BUFSIZ];",
      "",
      "---------------",
      "--- Hunk 2 ---",
      "[Context before]",
      "1761: static void dbEvalSetColumnJSON(DbEvalContext *p, int iCol, Jsi_DString *dStr) {",
      "1762:     Jsi_Interp *interp = p->jdb->interp;",
      "1765:     sqlite3_stmt *pStmt = p->pPreStmt->pStmt;",
      "",
      "[Removed Lines]",
      "1763:     char nbuf[200];",
      "",
      "[Added Lines]",
      "1763:     char nbuf[JSI_MAX_NUMBER_STRING];",
      "",
      "---------------",
      "--- Hunk 3 ---",
      "[Context before]",
      "1811: static void dbEvalSetColumn(DbEvalContext *p, int iCol, Jsi_DString *dStr) {",
      "1812:     Jsi_Interp *interp = p->jdb->interp;",
      "1815:     sqlite3_stmt *pStmt = p->pPreStmt->pStmt;",
      "",
      "[Removed Lines]",
      "1813:     char nbuf[200];",
      "",
      "[Added Lines]",
      "1813:     char nbuf[JSI_MAX_NUMBER_STRING];",
      "",
      "---------------",
      "--- Hunk 4 ---",
      "[Context before]",
      "2561: static void dbOutputHexBlob(Jsi_DString *dStr, const void *pBlob, int nBlob){",
      "2562:   int i;",
      "2564:   Jsi_DSAppend(dStr, \"X'\", NULL);",
      "2565:   for(i=0; i<nBlob; i++){ snprintf(out, sizeof(out),\"%02x\",zBlob[i]&0xff);Jsi_DSAppend(dStr, out, NULL); }",
      "2566:   Jsi_DSAppend(dStr, \"'\", NULL);",
      "",
      "[Removed Lines]",
      "2563:   char out[100], *zBlob = (char *)pBlob;",
      "",
      "[Added Lines]",
      "2563:   char out[JSI_MAX_NUMBER_STRING], *zBlob = (char *)pBlob;",
      "",
      "---------------",
      "--- Hunk 5 ---",
      "[Context before]",
      "4394:     DbEvalContext sEval = {};",
      "4395:     int insert = 0, replace = 0, update = 0;",
      "4397: #ifdef JSI_DB_DSTRING_SIZE",
      "4398:     JSI_DSTRING_VAR(dStr, JSI_DB_DSTRING_SIZE);",
      "4399: #else",
      "",
      "[Removed Lines]",
      "4396:     char nbuf[100], *bPtr;",
      "",
      "[Added Lines]",
      "4396:     char nbuf[JSI_MAX_NUMBER_STRING], *bPtr;",
      "",
      "---------------"
    ],
    "src/jsiString.c||src/jsiString.c": [
      "File: src/jsiString.c -> src/jsiString.c",
      "--- Hunk 1 ---",
      "[Context before]",
      "724:         int match = regexec(regex, p, MAX_SUBREGEX, pmatch, regexec_flags);",
      "726:         if (match >= REG_BADPAT) {",
      "729:             regerror(match, regex, buf, sizeof(buf));",
      "730:             Jsi_LogError(\"error while matching pattern: %s\", buf);",
      "",
      "[Removed Lines]",
      "727:             char buf[100];",
      "",
      "[Added Lines]",
      "727:             char buf[JSI_MAX_NUMBER_STRING];",
      "",
      "---------------",
      "--- Hunk 2 ---",
      "[Context before]",
      "895:             return JSI_OK;",
      "896:         }",
      "897:         if (r >= REG_BADPAT) {",
      "900:             regerror(r, reg, buf, sizeof(buf));",
      "901:             Jsi_LogError(\"error while matching pattern: %s\", buf);",
      "",
      "[Removed Lines]",
      "898:             char buf[100];",
      "",
      "[Added Lines]",
      "898:             char buf[JSI_MAX_NUMBER_STRING];",
      "",
      "---------------"
    ],
    "src/jsiTree.c||src/jsiTree.c": [
      "File: src/jsiTree.c -> src/jsiTree.c",
      "--- Hunk 1 ---",
      "[Context before]",
      "946:         int n;",
      "947:         int m;",
      "948:     } t1, t2;",
      "951:     wt = Jsi_TreeNew(interp, JSI_KEYS_ONEWORD, NULL);",
      "952:     mt = Jsi_TreeNew(interp, sizeof(struct tdata), NULL);",
      "",
      "[Removed Lines]",
      "949:     char nbuf[100];",
      "",
      "[Added Lines]",
      "949:     char nbuf[JSI_MAX_NUMBER_STRING];",
      "",
      "---------------",
      "--- Hunk 2 ---",
      "[Context before]",
      "1038:     void *key = Jsi_TreeKeyGet(hPtr);",
      "1039:     if (opts->keyType == JSI_KEYS_ONEWORD)",
      "1040:         return Jsi_ValueNewNumber(opts->interp, (Jsi_Number)(intptr_t)key);",
      "1042:     snprintf(nbuf, sizeof(nbuf), \"%p\", key);",
      "1043:     return Jsi_ValueNewStringDup(opts->interp, nbuf);",
      "1044: }",
      "",
      "[Removed Lines]",
      "1041:     char nbuf[100];",
      "",
      "[Added Lines]",
      "1041:     char nbuf[JSI_MAX_NUMBER_STRING];",
      "",
      "---------------"
    ],
    "src/jsiUtils.c||src/jsiUtils.c": [
      "File: src/jsiUtils.c -> src/jsiUtils.c",
      "--- Hunk 1 ---",
      "[Context before]",
      "626: static Jsi_RC jsiValueGetString(Jsi_Interp *interp, Jsi_Value* v, Jsi_DString *dStr, objwalker *owPtr)",
      "627: {",
      "629:     Jsi_DString eStr;",
      "630:     Jsi_DSInit(&eStr);",
      "631:     if (interp->maxDepth>0 && owPtr->depth > interp->maxDepth)",
      "",
      "[Removed Lines]",
      "628:     char buf[100], *str;",
      "",
      "[Added Lines]",
      "628:     char buf[JSI_MAX_NUMBER_STRING], *str;",
      "",
      "---------------",
      "--- Hunk 2 ---",
      "[Context before]",
      "943: }",
      "945: static void jsiLNGetMatches(const char *str, linenoiseCompletions *lc) {",
      "947:     const char *cp, *fnam = \"Info.completions\";",
      "948:     int i = 0, len;",
      "949:     int rc, isfile = 0, start = 0, end = Jsi_Strlen(str);",
      "",
      "[Removed Lines]",
      "946:     char buf[1000], pre[1000], hpre[6] = {};",
      "",
      "[Added Lines]",
      "946:     char buf[JSI_BUFSIZ], pre[JSI_BUFSIZ], hpre[6] = {};",
      "",
      "---------------"
    ],
    "src/jsiValue.c||src/jsiValue.c": [
      "File: src/jsiValue.c -> src/jsiValue.c",
      "--- Hunk 1 ---",
      "[Context before]",
      "401:     assert(args->vt == JSI_VT_OBJECT);",
      "402:     if (obj->isarrlist && obj->arr)",
      "403:         return ((index < 0 || (uint)index >= obj->arrCnt) ? NULL : obj->arr[index]);",
      "405:     Jsi_NumberItoA10(index, unibuf, sizeof(unibuf));",
      "406:     v = Jsi_TreeObjGetValue(args->d.obj, unibuf, 0);",
      "407:     return v;",
      "",
      "[Removed Lines]",
      "404:     char unibuf[100];",
      "",
      "[Added Lines]",
      "404:     char unibuf[JSI_MAX_NUMBER_STRING];",
      "",
      "---------------",
      "--- Hunk 2 ---",
      "[Context before]",
      "531:     if (!v)",
      "532:         goto done;",
      "533:     if (lenPtr) *lenPtr = 0;",
      "535:     switch(v->vt) {",
      "536:         case JSI_VT_STRING:",
      "537:             ntxt = v->d.s.str;",
      "",
      "[Removed Lines]",
      "534:     char unibuf[200];",
      "",
      "[Added Lines]",
      "534:     char unibuf[JSI_MAX_NUMBER_STRING*2];",
      "",
      "---------------",
      "--- Hunk 3 ---",
      "[Context before]",
      "1182:             if (Jsi_ValueIsString(interp, key)) {",
      "1183:                 char *kstr = Jsi_ValueString(interp, key, NULL);",
      "1184:                 if (!Jsi_Strcmp(kstr,\"call\") || !Jsi_Strcmp(kstr,\"apply\") || !Jsi_Strcmp(kstr,\"bind\")) {",
      "1186:                     snprintf(fbuf, sizeof(fbuf), \"Function.%s\", kstr);",
      "1187:                     Jsi_Value *vv = Jsi_NameLookup(interp, fbuf);",
      "1188:                     if (vv)",
      "",
      "[Removed Lines]",
      "1185:                     char fbuf[100];",
      "",
      "[Added Lines]",
      "1185:                     char fbuf[JSI_MAX_NUMBER_STRING];",
      "",
      "---------------",
      "--- Hunk 4 ---",
      "[Context before]",
      "1379:         }",
      "1380:         return JSI_ERROR;",
      "1381:     }",
      "1383:     Jsi_NumberItoA10(key, unibuf, sizeof(unibuf));",
      "1384:     Jsi_ObjInsert(interp, obj, unibuf, val, flags);",
      "1385:     return JSI_OK;",
      "",
      "[Removed Lines]",
      "1382:     char unibuf[100];",
      "",
      "[Added Lines]",
      "1382:     char unibuf[JSI_MAX_NUMBER_STRING];",
      "",
      "---------------"
    ],
    "src/jsiWebSocket.c||src/jsiWebSocket.c": [
      "File: src/jsiWebSocket.c -> src/jsiWebSocket.c",
      "--- Hunk 1 ---",
      "[Context before]",
      "208:     Jsi_DString recvBuf; // To buffer recv when recvJSON is true.",
      "209:     Jsi_Value *onClose, *onFilter, *onRecv, *onUpload, *onGet, *onUnknown, *rootdir, *headers;",
      "210:     char *lastData;",
      "212: #if (LWS_LIBRARY_VERSION_MAJOR>1)",
      "213:     char filename[PATH_MAX];",
      "214:     long file_length;",
      "",
      "[Removed Lines]",
      "211:     char key[100]; // Lookup key.",
      "",
      "[Added Lines]",
      "211:     char key[JSI_MAX_NUMBER_STRING]; // Lookup key.",
      "",
      "---------------",
      "--- Hunk 2 ---",
      "[Context before]",
      "569: jsi_wsGetHeaders(jsi_wsPss *pss, struct lws *wsi, Jsi_DString* dStr, int lens[], int hmax)",
      "570: {",
      "571:     int n = 0, i = 0, nlen;",
      "573:     const char *cp;",
      "574:     while ((cp = (char*)lws_token_to_string((enum lws_token_indexes)n))) {",
      "575:         int len = lws_hdr_copy(wsi, buf, sizeof(buf), ( enum lws_token_indexes)n);",
      "",
      "[Removed Lines]",
      "572:     char buf[1000];",
      "",
      "[Added Lines]",
      "572:     char buf[JSI_BUFSIZ];",
      "",
      "---------------",
      "--- Hunk 3 ---",
      "[Context before]",
      "1344:     Jsi_DSFree(&sStr);",
      "1345:     if (cmdPtr->debug>1)",
      "1346:         fprintf(stderr, \"FILE: %s in %s | %s\\n\", buf, cmdPtr->curRoot, Jsi_ValueString(interp, cmdPtr->rootdir, NULL));",
      "1348:     isJsiWeb = (cpde && cmdPtr->jsiFnPattern && Jsi_GlobMatch(cmdPtr->jsiFnPattern, cpde+1, 0));",
      "1349:     bool isgzip = 0;",
      "1350:     if (!ext || !ext[1])",
      "",
      "[Removed Lines]",
      "1347:     char extBuf[100], *cpde = Jsi_Strrchr(buf, '/');",
      "",
      "[Added Lines]",
      "1347:     char extBuf[JSI_BUFSIZ], *cpde = Jsi_Strrchr(buf, '/');",
      "",
      "---------------",
      "--- Hunk 4 ---",
      "[Context before]",
      "1836:         if (cmdPtr->post) {",
      "1837:             unsigned char **p = (unsigned char **)in, *end = (*p) + len;",
      "1838:             int n = 0;",
      "1840:             Jsi_ValueString(interp, cmdPtr->post, &n);",
      "1841:             snprintf(buf, sizeof(buf), \"%d\", n);",
      "",
      "[Removed Lines]",
      "1839:             char buf[100];",
      "",
      "[Added Lines]",
      "1839:             char buf[JSI_MAX_NUMBER_STRING];",
      "",
      "---------------",
      "--- Hunk 5 ---",
      "[Context before]",
      "2228:     case LWS_CALLBACK_CLIENT_ESTABLISHED:",
      "2229:     case LWS_CALLBACK_ESTABLISHED:",
      "2230:         if (cmdPtr->bufferPwr2>0) {",
      "2232:             snprintf(nbuf, sizeof(nbuf), \"%d\", cmdPtr->bufferPwr2);",
      "2233:             lws_set_extension_option(wsi, \"permessage-deflate\", \"rx_buf_size\", nbuf);",
      "2234:             lws_set_extension_option(wsi, \"permessage-deflate\", \"tx_buf_size\", nbuf);",
      "",
      "[Removed Lines]",
      "2231:             char nbuf[100];",
      "",
      "[Added Lines]",
      "2231:             char nbuf[JSI_MAX_NUMBER_STRING];",
      "",
      "---------------",
      "--- Hunk 6 ---",
      "[Context before]",
      "2870:     const char *verStr = NULL;",
      "2871:     verStr = lws_get_library_version();",
      "2872:     if (verStr) {",
      "2874:         snprintf(buf, sizeof(buf), \"%s\", verStr);",
      "2875:         cp = Jsi_Strchr(buf, ' ');",
      "2876:         if (cp) *cp = 0;",
      "",
      "[Removed Lines]",
      "2873:         char buf[100], *cp;",
      "",
      "[Added Lines]",
      "2873:         char buf[JSI_MAX_NUMBER_STRING], *cp;",
      "",
      "---------------"
    ]
  },
  "candidates": [
    {
      "candidate_hash": "c24abfa77651e7a5d546d794803e0e3bc450ac62",
      "candidate_info": {
        "commit_hash": "c24abfa77651e7a5d546d794803e0e3bc450ac62",
        "repo": "pcmacdon/jsish",
        "commit_url": "https://github.com/pcmacdon/jsish/commit/c24abfa77651e7a5d546d794803e0e3bc450ac62",
        "files": [
          "Makefile",
          "lib/web/jsi.js",
          "lws/Makefile",
          "src/jsi.h",
          "src/jsiCmds.c",
          "src/jsiSocket.c"
        ],
        "message": "Pre-switch to liblws\n\nFossilOrigin-Name: 4336b90462cf6b333c8c85639c90ee127cba2396db523ab984373ba2a07ad939",
        "before_after_code_files": [
          "lib/web/jsi.js||lib/web/jsi.js",
          "src/jsi.h||src/jsi.h",
          "src/jsiCmds.c||src/jsiCmds.c",
          "src/jsiSocket.c||src/jsiSocket.c"
        ]
      },
      "candidate_patch_features": {
        "candidate_earlier_than_patch": 0,
        "same_branch_evolution": 1,
        "olp_code_files": {
          "patch": [
            "src/jsi.h||src/jsi.h",
            "src/jsiCmds.c||src/jsiCmds.c"
          ],
          "candidate": [
            "src/jsi.h||src/jsi.h",
            "src/jsiCmds.c||src/jsiCmds.c"
          ]
        }
      },
      "candidate_diff": {
        "lib/web/jsi.js||lib/web/jsi.js": [
          "File: lib/web/jsi.js -> lib/web/jsi.js",
          "--- Hunk 1 ---",
          "[Context before]",
          "689:             if (pat === match)",
          "690:                 return;",
          "691:             if (!partial)",
          "693:             var ss = match.substr(1,match.length-2).split(','), sl = {};",
          "694:             for (i=0; i<ss.length; i++) {",
          "695:                 var st = ss[i].split(':');",
          "",
          "[Removed Lines]",
          "692:                 throw('matchOjb failed: expected \"'+match+'\" not \"'+pat+'\"');",
          "",
          "[Added Lines]",
          "692:                 throw('matchOjb failed: expected \"'+match+'\", not \"'+pat+'\"');",
          "",
          "---------------",
          "--- Hunk 2 ---",
          "[Context before]",
          "697:             }",
          "698:             for (i in msg) {",
          "699:                 if (sl[i] && gettype(msg[i]) === sl[i]) continue;",
          "701:             }",
          "702:         }",
          "",
          "[Removed Lines]",
          "700:                 throw('matchOjb failed: expected \"'+match+'\" not \"'+pat+'\"');",
          "",
          "[Added Lines]",
          "700:                 throw('matchOjb failed: expected \"'+match+'\", not \"'+pat+'\"');",
          "",
          "---------------"
        ],
        "src/jsi.h||src/jsi.h": [
          "File: src/jsi.h -> src/jsi.h",
          "--- Hunk 1 ---",
          "[Context before]",
          "5: #define JSI_VERSION_MAJOR   3",
          "6: #define JSI_VERSION_MINOR   0",
          "9: #define JSI_VERSION (JSI_VERSION_MAJOR + ((Jsi_Number)JSI_VERSION_MINOR/100.0) + ((Jsi_Number)JSI_VERSION_RELEASE/10000.0))",
          "",
          "[Removed Lines]",
          "7: #define JSI_VERSION_RELEASE 22",
          "",
          "[Added Lines]",
          "7: #define JSI_VERSION_RELEASE 23",
          "",
          "---------------"
        ],
        "src/jsiCmds.c||src/jsiCmds.c": [
          "File: src/jsiCmds.c -> src/jsiCmds.c",
          "--- Hunk 1 ---",
          "[Context before]",
          "3931: mismatch:",
          "3932:         ok = 0;",
          "3933:         if (interp->asserts && !noerror)",
          "3935:         else",
          "3937:     }",
          "3938: done:",
          "3939:     Jsi_DSFree(&dStr);",
          "",
          "[Removed Lines]",
          "3934:             rc = Jsi_LogError(\"matchobj failed: expected '%s' got '%s'\", sp, cp);",
          "3936:             Jsi_LogWarn(\"matchobj failed: expected '%s' got '%s'\", sp, cp);",
          "",
          "[Added Lines]",
          "3934:             rc = Jsi_LogError(\"matchobj failed: expected '%s', not '%s'\", sp, cp);",
          "3936:             Jsi_LogWarn(\"matchobj failed: expected '%s', not '%s'\", sp, cp);",
          "",
          "---------------"
        ],
        "src/jsiSocket.c||src/jsiSocket.c": [
          "File: src/jsiSocket.c -> src/jsiSocket.c",
          "--- Hunk 1 ---",
          "[Context before]",
          "17: #include <string.h>",
          "18: #include <sys/types.h>",
          "19: #include <assert.h>",
          "21: #ifdef WIN32",
          "22: #define _GET_TIME_OF_DAY_H",
          "",
          "[Removed Lines]",
          "[None]",
          "",
          "[Added Lines]",
          "20: #include <fcntl.h>",
          "",
          "---------------",
          "--- Hunk 2 ---",
          "[Context before]",
          "1103:         Jsi_LogError(\"sock create failed\");",
          "1104:         goto bail;",
          "1105:     }",
          "1106:     on = 1;",
          "1107:     if (cmdPtr->reuse && setsockopt(fd, SOL_SOCKET, SO_REUSEADDR, &on, sizeof(on) )) {",
          "1108:         Jsi_LogError(\"sock reuse failed\");",
          "",
          "[Removed Lines]",
          "[None]",
          "",
          "[Added Lines]",
          "1108:     fcntl(fd, F_SETFD, FD_CLOEXEC);",
          "",
          "---------------"
        ]
      }
    },
    {
      "candidate_hash": "3db8e8818f383af885d77528d961f7187269bd7e",
      "candidate_info": {
        "commit_hash": "3db8e8818f383af885d77528d961f7187269bd7e",
        "repo": "pcmacdon/jsish",
        "commit_url": "https://github.com/pcmacdon/jsish/commit/3db8e8818f383af885d77528d961f7187269bd7e",
        "files": [
          "lib/Archive.jsi",
          "lib/Cdata.jsi",
          "lib/Debug.jsi",
          "lib/Help.jsi",
          "lib/Jsi_Vfs.jsi",
          "lib/Safe.jsi",
          "lib/UnitTest.jsi",
          "lib/Websrv.jsi",
          "lib/Wget.jsi",
          "lib/Zip.jsi",
          "md/Reference.md",
          "src/jsi.h",
          "src/jsiCmds.c",
          "src/jsiEval.c",
          "src/jsiInt.h",
          "src/jsiInterp.c",
          "src/jsiProto.c",
          "src/jsiUtils.c",
          "tools/protos.jsi",
          "www/reference.wiki"
        ],
        "message": "Release \"3.0.43\": moduleOpts freeze is not default.  Fix dup error msgs.\n\nFossilOrigin-Name: 0f3f68f4f87d0945211e01fefa8cd709701d40313dedf664a4a7881a8205fccb",
        "before_after_code_files": [
          "lib/Archive.jsi||lib/Archive.jsi",
          "lib/Cdata.jsi||lib/Cdata.jsi",
          "lib/Debug.jsi||lib/Debug.jsi",
          "lib/Help.jsi||lib/Help.jsi",
          "lib/Jsi_Vfs.jsi||lib/Jsi_Vfs.jsi",
          "lib/Safe.jsi||lib/Safe.jsi",
          "lib/UnitTest.jsi||lib/UnitTest.jsi",
          "lib/Websrv.jsi||lib/Websrv.jsi",
          "lib/Wget.jsi||lib/Wget.jsi",
          "lib/Zip.jsi||lib/Zip.jsi",
          "src/jsi.h||src/jsi.h",
          "src/jsiCmds.c||src/jsiCmds.c",
          "src/jsiEval.c||src/jsiEval.c",
          "src/jsiInt.h||src/jsiInt.h",
          "src/jsiInterp.c||src/jsiInterp.c",
          "src/jsiProto.c||src/jsiProto.c",
          "src/jsiUtils.c||src/jsiUtils.c",
          "tools/protos.jsi||tools/protos.jsi",
          "www/reference.wiki||www/reference.wiki"
        ]
      },
      "candidate_patch_features": {
        "candidate_earlier_than_patch": 0,
        "same_branch_evolution": 1,
        "olp_code_files": {
          "patch": [
            "src/jsi.h||src/jsi.h",
            "src/jsiCmds.c||src/jsiCmds.c",
            "src/jsiEval.c||src/jsiEval.c",
            "src/jsiInterp.c||src/jsiInterp.c",
            "src/jsiUtils.c||src/jsiUtils.c"
          ],
          "candidate": [
            "src/jsi.h||src/jsi.h",
            "src/jsiCmds.c||src/jsiCmds.c",
            "src/jsiEval.c||src/jsiEval.c",
            "src/jsiInterp.c||src/jsiInterp.c",
            "src/jsiUtils.c||src/jsiUtils.c"
          ]
        }
      },
      "candidate_diff": {
        "lib/Archive.jsi||lib/Archive.jsi": [
          "File: lib/Archive.jsi -> lib/Archive.jsi",
          "--- Hunk 1 ---",
          "[Context before]",
          "102:     return main();",
          "103: }",
          "106: moduleRun(Archive);",
          "",
          "[Removed Lines]",
          "105: provide(Archive, 1,  {freeze:true, logmask:'debug,trace'});",
          "",
          "[Added Lines]",
          "105: provide(Archive, 1,  {logmask:'debug,trace'});",
          "",
          "---------------"
        ],
        "lib/Cdata.jsi||lib/Cdata.jsi": [
          "File: lib/Cdata.jsi -> lib/Cdata.jsi",
          "--- Hunk 1 ---",
          "[Context before]",
          "1710:     return retval;",
          "1711: }",
          "1714: moduleRun(Cdata);",
          "",
          "[Removed Lines]",
          "1713: provide(Cdata, \"2\", {freeze:true, logmask:'debug,trace'});",
          "",
          "[Added Lines]",
          "1713: provide(Cdata, \"2\", {logmask:'debug,trace'});",
          "",
          "---------------"
        ],
        "lib/Debug.jsi||lib/Debug.jsi": [
          "File: lib/Debug.jsi -> lib/Debug.jsi",
          "--- Hunk 1 ---",
          "[Context before]",
          "494:     return main();",
          "495: }",
          "499: if (isMain())",
          "500:     exit( moduleRun(Debug) );",
          "",
          "[Removed Lines]",
          "497: provide(Debug, 1.0, {freeze:true, logmask:'debug,trace'});",
          "",
          "[Added Lines]",
          "497: provide(Debug, 1.0, {logmask:'debug,trace'});",
          "",
          "---------------"
        ],
        "lib/Help.jsi||lib/Help.jsi": [
          "File: lib/Help.jsi -> lib/Help.jsi",
          "--- Hunk 1 ---",
          "[Context before]",
          "371:     return main();",
          "372: }",
          "375: moduleRun(Help);",
          "",
          "[Removed Lines]",
          "374: provide(Help, 1, {freeze:true, logmask:'trace'});",
          "",
          "[Added Lines]",
          "374: provide(Help, 1, {logmask:'trace'});",
          "",
          "---------------"
        ],
        "lib/Jsi_Vfs.jsi||lib/Jsi_Vfs.jsi": [
          "File: lib/Jsi_Vfs.jsi -> lib/Jsi_Vfs.jsi",
          "--- Hunk 1 ---",
          "[Context before]",
          "12:     var self = {",
          "13:         exec:System.exec,",
          "15:     };",
          "17:     moduleOpts(self, options);",
          "",
          "[Removed Lines]",
          "14:         Trace       :false,",
          "",
          "[Added Lines]",
          "14:         uuid:null,",
          "15:         parent:null,",
          "",
          "---------------",
          "--- Hunk 2 ---",
          "[Context before]",
          "62:                 version :''",
          "63:             };",
          "66:             if (self.version === '')",
          "67:                 self.version = mnt.version;",
          "",
          "[Removed Lines]",
          "65:             moduleOpts(info, moptions, mnt.param);",
          "",
          "[Added Lines]",
          "66:             parseOpts(info, moptions, mnt.param);",
          "67:             Object.freeze(info, false);",
          "",
          "---------------",
          "--- Hunk 3 ---",
          "[Context before]",
          "236:     Vfs.type('sqlar',  {callback:Sqlar});",
          "237: }",
          "241: if (isMain())",
          "242:     moduleRun(Jsi_Vfs);",
          "",
          "[Removed Lines]",
          "239: provide(Jsi_Vfs, 1);",
          "",
          "[Added Lines]",
          "241: provide(Jsi_Vfs, 1, {logmask:'trace'});",
          "",
          "---------------"
        ],
        "lib/Safe.jsi||lib/Safe.jsi": [
          "File: lib/Safe.jsi -> lib/Safe.jsi",
          "--- Hunk 1 ---",
          "[Context before]",
          "129:     return main();",
          "130: }",
          "133: moduleRun(Safe);",
          "",
          "[Removed Lines]",
          "132: provide(Safe, 1, {freeze:true, logmask:'trace'});",
          "",
          "[Added Lines]",
          "132: provide(Safe, 1, {logmask:'trace'});",
          "",
          "---------------"
        ],
        "lib/UnitTest.jsi||lib/UnitTest.jsi": [
          "File: lib/UnitTest.jsi -> lib/UnitTest.jsi",
          "--- Hunk 1 ---",
          "[Context before]",
          "288:     return main();",
          "289: }",
          "293: if (Info.isMain())",
          "294:     exit(moduleRun(UnitTest));",
          "",
          "[Removed Lines]",
          "291: provide(UnitTest, 1, {freeze:true, logmask:'trace'});",
          "",
          "[Added Lines]",
          "291: provide(UnitTest, 1, {logmask:'trace'});",
          "",
          "---------------"
        ],
        "lib/Websrv.jsi||lib/Websrv.jsi": [
          "File: lib/Websrv.jsi -> lib/Websrv.jsi",
          "--- Hunk 1 ---",
          "[Context before]",
          "528: }",
          "531: moduleRun(Websrv);",
          "",
          "[Removed Lines]",
          "530: provide(Websrv, '1.2.3', {freeze:true, logmask:'debug,trace'});",
          "",
          "[Added Lines]",
          "530: provide(Websrv, '1.2.3', {nofreeze:false, logmask:'debug,trace'});",
          "",
          "---------------"
        ],
        "lib/Wget.jsi||lib/Wget.jsi": [
          "File: lib/Wget.jsi -> lib/Wget.jsi",
          "--- Hunk 1 ---",
          "[Context before]",
          "144:     return main();",
          "145: }",
          "149: moduleRun(Wget);",
          "",
          "[Removed Lines]",
          "147: provide(Wget, \"1.2\", {freeze:true, logmask:'trace'});",
          "",
          "[Added Lines]",
          "147: provide(Wget, \"1.2\", {logmask:'trace'});",
          "",
          "---------------"
        ],
        "lib/Zip.jsi||lib/Zip.jsi": [
          "File: lib/Zip.jsi -> lib/Zip.jsi",
          "--- Hunk 1 ---",
          "[Context before]",
          "158:     throw(emsg);",
          "159: }",
          "162: runModule(Zip);",
          "",
          "[Removed Lines]",
          "161: provide(Zip, 1, {freeze:true});",
          "",
          "[Added Lines]",
          "161: provide(Zip, 1);",
          "",
          "---------------"
        ],
        "src/jsi.h||src/jsi.h": [
          "File: src/jsi.h -> src/jsi.h",
          "--- Hunk 1 ---",
          "[Context before]",
          "5: #define JSI_VERSION_MAJOR   3",
          "6: #define JSI_VERSION_MINOR   0",
          "9: #define JSI_VERSION (JSI_VERSION_MAJOR + ((Jsi_Number)JSI_VERSION_MINOR/100.0) + ((Jsi_Number)JSI_VERSION_RELEASE/10000.0))",
          "",
          "[Removed Lines]",
          "7: #define JSI_VERSION_RELEASE 42",
          "",
          "[Added Lines]",
          "7: #define JSI_VERSION_RELEASE 43",
          "",
          "---------------",
          "--- Hunk 2 ---",
          "[Context before]",
          "398:     int traceCall;",
          "399:     bool coverage;",
          "400:     bool profile;",
          "402:     Jsi_Value *udata;",
          "403: } Jsi_ModuleConf;",
          "",
          "[Removed Lines]",
          "401:     bool freeze;",
          "",
          "[Added Lines]",
          "401:     bool nofreeze;",
          "",
          "---------------"
        ],
        "src/jsiCmds.c||src/jsiCmds.c": [
          "File: src/jsiCmds.c -> src/jsiCmds.c",
          "--- Hunk 1 ---",
          "[Context before]",
          "855:     JSI_OPT(CUSTOM,Jsi_ModuleConf, log,     .help=\"Logging flags\", .flags=JSI_OPT_CUST_NOCASE,  .custom=Jsi_Opt_SwitchBitset,  .data=jsi_LogCodes),",
          "856:     JSI_OPT(CUSTOM,Jsi_ModuleConf, logmask, .help=\"Logging mask flags\", .flags=JSI_OPT_CUST_NOCASE,  .custom=Jsi_Opt_SwitchBitset,  .data=jsi_LogCodes),",
          "857:     JSI_OPT(BOOL,  Jsi_ModuleConf, coverage,.help=\"On exit generate detailed code coverage for function calls (with profile)\" ),",
          "859:     JSI_OPT(OBJ,   Jsi_ModuleConf, info,    .help=\"Info provided by module\", .flags=JSI_OPT_INIT_ONLY ),",
          "860:     JSI_OPT(BOOL,  Jsi_ModuleConf, profile, .help=\"On exit generate profile of function calls\" ),",
          "861:     JSI_OPT(CUSTOM,Jsi_ModuleConf, traceCall,.help=\"Trace commands\", .flags=0,  .custom=Jsi_Opt_SwitchBitset,  .data=jsi_callTraceStrs),",
          "",
          "[Removed Lines]",
          "858:     JSI_OPT(BOOL,  Jsi_ModuleConf, freeze,  .help=\"Freeze self object: first arg to moduleOpts\" ),",
          "",
          "[Added Lines]",
          "858:     JSI_OPT(BOOL,  Jsi_ModuleConf, nofreeze,.help=\"Disable moduleOpts freeze of first arg (self)\" ),",
          "",
          "---------------",
          "--- Hunk 2 ---",
          "[Context before]",
          "1086:             return JSI_ERROR;",
          "1087:         if (rc == JSI_OK) {",
          "1088:             Jsi_PkgOpts po = {};",
          "1090:             v = Jsi_ValueArrayIndex(interp, args, 2);",
          "1091:             if (v && Jsi_OptionsProcess(interp, jsiModuleOptions, &po.conf, v, 0) < 0)",
          "1092:                 rc = JSI_ERROR;",
          "",
          "[Removed Lines]",
          "1089:             po.conf.freeze = interp->subOpts.freeze;",
          "",
          "[Added Lines]",
          "1089:             po.conf.nofreeze = interp->subOpts.nofreeze;",
          "",
          "---------------",
          "--- Hunk 3 ---",
          "[Context before]",
          "4609:     return \"\";",
          "4610: }",
          "4614: {",
          "4616:     Jsi_TreeEntry *tPtr, *tPtr2;",
          "4617:     Jsi_TreeSearch search = {};",
          "4618:     Jsi_RC rc = JSI_OK;",
          "",
          "[Removed Lines]",
          "4612: static Jsi_RC SysModuleOptsCmd(Jsi_Interp *interp, Jsi_Value *args, Jsi_Value *_this,",
          "4613:     Jsi_Value **ret, Jsi_Func *funcPtr)",
          "4615:     bool freeze = interp->subOpts.freeze;",
          "",
          "[Added Lines]",
          "4612: static Jsi_RC SysModuleOptsCmdEx(Jsi_Interp *interp, Jsi_Value *args, Jsi_Value *_this,",
          "4613:     Jsi_Value **ret, Jsi_Func *funcPtr, bool parse)",
          "4615:     bool nofreeze = interp->subOpts.nofreeze;",
          "",
          "---------------",
          "--- Hunk 4 ---",
          "[Context before]",
          "4641:     }",
          "4642:     if (v2)",
          "4643:         Jsi_TreeSearchDone(&search);",
          "4645:         if (Jsi_ValueIsObjType(interp, v3, JSI_OT_ARRAY))",
          "4646:             v3 = Jsi_ValueArrayIndex(interp, v3, 1);",
          "4647:         else {",
          "",
          "[Removed Lines]",
          "4644:     if (!v3 && pf && pf->funcName && !Jsi_Strcmp(pf->funcName, \"moduleRun\") && ((v3=pf->arguments))) {",
          "",
          "[Added Lines]",
          "4644:     if (!parse && !v3 && pf && pf->funcName && !Jsi_Strcmp(pf->funcName, \"moduleRun\") && ((v3=pf->arguments))) {",
          "",
          "---------------",
          "--- Hunk 5 ---",
          "[Context before]",
          "4667:                 break;",
          "4668:             }",
          "4671:                 int isLong = 1;//Jsi_ValueIsTrue(interp, val);",
          "4672:                 const char *help = \"\", *es = NULL, *fstr = NULL, *fname = fp->ip->filePtr->fileName;",
          "4673:                 Jsi_TreeSearchDone(&search);",
          "",
          "[Removed Lines]",
          "4670:             if (cnt == 1 && !Jsi_Strcmp(key, \"help\") && v3->d.obj->tree->numEntries==1) {",
          "",
          "[Added Lines]",
          "4670:             if (!parse && cnt == 1 && !Jsi_Strcmp(key, \"help\") && v3->d.obj->tree->numEntries==1) {",
          "",
          "---------------",
          "--- Hunk 6 ---",
          "[Context before]",
          "4721:                 break;",
          "4722:             }",
          "4723:             Jsi_vtype oTyp, vTyp = jsi_getValType(val);",
          "4725:                 oTyp = JSI_VT_BOOL; // Accept these as builtin options.",
          "4726:                 oVal = NULL;",
          "4727:             } else if (!v2) {",
          "",
          "[Removed Lines]",
          "4724:             if (!Jsi_Strcmp(key, \"Debug\") || !Jsi_Strcmp(key, \"Test\") || !Jsi_Strcmp(key, \"Trace\")  || !Jsi_Strcmp(key, \"Assert\")) {",
          "",
          "[Added Lines]",
          "4724:             if (!parse && (!Jsi_Strcmp(key, \"Debug\") || !Jsi_Strcmp(key, \"Test\") || !Jsi_Strcmp(key, \"Trace\")  || !Jsi_Strcmp(key, \"Assert\"))) {",
          "",
          "---------------",
          "--- Hunk 7 ---",
          "[Context before]",
          "4760:         Jsi_TreeSearchDone(&search);",
          "4761:     }",
          "4765:         Jsi_Func *pf = interp->prevActiveFunc;",
          "4766:         Jsi_ModuleConf *mo = NULL;",
          "",
          "[Removed Lines]",
          "4763:     if (rc == JSI_OK && fp->filePtr && evfunc) {",
          "",
          "[Added Lines]",
          "4763:     if (!parse && rc == JSI_OK && fp->filePtr && evfunc) {",
          "",
          "---------------",
          "--- Hunk 8 ---",
          "[Context before]",
          "4768:             mo = &pf->pkg->popts.conf;",
          "4769:             pf->pkg->logmask = mo->logmask;",
          "4770:             pf->pkg->log = mo->log;",
          "4772:         }",
          "4773:         uint i;",
          "4774:         for (i=JSI_LOG_ASSERT; mo && i<=JSI_LOG_TEST; i++) {",
          "",
          "[Removed Lines]",
          "4771:             freeze = mo->freeze;",
          "",
          "[Added Lines]",
          "4771:             nofreeze = mo->nofreeze;",
          "",
          "---------------",
          "--- Hunk 9 ---",
          "[Context before]",
          "4785:             }",
          "4786:         }",
          "4787:     }",
          "4789:         Jsi_Obj *obj = v1->d.obj;",
          "4790:         obj->freeze = 1;",
          "4791:         obj->freezeModifyOk = 1;",
          "4793:     }",
          "4794:     return rc;",
          "4795: }",
          "4797: static Jsi_CmdSpec consoleCmds[] = {",
          "4798:     { \"assert\", jsi_AssertCmd,      1,  3, \"expr:boolean|number|function, msg:string=void, options:object=void\",  .help=\"Same as System.assert()\", .retType=(uint)JSI_TT_VOID, .flags=0, .info=0, .opts=AssertOptions},",
          "4799:     { \"error\",  consoleErrorCmd,    1, -1, \"val, ...\", .help=\"Same as log but adding prefix ERROR:\", .retType=(uint)JSI_TT_VOID, .flags=0 },",
          "",
          "[Removed Lines]",
          "4788:     if (rc == JSI_OK && freeze) {",
          "4792:         obj->freezeReadBad = 1;",
          "",
          "[Added Lines]",
          "4788:     if (rc == JSI_OK && !nofreeze) {",
          "4792:         obj->freezeReadCheck = 1;",
          "4797: static Jsi_RC SysParseOptsCmd(Jsi_Interp *interp, Jsi_Value *args, Jsi_Value *_this,",
          "4798:     Jsi_Value **ret, Jsi_Func *funcPtr)",
          "4799: {",
          "4800:     return SysModuleOptsCmdEx(interp, args, _this, ret, funcPtr, 1);",
          "4801: }",
          "4802: static Jsi_RC SysModuleOptsCmd(Jsi_Interp *interp, Jsi_Value *args, Jsi_Value *_this,",
          "4803:     Jsi_Value **ret, Jsi_Func *funcPtr)",
          "4804: {",
          "4805:     return SysModuleOptsCmdEx(interp, args, _this, ret, funcPtr, 0);",
          "4806: }",
          "",
          "---------------",
          "--- Hunk 10 ---",
          "[Context before]",
          "4952:     { \"noOp\",       jsi_NoOpCmd,     0, -1, \"\", .help=\"A No-Op. A zero overhead command call that is useful for debugging\" },",
          "4953:     { \"parseInt\",   parseIntCmd,     1,  2, \"val:any, base:number=10\", .help=\"Convert string to an integer\", .retType=(uint)JSI_TT_NUMBER },",
          "4954:     { \"parseFloat\", parseFloatCmd,   1,  1, \"val\", .help=\"Convert string to a double\", .retType=(uint)JSI_TT_NUMBER },",
          "4956:     { \"printf\",     SysPrintfCmd,    1, -1, \"format:string, ...\", .help=\"Formatted output to stdout\", .retType=(uint)JSI_TT_VOID, .flags=0 },",
          "4957:     { \"provide\",    SysProvideCmd,   0,  3, \"name:string|null|function=void, version:number|string=void, options:object|function=void\", .help=\"Provide a package for use with require.\", .retType=(uint)JSI_TT_VOID, .flags=0, .info=FN_provide, .opts=jsiModuleOptions  },",
          "4958:     { \"puts\",       SysPutsCmd,      1, -1, \"val, ...\", .help=\"Output one or more values to stdout\", .retType=(uint)JSI_TT_VOID, .flags=0, .info=FN_puts },",
          "",
          "[Removed Lines]",
          "4955:     { \"parseOpts\",  SysModuleOptsCmd,2,  3, \"self:object|userobj, options:object, conf:object|null|undefined=void\", .help=\"Parse module options: same as moduleOpts\", .retType=(uint)JSI_TT_OBJECT, .flags=0},",
          "",
          "[Added Lines]",
          "4966:     { \"parseOpts\",  SysParseOptsCmd, 2,  3, \"self:object|userobj, options:object, conf:object|null|undefined=void\", .help=\"Parse module options: similar to moduleOpts but for non-modules\", .retType=(uint)JSI_TT_OBJECT, .flags=0},",
          "",
          "---------------"
        ],
        "src/jsiEval.c||src/jsiEval.c": [
          "File: src/jsiEval.c -> src/jsiEval.c",
          "--- Hunk 1 ---",
          "[Context before]",
          "348: }",
          "353:      jsi_ScopeChain **scope, Jsi_Value **currentScope, int *context_id, Jsi_Value *top, const char *nam) {",
          "354:     if (Jsi_InterpGone(interp))",
          "355:         return JSI_ERROR;",
          "",
          "[Removed Lines]",
          "350: #define JSI_DO_THROW(nam) if ((rc=jsiDoThrow(interp, ps, &ip, &trylist,&scope, &currentScope, &context_id, (interp->framePtr->Sp?_jsi_TOP:NULL), nam)) != JSI_OK) break;",
          "352: static int jsiDoThrow(Jsi_Interp *interp, jsi_Pstate *ps, jsi_OpCode **ipp, jsi_TryList **tlp,",
          "",
          "[Added Lines]",
          "350: static Jsi_RC jsiDoThrow(Jsi_Interp *interp, jsi_Pstate *ps, jsi_OpCode **ipp, jsi_TryList **tlp,",
          "",
          "---------------",
          "--- Hunk 2 ---",
          "[Context before]",
          "361:                 if (!Jsi_Strcmp(nam, \"help\"))",
          "362:                     Jsi_LogError(\"...%s\", str);",
          "363:                 else",
          "365:             }",
          "366:             return JSI_ERROR;",
          "367:         }",
          "",
          "[Removed Lines]",
          "364:                     Jsi_LogError(\"%s: %s\", nam, str);",
          "",
          "[Added Lines]",
          "362:                     Jsi_LogError(\"%s near %s\", nam, str);",
          "",
          "---------------",
          "--- Hunk 3 ---",
          "[Context before]",
          "949:         arrayindex = (int)idx->d.num;",
          "950:     }",
          "953:         Jsi_Value *v;",
          "954:         char keyBuf[100], *keyStr = keyBuf;",
          "955:         if (arrayindex>=0)",
          "",
          "[Removed Lines]",
          "952:     if (src->vt == JSI_VT_OBJECT && src->d.obj->ot == JSI_OT_OBJECT && src->d.obj->freeze && src->d.obj->freezeReadBad) {",
          "",
          "[Added Lines]",
          "950:     if (src->vt == JSI_VT_OBJECT && src->d.obj->ot == JSI_OT_OBJECT && src->d.obj->freeze && src->d.obj->freezeReadCheck) {",
          "",
          "---------------",
          "--- Hunk 4 ---",
          "[Context before]",
          "1059:     jsi_TryList  *trylist = NULL;",
          "1060:     jsi_Frame *fp = interp->framePtr;",
          "1061:     bool strict = interp->typeCheck.strict;",
          "1064:     if (currentScope->vt != JSI_VT_OBJECT) {",
          "1065:         Jsi_LogBug(\"Eval: current scope is not a object\");",
          "",
          "[Removed Lines]",
          "1062:     const char *curFile = NULL;",
          "",
          "[Added Lines]",
          "1060:     const char *curFile = NULL, *throwStr;",
          "",
          "---------------",
          "--- Hunk 5 ---",
          "[Context before]",
          "1158:             if ((rc = (*interp->debugOpts.hook)(interp, curFile, curLine, fp->level, interp->curFunction, jsi_opcode_string(ip->op), ip, NULL)) != JSI_OK)",
          "1159:                 break;",
          "1160:         }",
          "1162:         switch(ip->op) {",
          "1163:             case OP_NOP:",
          "1164:             case OP_LASTOP:",
          "",
          "[Removed Lines]",
          "[None]",
          "",
          "[Added Lines]",
          "1159:         throwStr = \"error\";",
          "",
          "---------------",
          "--- Hunk 6 ---",
          "[Context before]",
          "1219:                     case JSI_BREAK:",
          "1220:                         if (fp->tryDepth<=0)",
          "1221:                             interp->isHelp = 1;",
          "1223:                         break;",
          "1224:                     default:",
          "1226:                 }",
          "1227:                 strict = interp->typeCheck.strict;",
          "",
          "[Removed Lines]",
          "1222:                         JSI_DO_THROW(\"help\");",
          "1225:                         JSI_DO_THROW(\"fcall\");",
          "",
          "[Added Lines]",
          "1220:                         rc = JSI_ERROR;",
          "1221:                         throwStr = \"help\";",
          "1224:                         throwStr = \"fcall\";",
          "1225:                         rc = JSI_ERROR;",
          "",
          "---------------",
          "--- Hunk 7 ---",
          "[Context before]",
          "1752:                 jsiPush(interp,1);",
          "1754:                 if (r) {",
          "1756:                 }",
          "1757:                 break;",
          "1758:             }",
          "",
          "[Removed Lines]",
          "1755:                     JSI_DO_THROW(\"eval\");",
          "",
          "[Added Lines]",
          "1755:                     rc = JSI_ERROR;",
          "1756:                     throwStr = \"eval\";",
          "",
          "---------------",
          "--- Hunk 8 ---",
          "[Context before]",
          "1853:                     Jsi_LogBug(\"Unexpected SCATCH opcode??\");",
          "1855:                 if (!ip->data) {",
          "1857:                 } else {",
          "1858:                     trylist->inCatch=1;",
          "",
          "[Removed Lines]",
          "1856:                     JSI_DO_THROW(\"catch\");",
          "",
          "[Added Lines]",
          "1857:                     throwStr = \"catch\";",
          "1858:                     rc = JSI_ERROR;",
          "",
          "---------------",
          "--- Hunk 9 ---",
          "[Context before]",
          "1907:                 pop_try(trylist);",
          "1909:                 if (last_op == jsi_LOP_THROW) {",
          "1911:                 } else if (last_op == jsi_LOP_JMP) {",
          "1912:                     while (1) {",
          "1913:                         if (trylist == NULL) {",
          "",
          "[Removed Lines]",
          "1910:                     JSI_DO_THROW(\"finally\");",
          "",
          "[Added Lines]",
          "1912:                     throwStr = \"finally\";",
          "1913:                     rc = JSI_ERROR;",
          "",
          "---------------",
          "--- Hunk 10 ---",
          "[Context before]",
          "1946:                 jsiVarDeref(interp,1);",
          "1947:                 Jsi_ValueDup2(interp,&ps->last_exception, _jsi_TOP);",
          "1950:                 break;",
          "1951:             }",
          "1952:             case OP_WITH: {",
          "",
          "[Removed Lines]",
          "1949:                 JSI_DO_THROW(\"throw\");",
          "",
          "[Added Lines]",
          "1952:                 throwStr = \"throw\";",
          "1953:                 rc = JSI_ERROR;",
          "",
          "---------------",
          "--- Hunk 11 ---",
          "[Context before]",
          "2007:             }",
          "2008: #ifndef __cplusplus",
          "2009:             default:",
          "2011: #endif",
          "2012:         }",
          "2013:         if (rc == JSI_ERROR) {",
          "2016:         }",
          "2017:         lop = plop;",
          "2018:         ip++;",
          "",
          "[Removed Lines]",
          "2010:                 Jsi_LogBug(\"invalid op ceod: %d\", ip->op);",
          "2014:             JSI_DO_THROW(\"error\");",
          "2015:             rc = JSI_OK;",
          "",
          "[Added Lines]",
          "2014:                 Jsi_LogBug(\"invalid op code: %d\", ip->op);",
          "2018:             rc = jsiDoThrow(interp, ps, &ip, &trylist,&scope, &currentScope, &context_id,",
          "2019:                 (interp->framePtr->Sp?_jsi_TOP:NULL), throwStr);",
          "2020:             if (rc != JSI_OK)",
          "2021:                 break;",
          "",
          "---------------"
        ],
        "src/jsiInt.h||src/jsiInt.h": [
          "File: src/jsiInt.h -> src/jsiInt.h",
          "--- Hunk 1 ---",
          "[Context before]",
          "523:     uint isBlob:1;",
          "524:     uint freeze:1;",
          "525:     uint freezeModifyOk:1;",
          "527:     uint unused2:13;",
          "529:         int val;",
          "",
          "[Removed Lines]",
          "526:     uint freezeReadBad:1;",
          "",
          "[Added Lines]",
          "526:     uint freezeReadCheck:1;",
          "",
          "---------------",
          "--- Hunk 2 ---",
          "[Context before]",
          "1030:     bool outUndef;",
          "1031:     bool logAllowDups;",
          "1032:     bool logColNums;",
          "1034:     bool privKeys;",
          "1035:     bool compat;",
          "1036:     bool mutexUnlock;",
          "",
          "[Removed Lines]",
          "1033:     bool freeze;",
          "",
          "[Added Lines]",
          "1033:     bool nofreeze;",
          "",
          "---------------"
        ],
        "src/jsiInterp.c||src/jsiInterp.c": [
          "File: src/jsiInterp.c -> src/jsiInterp.c",
          "--- Hunk 1 ---",
          "[Context before]",
          "63:     JSI_OPT(BOOL,  jsi_SubOptions, compat,      .help=\"Ignore unknown options via JSI_OPTS_IGNORE_EXTRA in option parser\" ),",
          "64:     JSI_OPT(INT,   jsi_SubOptions, dblPrec,     .help=\"Format precision of double where 0=max, -1=max-1, ... (max-1)\" ),",
          "65:     JSI_OPT(BOOL,  jsi_SubOptions, istty,       .help=\"Indicates interp is in interactive mode\", jsi_IIRO),",
          "67:     JSI_OPT(BOOL,  jsi_SubOptions, logColNums,  .help=\"Display column numbers in error messages\"),",
          "68:     JSI_OPT(BOOL,  jsi_SubOptions, logAllowDups,.help=\"Log should not filter out duplicate messages\"),",
          "69:     JSI_OPT(BOOL,  jsi_SubOptions, mutexUnlock, .help=\"Unlock own mutex when evaling in other interps (true)\", jsi_IIOF),",
          "",
          "[Removed Lines]",
          "66:     JSI_OPT(BOOL,  jsi_SubOptions, freeze,      .help=\"Default freeze self object in: first arg to moduleOpts\" ),",
          "",
          "[Added Lines]",
          "66:     JSI_OPT(BOOL,  jsi_SubOptions, nofreeze,    .help=\"moduleOpts freeze disabled by default\" ),",
          "",
          "---------------"
        ],
        "src/jsiProto.c||src/jsiProto.c": [
          "File: src/jsiProto.c -> src/jsiProto.c",
          "--- Hunk 1 ---",
          "[Context before]",
          "366:     Jsi_Value **ret, Jsi_Func *funcPtr)",
          "367: {",
          "368:     Jsi_Value *val = Jsi_ValueArrayIndex(interp, args, 0),",
          "372:     if (!val || !Jsi_ValueIsObjType(interp, val, JSI_OT_OBJECT))",
          "373:         return Jsi_LogError(\"arg 1: expected object\");",
          "375:         return Jsi_LogError(\"arg 2: expected bool\");",
          "377:         return Jsi_LogError(\"arg 3: expected bool\");",
          "379:     if (bval)",
          "380:         Jsi_GetBoolFromValue(interp, bval, &bnum);",
          "381:     if (rval)",
          "",
          "[Removed Lines]",
          "374:     if (bval && !Jsi_ValueIsBoolean(interp, bval))",
          "376:     if (rval && !Jsi_ValueIsBoolean(interp, rval))",
          "378:     bool bnum = 0, rnum = 0, fnum = 0;",
          "",
          "[Added Lines]",
          "374:     if (fval && !Jsi_ValueIsBoolean(interp, fval))",
          "376:     if (bval && !Jsi_ValueIsBoolean(interp, bval))",
          "378:     if (rval && !Jsi_ValueIsBoolean(interp, rval))",
          "379:         return Jsi_LogError(\"arg 4: expected bool\");",
          "380:     bool bnum = 1, rnum = 1, fnum = 1;",
          "",
          "---------------",
          "--- Hunk 2 ---",
          "[Context before]",
          "383:     if (fval)",
          "384:         Jsi_GetBoolFromValue(interp, fval, &fnum);",
          "385:     Jsi_Obj *obj = val->d.obj;",
          "387:     obj->freezeModifyOk = bnum;",
          "389:     return JSI_OK;",
          "391: }",
          "",
          "[Removed Lines]",
          "386:     obj->freeze = !fnum;",
          "388:     obj->freezeReadBad = rnum;",
          "",
          "[Added Lines]",
          "388:     obj->freeze = fnum;",
          "390:     obj->freezeReadCheck = rnum;",
          "",
          "---------------",
          "--- Hunk 3 ---",
          "[Context before]",
          "700:     { \"hasOwnProperty\", jsi_HasOwnPropertyCmd,  1, 1, \"name:string\", .help=\"Returns a true if object has the specified property\", .retType=(uint)JSI_TT_BOOLEAN },",
          "701:     { \"is\",             ObjectIsCmd, 2, 2, \"value1, value2\", .help=\"Tests if two values are equal\", .retType=(uint)JSI_TT_BOOLEAN },",
          "702:     { \"isPrototypeOf\",  ObjectIsPrototypeOfCmd, 1, 1, \"name\", .help=\"Tests for an object in another object's prototype chain\", .retType=(uint)JSI_TT_BOOLEAN },",
          "704:     { \"keys\",           ObjectKeysCmd,          0, 1, \"obj:object|function=void\", .help=\"Return the keys of an object or array\", .retType=(uint)JSI_TT_ARRAY },",
          "705:     { \"merge\",          ObjectMergeCmd,         1, 1, \"obj:object|function\", .help=\"Return new object containing merged values\", .retType=(uint)JSI_TT_OBJECT },",
          "706:     { \"propertyIsEnumerable\", ObjectPropertyIsEnumerableCmd,1, 1, \"name\", .help=\"Determine if a property is enumerable\", .retType=(uint)JSI_TT_BOOLEAN },",
          "",
          "[Removed Lines]",
          "703:     { \"freeze\",         ObjectFreezeCmd,        1, 4, \"obj:object, modify:boolean=false, badread:boolean=false, unfreeze:boolean=false\", .help=\"Freeze an object optionally allowing modify (but not add)\", .retType=(uint)JSI_TT_VOID },",
          "",
          "[Added Lines]",
          "705:     { \"freeze\",         ObjectFreezeCmd,        1, 4, \"obj:object, freeze:boolean=true, modifyok:boolean=true, readcheck:boolean=true\", .help=\"Freeze/unfreeze an object with optionally\", .retType=(uint)JSI_TT_VOID },",
          "",
          "---------------"
        ],
        "src/jsiUtils.c||src/jsiUtils.c": [
          "File: src/jsiUtils.c -> src/jsiUtils.c",
          "--- Hunk 1 ---",
          "[Context before]",
          "144:     }",
          "145:     if (!log)",
          "146:         return (code==JSI_LOG_ERROR?JSI_ERROR:JSI_OK);",
          "148:     char pbuf[JSI_BUFSIZ/8] = \"\";",
          "149:     char buf[JSI_BUFSIZ/2];",
          "150:     const char *term = \"\", *pterm=pbuf;",
          "",
          "[Removed Lines]",
          "[None]",
          "",
          "[Added Lines]",
          "147:     if (code == JSI_LOG_ERROR) {",
          "148:         if (interp->curIpLastError == interp->curIp)",
          "149:             return JSI_ERROR;",
          "150:         interp->curIpLastError = interp->curIp;",
          "151:     }",
          "",
          "---------------"
        ],
        "tools/protos.jsi||tools/protos.jsi": [
          "File: tools/protos.jsi -> tools/protos.jsi",
          "--- Hunk 1 ---",
          "[Context before]",
          "217: Number.prototype.toString = function(radix:number=10):string {};",
          "218: var Object = function(cmd,args) {};",
          "219: Object.prototype.create = function(proto:null|object, properties:object=void):object {};",
          "221: Object.prototype.getPrototypeOf = function(name:object|function):function|object {};",
          "222: Object.prototype.hasOwnProperty = function(name:string):boolean {};",
          "223: Object.prototype.is = function(value1, value2):boolean {};",
          "",
          "[Removed Lines]",
          "220: Object.prototype.freeze = function(obj:object, modify:boolean=false, badread:boolean=false, unfreeze:boolean=false):void {};",
          "",
          "[Added Lines]",
          "220: Object.prototype.freeze = function(obj:object, freeze:boolean=true, modifyok:boolean=true, readcheck:boolean=true):void {};",
          "",
          "---------------"
        ],
        "www/reference.wiki||www/reference.wiki": [
          "File: www/reference.wiki -> www/reference.wiki",
          "--- Hunk 1 ---",
          "[Context before]",
          "722: <tr><td>compat</td><td><i>BOOL</i></td><td>Ignore unknown options via JSI_OPTS_IGNORE_EXTRA in option parser.</td><td><i></i></td></tr>",
          "723: <tr><td>dblPrec</td><td><i>INT</i></td><td>Format precision of double where 0=max, -1=max-1, ... (max-1).</td><td><i></i></td></tr>",
          "724: <tr><td>istty</td><td><i>BOOL</i></td><td>Indicates interp is in interactive mode.</td><td><i>readOnly</i></td></tr>",
          "726: <tr><td>logColNums</td><td><i>BOOL</i></td><td>Display column numbers in error messages.</td><td><i></i></td></tr>",
          "727: <tr><td>logAllowDups</td><td><i>BOOL</i></td><td>Log should not filter out duplicate messages.</td><td><i></i></td></tr>",
          "728: <tr><td>mutexUnlock</td><td><i>BOOL</i></td><td>Unlock own mutex when evaling in other interps (true).</td><td><i>initOnly</i></td></tr>",
          "",
          "[Removed Lines]",
          "725: <tr><td>freeze</td><td><i>BOOL</i></td><td>Default freeze self object in: first arg to moduleOpts.</td><td><i></i></td></tr>",
          "",
          "[Added Lines]",
          "725: <tr><td>nofreeze</td><td><i>BOOL</i></td><td>moduleOpts freeze disabled by default.</td><td><i></i></td></tr>",
          "",
          "---------------",
          "--- Hunk 2 ---",
          "[Context before]",
          "965: <tr><th>Method</th><th>Prototype</th><th>Description</th></tr>",
          "966: <tr><td>Object</td><td>new Object(val:object|function|null=void):object </td><td>Object constructor.</td></tr>",
          "967: <tr><td>create</td><td>create(proto:null|object, properties:object=void):object </td><td>Create a new object with prototype object and properties.</td></tr>",
          "969: <tr><td>getPrototypeOf</td><td>getPrototypeOf(name:object|function):function|object </td><td>Return prototype of an object.</td></tr>",
          "970: <tr><td>hasOwnProperty</td><td>hasOwnProperty(name:string):boolean </td><td>Returns a true if object has the specified property.</td></tr>",
          "971: <tr><td>is</td><td>is(value1, value2):boolean </td><td>Tests if two values are equal.</td></tr>",
          "",
          "[Removed Lines]",
          "968: <tr><td>freeze</td><td>freeze(obj:object, modify:boolean=false, badread:boolean=false, unfreeze:boolean=false):void </td><td>Freeze an object optionally allowing modify (but not add).</td></tr>",
          "",
          "[Added Lines]",
          "968: <tr><td>freeze</td><td>freeze(obj:object, freeze:boolean=true, modifyok:boolean=true, readcheck:boolean=true):void </td><td>Freeze/unfreeze an object with optionally.</td></tr>",
          "",
          "---------------",
          "--- Hunk 3 ---",
          "[Context before]",
          "1372: <tr><td>noOp</td><td>noOp() </td><td>A No-Op. A zero overhead command call that is useful for debugging.</td></tr>",
          "1373: <tr><td>parseFloat</td><td>parseFloat(val):number </td><td>Convert string to a double.</td></tr>",
          "1374: <tr><td>parseInt</td><td>parseInt(val:any, base:number=10):number </td><td>Convert string to an integer.</td></tr>",
          "1376: <tr><td>printf</td><td>printf(format:string, ...):void </td><td>Formatted output to stdout.</td></tr>",
          "1377: <tr><td>provide</td><td>provide(name:string|null|function=void, version:number|string=void, <a href='#System.provideOptions'>options</a>:object|function=void):void </td><td>Provide a package for use with require.. Default is the file tail-rootname</td></tr>",
          "1378: <tr><td>puts</td><td>puts(val, ...):void </td><td>Output one or more values to stdout. Each argument is quoted.  Use Interp.logOpts to control source line and/or timestamps output.</td></tr>",
          "",
          "[Removed Lines]",
          "1375: <tr><td>parseOpts</td><td>parseOpts(self:object|userobj, options:object, conf:object|null|undefined=void):object </td><td>Parse module options: same as moduleOpts.</td></tr>",
          "",
          "[Added Lines]",
          "1375: <tr><td>parseOpts</td><td>parseOpts(self:object|userobj, options:object, conf:object|null|undefined=void):object </td><td>Parse module options: similar to moduleOpts but for non-modules.</td></tr>",
          "",
          "---------------",
          "--- Hunk 4 ---",
          "[Context before]",
          "1431: <tr><td>log</td><td><i>ARRAY</i></td><td>Logging flags. (zero or more of: <b>bug</b>, <b>assert</b>, <b>debug</b>, <b>trace</b>, <b>test</b>, <b>info</b>, <b>warn</b>, <b>error</b>, <b>parse</b>)</td><td><i>noCase</i></td></tr>",
          "1432: <tr><td>logmask</td><td><i>ARRAY</i></td><td>Logging mask flags. (zero or more of: <b>bug</b>, <b>assert</b>, <b>debug</b>, <b>trace</b>, <b>test</b>, <b>info</b>, <b>warn</b>, <b>error</b>, <b>parse</b>)</td><td><i>noCase</i></td></tr>",
          "1433: <tr><td>coverage</td><td><i>BOOL</i></td><td>On exit generate detailed code coverage for function calls (with profile).</td><td><i></i></td></tr>",
          "1435: <tr><td>info</td><td><i>OBJ</i></td><td>Info provided by module.</td><td><i>initOnly</i></td></tr>",
          "1436: <tr><td>profile</td><td><i>BOOL</i></td><td>On exit generate profile of function calls.</td><td><i></i></td></tr>",
          "1437: <tr><td>traceCall</td><td><i>ARRAY</i></td><td>Trace commands. (zero or more of: <b>funcs</b>, <b>cmds</b>, <b>new</b>, <b>return</b>, <b>args</b>, <b>notrunc</b>, <b>noparent</b>, <b>full</b>, <b>before</b>)</td><td><i></i></td></tr>",
          "",
          "[Removed Lines]",
          "1434: <tr><td>freeze</td><td><i>BOOL</i></td><td>Freeze self object: first arg to moduleOpts.</td><td><i></i></td></tr>",
          "",
          "[Added Lines]",
          "1434: <tr><td>nofreeze</td><td><i>BOOL</i></td><td>Disable moduleOpts freeze of first arg (self).</td><td><i></i></td></tr>",
          "",
          "---------------",
          "--- Hunk 5 ---",
          "[Context before]",
          "1447: <tr><td>log</td><td><i>ARRAY</i></td><td>Logging flags. (zero or more of: <b>bug</b>, <b>assert</b>, <b>debug</b>, <b>trace</b>, <b>test</b>, <b>info</b>, <b>warn</b>, <b>error</b>, <b>parse</b>)</td><td><i>noCase</i></td></tr>",
          "1448: <tr><td>logmask</td><td><i>ARRAY</i></td><td>Logging mask flags. (zero or more of: <b>bug</b>, <b>assert</b>, <b>debug</b>, <b>trace</b>, <b>test</b>, <b>info</b>, <b>warn</b>, <b>error</b>, <b>parse</b>)</td><td><i>noCase</i></td></tr>",
          "1449: <tr><td>coverage</td><td><i>BOOL</i></td><td>On exit generate detailed code coverage for function calls (with profile).</td><td><i></i></td></tr>",
          "1451: <tr><td>info</td><td><i>OBJ</i></td><td>Info provided by module.</td><td><i>initOnly</i></td></tr>",
          "1452: <tr><td>profile</td><td><i>BOOL</i></td><td>On exit generate profile of function calls.</td><td><i></i></td></tr>",
          "1453: <tr><td>traceCall</td><td><i>ARRAY</i></td><td>Trace commands. (zero or more of: <b>funcs</b>, <b>cmds</b>, <b>new</b>, <b>return</b>, <b>args</b>, <b>notrunc</b>, <b>noparent</b>, <b>full</b>, <b>before</b>)</td><td><i></i></td></tr>",
          "",
          "[Removed Lines]",
          "1450: <tr><td>freeze</td><td><i>BOOL</i></td><td>Freeze self object: first arg to moduleOpts.</td><td><i></i></td></tr>",
          "",
          "[Added Lines]",
          "1450: <tr><td>nofreeze</td><td><i>BOOL</i></td><td>Disable moduleOpts freeze of first arg (self).</td><td><i></i></td></tr>",
          "",
          "---------------"
        ]
      }
    },
    {
      "candidate_hash": "35d5f6bb10187f96bd4ba4900a15b260abb99e41",
      "candidate_info": {
        "commit_hash": "35d5f6bb10187f96bd4ba4900a15b260abb99e41",
        "repo": "pcmacdon/jsish",
        "commit_url": "https://github.com/pcmacdon/jsish/commit/35d5f6bb10187f96bd4ba4900a15b260abb99e41",
        "files": [
          "src/jsi.h",
          "src/jsiCode.c",
          "src/jsiEval.c",
          "src/jsiInt.h",
          "src/jsiValue.c",
          "src/parser.y",
          "tools/protos.jsi"
        ],
        "message": "Release \"3.0.49\": const now complains on modify\n\nFossilOrigin-Name: 4e191a96b7390c67b91878a96421f0104fbe0fc83b3a9c13837e67ab644853a3",
        "before_after_code_files": [
          "src/jsi.h||src/jsi.h",
          "src/jsiCode.c||src/jsiCode.c",
          "src/jsiEval.c||src/jsiEval.c",
          "src/jsiInt.h||src/jsiInt.h",
          "src/jsiValue.c||src/jsiValue.c",
          "src/parser.y||src/parser.y",
          "tools/protos.jsi||tools/protos.jsi"
        ]
      },
      "candidate_patch_features": {
        "candidate_earlier_than_patch": 0,
        "same_branch_evolution": 1,
        "olp_code_files": {
          "patch": [
            "src/jsi.h||src/jsi.h",
            "src/jsiCode.c||src/jsiCode.c",
            "src/jsiEval.c||src/jsiEval.c",
            "src/jsiValue.c||src/jsiValue.c"
          ],
          "candidate": [
            "src/jsi.h||src/jsi.h",
            "src/jsiCode.c||src/jsiCode.c",
            "src/jsiEval.c||src/jsiEval.c",
            "src/jsiValue.c||src/jsiValue.c"
          ]
        }
      },
      "candidate_diff": {
        "src/jsi.h||src/jsi.h": [
          "File: src/jsi.h -> src/jsi.h",
          "--- Hunk 1 ---",
          "[Context before]",
          "5: #define JSI_VERSION_MAJOR   3",
          "6: #define JSI_VERSION_MINOR   0",
          "9: #define JSI_VERSION (JSI_VERSION_MAJOR + ((Jsi_Number)JSI_VERSION_MINOR/100.0) + ((Jsi_Number)JSI_VERSION_RELEASE/10000.0))",
          "",
          "[Removed Lines]",
          "7: #define JSI_VERSION_RELEASE 48",
          "",
          "[Added Lines]",
          "7: #define JSI_VERSION_RELEASE 49",
          "",
          "---------------"
        ],
        "src/jsiCode.c||src/jsiCode.c": [
          "File: src/jsiCode.c -> src/jsiCode.c",
          "--- Hunk 1 ---",
          "[Context before]",
          "466:     }",
          "467: }",
          "470: {",
          "472:     int i = 0;",
          "473:     if (ops == NULL || ops->codes == NULL)",
          "474:         return;",
          "475:     while (i < ops->code_len) {",
          "476:         if (ops->codes[i].op == OP_PUSHVAR)",
          "478:         i++;",
          "479:     }",
          "480: }",
          "",
          "[Removed Lines]",
          "469: void jsi_mark_local(Jsi_OpCodes *ops) // Mark variables as declared with \"var\"",
          "471:     return;",
          "477:             ops->codes[i].local = 1;",
          "",
          "[Added Lines]",
          "469: void jsi_mark_local(Jsi_OpCodes *ops, int v) // Mark variables as declared with \"var\"",
          "471:     if (v != LOCALCONST)",
          "472:         return;",
          "478:             ops->codes[i].readonly = 1;",
          "",
          "---------------"
        ],
        "src/jsiEval.c||src/jsiEval.c": [
          "File: src/jsiEval.c -> src/jsiEval.c",
          "--- Hunk 1 ---",
          "[Context before]",
          "170:         }",
          "171:         if (v == src)",
          "172:             return JSI_OK;",
          "174:             if (interp->typeCheck.strict)",
          "175:                 return Jsi_LogError(\"assign to readonly variable\");",
          "176:             return JSI_OK;",
          "",
          "[Removed Lines]",
          "173:         if (v->f.bits.readonly) {",
          "",
          "[Added Lines]",
          "173:         bool ro = v->f.bits.readonly;",
          "174:         if (ro && v->vt != JSI_VT_UNDEF) {",
          "",
          "---------------",
          "--- Hunk 2 ---",
          "[Context before]",
          "180:         else",
          "181:             Jsi_ValueCopy(interp,v, src);",
          "182:         SIGASSERT(v, VALUE);",
          "184: #ifdef JSI_MEM_DEBUG",
          "185:     if (!v->VD.label2)",
          "186:         v->VD.label2 = \"ValueAssign\";",
          "",
          "[Removed Lines]",
          "183:         v->f.bits.readonly = 0;",
          "",
          "[Added Lines]",
          "184:         v->f.bits.readonly = ro;",
          "",
          "---------------",
          "--- Hunk 3 ---",
          "[Context before]",
          "875:                     Jsi_HashValueSet(hPtr, 0);",
          "876:             }",
          "877:         }",
          "879:         Jsi_IncrRefCount(interp, v);",
          "881:     }",
          "",
          "[Removed Lines]",
          "[None]",
          "",
          "[Added Lines]",
          "879:         if (ip->readonly)",
          "880:             v->f.bits.readonly = 1;",
          "",
          "---------------",
          "--- Hunk 4 ---",
          "[Context before]",
          "936:     Jsi_RC rc = JSI_OK;",
          "937:     uint flags = (uintptr_t)ip->data, right_val = flags&1; // isident=flags&2;",
          "938:     jsiVarDeref(interp,2);",
          "939:     Jsi_String *str = jsi_ValueString(src);",
          "940:     Jsi_Obj *obj = (src->vt==JSI_VT_OBJECT && src->d.obj->ot == JSI_OT_OBJECT?src->d.obj:NULL);",
          "941:     int bsc, arrayindex = (idx->vt == JSI_VT_NUMBER && Jsi_NumberIsInteger(idx->d.num) && idx->d.num >= 0) ?  (int)idx->d.num : -1;",
          "",
          "[Removed Lines]",
          "[None]",
          "",
          "[Added Lines]",
          "941:     bool ro = src->f.bits.readonly;",
          "",
          "---------------",
          "--- Hunk 5 ---",
          "[Context before]",
          "1010:                 assert(vp != resPtr);",
          "1011:                 res.vt = JSI_VT_VARIABLE;",
          "1012:                 res.d.lval = vp;",
          "1013:                 Jsi_ValueCopy(interp, src, resPtr);",
          "1014:             }",
          "1015:             Jsi_DecrRefCount(interp, vp);",
          "",
          "[Removed Lines]",
          "[None]",
          "",
          "[Added Lines]",
          "1016:                 if (ro)",
          "1017:                     vp->f.bits.readonly = 1;",
          "",
          "---------------",
          "--- Hunk 6 ---",
          "[Context before]",
          "1618:                 }",
          "1619:                 Jsi_Value *v = _jsi_TOP->d.lval;",
          "1620:                 SIGASSERT(v, VALUE);",
          "1621:                 Jsi_ValueToNumber(interp, v);",
          "1622:                 rc = _jsi_StrictChk(v);",
          "1623:                 v->d.num += inc;",
          "",
          "[Removed Lines]",
          "[None]",
          "",
          "[Added Lines]",
          "1626:                 if (v->f.bits.readonly)",
          "1627:                     return Jsi_LogError(\"assign to readonly variable\");",
          "",
          "---------------"
        ],
        "src/jsiInt.h||src/jsiInt.h": [
          "File: src/jsiInt.h -> src/jsiInt.h",
          "--- Hunk 1 ---",
          "[Context before]",
          "440:     jsi_Eopcode op;",
          "441:     void *data;",
          "442:     unsigned int Line:16;",
          "444:     unsigned char alloc:1;",
          "445:     unsigned char nodebug:1;",
          "446:     unsigned char hit:1;",
          "",
          "[Removed Lines]",
          "443:     unsigned int Lofs:8;",
          "",
          "[Added Lines]",
          "443:     unsigned int Lofs:7;",
          "444:     unsigned int  readonly:1;",
          "",
          "---------------",
          "--- Hunk 2 ---",
          "[Context before]",
          "815: typedef struct {",
          "816:     jsi_Sig sig;",
          "818:     unsigned int local:1;",
          "819:     jsi_Pstate *ps;",
          "820:     char *varname;",
          "",
          "[Removed Lines]",
          "817:     int context_id:31;",
          "",
          "[Added Lines]",
          "818:     int context_id:30;",
          "819:     unsigned int const:1;",
          "",
          "---------------"
        ],
        "src/jsiValue.c||src/jsiValue.c": [
          "File: src/jsiValue.c -> src/jsiValue.c",
          "--- Hunk 1 ---",
          "[Context before]",
          "312:     (*to)->VD.label3 = \"ValueDup2\";",
          "313: #endif",
          "314:     Jsi_ValueCopy(interp, *to, from);",
          "316: }",
          "318: Jsi_Value *Jsi_ValueDupJSON(Jsi_Interp *interp, Jsi_Value *val)",
          "",
          "[Removed Lines]",
          "315:     (*to)->f.bits.readonly = 0;",
          "",
          "[Added Lines]",
          "[None]",
          "",
          "---------------"
        ],
        "src/parser.y||src/parser.y": [
          "File: src/parser.y -> src/parser.y",
          "--- Hunk 1 ---",
          "[Context before]",
          "149: localvar:",
          "150:     LOCAL { $$ = LOCAL; }",
          "153: ;",
          "155: objectident:",
          "",
          "[Removed Lines]",
          "151:     | LOCALLET { $$ = LOCAL; }",
          "152:     | LOCALCONST { $$ = LOCAL; }",
          "",
          "[Added Lines]",
          "151:     | LOCALLET { $$ = LOCALLET; }",
          "152:     | LOCALCONST { $$ = LOCALCONST; }",
          "",
          "---------------",
          "--- Hunk 2 ---",
          "[Context before]",
          "177:     | RETURN expr ';'   { $$ = codes_join($2, code_ret(pstate, &@2, 1)); }",
          "178:     | RETURN ';'        { $$ = code_ret(pstate, &@1, 0); }",
          "179:     | localvar vardecs ';' {",
          "181:         $$ = $2;",
          "182:     }",
          "183:     | THROW expr ';'    { $$ = codes_join($2, code_throw(pstate, &@2)); }",
          "",
          "[Removed Lines]",
          "180:         jsi_mark_local($2);",
          "",
          "[Added Lines]",
          "180:         jsi_mark_local($2, $1);",
          "",
          "---------------",
          "--- Hunk 3 ---",
          "[Context before]",
          "406:         jsi_ForinVar *fv;",
          "407:         int inof = $6;",
          "408:         Jsi_OpCodes *loc = code_local(pstate, &@5, $5);",
          "410:         fv = forinvar_new(pstate, $5, loc, NULL);",
          "411:         Jsi_OpCodes *lval;",
          "412:         if (fv->varname) lval = code_push_index(pstate, &@2, fv->varname, 1);",
          "",
          "[Removed Lines]",
          "409:         jsi_mark_local(loc);",
          "",
          "[Added Lines]",
          "409:         jsi_mark_local(loc, $4);",
          "",
          "---------------",
          "--- Hunk 4 ---",
          "[Context before]",
          "449:     ';'                 { $$ = code_nop(); }",
          "450:     | expr ';'          { $$ = codes_join($1, code_pop(1)); }",
          "451:     | localvar vardecs ';' {",
          "453:         $$ = $2;",
          "454:     }",
          "455: ;",
          "",
          "[Removed Lines]",
          "452:         jsi_mark_local($2);",
          "",
          "[Added Lines]",
          "452:         jsi_mark_local($2, $1);",
          "",
          "---------------"
        ],
        "tools/protos.jsi||tools/protos.jsi": [
          "File: tools/protos.jsi -> tools/protos.jsi"
        ]
      }
    },
    {
      "candidate_hash": "a75a11799937b9749637c2e5bdbb9802d08be022",
      "candidate_info": {
        "commit_hash": "a75a11799937b9749637c2e5bdbb9802d08be022",
        "repo": "pcmacdon/jsish",
        "commit_url": "https://github.com/pcmacdon/jsish/commit/a75a11799937b9749637c2e5bdbb9802d08be022",
        "files": [
          "c-demos/cdata/Car.jsc",
          "c-demos/cdata/Makefile",
          "c-demos/cdata/ext_test.jsi",
          "c-demos/dyn.js",
          "lib/Cdata.jsi",
          "lib/Zip.jsi",
          "regex/regcomp.c",
          "src/jsi.h",
          "src/jsiCmds.c",
          "src/jsiFilesys.c",
          "src/jsiFunc.c",
          "src/jsiPstate.c",
          "src/jsiSqlite.c",
          "tools/protos.jsi"
        ],
        "message": "Release \"3.0.16\": CData adds pkg.info, fixes for ~/ files.\n\nFossilOrigin-Name: c7a1cbf5d385b03bb18120a46367d3e6b928633f4f4a1232fcdeb6d172dd54dc",
        "before_after_code_files": [
          "c-demos/cdata/Car.jsc||c-demos/cdata/Car.jsc",
          "c-demos/cdata/ext_test.jsi||c-demos/cdata/ext_test.jsi",
          "c-demos/dyn.js||c-demos/dyn.js",
          "lib/Cdata.jsi||lib/Cdata.jsi",
          "lib/Zip.jsi||lib/Zip.jsi",
          "regex/regcomp.c||regex/regcomp.c",
          "src/jsi.h||src/jsi.h",
          "src/jsiCmds.c||src/jsiCmds.c",
          "src/jsiFilesys.c||src/jsiFilesys.c",
          "src/jsiFunc.c||src/jsiFunc.c",
          "src/jsiPstate.c||src/jsiPstate.c",
          "src/jsiSqlite.c||src/jsiSqlite.c",
          "tools/protos.jsi||tools/protos.jsi"
        ]
      },
      "candidate_patch_features": {
        "candidate_earlier_than_patch": 0,
        "same_branch_evolution": 1,
        "olp_code_files": {
          "patch": [
            "src/jsi.h||src/jsi.h",
            "src/jsiCmds.c||src/jsiCmds.c",
            "src/jsiFilesys.c||src/jsiFilesys.c",
            "src/jsiFunc.c||src/jsiFunc.c",
            "src/jsiPstate.c||src/jsiPstate.c",
            "src/jsiSqlite.c||src/jsiSqlite.c"
          ],
          "candidate": [
            "src/jsi.h||src/jsi.h",
            "src/jsiCmds.c||src/jsiCmds.c",
            "src/jsiFilesys.c||src/jsiFilesys.c",
            "src/jsiFunc.c||src/jsiFunc.c",
            "src/jsiPstate.c||src/jsiPstate.c",
            "src/jsiSqlite.c||src/jsiSqlite.c"
          ]
        }
      },
      "candidate_diff": {
        "c-demos/cdata/Car.jsc||c-demos/cdata/Car.jsc": [
          "File: c-demos/cdata/Car.jsc -> c-demos/cdata/Car.jsc",
          "--- Hunk 1 ---",
          "[Context before]",
          "47:             puts(\"Unloading Car\");",
          "48:         } else {",
          "49:             puts(\"Loading Car\");",
          "50:         }",
          "51:         return JSI_OK;",
          "52:     }",
          "",
          "[Removed Lines]",
          "[None]",
          "",
          "[Added Lines]",
          "50:             static const char *info = \"{carstuff:true, mynum:1}\";  // JSON for pkg.info",
          "51:             Car_PkgInfo = info;",
          "",
          "---------------"
        ],
        "c-demos/cdata/ext_test.jsi||c-demos/cdata/ext_test.jsi": [
          "File: c-demos/cdata/ext_test.jsi -> c-demos/cdata/ext_test.jsi",
          "--- Hunk 1 ---",
          "[Context before]",
          "35: ;'\\nCar';",
          "36: ;require('Car');",
          "37: ;n=Car.keys();",
          "38: ;m=Info.cmds('Car');",
          "39: ;c=new Car();",
          "",
          "[Removed Lines]",
          "[None]",
          "",
          "[Added Lines]",
          "37: ;require('Car',1).info;",
          "",
          "---------------",
          "--- Hunk 2 ---",
          "[Context before]",
          "96: '",
          "97: Car'",
          "98: require('Car') ==> 1",
          "99: n=Car.keys() ==> [ \"Car\", \"conf\", \"shift\", \"setSpeed\", \"fix\" ]",
          "100: m=Info.cmds('Car') ==> { args:\"options:object=void\", constructor:true, help:\"Extension to create a Car object command.\", name:\"Car\", retType:\"any\", type:\"object\" }",
          "101: c=new Car() ==> \"#Car_1\"",
          "",
          "[Removed Lines]",
          "[None]",
          "",
          "[Added Lines]",
          "100: require('Car',1).info ==> { carstuff:true, mynum:1 }",
          "",
          "---------------"
        ],
        "c-demos/dyn.js||c-demos/dyn.js": [
          "File: c-demos/dyn.js -> c-demos/dyn.js",
          "--- Hunk 1 ---",
          "[Context before]",
          "1: #!/usr/bin/env jsish",
          "4: require('dyn');",
          "5: dyn(1,2,3);",
          "",
          "[Removed Lines]",
          "3: Interp.conf({pkgDirs:['.']});",
          "",
          "[Added Lines]",
          "[None]",
          "",
          "---------------"
        ],
        "lib/Cdata.jsi||lib/Cdata.jsi": [
          "File: lib/Cdata.jsi -> lib/Cdata.jsi",
          "--- Hunk 1 ---",
          "[Context before]",
          "646:                 self.out += '\\n#define CDATA_CODE_GLOB_VAR_'+name+' 1\\n';",
          "647:             else",
          "648:                 self.out += '\\n#define CDATA_CODE_PER_INTERP_'+name+' 1\\n';",
          "649:         }",
          "651:         for (var ff of def.flds) {",
          "",
          "[Removed Lines]",
          "[None]",
          "",
          "[Added Lines]",
          "649:             self.out += '\\nstatic const char* '+name+'_PkgInfo = NULL;\\n';",
          "",
          "---------------",
          "--- Hunk 2 ---",
          "[Context before]",
          "1643:         Jsi_InterpFreeData(interp, \"Demo_InterpData\");",
          "1644: #endif",
          "1645:     if (!isRelease) {",
          "1647: #if (defined(CDATA_CODE_GLOB_VAR_Demo) || defined(CDATA_CODE_PER_INTERP_Demo))",
          "1648:         vr.spec = Demo__Specs;",
          "1649:         vr.data = ddPtr;",
          "1650:         vr.cmdSpec = DemoCmds;",
          "1651: #endif",
          "1655: #ifdef CDATA_CONSTRUCTOR",
          "1656:         Jsi_Hash *wsys;",
          "1657:         if (!(wsys = Jsi_UserObjRegister(interp, &DemoObjReg))) {",
          "",
          "[Removed Lines]",
          "1646:         Jsi_PkgOpts vr = {};",
          "1652:         if (Jsi_PkgProvideEx(interp, \"Demo\", 1, Jsi_InitDemo, (vr.data?&vr:NULL)) != JSI_OK)",
          "1653:             return JSI_ERROR;",
          "",
          "[Added Lines]",
          "1647:         Jsi_RC rc;",
          "1649:         Jsi_PkgOpts vr = {};",
          "1653:         if (Demo_PkgInfo) {",
          "1654:             vr.info = Jsi_ValueNew1(interp);",
          "1655:             rc = Jsi_JSONParse(interp, Demo_PkgInfo, &vr.info, 0);",
          "1656:         }",
          "1657:         if (rc == JSI_OK)",
          "1658:             rc = Jsi_PkgProvideEx(interp, \"Demo\", 1, Jsi_InitDemo, &vr);",
          "1659:         if (vr.info)",
          "1660:             Jsi_DecrRefCount(interp, vr.info);",
          "1661: #else",
          "1662:         rc = Jsi_PkgProvideEx(interp, \"Demo\", 1, Jsi_InitDemo, NULL);",
          "1664:         if (rc != JSI_OK)",
          "1665:             return rc;",
          "",
          "---------------"
        ],
        "lib/Zip.jsi||lib/Zip.jsi": [
          "File: lib/Zip.jsi -> lib/Zip.jsi",
          "--- Hunk 1 ---",
          "[Context before]",
          "84:         for (var i in flist) {",
          "85:             var fn = flist[i];",
          "86:             var fdst = fn.substr(zdir.length+1);",
          "89:             if (self.verbose)",
          "90:                 puts(\"\"+fn);",
          "91:             var fdir = File.dirname(ddir+fn);",
          "",
          "[Removed Lines]",
          "87:             var ftyp = File.type(zdir+'/'+fn);",
          "88:             if (ftyp === 'directory') continue;",
          "",
          "[Added Lines]",
          "87:             var ftyp = File.perms(zdir+'/'+fn);",
          "88:             if (ftyp[0] === 'd') continue;",
          "",
          "---------------"
        ],
        "regex/regcomp.c||regex/regcomp.c": [
          "File: regex/regcomp.c -> regex/regcomp.c",
          "--- Hunk 1 ---",
          "[Context before]",
          "2119:             {",
          "2121:               for (i = 0; tags[i] >= 0; i++)",
          "2124:               if (tags[i] < 0)",
          "2125:             {",
          "2126:               tags[i] = lit->code_max;",
          "",
          "[Removed Lines]",
          "2122:             if (tags[i] == lit->code_max)",
          "2123:               break;",
          "",
          "[Added Lines]",
          "2122:                 if (tags[i] == lit->code_max)",
          "2123:                   break;",
          "",
          "---------------"
        ],
        "src/jsi.h||src/jsi.h": [
          "File: src/jsi.h -> src/jsi.h",
          "--- Hunk 1 ---",
          "[Context before]",
          "5: #define JSI_VERSION_MAJOR   3",
          "6: #define JSI_VERSION_MINOR   0",
          "9: #define JSI_VERSION (JSI_VERSION_MAJOR + ((Jsi_Number)JSI_VERSION_MINOR/100.0) + ((Jsi_Number)JSI_VERSION_RELEASE/10000.0))",
          "",
          "[Removed Lines]",
          "7: #define JSI_VERSION_RELEASE 15",
          "",
          "[Added Lines]",
          "7: #define JSI_VERSION_RELEASE 16",
          "",
          "---------------"
        ],
        "src/jsiCmds.c||src/jsiCmds.c": [
          "File: src/jsiCmds.c -> src/jsiCmds.c",
          "--- Hunk 1 ---",
          "[Context before]",
          "78:     jsi_Pstate *ps = interp->ps;",
          "79:     Jsi_RC rc = JSI_OK;",
          "80:     int flags = 0;",
          "82:     SourceData data = {.trace = interp->debugOpts.includeTrace, .once = interp->debugOpts.includeOnce};",
          "83:     Jsi_Value *v, *va = Jsi_ValueArrayIndex(interp, args, 0);",
          "84:     Jsi_Value *vo = Jsi_ValueArrayIndex(interp, args, 1);",
          "",
          "[Removed Lines]",
          "81:     int i, argc;",
          "",
          "[Added Lines]",
          "81:     int i, argc = 1;",
          "",
          "---------------",
          "--- Hunk 2 ---",
          "[Context before]",
          "114:     const char *sop = (data.once?\" <ONCE>\":\"\");",
          "115:     if (!Jsi_ValueIsArray(interp, va)) {",
          "116:         v = va;",
          "126:     }",
          "127:     argc = Jsi_ValueGetLength(interp, va);",
          "128:     for (i=0; i<argc && rc == JSI_OK; i++) {",
          "129:         v = Jsi_ValueArrayIndex(interp, va, i);",
          "130:         if (v && Jsi_ValueIsString(interp,v)) {",
          "131:             if (data.trace)",
          "132:                 Jsi_LogInfo(\"sourcing: %s%s\", Jsi_ValueString(interp, v, 0), sop);",
          "",
          "[Removed Lines]",
          "117:         if (v && Jsi_ValueIsString(interp,v)) {",
          "118:             if (data.trace)",
          "119:                 Jsi_LogInfo(\"sourcing: %s%s\", Jsi_ValueString(interp, v, 0), sop);",
          "120:             rc = jsi_evalStrFile(ps->interp, v, NULL, flags, data.level);",
          "121:         } else {",
          "122:             Jsi_LogError(\"expected string\");",
          "123:             rc = JSI_ERROR;",
          "124:         }",
          "125:         goto done;",
          "",
          "[Added Lines]",
          "117:         goto doit;",
          "122: doit:",
          "123:         if (!v) continue;",
          "124:         if (interp->isSafe && data.exists) {",
          "125:             Jsi_StatBuf sb;",
          "126:             if (Jsi_Stat(interp, v, &sb))",
          "127:                 continue;",
          "128:         }",
          "",
          "---------------",
          "--- Hunk 3 ---",
          "[Context before]",
          "137:             break;",
          "138:         }",
          "139:     }",
          "141:     if (rc == JSI_OK)",
          "142:         Jsi_ValueCopy(interp, *ret, interp->retValue);",
          "143:     interp->isMain = oisi;",
          "",
          "[Removed Lines]",
          "140: done:",
          "",
          "[Added Lines]",
          "[None]",
          "",
          "---------------"
        ],
        "src/jsiFilesys.c||src/jsiFilesys.c": [
          "File: src/jsiFilesys.c -> src/jsiFilesys.c",
          "--- Hunk 1 ---",
          "[Context before]",
          "1394:     else",
          "1395: #endif",
          "1396:     apath = realpath(npath, newname);",
          "1398:         if ((path[0] == '.' && path[1] == '/') || (path[0] != '/' &&",
          "1399:         !(path[0] == '.' && path[1] == '.') && path[1] != ':')) {",
          "1400:             Jsi_GetCwd(interp, &eStr);",
          "",
          "[Removed Lines]",
          "1397:     if (!apath) {",
          "",
          "[Added Lines]",
          "1397:     if (!apath && path[0] != '~') {",
          "",
          "---------------"
        ],
        "src/jsiFunc.c||src/jsiFunc.c": [
          "File: src/jsiFunc.c -> src/jsiFunc.c",
          "--- Hunk 1 ---",
          "[Context before]",
          "97:         case 'b': if (Jsi_Strcmp(tname, \"boolean\")==0) return JSI_TT_BOOLEAN; break;",
          "98:         case 's': if (Jsi_Strcmp(tname, \"string\")==0) return JSI_TT_STRING; break;",
          "99:         case 'n': if (Jsi_Strcmp(tname, \"null\")==0) return JSI_TT_NULL;",
          "101:         case 'o': if (Jsi_Strcmp(tname, \"object\")==0) return JSI_TT_OBJECT; break;",
          "102:         case 'r': if (Jsi_Strcmp(tname, \"regexp\")==0) return JSI_TT_REGEXP; break;",
          "103:         case 'f': if (Jsi_Strcmp(tname, \"function\")==0) return JSI_TT_FUNCTION; break;",
          "104:         case 'i': if (Jsi_Strcmp(tname, \"iterobj\")==0) return JSI_TT_ITEROBJ;",
          "105:         case 'u': if (Jsi_Strcmp(tname, \"userobj\")==0) return JSI_TT_USEROBJ;",
          "107:         case 'a': if (Jsi_Strcmp(tname, \"array\")==0) return JSI_TT_ARRAY;",
          "109:         case 'v': if (Jsi_Strcmp(tname, \"void\")==0) return JSI_TT_VOID; break;",
          "110:     }",
          "111:     Jsi_LogWarn(\"Type \\\"%s\\\" is not one of boolean, string, number, function, array, object, regexp, userobj, null, undefined, void or any\", tname);",
          "",
          "[Removed Lines]",
          "100:                   if (Jsi_Strcmp(tname, \"number\")==0) return JSI_TT_NUMBER; break;",
          "106:                   if (Jsi_Strcmp(tname, \"undefined\")==0) return JSI_TT_UNDEFINED; break;",
          "108:                   if (Jsi_Strcmp(tname, \"any\")==0) return JSI_TT_ANY; break;",
          "",
          "[Added Lines]",
          "100:                   if (Jsi_Strcmp(tname, \"number\")==0) return JSI_TT_NUMBER;",
          "101:                   break;",
          "107:                   if (Jsi_Strcmp(tname, \"undefined\")==0) return JSI_TT_UNDEFINED;",
          "108:                   break;",
          "110:                   if (Jsi_Strcmp(tname, \"any\")==0) return JSI_TT_ANY;",
          "111:                   break;",
          "",
          "---------------"
        ],
        "src/jsiPstate.c||src/jsiPstate.c": [
          "File: src/jsiPstate.c -> src/jsiPstate.c",
          "--- Hunk 1 ---",
          "[Context before]",
          "109:         Jsi_IncrRefCount(interp, defValue);",
          "110:         if (a->firstDef==0)",
          "111:             a->firstDef = a->argCnt;",
          "114:     } else {",
          "115:         if (a->firstDef && (interp->typeCheck.run || interp->typeCheck.all) )",
          "116:             Jsi_LogWarn(\"expected default value in argument list: \\\"%s\\\"\", name);",
          "",
          "[Removed Lines]",
          "112:             if (atyp)",
          "113:                 jsi_ArgTypeCheck(interp, atyp, defValue, \"default value\", name, a->argCnt, NULL, 1);",
          "",
          "[Added Lines]",
          "112:         if (atyp)",
          "113:             jsi_ArgTypeCheck(interp, atyp, defValue, \"default value\", name, a->argCnt, NULL, 1);",
          "",
          "---------------"
        ],
        "src/jsiSqlite.c||src/jsiSqlite.c": [
          "File: src/jsiSqlite.c -> src/jsiSqlite.c",
          "--- Hunk 1 ---",
          "[Context before]",
          "4666:     Jsi_Value *info = Jsi_ValueNew1(interp);",
          "4667:     Jsi_JSONParseFmt(interp, &info, \"{libVer:\\\"%s\\\", hdrVer:\\\"%s\\\", hdrNum:%d, hdrSrcId:\\\"%s\\\", pkgVer:%d}\",",
          "4668:         (char *)sqlite3_libversion(), SQLITE_VERSION, SQLITE_VERSION_NUMBER, SQLITE_SOURCE_ID, jsi_DbPkgVersion);",
          "4670:     Jsi_RC rc = Jsi_PkgProvideEx(interp, \"Sqlite\", jsi_DbPkgVersion, Jsi_InitSqlite, &dbPkgOpts);",
          "4671:     Jsi_DecrRefCount(interp, info);",
          "4672:     if (rc != JSI_OK)",
          "",
          "[Removed Lines]",
          "4669:     Jsi_PkgOpts dbPkgOpts = { db_ObjCmd_Specs, &dbObjCmd, sqliteCmds, info };",
          "",
          "[Added Lines]",
          "4669:     Jsi_PkgOpts dbPkgOpts = { .spec=db_ObjCmd_Specs, .data=&dbObjCmd, .cmdSpec=sqliteCmds, .info=info };",
          "",
          "---------------"
        ],
        "tools/protos.jsi||tools/protos.jsi": [
          "File: tools/protos.jsi -> tools/protos.jsi"
        ]
      }
    }
  ]
}