{
  "cve_id": "CVE-2015-7551",
  "cve_desc": "The Fiddle::Handle implementation in ext/fiddle/handle.c in Ruby before 2.0.0-p648, 2.1 before 2.1.8, and 2.2 before 2.2.4, as distributed in Apple OS X before 10.11.4 and other products, mishandles tainting, which allows context-dependent attackers to execute arbitrary code or cause a denial of service (application crash) via a crafted string, related to the DL module and the libffi library.  NOTE: this vulnerability exists because of a CVE-2009-5147 regression.",
  "repo": "ruby/ruby",
  "patch_hash": "339e11a7f178312d937b7c95dd3115ce7236597a",
  "patch_info": {
    "commit_hash": "339e11a7f178312d937b7c95dd3115ce7236597a",
    "repo": "ruby/ruby",
    "commit_url": "https://github.com/ruby/ruby/commit/339e11a7f178312d937b7c95dd3115ce7236597a",
    "files": [
      "ChangeLog",
      "ext/fiddle/handle.c",
      "test/fiddle/test_handle.rb",
      "version.h"
    ],
    "message": "merge revision(s): 53153 and 23405@ruby_1_9_1\n\n\t* ext/fiddle/handle.c: check tainted string arguments.\n\t  Patch provided by tenderlove and nobu.\n\n\t* test/fiddle/test_handle.rb (class TestHandle): add test for above.\n\n\t* ext/dl/handle.c (rb_dlhandle_initialize): prohibits DL::dlopen\n\t  with a tainted name of library.\n\t  Patch by sheepman <sheepman AT sheepman.sakura.ne.jp>.\n\n\t* ext/dl/handle.c (rb_dlhandle_sym): ditto\n\n\n\ngit-svn-id: svn+ssh://ci.ruby-lang.org/ruby/branches/ruby_2_1@53156 b2dd03c8-39d4-4d8f-98ff-823fe69b080e",
    "before_after_code_files": [
      "ext/fiddle/handle.c||ext/fiddle/handle.c",
      "test/fiddle/test_handle.rb||test/fiddle/test_handle.rb",
      "version.h||version.h"
    ]
  },
  "patch_diff": {
    "ext/fiddle/handle.c||ext/fiddle/handle.c": [
      "File: ext/fiddle/handle.c -> ext/fiddle/handle.c",
      "--- Hunk 1 ---",
      "[Context before]",
      "1: #include <ruby.h>",
      "2: #include <fiddle.h>",
      "4: VALUE rb_cHandle;",
      "6: struct dl_handle {",
      "",
      "[Removed Lines]",
      "[None]",
      "",
      "[Added Lines]",
      "4: #define SafeStringValueCStr(v) (rb_check_safe_obj(rb_string_value(&v)), StringValueCStr(v))",
      "",
      "---------------",
      "--- Hunk 2 ---",
      "[Context before]",
      "143:  cflag = RTLD_LAZY | RTLD_GLOBAL;",
      "144:  break;",
      "145:       case 1:",
      "147:  cflag = RTLD_LAZY | RTLD_GLOBAL;",
      "148:  break;",
      "149:       case 2:",
      "151:  cflag = NUM2INT(flag);",
      "152:  break;",
      "153:       default:",
      "",
      "[Removed Lines]",
      "146:  clib = NIL_P(lib) ? NULL : StringValuePtr(lib);",
      "150:  clib = NIL_P(lib) ? NULL : StringValuePtr(lib);",
      "",
      "[Added Lines]",
      "148:  clib = NIL_P(lib) ? NULL : SafeStringValueCStr(lib);",
      "152:  clib = NIL_P(lib) ? NULL : SafeStringValueCStr(lib);",
      "",
      "---------------",
      "--- Hunk 3 ---",
      "[Context before]",
      "263:     return PTR2NUM(fiddle_handle);",
      "264: }",
      "",
      "[Removed Lines]",
      "266: static VALUE fiddle_handle_sym(void *handle, const char *symbol);",
      "",
      "[Added Lines]",
      "268: static VALUE fiddle_handle_sym(void *handle, VALUE symbol);",
      "",
      "---------------",
      "--- Hunk 4 ---",
      "[Context before]",
      "282:  rb_raise(rb_eFiddleError, \"closed handle\");",
      "283:     }",
      "286: }",
      "288: #ifndef RTLD_NEXT",
      "",
      "[Removed Lines]",
      "285:     return fiddle_handle_sym(fiddle_handle->ptr, StringValueCStr(sym));",
      "",
      "[Added Lines]",
      "287:     return fiddle_handle_sym(fiddle_handle->ptr, sym);",
      "",
      "---------------",
      "--- Hunk 5 ---",
      "[Context before]",
      "305: static VALUE",
      "306: rb_fiddle_handle_s_sym(VALUE self, VALUE sym)",
      "307: {",
      "309: }",
      "311: static VALUE",
      "313: {",
      "314: #if defined(HAVE_DLERROR)",
      "315:     const char *err;",
      "",
      "[Removed Lines]",
      "308:     return fiddle_handle_sym(RTLD_NEXT, StringValueCStr(sym));",
      "312: fiddle_handle_sym(void *handle, const char *name)",
      "",
      "[Added Lines]",
      "310:     return fiddle_handle_sym(RTLD_NEXT, sym);",
      "314: fiddle_handle_sym(void *handle, VALUE symbol)",
      "",
      "---------------",
      "--- Hunk 6 ---",
      "[Context before]",
      "318: # define CHECK_DLERROR",
      "319: #endif",
      "320:     void (*func)();",
      "322:     rb_secure(2);",
      "323: #ifdef HAVE_DLERROR",
      "",
      "[Removed Lines]",
      "[None]",
      "",
      "[Added Lines]",
      "323:     const char *name = SafeStringValueCStr(symbol);",
      "",
      "---------------",
      "--- Hunk 7 ---",
      "[Context before]",
      "367:     }",
      "368: #endif",
      "369:     if( !func ){",
      "371:     }",
      "373:     return PTR2NUM(func);",
      "",
      "[Removed Lines]",
      "370:  rb_raise(rb_eFiddleError, \"unknown symbol \\\"%s\\\"\", name);",
      "",
      "[Added Lines]",
      "373:  rb_raise(rb_eFiddleError, \"unknown symbol \\\"%\"PRIsVALUE\"\\\"\", symbol);",
      "",
      "---------------"
    ],
    "test/fiddle/test_handle.rb||test/fiddle/test_handle.rb": [
      "File: test/fiddle/test_handle.rb -> test/fiddle/test_handle.rb",
      "--- Hunk 1 ---",
      "[Context before]",
      "11:     include Test::Unit::Assertions",
      "13:     def test_to_i",
      "14:       handle = Fiddle::Handle.new(LIBC_SO)",
      "15:       assert_kind_of Integer, handle.to_i",
      "",
      "[Removed Lines]",
      "[None]",
      "",
      "[Added Lines]",
      "13:     def test_safe_handle_open",
      "14:       t = Thread.new do",
      "15:         $SAFE = 1",
      "16:         Fiddle::Handle.new(LIBC_SO.taint)",
      "17:       end",
      "18:       assert_raise(SecurityError) { t.value }",
      "19:     end",
      "21:     def test_safe_function_lookup",
      "22:       t = Thread.new do",
      "23:         h = Fiddle::Handle.new(LIBC_SO)",
      "24:         $SAFE = 1",
      "25:         h[\"qsort\".taint]",
      "26:       end",
      "27:       assert_raise(SecurityError) { t.value }",
      "28:     end",
      "",
      "---------------"
    ],
    "version.h||version.h": [
      "File: version.h -> version.h",
      "--- Hunk 1 ---",
      "[Context before]",
      "1: #define RUBY_VERSION \"2.1.8\"",
      "2: #define RUBY_RELEASE_DATE \"2015-12-16\"",
      "5: #define RUBY_RELEASE_YEAR 2015",
      "6: #define RUBY_RELEASE_MONTH 12",
      "",
      "[Removed Lines]",
      "3: #define RUBY_PATCHLEVEL 438",
      "",
      "[Added Lines]",
      "3: #define RUBY_PATCHLEVEL 439",
      "",
      "---------------"
    ]
  },
  "candidates": [
    {
      "candidate_hash": "513b313db1b102f330b994b8fd908a2c10553d7b",
      "candidate_info": {
        "commit_hash": "513b313db1b102f330b994b8fd908a2c10553d7b",
        "repo": "ruby/ruby",
        "commit_url": "https://github.com/ruby/ruby/commit/513b313db1b102f330b994b8fd908a2c10553d7b",
        "files": [
          "ChangeLog",
          "thread_pthread.c",
          "version.h"
        ],
        "message": "merge revision(s) 50316: [Backport #11030]\n\n\t* thread_pthread.c (reserve_stack): keep sp safe zone to get rid\n\t  of crash by -fstack-check.  [ruby-core:68740] [Bug #11030]\n\n\ngit-svn-id: svn+ssh://ci.ruby-lang.org/ruby/branches/ruby_2_1@50396 b2dd03c8-39d4-4d8f-98ff-823fe69b080e",
        "before_after_code_files": [
          "thread_pthread.c||thread_pthread.c",
          "version.h||version.h"
        ]
      },
      "candidate_patch_features": {
        "candidate_earlier_than_patch": 1,
        "same_branch_evolution": 1,
        "olp_code_files": {
          "patch": [
            "version.h||version.h"
          ],
          "candidate": [
            "version.h||version.h"
          ]
        }
      },
      "candidate_diff": {
        "thread_pthread.c||thread_pthread.c": [
          "File: thread_pthread.c -> thread_pthread.c",
          "--- Hunk 1 ---",
          "[Context before]",
          "657: # endif",
          "658:     struct rlimit rl;",
          "659:     volatile char buf[0x100];",
          "660:     STACK_GROW_DIR_DETECTION;",
          "662:     if (!getrlimit(RLIMIT_STACK, &rl) && rl.rlim_cur == RLIM_INFINITY)",
          "663:  return;",
          "666:     if (IS_STACK_DIR_UPPER()) {",
          "667:  const volatile char *end = buf + sizeof(buf);",
          "",
          "[Removed Lines]",
          "[None]",
          "",
          "[Added Lines]",
          "667:     if (size < stack_check_margin) return;",
          "668:     size -= stack_check_margin;",
          "",
          "---------------",
          "--- Hunk 2 ---",
          "[Context before]",
          "669:  if (limit > end) {",
          "670:      size = limit - end;",
          "671:      limit = alloca(size);",
          "673:  }",
          "674:     }",
          "675:     else {",
          "676:  limit -= size;",
          "677:  if (buf > limit) {",
          "678:      limit = alloca(buf - limit);",
          "679:      limit[0] = 0;",
          "680:  }",
          "681:     }",
          "",
          "[Removed Lines]",
          "672:      limit[size-1] = 0;",
          "",
          "[Added Lines]",
          "677:      limit[stack_check_margin+size-1] = 0;",
          "684:      limit -= stack_check_margin;",
          "",
          "---------------"
        ],
        "version.h||version.h": [
          "File: version.h -> version.h",
          "--- Hunk 1 ---",
          "[Context before]",
          "1: #define RUBY_VERSION \"2.1.7\"",
          "5: #define RUBY_RELEASE_YEAR 2015",
          "6: #define RUBY_RELEASE_MONTH 4",
          "9: #include \"ruby/version.h\"",
          "",
          "[Removed Lines]",
          "2: #define RUBY_RELEASE_DATE \"2015-04-24\"",
          "3: #define RUBY_PATCHLEVEL 338",
          "7: #define RUBY_RELEASE_DAY 24",
          "",
          "[Added Lines]",
          "2: #define RUBY_RELEASE_DATE \"2015-04-28\"",
          "3: #define RUBY_PATCHLEVEL 339",
          "7: #define RUBY_RELEASE_DAY 28",
          "",
          "---------------"
        ]
      }
    },
    {
      "candidate_hash": "2d5f7e5e17ef2a05b4218d7a889453897afa72be",
      "candidate_info": {
        "commit_hash": "2d5f7e5e17ef2a05b4218d7a889453897afa72be",
        "repo": "ruby/ruby",
        "commit_url": "https://github.com/ruby/ruby/commit/2d5f7e5e17ef2a05b4218d7a889453897afa72be",
        "files": [
          "ChangeLog",
          "lib/uri/generic.rb",
          "test/uri/test_generic.rb",
          "version.h"
        ],
        "message": "merge revision(s) r48666: [Backport #10875]\n\n\t* lib/uri/generic.rb (URI::Generic.build):\n\t  use hostname= to detect and wrap IPv6 hosts.\n\t  Build is accepting URI components and users may not expect\n\t  that a host component needs to be wrapped with square brackets\n\t  since it's not providing a URI.\n\t  Note: initialize with arg_check => true does not wrap IPv6 hosts.\n\t  by Joe Rafaniello <jrafanie@redhat.com>\n\t  https://github.com/ruby/ruby/pull/765 fix GH-765\n\n\t* test/uri/test_generic.rb: Add more tests\n\n\ngit-svn-id: svn+ssh://ci.ruby-lang.org/ruby/branches/ruby_2_1@49907 b2dd03c8-39d4-4d8f-98ff-823fe69b080e",
        "before_after_code_files": [
          "lib/uri/generic.rb||lib/uri/generic.rb",
          "test/uri/test_generic.rb||test/uri/test_generic.rb",
          "version.h||version.h"
        ]
      },
      "candidate_patch_features": {
        "candidate_earlier_than_patch": 1,
        "same_branch_evolution": 1,
        "olp_code_files": {
          "patch": [
            "version.h||version.h"
          ],
          "candidate": [
            "version.h||version.h"
          ]
        }
      },
      "candidate_diff": {
        "lib/uri/generic.rb||lib/uri/generic.rb": [
          "File: lib/uri/generic.rb -> lib/uri/generic.rb",
          "--- Hunk 1 ---",
          "[Context before]",
          "192:       if arg_check",
          "193:         self.scheme = scheme",
          "194:         self.userinfo = userinfo",
          "196:         self.port = port",
          "197:         self.path = path",
          "198:         self.query = query",
          "",
          "[Removed Lines]",
          "195:         self.host = host",
          "",
          "[Added Lines]",
          "195:         self.hostname = host",
          "",
          "---------------"
        ],
        "test/uri/test_generic.rb||test/uri/test_generic.rb": [
          "File: test/uri/test_generic.rb -> test/uri/test_generic.rb",
          "--- Hunk 1 ---",
          "[Context before]",
          "741:   end",
          "743:   def test_build",
          "745:   end",
          "747:   def test_build2",
          "750:   end",
          "752:   # 192.0.2.0/24 is TEST-NET.  [RFC3330]",
          "",
          "[Removed Lines]",
          "744:     URI::Generic.build(['http', nil, 'example.com', 80, nil, '/foo', nil, nil, nil])",
          "748:     URI::Generic.build2(path: \"/foo bar/baz\")",
          "749:     URI::Generic.build2(['http', nil, 'example.com', 80, nil, '/foo bar' , nil, nil, nil])",
          "",
          "[Added Lines]",
          "744:     u = URI::Generic.build(['http', nil, 'example.com', 80, nil, '/foo', nil, nil, nil])",
          "745:     assert_equal('http://example.com:80/foo', u.to_s)",
          "747:     u = URI::Generic.build(:scheme => \"http\", :host => \"::1\", :path => \"/bar/baz\")",
          "748:     assert_equal(\"http://[::1]/bar/baz\", u.to_s)",
          "749:     assert_equal(\"[::1]\", u.host)",
          "750:     assert_equal(\"::1\", u.hostname)",
          "752:     u = URI::Generic.build(:scheme => \"http\", :host => \"[::1]\", :path => \"/bar/baz\")",
          "753:     assert_equal(\"http://[::1]/bar/baz\", u.to_s)",
          "754:     assert_equal(\"[::1]\", u.host)",
          "755:     assert_equal(\"::1\", u.hostname)",
          "759:     u = URI::Generic.build2(path: \"/foo bar/baz\")",
          "760:     assert_equal('/foo%20bar/baz', u.to_s)",
          "762:     u = URI::Generic.build2(['http', nil, 'example.com', 80, nil, '/foo bar' , nil, nil, nil])",
          "763:     assert_equal('http://example.com:80/foo%20bar', u.to_s)",
          "",
          "---------------"
        ],
        "version.h||version.h": [
          "File: version.h -> version.h",
          "--- Hunk 1 ---",
          "[Context before]",
          "1: #define RUBY_VERSION \"2.1.5\"",
          "5: #define RUBY_RELEASE_YEAR 2015",
          "6: #define RUBY_RELEASE_MONTH 3",
          "9: #include \"ruby/version.h\"",
          "",
          "[Removed Lines]",
          "2: #define RUBY_RELEASE_DATE \"2015-03-03\"",
          "3: #define RUBY_PATCHLEVEL 306",
          "7: #define RUBY_RELEASE_DAY 3",
          "",
          "[Added Lines]",
          "2: #define RUBY_RELEASE_DATE \"2015-03-09\"",
          "3: #define RUBY_PATCHLEVEL 307",
          "7: #define RUBY_RELEASE_DAY 9",
          "",
          "---------------"
        ]
      }
    },
    {
      "candidate_hash": "df557d28ad2cd9bc38891e8f77c5ed45a0612681",
      "candidate_info": {
        "commit_hash": "df557d28ad2cd9bc38891e8f77c5ed45a0612681",
        "repo": "ruby/ruby",
        "commit_url": "https://github.com/ruby/ruby/commit/df557d28ad2cd9bc38891e8f77c5ed45a0612681",
        "files": [
          "ChangeLog",
          "enc/trans/JIS/JISX0201-KANA%UCS.src",
          "enc/trans/JIS/JISX0208@1990%UCS.src",
          "enc/trans/JIS/JISX0212%UCS.src",
          "enc/trans/JIS/UCS%JISX0201-KANA.src",
          "enc/trans/JIS/UCS%JISX0208@1990.src",
          "enc/trans/JIS/UCS%JISX0212.src",
          "tool/transcode-tblgen.rb",
          "version.h"
        ],
        "message": "merge revision(s) 54129,54130,54132: [Backport #11844]\n\n\t* enc/trans/JIS: update Unicode's notice. [Bug #11844]\n\n\ngit-svn-id: svn+ssh://ci.ruby-lang.org/ruby/branches/ruby_2_1@54283 b2dd03c8-39d4-4d8f-98ff-823fe69b080e",
        "before_after_code_files": [
          "enc/trans/JIS/JISX0201-KANA%UCS.src||enc/trans/JIS/JISX0201-KANA%UCS.src",
          "enc/trans/JIS/JISX0208@1990%UCS.src||enc/trans/JIS/JISX0208@1990%UCS.src",
          "enc/trans/JIS/JISX0212%UCS.src||enc/trans/JIS/JISX0212%UCS.src",
          "enc/trans/JIS/UCS%JISX0201-KANA.src||enc/trans/JIS/UCS%JISX0201-KANA.src",
          "enc/trans/JIS/UCS%JISX0208@1990.src||enc/trans/JIS/UCS%JISX0208@1990.src",
          "enc/trans/JIS/UCS%JISX0212.src||enc/trans/JIS/UCS%JISX0212.src",
          "tool/transcode-tblgen.rb||tool/transcode-tblgen.rb",
          "version.h||version.h"
        ]
      },
      "candidate_patch_features": {
        "candidate_earlier_than_patch": 0,
        "same_branch_evolution": 1,
        "olp_code_files": {
          "patch": [
            "version.h||version.h"
          ],
          "candidate": [
            "version.h||version.h"
          ]
        }
      },
      "candidate_diff": {
        "enc/trans/JIS/JISX0201-KANA%UCS.src||enc/trans/JIS/JISX0201-KANA%UCS.src": [
          "File: enc/trans/JIS/JISX0201-KANA%UCS.src -> enc/trans/JIS/JISX0201-KANA%UCS.src",
          "--- Hunk 1 ---",
          "[Context before]",
          "12: # This mapping data is made from the mapping data provided by Unicode, Inc.",
          "13: # Original notice:",
          "14: #",
          "15: # Name:             JIS X 0201 (1976) to Unicode 1.1 Table",
          "16: # Unicode version:  1.1",
          "18: # Table format:     Format A",
          "36: #",
          "37: # General notes:",
          "38: #",
          "",
          "[Removed Lines]",
          "17: # Table version:    0.9",
          "19: # Date:             8 March 1994",
          "20: #",
          "21: # Copyright (c) 1991-1994 Unicode, Inc.  All Rights reserved.",
          "22: #",
          "23: # This file is provided as-is by Unicode, Inc. (The Unicode Consortium).",
          "24: # No claims are made as to fitness for any particular purpose.  No",
          "25: # warranties of any kind are expressed or implied.  The recipient",
          "26: # agrees to determine applicability of information provided.  If this",
          "27: # file has been provided on magnetic media by Unicode, Inc., the sole",
          "28: # remedy for any claim will be exchange of defective media within 90",
          "29: # days of receipt.",
          "30: #",
          "31: # Recipient is granted the right to make copies in any form for",
          "32: # internal distribution and to freely use the information supplied",
          "33: # in the creation of products supporting Unicode.  Unicode, Inc.",
          "34: # specifically excludes the right to re-distribute this file directly",
          "35: # to third parties or other organizations whether for profit or not.",
          "",
          "[Added Lines]",
          "15: # JIS0201.TXT",
          "16: # Date: 2015-12-02 23:49:00 GMT [KW]",
          "17: # \u00a9 2015 Unicode\u00ae, Inc.",
          "18: # For terms of use, see http://www.unicode.org/terms_of_use.html",
          "19: #",
          "22: # Table version:    2.0",
          "24: # Date:             2011 October 14 (header updated: 2015 December 02)",
          "",
          "---------------",
          "--- Hunk 2 ---",
          "[Context before]",
          "42: # same as those used by actual products, nor may they be the best suited",
          "43: # for all uses.  For more information on the mappings between various code",
          "44: # pages incorporating the repertoire of JIS X 0201 and Unicode, consult the",
          "54: #",
          "55: #",
          "56: # Format:  Three tab-separated columns",
          "",
          "[Removed Lines]",
          "45: # VENDORS mapping data.  Normative information on the mapping between",
          "46: # JIS X 0201 and Unicode may be found in the Unihan.txt file in the",
          "47: # latest Unicode Character Database.",
          "48: #",
          "49: # If you have carefully considered the fact that the mappings in",
          "50: # this table are only one possible set of mappings between JIS X 0201 and",
          "51: # Unicode and have no normative status, but still feel that you",
          "52: # have located an error in the table that requires fixing, you may",
          "53: # report any such error to errata@unicode.org.",
          "",
          "[Added Lines]",
          "34: # VENDORS mapping data.",
          "",
          "---------------",
          "--- Hunk 3 ---",
          "[Context before]",
          "60: #",
          "61: # The entries are in JIS order",
          "62: #",
          "63: #",
          "64: 0x21 = 0xFF61",
          "65: 0x22 = 0xFF62",
          "",
          "[Removed Lines]",
          "[None]",
          "",
          "[Added Lines]",
          "44: #  Revision History:",
          "45: #",
          "46: #    [v2.0, 2015 December 02]",
          "47: #    updates to copyright notice and terms of use",
          "48: #    no changes to character mappings",
          "49: #",
          "50: #    [v1.0, 2011 October 14]",
          "51: #    Updated terms of use to current wording.",
          "52: #    Updated contact information.",
          "53: #    No changes to the mapping data.",
          "54: #",
          "55: #    [v0.9, 8 March 1994]",
          "56: #    First release.",
          "57: #",
          "58: #  Use the Unicode reporting form <http://www.unicode.org/reporting.html>",
          "59: #    for any questions or comments or to report errors in the data.",
          "",
          "---------------"
        ],
        "enc/trans/JIS/JISX0208@1990%UCS.src||enc/trans/JIS/JISX0208@1990%UCS.src": [
          "File: enc/trans/JIS/JISX0208@1990%UCS.src -> enc/trans/JIS/JISX0208@1990%UCS.src",
          "--- Hunk 1 ---",
          "[Context before]",
          "12: # This mapping data is made from the mapping data provided by Unicode, Inc.",
          "13: # Original notice:",
          "14: #",
          "15: # Name:             JIS X 0208 (1990) to Unicode",
          "16: # Unicode version:  1.1",
          "18: # Table format:     Format A",
          "36: #",
          "37: # General notes:",
          "38: #",
          "",
          "[Removed Lines]",
          "17: # Table version:    0.9",
          "19: # Date:             8 March 1994",
          "20: #",
          "21: # Copyright (c) 1991-1994 Unicode, Inc.  All Rights reserved.",
          "22: #",
          "23: # This file is provided as-is by Unicode, Inc. (The Unicode Consortium).",
          "24: # No claims are made as to fitness for any particular purpose.  No",
          "25: # warranties of any kind are expressed or implied.  The recipient",
          "26: # agrees to determine applicability of information provided.  If this",
          "27: # file has been provided on magnetic media by Unicode, Inc., the sole",
          "28: # remedy for any claim will be exchange of defective media within 90",
          "29: # days of receipt.",
          "30: #",
          "31: # Recipient is granted the right to make copies in any form for",
          "32: # internal distribution and to freely use the information supplied",
          "33: # in the creation of products supporting Unicode.  Unicode, Inc.",
          "34: # specifically excludes the right to re-distribute this file directly",
          "35: # to third parties or other organizations whether for profit or not.",
          "",
          "[Added Lines]",
          "15: #",
          "16: # JIS0208.TXT",
          "17: # Date: 2015-12-02 23:50:00 GMT [KW]",
          "18: # \u00a9 2015 Unicode\u00ae, Inc.",
          "19: # For terms of use, see http://www.unicode.org/terms_of_use.html",
          "20: #",
          "23: # Table version:    2.0",
          "25: # Date:             2011 October 14 (header updated: 2015 December 02)",
          "",
          "---------------",
          "--- Hunk 2 ---",
          "[Context before]",
          "42: # same as those used by actual products, nor may they be the best suited",
          "43: # for all uses.  For more information on the mappings between various code",
          "44: # pages incorporating the repertoire of JIS X 0208 (1990) and Unicode, consult the",
          "54: #",
          "55: #",
          "56: # Format:  Four tab-separated columns",
          "",
          "[Removed Lines]",
          "45: # VENDORS mapping data.  Normative information on the mapping between",
          "46: # JIS X 0208 (1990) and Unicode may be found in the Unihan.txt file in the",
          "47: # latest Unicode Character Database.",
          "48: #",
          "49: # If you have carefully considered the fact that the mappings in",
          "50: # this table are only one possible set of mappings between JIS X 0208 (1990)",
          "51: # and Unicode and have no normative status, but still feel that you",
          "52: # have located an error in the table that requires fixing, you may",
          "53: # report any such error to errata@unicode.org.",
          "",
          "[Added Lines]",
          "35: # VENDORS mapping data.",
          "",
          "---------------",
          "--- Hunk 3 ---",
          "[Context before]",
          "77: #   the kuten form.  For example, 0x2121 -> 0x0101 -> 0101;",
          "78: #   0x7426 -> 0x5406 -> 8406",
          "79: #",
          "83: #",
          "85: #",
          "86: #",
          "87: # NetBSD specific modification:",
          "88: # 2003-08-18 : change the conversion for reverse solidus (0x2140).",
          "",
          "[Removed Lines]",
          "80: #   The kanji mappings are a normative part of ISO/IEC 10646.  The",
          "81: #       non-kanji mappings are provisional, pending definition of",
          "82: #       official mappings by Japanese standards bodies",
          "84: # Any comments or problems, contact <John_Jenkins@taligent.com>",
          "",
          "[Added Lines]",
          "62: #  Revision History:",
          "63: #",
          "64: #    [v2.0, 2015 December 02]",
          "65: #    updates to copyright notice and terms of use",
          "66: #    no changes to character mappings",
          "67: #",
          "68: #    [v1.0, 2011 October 14]",
          "69: #    Updated terms of use to current wording.",
          "70: #    Updated contact information.",
          "71: #    No changes to the mapping data.",
          "73: #    [v0.9, 8 March 1994]",
          "74: #    First release.",
          "76: #  Use the Unicode reporting form <http://www.unicode.org/reporting.html>",
          "77: #    for any questions or comments or to report errors in the data.",
          "",
          "---------------"
        ],
        "enc/trans/JIS/JISX0212%UCS.src||enc/trans/JIS/JISX0212%UCS.src": [
          "File: enc/trans/JIS/JISX0212%UCS.src -> enc/trans/JIS/JISX0212%UCS.src",
          "--- Hunk 1 ---",
          "[Context before]",
          "12: # This mapping data is made from the mapping data provided by Unicode, Inc.",
          "13: # Original notice:",
          "14: #",
          "15: # Name:             JIS X 0212 (1990) to Unicode",
          "16: # Unicode version:  1.1",
          "18: # Table format:     Format A",
          "36: #",
          "37: # General notes:",
          "38: #",
          "",
          "[Removed Lines]",
          "17: # Table version:    0.9",
          "19: # Date:             8 March 1994",
          "20: #",
          "21: # Copyright (c) 1991-1994 Unicode, Inc.  All Rights reserved.",
          "22: #",
          "23: # This file is provided as-is by Unicode, Inc. (The Unicode Consortium).",
          "24: # No claims are made as to fitness for any particular purpose.  No",
          "25: # warranties of any kind are expressed or implied.  The recipient",
          "26: # agrees to determine applicability of information provided.  If this",
          "27: # file has been provided on magnetic media by Unicode, Inc., the sole",
          "28: # remedy for any claim will be exchange of defective media within 90",
          "29: # days of receipt.",
          "30: #",
          "31: # Recipient is granted the right to make copies in any form for",
          "32: # internal distribution and to freely use the information supplied",
          "33: # in the creation of products supporting Unicode.  Unicode, Inc.",
          "34: # specifically excludes the right to re-distribute this file directly",
          "35: # to third parties or other organizations whether for profit or not.",
          "",
          "[Added Lines]",
          "15: # JIS0212.TXT",
          "16: # Date: 2015-12-02 23:51:00 GMT [KW]",
          "17: # \u00a9 2015 Unicode\u00ae, Inc.",
          "18: # For terms of use, see http://www.unicode.org/terms_of_use.html",
          "19: #",
          "22: # Table version:    2.0",
          "24: # Date:             2011 October 14 (header updated: 2015 December 02)",
          "",
          "---------------",
          "--- Hunk 2 ---",
          "[Context before]",
          "42: # same as those used by actual products, nor may they be the best suited",
          "43: # for all uses.  For more information on the mappings between various code",
          "44: # pages incorporating the repertoire of JIS X 0212 and Unicode, consult the",
          "54: #",
          "55: #",
          "56: # Format:  Three tab-separated columns",
          "",
          "[Removed Lines]",
          "45: # VENDORS mapping data.  Normative information on the mapping between",
          "46: # JIS X 0212 and Unicode may be found in the Unihan.txt file in the",
          "47: # latest Unicode Character Database.",
          "48: #",
          "49: # If you have carefully considered the fact that the mappings in",
          "50: # this table are only one possible set of mappings between JIS X 0212 and",
          "51: # Unicode and have no normative status, but still feel that you",
          "52: # have located an error in the table that requires fixing, you may",
          "53: # report any such error to errata@unicode.org.",
          "",
          "[Added Lines]",
          "34: # VENDORS mapping data.",
          "",
          "---------------",
          "--- Hunk 3 ---",
          "[Context before]",
          "76: #   the kuten form.  For example, 0x2121 -> 0x0101 -> 0101;",
          "77: #   0x6D63 -> 0x4D43 -> 7767",
          "78: #",
          "85: # Notes:",
          "86: #",
          "87: # 1. JIS X 0212 apparently unified the following two symbols",
          "88: #    into a single character at 0x2922:",
          "90: #    LATIN CAPITAL LETTER D WITH STROKE",
          "91: #    LATIN CAPITAL LETTER ETH",
          "92: #",
          "",
          "[Removed Lines]",
          "79: #   The kanji mappings are a normative part of ISO/IEC 10646.  The",
          "80: #       non-kanji mappings are provisional, pending definition of",
          "81: #       official mappings by Japanese standards bodies",
          "82: #",
          "83: # Any comments or problems, contact <John_Jenkins@taligent.com>",
          "84: #",
          "89: #",
          "",
          "[Added Lines]",
          "64: #",
          "",
          "---------------",
          "--- Hunk 4 ---",
          "[Context before]",
          "96: #    0x2922 and 0x2942 are intended to be a capital/small pair.",
          "97: #    Consequently, in the Unicode mapping, 0x2922 is treated as",
          "98: #    LATIN CAPITAL LETTER D WITH STROKE.",
          "100: 0x222F = 0x02D8",
          "101: 0x2230 = 0x02C7",
          "102: 0x2231 = 0x00B8",
          "",
          "[Removed Lines]",
          "99: #",
          "",
          "[Added Lines]",
          "74: #",
          "75: #  Revision History:",
          "76: #",
          "77: #    [v2.0, 2015 December 02]",
          "78: #    updates to copyright notice and terms of use",
          "79: #    no changes to character mappings",
          "80: #",
          "81: #    [v1.0, 2011 October 14]",
          "82: #    Updated terms of use to current wording.",
          "83: #    Updated contact information.",
          "84: #    No changes to the mapping data.",
          "85: #",
          "86: #    [v0.9, 8 March 1994]",
          "87: #    First release.",
          "88: #",
          "89: #  Use the Unicode reporting form <http://www.unicode.org/reporting.html>",
          "90: #    for any questions or comments or to report errors in the data.",
          "91: #",
          "",
          "---------------"
        ],
        "enc/trans/JIS/UCS%JISX0201-KANA.src||enc/trans/JIS/UCS%JISX0201-KANA.src": [
          "File: enc/trans/JIS/UCS%JISX0201-KANA.src -> enc/trans/JIS/UCS%JISX0201-KANA.src",
          "--- Hunk 1 ---",
          "[Context before]",
          "12: # This mapping data is made from the mapping data provided by Unicode, Inc.",
          "13: # Original notice:",
          "14: #",
          "15: # Name:             JIS X 0201 (1976) to Unicode 1.1 Table",
          "16: # Unicode version:  1.1",
          "18: # Table format:     Format A",
          "36: #",
          "37: # General notes:",
          "38: #",
          "",
          "[Removed Lines]",
          "17: # Table version:    0.9",
          "19: # Date:             8 March 1994",
          "20: #",
          "21: # Copyright (c) 1991-1994 Unicode, Inc.  All Rights reserved.",
          "22: #",
          "23: # This file is provided as-is by Unicode, Inc. (The Unicode Consortium).",
          "24: # No claims are made as to fitness for any particular purpose.  No",
          "25: # warranties of any kind are expressed or implied.  The recipient",
          "26: # agrees to determine applicability of information provided.  If this",
          "27: # file has been provided on magnetic media by Unicode, Inc., the sole",
          "28: # remedy for any claim will be exchange of defective media within 90",
          "29: # days of receipt.",
          "30: #",
          "31: # Recipient is granted the right to make copies in any form for",
          "32: # internal distribution and to freely use the information supplied",
          "33: # in the creation of products supporting Unicode.  Unicode, Inc.",
          "34: # specifically excludes the right to re-distribute this file directly",
          "35: # to third parties or other organizations whether for profit or not.",
          "",
          "[Added Lines]",
          "15: # JIS0201.TXT",
          "16: # Date: 2015-12-02 23:49:00 GMT [KW]",
          "17: # \u00a9 2015 Unicode\u00ae, Inc.",
          "18: # For terms of use, see http://www.unicode.org/terms_of_use.html",
          "19: #",
          "22: # Table version:    2.0",
          "24: # Date:             2011 October 14 (header updated: 2015 December 02)",
          "",
          "---------------",
          "--- Hunk 2 ---",
          "[Context before]",
          "42: # same as those used by actual products, nor may they be the best suited",
          "43: # for all uses.  For more information on the mappings between various code",
          "44: # pages incorporating the repertoire of JIS X 0201 and Unicode, consult the",
          "54: #",
          "55: #",
          "56: # Format:  Three tab-separated columns",
          "",
          "[Removed Lines]",
          "45: # VENDORS mapping data.  Normative information on the mapping between",
          "46: # JIS X 0201 and Unicode may be found in the Unihan.txt file in the",
          "47: # latest Unicode Character Database.",
          "48: #",
          "49: # If you have carefully considered the fact that the mappings in",
          "50: # this table are only one possible set of mappings between JIS X 0201 and",
          "51: # Unicode and have no normative status, but still feel that you",
          "52: # have located an error in the table that requires fixing, you may",
          "53: # report any such error to errata@unicode.org.",
          "",
          "[Added Lines]",
          "34: # VENDORS mapping data.",
          "",
          "---------------",
          "--- Hunk 3 ---",
          "[Context before]",
          "60: #",
          "61: # The entries are in JIS order",
          "62: #",
          "63: #",
          "64: 0xFF61 = 0x21",
          "65: 0xFF62 = 0x22",
          "",
          "[Removed Lines]",
          "[None]",
          "",
          "[Added Lines]",
          "44: #  Revision History:",
          "45: #",
          "46: #    [v2.0, 2015 December 02]",
          "47: #    updates to copyright notice and terms of use",
          "48: #    no changes to character mappings",
          "49: #",
          "50: #    [v1.0, 2011 October 14]",
          "51: #    Updated terms of use to current wording.",
          "52: #    Updated contact information.",
          "53: #    No changes to the mapping data.",
          "54: #",
          "55: #    [v0.9, 8 March 1994]",
          "56: #    First release.",
          "57: #",
          "58: #  Use the Unicode reporting form <http://www.unicode.org/reporting.html>",
          "59: #    for any questions or comments or to report errors in the data.",
          "60: #",
          "",
          "---------------"
        ],
        "enc/trans/JIS/UCS%JISX0208@1990.src||enc/trans/JIS/UCS%JISX0208@1990.src": [
          "File: enc/trans/JIS/UCS%JISX0208@1990.src -> enc/trans/JIS/UCS%JISX0208@1990.src",
          "--- Hunk 1 ---",
          "[Context before]",
          "12: # This mapping data is made from the mapping data provided by Unicode, Inc.",
          "13: # Original notice:",
          "14: #",
          "15: # Name:             JIS X 0208 (1990) to Unicode",
          "16: # Unicode version:  1.1",
          "18: # Table format:     Format A",
          "36: #",
          "37: # General notes:",
          "38: #",
          "",
          "[Removed Lines]",
          "17: # Table version:    0.9",
          "19: # Date:             8 March 1994",
          "20: #",
          "21: # Copyright (c) 1991-1994 Unicode, Inc.  All Rights reserved.",
          "22: #",
          "23: # This file is provided as-is by Unicode, Inc. (The Unicode Consortium).",
          "24: # No claims are made as to fitness for any particular purpose.  No",
          "25: # warranties of any kind are expressed or implied.  The recipient",
          "26: # agrees to determine applicability of information provided.  If this",
          "27: # file has been provided on magnetic media by Unicode, Inc., the sole",
          "28: # remedy for any claim will be exchange of defective media within 90",
          "29: # days of receipt.",
          "30: #",
          "31: # Recipient is granted the right to make copies in any form for",
          "32: # internal distribution and to freely use the information supplied",
          "33: # in the creation of products supporting Unicode.  Unicode, Inc.",
          "34: # specifically excludes the right to re-distribute this file directly",
          "35: # to third parties or other organizations whether for profit or not.",
          "",
          "[Added Lines]",
          "15: # JIS0208.TXT",
          "16: # Date: 2015-12-02 23:50:00 GMT [KW]",
          "17: # \u00a9 2015 Unicode\u00ae, Inc.",
          "18: # For terms of use, see http://www.unicode.org/terms_of_use.html",
          "19: #",
          "22: # Table version:    2.0",
          "24: # Date:             2011 October 14 (header updated: 2015 December 02)",
          "",
          "---------------",
          "--- Hunk 2 ---",
          "[Context before]",
          "42: # same as those used by actual products, nor may they be the best suited",
          "43: # for all uses.  For more information on the mappings between various code",
          "44: # pages incorporating the repertoire of JIS X 0208 (1990) and Unicode, consult the",
          "54: #",
          "55: #",
          "56: # Format:  Four tab-separated columns",
          "",
          "[Removed Lines]",
          "45: # VENDORS mapping data.  Normative information on the mapping between",
          "46: # JIS X 0208 (1990) and Unicode may be found in the Unihan.txt file in the",
          "47: # latest Unicode Character Database.",
          "48: #",
          "49: # If you have carefully considered the fact that the mappings in",
          "50: # this table are only one possible set of mappings between JIS X 0208 (1990)",
          "51: # and Unicode and have no normative status, but still feel that you",
          "52: # have located an error in the table that requires fixing, you may",
          "53: # report any such error to errata@unicode.org.",
          "",
          "[Added Lines]",
          "34: # VENDORS mapping data.",
          "",
          "---------------",
          "--- Hunk 3 ---",
          "[Context before]",
          "77: #   the kuten form.  For example, 0x2121 -> 0x0101 -> 0101;",
          "78: #   0x7426 -> 0x5406 -> 8406",
          "79: #",
          "83: #",
          "85: #",
          "86: #",
          "87: # NetBSD specific modification:",
          "88: # 2003-08-18 : add U+FF3C -> 0x2140 conversion.",
          "",
          "[Removed Lines]",
          "80: #   The kanji mappings are a normative part of ISO/IEC 10646.  The",
          "81: #       non-kanji mappings are provisional, pending definition of",
          "82: #       official mappings by Japanese standards bodies",
          "84: # Any comments or problems, contact <John_Jenkins@taligent.com>",
          "",
          "[Added Lines]",
          "61: #  Revision History:",
          "62: #",
          "63: #    [v2.0, 2015 December 02]",
          "64: #    updates to copyright notice and terms of use",
          "65: #    no changes to character mappings",
          "66: #",
          "67: #    [v1.0, 2011 October 14]",
          "68: #    Updated terms of use to current wording.",
          "69: #    Updated contact information.",
          "70: #    No changes to the mapping data.",
          "72: #    [v0.9, 8 March 1994]",
          "73: #    First release.",
          "75: #  Use the Unicode reporting form <http://www.unicode.org/reporting.html>",
          "76: #    for any questions or comments or to report errors in the data.",
          "",
          "---------------"
        ],
        "enc/trans/JIS/UCS%JISX0212.src||enc/trans/JIS/UCS%JISX0212.src": [
          "File: enc/trans/JIS/UCS%JISX0212.src -> enc/trans/JIS/UCS%JISX0212.src",
          "--- Hunk 1 ---",
          "[Context before]",
          "12: # This mapping data is made from the mapping data provided by Unicode, Inc.",
          "13: # Original notice:",
          "14: #",
          "15: # Name:             JIS X 0212 (1990) to Unicode",
          "16: # Unicode version:  1.1",
          "18: # Table format:     Format A",
          "36: #",
          "37: # General notes:",
          "38: #",
          "",
          "[Removed Lines]",
          "17: # Table version:    0.9",
          "19: # Date:             8 March 1994",
          "20: #",
          "21: # Copyright (c) 1991-1994 Unicode, Inc.  All Rights reserved.",
          "22: #",
          "23: # This file is provided as-is by Unicode, Inc. (The Unicode Consortium).",
          "24: # No claims are made as to fitness for any particular purpose.  No",
          "25: # warranties of any kind are expressed or implied.  The recipient",
          "26: # agrees to determine applicability of information provided.  If this",
          "27: # file has been provided on magnetic media by Unicode, Inc., the sole",
          "28: # remedy for any claim will be exchange of defective media within 90",
          "29: # days of receipt.",
          "30: #",
          "31: # Recipient is granted the right to make copies in any form for",
          "32: # internal distribution and to freely use the information supplied",
          "33: # in the creation of products supporting Unicode.  Unicode, Inc.",
          "34: # specifically excludes the right to re-distribute this file directly",
          "35: # to third parties or other organizations whether for profit or not.",
          "",
          "[Added Lines]",
          "15: # JIS0212.TXT",
          "16: # Date: 2015-12-02 23:51:00 GMT [KW]",
          "17: # \u00a9 2015 Unicode\u00ae, Inc.",
          "18: # For terms of use, see http://www.unicode.org/terms_of_use.html",
          "19: #",
          "22: # Table version:    2.0",
          "24: # Date:             2011 October 14 (header updated: 2015 December 02)",
          "",
          "---------------",
          "--- Hunk 2 ---",
          "[Context before]",
          "42: # same as those used by actual products, nor may they be the best suited",
          "43: # for all uses.  For more information on the mappings between various code",
          "44: # pages incorporating the repertoire of JIS X 0212 and Unicode, consult the",
          "54: #",
          "55: #",
          "56: # Format:  Three tab-separated columns",
          "",
          "[Removed Lines]",
          "45: # VENDORS mapping data.  Normative information on the mapping between",
          "46: # JIS X 0212 and Unicode may be found in the Unihan.txt file in the",
          "47: # latest Unicode Character Database.",
          "48: #",
          "49: # If you have carefully considered the fact that the mappings in",
          "50: # this table are only one possible set of mappings between JIS X 0212 and",
          "51: # Unicode and have no normative status, but still feel that you",
          "52: # have located an error in the table that requires fixing, you may",
          "53: # report any such error to errata@unicode.org.",
          "",
          "[Added Lines]",
          "34: # VENDORS mapping data.",
          "",
          "---------------",
          "--- Hunk 3 ---",
          "[Context before]",
          "76: #   the kuten form.  For example, 0x2121 -> 0x0101 -> 0101;",
          "77: #   0x6D63 -> 0x4D43 -> 7767",
          "78: #",
          "85: # Notes:",
          "86: #",
          "87: # 1. JIS X 0212 apparently unified the following two symbols",
          "88: #    into a single character at 0x2922:",
          "90: #    LATIN CAPITAL LETTER D WITH STROKE",
          "91: #    LATIN CAPITAL LETTER ETH",
          "92: #",
          "",
          "[Removed Lines]",
          "79: #   The kanji mappings are a normative part of ISO/IEC 10646.  The",
          "80: #       non-kanji mappings are provisional, pending definition of",
          "81: #       official mappings by Japanese standards bodies",
          "82: #",
          "83: # Any comments or problems, contact <John_Jenkins@taligent.com>",
          "84: #",
          "89: #",
          "",
          "[Added Lines]",
          "64: #",
          "",
          "---------------",
          "--- Hunk 4 ---",
          "[Context before]",
          "97: #    Consequently, in the Unicode mapping, 0x2922 is treated as",
          "98: #    LATIN CAPITAL LETTER D WITH STROKE.",
          "99: #",
          "100: # Ruby specific modification:",
          "101: #     remove 0x007E to 0x2237 conversion.",
          "102: #",
          "",
          "[Removed Lines]",
          "[None]",
          "",
          "[Added Lines]",
          "75: #  Revision History:",
          "76: #",
          "77: #    [v2.0, 2015 December 02]",
          "78: #    updates to copyright notice and terms of use",
          "79: #    no changes to character mappings",
          "80: #",
          "81: #    [v1.0, 2011 October 14]",
          "82: #    Updated terms of use to current wording.",
          "83: #    Updated contact information.",
          "84: #    No changes to the mapping data.",
          "85: #",
          "86: #    [v0.9, 8 March 1994]",
          "87: #    First release.",
          "88: #",
          "89: #  Use the Unicode reporting form <http://www.unicode.org/reporting.html>",
          "90: #    for any questions or comments or to report errors in the data.",
          "91: #",
          "92: #",
          "",
          "---------------"
        ],
        "tool/transcode-tblgen.rb||tool/transcode-tblgen.rb": [
          "File: tool/transcode-tblgen.rb -> tool/transcode-tblgen.rb",
          "--- Hunk 1 ---",
          "[Context before]",
          "723:     path << \".src\"",
          "724:     path[path.rindex('/')] = '%'",
          "725:     STDERR.puts 'load mapsrc %s' % path if VERBOSE_MODE",
          "727:       f.each_line do |l|",
          "728:         break if /^BEGIN_MAP/ =~ l",
          "729:       end",
          "",
          "[Removed Lines]",
          "726:     open(path) do |f|",
          "",
          "[Added Lines]",
          "726:     open(path, 'rb') do |f|",
          "",
          "---------------"
        ],
        "version.h||version.h": [
          "File: version.h -> version.h",
          "--- Hunk 1 ---",
          "[Context before]",
          "1: #define RUBY_VERSION \"2.1.9\"",
          "2: #define RUBY_RELEASE_DATE \"2016-03-25\"",
          "5: #define RUBY_RELEASE_YEAR 2016",
          "6: #define RUBY_RELEASE_MONTH 3",
          "",
          "[Removed Lines]",
          "3: #define RUBY_PATCHLEVEL 480",
          "",
          "[Added Lines]",
          "3: #define RUBY_PATCHLEVEL 481",
          "",
          "---------------"
        ]
      }
    },
    {
      "candidate_hash": "682e86bebc5f118be2defe9ffea8c9106af153f2",
      "candidate_info": {
        "commit_hash": "682e86bebc5f118be2defe9ffea8c9106af153f2",
        "repo": "ruby/ruby",
        "commit_url": "https://github.com/ruby/ruby/commit/682e86bebc5f118be2defe9ffea8c9106af153f2",
        "files": [
          "ChangeLog",
          "ruby_atomic.h",
          "version.h"
        ],
        "message": "merge revision(s) 52892: [Backport #11775]\n\n\t* ruby_atomic.h (ATOMIC_SIZE_CAS): fix the argument order of\n\t  InterlockedCompareExchange64.  new value and then old value is\n\t  the last.\n\n\ngit-svn-id: svn+ssh://ci.ruby-lang.org/ruby/branches/ruby_2_1@52934 b2dd03c8-39d4-4d8f-98ff-823fe69b080e",
        "before_after_code_files": [
          "ruby_atomic.h||ruby_atomic.h",
          "version.h||version.h"
        ]
      },
      "candidate_patch_features": {
        "candidate_earlier_than_patch": 1,
        "same_branch_evolution": 1,
        "olp_code_files": {
          "patch": [
            "version.h||version.h"
          ],
          "candidate": [
            "version.h||version.h"
          ]
        }
      },
      "candidate_diff": {
        "ruby_atomic.h||ruby_atomic.h": [
          "File: ruby_atomic.h -> ruby_atomic.h",
          "--- Hunk 1 ---",
          "[Context before]",
          "81: #  define ATOMIC_SIZE_INC(var) InterlockedIncrement64(&(var))",
          "82: #  define ATOMIC_SIZE_DEC(var) InterlockedDecrement64(&(var))",
          "83: #  define ATOMIC_SIZE_EXCHANGE(var, val) InterlockedExchange64(&(var), (val))",
          "85: # else",
          "86: #  define ATOMIC_SIZE_ADD(var, val) InterlockedExchangeAdd((LONG *)&(var), (val))",
          "87: #  define ATOMIC_SIZE_SUB(var, val) InterlockedExchangeAdd((LONG *)&(var), -(LONG)(val))",
          "",
          "[Removed Lines]",
          "84: #  define ATOMIC_SIZE_CAS(var, oldval, val) InterlockedCompareExchange64(&(var), (oldval), (val))",
          "",
          "[Added Lines]",
          "84: #  define ATOMIC_SIZE_CAS(var, oldval, newval) InterlockedCompareExchange64(&(var), (newval), (oldval))",
          "",
          "---------------"
        ],
        "version.h||version.h": [
          "File: version.h -> version.h",
          "--- Hunk 1 ---",
          "[Context before]",
          "1: #define RUBY_VERSION \"2.1.8\"",
          "2: #define RUBY_RELEASE_DATE \"2015-12-08\"",
          "5: #define RUBY_RELEASE_YEAR 2015",
          "6: #define RUBY_RELEASE_MONTH 12",
          "",
          "[Removed Lines]",
          "3: #define RUBY_PATCHLEVEL 433",
          "",
          "[Added Lines]",
          "3: #define RUBY_PATCHLEVEL 434",
          "",
          "---------------"
        ]
      }
    },
    {
      "candidate_hash": "0399a3d47b4e784918f95a36c2987633c29f8690",
      "candidate_info": {
        "commit_hash": "0399a3d47b4e784918f95a36c2987633c29f8690",
        "repo": "ruby/ruby",
        "commit_url": "https://github.com/ruby/ruby/commit/0399a3d47b4e784918f95a36c2987633c29f8690",
        "files": [
          "ChangeLog",
          "range.c",
          "test/ruby/test_range.rb",
          "version.h"
        ],
        "message": "merge revision(s) 52868: [Backport #11767]\n\n\t* range.c (range_to_s): should be infected by the receiver.\n\t  str2 infects by appending.  [ruby-core:71811] [Bug #11767]\n\n\ngit-svn-id: svn+ssh://ci.ruby-lang.org/ruby/branches/ruby_2_1@52875 b2dd03c8-39d4-4d8f-98ff-823fe69b080e",
        "before_after_code_files": [
          "range.c||range.c",
          "test/ruby/test_range.rb||test/ruby/test_range.rb",
          "version.h||version.h"
        ]
      },
      "candidate_patch_features": {
        "candidate_earlier_than_patch": 1,
        "same_branch_evolution": 1,
        "olp_code_files": {
          "patch": [
            "version.h||version.h"
          ],
          "candidate": [
            "version.h||version.h"
          ]
        }
      },
      "candidate_diff": {
        "range.c||range.c": [
          "File: range.c -> range.c",
          "--- Hunk 1 ---",
          "[Context before]",
          "1078:     str = rb_str_dup(str);",
          "1079:     rb_str_cat(str, \"...\", EXCL(range) ? 3 : 2);",
          "1080:     rb_str_append(str, str2);",
          "1083:     return str;",
          "1084: }",
          "",
          "[Removed Lines]",
          "1081:     OBJ_INFECT(str, str2);",
          "",
          "[Added Lines]",
          "1081:     OBJ_INFECT(str, range);",
          "",
          "---------------",
          "--- Hunk 2 ---",
          "[Context before]",
          "1096:     str = rb_str_dup(str);",
          "1097:     rb_str_cat(str, \"...\", EXCL(range) ? 3 : 2);",
          "1098:     rb_str_append(str, str2);",
          "1101:     return str;",
          "1102: }",
          "",
          "[Removed Lines]",
          "1099:     OBJ_INFECT(str, str2);",
          "",
          "[Added Lines]",
          "1099:     OBJ_INFECT(str, range);",
          "",
          "---------------"
        ],
        "test/ruby/test_range.rb||test/ruby/test_range.rb": [
          "File: test/ruby/test_range.rb -> test/ruby/test_range.rb",
          "--- Hunk 1 ---",
          "[Context before]",
          "266:   def test_to_s",
          "267:     assert_equal(\"0..1\", (0..1).to_s)",
          "268:     assert_equal(\"0...1\", (0...1).to_s)",
          "269:   end",
          "271:   def test_inspect",
          "272:     assert_equal(\"0..1\", (0..1).inspect)",
          "273:     assert_equal(\"0...1\", (0...1).inspect)",
          "274:   end",
          "276:   def test_eqq",
          "",
          "[Removed Lines]",
          "[None]",
          "",
          "[Added Lines]",
          "270:     bug11767 = '[ruby-core:71811] [Bug #11767]'",
          "271:     assert_predicate((\"0\".taint..\"1\").to_s, :tainted?, bug11767)",
          "272:     assert_predicate((\"0\"..\"1\".taint).to_s, :tainted?, bug11767)",
          "273:     assert_predicate((\"0\"..\"1\").taint.to_s, :tainted?, bug11767)",
          "280:     bug11767 = '[ruby-core:71811] [Bug #11767]'",
          "281:     assert_predicate((\"0\".taint..\"1\").inspect, :tainted?, bug11767)",
          "282:     assert_predicate((\"0\"..\"1\".taint).inspect, :tainted?, bug11767)",
          "283:     assert_predicate((\"0\"..\"1\").taint.inspect, :tainted?, bug11767)",
          "",
          "---------------"
        ],
        "version.h||version.h": [
          "File: version.h -> version.h",
          "--- Hunk 1 ---",
          "[Context before]",
          "1: #define RUBY_VERSION \"2.1.8\"",
          "5: #define RUBY_RELEASE_YEAR 2015",
          "6: #define RUBY_RELEASE_MONTH 12",
          "9: #include \"ruby/version.h\"",
          "",
          "[Removed Lines]",
          "2: #define RUBY_RELEASE_DATE \"2015-12-02\"",
          "3: #define RUBY_PATCHLEVEL 431",
          "7: #define RUBY_RELEASE_DAY 2",
          "",
          "[Added Lines]",
          "2: #define RUBY_RELEASE_DATE \"2015-12-04\"",
          "3: #define RUBY_PATCHLEVEL 432",
          "7: #define RUBY_RELEASE_DAY 4",
          "",
          "---------------"
        ]
      }
    }
  ]
}