{
  "cve_id": "CVE-2019-19646",
  "cve_desc": "pragma.c in SQLite through 3.30.1 mishandles NOT NULL in an integrity_check PRAGMA command in certain cases of generated columns.",
  "repo": "sqlite/sqlite",
  "patch_hash": "ebd70eedd5d6e6a890a670b5ee874a5eae86b4dd",
  "patch_info": {
    "commit_hash": "ebd70eedd5d6e6a890a670b5ee874a5eae86b4dd",
    "repo": "sqlite/sqlite",
    "commit_url": "https://github.com/sqlite/sqlite/commit/ebd70eedd5d6e6a890a670b5ee874a5eae86b4dd",
    "files": [
      "manifest",
      "manifest.uuid",
      "src/pragma.c",
      "test/gencol1.test"
    ],
    "message": "Fix the NOT NULL verification logic in PRAGMA integrity_check so that it works for generated columns whose value is the result of a comparison operator. Ticket [bd8c280671ba44a7]\n\nFossilOrigin-Name: f3b39c71b88cb6721f443de56cdce4c08252453a5e340b00a2bd88dc10c42400",
    "before_after_code_files": [
      "manifest.uuid||manifest.uuid",
      "src/pragma.c||src/pragma.c",
      "test/gencol1.test||test/gencol1.test"
    ]
  },
  "patch_diff": {
    "manifest.uuid||manifest.uuid": [
      "File: manifest.uuid -> manifest.uuid",
      "--- Hunk 1 ---",
      "[Context before]",
      "[No context available]",
      "",
      "[Removed Lines]",
      "1: e3398c5ffb060b2b26334b8598e2c63953741e2d6f5124dbd6bdfc8e94742539",
      "",
      "[Added Lines]",
      "[None]",
      "",
      "---------------"
    ],
    "src/pragma.c||src/pragma.c": [
      "File: src/pragma.c -> src/pragma.c",
      "--- Hunk 1 ---",
      "[Context before]",
      "1596:           if( j==pTab->iPKey ) continue;",
      "1597:           if( pTab->aCol[j].notNull==0 ) continue;",
      "1598:           sqlite3ExprCodeGetColumnOfTable(v, pTab, iDataCur, j, 3);",
      "1600:           jmp2 = sqlite3VdbeAddOp1(v, OP_NotNull, 3); VdbeCoverage(v);",
      "1601:           zErr = sqlite3MPrintf(db, \"NULL value in %s.%s\", pTab->zName,",
      "1602:                               pTab->aCol[j].zName);",
      "",
      "[Removed Lines]",
      "1599:           sqlite3VdbeChangeP5(v, OPFLAG_TYPEOFARG);",
      "",
      "[Added Lines]",
      "1599:           if( sqlite3VdbeGetOp(v,-1)->opcode==OP_Column ){",
      "1600:             sqlite3VdbeChangeP5(v, OPFLAG_TYPEOFARG);",
      "1601:           }",
      "",
      "---------------"
    ],
    "test/gencol1.test||test/gencol1.test": [
      "File: test/gencol1.test -> test/gencol1.test",
      "--- Hunk 1 ---",
      "[Context before]",
      "328:   INSERT OR REPLACE INTO t0(c0, c1) VALUES (2, 1), (1, 0)",
      "329: } {1 {FOREIGN KEY constraint failed}}",
      "331: finish_test",
      "",
      "[Removed Lines]",
      "[None]",
      "",
      "[Added Lines]",
      "331: # 2019-12-09 ticket bd8c280671ba44a7",
      "332: # With generated columns, the sqlite3ExprGetColumnOfTable() routine might",
      "333: # generate a code sequence that does not end with OP_Column.  So check to",
      "334: # make sure that the last instruction generated is an OP_column prior to",
      "335: # applying the OPFLAG_TYPEOFARG optimization to NOT NULL checks in the",
      "336: # PRAGMA integrity_check code.",
      "337: #",
      "338: sqlite3 db :memory:",
      "339: do_execsql_test gencol1-12.10 {",
      "340:   CREATE TABLE t0 (c0, c1 NOT NULL AS (c0==0));",
      "341:   INSERT INTO t0(c0) VALUES (0);",
      "342:   PRAGMA integrity_check;",
      "343: } {ok}",
      "",
      "---------------"
    ]
  },
  "candidates": [
    {
      "candidate_hash": "e3664dcb4837e94f685606a00aa5da1d4f4c3d3d",
      "candidate_info": {
        "commit_hash": "e3664dcb4837e94f685606a00aa5da1d4f4c3d3d",
        "repo": "sqlite/sqlite",
        "commit_url": "https://github.com/sqlite/sqlite/commit/e3664dcb4837e94f685606a00aa5da1d4f4c3d3d",
        "files": [
          "manifest",
          "manifest.uuid",
          "src/test_demovfs.c"
        ],
        "message": "Fix minor problems in the test code in test_demovfs.c.\n\nFossilOrigin-Name: ca4ddfefc1be1afbf366d87c47f0dd1122350d7ab34ba60020c5babb64a654a4",
        "before_after_code_files": [
          "manifest.uuid||manifest.uuid",
          "src/test_demovfs.c||src/test_demovfs.c"
        ]
      },
      "candidate_patch_features": {
        "candidate_earlier_than_patch": 1,
        "same_branch_evolution": 1,
        "olp_code_files": {
          "patch": [
            "manifest.uuid||manifest.uuid"
          ],
          "candidate": [
            "manifest.uuid||manifest.uuid"
          ]
        }
      },
      "candidate_diff": {
        "manifest.uuid||manifest.uuid": [
          "File: manifest.uuid -> manifest.uuid",
          "--- Hunk 1 ---",
          "[Context before]",
          "[No context available]",
          "",
          "[Removed Lines]",
          "1: 0bbceebb126c94b5159079a341fa16e8424b7f2f6b9364561516964e871fb6e0",
          "",
          "[Added Lines]",
          "[None]",
          "",
          "---------------"
        ],
        "src/test_demovfs.c||src/test_demovfs.c": [
          "File: src/test_demovfs.c -> src/test_demovfs.c",
          "--- Hunk 1 ---",
          "[Context before]",
          "240:   if( nRead==iAmt ){",
          "241:     return SQLITE_OK;",
          "242:   }else if( nRead>=0 ){",
          "243:     return SQLITE_IOERR_SHORT_READ;",
          "244:   }",
          "",
          "[Removed Lines]",
          "[None]",
          "",
          "[Added Lines]",
          "243:     if( nRead<iAmt ){",
          "244:       memset(&((char*)zBuf)[nRead], 0, iAmt-nRead);",
          "245:     }",
          "",
          "---------------",
          "--- Hunk 2 ---",
          "[Context before]",
          "371: static int demoFileControl(sqlite3_file *pFile, int op, void *pArg){",
          "373: }",
          "",
          "[Removed Lines]",
          "372:   return SQLITE_OK;",
          "",
          "[Added Lines]",
          "375:   return SQLITE_NOTFOUND;",
          "",
          "---------------"
        ]
      }
    },
    {
      "candidate_hash": "df21659a40e9dcaaeb4faecb0d13704e359296f2",
      "candidate_info": {
        "commit_hash": "df21659a40e9dcaaeb4faecb0d13704e359296f2",
        "repo": "sqlite/sqlite",
        "commit_url": "https://github.com/sqlite/sqlite/commit/df21659a40e9dcaaeb4faecb0d13704e359296f2",
        "files": [
          "manifest",
          "manifest.uuid",
          "test/fuzzcheck.c"
        ],
        "message": "Improved automatic detection of dbsqlfuzz cases in fuzzcheck.\n\nFossilOrigin-Name: 1ef24e89c9630fd383ba32f5aefcf9c27907f27f5072f3537a1cfd75a093a8d7",
        "before_after_code_files": [
          "manifest.uuid||manifest.uuid",
          "test/fuzzcheck.c||test/fuzzcheck.c"
        ]
      },
      "candidate_patch_features": {
        "candidate_earlier_than_patch": 1,
        "same_branch_evolution": 1,
        "olp_code_files": {
          "patch": [
            "manifest.uuid||manifest.uuid"
          ],
          "candidate": [
            "manifest.uuid||manifest.uuid"
          ]
        }
      },
      "candidate_diff": {
        "manifest.uuid||manifest.uuid": [
          "File: manifest.uuid -> manifest.uuid",
          "--- Hunk 1 ---",
          "[Context before]",
          "[No context available]",
          "",
          "[Removed Lines]",
          "1: fb9074ff450a67feaa62ca61d19154de26d5c8a8d147409ee6d1fbd667b2914f",
          "",
          "[Added Lines]",
          "[None]",
          "",
          "---------------"
        ],
        "test/fuzzcheck.c||test/fuzzcheck.c": [
          "File: test/fuzzcheck.c -> test/fuzzcheck.c",
          "--- Hunk 1 ---",
          "[Context before]",
          "604:   if( iDiff > p->mxInterval ) p->mxInterval = iDiff;",
          "605:   p->nCb++;",
          "606:   if( rc==0 && p->mxCb>0 && p->mxCb<=p->nCb ) rc = 1;",
          "608:     printf(\"Timeout on progress callback %d\\n\", p->nCb);",
          "609:     fflush(stdout);",
          "610:     p->timeoutHit = 1;",
          "",
          "[Removed Lines]",
          "607:   if( rc && !p->timeoutHit && eVerbosity ){",
          "",
          "[Added Lines]",
          "607:   if( rc && !p->timeoutHit && eVerbosity>=2 ){",
          "",
          "---------------",
          "--- Hunk 2 ---",
          "[Context before]",
          "653:   sqlite3_stmt *pStmt;",
          "654:   while( isspace(zSql[0]) ) zSql++;",
          "655:   if( zSql[0]==0 ) return SQLITE_OK;",
          "657:     printf(\"RUNNING-SQL: [%s]\\n\", zSql);",
          "658:     fflush(stdout);",
          "659:   }",
          "660:   rc = sqlite3_prepare_v2(db, zSql, -1, &pStmt, 0);",
          "661:   if( rc==SQLITE_OK ){",
          "662:     while( (rc = sqlite3_step(pStmt))==SQLITE_ROW ){",
          "664:         int j;",
          "665:         for(j=0; j<sqlite3_column_count(pStmt); j++){",
          "666:           if( j ) printf(\",\");",
          "",
          "[Removed Lines]",
          "656:   if( eVerbosity>=3 ){",
          "663:       if( eVerbosity>=4 ){",
          "",
          "[Added Lines]",
          "656:   if( eVerbosity>=4 ){",
          "663:       if( eVerbosity>=5 ){",
          "",
          "---------------",
          "--- Hunk 3 ---",
          "[Context before]",
          "707:         printf(\"\\n\");",
          "708:         fflush(stdout);",
          "712:       printf(\"SQL-ERROR: (%d) %s\\n\", rc, sqlite3_errmsg(db));",
          "713:       fflush(stdout);",
          "714:     }",
          "716:     printf(\"SQL-ERROR (%d): %s\\n\", rc, sqlite3_errmsg(db));",
          "717:     fflush(stdout);",
          "",
          "[Removed Lines]",
          "711:     if( rc!=SQLITE_DONE && eVerbosity>=3 ){",
          "715:   }else if( eVerbosity>=3 ){",
          "",
          "[Added Lines]",
          "711:     if( rc!=SQLITE_DONE && eVerbosity>=4 ){",
          "715:   }else if( eVerbosity>=4 ){",
          "",
          "---------------",
          "--- Hunk 4 ---",
          "[Context before]",
          "745:   iSql = decodeDatabase((unsigned char*)aData, (int)nByte, &aDb, &nDb);",
          "746:   if( iSql<0 ) return 0;",
          "747:   nSql = nByte - iSql;",
          "749:     printf(",
          "750:       \"****** %d-byte input, %d-byte database, %d-byte script \"",
          "751:       \"******\\n\", (int)nByte, nDb, nSql);",
          "",
          "[Removed Lines]",
          "748:   if( eVerbosity>=2 ){",
          "",
          "[Added Lines]",
          "748:   if( eVerbosity>=3 ){",
          "",
          "---------------",
          "--- Hunk 5 ---",
          "[Context before]",
          "830:   if( rc!=SQLITE_OK ){",
          "831:     fprintf(stdout, \"sqlite3_close() returns %d\\n\", rc);",
          "832:   }",
          "834:     fprintf(stdout, \"Peak memory usages: %f MB\\n\",",
          "835:        sqlite3_memory_highwater(1) / 1000000.0);",
          "836:   }",
          "",
          "[Removed Lines]",
          "833:   if( eVerbosity ){",
          "",
          "[Added Lines]",
          "833:   if( eVerbosity>=2 ){",
          "",
          "---------------",
          "--- Hunk 6 ---",
          "[Context before]",
          "856: static int isDbSql(unsigned char *a, int n){",
          "857:   if( n>4 && memcmp(a,\"\\n--\\n\",4)==0 ) return 1;",
          "858:   while( n>0 && isspace(a[0]) ){ a++; n--; }",
          "860:   return 0;",
          "861: }",
          "",
          "[Removed Lines]",
          "859:   if( n>8 && memcmp(a,\"53514c69\",8)==0 ) return 1;",
          "",
          "[Added Lines]",
          "857:   unsigned char buf[12];",
          "858:   int i;",
          "861:   for(i=0; n>0 && i<8; n--, a++){",
          "862:     if( isxdigit(a[0]) ) buf[i++] = a[0];",
          "863:   }",
          "864:   if( i==8 && memcmp(buf,\"53514c69\",8)==0 ) return 1;",
          "",
          "---------------"
        ]
      }
    },
    {
      "candidate_hash": "7b8ab230dce94ccbca56a204589066bca1201d28",
      "candidate_info": {
        "commit_hash": "7b8ab230dce94ccbca56a204589066bca1201d28",
        "repo": "sqlite/sqlite",
        "commit_url": "https://github.com/sqlite/sqlite/commit/7b8ab230dce94ccbca56a204589066bca1201d28",
        "files": [
          "manifest",
          "manifest.uuid",
          "src/expr.c",
          "test/rowvalue.test"
        ],
        "message": "Merge the row-value fix from trunk.\n\nFossilOrigin-Name: 1fbd7438611174aa594485241c8cc2f4ea6d09c57ef2fc16c8995e8061fdfdd6",
        "before_after_code_files": [
          "manifest.uuid||manifest.uuid",
          "src/expr.c||src/expr.c",
          "test/rowvalue.test||test/rowvalue.test"
        ]
      },
      "candidate_patch_features": {
        "candidate_earlier_than_patch": 1,
        "same_branch_evolution": 1,
        "olp_code_files": {
          "patch": [
            "manifest.uuid||manifest.uuid"
          ],
          "candidate": [
            "manifest.uuid||manifest.uuid"
          ]
        }
      },
      "candidate_diff": {
        "manifest.uuid||manifest.uuid": [
          "File: manifest.uuid -> manifest.uuid",
          "--- Hunk 1 ---",
          "[Context before]",
          "[No context available]",
          "",
          "[Removed Lines]",
          "1: 1a54743a3d327efc8ecc45b9fde91ddfea3fca36408f9b753453c31f2e4cc69c",
          "",
          "[Added Lines]",
          "[None]",
          "",
          "---------------"
        ],
        "src/expr.c||src/expr.c": [
          "File: src/expr.c -> src/expr.c",
          "--- Hunk 1 ---",
          "[Context before]",
          "70:         pExpr->pLeft->x.pSelect->pEList->a[pExpr->iColumn].pExpr",
          "71:     );",
          "72:   }",
          "73:   return pExpr->affExpr;",
          "74: }",
          "",
          "[Removed Lines]",
          "[None]",
          "",
          "[Added Lines]",
          "73:   if( op==TK_VECTOR ){",
          "74:     return sqlite3ExprAffinity(pExpr->x.pList->a[0].pExpr);",
          "75:   }",
          "",
          "---------------"
        ],
        "test/rowvalue.test||test/rowvalue.test": [
          "File: test/rowvalue.test -> test/rowvalue.test",
          "--- Hunk 1 ---",
          "[Context before]",
          "586:   SELECT 3 FROM t0 WHERE (aa,1) <= (SELECT +bb,1);",
          "587: } {0 1 3}",
          "589: finish_test",
          "",
          "[Removed Lines]",
          "[None]",
          "",
          "[Added Lines]",
          "589: # 2019-10-22 Ticket 6ef984af8972c2eb",
          "590: do_execsql_test 24.100 {",
          "591:   DROP TABLE t0;",
          "592:   CREATE TABLE t0(c0 TEXT PRIMARY KEY);",
          "593:   INSERT INTO t0(c0) VALUES ('');",
          "594:   SELECT (t0.c0, TRUE) > (CAST(0 AS REAL), FALSE) FROM t0;",
          "595:   SELECT 2 FROM t0 WHERE (t0.c0, TRUE) > (CAST('' AS REAL), FALSE);",
          "596: } {1 2}",
          "",
          "---------------"
        ]
      }
    },
    {
      "candidate_hash": "a51ddb1ed7ae699d6fc2c49e3dbc3b3c15d49f00",
      "candidate_info": {
        "commit_hash": "a51ddb1ed7ae699d6fc2c49e3dbc3b3c15d49f00",
        "repo": "sqlite/sqlite",
        "commit_url": "https://github.com/sqlite/sqlite/commit/a51ddb1ed7ae699d6fc2c49e3dbc3b3c15d49f00",
        "files": [
          "manifest",
          "manifest.uuid",
          "src/resolve.c",
          "test/filter1.test",
          "test/window2.tcl",
          "test/window2.test",
          "test/window9.test"
        ],
        "message": "Fix a window-functions problem that could occur if an ORDER BY clause contains an alias for a window-function that is not a top-level expression.\n\nFossilOrigin-Name: 1cc6cf6407c6e25aeafeca379a93d0ad2614839c07fb3644e46926fce5f1cfab",
        "before_after_code_files": [
          "manifest.uuid||manifest.uuid",
          "src/resolve.c||src/resolve.c",
          "test/filter1.test||test/filter1.test",
          "test/window2.tcl||test/window2.tcl",
          "test/window2.test||test/window2.test",
          "test/window9.test||test/window9.test"
        ]
      },
      "candidate_patch_features": {
        "candidate_earlier_than_patch": 1,
        "same_branch_evolution": 1,
        "olp_code_files": {
          "patch": [
            "manifest.uuid||manifest.uuid"
          ],
          "candidate": [
            "manifest.uuid||manifest.uuid"
          ]
        }
      },
      "candidate_diff": {
        "manifest.uuid||manifest.uuid": [
          "File: manifest.uuid -> manifest.uuid",
          "--- Hunk 1 ---",
          "[Context before]",
          "[No context available]",
          "",
          "[Removed Lines]",
          "1: 36d35dbd5a80dc4a149ed7409cc4b43712622fc4c6a8915b4fbb62fd1d6b7763",
          "",
          "[Added Lines]",
          "[None]",
          "",
          "---------------"
        ],
        "src/resolve.c||src/resolve.c": [
          "File: src/resolve.c -> src/resolve.c",
          "--- Hunk 1 ---",
          "[Context before]",
          "96:       pExpr->u.zToken = sqlite3DbStrDup(db, pExpr->u.zToken);",
          "97:       pExpr->flags |= EP_MemToken;",
          "98:     }",
          "99:     sqlite3DbFree(db, pDup);",
          "100:   }",
          "101:   ExprSetProperty(pExpr, EP_Alias);",
          "",
          "[Removed Lines]",
          "[None]",
          "",
          "[Added Lines]",
          "99:     if( ExprHasProperty(pExpr, EP_WinFunc) ){",
          "100:       pExpr->y.pWin->pOwner = pExpr;",
          "101:     }",
          "",
          "---------------"
        ],
        "test/filter1.test||test/filter1.test": [
          "File: test/filter1.test -> test/filter1.test",
          "--- Hunk 1 ---",
          "[Context before]",
          "134:   SELECT a, c, max(b) FILTER (WHERE c='x') FROM t2 GROUP BY a;",
          "135: } {1 x 5 2 6 {}}",
          "137: finish_test",
          "",
          "[Removed Lines]",
          "[None]",
          "",
          "[Added Lines]",
          "137: #-------------------------------------------------------------------------",
          "138: reset_db",
          "139: do_execsql_test 4.0 {",
          "140:   CREATE TABLE t1(a, b, c);",
          "141:   INSERT INTO t1 VALUES('a', 0, 5);",
          "142:   INSERT INTO t1 VALUES('a', 1, 10);",
          "143:   INSERT INTO t1 VALUES('a', 0, 15);",
          "145:   INSERT INTO t1 VALUES('b', 0, 5);",
          "146:   INSERT INTO t1 VALUES('b', 1, 1000);",
          "147:   INSERT INTO t1 VALUES('b', 0, 5);",
          "149:   INSERT INTO t1 VALUES('c', 0, 1);",
          "150:   INSERT INTO t1 VALUES('c', 1, 2);",
          "151:   INSERT INTO t1 VALUES('c', 0, 3);",
          "152: }",
          "154: do_execsql_test 4.1 {",
          "155:   SELECT avg(c) FILTER (WHERE b!=1) AS h FROM t1 GROUP BY a ORDER BY h;",
          "156: } {2.0 5.0 10.0}",
          "157: do_execsql_test 4.2 {",
          "158:   SELECT avg(c) FILTER (WHERE b!=1) AS h FROM t1 GROUP BY a ORDER BY (h+1.0);",
          "159: } {2.0 5.0 10.0}",
          "160: do_execsql_test 4.3 {",
          "161:   SELECT a, avg(c) FILTER (WHERE b!=1) AS h FROM t1 GROUP BY a ORDER BY avg(c);",
          "162: } {c 2.0 a 10.0 b 5.0}",
          "163: do_execsql_test 4.4 {",
          "164:   SELECT a, avg(c) FILTER (WHERE b!=1) FROM t1 GROUP BY a ORDER BY 2",
          "165: } {c 2.0 b 5.0 a 10.0}",
          "",
          "---------------"
        ],
        "test/window2.tcl||test/window2.tcl": [
          "File: test/window2.tcl -> test/window2.tcl",
          "--- Hunk 1 ---",
          "[Context before]",
          "432:   SELECT count(distinct a) FILTER (WHERE b='odd') FROM t1",
          "433: }",
          "436: finish_test",
          "",
          "[Removed Lines]",
          "[None]",
          "",
          "[Added Lines]",
          "435: ==========",
          "437: execsql_test 5.0 {",
          "438:   DROP TABLE IF EXISTS t1;",
          "439:   CREATE TABLE t1(x INTEGER, y INTEGER);",
          "440:   INSERT INTO t1 VALUES(10, 1);",
          "441:   INSERT INTO t1 VALUES(20, 2);",
          "442:   INSERT INTO t1 VALUES(3, 3);",
          "443:   INSERT INTO t1 VALUES(2, 4);",
          "444:   INSERT INTO t1 VALUES(1, 5);",
          "445: }",
          "447: execsql_float_test 5.1 {",
          "448:   SELECT avg(x) OVER (ORDER BY y) AS z FROM t1 ORDER BY z;",
          "449: }",
          "",
          "---------------"
        ],
        "test/window2.test||test/window2.test": [
          "File: test/window2.test -> test/window2.test",
          "--- Hunk 1 ---",
          "[Context before]",
          "901:   SELECT count(distinct a) FILTER (WHERE b='odd') FROM t1",
          "902: } {3}",
          "904: finish_test",
          "",
          "[Removed Lines]",
          "[None]",
          "",
          "[Added Lines]",
          "904: #==========================================================================",
          "906: do_execsql_test 5.0 {",
          "907:   DROP TABLE IF EXISTS t1;",
          "908:   CREATE TABLE t1(x INTEGER, y INTEGER);",
          "909:   INSERT INTO t1 VALUES(10, 1);",
          "910:   INSERT INTO t1 VALUES(20, 2);",
          "911:   INSERT INTO t1 VALUES(3, 3);",
          "912:   INSERT INTO t1 VALUES(2, 4);",
          "913:   INSERT INTO t1 VALUES(1, 5);",
          "914: } {}",
          "917: do_test 5.1 {",
          "918:   set myres {}",
          "919:   foreach r [db eval {SELECT avg(x) OVER (ORDER BY y) AS z FROM t1 ORDER BY z;}] {",
          "920:     lappend myres [format %.4f [set r]]",
          "921:   }",
          "922:   set res2 {7.2000 8.7500 10.0000 11.0000 15.0000}",
          "923:   set i 0",
          "924:   foreach r [set myres] r2 [set res2] {",
          "925:     if {[set r]<([set r2]-0.0001) || [set r]>([set r2]+0.0001)} {",
          "926:       error \"list element [set i] does not match: got=[set r] expected=[set r2]\"",
          "927:     }",
          "928:     incr i",
          "929:   }",
          "930:   set {} {}",
          "931: } {}",
          "",
          "---------------"
        ],
        "test/window9.test||test/window9.test": [
          "File: test/window9.test -> test/window9.test",
          "--- Hunk 1 ---",
          "[Context before]",
          "195:   BETWEEN 1 AND 1;",
          "196: } {0}",
          "199: finish_test",
          "",
          "[Removed Lines]",
          "[None]",
          "",
          "[Added Lines]",
          "198: #-------------------------------------------------------------------------",
          "199: reset_db",
          "200: do_execsql_test 7.0 {",
          "201:   DROP TABLE IF EXISTS t1;",
          "202:   CREATE TABLE t1(x, y);",
          "203:   INSERT INTO t1 VALUES(10, 1);",
          "204:   INSERT INTO t1 VALUES(20, 2);",
          "205:   INSERT INTO t1 VALUES(3, 3);",
          "206:   INSERT INTO t1 VALUES(2, 4);",
          "207:   INSERT INTO t1 VALUES(1, 5);",
          "208: } {}",
          "211: do_execsql_test 7.1 {",
          "212:   SELECT avg(x) OVER (ORDER BY y) AS z FROM t1 ORDER BY z",
          "213: } {",
          "214:   7.2 8.75 10.0 11.0 15.0",
          "215: }",
          "217: do_execsql_test 7.2 {",
          "218:   SELECT avg(x) OVER (ORDER BY y) z FROM t1 ORDER BY (z IS y);",
          "219: } {",
          "220:   10.0 15.0 11.0 8.75 7.2",
          "221: }",
          "223: do_execsql_test 7.3 {",
          "224:   SELECT avg(x) OVER (ORDER BY y) z FROM t1 ORDER BY (y IS z);",
          "225: } {",
          "226:   10.0 15.0 11.0 8.75 7.2",
          "227: }",
          "229: do_execsql_test 7.4 {",
          "230:   SELECT avg(x) OVER (ORDER BY y) z FROM t1 ORDER BY z + 0.0;",
          "231: } {",
          "232:   7.2 8.75 10.0 11.0 15.0",
          "233: }",
          "",
          "---------------"
        ]
      }
    },
    {
      "candidate_hash": "f71a243a608acd56e1bf3c71abd1a3b62e9a40cf",
      "candidate_info": {
        "commit_hash": "f71a243a608acd56e1bf3c71abd1a3b62e9a40cf",
        "repo": "sqlite/sqlite",
        "commit_url": "https://github.com/sqlite/sqlite/commit/f71a243a608acd56e1bf3c71abd1a3b62e9a40cf",
        "files": [
          "Makefile.msc",
          "autoconf/Makefile.msc",
          "manifest",
          "manifest.uuid"
        ],
        "message": "Sync up warning related compiler options in the Makefiles for MSVC.\n\nFossilOrigin-Name: e77d48d1dd140967b18106044dd45e2ba6cd77b6aa5afa8bf3f0a9c16a50eec4",
        "before_after_code_files": [
          "Makefile.msc||Makefile.msc",
          "autoconf/Makefile.msc||autoconf/Makefile.msc",
          "manifest.uuid||manifest.uuid"
        ]
      },
      "candidate_patch_features": {
        "candidate_earlier_than_patch": 1,
        "same_branch_evolution": 1,
        "olp_code_files": {
          "patch": [
            "manifest.uuid||manifest.uuid"
          ],
          "candidate": [
            "manifest.uuid||manifest.uuid"
          ]
        }
      },
      "candidate_diff": {
        "Makefile.msc||Makefile.msc": [
          "File: Makefile.msc -> Makefile.msc",
          "--- Hunk 1 ---",
          "[Context before]",
          "73: !IFNDEF NO_WARN",
          "74: !IF $(USE_FULLWARN)!=0",
          "75: NO_WARN = -wd4054 -wd4055 -wd4100 -wd4127 -wd4130 -wd4152 -wd4189 -wd4206",
          "77: !ENDIF",
          "78: !ENDIF",
          "",
          "[Removed Lines]",
          "76: NO_WARN = $(NO_WARN) -wd4210 -wd4232 -wd4305 -wd4306 -wd4702 -wd4706",
          "",
          "[Added Lines]",
          "76: NO_WARN = $(NO_WARN) -wd4210 -wd4232 -wd4244 -wd4305 -wd4306 -wd4702 -wd4706",
          "",
          "---------------"
        ],
        "autoconf/Makefile.msc||autoconf/Makefile.msc": [
          "File: autoconf/Makefile.msc -> autoconf/Makefile.msc",
          "--- Hunk 1 ---",
          "[Context before]",
          "73: !IFNDEF NO_WARN",
          "74: !IF $(USE_FULLWARN)!=0",
          "75: NO_WARN = -wd4054 -wd4055 -wd4100 -wd4127 -wd4130 -wd4152 -wd4189 -wd4206",
          "77: !ENDIF",
          "78: !ENDIF",
          "",
          "[Removed Lines]",
          "76: NO_WARN = $(NO_WARN) -wd4210 -wd4232 -wd4305 -wd4306 -wd4702 -wd4706",
          "",
          "[Added Lines]",
          "76: NO_WARN = $(NO_WARN) -wd4210 -wd4232 -wd4244 -wd4305 -wd4306 -wd4702 -wd4706",
          "",
          "---------------"
        ],
        "manifest.uuid||manifest.uuid": [
          "File: manifest.uuid -> manifest.uuid",
          "--- Hunk 1 ---",
          "[Context before]",
          "[No context available]",
          "",
          "[Removed Lines]",
          "1: 857b2ba6d05d6f5a8cfdf269bae9005b25e1903ab9dc6b70546979d8c633f03b",
          "",
          "[Added Lines]",
          "[None]",
          "",
          "---------------"
        ]
      }
    }
  ]
}