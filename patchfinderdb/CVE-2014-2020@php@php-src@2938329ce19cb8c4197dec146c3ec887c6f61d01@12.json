{
  "cve_id": "CVE-2014-2020",
  "cve_desc": "ext/gd/gd.c in PHP 5.5.x before 5.5.9 does not check data types, which might allow remote attackers to obtain sensitive information by using a (1) string or (2) array data type in place of a numeric data type, as demonstrated by an imagecrop function call with a string for the x dimension value, a different vulnerability than CVE-2013-7226.",
  "repo": "php/php-src",
  "patch_hash": "2938329ce19cb8c4197dec146c3ec887c6f61d01",
  "patch_info": {
    "commit_hash": "2938329ce19cb8c4197dec146c3ec887c6f61d01",
    "repo": "php/php-src",
    "commit_url": "https://github.com/php/php-src/commit/2938329ce19cb8c4197dec146c3ec887c6f61d01",
    "files": [
      "NEWS",
      "ext/gd/gd.c",
      "ext/gd/tests/bug66356.phpt",
      "main/php_version.h"
    ],
    "message": "Fixed bug #66356 (Heap Overflow Vulnerability in imagecrop())\n\nAnd also fixed the bug: arguments are altered after some calls",
    "before_after_code_files": [
      "ext/gd/gd.c||ext/gd/gd.c",
      "ext/gd/tests/bug66356.phpt||ext/gd/tests/bug66356.phpt",
      "main/php_version.h||main/php_version.h"
    ]
  },
  "patch_diff": {
    "ext/gd/gd.c||ext/gd/gd.c": [
      "File: ext/gd/gd.c -> ext/gd/gd.c",
      "--- Hunk 1 ---",
      "[Context before]",
      "1538:    break;",
      "1539:   }",
      "1544:  }",
      "1546:  gdImageSetStyle(im, stylearr, index);",
      "",
      "[Removed Lines]",
      "1541:   convert_to_long_ex(item);",
      "1543:   stylearr[index++] = Z_LVAL_PP(item);",
      "",
      "[Added Lines]",
      "1541:   if (Z_TYPE_PP(item) != IS_LONG) {",
      "1542:    zval lval;",
      "1543:    lval = **item;",
      "1544:    zval_copy_ctor(&lval);",
      "1545:    convert_to_long(&lval);",
      "1546:    stylearr[index++] = Z_LVAL(lval);",
      "1547:   } else {",
      "1548:    stylearr[index++] = Z_LVAL_PP(item);",
      "1549:   }",
      "",
      "---------------",
      "--- Hunk 2 ---",
      "[Context before]",
      "3347:  for (i = 0; i < npoints; i++) {",
      "3348:   if (zend_hash_index_find(Z_ARRVAL_P(POINTS), (i * 2), (void **) &var) == SUCCESS) {",
      "3352:   }",
      "3353:   if (zend_hash_index_find(Z_ARRVAL_P(POINTS), (i * 2) + 1, (void **) &var) == SUCCESS) {",
      "3357:   }",
      "3358:  }",
      "",
      "[Removed Lines]",
      "3349:    SEPARATE_ZVAL((var));",
      "3350:    convert_to_long(*var);",
      "3351:    points[i].x = Z_LVAL_PP(var);",
      "3354:    SEPARATE_ZVAL(var);",
      "3355:    convert_to_long(*var);",
      "3356:    points[i].y = Z_LVAL_PP(var);",
      "",
      "[Added Lines]",
      "3355:    if (Z_TYPE_PP(var) != IS_LONG) {",
      "3356:     zval lval;",
      "3357:     lval = **var;",
      "3358:     zval_copy_ctor(&lval);",
      "3359:     convert_to_long(&lval);",
      "3360:     points[i].x = Z_LVAL(lval);",
      "3361:    } else {",
      "3362:     points[i].x = Z_LVAL_PP(var);",
      "3363:    }",
      "3366:    if (Z_TYPE_PP(var) != IS_LONG) {",
      "3367:     zval lval;",
      "3368:     lval = **var;",
      "3369:     zval_copy_ctor(&lval);",
      "3370:     convert_to_long(&lval);",
      "3371:     points[i].y = Z_LVAL(lval);",
      "3372:    } else {",
      "3373:     points[i].y = Z_LVAL_PP(var);",
      "3374:    }",
      "",
      "---------------",
      "--- Hunk 3 ---",
      "[Context before]",
      "4860:    for (j=0; j<3; j++) {",
      "4861:     if (zend_hash_index_find(Z_ARRVAL_PP(var), (j), (void **) &var2) == SUCCESS) {",
      "4865:     } else {",
      "4866:      php_error_docref(NULL TSRMLS_CC, E_WARNING, \"You must have a 3x3 matrix\");",
      "4867:      RETURN_FALSE;",
      "",
      "[Removed Lines]",
      "4862:      SEPARATE_ZVAL(var2);",
      "4863:      convert_to_double(*var2);",
      "4864:      matrix[i][j] = (float)Z_DVAL_PP(var2);",
      "",
      "[Added Lines]",
      "4880:      if (Z_TYPE_PP(var2) != IS_DOUBLE) {",
      "4881:       zval dval;",
      "4882:       dval = **var;",
      "4883:       zval_copy_ctor(&dval);",
      "4884:       convert_to_double(&dval);",
      "4885:       matrix[i][j] = (float)Z_DVAL(dval);",
      "4886:      } else {",
      "4887:       matrix[i][j] = (float)Z_DVAL_PP(var2);",
      "4888:      }",
      "",
      "---------------",
      "--- Hunk 4 ---",
      "[Context before]",
      "4954:  ZEND_FETCH_RESOURCE(im, gdImagePtr, &IM, -1, \"Image\", le_gd);",
      "4956:  if (zend_hash_find(HASH_OF(z_rect), \"x\", sizeof(\"x\"), (void **)&tmp) != FAILURE) {",
      "4958:  } else {",
      "4959:   php_error_docref(NULL TSRMLS_CC, E_WARNING, \"Missing x position\");",
      "4960:   RETURN_FALSE;",
      "4961:  }",
      "4963:  if (zend_hash_find(HASH_OF(z_rect), \"y\", sizeof(\"x\"), (void **)&tmp) != FAILURE) {",
      "4965:  } else {",
      "4966:   php_error_docref(NULL TSRMLS_CC, E_WARNING, \"Missing y position\");",
      "4967:   RETURN_FALSE;",
      "4968:  }",
      "4970:  if (zend_hash_find(HASH_OF(z_rect), \"width\", sizeof(\"width\"), (void **)&tmp) != FAILURE) {",
      "4972:  } else {",
      "4973:   php_error_docref(NULL TSRMLS_CC, E_WARNING, \"Missing width\");",
      "4974:   RETURN_FALSE;",
      "4975:  }",
      "4977:  if (zend_hash_find(HASH_OF(z_rect), \"height\", sizeof(\"height\"), (void **)&tmp) != FAILURE) {",
      "4979:  } else {",
      "4980:   php_error_docref(NULL TSRMLS_CC, E_WARNING, \"Missing height\");",
      "4981:   RETURN_FALSE;",
      "",
      "[Removed Lines]",
      "4957:   rect.x = Z_LVAL_PP(tmp);",
      "4964:   rect.y = Z_LVAL_PP(tmp);",
      "4971:   rect.width = Z_LVAL_PP(tmp);",
      "4978:   rect.height = Z_LVAL_PP(tmp);",
      "",
      "[Added Lines]",
      "4981:   if (Z_TYPE_PP(tmp) != IS_LONG) {",
      "4982:    zval lval;",
      "4983:    lval = **tmp;",
      "4984:    zval_copy_ctor(&lval);",
      "4985:    convert_to_long(&lval);",
      "4986:    rect.x = Z_LVAL(lval);",
      "4987:   } else {",
      "4988:    rect.x = Z_LVAL_PP(tmp);",
      "4989:   }",
      "4996:   if (Z_TYPE_PP(tmp) != IS_LONG) {",
      "4997:    zval lval;",
      "4998:    lval = **tmp;",
      "4999:    zval_copy_ctor(&lval);",
      "5000:    convert_to_long(&lval);",
      "5001:    rect.y = Z_LVAL(lval);",
      "5002:   } else {",
      "5003:    rect.y = Z_LVAL_PP(tmp);",
      "5004:   }",
      "5011:   if (Z_TYPE_PP(tmp) != IS_LONG) {",
      "5012:    zval lval;",
      "5013:    lval = **tmp;",
      "5014:    zval_copy_ctor(&lval);",
      "5015:    convert_to_long(&lval);",
      "5016:    rect.width = Z_LVAL(lval);",
      "5017:   } else {",
      "5018:    rect.width = Z_LVAL_PP(tmp);",
      "5019:   }",
      "5026:   if (Z_TYPE_PP(tmp) != IS_LONG) {",
      "5027:    zval lval;",
      "5028:    lval = **tmp;",
      "5029:    zval_copy_ctor(&lval);",
      "5030:    convert_to_long(&lval);",
      "5031:    rect.height = Z_LVAL(lval);",
      "5032:   } else {",
      "5033:    rect.height = Z_LVAL_PP(tmp);",
      "5034:   }",
      "",
      "---------------",
      "--- Hunk 5 ---",
      "[Context before]",
      "5124:      affine[i] = Z_DVAL_PP(zval_affine_elem);",
      "5125:      break;",
      "5126:     case IS_STRING:",
      "5129:      break;",
      "5130:     default:",
      "5131:      php_error_docref(NULL TSRMLS_CC, E_WARNING, \"Invalid type for element %i\", i);",
      "",
      "[Removed Lines]",
      "5127:      convert_to_double_ex(zval_affine_elem);",
      "5128:      affine[i] = Z_DVAL_PP(zval_affine_elem);",
      "",
      "[Added Lines]",
      "5183:      {",
      "5184:       zval dval;",
      "5185:       dval = **zval_affine_elem;",
      "5186:       zval_copy_ctor(&dval);",
      "5187:       convert_to_double(&dval);",
      "5188:       affine[i] = Z_DVAL(dval);",
      "5189:      }",
      "",
      "---------------",
      "--- Hunk 6 ---",
      "[Context before]",
      "5137:  if (z_rect != NULL) {",
      "5138:   if (zend_hash_find(HASH_OF(z_rect), \"x\", sizeof(\"x\"), (void **)&tmp) != FAILURE) {",
      "5141:   } else {",
      "5142:    php_error_docref(NULL TSRMLS_CC, E_WARNING, \"Missing x position\");",
      "5143:    RETURN_FALSE;",
      "5144:   }",
      "5146:   if (zend_hash_find(HASH_OF(z_rect), \"y\", sizeof(\"x\"), (void **)&tmp) != FAILURE) {",
      "5149:   } else {",
      "5150:    php_error_docref(NULL TSRMLS_CC, E_WARNING, \"Missing y position\");",
      "5151:    RETURN_FALSE;",
      "5152:   }",
      "5154:   if (zend_hash_find(HASH_OF(z_rect), \"width\", sizeof(\"width\"), (void **)&tmp) != FAILURE) {",
      "5157:   } else {",
      "5158:    php_error_docref(NULL TSRMLS_CC, E_WARNING, \"Missing width\");",
      "5159:    RETURN_FALSE;",
      "5160:   }",
      "5162:   if (zend_hash_find(HASH_OF(z_rect), \"height\", sizeof(\"height\"), (void **)&tmp) != FAILURE) {",
      "5165:   } else {",
      "5166:    php_error_docref(NULL TSRMLS_CC, E_WARNING, \"Missing height\");",
      "5167:    RETURN_FALSE;",
      "",
      "[Removed Lines]",
      "5139:    convert_to_long_ex(tmp);",
      "5140:    rect.x = Z_LVAL_PP(tmp);",
      "5147:    convert_to_long_ex(tmp);",
      "5148:    rect.y = Z_LVAL_PP(tmp);",
      "5155:    convert_to_long_ex(tmp);",
      "5156:    rect.width = Z_LVAL_PP(tmp);",
      "5163:    convert_to_long_ex(tmp);",
      "5164:    rect.height = Z_LVAL_PP(tmp);",
      "",
      "[Added Lines]",
      "5200:    if (Z_TYPE_PP(tmp) != IS_LONG) {",
      "5201:     zval lval;",
      "5202:     lval = **tmp;",
      "5203:     zval_copy_ctor(&lval);",
      "5204:     convert_to_long(&lval);",
      "5205:     rect.x = Z_LVAL(lval);",
      "5206:    } else {",
      "5207:     rect.x = Z_LVAL_PP(tmp);",
      "5208:    }",
      "5215:    if (Z_TYPE_PP(tmp) != IS_LONG) {",
      "5216:     zval lval;",
      "5217:     lval = **tmp;",
      "5218:     zval_copy_ctor(&lval);",
      "5219:     convert_to_long(&lval);",
      "5220:     rect.y = Z_LVAL(lval);",
      "5221:    } else {",
      "5222:     rect.y = Z_LVAL_PP(tmp);",
      "5223:    }",
      "5230:    if (Z_TYPE_PP(tmp) != IS_LONG) {",
      "5231:     zval lval;",
      "5232:     lval = **tmp;",
      "5233:     zval_copy_ctor(&lval);",
      "5234:     convert_to_long(&lval);",
      "5235:     rect.width = Z_LVAL(lval);",
      "5236:    } else {",
      "5237:     rect.width = Z_LVAL_PP(tmp);",
      "5238:    }",
      "5245:    if (Z_TYPE_PP(tmp) != IS_LONG) {",
      "5246:     zval lval;",
      "5247:     lval = **tmp;",
      "5248:     zval_copy_ctor(&lval);",
      "5249:     convert_to_long(&lval);",
      "5250:     rect.height = Z_LVAL(lval);",
      "5251:    } else {",
      "5252:     rect.height = Z_LVAL_PP(tmp);",
      "5253:    }",
      "",
      "---------------",
      "--- Hunk 7 ---",
      "[Context before]",
      "5211:     php_error_docref(NULL TSRMLS_CC, E_WARNING, \"Array expected as options\");",
      "5212:    }",
      "5213:    if (zend_hash_find(HASH_OF(options), \"x\", sizeof(\"x\"), (void **)&tmp) != FAILURE) {",
      "5216:    } else {",
      "5217:     php_error_docref(NULL TSRMLS_CC, E_WARNING, \"Missing x position\");",
      "5218:     RETURN_FALSE;",
      "5219:    }",
      "5221:    if (zend_hash_find(HASH_OF(options), \"y\", sizeof(\"y\"), (void **)&tmp) != FAILURE) {",
      "5224:    } else {",
      "5225:     php_error_docref(NULL TSRMLS_CC, E_WARNING, \"Missing y position\");",
      "5226:     RETURN_FALSE;",
      "",
      "[Removed Lines]",
      "5214:     convert_to_double_ex(tmp);",
      "5215:     x = Z_DVAL_PP(tmp);",
      "5222:     convert_to_double_ex(tmp);",
      "5223:     y = Z_DVAL_PP(tmp);",
      "",
      "[Added Lines]",
      "5303:     if (Z_TYPE_PP(tmp) != IS_DOUBLE) {",
      "5304:      zval dval;",
      "5305:      dval = **tmp;",
      "5306:      zval_copy_ctor(&dval);",
      "5307:      convert_to_double(&dval);",
      "5308:      x = Z_DVAL(dval);",
      "5309:     } else {",
      "5310:      x = Z_DVAL_PP(tmp);",
      "5311:     }",
      "5318:     if (Z_TYPE_PP(tmp) != IS_DOUBLE) {",
      "5319:      zval dval;",
      "5320:      dval = **tmp;",
      "5321:      zval_copy_ctor(&dval);",
      "5322:      convert_to_double(&dval);",
      "5323:      y = Z_DVAL(dval);",
      "5324:     } else {",
      "5325:      y = Z_DVAL_PP(tmp);",
      "5326:     }",
      "",
      "---------------",
      "--- Hunk 8 ---",
      "[Context before]",
      "5300:      m1[i] = Z_DVAL_PP(tmp);",
      "5301:      break;",
      "5302:     case IS_STRING:",
      "5305:      break;",
      "5306:     default:",
      "5307:      php_error_docref(NULL TSRMLS_CC, E_WARNING, \"Invalid type for element %i\", i);",
      "",
      "[Removed Lines]",
      "5303:      convert_to_double_ex(tmp);",
      "5304:      m1[i] = Z_DVAL_PP(tmp);",
      "",
      "[Added Lines]",
      "5406:      {",
      "5407:       zval dval;",
      "5408:       dval = **tmp;",
      "5409:       zval_copy_ctor(&dval);",
      "5410:       convert_to_double(&dval);",
      "5411:       m1[i] = Z_DVAL(dval);",
      "5412:      }",
      "",
      "---------------",
      "--- Hunk 9 ---",
      "[Context before]",
      "5317:      m2[i] = Z_DVAL_PP(tmp);",
      "5318:      break;",
      "5319:     case IS_STRING:",
      "5322:      break;",
      "5323:     default:",
      "5324:      php_error_docref(NULL TSRMLS_CC, E_WARNING, \"Invalid type for element %i\", i);",
      "",
      "[Removed Lines]",
      "5320:      convert_to_double_ex(tmp);",
      "5321:      m2[i] = Z_DVAL_PP(tmp);",
      "",
      "[Added Lines]",
      "5428:      {",
      "5429:       zval dval;",
      "5430:       dval = **tmp;",
      "5431:       zval_copy_ctor(&dval);",
      "5432:       convert_to_double(&dval);",
      "5433:       m2[i] = Z_DVAL(dval);",
      "5434:      }",
      "",
      "---------------"
    ],
    "ext/gd/tests/bug66356.phpt||ext/gd/tests/bug66356.phpt": [
      "File: ext/gd/tests/bug66356.phpt -> ext/gd/tests/bug66356.phpt",
      "--- Hunk 1 ---",
      "[Context before]",
      "[No context available]",
      "",
      "[Removed Lines]",
      "[None]",
      "",
      "[Added Lines]",
      "1: --TEST--",
      "2: Bug #66356 (Heap Overflow Vulnerability in imagecrop())",
      "3: --SKIPIF--",
      "4: <?php",
      "5:  if(!extension_loaded('gd')){ die('skip gd extension not available'); }",
      "6: ?>",
      "7: --FILE--",
      "8: <?php",
      "9: $img = imagecreatetruecolor(10, 10);",
      "10: $img = imagecrop($img, array(\"x\" => \"a\", \"y\" => 0, \"width\" => 10, \"height\" => 10));",
      "11: $arr = array(\"x\" => \"a\", \"y\" => \"12b\", \"width\" => 10, \"height\" => 10);",
      "12: $img = imagecrop($img, $arr);",
      "13: print_r($arr);",
      "14: ?>",
      "15: --EXPECTF--",
      "16: Array",
      "17: (",
      "18:     [x] => a",
      "19:     [y] => 12b",
      "20:     [width] => 10",
      "21:     [height] => 10",
      "22: )",
      "",
      "---------------"
    ],
    "main/php_version.h||main/php_version.h": [
      "File: main/php_version.h -> main/php_version.h",
      "--- Hunk 1 ---",
      "[Context before]",
      "3: #define PHP_MAJOR_VERSION 5",
      "4: #define PHP_MINOR_VERSION 5",
      "6: #define PHP_EXTRA_VERSION \"-dev\"",
      "",
      "[Removed Lines]",
      "5: #define PHP_RELEASE_VERSION 8",
      "7: #define PHP_VERSION \"5.5.8-dev\"",
      "8: #define PHP_VERSION_ID 50508",
      "",
      "[Added Lines]",
      "5: #define PHP_RELEASE_VERSION 5",
      "7: #define PHP_VERSION \"5.5.5-dev\"",
      "8: #define PHP_VERSION_ID 50505",
      "",
      "---------------"
    ]
  },
  "candidates": [
    {
      "candidate_hash": "d372b33c9b941be9a795bf3705bd22dc5f6092c3",
      "candidate_info": {
        "commit_hash": "d372b33c9b941be9a795bf3705bd22dc5f6092c3",
        "repo": "php/php-src",
        "commit_url": "https://github.com/php/php-src/commit/d372b33c9b941be9a795bf3705bd22dc5f6092c3",
        "files": [
          "ext/json/json.c",
          "ext/json/tests/003.phpt",
          "ext/json/tests/004.phpt",
          "ext/json/tests/bug43941.phpt",
          "ext/json/tests/bug53946.phpt",
          "ext/json/tests/bug54058.phpt",
          "ext/json/tests/bug61537.phpt",
          "ext/json/tests/bug61978.phpt",
          "ext/json/tests/inf_nan_error.phpt",
          "ext/json/tests/json_encode_basic.phpt",
          "ext/json/tests/unsupported_type_error.phpt",
          "main/php_version.h"
        ],
        "message": "Merge branch 'PHP-5.3' into PHP-5.4\n\n* PHP-5.3:\n  Improve JSON error handling\n\nConflicts:\n\text/json/tests/bug54058.phpt\n\text/json/tests/bug61537.phpt",
        "before_after_code_files": [
          "ext/json/json.c||ext/json/json.c",
          "ext/json/tests/003.phpt||ext/json/tests/003.phpt",
          "ext/json/tests/004.phpt||ext/json/tests/004.phpt",
          "ext/json/tests/bug43941.phpt||ext/json/tests/bug43941.phpt",
          "ext/json/tests/bug53946.phpt||ext/json/tests/bug53946.phpt",
          "ext/json/tests/bug54058.phpt||ext/json/tests/bug54058.phpt",
          "ext/json/tests/bug61537.phpt||ext/json/tests/bug61537.phpt",
          "ext/json/tests/bug61978.phpt||ext/json/tests/bug61978.phpt",
          "ext/json/tests/inf_nan_error.phpt||ext/json/tests/inf_nan_error.phpt",
          "ext/json/tests/json_encode_basic.phpt||ext/json/tests/json_encode_basic.phpt",
          "ext/json/tests/unsupported_type_error.phpt||ext/json/tests/unsupported_type_error.phpt",
          "main/php_version.h||main/php_version.h"
        ]
      },
      "candidate_patch_features": {
        "candidate_earlier_than_patch": 1,
        "same_branch_evolution": 1,
        "olp_code_files": {
          "patch": [
            "main/php_version.h||main/php_version.h"
          ],
          "candidate": [
            "main/php_version.h||main/php_version.h"
          ]
        }
      },
      "candidate_diff": {
        "ext/json/json.c||ext/json/json.c": [
          "File: ext/json/json.c -> ext/json/json.c",
          "--- Hunk 1 ---",
          "[Context before]",
          "55:  ZEND_ARG_INFO(0, options)",
          "56: ZEND_END_ARG_INFO()",
          "59: ZEND_END_ARG_INFO()",
          "",
          "[Removed Lines]",
          "58: ZEND_BEGIN_ARG_INFO(arginfo_json_last_error, 0)",
          "",
          "[Added Lines]",
          "58: ZEND_BEGIN_ARG_INFO_EX(arginfo_json_last_error, 0, 0, 0)",
          "59:  ZEND_ARG_INFO(0, as_string)",
          "",
          "---------------",
          "--- Hunk 2 ---",
          "[Context before]",
          "237:  if (myht && myht->nApplyCount > 1) {",
          "238:   JSON_G(error_code) = PHP_JSON_ERROR_RECURSION;",
          "240:   smart_str_appendl(buf, \"null\", 4);",
          "241:   return;",
          "242:  }",
          "",
          "[Removed Lines]",
          "239:   php_error_docref(NULL TSRMLS_CC, E_WARNING, \"recursion detected\");",
          "",
          "[Added Lines]",
          "[None]",
          "",
          "---------------",
          "--- Hunk 3 ---",
          "[Context before]",
          "378:      efree(tmp);",
          "379:     } else {",
          "380:      JSON_G(error_code) = PHP_JSON_ERROR_INF_OR_NAN;",
          "382:      smart_str_appendc(buf, '0');",
          "383:     }",
          "384:    }",
          "",
          "[Removed Lines]",
          "381:      php_error_docref(NULL TSRMLS_CC, E_WARNING, \"double %.9g does not conform to the JSON spec\", d);",
          "",
          "[Added Lines]",
          "[None]",
          "",
          "---------------",
          "--- Hunk 4 ---",
          "[Context before]",
          "395:   }",
          "396:   if (ulen < 0) {",
          "397:    JSON_G(error_code) = PHP_JSON_ERROR_UTF8;",
          "399:    smart_str_appendl(buf, \"null\", 4);",
          "400:   } else {",
          "401:    smart_str_appendl(buf, \"\\\"\\\"\", 2);",
          "",
          "[Removed Lines]",
          "398:    php_error_docref(NULL TSRMLS_CC, E_WARNING, \"Invalid UTF-8 sequence in argument\");",
          "",
          "[Added Lines]",
          "[None]",
          "",
          "---------------",
          "--- Hunk 5 ---",
          "[Context before]",
          "528:  if (myht && myht->nApplyCount > 1) {",
          "529:   JSON_G(error_code) = PHP_JSON_ERROR_RECURSION;",
          "531:   smart_str_appendl(buf, \"null\", 4);",
          "532:   return;",
          "533:  }",
          "",
          "[Removed Lines]",
          "530:   php_error_docref(NULL TSRMLS_CC, E_WARNING, \"recursion detected\");",
          "",
          "[Added Lines]",
          "[None]",
          "",
          "---------------",
          "--- Hunk 6 ---",
          "[Context before]",
          "592:      efree(d);",
          "593:     } else {",
          "594:      JSON_G(error_code) = PHP_JSON_ERROR_INF_OR_NAN;",
          "596:      smart_str_appendc(buf, '0');",
          "597:     }",
          "598:    }",
          "",
          "[Removed Lines]",
          "595:      php_error_docref(NULL TSRMLS_CC, E_WARNING, \"double %.9g does not conform to the JSON spec\", dbl);",
          "",
          "[Added Lines]",
          "[None]",
          "",
          "---------------",
          "--- Hunk 7 ---",
          "[Context before]",
          "615:   default:",
          "616:    JSON_G(error_code) = PHP_JSON_ERROR_UNSUPPORTED_TYPE;",
          "618:    smart_str_appendl(buf, \"null\", 4);",
          "619:    break;",
          "620:  }",
          "",
          "[Removed Lines]",
          "617:    php_error_docref(NULL TSRMLS_CC, E_WARNING, \"type is unsupported\");",
          "",
          "[Added Lines]",
          "[None]",
          "",
          "---------------",
          "--- Hunk 8 ---",
          "[Context before]",
          "755: static PHP_FUNCTION(json_last_error)",
          "756: {",
          "758:   return;",
          "759:  }",
          "762: }",
          "",
          "[Removed Lines]",
          "757:  if (zend_parse_parameters_none() == FAILURE) {",
          "761:  RETURN_LONG(JSON_G(error_code));",
          "",
          "[Added Lines]",
          "752:  zend_bool as_string = 0;",
          "754:  if (zend_parse_parameters(ZEND_NUM_ARGS() TSRMLS_CC, \"|b\", &as_string) == FAILURE) {",
          "759:  if (!as_string) {",
          "760:   RETURN_LONG(JSON_G(error_code));",
          "761:  }",
          "764:  switch(JSON_G(error_code)) {",
          "765:   case PHP_JSON_ERROR_NONE:",
          "766:    RETURN_STRING(\"No error\", 1);",
          "767:   case PHP_JSON_ERROR_DEPTH:",
          "768:    RETURN_STRING(\"Maximum stack depth exceeded\", 1);",
          "769:   case PHP_JSON_ERROR_STATE_MISMATCH:",
          "770:    RETURN_STRING(\"State mismatch (invalid or malformed JSON)\", 1);",
          "771:   case PHP_JSON_ERROR_CTRL_CHAR:",
          "772:    RETURN_STRING(\"Control character error, possibly incorrectly encoded\", 1);",
          "773:   case PHP_JSON_ERROR_SYNTAX:",
          "774:    RETURN_STRING(\"Syntax error\", 1);",
          "775:   case PHP_JSON_ERROR_UTF8:",
          "776:    RETURN_STRING(\"Malformed UTF-8 characters, possibly incorrectly encoded\", 1);",
          "777:   case PHP_JSON_ERROR_RECURSION:",
          "778:    RETURN_STRING(\"Recursion detected\", 1);",
          "779:   case PHP_JSON_ERROR_INF_OR_NAN:",
          "780:    RETURN_STRING(\"Inf and NaN cannot be JSON encoded\", 1);",
          "781:   case PHP_JSON_ERROR_UNSUPPORTED_TYPE:",
          "782:    RETURN_STRING(\"Type is not supported\", 1);",
          "783:   default:",
          "784:    RETURN_STRING(\"Unknown error\", 1);",
          "785:  }",
          "",
          "---------------"
        ],
        "ext/json/tests/003.phpt||ext/json/tests/003.phpt": [
          "File: ext/json/tests/003.phpt -> ext/json/tests/003.phpt",
          "--- Hunk 1 ---",
          "[Context before]",
          "11: var_dump($a);",
          "13: var_dump(json_encode($a));",
          "14: var_dump(json_last_error());",
          "16: var_dump(json_encode($a, JSON_PARTIAL_OUTPUT_ON_ERROR));",
          "17: var_dump(json_last_error());",
          "19: echo \"Done\\n\";",
          "20: ?>",
          "",
          "[Removed Lines]",
          "[None]",
          "",
          "[Added Lines]",
          "13: echo \"\\n\";",
          "17: var_dump(json_last_error(true));",
          "19: echo \"\\n\";",
          "23: var_dump(json_last_error(true));",
          "",
          "---------------",
          "--- Hunk 2 ---",
          "[Context before]",
          "27:   }",
          "28: }",
          "31: bool(false)",
          "32: int(6)",
          "35: string(8) \"[[null]]\"",
          "36: int(6)",
          "37: Done",
          "",
          "[Removed Lines]",
          "30: Warning: json_encode(): recursion detected in %s on line %d",
          "34: Warning: json_encode(): recursion detected in %s on line %d",
          "",
          "[Added Lines]",
          "38: string(%d) \"Recursion detected\"",
          "42: string(%d) \"Recursion detected\"",
          "",
          "---------------"
        ],
        "ext/json/tests/004.phpt||ext/json/tests/004.phpt": [
          "File: ext/json/tests/004.phpt -> ext/json/tests/004.phpt",
          "--- Hunk 1 ---",
          "[Context before]",
          "11: var_dump($a);",
          "13: var_dump(json_encode($a));",
          "14: var_dump(json_last_error());",
          "16: var_dump(json_encode($a, JSON_PARTIAL_OUTPUT_ON_ERROR));",
          "17: var_dump(json_last_error());",
          "19: echo \"Done\\n\";",
          "20: ?>",
          "",
          "[Removed Lines]",
          "[None]",
          "",
          "[Added Lines]",
          "13: echo \"\\n\";",
          "17: var_dump(json_last_error(true));",
          "19: echo \"\\n\";",
          "23: var_dump(json_last_error(true));",
          "",
          "---------------",
          "--- Hunk 2 ---",
          "[Context before]",
          "25: }",
          "28: bool(false)",
          "29: int(6)",
          "32: string(22) \"{\"prop\":{\"prop\":null}}\"",
          "33: int(6)",
          "34: Done",
          "",
          "[Removed Lines]",
          "27: Warning: json_encode(): recursion detected in %s on line %d",
          "31: Warning: json_encode(): recursion detected in %s on line %d",
          "",
          "[Added Lines]",
          "35: string(%d) \"Recursion detected\"",
          "39: string(%d) \"Recursion detected\"",
          "",
          "---------------"
        ],
        "ext/json/tests/bug43941.phpt||ext/json/tests/bug43941.phpt": [
          "File: ext/json/tests/bug43941.phpt -> ext/json/tests/bug43941.phpt",
          "--- Hunk 1 ---",
          "[Context before]",
          "14: ?>",
          "15: --EXPECTF--",
          "16: string(5) \"\"abc\"\"",
          "19: bool(false)",
          "22: string(4) \"null\"",
          "27: string(17) \"[null,null,\"abc\"]\"",
          "28: Done",
          "",
          "[Removed Lines]",
          "18: Warning: json_encode(): Invalid UTF-8 sequence in argument in %s on line %d",
          "21: Warning: json_encode(): Invalid UTF-8 sequence in argument in %s on line %d",
          "24: Warning: json_encode(): Invalid UTF-8 sequence in argument in %s on line %d",
          "26: Warning: json_encode(): Invalid UTF-8 sequence in argument in %s on line %d",
          "",
          "[Added Lines]",
          "[None]",
          "",
          "---------------"
        ],
        "ext/json/tests/bug53946.phpt||ext/json/tests/bug53946.phpt": [
          "File: ext/json/tests/bug53946.phpt -> ext/json/tests/bug53946.phpt",
          "--- Hunk 1 ---",
          "[Context before]",
          "12: --EXPECTF--",
          "13: string(156) \"\"latin 1234 -\\/    russian \\u043c\\u0430\\u043c\\u0430 \\u043c\\u044b\\u043b\\u0430 \\u0440\\u0430\\u043c\\u0443  specialchars \\u0002   \\b \\n   U+1D11E >\\ud834\\udd1e<\"\"",
          "14: string(100) \"\"latin 1234 -\\/    russian \u043c\u0430\u043c\u0430 \u043c\u044b\u043b\u0430 \u0440\u0430\u043c\u0443  specialchars \\u0002   \\b \\n   U+1D11E >\ud834\udd1e<\"\"",
          "17: bool(false)",
          "20: bool(false)",
          "",
          "[Removed Lines]",
          "16: Warning: json_encode(): Invalid UTF-8 sequence in argument in %s on line %d",
          "19: Warning: json_encode(): Invalid UTF-8 sequence in argument in %s on line %d",
          "",
          "[Added Lines]",
          "[None]",
          "",
          "---------------"
        ],
        "ext/json/tests/bug54058.phpt||ext/json/tests/bug54058.phpt": [
          "File: ext/json/tests/bug54058.phpt -> ext/json/tests/bug54058.phpt",
          "--- Hunk 1 ---",
          "[Context before]",
          "10: json_encode($bad_utf8);",
          "11: var_dump(json_last_error());",
          "13: $a = new stdclass;",
          "14: $a->foo = quoted_printable_decode('=B0');",
          "15: json_encode($a);",
          "16: var_dump(json_last_error());",
          "18: $b = new stdclass;",
          "19: $b->foo = $bad_utf8;",
          "20: $b->bar = 1;",
          "21: json_encode($b);",
          "22: var_dump(json_last_error());",
          "24: $c = array(",
          "25:     'foo' => $bad_utf8,",
          "",
          "[Removed Lines]",
          "[None]",
          "",
          "[Added Lines]",
          "12: var_dump(json_last_error(true));",
          "18: var_dump(json_last_error(true));",
          "25: var_dump(json_last_error(true));",
          "",
          "---------------",
          "--- Hunk 2 ---",
          "[Context before]",
          "27: );",
          "28: json_encode($c);",
          "29: var_dump(json_last_error());",
          "30: ?>",
          "31: --EXPECTF--",
          "34: int(5)",
          "37: int(5)",
          "40: int(5)",
          "43: int(5)",
          "",
          "[Removed Lines]",
          "33: Warning: json_encode(): Invalid UTF-8 sequence in argument in %s on line %d",
          "36: Warning: json_encode(): Invalid UTF-8 sequence in argument in %s on line %d",
          "39: Warning: json_encode(): Invalid UTF-8 sequence in argument in %s on line %d",
          "42: Warning: json_encode(): Invalid UTF-8 sequence in argument in %s on line %d",
          "",
          "[Added Lines]",
          "33: var_dump(json_last_error(true));",
          "38: string(56) \"Malformed UTF-8 characters, possibly incorrectly encoded\"",
          "40: string(56) \"Malformed UTF-8 characters, possibly incorrectly encoded\"",
          "42: string(56) \"Malformed UTF-8 characters, possibly incorrectly encoded\"",
          "44: string(56) \"Malformed UTF-8 characters, possibly incorrectly encoded\"",
          "",
          "---------------"
        ],
        "ext/json/tests/bug61537.phpt||ext/json/tests/bug61537.phpt": [
          "File: ext/json/tests/bug61537.phpt -> ext/json/tests/bug61537.phpt",
          "--- Hunk 1 ---",
          "[Context before]",
          "[No context available]",
          "",
          "[Removed Lines]",
          "[None]",
          "",
          "[Added Lines]",
          "1: --TEST--",
          "2: Bug #61537 (json_encode() incorrectly truncates/discards information)",
          "3: --SKIPIF--",
          "4: <?php if (!extension_loaded(\"json\")) print \"skip\"; ?>",
          "5: --FILE--",
          "6: <?php",
          "7: $invalid_utf8 = \"\\x9f\";",
          "9: var_dump(json_encode($invalid_utf8));",
          "10: var_dump(json_last_error(), json_last_error(true));",
          "12: var_dump(json_encode($invalid_utf8, JSON_PARTIAL_OUTPUT_ON_ERROR));",
          "13: var_dump(json_last_error(), json_last_error(true));",
          "15: echo \"\\n\";",
          "17: $invalid_utf8 = \"an invalid sequen\\xce in the middle of a string\";",
          "19: var_dump(json_encode($invalid_utf8));",
          "20: var_dump(json_last_error(), json_last_error(true));",
          "22: var_dump(json_encode($invalid_utf8, JSON_PARTIAL_OUTPUT_ON_ERROR));",
          "23: var_dump(json_last_error(), json_last_error(true));",
          "25: ?>",
          "26: --EXPECTF--",
          "27: bool(false)",
          "28: int(5)",
          "29: string(56) \"Malformed UTF-8 characters, possibly incorrectly encoded\"",
          "30: string(4) \"null\"",
          "31: int(5)",
          "32: string(56) \"Malformed UTF-8 characters, possibly incorrectly encoded\"",
          "34: bool(false)",
          "35: int(5)",
          "36: string(56) \"Malformed UTF-8 characters, possibly incorrectly encoded\"",
          "37: string(4) \"null\"",
          "38: int(5)",
          "39: string(56) \"Malformed UTF-8 characters, possibly incorrectly encoded\"",
          "",
          "---------------"
        ],
        "ext/json/tests/bug61978.phpt||ext/json/tests/bug61978.phpt": [
          "File: ext/json/tests/bug61978.phpt -> ext/json/tests/bug61978.phpt",
          "--- Hunk 1 ---",
          "[Context before]",
          "31: $obj1 = new JsonTest1();",
          "32: var_dump(json_encode($obj1, JSON_PARTIAL_OUTPUT_ON_ERROR));",
          "36: $obj2 = new JsonTest2();",
          "37: var_dump(json_encode($obj2, JSON_PARTIAL_OUTPUT_ON_ERROR));",
          "39: ?>",
          "40: --EXPECTF--",
          "42: string(44) \"{\"test\":\"123\",\"me\":{\"test\":\"123\",\"me\":null}}\"",
          "44: ==",
          "47: string(44) \"{\"test\":\"123\",\"me\":{\"test\":\"123\",\"me\":null}}\"",
          "",
          "[Removed Lines]",
          "34: echo \"\\n==\\n\";",
          "41: Warning: json_encode(): recursion detected in %s on line %d",
          "46: Warning: json_encode(): recursion detected in %s on line %d",
          "",
          "[Added Lines]",
          "34: echo \"==\\n\";",
          "",
          "---------------"
        ],
        "ext/json/tests/inf_nan_error.phpt||ext/json/tests/inf_nan_error.phpt": [
          "File: ext/json/tests/inf_nan_error.phpt -> ext/json/tests/inf_nan_error.phpt",
          "--- Hunk 1 ---",
          "[Context before]",
          "8: var_dump($inf);",
          "10: var_dump(json_encode($inf));",
          "13: var_dump(json_encode($inf, JSON_PARTIAL_OUTPUT_ON_ERROR));",
          "16: $nan = NAN;",
          "18: var_dump($nan);",
          "20: var_dump(json_encode($nan));",
          "23: var_dump(json_encode($nan, JSON_PARTIAL_OUTPUT_ON_ERROR));",
          "25: ?>",
          "26: --EXPECTF--",
          "27: float(INF)",
          "30: bool(false)",
          "31: int(7)",
          "34: string(1) \"0\"",
          "35: int(7)",
          "39: bool(false)",
          "40: int(7)",
          "43: string(1) \"0\"",
          "44: int(7)",
          "",
          "[Removed Lines]",
          "11: var_dump(json_last_error());",
          "14: var_dump(json_last_error());",
          "21: var_dump(json_last_error());",
          "24: var_dump(json_last_error());",
          "29: Warning: json_encode(): double INF does not conform to the JSON spec in %s on line %d",
          "33: Warning: json_encode(): double INF does not conform to the JSON spec in %s on line %d",
          "36: float(NAN)",
          "38: Warning: json_encode(): double NAN does not conform to the JSON spec in %s on line %d",
          "42: Warning: json_encode(): double NAN does not conform to the JSON spec in %s on line %d",
          "",
          "[Added Lines]",
          "11: var_dump(json_last_error(), json_last_error(true));",
          "14: var_dump(json_last_error(), json_last_error(true));",
          "16: echo \"\\n\";",
          "23: var_dump(json_last_error(), json_last_error(true));",
          "26: var_dump(json_last_error(), json_last_error(true));",
          "32: string(34) \"Inf and NaN cannot be JSON encoded\"",
          "35: string(34) \"Inf and NaN cannot be JSON encoded\"",
          "37: float(NAN)",
          "40: string(34) \"Inf and NaN cannot be JSON encoded\"",
          "43: string(34) \"Inf and NaN cannot be JSON encoded\"",
          "",
          "---------------"
        ],
        "ext/json/tests/json_encode_basic.phpt||ext/json/tests/json_encode_basic.phpt": [
          "File: ext/json/tests/json_encode_basic.phpt -> ext/json/tests/json_encode_basic.phpt",
          "--- Hunk 1 ---",
          "[Context before]",
          "150: -- Iteration 25 --",
          "151: string(4) \"null\"",
          "152: -- Iteration 26 --",
          "155: bool(false)",
          "156: -- Iteration 27 --",
          "157: string(82) \"{\"MyInt\":99,\"MyFloat\":123.45,\"MyBool\":true,\"MyNull\":null,\"MyString\":\"Hello World\"}\"",
          "",
          "[Removed Lines]",
          "154: Warning: json_encode(): type is unsupported in %s on line %d",
          "",
          "[Added Lines]",
          "[None]",
          "",
          "---------------"
        ],
        "ext/json/tests/unsupported_type_error.phpt||ext/json/tests/unsupported_type_error.phpt": [
          "File: ext/json/tests/unsupported_type_error.phpt -> ext/json/tests/unsupported_type_error.phpt",
          "--- Hunk 1 ---",
          "[Context before]",
          "8: var_dump($resource);",
          "10: var_dump(json_encode($resource));",
          "13: var_dump(json_encode($resource, JSON_PARTIAL_OUTPUT_ON_ERROR));",
          "16: ?>",
          "17: --EXPECTF--",
          "18: resource(5) of type (stream)",
          "21: bool(false)",
          "22: int(8)",
          "25: string(4) \"null\"",
          "26: int(8)",
          "",
          "[Removed Lines]",
          "11: var_dump(json_last_error());",
          "14: var_dump(json_last_error());",
          "20: Warning: json_encode(): type is unsupported in %s on line %d",
          "24: Warning: json_encode(): type is unsupported in %s on line %d",
          "",
          "[Added Lines]",
          "11: var_dump(json_last_error(), json_last_error(true));",
          "14: var_dump(json_last_error(), json_last_error(true));",
          "21: string(21) \"Type is not supported\"",
          "24: string(21) \"Type is not supported\"",
          "",
          "---------------"
        ],
        "main/php_version.h||main/php_version.h": [
          "File: main/php_version.h -> main/php_version.h",
          "--- Hunk 1 ---",
          "[Context before]",
          "5: #define PHP_RELEASE_VERSION 5",
          "6: #define PHP_EXTRA_VERSION \"-dev\"",
          "7: #define PHP_VERSION \"5.4.5-dev\"",
          "",
          "[Removed Lines]",
          "8: #define PHP_VERSION_ID 50404",
          "",
          "[Added Lines]",
          "8: #define PHP_VERSION_ID 50405",
          "",
          "---------------"
        ]
      }
    },
    {
      "candidate_hash": "cc8ecca0b36647302a7036a0db62b088b8a3508f",
      "candidate_info": {
        "commit_hash": "cc8ecca0b36647302a7036a0db62b088b8a3508f",
        "repo": "php/php-src",
        "commit_url": "https://github.com/php/php-src/commit/cc8ecca0b36647302a7036a0db62b088b8a3508f",
        "files": [
          "TSRM/acconfig.h",
          "TSRM/build.mk",
          "TSRM/configure.in",
          "Zend/acconfig.h",
          "Zend/build.mk",
          "Zend/configure.in",
          "acconfig.h.in",
          "build/build.mk",
          "build/build2.mk",
          "configure.in",
          "main/php_version.h"
        ],
        "message": "Get rid of autoconf warnings",
        "before_after_code_files": [
          "TSRM/acconfig.h||TSRM/acconfig.h",
          "TSRM/build.mk||TSRM/build.mk",
          "TSRM/configure.in||TSRM/configure.in",
          "Zend/acconfig.h||Zend/acconfig.h",
          "Zend/build.mk||Zend/build.mk",
          "Zend/configure.in||Zend/configure.in",
          "acconfig.h.in||acconfig.h.in",
          "build/build.mk||build/build.mk",
          "build/build2.mk||build/build2.mk",
          "configure.in||configure.in",
          "main/php_version.h||main/php_version.h"
        ]
      },
      "candidate_patch_features": {
        "candidate_earlier_than_patch": 1,
        "same_branch_evolution": 1,
        "olp_code_files": {
          "patch": [
            "main/php_version.h||main/php_version.h"
          ],
          "candidate": [
            "main/php_version.h||main/php_version.h"
          ]
        }
      },
      "candidate_diff": {
        "TSRM/acconfig.h||TSRM/acconfig.h": [
          "File: TSRM/acconfig.h -> TSRM/acconfig.h",
          "--- Hunk 1 ---",
          "[Context before]",
          "[No context available]",
          "",
          "[Removed Lines]",
          "[None]",
          "",
          "[Added Lines]",
          "[None]",
          "",
          "---------------"
        ],
        "TSRM/build.mk||TSRM/build.mk": [
          "File: TSRM/build.mk -> TSRM/build.mk",
          "--- Hunk 1 ---",
          "[Context before]",
          "33: aclocal.m4: configure.in acinclude.m4",
          "34:  aclocal",
          "37: # explicitly remove target since autoheader does not seem to work",
          "38: # correctly otherwise (timestamps are not updated)",
          "39:  @rm -f $@",
          "",
          "[Removed Lines]",
          "36: $(config_h_in): configure.in acconfig.h",
          "",
          "[Added Lines]",
          "36: $(config_h_in): configure.in",
          "",
          "---------------"
        ],
        "TSRM/configure.in||TSRM/configure.in": [
          "File: TSRM/configure.in -> TSRM/configure.in",
          "--- Hunk 1 ---",
          "[Context before]",
          "7: AM_INIT_AUTOMAKE(TSRM, 1.0, nodefine)",
          "8: AM_CONFIG_HEADER(tsrm_config.h)",
          "10: sinclude(tsrm.m4)",
          "12: TSRM_BASIC_CHECKS",
          "",
          "[Removed Lines]",
          "[None]",
          "",
          "[Added Lines]",
          "10: AH_TOP([",
          "11: #undef PTHREADS",
          "12: ])",
          "",
          "---------------"
        ],
        "Zend/acconfig.h||Zend/acconfig.h": [
          "File: Zend/acconfig.h -> Zend/acconfig.h",
          "--- Hunk 1 ---",
          "[Context before]",
          "[No context available]",
          "",
          "[Removed Lines]",
          "[None]",
          "",
          "[Added Lines]",
          "[None]",
          "",
          "---------------"
        ],
        "Zend/build.mk||Zend/build.mk": [
          "File: Zend/build.mk -> Zend/build.mk",
          "--- Hunk 1 ---",
          "[Context before]",
          "33: aclocal.m4: configure.in acinclude.m4",
          "34:  aclocal",
          "37: # explicitly remove target since autoheader does not seem to work",
          "38: # correctly otherwise (timestamps are not updated)",
          "39:  @rm -f $@",
          "",
          "[Removed Lines]",
          "36: $(config_h_in): configure.in acconfig.h",
          "",
          "[Added Lines]",
          "36: $(config_h_in): configure.in",
          "",
          "---------------"
        ],
        "Zend/configure.in||Zend/configure.in": [
          "File: Zend/configure.in -> Zend/configure.in",
          "--- Hunk 1 ---",
          "[Context before]",
          "11: ZEND_VERSION=$VERSION",
          "12: AC_ZEND_C_BIGENDIAN",
          "14: dnl We want this one before the checks, so the checks can modify CFLAGS.",
          "15: test -z \"$CFLAGS\" && auto_cflags=1",
          "",
          "[Removed Lines]",
          "[None]",
          "",
          "[Added Lines]",
          "14: AH_TOP([",
          "15: #if defined(__GNUC__) && __GNUC__ >= 4",
          "16: # define ZEND_API __attribute__ ((visibility(\"default\")))",
          "17: # define ZEND_DLEXPORT __attribute__ ((visibility(\"default\")))",
          "18: #else",
          "19: # define ZEND_API",
          "20: # define ZEND_DLEXPORT",
          "21: #endif",
          "23: #define ZEND_DLIMPORT",
          "25: #undef uint",
          "26: #undef ulong",
          "29: #define MEMORY_LIMIT 0",
          "30: ])",
          "32: AH_BOTTOM([",
          "33: #ifndef ZEND_ACCONFIG_H_NO_C_PROTOS",
          "35: #ifdef HAVE_STDLIB_H",
          "36: # include <stdlib.h>",
          "37: #endif",
          "39: #ifdef HAVE_SYS_TYPES_H",
          "40: # include <sys/types.h>",
          "41: #endif",
          "43: #ifdef HAVE_SYS_SELECT_H",
          "44: #include <sys/select.h>",
          "45: #endif",
          "47: #ifdef HAVE_IEEEFP_H",
          "48: # include <ieeefp.h>",
          "49: #endif",
          "51: #ifdef HAVE_STRING_H",
          "52: # include <string.h>",
          "53: #else",
          "54: # include <strings.h>",
          "55: #endif",
          "57: #if ZEND_BROKEN_SPRINTF",
          "58: int zend_sprintf(char *buffer, const char *format, ...);",
          "59: #else",
          "60: # define zend_sprintf sprintf",
          "61: #endif",
          "63: #include <math.h>",
          "66: #ifdef NETWARE",
          "67:  #define HAVE_ISNAN 1",
          "68:  #define HAVE_ISINF 1",
          "69:  #define HAVE_ISFINITE 1",
          "70: #endif",
          "72: #ifndef zend_isnan",
          "73: #ifdef HAVE_ISNAN",
          "74: #define zend_isnan(a) isnan(a)",
          "75: #elif defined(HAVE_FPCLASS)",
          "76: #define zend_isnan(a) ((fpclass(a) == FP_SNAN) || (fpclass(a) == FP_QNAN))",
          "77: #else",
          "78: #define zend_isnan(a) 0",
          "79: #endif",
          "80: #endif",
          "82: #ifdef HAVE_ISINF",
          "83: #define zend_isinf(a) isinf(a)",
          "84: #elif defined(INFINITY)",
          "86: #define zend_isinf(a) (((a)==INFINITY)?1:0)",
          "87: #elif defined(HAVE_FPCLASS)",
          "88: #define zend_isinf(a) ((fpclass(a) == FP_PINF) || (fpclass(a) == FP_NINF))",
          "89: #else",
          "90: #define zend_isinf(a) 0",
          "91: #endif",
          "93: #ifdef HAVE_FINITE",
          "94: #define zend_finite(a) finite(a)",
          "95: #elif defined(HAVE_ISFINITE) || defined(isfinite)",
          "96: #define zend_finite(a) isfinite(a)",
          "97: #elif defined(fpclassify)",
          "98: #define zend_finite(a) ((fpclassify((a))!=FP_INFINITE&&fpclassify((a))!=FP_NAN)?1:0)",
          "99: #else",
          "100: #define zend_finite(a) (zend_isnan(a) ? 0 : zend_isinf(a) ? 0 : 1)",
          "101: #endif",
          "105: #ifdef NETWARE",
          "106: #ifdef USE_WINSOCK",
          "107: #/*This detection against winsock is of no use*/ undef HAVE_SOCKLEN_T",
          "108: #/*This detection against winsock is of no use*/ undef HAVE_SYS_SOCKET_H",
          "109: #endif",
          "110: #endif",
          "111: ])",
          "",
          "---------------"
        ],
        "acconfig.h.in||acconfig.h.in": [
          "File: acconfig.h.in -> acconfig.h.in"
        ],
        "build/build.mk||build/build.mk": [
          "File: build/build.mk -> build/build.mk",
          "--- Hunk 1 ---",
          "[Context before]",
          "33: generated_lists:",
          "34:  @echo makefile_am_files = Zend/Makefile.am TSRM/Makefile.am > $@",
          "36:  @echo config_m4_files = Zend/Zend.m4 TSRM/tsrm.m4 TSRM/threads.m4 \\",
          "37:   Zend/acinclude.m4 ext/*/config*.m4 sapi/*/config.m4 >> $@",
          "",
          "[Removed Lines]",
          "35:  @echo config_h_files = Zend/acconfig.h TSRM/acconfig.h >> $@",
          "",
          "[Added Lines]",
          "[None]",
          "",
          "---------------"
        ],
        "build/build2.mk||build/build2.mk": [
          "File: build/build2.mk -> build/build2.mk",
          "--- Hunk 1 ---",
          "[Context before]",
          "26: config_h_in = main/php_config.h.in",
          "30: targets = $(TOUCH_FILES) configure $(config_h_in)",
          "32: PHP_AUTOCONF ?= 'autoconf'",
          "",
          "[Removed Lines]",
          "28: acconfig_h_SOURCES = acconfig.h.in $(config_h_files)",
          "",
          "[Added Lines]",
          "[None]",
          "",
          "---------------",
          "--- Hunk 2 ---",
          "[Context before]",
          "37: all: $(targets)",
          "44: # explicitly remove target since autoheader does not seem to work",
          "45: # correctly otherwise (timestamps are not updated)",
          "46:  @echo rebuilding $@",
          "",
          "[Removed Lines]",
          "39: acconfig.h: $(acconfig_h_SOURCES)",
          "40:  @echo rebuilding $@",
          "41:  cat $(acconfig_h_SOURCES) > $@",
          "43: $(config_h_in): configure acconfig.h",
          "",
          "[Added Lines]",
          "37: $(config_h_in): configure",
          "",
          "---------------"
        ],
        "configure.in||configure.in": [
          "File: configure.in -> configure.in",
          "--- Hunk 1 ---",
          "[Context before]",
          "17: PHP_CANONICAL_HOST_TARGET",
          "19: AC_CONFIG_HEADER(main/php_config.h)",
          "21: PHP_MAJOR_VERSION=5",
          "24: PHP_EXTRA_VERSION=\"-dev\"",
          "25: PHP_VERSION=\"$PHP_MAJOR_VERSION.$PHP_MINOR_VERSION.$PHP_RELEASE_VERSION$PHP_EXTRA_VERSION\"",
          "26: PHP_VERSION_ID=`expr [$]PHP_MAJOR_VERSION \\* 10000 + [$]PHP_MINOR_VERSION \\* 100 + [$]PHP_RELEASE_VERSION`",
          "",
          "[Removed Lines]",
          "22: PHP_MINOR_VERSION=3",
          "23: PHP_RELEASE_VERSION=99",
          "",
          "[Added Lines]",
          "20: AH_TOP([",
          "21: #if defined(__GNUC__) && __GNUC__ >= 4",
          "22: # define ZEND_API __attribute__ ((visibility(\"default\")))",
          "23: # define ZEND_DLEXPORT __attribute__ ((visibility(\"default\")))",
          "24: #else",
          "25: # define ZEND_API",
          "26: # define ZEND_DLEXPORT",
          "27: #endif",
          "29: #define ZEND_DLIMPORT",
          "31: #undef uint",
          "32: #undef ulong",
          "35: #define MEMORY_LIMIT 0",
          "36: ])",
          "37: AH_BOTTOM([",
          "38: #ifndef ZEND_ACCONFIG_H_NO_C_PROTOS",
          "40: #ifdef HAVE_STDLIB_H",
          "41: # include <stdlib.h>",
          "42: #endif",
          "44: #ifdef HAVE_SYS_TYPES_H",
          "45: # include <sys/types.h>",
          "46: #endif",
          "48: #ifdef HAVE_SYS_SELECT_H",
          "49: #include <sys/select.h>",
          "50: #endif",
          "52: #ifdef HAVE_IEEEFP_H",
          "53: # include <ieeefp.h>",
          "54: #endif",
          "56: #ifdef HAVE_STRING_H",
          "57: # include <string.h>",
          "58: #else",
          "59: # include <strings.h>",
          "60: #endif",
          "62: #if ZEND_BROKEN_SPRINTF",
          "63: int zend_sprintf(char *buffer, const char *format, ...);",
          "64: #else",
          "65: # define zend_sprintf sprintf",
          "66: #endif",
          "68: #include <math.h>",
          "71: #ifdef NETWARE",
          "72:  #define HAVE_ISNAN 1",
          "73:  #define HAVE_ISINF 1",
          "74:  #define HAVE_ISFINITE 1",
          "75: #endif",
          "77: #ifndef zend_isnan",
          "78: #ifdef HAVE_ISNAN",
          "79: #define zend_isnan(a) isnan(a)",
          "80: #elif defined(HAVE_FPCLASS)",
          "81: #define zend_isnan(a) ((fpclass(a) == FP_SNAN) || (fpclass(a) == FP_QNAN))",
          "82: #else",
          "83: #define zend_isnan(a) 0",
          "84: #endif",
          "85: #endif",
          "87: #ifdef HAVE_ISINF",
          "88: #define zend_isinf(a) isinf(a)",
          "89: #elif defined(INFINITY)",
          "91: #define zend_isinf(a) (((a)==INFINITY)?1:0)",
          "92: #elif defined(HAVE_FPCLASS)",
          "93: #define zend_isinf(a) ((fpclass(a) == FP_PINF) || (fpclass(a) == FP_NINF))",
          "94: #else",
          "95: #define zend_isinf(a) 0",
          "96: #endif",
          "98: #ifdef HAVE_FINITE",
          "99: #define zend_finite(a) finite(a)",
          "100: #elif defined(HAVE_ISFINITE) || defined(isfinite)",
          "101: #define zend_finite(a) isfinite(a)",
          "102: #elif defined(fpclassify)",
          "103: #define zend_finite(a) ((fpclassify((a))!=FP_INFINITE&&fpclassify((a))!=FP_NAN)?1:0)",
          "104: #else",
          "105: #define zend_finite(a) (zend_isnan(a) ? 0 : zend_isinf(a) ? 0 : 1)",
          "106: #endif",
          "110: #ifdef NETWARE",
          "111: #ifdef USE_WINSOCK",
          "112: #/*This detection against winsock is of no use*/ undef HAVE_SOCKLEN_T",
          "113: #/*This detection against winsock is of no use*/ undef HAVE_SYS_SOCKET_H",
          "114: #endif",
          "115: #endif",
          "117: #undef PTHREADS",
          "118: ])",
          "121: PHP_MINOR_VERSION=5",
          "122: PHP_RELEASE_VERSION=0",
          "",
          "---------------"
        ],
        "main/php_version.h||main/php_version.h": [
          "File: main/php_version.h -> main/php_version.h",
          "--- Hunk 1 ---",
          "[Context before]",
          "3: #define PHP_MAJOR_VERSION 5",
          "6: #define PHP_EXTRA_VERSION \"-dev\"",
          "",
          "[Removed Lines]",
          "4: #define PHP_MINOR_VERSION 3",
          "5: #define PHP_RELEASE_VERSION 99",
          "7: #define PHP_VERSION \"5.3.99-dev\"",
          "8: #define PHP_VERSION_ID 50399",
          "",
          "[Added Lines]",
          "4: #define PHP_MINOR_VERSION 5",
          "5: #define PHP_RELEASE_VERSION 0",
          "7: #define PHP_VERSION \"5.5.0-dev\"",
          "8: #define PHP_VERSION_ID 50500",
          "",
          "---------------"
        ]
      }
    },
    {
      "candidate_hash": "dda3f404ecbbef399acae56855fc8bc4e0e24905",
      "candidate_info": {
        "commit_hash": "dda3f404ecbbef399acae56855fc8bc4e0e24905",
        "repo": "php/php-src",
        "commit_url": "https://github.com/php/php-src/commit/dda3f404ecbbef399acae56855fc8bc4e0e24905",
        "files": [
          "NEWS",
          "configure.in",
          "main/php_version.h"
        ],
        "message": "5.4.18 next",
        "before_after_code_files": [
          "configure.in||configure.in",
          "main/php_version.h||main/php_version.h"
        ]
      },
      "candidate_patch_features": {
        "candidate_earlier_than_patch": 1,
        "same_branch_evolution": 1,
        "olp_code_files": {
          "patch": [
            "main/php_version.h||main/php_version.h"
          ],
          "candidate": [
            "main/php_version.h||main/php_version.h"
          ]
        }
      },
      "candidate_diff": {
        "configure.in||configure.in": [
          "File: configure.in -> configure.in",
          "--- Hunk 1 ---",
          "[Context before]",
          "120: PHP_MAJOR_VERSION=5",
          "121: PHP_MINOR_VERSION=4",
          "123: PHP_EXTRA_VERSION=\"-dev\"",
          "124: PHP_VERSION=\"$PHP_MAJOR_VERSION.$PHP_MINOR_VERSION.$PHP_RELEASE_VERSION$PHP_EXTRA_VERSION\"",
          "125: PHP_VERSION_ID=`expr [$]PHP_MAJOR_VERSION \\* 10000 + [$]PHP_MINOR_VERSION \\* 100 + [$]PHP_RELEASE_VERSION`",
          "",
          "[Removed Lines]",
          "122: PHP_RELEASE_VERSION=17",
          "",
          "[Added Lines]",
          "122: PHP_RELEASE_VERSION=18",
          "",
          "---------------"
        ],
        "main/php_version.h||main/php_version.h": [
          "File: main/php_version.h -> main/php_version.h",
          "--- Hunk 1 ---",
          "[Context before]",
          "3: #define PHP_MAJOR_VERSION 5",
          "4: #define PHP_MINOR_VERSION 4",
          "6: #define PHP_EXTRA_VERSION \"-dev\"",
          "",
          "[Removed Lines]",
          "5: #define PHP_RELEASE_VERSION 17",
          "7: #define PHP_VERSION \"5.4.17-dev\"",
          "8: #define PHP_VERSION_ID 50417",
          "",
          "[Added Lines]",
          "5: #define PHP_RELEASE_VERSION 18",
          "7: #define PHP_VERSION \"5.4.18-dev\"",
          "8: #define PHP_VERSION_ID 50418",
          "",
          "---------------"
        ]
      }
    },
    {
      "candidate_hash": "44c773120ec484b293a5aa3d42e3b6c8450a7c54",
      "candidate_info": {
        "commit_hash": "44c773120ec484b293a5aa3d42e3b6c8450a7c54",
        "repo": "php/php-src",
        "commit_url": "https://github.com/php/php-src/commit/44c773120ec484b293a5aa3d42e3b6c8450a7c54",
        "files": [
          "NEWS",
          "configure.in",
          "main/php_version.h"
        ],
        "message": "5.4.0RC6",
        "before_after_code_files": [
          "configure.in||configure.in",
          "main/php_version.h||main/php_version.h"
        ]
      },
      "candidate_patch_features": {
        "candidate_earlier_than_patch": 1,
        "same_branch_evolution": 1,
        "olp_code_files": {
          "patch": [
            "main/php_version.h||main/php_version.h"
          ],
          "candidate": [
            "main/php_version.h||main/php_version.h"
          ]
        }
      },
      "candidate_diff": {
        "configure.in||configure.in": [
          "File: configure.in -> configure.in",
          "--- Hunk 1 ---",
          "[Context before]",
          "120: PHP_MAJOR_VERSION=5",
          "121: PHP_MINOR_VERSION=4",
          "122: PHP_RELEASE_VERSION=0",
          "124: PHP_VERSION=\"$PHP_MAJOR_VERSION.$PHP_MINOR_VERSION.$PHP_RELEASE_VERSION$PHP_EXTRA_VERSION\"",
          "125: PHP_VERSION_ID=`expr [$]PHP_MAJOR_VERSION \\* 10000 + [$]PHP_MINOR_VERSION \\* 100 + [$]PHP_RELEASE_VERSION`",
          "",
          "[Removed Lines]",
          "123: PHP_EXTRA_VERSION=\"RC6-dev\"",
          "",
          "[Added Lines]",
          "123: PHP_EXTRA_VERSION=\"RC6\"",
          "",
          "---------------"
        ],
        "main/php_version.h||main/php_version.h": [
          "File: main/php_version.h -> main/php_version.h",
          "--- Hunk 1 ---",
          "[Context before]",
          "3: #define PHP_MAJOR_VERSION 5",
          "4: #define PHP_MINOR_VERSION 4",
          "5: #define PHP_RELEASE_VERSION 0",
          "8: #define PHP_VERSION_ID 50400",
          "",
          "[Removed Lines]",
          "6: #define PHP_EXTRA_VERSION \"RC6-dev\"",
          "7: #define PHP_VERSION \"5.4.0RC6-dev\"",
          "",
          "[Added Lines]",
          "6: #define PHP_EXTRA_VERSION \"RC6\"",
          "7: #define PHP_VERSION \"5.4.0RC6\"",
          "",
          "---------------"
        ]
      }
    },
    {
      "candidate_hash": "a58a279d7bf3e37e8780b8c1c276116fc0fa803e",
      "candidate_info": {
        "commit_hash": "a58a279d7bf3e37e8780b8c1c276116fc0fa803e",
        "repo": "php/php-src",
        "commit_url": "https://github.com/php/php-src/commit/a58a279d7bf3e37e8780b8c1c276116fc0fa803e",
        "files": [
          "NEWS",
          "configure.in",
          "main/php_version.h"
        ],
        "message": "5.4.16-dev",
        "before_after_code_files": [
          "configure.in||configure.in",
          "main/php_version.h||main/php_version.h"
        ]
      },
      "candidate_patch_features": {
        "candidate_earlier_than_patch": 1,
        "same_branch_evolution": 1,
        "olp_code_files": {
          "patch": [
            "main/php_version.h||main/php_version.h"
          ],
          "candidate": [
            "main/php_version.h||main/php_version.h"
          ]
        }
      },
      "candidate_diff": {
        "configure.in||configure.in": [
          "File: configure.in -> configure.in",
          "--- Hunk 1 ---",
          "[Context before]",
          "120: PHP_MAJOR_VERSION=5",
          "121: PHP_MINOR_VERSION=4",
          "123: PHP_EXTRA_VERSION=\"-dev\"",
          "124: PHP_VERSION=\"$PHP_MAJOR_VERSION.$PHP_MINOR_VERSION.$PHP_RELEASE_VERSION$PHP_EXTRA_VERSION\"",
          "125: PHP_VERSION_ID=`expr [$]PHP_MAJOR_VERSION \\* 10000 + [$]PHP_MINOR_VERSION \\* 100 + [$]PHP_RELEASE_VERSION`",
          "",
          "[Removed Lines]",
          "122: PHP_RELEASE_VERSION=15",
          "",
          "[Added Lines]",
          "122: PHP_RELEASE_VERSION=16",
          "",
          "---------------"
        ],
        "main/php_version.h||main/php_version.h": [
          "File: main/php_version.h -> main/php_version.h",
          "--- Hunk 1 ---",
          "[Context before]",
          "3: #define PHP_MAJOR_VERSION 5",
          "4: #define PHP_MINOR_VERSION 4",
          "6: #define PHP_EXTRA_VERSION \"-dev\"",
          "",
          "[Removed Lines]",
          "5: #define PHP_RELEASE_VERSION 15",
          "7: #define PHP_VERSION \"5.4.15-dev\"",
          "8: #define PHP_VERSION_ID 50415",
          "",
          "[Added Lines]",
          "5: #define PHP_RELEASE_VERSION 16",
          "7: #define PHP_VERSION \"5.4.16-dev\"",
          "8: #define PHP_VERSION_ID 50416",
          "",
          "---------------"
        ]
      }
    }
  ]
}