{
  "cve_id": "CVE-2014-4348",
  "cve_desc": "Multiple cross-site scripting (XSS) vulnerabilities in phpMyAdmin 4.2.x before 4.2.4 allow remote authenticated users to inject arbitrary web script or HTML via a crafted (1) database name or (2) table name that is improperly handled after presence in (a) the favorite list or (b) recent tables.",
  "repo": "phpmyadmin/phpmyadmin",
  "patch_hash": "cb7c703c03f656debcea2a16468bd53660fc888e",
  "patch_info": {
    "commit_hash": "cb7c703c03f656debcea2a16468bd53660fc888e",
    "repo": "phpmyadmin/phpmyadmin",
    "commit_url": "https://github.com/phpmyadmin/phpmyadmin/commit/cb7c703c03f656debcea2a16468bd53660fc888e",
    "files": [
      "libraries/RecentFavoriteTable.class.php",
      "libraries/structure.lib.php"
    ],
    "message": "Fix XSS in recent/favorite tables list feature\n\nSigned-off-by: Ann + J.M <phpMyAdmin@ZweiSteinSoft.de>",
    "before_after_code_files": [
      "libraries/RecentFavoriteTable.class.php||libraries/RecentFavoriteTable.class.php",
      "libraries/structure.lib.php||libraries/structure.lib.php"
    ]
  },
  "patch_diff": {
    "libraries/RecentFavoriteTable.class.php||libraries/RecentFavoriteTable.class.php": [
      "File: libraries/RecentFavoriteTable.class.php -> libraries/RecentFavoriteTable.class.php",
      "--- Hunk 1 ---",
      "[Context before]",
      "206:                     $html .= '<a href=\"sql.php?server=' . $GLOBALS['server']",
      "207:                           . '&db=' . $table['db']",
      "208:                           . '&table=' . $table['table']",
      "211:                     $html .= '</li>';",
      "212:                 }",
      "213:             } else {",
      "",
      "[Removed Lines]",
      "209:                           . '&token=' . $_SESSION[' PMA_token ']",
      "210:                           . '\">`' . $table['db'] . '`.`' . $table['table'] . '`</a>';",
      "",
      "[Added Lines]",
      "209:                           . '&token=' . $_SESSION[' PMA_token '] . '\">`'",
      "210:                           . htmlspecialchars($table['db']) . '`.`'",
      "211:                           . htmlspecialchars($table['table']) . '`</a>';",
      "",
      "---------------",
      "--- Hunk 2 ---",
      "[Context before]",
      "223:                         . PMA_URL_getCommon($fav_params);",
      "224:                     $html .= 'href=\"' . $fav_rm_url",
      "225:                         . '\" title=\"' . __(\"Remove from Favorites\")",
      "227:                         . '\" >'",
      "228:                         . PMA_Util::getIcon('b_favorite.png')",
      "229:                         . '</a>';",
      "",
      "[Removed Lines]",
      "226:                         . '\" data-favtargetn=\"' . $table['db'] . \".\" . $table['table']",
      "",
      "[Added Lines]",
      "227:                         . '\" data-favtargetn=\"'",
      "228:                         . md5($table['db'] . \".\" . $table['table'])",
      "",
      "---------------",
      "--- Hunk 3 ---",
      "[Context before]",
      "231:                     $html .= '<a href=\"sql.php?server=' . $GLOBALS['server']",
      "232:                           . '&db=' . $table['db']",
      "233:                           . '&table=' . $table['table']",
      "236:                     $html .= '</li>';",
      "237:                 }",
      "238:             }",
      "",
      "[Removed Lines]",
      "234:                           . '&token=' . $_SESSION[' PMA_token ']",
      "235:                           . '\">`' . $table['db'] . '`.`' . $table['table'] . '`</a>';",
      "",
      "[Added Lines]",
      "236:                           . '&token=' . $_SESSION[' PMA_token '] . '\">`'",
      "237:                           . htmlspecialchars($table['db']) . '`.`'",
      "238:                           . htmlspecialchars($table['table']) . '`</a>';",
      "",
      "---------------"
    ],
    "libraries/structure.lib.php||libraries/structure.lib.php": [
      "File: libraries/structure.lib.php -> libraries/structure.lib.php",
      "--- Hunk 1 ---",
      "[Context before]",
      "2736: function PMA_getHtmlForFavoriteAnchor($db, $current_table, $titles)",
      "2737: {",
      "2738:     $html_output  = '<a ';",
      "2742:     $html_output .= 'class=\"ajax favorite_table_anchor';",
      "",
      "[Removed Lines]",
      "2739:     $html_output .= 'id=\"' . preg_replace(",
      "2740:         '/\\s+/', '', $current_table['TABLE_NAME']",
      "2741:     ) . '_favorite_anchor\" ';",
      "",
      "[Added Lines]",
      "2739:     $html_output .= 'id=\"' . md5($current_table['TABLE_NAME'])",
      "2740:         . '_favorite_anchor\" ';",
      "",
      "---------------",
      "--- Hunk 2 ---",
      "[Context before]",
      "2746:     $fav_params = array('db' => $db,",
      "2747:         'ajax_request' => true,",
      "2748:         'favorite_table' => $current_table['TABLE_NAME'],",
      "2750:     $fav_url = 'db_structure.php' . PMA_URL_getCommon($fav_params);",
      "2751:     $html_output .= '\" ';",
      "2752:     $html_output .= 'href=\"' . $fav_url",
      "2753:         . '\" title=\"' . ($already_favorite ? __(\"Remove from Favorites\")",
      "2754:         : __(\"Add to Favorites\"))",
      "2756:         . '\" >'",
      "2757:         . (!$already_favorite ? $titles['NoFavorite']",
      "2758:         : $titles['Favorite']) . '</a>';",
      "",
      "[Removed Lines]",
      "2749:         (($already_favorite?'remove':'add') . '_favorite') => true);",
      "2755:         . '\" data-favtargets=\"' . $db . \".\" . $current_table['TABLE_NAME']",
      "",
      "[Added Lines]",
      "2748:         (($already_favorite?'remove':'add') . '_favorite') => true",
      "2749:     );",
      "2755:         . '\" data-favtargets=\"'",
      "2756:         . md5($db . \".\" . $current_table['TABLE_NAME'])",
      "",
      "---------------"
    ]
  },
  "candidates": [
    {
      "candidate_hash": "d74ac17cb46a5153e447d8f7114999cc22ed875e",
      "candidate_info": {
        "commit_hash": "d74ac17cb46a5153e447d8f7114999cc22ed875e",
        "repo": "phpmyadmin/phpmyadmin",
        "commit_url": "https://github.com/phpmyadmin/phpmyadmin/commit/d74ac17cb46a5153e447d8f7114999cc22ed875e",
        "files": [
          "db_structure.php",
          "index.php",
          "js/db_structure.js",
          "js/functions.js",
          "js/navigation.js",
          "libraries/RecentFavoriteTable.class.php",
          "libraries/navigation/NavigationHeader.class.php",
          "libraries/navigation/NavigationTree.class.php",
          "libraries/structure.lib.php",
          "themes/original/css/navigation.css.php",
          "themes/original/img/b_favorite.png",
          "themes/original/img/b_no_favorite.png",
          "themes/pmahomme/css/navigation.css.php"
        ],
        "message": "Improve Navigation\n\nSigned-off-by: Edward Cheng <c4150221@gmail.com>\n\nFix bugs.\n\nSigned-off-by: Edward Cheng <c4150221@gmail.com>",
        "before_after_code_files": [
          "db_structure.php||db_structure.php",
          "index.php||index.php",
          "js/db_structure.js||js/db_structure.js",
          "js/functions.js||js/functions.js",
          "js/navigation.js||js/navigation.js",
          "libraries/RecentFavoriteTable.class.php||libraries/RecentFavoriteTable.class.php",
          "libraries/navigation/NavigationHeader.class.php||libraries/navigation/NavigationHeader.class.php",
          "libraries/navigation/NavigationTree.class.php||libraries/navigation/NavigationTree.class.php",
          "libraries/structure.lib.php||libraries/structure.lib.php",
          "themes/original/css/navigation.css.php||themes/original/css/navigation.css.php",
          "themes/pmahomme/css/navigation.css.php||themes/pmahomme/css/navigation.css.php"
        ]
      },
      "candidate_patch_features": {
        "candidate_earlier_than_patch": 1,
        "same_branch_evolution": 1,
        "olp_code_files": {
          "patch": [
            "libraries/RecentFavoriteTable.class.php||libraries/RecentFavoriteTable.class.php",
            "libraries/structure.lib.php||libraries/structure.lib.php"
          ],
          "candidate": [
            "libraries/RecentFavoriteTable.class.php||libraries/RecentFavoriteTable.class.php",
            "libraries/structure.lib.php||libraries/structure.lib.php"
          ]
        }
      },
      "candidate_diff": {
        "db_structure.php||db_structure.php": [
          "File: db_structure.php -> db_structure.php",
          "--- Hunk 1 ---",
          "[Context before]",
          "38:             json_encode($favorite_tables)",
          "39:         );",
          "40:         $ajax_response->addJSON(",
          "43:         );",
          "44:         $server_id = $GLOBALS['server'];",
          "",
          "[Removed Lines]",
          "41:             'options',",
          "42:             $fav_instance->getHtmlSelectOption()",
          "",
          "[Added Lines]",
          "41:             'list',",
          "42:             $fav_instance->getHtmlList()",
          "",
          "---------------",
          "--- Hunk 2 ---",
          "[Context before]",
          "91:             json_encode($favorite_tables)",
          "92:         );",
          "93:         $ajax_response->addJSON(",
          "96:         );",
          "97:         $ajax_response->addJSON(",
          "98:             'anchor',",
          "",
          "[Removed Lines]",
          "94:             'options',",
          "95:             $fav_instance->getHtmlSelectOption()",
          "",
          "[Added Lines]",
          "94:             'list',",
          "95:             $fav_instance->getHtmlList()",
          "",
          "---------------"
        ],
        "index.php||index.php": [
          "File: index.php -> index.php",
          "--- Hunk 1 ---",
          "[Context before]",
          "60: if ($GLOBALS['is_ajax_request'] && ! empty($_REQUEST['recent_table'])) {",
          "61:     $response = PMA_Response::getInstance();",
          "62:     $response->addJSON(",
          "65:     );",
          "66:     exit;",
          "67: }",
          "",
          "[Removed Lines]",
          "63:         'options',",
          "64:         PMA_RecentFavoriteTable::getInstance('recent')->getHtmlSelectOption()",
          "",
          "[Added Lines]",
          "63:         'list',",
          "64:         PMA_RecentFavoriteTable::getInstance('recent')->getHtmlList()",
          "",
          "---------------"
        ],
        "js/db_structure.js||js/db_structure.js": [
          "File: js/db_structure.js -> js/db_structure.js",
          "--- Hunk 1 ---",
          "[Context before]",
          "396:             $(this).attr(\"title\")",
          "397:         );",
          "398:     });",
          "434: }); // end $()",
          "",
          "[Removed Lines]",
          "401:     $(\".favorite_table_anchor\").live(\"click\", function (event) {",
          "402:         event.preventDefault();",
          "403:         var anchor_id = $(this).attr(\"id\");",
          "404:         $.ajax({",
          "405:             url: $(this).attr('href'),",
          "406:             cache: false,",
          "407:             type: 'POST',",
          "408:             data: {",
          "409:                 favorite_tables: (window.localStorage['favorite_tables']",
          "410:                     !== undefined)",
          "411:                     ? window.localStorage['favorite_tables']",
          "412:                     : ''",
          "413:             },",
          "414:             success: function (data) {",
          "415:                 if (data.changes) {",
          "416:                     $('#favoriteTable').html(data.options);",
          "417:                     $('#' + anchor_id).parent().html(data.anchor);",
          "418:                     PMA_tooltip(",
          "419:                         $('#' + anchor_id),",
          "420:                         'a',",
          "421:                         $('#' + anchor_id).attr(\"title\")",
          "422:                     );",
          "424:                     if (window.localStorage !== undefined) {",
          "425:                         window.localStorage['favorite_tables']",
          "426:                             = data.favorite_tables;",
          "427:                     }",
          "428:                 } else {",
          "429:                     PMA_ajaxShowMessage(data.message);",
          "430:                 }",
          "431:             }",
          "432:         });",
          "433:     });",
          "",
          "[Added Lines]",
          "[None]",
          "",
          "---------------"
        ],
        "js/functions.js||js/functions.js": [
          "File: js/functions.js -> js/functions.js",
          "--- Hunk 1 ---",
          "[Context before]",
          "3355:             $('#update_recent_tables').attr('href'),",
          "3356:             function (data) {",
          "3357:                 if (data.success === true) {",
          "3359:                 }",
          "3360:             }",
          "3361:         );",
          "",
          "[Removed Lines]",
          "3358:                     $('#recentTable').html(data.options);",
          "",
          "[Added Lines]",
          "3358:                     $('#pma_recent_list').html(data.list);",
          "",
          "---------------",
          "--- Hunk 2 ---",
          "[Context before]",
          "3379:                     window.localStorage['favorite_tables']",
          "3380:                         = data.favorite_tables;",
          "3381:                 }",
          "3383:             }",
          "3384:         });",
          "3385:     }",
          "",
          "[Removed Lines]",
          "3382:                 $('#favoriteTable').html(data.options);",
          "",
          "[Added Lines]",
          "3382:                 $('#pma_favorite_list').html(data.list);",
          "",
          "---------------"
        ],
        "js/navigation.js||js/navigation.js": [
          "File: js/navigation.js -> js/navigation.js",
          "--- Hunk 1 ---",
          "[Context before]",
          "94:         }",
          "95:     );",
          "125:     $('li.new_procedure a.ajax, li.new_function a.ajax').live('click', function (event) {",
          "126:         event.preventDefault();",
          "",
          "[Removed Lines]",
          "100:     $('#recentTable').live('change', function () {",
          "101:         if (this.value !== '') {",
          "102:             var arr = jQuery.parseJSON(this.value);",
          "103:             var $form = $(this).closest('form');",
          "104:             $form.find('input[name=db]').val(arr.db);",
          "105:             $form.find('input[name=table]').val(arr.table);",
          "106:             $form.submit();",
          "107:         }",
          "108:     });",
          "113:     $('#favoriteTable').live('change', function () {",
          "114:         if (this.value !== '') {",
          "115:             var arr = jQuery.parseJSON(this.value);",
          "116:             var $form = $(this).closest('form');",
          "117:             $form.find('input[name=db]').val(arr.db);",
          "118:             $form.find('input[name=table]').val(arr.table);",
          "119:             $form.submit();",
          "120:         }",
          "121:         $(this).prop('selectedIndex', 0);",
          "122:     });",
          "",
          "[Added Lines]",
          "[None]",
          "",
          "---------------",
          "--- Hunk 2 ---",
          "[Context before]",
          "262:         });",
          "263:     });",
          "265:     PMA_showCurrentNavigation();",
          "266: });",
          "",
          "[Removed Lines]",
          "[None]",
          "",
          "[Added Lines]",
          "239:     $(\".favorite_table_anchor\").live(\"click\", function (event) {",
          "240:         event.preventDefault();",
          "241:         $self = $(this);",
          "242:         var anchor_id = $self.attr(\"id\");",
          "243:         if($self.attr('favtargetn') != null)",
          "244:             if($('a[favtargets=\"' + $self.attr('favtargetn') + '\"]').length > 0)",
          "245:             {",
          "246:                 $('a[favtargets=\"' + $self.attr('favtargetn') + '\"]').trigger('click');",
          "247:                 return;",
          "248:             }",
          "250:         $.ajax({",
          "251:             url: $self.attr('href'),",
          "252:             cache: false,",
          "253:             type: 'POST',",
          "254:             data: {",
          "255:                 favorite_tables: (window.localStorage['favorite_tables']",
          "256:                     !== undefined)",
          "257:                     ? window.localStorage['favorite_tables']",
          "258:                     : ''",
          "259:             },",
          "260:             success: function (data) {",
          "261:                 if (data.changes) {",
          "262:                     $('#pma_favorite_list').html(data.list);",
          "263:                     $('#' + anchor_id).parent().html(data.anchor);",
          "264:                     PMA_tooltip(",
          "265:                         $('#' + anchor_id),",
          "266:                         'a',",
          "267:                         $('#' + anchor_id).attr(\"title\")",
          "268:                     );",
          "270:                     if (window.localStorage !== undefined) {",
          "271:                         window.localStorage['favorite_tables']",
          "272:                             = data.favorite_tables;",
          "273:                     }",
          "274:                 } else {",
          "275:                     PMA_ajaxShowMessage(data.message);",
          "276:                 }",
          "277:             }",
          "278:         });",
          "279:     });",
          "",
          "---------------",
          "--- Hunk 3 ---",
          "[Context before]",
          "436:             }",
          "437:         }",
          "438:     }",
          "441:     function handleTableOrDb(table, $dbItem) {",
          "442:         if (table) {",
          "",
          "[Removed Lines]",
          "439:     PMA_showFullName($('#pma_navigation_tree_content'));",
          "",
          "[Added Lines]",
          "455:     PMA_showFullName($('#pma_navigation_tree'));",
          "",
          "---------------",
          "--- Hunk 4 ---",
          "[Context before]",
          "872:             $nav_header = $(\"#pma_navigation_header\"),",
          "873:             $nav_tree_content = $(\"#pma_navigation_tree_content\");",
          "874:         $nav_tree.height($nav.height() - $nav_header.height());",
          "886:     };",
          "888:     if ($.cookie('pma_navi_width')) {",
          "",
          "[Removed Lines]",
          "875:         if ($nav_tree_content.length > 0) {",
          "876:             $nav_tree_content.height($nav_tree.height() - $nav_tree_content.position().top);",
          "877:             $nav_tree.css({",
          "878:                 'overflow': 'hidden'",
          "879:             });",
          "880:         } else {",
          "881:             $nav_tree.css({",
          "882:                 'overflow': 'hidden',",
          "883:                 'overflow-y': 'auto'",
          "884:             });",
          "885:         }",
          "",
          "[Added Lines]",
          "891:         $nav_tree_content.height($nav_tree.height() - $nav_tree_content.position().top);",
          "",
          "---------------"
        ],
        "libraries/RecentFavoriteTable.class.php||libraries/RecentFavoriteTable.class.php": [
          "File: libraries/RecentFavoriteTable.class.php -> libraries/RecentFavoriteTable.class.php",
          "--- Hunk 1 ---",
          "[Context before]",
          "177:     }",
          "185:     {",
          "205:         if (count($this->tables)) {",
          "214:         } else {",
          "218:         }",
          "219:         return $html;",
          "220:     }",
          "228:     {",
          "234:         return $html;",
          "235:     }",
          "",
          "[Removed Lines]",
          "184:     public function getHtmlSelectOption()",
          "187:         if ($this->trim() && isset($this->_pmaTable)) {",
          "188:             $this->saveToDb();",
          "189:         }",
          "191:         $first_option = '';",
          "192:         $last_option = '';",
          "193:         switch ($this->table_type) {",
          "194:         case 'recent':",
          "195:             $first_option = __(\"Recent tables\");",
          "196:             $last_option = __(\"There are no recent tables.\");",
          "197:             break;",
          "199:         case 'favorite':",
          "200:             $first_option = __(\"Favorite tables\");",
          "201:             $last_option = __(\"There are no favorite tables.\");",
          "202:             break;",
          "203:         }",
          "204:         $html = '<option value=\"\">(' . $first_option . ') ...</option>';",
          "206:             foreach ($this->tables as $table) {",
          "207:                 $html .= '<option value=\"'",
          "208:                     . htmlspecialchars(json_encode($table)) . '\">'",
          "209:                     . htmlspecialchars(",
          "210:                         '`' . $table['db'] . '`.`' . $table['table'] . '`'",
          "211:                     )",
          "212:                     . '</option>';",
          "213:             }",
          "215:             $html .= '<option value=\"\">'",
          "216:                 . $last_option",
          "217:                 . '</option>';",
          "227:     public function getHtmlSelect()",
          "229:         $html  = '<select name=\"selected_' . $this->table_type",
          "230:             . '_table\" id=\"' . $this->table_type . 'Table\">';",
          "231:         $html .= $this->getHtmlSelectOption();",
          "232:         $html .= '</select>';",
          "",
          "[Added Lines]",
          "184:     public function getHtmlList()",
          "186:         $html = '';",
          "188:             if($this->table_type == 'recent')",
          "189:                 foreach ($this->tables as $table) {",
          "190:                     $html .= '<li>';",
          "191:                     $html .= '<a href=\"sql.php?server=' . $GLOBALS['server']",
          "192:                           . '&db=' . $table['db']",
          "193:                           . '&table=' . $table['table']",
          "194:                           . '&token=' . $_SESSION[' PMA_token ']",
          "195:                           . '\">`' . $table['db'] . '`.`' . $table['table'] . '`</a>';",
          "196:                     $html .= '</li>';",
          "197:                 }",
          "198:             else",
          "199:                 foreach ($this->tables as $table) {",
          "200:                     $html .= '<li>';",
          "202:                     $html .= '<a class=\"ajax favorite_table_anchor\"';",
          "203:                     $fav_params = array('db' => $table['db'],",
          "204:                         'ajax_request' => true,",
          "205:                         'favorite_table' => $table['table'],",
          "206:                         'remove_favorite' => true);",
          "207:                     $fav_rm_url = 'db_structure.php' . PMA_URL_getCommon($fav_params);",
          "208:                     $html .= 'href=\"' . $fav_rm_url",
          "209:                         . '\" title=\"' . __(\"Remove from Favorites\")",
          "210:                         . '\" favtargetn=\"' . $table['db'] . \".\" . $table['table']",
          "211:                         . '\" >'",
          "212:                         . PMA_Util::getIcon('b_favorite.png', __(''))",
          "213:                         . '</a>';",
          "215:                     $html .= '<a href=\"sql.php?server=' . $GLOBALS['server']",
          "216:                           . '&db=' . $table['db']",
          "217:                           . '&table=' . $table['table']",
          "218:                           . '&token=' . $_SESSION[' PMA_token ']",
          "219:                           . '\">`' . $table['db'] . '`.`' . $table['table'] . '`</a>';",
          "220:                     $html .= '</li>';",
          "221:                 }",
          "223:             $html .= '<li >'",
          "224:                   . ($this->table_type == 'recent'",
          "225:                     ?__('There are no recent tables.')",
          "226:                     :__('There are no favorite tables.'))",
          "227:                   . '</li>';",
          "237:     public function getHtml()",
          "239:         $html  = '<div class=\"drop_list\">';",
          "240:         if($this->table_type == 'recent') {",
          "241:             $html .= '<span class=\"drop_button\">' . __('Recents') . '</span><ul id=\"pma_recent_list\">';",
          "242:         }",
          "243:         else {",
          "244:             $html .= '<span class=\"drop_button\">' . __('Favorites') . '</span><ul id=\"pma_favorite_list\">';",
          "245:         }",
          "246:         $html .= $this->getHtmlList();",
          "247:         $html .= '</ul></div>';",
          "",
          "---------------"
        ],
        "libraries/navigation/NavigationHeader.class.php||libraries/navigation/NavigationHeader.class.php": [
          "File: libraries/navigation/NavigationHeader.class.php -> libraries/navigation/NavigationHeader.class.php",
          "--- Hunk 1 ---",
          "[Context before]",
          "49:         $buffer .= $this->_logo();",
          "50:         $buffer .= $this->_links();",
          "51:         $buffer .= $this->_serverChoice();",
          "53:         $buffer .= PMA_Util::getImage(",
          "54:             'ajax_clock_small.gif',",
          "55:             __('Loading\u2026'),",
          "",
          "[Removed Lines]",
          "52:         $buffer .= $this->_recent();",
          "",
          "[Added Lines]",
          "[None]",
          "",
          "---------------",
          "--- Hunk 2 ---",
          "[Context before]",
          "280:         }",
          "281:         return $retval;",
          "282:     }",
          "332: }",
          "333: ?>",
          "",
          "[Removed Lines]",
          "289:     private function _recent()",
          "290:     {",
          "291:         $retval = '';",
          "293:         if ($GLOBALS['cfg']['NumRecentTables'] > 0 || $GLOBALS['cfg']['NumFavoriteTables'] > 0) {",
          "294:             $retval .= '<!-- RECENT START -->';",
          "295:             $retval .= '<div id=\"recentTableList\">';",
          "296:             $retval .= '<form method=\"post\" ';",
          "297:             $retval .= 'action=\"' . $GLOBALS['cfg']['DefaultTabTable'] . '\">';",
          "298:             $retval .= PMA_URL_getHiddenInputs(",
          "299:                 array(",
          "300:                     'db' => '',",
          "301:                     'table' => '',",
          "302:                     'server' => $GLOBALS['server']",
          "303:                 )",
          "304:             );",
          "305:             if ($GLOBALS['cfg']['NumRecentTables'] > 0) {",
          "306:                 $retval .= PMA_RecentFavoriteTable::getInstance('recent')->getHtmlSelect();",
          "307:             }",
          "308:             if ($GLOBALS['cfg']['NumFavoriteTables'] > 0) {",
          "309:                 $retval .= $this->_favorite();",
          "310:             }",
          "311:             $retval .= '</form>';",
          "312:             $retval .= '</div>';",
          "313:             $retval .= '<!-- RECENT END -->';",
          "314:         }",
          "315:         return $retval;",
          "316:     }",
          "323:     private function _favorite()",
          "324:     {",
          "325:         $retval = '';",
          "327:         if ($GLOBALS['cfg']['NumFavoriteTables'] > 0) {",
          "328:             $retval .= PMA_RecentFavoriteTable::getInstance('favorite')->getHtmlSelect();",
          "329:         }",
          "330:         return $retval;",
          "331:     }",
          "",
          "[Added Lines]",
          "[None]",
          "",
          "---------------"
        ],
        "libraries/navigation/NavigationTree.class.php||libraries/navigation/NavigationTree.class.php": [
          "File: libraries/navigation/NavigationTree.class.php -> libraries/navigation/NavigationTree.class.php",
          "--- Hunk 1 ---",
          "[Context before]",
          "652:     public function renderState()",
          "653:     {",
          "654:         $this->_buildPath();",
          "656:         $retval .= $this->_getPageSelector($this->_tree);",
          "657:         $this->groupTree();",
          "658:         $retval .= \"<div id='pma_navigation_tree_content'><ul>\";",
          "",
          "[Removed Lines]",
          "655:         $retval  = $this->_fastFilterHtml($this->_tree);",
          "",
          "[Added Lines]",
          "655:         $retval  = $this->_quickWarp();",
          "656:         $retval .= '<div class=\"clearfloat\"></div>';",
          "657:         $retval .= $this->_fastFilterHtml($this->_tree);",
          "",
          "---------------",
          "--- Hunk 2 ---",
          "[Context before]",
          "1188:             return strcasecmp($a->name, $b->name);",
          "1189:         }",
          "1190:     }",
          "1191: }",
          "1192: ?>",
          "",
          "[Removed Lines]",
          "[None]",
          "",
          "[Added Lines]",
          "1199:     private function _quickWarp()",
          "1200:     {",
          "1201:         $retval  = '<div id=\"pma_quick_warp\">';",
          "1202:         if ($GLOBALS['cfg']['NumRecentTables'] > 0)",
          "1203:         {",
          "1204:             $retval .= PMA_RecentFavoriteTable::getInstance('recent')->getHtml();",
          "1205:         }",
          "1206:         if ($GLOBALS['cfg']['NumFavoriteTables'] > 0)",
          "1207:         {",
          "1208:             $retval .= PMA_RecentFavoriteTable::getInstance('favorite')->getHtml();",
          "1209:         }",
          "1210:         $retval .= '<div class=\"clearfloat\"></div>';",
          "1211:         $retval .= '</div>';",
          "1212:         return $retval;",
          "1213:     }",
          "",
          "---------------"
        ],
        "libraries/structure.lib.php||libraries/structure.lib.php": [
          "File: libraries/structure.lib.php -> libraries/structure.lib.php",
          "--- Hunk 1 ---",
          "[Context before]",
          "2724:     $html_output .= '\" ';",
          "2725:     $html_output .= 'href=\"' . $fav_url",
          "2726:         . '\" title=\"' . ($already_favorite ? __(\"Remove from Favorites\")",
          "2728:         . (!$already_favorite ? $titles['NoFavorite']",
          "2729:         : $titles['Favorite']) . '</a>';",
          "",
          "[Removed Lines]",
          "2727:         : __(\"Add to Favorites\")) . '\" >'",
          "",
          "[Added Lines]",
          "2727:         : __(\"Add to Favorites\"))",
          "2728:         . '\" favtargets=\"' . $db . \".\" . $current_table['TABLE_NAME']",
          "2729:         . '\" >'",
          "",
          "---------------"
        ],
        "themes/original/css/navigation.css.php||themes/original/css/navigation.css.php": [
          "File: themes/original/css/navigation.css.php -> themes/original/css/navigation.css.php",
          "--- Hunk 1 ---",
          "[Context before]",
          "307:     filter: dropshadow(color=#fff, offx=0, offy=1);",
          "308:     border: 1px solid #888;",
          "309: }",
          "",
          "[Removed Lines]",
          "[None]",
          "",
          "[Added Lines]",
          "312: #pma_quick_warp {",
          "313:     margin-top: 5px;",
          "314:     margin-<?php echo $left; ?>: 2px;",
          "315:     position: relative;",
          "316: }",
          "317: #pma_quick_warp .drop_list {",
          "318:     float: <?php echo $left; ?>;",
          "319:     margin-<?php echo $left; ?>: 3px;",
          "320:     padding: 2px 0;",
          "321: }",
          "322: #pma_quick_warp .drop_button{",
          "323:     padding: 0 .3em;",
          "324:     border: 1px solid #ddd;",
          "325:     background: #f2f2f2;",
          "326:     cursor: pointer;",
          "327: }",
          "328: #pma_quick_warp .drop_list:hover .drop_button {",
          "329:     background: #fff;",
          "330: }",
          "331: #pma_quick_warp .drop_list ul {",
          "332:     position: absolute;",
          "333:     margin: 0;",
          "334:     padding: 0;",
          "335:     overflow: hidden;",
          "336:     overflow-y: auto;",
          "337:     list-style: none;",
          "338:     background: #fff;",
          "339:     border: 1px solid #ddd;",
          "340:     border-top-<?php echo $right; ?>-radius: 0;",
          "341:     border-bottom-<?php echo $right; ?>-radius: 0;",
          "342:     top: 100%;",
          "343:     <?php echo $left; ?>: 3px;",
          "344:     <?php echo $right; ?>: 0;",
          "345:     display: none;",
          "346:     z-index: 802;",
          "347: }",
          "348: #pma_quick_warp .drop_list:hover ul{",
          "349:     display: block;",
          "350: }",
          "351: #pma_quick_warp .drop_list li {",
          "352:     padding: 2px .3em;",
          "353: }",
          "354: #pma_quick_warp .drop_list li img {",
          "355:     vertical-align: sub;",
          "356: }",
          "357: #pma_quick_warp .drop_list li:hover {",
          "358:     background: #f2f2f2;",
          "359: }",
          "",
          "---------------"
        ],
        "themes/pmahomme/css/navigation.css.php||themes/pmahomme/css/navigation.css.php": [
          "File: themes/pmahomme/css/navigation.css.php -> themes/pmahomme/css/navigation.css.php",
          "--- Hunk 1 ---",
          "[Context before]",
          "19: #pma_navigation {",
          "20:     width: <?php echo $GLOBALS['cfg']['NaviWidth']; ?>px;",
          "22:     position: fixed;",
          "23:     top: 0;",
          "24:     <?php echo $left; ?>: 0;",
          "",
          "[Removed Lines]",
          "21:     overflow: hidden;",
          "",
          "[Added Lines]",
          "[None]",
          "",
          "---------------",
          "--- Hunk 2 ---",
          "[Context before]",
          "28:     z-index: 800;",
          "29: }",
          "31: #pma_navigation_content {",
          "32:     width: 100%;",
          "33:     height: 100%;",
          "",
          "[Removed Lines]",
          "[None]",
          "",
          "[Added Lines]",
          "30: #pma_navigation_header {",
          "31:     overflow: hidden;",
          "32: }",
          "",
          "---------------",
          "--- Hunk 3 ---",
          "[Context before]",
          "98: #pma_navigation_tree {",
          "99:     margin: 0;",
          "101:     color: #444;",
          "102:     height: 74%;",
          "103:     position: relative;",
          "",
          "[Removed Lines]",
          "100:     margin-<?php echo $left; ?>: 10px;",
          "",
          "[Added Lines]",
          "103:     margin-<?php echo $left; ?>: 5px;",
          "104:     overflow: hidden;",
          "",
          "---------------",
          "--- Hunk 4 ---",
          "[Context before]",
          "109:     position: absolute;",
          "110:     height: 100%;",
          "111: }",
          "113:     color: <?php echo $GLOBALS['cfg']['NaviColor']; ?>;",
          "114: }",
          "116:     text-decoration: underline;",
          "117: }",
          "119:     color: <?php echo $GLOBALS['cfg']['NaviPointerColor']; ?>;",
          "120:     background-color: <?php echo $GLOBALS['cfg']['NaviPointerBackground']; ?>;",
          "121: }",
          "123:     color: <?php echo $GLOBALS['cfg']['NaviPointerColor']; ?>;",
          "124:     background-color: <?php echo $GLOBALS['cfg']['NaviPointerBackground']; ?>;",
          "125: }",
          "127:     padding-left: 4px;",
          "128: }",
          "130:     display: none;",
          "131:     padding-left: 4px;",
          "132: }",
          "134:     display: inline;",
          "135:     opacity: 0.5;",
          "136: }",
          "138:     display: inline;",
          "139:     opacity: 1.0;",
          "140: }",
          "",
          "[Removed Lines]",
          "112: #pma_navigation_tree a {",
          "115: #pma_navigation_tree a:hover {",
          "118: #pma_navigation_tree li.activePointer {",
          "122: #pma_navigation_tree li.selected {",
          "126: #pma_navigation_tree li .dbItemControls {",
          "129: #pma_navigation_tree li .navItemControls {",
          "133: #pma_navigation_tree li.activePointer .navItemControls {",
          "137: #pma_navigation_tree li.activePointer .navItemControls:hover {",
          "",
          "[Added Lines]",
          "116: #pma_navigation_tree_content a {",
          "119: #pma_navigation_tree_content a:hover {",
          "122: #pma_navigation_tree_content li.activePointer {",
          "126: #pma_navigation_tree_content li.selected {",
          "130: #pma_navigation_tree_content li .dbItemControls {",
          "133: #pma_navigation_tree_content li .navItemControls {",
          "137: #pma_navigation_tree_content li.activePointer .navItemControls {",
          "141: #pma_navigation_tree_content li.activePointer .navItemControls:hover {",
          "",
          "---------------",
          "--- Hunk 5 ---",
          "[Context before]",
          "144:     list-style-type: none;",
          "145:     margin: 0;",
          "146: }",
          "148:     position: relative;",
          "149: }",
          "151:     white-space: nowrap;",
          "152:     padding-bottom: 4px;",
          "153:     clear: both;",
          "",
          "[Removed Lines]",
          "147: #pma_navigation_tree ul ul {",
          "150: #pma_navigation_tree li {",
          "",
          "[Added Lines]",
          "151: #pma_navigation_tree_content ul ul {",
          "154: #pma_navigation_tree_content li,",
          "155: #pma_navigation_tree li.fast_filter {",
          "",
          "---------------",
          "--- Hunk 6 ---",
          "[Context before]",
          "155:     border-bottom-left-radius: 3px;",
          "156:     border-top-left-radius: 3px;",
          "157: }",
          "159:     margin: 0;",
          "160: }",
          "162:     display: block;",
          "163: }",
          "165:     position: relative;",
          "166:     width: 1.5em;",
          "167:     height: 1.5em;",
          "",
          "[Removed Lines]",
          "158: #pma_navigation_tree img {",
          "161: #pma_navigation_tree i {",
          "164: #pma_navigation_tree div.block {",
          "",
          "[Added Lines]",
          "163: #pma_navigation_tree_content img {",
          "166: #pma_navigation_tree_content i {",
          "169: #pma_navigation_tree_content div.block {",
          "",
          "---------------",
          "--- Hunk 7 ---",
          "[Context before]",
          "169:     min-height: 16px;",
          "170:     float: <?php echo $left; ?>;",
          "171: }",
          "174:     width: 1.5em;",
          "175:     height: 1.7em;",
          "176:     min-width: 16px;",
          "",
          "[Removed Lines]",
          "172: #pma_navigation_tree div.block i,",
          "173: #pma_navigation_tree div.block b {",
          "",
          "[Added Lines]",
          "177: #pma_navigation_tree_content div.block i,",
          "178: #pma_navigation_tree_content div.block b {",
          "",
          "---------------",
          "--- Hunk 8 ---",
          "[Context before]",
          "180:     <?php echo $left; ?>: 0.75em;",
          "181:     z-index: 0;",
          "182: }",
          "184:     display: block;",
          "185:     border-<?php echo $left; ?>: 1px solid #666;",
          "186:     border-bottom: 1px solid #666;",
          "187: }",
          "189:     border-<?php echo $left; ?>: 0;",
          "190: }",
          "192:     display: block;",
          "193:     height: 0.75em;",
          "194:     bottom: 0;",
          "195:     <?php echo $left; ?>: 0.75em;",
          "196:     border-<?php echo $left; ?>: 1px solid #666;",
          "197: }",
          "200:     position: absolute;",
          "201:     <?php echo $left; ?>: 50%;",
          "202:     top: 50%;",
          "203:     z-index: 10;",
          "204: }",
          "206:     position: relative;",
          "207:     top: -0.6em;",
          "208:     <?php echo $left; ?>: 0;",
          "209:     margin-<?php echo $left; ?>: -7px;",
          "210: }",
          "212:     top: 2px;",
          "213:     <?php echo $left; ?>: 2px;",
          "214: }",
          "216:     background: none;",
          "217: }",
          "219:     line-height: 1.5em;",
          "220:     height: 1.5em;",
          "221:     padding-<?php echo $left; ?>: 0.3em;",
          "222: }",
          "224:     border-<?php echo $left; ?>: 1px solid #666;",
          "225:     margin-<?php echo $left; ?>: 0.75em;",
          "226:     padding-<?php echo $left; ?>: 0.75em;",
          "227: }",
          "229:     border-<?php echo $left; ?>: 0 solid #666;",
          "230: }",
          "",
          "[Removed Lines]",
          "198: #pma_navigation_tree div.block a,",
          "199: #pma_navigation_tree div.block u {",
          "205: #pma_navigation_tree div.block img {",
          "211: #pma_navigation_tree div.throbber img {",
          "215: #pma_navigation_tree li.last > ul {",
          "218: #pma_navigation_tree li > a, #pma_navigation_tree li > i {",
          "223: #pma_navigation_tree .list_container {",
          "228: #pma_navigation_tree .last > .list_container {",
          "",
          "[Added Lines]",
          "203: #pma_navigation_tree_content div.block a,",
          "204: #pma_navigation_tree_content div.block u {",
          "210: #pma_navigation_tree_content div.block img {",
          "216: #pma_navigation_tree_content div.throbber img {",
          "220: #pma_navigation_tree_content li.last > ul {",
          "223: #pma_navigation_tree_content li > a, #pma_navigation_tree_content li > i {",
          "228: #pma_navigation_tree_content .list_container {",
          "233: #pma_navigation_tree_content .last > .list_container {",
          "",
          "---------------",
          "--- Hunk 9 ---",
          "[Context before]",
          "235:     margin-<?php echo $left; ?>: 0.75em;",
          "236:     padding-<?php echo $right; ?>: 35px;",
          "237:     border-<?php echo $left; ?>: 1px solid #666;",
          "238: }",
          "239: li.fast_filter input {",
          "240:     margin: 3px 0 0 0;",
          "",
          "[Removed Lines]",
          "[None]",
          "",
          "[Added Lines]",
          "243:     list-style: none;",
          "",
          "---------------",
          "--- Hunk 10 ---",
          "[Context before]",
          "300:     filter: dropshadow(color=#fff, offx=0, offy=1);",
          "301:     border: 1px solid #888;",
          "302: }",
          "",
          "[Removed Lines]",
          "[None]",
          "",
          "[Added Lines]",
          "311: #pma_quick_warp {",
          "312:     margin-top: 5px;",
          "313:     margin-<?php echo $left; ?>: 2px;",
          "314:     position: relative;",
          "315: }",
          "316: #pma_quick_warp .drop_list {",
          "317:     float: <?php echo $left; ?>;",
          "318:     margin-<?php echo $left; ?>: 3px;",
          "319:     padding: 2px 0;",
          "320: }",
          "321: #pma_quick_warp .drop_button{",
          "322:     padding: 0 .3em;",
          "323:     border: 1px solid #ddd;",
          "324:     border-radius: .3em;",
          "325:     background: #f2f2f2;",
          "326:     cursor: pointer;",
          "327: }",
          "328: #pma_quick_warp .drop_list:hover .drop_button {",
          "329:     background: #fff;",
          "330: }",
          "331: #pma_quick_warp .drop_list ul {",
          "332:     position: absolute;",
          "333:     margin: 0;",
          "334:     padding: 0;",
          "335:     overflow: hidden;",
          "336:     overflow-y: auto;",
          "337:     list-style: none;",
          "338:     background: #fff;",
          "339:     border: 1px solid #ddd;",
          "340:     border-radius: .3em;",
          "341:     border-top-<?php echo $right; ?>-radius: 0;",
          "342:     border-bottom-<?php echo $right; ?>-radius: 0;",
          "343:     box-shadow: 0 0 5px #ccc;",
          "344:     top: 100%;",
          "345:     <?php echo $left; ?>: 3px;",
          "346:     <?php echo $right; ?>: 0;",
          "347:     display: none;",
          "348:     z-index: 802;",
          "349: }",
          "350: #pma_quick_warp .drop_list:hover ul{",
          "351:     display: block;",
          "352: }",
          "353: #pma_quick_warp .drop_list li {",
          "354:     padding: 2px .3em;",
          "355: }",
          "356: #pma_quick_warp .drop_list li img {",
          "357:     vertical-align: sub;",
          "358: }",
          "359: #pma_quick_warp .drop_list li:hover {",
          "360:     background: #f2f2f2;",
          "361: }",
          "",
          "---------------"
        ]
      }
    },
    {
      "candidate_hash": "a182cca00437a3a02c22ea6d21d6550b171fcbd1",
      "candidate_info": {
        "commit_hash": "a182cca00437a3a02c22ea6d21d6550b171fcbd1",
        "repo": "phpmyadmin/phpmyadmin",
        "commit_url": "https://github.com/phpmyadmin/phpmyadmin/commit/a182cca00437a3a02c22ea6d21d6550b171fcbd1",
        "files": [
          "libraries/navigation/NavigationTree.class.php",
          "libraries/structure.lib.php"
        ],
        "message": "Fix coding style\n\nSigned-off-by: Marc Delisle <marc@infomarc.info>",
        "before_after_code_files": [
          "libraries/navigation/NavigationTree.class.php||libraries/navigation/NavigationTree.class.php",
          "libraries/structure.lib.php||libraries/structure.lib.php"
        ]
      },
      "candidate_patch_features": {
        "candidate_earlier_than_patch": 1,
        "same_branch_evolution": 1,
        "olp_code_files": {
          "patch": [
            "libraries/structure.lib.php||libraries/structure.lib.php"
          ],
          "candidate": [
            "libraries/structure.lib.php||libraries/structure.lib.php"
          ]
        }
      },
      "candidate_diff": {
        "libraries/navigation/NavigationTree.class.php||libraries/navigation/NavigationTree.class.php": [
          "File: libraries/navigation/NavigationTree.class.php -> libraries/navigation/NavigationTree.class.php",
          "--- Hunk 1 ---",
          "[Context before]",
          "1202:     private function _quickWarp()",
          "1203:     {",
          "1204:         $retval  = '<div id=\"pma_quick_warp\">';",
          "1207:             $retval .= PMA_RecentFavoriteTable::getInstance('recent')->getHtml();",
          "1208:         }",
          "1211:             $retval .= PMA_RecentFavoriteTable::getInstance('favorite')->getHtml();",
          "1212:         }",
          "1213:         $retval .= '<div class=\"clearfloat\"></div>';",
          "",
          "[Removed Lines]",
          "1205:         if ($GLOBALS['cfg']['NumRecentTables'] > 0)",
          "1206:         {",
          "1209:         if ($GLOBALS['cfg']['NumFavoriteTables'] > 0)",
          "1210:         {",
          "",
          "[Added Lines]",
          "1205:         if ($GLOBALS['cfg']['NumRecentTables'] > 0) {",
          "1208:         if ($GLOBALS['cfg']['NumFavoriteTables'] > 0) {",
          "",
          "---------------"
        ],
        "libraries/structure.lib.php||libraries/structure.lib.php": [
          "File: libraries/structure.lib.php -> libraries/structure.lib.php",
          "--- Hunk 1 ---",
          "[Context before]",
          "2711: function PMA_getHtmlForFavoriteAnchor($db, $current_table, $titles)",
          "2712: {",
          "2713:     $html_output  = '<a ';",
          "2715:     $html_output .= 'class=\"ajax favorite_table_anchor';",
          "",
          "[Removed Lines]",
          "2714:     $html_output .= 'id=\"' . preg_replace('/\\s+/', '', $current_table['TABLE_NAME']) . '_favorite_anchor\" ';",
          "",
          "[Added Lines]",
          "2714:     $html_output .= 'id=\"' . preg_replace(",
          "2715:         '/\\s+/', '', $current_table['TABLE_NAME']",
          "2716:     ) . '_favorite_anchor\" ';",
          "",
          "---------------"
        ]
      }
    },
    {
      "candidate_hash": "e7e8b64dd1004fa9d166734c937de2178b79b0b6",
      "candidate_info": {
        "commit_hash": "e7e8b64dd1004fa9d166734c937de2178b79b0b6",
        "repo": "phpmyadmin/phpmyadmin",
        "commit_url": "https://github.com/phpmyadmin/phpmyadmin/commit/e7e8b64dd1004fa9d166734c937de2178b79b0b6",
        "files": [
          "js/navigation.js",
          "libraries/RecentFavoriteTable.class.php",
          "libraries/structure.lib.php"
        ],
        "message": "HTML5 data attributes for favorite table links\n\nSigned-off-by: Ann + J.M <phpMyAdmin@ZweiSteinSoft.de>",
        "before_after_code_files": [
          "js/navigation.js||js/navigation.js",
          "libraries/RecentFavoriteTable.class.php||libraries/RecentFavoriteTable.class.php",
          "libraries/structure.lib.php||libraries/structure.lib.php"
        ]
      },
      "candidate_patch_features": {
        "candidate_earlier_than_patch": 1,
        "same_branch_evolution": 1,
        "olp_code_files": {
          "patch": [
            "libraries/RecentFavoriteTable.class.php||libraries/RecentFavoriteTable.class.php",
            "libraries/structure.lib.php||libraries/structure.lib.php"
          ],
          "candidate": [
            "libraries/RecentFavoriteTable.class.php||libraries/RecentFavoriteTable.class.php",
            "libraries/structure.lib.php||libraries/structure.lib.php"
          ]
        }
      },
      "candidate_diff": {
        "js/navigation.js||js/navigation.js": [
          "File: js/navigation.js -> js/navigation.js",
          "--- Hunk 1 ---",
          "[Context before]",
          "240:         event.preventDefault();",
          "241:         $self = $(this);",
          "242:         var anchor_id = $self.attr(\"id\");",
          "245:             {",
          "247:                 return;",
          "248:             }",
          "",
          "[Removed Lines]",
          "243:         if($self.attr('favtargetn') != null)",
          "244:             if($('a[favtargets=\"' + $self.attr('favtargetn') + '\"]').length > 0)",
          "246:                 $('a[favtargets=\"' + $self.attr('favtargetn') + '\"]').trigger('click');",
          "",
          "[Added Lines]",
          "243:         if($self.data(\"favtargetn\") != null)",
          "244:             if($('a[data-favtargets=\"' + $self.data(\"favtargetn\") + '\"]').length > 0)",
          "246:                 $('a[data-favtargets=\"' + $self.data(\"favtargetn\") + '\"]').trigger('click');",
          "",
          "---------------"
        ],
        "libraries/RecentFavoriteTable.class.php||libraries/RecentFavoriteTable.class.php": [
          "File: libraries/RecentFavoriteTable.class.php -> libraries/RecentFavoriteTable.class.php",
          "--- Hunk 1 ---",
          "[Context before]",
          "215:                         . PMA_URL_getCommon($fav_params);",
          "216:                     $html .= 'href=\"' . $fav_rm_url",
          "217:                         . '\" title=\"' . __(\"Remove from Favorites\")",
          "219:                         . '\" >'",
          "220:                         . PMA_Util::getIcon('b_favorite.png')",
          "221:                         . '</a>';",
          "",
          "[Removed Lines]",
          "218:                         . '\" favtargetn=\"' . $table['db'] . \".\" . $table['table']",
          "",
          "[Added Lines]",
          "218:                         . '\" data-favtargetn=\"' . $table['db'] . \".\" . $table['table']",
          "",
          "---------------"
        ],
        "libraries/structure.lib.php||libraries/structure.lib.php": [
          "File: libraries/structure.lib.php -> libraries/structure.lib.php",
          "--- Hunk 1 ---",
          "[Context before]",
          "2727:     $html_output .= 'href=\"' . $fav_url",
          "2728:         . '\" title=\"' . ($already_favorite ? __(\"Remove from Favorites\")",
          "2729:         : __(\"Add to Favorites\"))",
          "2731:         . '\" >'",
          "2732:         . (!$already_favorite ? $titles['NoFavorite']",
          "2733:         : $titles['Favorite']) . '</a>';",
          "",
          "[Removed Lines]",
          "2730:         . '\" favtargets=\"' . $db . \".\" . $current_table['TABLE_NAME']",
          "",
          "[Added Lines]",
          "2730:         . '\" data-favtargets=\"' . $db . \".\" . $current_table['TABLE_NAME']",
          "",
          "---------------"
        ]
      }
    },
    {
      "candidate_hash": "e9d59fd7e08b1fd5c96d86e0589c75c8d6c4990a",
      "candidate_info": {
        "commit_hash": "e9d59fd7e08b1fd5c96d86e0589c75c8d6c4990a",
        "repo": "phpmyadmin/phpmyadmin",
        "commit_url": "https://github.com/phpmyadmin/phpmyadmin/commit/e9d59fd7e08b1fd5c96d86e0589c75c8d6c4990a",
        "files": [
          "db_structure.php",
          "doc/faq.rst",
          "index.php",
          "js/db_structure.js",
          "libraries/Header.class.php",
          "libraries/RecentFavoriteTable.class.php",
          "libraries/RecentTable.class.php",
          "libraries/config/messages.inc.php",
          "libraries/navigation/NavigationHeader.class.php",
          "libraries/structure.lib.php"
        ],
        "message": "Implemented Favorite tables feature with Ajax.\n\nSigned-off-by: Ashutosh Dhundhara <ashutoshdhundhara@yahoo.com>\n\nMinor fixes in Settings->Features page and Navigation Header class.\n\nSigned-off-by: Ashutosh Dhundhara <ashutoshdhundhara@yahoo.com>\n\nFixed translation issues in RecentFavoriteTable class.\n\nSigned-off-by: Ashutosh Dhundhara <ashutoshdhundhara@yahoo.com>\n\nFixed error in RecentFavoriteTable class.\n\nSigned-off-by: Ashutosh Dhundhara <ashutoshdhundhara@yahoo.com>\n\nAnother fix in structure.lib.php.\n\nSigned-off-by: Ashutosh Dhundhara <ashutoshdhundhara@yahoo.com>",
        "before_after_code_files": [
          "db_structure.php||db_structure.php",
          "index.php||index.php",
          "js/db_structure.js||js/db_structure.js",
          "libraries/Header.class.php||libraries/Header.class.php",
          "libraries/FavoriteTable.class.php||libraries/RecentFavoriteTable.class.php",
          "libraries/RecentTable.class.php||libraries/RecentTable.class.php",
          "libraries/config/messages.inc.php||libraries/config/messages.inc.php",
          "libraries/navigation/NavigationHeader.class.php||libraries/navigation/NavigationHeader.class.php",
          "libraries/structure.lib.php||libraries/structure.lib.php"
        ]
      },
      "candidate_patch_features": {
        "candidate_earlier_than_patch": 1,
        "same_branch_evolution": 1,
        "olp_code_files": {
          "patch": [
            "libraries/structure.lib.php||libraries/structure.lib.php"
          ],
          "candidate": [
            "libraries/structure.lib.php||libraries/structure.lib.php"
          ]
        }
      },
      "candidate_diff": {
        "db_structure.php||db_structure.php": [
          "File: db_structure.php -> db_structure.php",
          "--- Hunk 1 ---",
          "[Context before]",
          "17: require_once 'libraries/structure.lib.php';",
          "19: $response = PMA_Response::getInstance();",
          "20: $header   = $response->getHeader();",
          "21: $scripts  = $header->getScripts();",
          "",
          "[Removed Lines]",
          "[None]",
          "",
          "[Added Lines]",
          "20: if ($GLOBALS['is_ajax_request'] && ! empty($_REQUEST['favorite_table'])) {",
          "21:     global $db;",
          "22:     $changes = true;",
          "23:     $msg = '';",
          "24:     $titles = PMA_Util::buildActionTitles();",
          "25:     $fav_instance = PMA_RecentFavoriteTable::getInstance('favorite');",
          "26:     $favorite_table = $_REQUEST['favorite_table'];",
          "27:     $already_favorite = PMA_checkFavoriteTable($db, $favorite_table);",
          "29:     if (isset($_REQUEST['remove_favorite'])) {",
          "30:         if ($already_favorite) {",
          "32:             $fav_instance->remove($db, $favorite_table);",
          "33:         }",
          "34:     } elseif (isset($_REQUEST['add_favorite'])) {",
          "35:         if (!$already_favorite) {",
          "36:             if (count($fav_instance->tables) == $GLOBALS['cfg']['NumFavoriteTables']) {",
          "37:                 $changes = false;",
          "38:                 $msg = '<div class=\"error\"><img src=\"themes/dot.gif\" '",
          "39:                     . 'title=\"\" alt=\"\" class=\"icon ic_s_error\" />'",
          "40:                     . __(\"Favorite List is full!\")",
          "41:                     . '</div>';",
          "42:             } else {",
          "44:                 $fav_instance->add($db, $favorite_table);",
          "45:             }",
          "46:         }",
          "47:     } else {",
          "49:     }",
          "51:     $ajax_response = PMA_Response::getInstance();",
          "52:     $ajax_response->addJSON(",
          "53:         'changes',",
          "54:         $changes",
          "55:     );",
          "56:     if ($changes) {",
          "57:         $ajax_response->addJSON(",
          "58:             'options',",
          "59:             PMA_RecentFavoriteTable::getInstance('favorite')->getHtmlSelectOption()",
          "60:         );",
          "61:         $ajax_response->addJSON(",
          "62:             'anchor',",
          "63:             PMA_getHtmlForFavoriteAnchor($db, array('TABLE_NAME' => $favorite_table), $titles)",
          "64:         );",
          "65:     } else {",
          "66:         $ajax_response->addJSON(",
          "67:             'message',",
          "68:             $msg",
          "69:         );",
          "70:     }",
          "71:     exit;",
          "72: }",
          "",
          "---------------",
          "--- Hunk 2 ---",
          "[Context before]",
          "133: $hidden_fields = array();",
          "134: $odd_row       = true;",
          "135: $sum_row_count_pre = '';",
          "138: foreach ($tables as $keyname => $current_table) {",
          "",
          "[Removed Lines]",
          "137: $fav_instance = PMA_FavoriteTable::getInstance();",
          "",
          "[Added Lines]",
          "192: $fav_instance = PMA_RecentFavoriteTable::getInstance('favorite');",
          "",
          "---------------"
        ],
        "index.php||index.php": [
          "File: index.php -> index.php",
          "--- Hunk 1 ---",
          "[Context before]",
          "60: if ($GLOBALS['is_ajax_request'] && ! empty($_REQUEST['recent_table'])) {",
          "61:     $response = PMA_Response::getInstance();",
          "62:     $response->addJSON(",
          "63:         'options',",
          "65:     );",
          "66:     exit;",
          "67: }",
          "",
          "[Removed Lines]",
          "59: require_once 'libraries/RecentTable.class.php';",
          "64:         PMA_RecentTable::getInstance()->getHtmlSelectOption()",
          "",
          "[Added Lines]",
          "59: require_once 'libraries/RecentFavoriteTable.class.php';",
          "64:         PMA_RecentFavoriteTable::getInstance('recent')->getHtmlSelectOption()",
          "",
          "---------------"
        ],
        "js/db_structure.js||js/db_structure.js": [
          "File: js/db_structure.js -> js/db_structure.js",
          "--- Hunk 1 ---",
          "[Context before]",
          "28:     $(\"a.drop_table_anchor.ajax\").die('click');",
          "29:     $('a.drop_tracking_anchor.ajax').die('click');",
          "30:     $('#real_end_input').die('click');",
          "31: });",
          "",
          "[Removed Lines]",
          "[None]",
          "",
          "[Added Lines]",
          "31:     $(\"a.favorite_table_anchor.ajax\").die('click');",
          "",
          "---------------",
          "--- Hunk 2 ---",
          "[Context before]",
          "396:         );",
          "397:     });",
          "399: }); // end $()",
          "",
          "[Removed Lines]",
          "[None]",
          "",
          "[Added Lines]",
          "401:     $(\".favorite_table_anchor\").live(\"click\", function (event) {",
          "402:         event.preventDefault();",
          "403:         var anchor_id = $(this).attr(\"id\");",
          "404:         $.get(",
          "405:             $(this).attr('href'),",
          "406:             function (data) {",
          "407:                 if (data.success === true) {",
          "408:                     if (data.changes) {",
          "409:                         $('#favoriteTable').html(data.options);",
          "410:                         $('#' + anchor_id).parent().html(data.anchor);",
          "411:                         PMA_tooltip(",
          "412:                             $('#' + anchor_id),",
          "413:                             'a',",
          "414:                             $('#' + anchor_id).attr(\"title\")",
          "415:                         );",
          "416:                     } else {",
          "417:                         PMA_ajaxShowMessage(data.message);",
          "418:                     }",
          "419:                 } else {",
          "420:                     PMA_ajaxShowMessage(data.message);",
          "421:                 }",
          "422:             }",
          "423:         );",
          "424:     });",
          "",
          "---------------"
        ],
        "libraries/Header.class.php||libraries/Header.class.php": [
          "File: libraries/Header.class.php -> libraries/Header.class.php",
          "--- Hunk 1 ---",
          "[Context before]",
          "10: }",
          "12: require_once 'libraries/Scripts.class.php';",
          "15: require_once 'libraries/Menu.class.php';",
          "16: require_once 'libraries/navigation/Navigation.class.php';",
          "17: require_once 'libraries/url_generating.lib.php';",
          "",
          "[Removed Lines]",
          "13: require_once 'libraries/RecentTable.class.php';",
          "14: require_once 'libraries/FavoriteTable.class.php';",
          "",
          "[Added Lines]",
          "13: require_once 'libraries/RecentFavoriteTable.class.php';",
          "",
          "---------------",
          "--- Hunk 2 ---",
          "[Context before]",
          "703:             && strlen($table)",
          "704:             && $GLOBALS['cfg']['NumRecentTables'] > 0",
          "705:         ) {",
          "707:             if ($tmp_result === true) {",
          "708:                 $params  = array('ajax_request' => true, 'recent_table' => true);",
          "709:                 $url     = 'index.php' . PMA_URL_getCommon($params);",
          "",
          "[Removed Lines]",
          "706:             $tmp_result = PMA_RecentTable::getInstance()->add($db, $table);",
          "",
          "[Added Lines]",
          "705:             $tmp_result = PMA_RecentFavoriteTable::getInstance('recent')->add($db, $table);",
          "",
          "---------------"
        ],
        "libraries/FavoriteTable.class.php||libraries/RecentFavoriteTable.class.php": [
          "File: libraries/FavoriteTable.class.php -> libraries/RecentFavoriteTable.class.php",
          "--- Hunk 1 ---",
          "[Context before]",
          "13: require_once './libraries/Message.class.php';",
          "22: {",
          "",
          "[Removed Lines]",
          "21: class PMA_FavoriteTable",
          "",
          "[Added Lines]",
          "23: class PMA_RecentFavoriteTable",
          "",
          "---------------",
          "--- Hunk 2 ---",
          "[Context before]",
          "37:     public $tables;",
          "44:     private static $_instance;",
          "50:     {",
          "51:         if (strlen($GLOBALS['cfg']['Server']['pmadb'])",
          "53:         ) {",
          "54:             $this->_pmaTable",
          "55:                 = PMA_Util::backquote($GLOBALS['cfg']['Server']['pmadb']) . \".\"",
          "57:         }",
          "58:         $server_id = $GLOBALS['server'];",
          "61:                 = isset($this->_pmaTable) ? $this->getFromDb() : array();",
          "62:         }",
          "64:     }",
          "72:     {",
          "73:         if (is_null(self::$_instance)) {",
          "75:         }",
          "76:         return self::$_instance;",
          "77:     }",
          "84:     public function getFromDb()",
          "85:     {",
          "87:         $sql_query",
          "88:             = \" SELECT `tables` FROM \" . $this->_pmaTable .",
          "89:             \" WHERE `username` = '\" . $GLOBALS['cfg']['Server']['user'] . \"'\";",
          "",
          "[Removed Lines]",
          "49:     public function __construct()",
          "52:             && strlen($GLOBALS['cfg']['Server']['favorite'])",
          "56:                 . PMA_Util::backquote($GLOBALS['cfg']['Server']['favorite']);",
          "59:         if (! isset($_SESSION['tmpval']['favorite_tables'][$server_id])) {",
          "60:             $_SESSION['tmpval']['favorite_tables'][$server_id]",
          "63:         $this->tables =& $_SESSION['tmpval']['favorite_tables'][$server_id];",
          "71:     public static function getInstance()",
          "74:             self::$_instance = new PMA_FavoriteTable();",
          "",
          "[Added Lines]",
          "47:     public $table_type;",
          "59:     public function __construct($type)",
          "61:         $this->table_type = $type;",
          "63:             && strlen($GLOBALS['cfg']['Server'][$this->table_type])",
          "67:                 . PMA_Util::backquote($GLOBALS['cfg']['Server'][$this->table_type]);",
          "70:         if (! isset($_SESSION['tmpval'][$this->table_type . '_tables'][$server_id])) {",
          "71:             $_SESSION['tmpval'][$this->table_type . '_tables'][$server_id]",
          "74:         $this->tables =& $_SESSION['tmpval'][$this->table_type . '_tables'][$server_id];",
          "82:     public static function getInstance($type)",
          "85:             self::$_instance = new PMA_RecentFavoriteTable($type);",
          "86:         } else {",
          "87:             if (self::$_instance->table_type != $type) {",
          "88:                 self::$_instance = new PMA_RecentFavoriteTable($type);",
          "89:             }",
          "",
          "---------------",
          "--- Hunk 3 ---",
          "[Context before]",
          "117:         $success = $GLOBALS['dbi']->tryQuery($sql_query, $GLOBALS['controllink']);",
          "119:         if (! $success) {",
          "151:             $message->addMessage('<br /><br />');",
          "152:             $message->addMessage(",
          "153:                 PMA_Message::rawError(",
          "",
          "[Removed Lines]",
          "120:             $message = PMA_Message::error(__('Could not save favorite table!'));",
          "121:             $message->addMessage('<br /><br />');",
          "122:             $message->addMessage(",
          "123:                 PMA_Message::rawError(",
          "124:                     $GLOBALS['dbi']->getError($GLOBALS['controllink'])",
          "125:                 )",
          "126:             );",
          "127:             return $message;",
          "128:         }",
          "129:         return true;",
          "130:     }",
          "137:     public function removeFromDb()",
          "138:     {",
          "139:         $username = $GLOBALS['cfg']['Server']['user'];",
          "140:         $sql_query",
          "141:             = \" REPLACE INTO \" . $this->_pmaTable . \" (`username`, `tables`)\" .",
          "142:                 \" VALUES ('\" . $username . \"', '\"",
          "143:                 . PMA_Util::sqlAddSlashes(",
          "144:                     json_encode($this->tables)",
          "145:                 ) . \"')\";",
          "147:         $success = $GLOBALS['dbi']->tryQuery($sql_query, $GLOBALS['controllink']);",
          "149:         if (! $success) {",
          "150:             $message = PMA_Message::error(__('Could not remove favorite table!'));",
          "",
          "[Added Lines]",
          "135:             $error_msg = '';",
          "136:             switch ($this->table_type) {",
          "137:                 case 'recent':",
          "138:                     $error_msg = __('Could not save recent table!');",
          "139:                     break;",
          "141:                 case 'favorite':",
          "142:                     $error_msg = __('Could not save favorite table!');",
          "143:                     break;",
          "144:             }",
          "145:             $message = PMA_Message::error($error_msg);",
          "",
          "---------------",
          "--- Hunk 4 ---",
          "[Context before]",
          "160:     }",
          "167:     public function trim()",
          "168:     {",
          "170:         $trimming_occurred = count($this->tables) > $max;",
          "171:         while (count($this->tables) > $max) {",
          "172:             array_pop($this->tables);",
          "",
          "[Removed Lines]",
          "169:         $max = max($GLOBALS['cfg']['NumFavoriteTables'], 0);",
          "",
          "[Added Lines]",
          "164:         $max = max($GLOBALS['cfg']['Num' . ucfirst($this->table_type) . 'Tables'], 0);",
          "",
          "---------------",
          "--- Hunk 5 ---",
          "[Context before]",
          "186:             $this->saveToDb();",
          "187:         }",
          "190:         if (count($this->tables)) {",
          "191:             foreach ($this->tables as $table) {",
          "192:                 $html .= '<option value=\"'",
          "",
          "[Removed Lines]",
          "189:         $html = '<option value=\"\">(' . __('Favorite tables') . ') ...</option>';",
          "",
          "[Added Lines]",
          "184:         $first_option = '';",
          "185:         $last_option = '';",
          "186:         switch ($this->table_type) {",
          "187:             case 'recent':",
          "188:                 $first_option = __(\"Recent tables\");",
          "189:                 $last_option = __(\"There are no recent tables.\");",
          "190:                 break;",
          "192:             case 'favorite':",
          "193:                 $first_option = __(\"Favorite tables\");",
          "194:                 $last_option = __(\"There are no favorite tables.\");",
          "195:                 break;",
          "196:         }",
          "197:         $html = '<option value=\"\">(' . $first_option . ') ...</option>';",
          "",
          "---------------",
          "--- Hunk 6 ---",
          "[Context before]",
          "198:             }",
          "199:         } else {",
          "200:             $html .= '<option value=\"\">'",
          "202:                 . '</option>';",
          "203:         }",
          "204:         return $html;",
          "",
          "[Removed Lines]",
          "201:                 . __('There are no favorite tables.')",
          "",
          "[Added Lines]",
          "209:                 . $last_option",
          "",
          "---------------",
          "--- Hunk 7 ---",
          "[Context before]",
          "212:     public function getHtmlSelect()",
          "213:     {",
          "215:         $html .= $this->getHtmlSelectOption();",
          "216:         $html .= '</select>';",
          "",
          "[Removed Lines]",
          "214:         $html  = '<select name=\"selected_favorite_table\" id=\"favoriteTable\">';",
          "",
          "[Added Lines]",
          "222:         $html  = '<select name=\"selected_' . $this->table_type . '_table\" id=\"' . $this->table_type . 'Table\">';",
          "",
          "---------------",
          "--- Hunk 8 ---",
          "[Context before]",
          "263:             }",
          "264:         }",
          "265:         if (isset($this->_pmaTable)) {",
          "267:         }",
          "268:         return true;",
          "269:     }",
          "",
          "[Removed Lines]",
          "266:             return $this->removeFromDb();",
          "",
          "[Added Lines]",
          "274:             return $this->saveToDb();",
          "",
          "---------------"
        ],
        "libraries/RecentTable.class.php||libraries/RecentTable.class.php": [
          "File: libraries/RecentTable.class.php -> libraries/RecentTable.class.php",
          "--- Hunk 1 ---",
          "[Context before]",
          "[No context available]",
          "",
          "[Removed Lines]",
          "[None]",
          "",
          "[Added Lines]",
          "[None]",
          "",
          "---------------"
        ],
        "libraries/config/messages.inc.php||libraries/config/messages.inc.php": [
          "File: libraries/config/messages.inc.php -> libraries/config/messages.inc.php",
          "--- Hunk 1 ---",
          "[Context before]",
          "474: $strConfigNumFavoriteTables_desc",
          "475:     = __('Maximum number of favorite tables; set 0 to disable.');",
          "476: $strConfigNumRecentTables_name = __('Recently used tables');",
          "477: $strConfigRowActionLinks_desc = __('These are Edit, Copy and Delete links.');",
          "478: $strConfigRowActionLinks_name = __('Where to show the table row links');",
          "479: $strConfigNaturalOrder_desc",
          "",
          "[Removed Lines]",
          "[None]",
          "",
          "[Added Lines]",
          "477: $strConfigNumFavoriteTables_name = __('Favorite tables');",
          "",
          "---------------"
        ],
        "libraries/navigation/NavigationHeader.class.php||libraries/navigation/NavigationHeader.class.php": [
          "File: libraries/navigation/NavigationHeader.class.php -> libraries/navigation/NavigationHeader.class.php",
          "--- Hunk 1 ---",
          "[Context before]",
          "289:     private function _recent()",
          "290:     {",
          "291:         $retval = '';",
          "294:             $retval .= '<!-- RECENT START -->';",
          "295:             $retval .= '<div id=\"recentTableList\">';",
          "296:             $retval .= '<form method=\"post\" ';",
          "",
          "[Removed Lines]",
          "293:         if ($GLOBALS['cfg']['NumRecentTables'] > 0) {",
          "",
          "[Added Lines]",
          "293:         if ($GLOBALS['cfg']['NumRecentTables'] > 0 || $GLOBALS['cfg']['NumFavoriteTables'] > 0) {",
          "",
          "---------------",
          "--- Hunk 2 ---",
          "[Context before]",
          "302:                     'server' => $GLOBALS['server']",
          "303:                 )",
          "304:             );",
          "307:             $retval .= '</form>';",
          "308:             $retval .= '</div>';",
          "309:             $retval .= '<!-- RECENT END -->';",
          "",
          "[Removed Lines]",
          "305:             $retval .= PMA_RecentTable::getInstance()->getHtmlSelect();",
          "306:             $retval .= $this->_favorite();",
          "",
          "[Added Lines]",
          "305:             if ($GLOBALS['cfg']['NumRecentTables'] > 0) {",
          "306:                 $retval .= PMA_RecentFavoriteTable::getInstance('recent')->getHtmlSelect();",
          "307:             }",
          "308:             if ($GLOBALS['cfg']['NumFavoriteTables'] > 0) {",
          "309:                 $retval .= $this->_favorite();",
          "310:             }",
          "",
          "---------------",
          "--- Hunk 3 ---",
          "[Context before]",
          "321:         $retval = '';",
          "323:         if ($GLOBALS['cfg']['NumFavoriteTables'] > 0) {",
          "325:         }",
          "326:         return $retval;",
          "327:     }",
          "",
          "[Removed Lines]",
          "324:             $retval .= PMA_FavoriteTable::getInstance()->getHtmlSelect();",
          "",
          "[Added Lines]",
          "328:             $retval .= PMA_RecentFavoriteTable::getInstance('favorite')->getHtmlSelect();",
          "",
          "---------------"
        ],
        "libraries/structure.lib.php||libraries/structure.lib.php": [
          "File: libraries/structure.lib.php -> libraries/structure.lib.php",
          "--- Hunk 1 ---",
          "[Context before]",
          "478:             . '</td>';",
          "479:     }",
          "498:     $html_output .= '<td class=\"center\">' . $browse_table . '</td>';",
          "499:     $html_output .= '<td class=\"center\">'",
          "",
          "[Removed Lines]",
          "481:     $html_output .= '<td class=\"center\">';",
          "482:     $html_output .= '<a ';",
          "483:     $html_output .= 'class=\"ajax favorite_table_anchor';",
          "484:     if ($table_is_view || $current_table['ENGINE'] == null) {",
          "487:         $html_output .= ' view';",
          "488:     }",
          "490:     $already_favorite = PMA_checkFavoriteTable($db, $current_table['TABLE_NAME']);",
          "491:     $html_output .= '\" ';",
          "492:     $html_output .= 'href=\"db_structure.php?&amp;'. PMA_URL_getCommon($db)",
          "493:         . '&amp;' . ($already_favorite?'remove':'add')  . '_favorite=1'",
          "494:         .'&amp;favorite_table=' . urlencode($current_table['TABLE_NAME'])",
          "495:         . '\" title=\"' . ($already_favorite ? __(\"Remove from Favorites\") : __(\"Add to Favorites\")) . '\" >'",
          "496:         . (!$already_favorite ? $titles['NoFavorite'] : $titles['Favorite']) . '</a></td>';",
          "",
          "[Added Lines]",
          "481:     $html_output .= '<td class=\"center\">'",
          "482:         . PMA_getHtmlForFavoriteAnchor($db, $current_table, $titles)",
          "483:         .'</td>';",
          "",
          "---------------",
          "--- Hunk 2 ---",
          "[Context before]",
          "2711:     }",
          "2712:     return false;",
          "2713: }",
          "2714: ?>",
          "",
          "[Removed Lines]",
          "[None]",
          "",
          "[Added Lines]",
          "2711: function PMA_getHtmlForFavoriteAnchor($db, $current_table, $titles)",
          "2712: {",
          "2713:     $html_output  = '<a ';",
          "2714:     $html_output .= 'id=\"' . preg_replace('/\\s+/', '', $current_table['TABLE_NAME']) . '_favorite_anchor\" ';",
          "2715:     $html_output .= 'class=\"ajax favorite_table_anchor';",
          "2718:     $already_favorite = PMA_checkFavoriteTable($db, $current_table['TABLE_NAME']);",
          "2719:     $fav_params = array('db' => $db,",
          "2720:         'ajax_request' => true,",
          "2721:         'favorite_table' => $current_table['TABLE_NAME'],",
          "2722:         (($already_favorite?'remove':'add') . '_favorite') => true);",
          "2723:     $fav_url = 'db_structure.php' . PMA_URL_getCommon($fav_params);",
          "2724:     $html_output .= '\" ';",
          "2725:     $html_output .= 'href=\"' . $fav_url",
          "2726:         . '\" title=\"' . ($already_favorite ? __(\"Remove from Favorites\")",
          "2727:         : __(\"Add to Favorites\")) . '\" >'",
          "2728:         . (!$already_favorite ? $titles['NoFavorite']",
          "2729:         : $titles['Favorite']) . '</a>';",
          "2731:     return $html_output;",
          "2732: }",
          "",
          "---------------"
        ]
      }
    }
  ]
}