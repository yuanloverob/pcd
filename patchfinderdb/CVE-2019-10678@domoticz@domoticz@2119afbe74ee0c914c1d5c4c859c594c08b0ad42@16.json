{
  "cve_id": "CVE-2019-10678",
  "cve_desc": "Domoticz before 4.10579 neglects to categorize \\n and \\r as insecure argument options.",
  "repo": "domoticz/domoticz",
  "patch_hash": "2119afbe74ee0c914c1d5c4c859c594c08b0ad42",
  "patch_info": {
    "commit_hash": "2119afbe74ee0c914c1d5c4c859c594c08b0ad42",
    "repo": "domoticz/domoticz",
    "commit_url": "https://github.com/domoticz/domoticz/commit/2119afbe74ee0c914c1d5c4c859c594c08b0ad42",
    "files": [
      "main/Helper.cpp"
    ],
    "message": "Do not allow enters/returns in arguments (thanks to Fabio Carretto)",
    "before_after_code_files": [
      "main/Helper.cpp||main/Helper.cpp"
    ]
  },
  "patch_diff": {
    "main/Helper.cpp||main/Helper.cpp": [
      "File: main/Helper.cpp -> main/Helper.cpp",
      "--- Hunk 1 ---",
      "[Context before]",
      "1014:  \"$\",",
      "1015:  \"<\",",
      "1016:  \">\",",
      "1017:  NULL",
      "1018: };",
      "",
      "[Removed Lines]",
      "[None]",
      "",
      "[Added Lines]",
      "1017:  \"\\n\",",
      "1018:  \"\\r\",",
      "",
      "---------------"
    ]
  },
  "candidates": [
    {
      "candidate_hash": "9d226dab339f5767ec01ea1bcc9043ceee185cca",
      "candidate_info": {
        "commit_hash": "9d226dab339f5767ec01ea1bcc9043ceee185cca",
        "repo": "domoticz/domoticz",
        "commit_url": "https://github.com/domoticz/domoticz/commit/9d226dab339f5767ec01ea1bcc9043ceee185cca",
        "files": [
          "hardware/Pinger.cpp",
          "hardware/TCPProxy/tcpproxy_server.cpp"
        ],
        "message": "Fix for boot 1.70 get_io_service, fixed #3117",
        "before_after_code_files": [
          "hardware/Pinger.cpp||hardware/Pinger.cpp",
          "hardware/TCPProxy/tcpproxy_server.cpp||hardware/TCPProxy/tcpproxy_server.cpp"
        ]
      },
      "candidate_patch_features": {
        "candidate_earlier_than_patch": 1,
        "same_pr": 1,
        "olp_pr_links": [
          "https://github.com/domoticz/domoticz/pull/3180"
        ],
        "olp_code_files": {
          "patch": [],
          "candidate": []
        }
      },
      "candidate_diff": {
        "hardware/Pinger.cpp||hardware/Pinger.cpp": [
          "File: hardware/Pinger.cpp -> hardware/Pinger.cpp",
          "--- Hunk 1 ---",
          "[Context before]",
          "19: #include <iostream>",
          "21: class pinger",
          "22:  : private domoticz::noncopyable",
          "23: {",
          "",
          "[Removed Lines]",
          "[None]",
          "",
          "[Added Lines]",
          "21: #if BOOST_VERSION >= 107000",
          "22: #define GET_IO_SERVICE(s) ((boost::asio::io_context&)(s).get_executor().context())",
          "23: #else",
          "24: #define GET_IO_SERVICE(s) ((s).get_io_service())",
          "25: #endif",
          "",
          "---------------",
          "--- Hunk 2 ---",
          "[Context before]",
          "76:     num_tries_++;",
          "77:     if (num_tries_ > 4)",
          "78:     {",
          "80:     }",
          "81:     else",
          "82:     {",
          "",
          "[Removed Lines]",
          "79:      resolver_.get_io_service().stop();",
          "",
          "[Added Lines]",
          "85:      GET_IO_SERVICE(resolver_).stop();",
          "",
          "---------------",
          "--- Hunk 3 ---",
          "[Context before]",
          "118:    if (num_replies_++ == 0)",
          "119:     timer_.cancel();",
          "120:    m_PingState = true;",
          "122:   }",
          "123:   else",
          "124:   {",
          "",
          "[Removed Lines]",
          "121:    resolver_.get_io_service().stop();",
          "",
          "[Added Lines]",
          "127:    GET_IO_SERVICE(resolver_).stop();",
          "",
          "---------------"
        ],
        "hardware/TCPProxy/tcpproxy_server.cpp||hardware/TCPProxy/tcpproxy_server.cpp": [
          "File: hardware/TCPProxy/tcpproxy_server.cpp -> hardware/TCPProxy/tcpproxy_server.cpp",
          "--- Hunk 1 ---",
          "[Context before]",
          "15: #include \"stdafx.h\"",
          "16: #include \"tcpproxy_server.h\"",
          "18: namespace tcp_proxy",
          "19: {",
          "20:  bridge::bridge(boost::asio::io_service& ios)",
          "",
          "[Removed Lines]",
          "[None]",
          "",
          "[Added Lines]",
          "18: #if BOOST_VERSION >= 107000",
          "19: #define GET_IO_SERVICE(s) ((boost::asio::io_context&)(s).get_executor().context())",
          "20: #else",
          "21: #define GET_IO_SERVICE(s) ((s).get_io_service())",
          "22: #endif",
          "",
          "---------------",
          "--- Hunk 2 ---",
          "[Context before]",
          "38:   boost::asio::ip::tcp::endpoint end;",
          "42:   boost::asio::ip::tcp::resolver resolver(ios);",
          "43:   boost::asio::ip::tcp::resolver::query query(upstream_host, upstream_port, boost::asio::ip::resolver_query_base::numeric_service);",
          "44:   boost::asio::ip::tcp::resolver::iterator i = resolver.resolve(query);",
          "",
          "[Removed Lines]",
          "41:   boost::asio::io_service &ios=downstream_socket_.get_io_service();",
          "",
          "[Added Lines]",
          "47:   boost::asio::io_service &ios= GET_IO_SERVICE(downstream_socket_);",
          "",
          "---------------"
        ]
      }
    },
    {
      "candidate_hash": "fc4fc96339bdfd47146749c5434e62fac5f7df9a",
      "candidate_info": {
        "commit_hash": "fc4fc96339bdfd47146749c5434e62fac5f7df9a",
        "repo": "domoticz/domoticz",
        "commit_url": "https://github.com/domoticz/domoticz/commit/fc4fc96339bdfd47146749c5434e62fac5f7df9a",
        "files": [
          "main/SQLHelper.cpp",
          "main/WebServer.cpp",
          "main/WebServer.h",
          "www/app/UserVariablesController.js",
          "www/views/uservariables.html"
        ],
        "message": "UserVariable refactoring",
        "before_after_code_files": [
          "main/SQLHelper.cpp||main/SQLHelper.cpp",
          "main/WebServer.cpp||main/WebServer.cpp",
          "main/WebServer.h||main/WebServer.h",
          "www/app/UserVariablesController.js||www/app/UserVariablesController.js",
          "www/views/uservariables.html||www/views/uservariables.html"
        ]
      },
      "candidate_patch_features": {
        "candidate_earlier_than_patch": 1,
        "same_pr": 1,
        "olp_pr_links": [
          "https://github.com/domoticz/domoticz/pull/3180"
        ],
        "olp_code_files": {
          "patch": [],
          "candidate": []
        }
      },
      "candidate_diff": {
        "main/SQLHelper.cpp||main/SQLHelper.cpp": [
          "File: main/SQLHelper.cpp -> main/SQLHelper.cpp",
          "--- Hunk 1 ---",
          "[Context before]",
          "7916:  safe_query(\"INSERT INTO UserVariables (Name,ValueType,Value) VALUES ('%q','%d','%q')\", varname.c_str(), typei, szVarValue.c_str());",
          "7918:  if (m_bEnableEventSystem)",
          "7920:   m_mainworker.m_eventsystem.GetCurrentUserVariables();",
          "7922:  return \"OK\";",
          "7923: }",
          "",
          "[Removed Lines]",
          "7919:  {",
          "7921:  }",
          "",
          "[Added Lines]",
          "[None]",
          "",
          "---------------"
        ],
        "main/WebServer.cpp||main/WebServer.cpp": [
          "File: main/WebServer.cpp -> main/WebServer.cpp",
          "--- Hunk 1 ---",
          "[Context before]",
          "475:    RegisterCommandCode(\"getdevicevalueoptions\", boost::bind(&CWebServer::Cmd_GetDeviceValueOptions, this, _1, _2, _3));",
          "476:    RegisterCommandCode(\"getdevicevalueoptionwording\", boost::bind(&CWebServer::Cmd_GetDeviceValueOptionWording, this, _1, _2, _3));",
          "480:    RegisterCommandCode(\"updateuservariable\", boost::bind(&CWebServer::Cmd_UpdateUserVariable, this, _1, _2, _3));",
          "481:    RegisterCommandCode(\"getuservariables\", boost::bind(&CWebServer::Cmd_GetUserVariables, this, _1, _2, _3));",
          "482:    RegisterCommandCode(\"getuservariable\", boost::bind(&CWebServer::Cmd_GetUserVariable, this, _1, _2, _3));",
          "",
          "[Removed Lines]",
          "478:    RegisterCommandCode(\"deleteuservariable\", boost::bind(&CWebServer::Cmd_DeleteUserVariable, this, _1, _2, _3));",
          "479:    RegisterCommandCode(\"saveuservariable\", boost::bind(&CWebServer::Cmd_SaveUserVariable, this, _1, _2, _3));",
          "",
          "[Added Lines]",
          "478:    RegisterCommandCode(\"adduservariable\", boost::bind(&CWebServer::Cmd_AddUserVariable, this, _1, _2, _3));",
          "480:    RegisterCommandCode(\"deleteuservariable\", boost::bind(&CWebServer::Cmd_DeleteUserVariable, this, _1, _2, _3));",
          "",
          "---------------",
          "--- Hunk 2 ---",
          "[Context before]",
          "1888:    root[\"title\"] = \"DeleteUserVariable\";",
          "1889:   }",
          "1892:   {",
          "1893:    if (session.rights != 2)",
          "1894:    {",
          "",
          "[Removed Lines]",
          "1891:   void CWebServer::Cmd_SaveUserVariable(WebEmSession & session, const request& req, Json::Value &root)",
          "",
          "[Added Lines]",
          "1891:   void CWebServer::Cmd_AddUserVariable(WebEmSession & session, const request& req, Json::Value &root)",
          "",
          "---------------",
          "--- Hunk 3 ---",
          "[Context before]",
          "1916:     session.reply_status = reply::forbidden;",
          "1917:     return; //Only admin user allowed",
          "1918:    }",
          "1919:    std::string idx = request::findValue(&req, \"idx\");",
          "1920:    std::string variablename = request::findValue(&req, \"vname\");",
          "1921:    std::string variablevalue = request::findValue(&req, \"vvalue\");",
          "1922:    std::string variabletype = request::findValue(&req, \"vtype\");",
          "1935:    if (",
          "1936:     (idx.empty()) ||",
          "1937:     (variablename.empty()) ||",
          "",
          "[Removed Lines]",
          "1924:    if (idx.empty())",
          "1925:    {",
          "1927:     std::vector<std::vector<std::string> > result;",
          "1928:     result = m_sql.safe_query(\"SELECT ID FROM UserVariables WHERE Name='%q'\",",
          "1929:      variablename.c_str());",
          "1930:     if (result.empty())",
          "1931:      return;",
          "1932:     idx = result[0][0];",
          "1933:    }",
          "",
          "[Added Lines]",
          "[None]",
          "",
          "---------------",
          "--- Hunk 4 ---",
          "[Context before]",
          "1940:     )",
          "1941:     return;",
          "1944:    root[\"title\"] = \"UpdateUserVariable\";",
          "1945:   }",
          "",
          "[Removed Lines]",
          "1943:    root[\"status\"] = m_sql.UpdateUserVariable(idx, variablename, variabletype, variablevalue, true);",
          "",
          "[Added Lines]",
          "1933:    std::vector<std::vector<std::string> > result;",
          "1934:    result = m_sql.safe_query(\"SELECT Name, ValueType FROM UserVariables WHERE Name='%q'\", variablename.c_str());",
          "1935:    if (result.empty())",
          "1936:     return;",
          "1938:    bool bTypeNameChanged = false;",
          "1939:    if (variablename != result[0][0])",
          "1940:     bTypeNameChanged = true; //new name",
          "1941:    else if (variabletype != result[0][1])",
          "1942:     bTypeNameChanged = true; //new type",
          "1944:    root[\"status\"] = m_sql.UpdateUserVariable(idx, variablename, variabletype, variablevalue, !bTypeNameChanged);",
          "1947:    if (bTypeNameChanged)",
          "1948:    {",
          "1949:     if (m_sql.m_bEnableEventSystem)",
          "1950:      m_mainworker.m_eventsystem.GetCurrentUserVariables();",
          "1951:    }",
          "",
          "---------------"
        ],
        "main/WebServer.h||main/WebServer.h": [
          "File: main/WebServer.h -> main/WebServer.h",
          "--- Hunk 1 ---",
          "[Context before]",
          "163:  void Cmd_GetDeviceValueOptions(WebEmSession & session, const request& req, Json::Value &root);",
          "164:  void Cmd_GetDeviceValueOptionWording(WebEmSession & session, const request& req, Json::Value &root);",
          "165:  void Cmd_DeleteUserVariable(WebEmSession & session, const request& req, Json::Value &root);",
          "167:  void Cmd_UpdateUserVariable(WebEmSession & session, const request& req, Json::Value &root);",
          "168:  void Cmd_GetUserVariables(WebEmSession & session, const request& req, Json::Value &root);",
          "169:  void Cmd_GetUserVariable(WebEmSession & session, const request& req, Json::Value &root);",
          "",
          "[Removed Lines]",
          "166:  void Cmd_SaveUserVariable(WebEmSession & session, const request& req, Json::Value &root);",
          "",
          "[Added Lines]",
          "166:  void Cmd_AddUserVariable(WebEmSession & session, const request& req, Json::Value &root);",
          "",
          "---------------"
        ],
        "www/app/UserVariablesController.js||www/app/UserVariablesController.js": [
          "File: www/app/UserVariablesController.js -> www/app/UserVariablesController.js",
          "--- Hunk 1 ---",
          "[Context before]",
          "1: define(['app'], function (app) {",
          "2:  app.controller('UserVariablesController', ['$scope', '$rootScope', '$location', '$http', '$interval', function ($scope, $rootScope, $location, $http, $interval) {",
          "5:   $scope.varNames = [];",
          "7:   DeleteVariable = function (idx) {",
          "",
          "[Removed Lines]",
          "4:   $scope.userVariableIdx = 0;",
          "",
          "[Added Lines]",
          "[None]",
          "",
          "---------------",
          "--- Hunk 2 ---",
          "[Context before]",
          "19:    });",
          "20:   }",
          "24:    var uservariablename = $('#uservariablesedittable #uservariablename').val();",
          "25:    var uservariabletype = $('#uservariablesedittable #uservariabletype option:selected').val();",
          "26:    var uservariablevalue = $('#uservariablesedittable #uservariablevalue').val();",
          "",
          "[Removed Lines]",
          "22:   AddVariable = function (type) {",
          "23:    var idx = $scope.userVariableIdx;",
          "",
          "[Added Lines]",
          "21:   AddUpdateVariable = function (type, idx) {",
          "",
          "---------------",
          "--- Hunk 3 ---",
          "[Context before]",
          "30:    }",
          "31:    else {",
          "32:     if (type == \"a\") {",
          "34:     }",
          "35:     else if (type == \"u\") {",
          "36:      var url = \"json.htm?type=command&param=updateuservariable&idx=\" + idx + \"&vname=\" + uservariablename + \"&vtype=\" + uservariabletype + \"&vvalue=\" + uservariablevalue;",
          "",
          "[Removed Lines]",
          "33:      var url = \"json.htm?type=command&param=saveuservariable&vname=\" + uservariablename + \"&vtype=\" + uservariabletype + \"&vvalue=\" + uservariablevalue;",
          "",
          "[Added Lines]",
          "31:      var url = \"json.htm?type=command&param=adduservariable&vname=\" + uservariablename + \"&vtype=\" + uservariabletype + \"&vvalue=\" + uservariablevalue;",
          "",
          "---------------",
          "--- Hunk 4 ---",
          "[Context before]",
          "65:   $scope.RefreshUserVariablesTable = function () {",
          "66:    $('#modal').show();",
          "68:    $('#uservariableupdate').attr(\"class\", \"btnstyle3-dis\");",
          "69:    $('#uservariabledelete').attr(\"class\", \"btnstyle3-dis\");",
          "70:    $(\"#uservariableupdate\").attr(\"href\", \"\");",
          "",
          "[Removed Lines]",
          "67:    $scope.userVariableIdx = 0;",
          "",
          "[Added Lines]",
          "[None]",
          "",
          "---------------",
          "--- Hunk 5 ---",
          "[Context before]",
          "135:      if (anSelected.length !== 0) {",
          "136:       var data = oTable.fnGetData(anSelected[0]);",
          "137:       var idx = data[\"DT_RowId\"];",
          "140:       $(\"#uservariabledelete\").attr(\"href\", \"javascript:DeleteVariable(\" + idx + \")\");",
          "141:       $('#uservariableupdate').attr(\"class\", \"btnstyle3\");",
          "142:       $('#uservariabledelete').attr(\"class\", \"btnstyle3\");",
          "",
          "[Removed Lines]",
          "138:       $scope.userVariableIdx = idx;",
          "139:       $(\"#uservariableupdate\").attr(\"href\", \"javascript:AddVariable('u')\");",
          "",
          "[Added Lines]",
          "135:       $(\"#uservariableupdate\").attr(\"href\", \"javascript:AddUpdateVariable('u', \" + idx + \")\");",
          "",
          "---------------"
        ],
        "www/views/uservariables.html||www/views/uservariables.html": [
          "File: www/views/uservariables.html -> www/views/uservariables.html",
          "--- Hunk 1 ---",
          "[Context before]",
          "43:   </tr>",
          "44:   <tr>",
          "45:    <td colspan=\"2\">",
          "47:    </td>",
          "48:   </tr>",
          "49:  </table>",
          "",
          "[Removed Lines]",
          "46:     <a class=\"btnstyle3\" onclick=\"AddVariable('a');\" data-i18n=\"Add\">Add</a>",
          "",
          "[Added Lines]",
          "46:     <a class=\"btnstyle3\" onclick=\"AddUpdateVariable('a',0);\" data-i18n=\"Add\">Add</a>",
          "",
          "---------------"
        ]
      }
    },
    {
      "candidate_hash": "1926b1b3d4ae9582c0a564e0af509ef48117351d",
      "candidate_info": {
        "commit_hash": "1926b1b3d4ae9582c0a564e0af509ef48117351d",
        "repo": "domoticz/domoticz",
        "commit_url": "https://github.com/domoticz/domoticz/commit/1926b1b3d4ae9582c0a564e0af509ef48117351d",
        "files": [
          "plugins/examples/Mutli-Threaded.py"
        ],
        "message": "Added Multi-Threaded example to plugins directory",
        "before_after_code_files": [
          "plugins/examples/Mutli-Threaded.py||plugins/examples/Mutli-Threaded.py"
        ]
      },
      "candidate_patch_features": {
        "candidate_earlier_than_patch": 1,
        "same_pr": 1,
        "olp_pr_links": [
          "https://github.com/domoticz/domoticz/pull/3180"
        ],
        "olp_code_files": {
          "patch": [],
          "candidate": []
        }
      },
      "candidate_diff": {
        "plugins/examples/Mutli-Threaded.py||plugins/examples/Mutli-Threaded.py": [
          "File: plugins/examples/Mutli-Threaded.py -> plugins/examples/Mutli-Threaded.py",
          "--- Hunk 1 ---",
          "[Context before]",
          "[No context available]",
          "",
          "[Removed Lines]",
          "[None]",
          "",
          "[Added Lines]",
          "1: # Multi-threaded example",
          "2: #",
          "3: # Starts a Queue on a thread to write log messages and shuts down properly",
          "4: #",
          "5: # Author: Dnpwwo, 2019",
          "6: #",
          "7: \"\"\"",
          "8: <plugin key=\"MultiThread\" name=\"Multi-threaded example\" author=\"dnpwwo\" version=\"1.0.0\" >",
          "9:     <description>",
          "10:         <h2>Multi-threaded example</h2><br/>",
          "11:         Starts a Queue on a thread to write log messages and shuts down properly<br/>",
          "12:     </description>",
          "13:     <params>",
          "14:         <param field=\"Mode6\" label=\"Debug\" width=\"150px\">",
          "15:             <options>",
          "16:                 <option label=\"None\" value=\"0\"  default=\"true\" />",
          "17:                 <option label=\"Python Only\" value=\"2\"/>",
          "18:                 <option label=\"Basic Debugging\" value=\"62\"/>",
          "19:                 <option label=\"Basic+Messages\" value=\"126\"/>",
          "20:                 <option label=\"Connections Only\" value=\"16\"/>",
          "21:                 <option label=\"Connections+Queue\" value=\"144\"/>",
          "22:                 <option label=\"All\" value=\"-1\"/>",
          "23:             </options>",
          "24:         </param>",
          "25:     </params>",
          "26: </plugin>",
          "27: \"\"\"",
          "28: import Domoticz",
          "29: import sys,os",
          "30: import threading",
          "31: import queue",
          "33: class BasePlugin:",
          "35:     def __init__(self):",
          "36:         self.messageQueue = queue.Queue()",
          "37:         self.messageThread = threading.Thread(name=\"QueueThread\", target=BasePlugin.handleMessage, args=(self,))",
          "39:     def handleMessage(self):",
          "40:         try:",
          "41:             Domoticz.Debug(\"Entering message handler\")",
          "42:             while True:",
          "43:                 Message = self.messageQueue.get(block=True)",
          "44:                 if Message is None:",
          "45:                     Domoticz.Debug(\"Exiting message handler\")",
          "46:                     self.messageQueue.task_done()",
          "47:                     break",
          "49:                 if (Message[\"Type\"] == \"Log\"):",
          "50:                     Domoticz.Log(\"handleMessage: '\"+Message[\"Text\"]+\"'.\")",
          "51:                 elif (Message[\"Status\"] == \"Error\"):",
          "52:                     Domoticz.Status(\"handleMessage: '\"+Message[\"Text\"]+\"'.\")",
          "53:                 elif (Message[\"Type\"] == \"Error\"):",
          "54:                     Domoticz.Error(\"handleMessage: '\"+Message[\"Text\"]+\"'.\")",
          "55:                 self.messageQueue.task_done()",
          "56:         except Exception as err:",
          "57:             Domoticz.Error(\"handleMessage: \"+str(err))",
          "59:     def onStart(self):",
          "60:         if Parameters[\"Mode6\"] != \"0\":",
          "61:             Domoticz.Debugging(int(Parameters[\"Mode6\"]))",
          "62:             DumpConfigToLog()",
          "63:         self.messageThread.start()",
          "64:         Domoticz.Heartbeat(2)",
          "66:     def onHeartbeat(self):",
          "67:         self.messageQueue.put({\"Type\":\"Log\", \"Text\":\"Heartbeat test message\"})",
          "69:     def onStop(self):",
          "70:         # Not needed in an actual plugin",
          "71:         for thread in threading.enumerate():",
          "72:             if (thread.name != threading.current_thread().name):",
          "73:                 Domoticz.Log(\"'\"+thread.name+\"' is running, it must be shutdown otherwise Domoticz will abort on plugin exit.\")",
          "75:         # signal queue thread to exit",
          "76:         self.messageQueue.put(None)",
          "77:         Domoticz.Log(\"Clearing message queue...\")",
          "78:         self.messageQueue.join()",
          "80:         # Wait until queue thread has exited",
          "81:         Domoticz.Log(\"Threads still active: \"+str(threading.active_count())+\", should be 1.\")",
          "82:         while (threading.active_count() > 1):",
          "83:             for thread in threading.enumerate():",
          "84:                 if (thread.name != threading.current_thread().name):",
          "85:                     Domoticz.Log(\"'\"+thread.name+\"' is still running, waiting otherwise Domoticz will abort on plugin exit.\")",
          "86:             time.sleep(1.0)",
          "88: global _plugin",
          "89: _plugin = BasePlugin()",
          "91: def onStart():",
          "92:     global _plugin",
          "93:     _plugin.onStart()",
          "95: def onStop():",
          "96:     global _plugin",
          "97:     _plugin.onStop()",
          "99: def onHeartbeat():",
          "100:     global _plugin",
          "101:     _plugin.onHeartbeat()",
          "103: # Generic helper functions",
          "104: def stringOrBlank(input):",
          "105:     if (input == None): return \"\"",
          "106:     else: return str(input)",
          "108: def DumpConfigToLog():",
          "109:     for x in Parameters:",
          "110:         if Parameters[x] != \"\":",
          "111:             Domoticz.Debug( \"'\" + x + \"':'\" + str(Parameters[x]) + \"'\")",
          "112:     Domoticz.Debug(\"Device count: \" + str(len(Devices)))",
          "113:     for x in Devices:",
          "114:         Domoticz.Debug(\"Device:           \" + str(x) + \" - \" + str(Devices[x]))",
          "115:         Domoticz.Debug(\"Device ID:       '\" + str(Devices[x].ID) + \"'\")",
          "116:         Domoticz.Debug(\"Device Name:     '\" + Devices[x].Name + \"'\")",
          "117:         Domoticz.Debug(\"Device nValue:    \" + str(Devices[x].nValue))",
          "118:         Domoticz.Debug(\"Device sValue:   '\" + Devices[x].sValue + \"'\")",
          "119:         Domoticz.Debug(\"Device LastLevel: \" + str(Devices[x].LastLevel))",
          "120:     return",
          "",
          "---------------"
        ]
      }
    },
    {
      "candidate_hash": "8dd6677b3669228809744cd54c4d68b2581da7ff",
      "candidate_info": {
        "commit_hash": "8dd6677b3669228809744cd54c4d68b2581da7ff",
        "repo": "domoticz/domoticz",
        "commit_url": "https://github.com/domoticz/domoticz/commit/8dd6677b3669228809744cd54c4d68b2581da7ff",
        "files": [
          "www/app/log/DeviceLog.js"
        ],
        "message": "Fixing lighting log for dimmers",
        "before_after_code_files": [
          "www/app/log/DeviceLog.js||www/app/log/DeviceLog.js"
        ]
      },
      "candidate_patch_features": {
        "candidate_earlier_than_patch": 1,
        "same_pr": 1,
        "olp_pr_links": [
          "https://github.com/domoticz/domoticz/pull/3180"
        ],
        "olp_code_files": {
          "patch": [],
          "candidate": []
        }
      },
      "candidate_diff": {
        "www/app/log/DeviceLog.js||www/app/log/DeviceLog.js": [
          "File: www/app/log/DeviceLog.js -> www/app/log/DeviceLog.js",
          "--- Hunk 1 ---",
          "[Context before]",
          "52:             var isLightSwitchType = [",
          "53:                 'Contact', 'Door Contact', 'Dusk Sensor', 'Motion Sensor',",
          "55:             ].includes(vm.device.SwitchType);",
          "57:             return isLightType || isLightSwitchType;",
          "",
          "[Removed Lines]",
          "54:                 'Smoke Detector', 'On/Off'",
          "",
          "[Added Lines]",
          "54:                 'Smoke Detector', 'On/Off', 'Dimmer'",
          "",
          "---------------"
        ]
      }
    },
    {
      "candidate_hash": "bf9de9be9580702eb9d0a6ed473d59d0ba7f3e84",
      "candidate_info": {
        "commit_hash": "bf9de9be9580702eb9d0a6ed473d59d0ba7f3e84",
        "repo": "domoticz/domoticz",
        "commit_url": "https://github.com/domoticz/domoticz/commit/bf9de9be9580702eb9d0a6ed473d59d0ba7f3e84",
        "files": [
          "hardware/Wunderground.cpp"
        ],
        "message": "WU, fixed possible chillsign error",
        "before_after_code_files": [
          "hardware/Wunderground.cpp||hardware/Wunderground.cpp"
        ]
      },
      "candidate_patch_features": {
        "candidate_earlier_than_patch": 1,
        "same_pr": 1,
        "olp_pr_links": [
          "https://github.com/domoticz/domoticz/pull/3180"
        ],
        "olp_code_files": {
          "patch": [],
          "candidate": []
        }
      },
      "candidate_diff": {
        "hardware/Wunderground.cpp||hardware/Wunderground.cpp": [
          "File: hardware/Wunderground.cpp -> hardware/Wunderground.cpp",
          "--- Hunk 1 ---",
          "[Context before]",
          "382:   at10-=(tsen.WIND.temperatureh*256);",
          "383:   tsen.WIND.temperaturel=(BYTE)(at10);",
          "386:   at10=round(std::abs(wind_chill*10.0f));",
          "387:   tsen.WIND.chillh=(BYTE)(at10/256);",
          "388:   at10-=(tsen.WIND.chillh*256);",
          "",
          "[Removed Lines]",
          "385:   tsen.WIND.chillsign=(wind_temp>=0)?0:1;",
          "",
          "[Added Lines]",
          "385:   tsen.WIND.chillsign=(wind_chill>=0)?0:1;",
          "",
          "---------------"
        ]
      }
    }
  ]
}