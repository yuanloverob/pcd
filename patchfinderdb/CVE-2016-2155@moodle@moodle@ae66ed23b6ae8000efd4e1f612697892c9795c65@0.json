{
  "cve_id": "CVE-2016-2155",
  "cve_desc": "The grade-reporting feature in Singleview (aka Single View) in Moodle 2.8.x before 2.8.11, 2.9.x before 2.9.5, and 3.0.x before 3.0.3 does not consider the moodle/grade:manage capability, which allows remote authenticated users to modify \"Exclude grade\" settings by leveraging the Non-Editing Instructor role.",
  "repo": "moodle/moodle",
  "patch_hash": "ae66ed23b6ae8000efd4e1f612697892c9795c65",
  "patch_info": {
    "commit_hash": "ae66ed23b6ae8000efd4e1f612697892c9795c65",
    "repo": "moodle/moodle",
    "commit_url": "https://github.com/moodle/moodle/commit/ae66ed23b6ae8000efd4e1f612697892c9795c65",
    "files": [
      "grade/report/singleview/classes/local/screen/screen.php",
      "grade/report/singleview/classes/local/screen/tablelike.php",
      "grade/report/singleview/classes/local/ui/exclude.php",
      "grade/report/singleview/tests/behat/singleview.feature"
    ],
    "message": "MDL-52378 singleview: Using is_disabled instead of is_locked",
    "before_after_code_files": [
      "grade/report/singleview/classes/local/screen/screen.php||grade/report/singleview/classes/local/screen/screen.php",
      "grade/report/singleview/classes/local/screen/tablelike.php||grade/report/singleview/classes/local/screen/tablelike.php",
      "grade/report/singleview/classes/local/ui/exclude.php||grade/report/singleview/classes/local/ui/exclude.php",
      "grade/report/singleview/tests/behat/singleview.feature||grade/report/singleview/tests/behat/singleview.feature"
    ]
  },
  "patch_diff": {
    "grade/report/singleview/classes/local/screen/screen.php||grade/report/singleview/classes/local/screen/screen.php": [
      "File: grade/report/singleview/classes/local/screen/screen.php -> grade/report/singleview/classes/local/screen/screen.php"
    ],
    "grade/report/singleview/classes/local/screen/tablelike.php||grade/report/singleview/classes/local/screen/tablelike.php": [
      "File: grade/report/singleview/classes/local/screen/tablelike.php -> grade/report/singleview/classes/local/screen/tablelike.php",
      "--- Hunk 1 ---",
      "[Context before]",
      "146:             if ($field == 'exclude' && !has_capability('moodle/grade:manage', $this->context)){",
      "148:             }",
      "150:             $line[] = $html;",
      "",
      "[Removed Lines]",
      "147:                 $html->locked=TRUE;",
      "",
      "[Added Lines]",
      "147:                 $html->disabled = true;",
      "",
      "---------------"
    ],
    "grade/report/singleview/classes/local/ui/exclude.php||grade/report/singleview/classes/local/ui/exclude.php": [
      "File: grade/report/singleview/classes/local/ui/exclude.php -> grade/report/singleview/classes/local/ui/exclude.php",
      "--- Hunk 1 ---",
      "[Context before]",
      "41:     public $name = 'exclude';",
      "",
      "[Removed Lines]",
      "38: class exclude extends grade_attribute_format implements be_checked {",
      "44:     public $locked = FALSE;",
      "",
      "[Added Lines]",
      "38: class exclude extends grade_attribute_format implements be_checked, be_disabled {",
      "44:     public $disabled = false;",
      "",
      "---------------",
      "--- Hunk 2 ---",
      "[Context before]",
      "53:     }",
      "62:     }",
      "",
      "[Removed Lines]",
      "60:     public function is_locked() {",
      "61:         return $this->locked;",
      "",
      "[Added Lines]",
      "60:     public function is_disabled() {",
      "61:         return $this->disabled;",
      "",
      "---------------",
      "--- Hunk 3 ---",
      "[Context before]",
      "71:             $this->get_name(),",
      "72:             $this->get_label(),",
      "73:             $this->is_checked(),",
      "76:         );",
      "77:     }",
      "",
      "[Removed Lines]",
      "75:             $this->is_locked() ? 1 : 0",
      "",
      "[Added Lines]",
      "74:             $this->is_disabled()",
      "",
      "---------------"
    ],
    "grade/report/singleview/tests/behat/singleview.feature||grade/report/singleview/tests/behat/singleview.feature": [
      "File: grade/report/singleview/tests/behat/singleview.feature -> grade/report/singleview/tests/behat/singleview.feature",
      "--- Hunk 1 ---",
      "[Context before]",
      "11:     And the following \"users\" exist:",
      "12:       | username | firstname | lastname | email | idnumber | alternatename |",
      "13:       | teacher1 | Teacher | 1 | teacher1@example.com | t1 | fred |",
      "14:       | student1 | Student | 1 | student1@example.com | s1 | james |",
      "15:       | student2 | Student | 2 | student1@example.com | s2 | holly |",
      "16:       | student3 | Student | 3 | student1@example.com | s3 | anna |",
      "",
      "[Removed Lines]",
      "[None]",
      "",
      "[Added Lines]",
      "14:       | teacher2 | No edit | 1 | teacher2@example.com | t2 | nick |",
      "",
      "---------------",
      "--- Hunk 2 ---",
      "[Context before]",
      "27:     And the following \"course enrolments\" exist:",
      "28:       | user | course | role |",
      "29:       | teacher1 | C1 | editingteacher |",
      "30:       | student1 | C1 | student |",
      "31:       | student2 | C1 | student |",
      "32:       | student3 | C1 | student |",
      "",
      "[Removed Lines]",
      "[None]",
      "",
      "[Added Lines]",
      "31:       | teacher2 | C1 | teacher |",
      "",
      "---------------",
      "--- Hunk 3 ---",
      "[Context before]",
      "44:     And the following \"grade items\" exist:",
      "45:       | itemname | course | gradetype |",
      "46:       | Test grade item | C1 | Scale |",
      "47:     And I log in as \"teacher1\"",
      "48:     And I follow \"Course 1\"",
      "49:     And I navigate to \"Grades\" node in \"Course administration\"",
      "",
      "[Removed Lines]",
      "[None]",
      "",
      "[Added Lines]",
      "49:     And the following \"permission overrides\" exist:",
      "50:       | capability                  | permission | role     | contextlevel  | reference |",
      "51:       | moodle/grade:edit           | Allow      | teacher  | Course        | C1        |",
      "52:       | gradereport/singleview:view | Allow      | teacher  | Course        | C1        |",
      "",
      "---------------",
      "--- Hunk 4 ---",
      "[Context before]",
      "88:     And the following should exist in the \"generaltable\" table:",
      "89:         | First name (Alternate name) Surname | Grade |",
      "90:         | james (Student) 1 | Very good |",
      "92:   Scenario: Single view links work on grade report.",
      "93:     Given I follow \"Single view for Test assignment one\"",
      "",
      "[Removed Lines]",
      "[None]",
      "",
      "[Added Lines]",
      "97:     And I log out",
      "98:     And I log in as \"teacher2\"",
      "99:     And I follow \"Course 1\"",
      "100:     And I navigate to \"Grades\" node in \"Course administration\"",
      "101:     And I click on \"Single view\" \"option\"",
      "102:     And I click on \"Student 4\" \"option\"",
      "103:     And the \"Exclude for Test assignment one\" \"checkbox\" should be disabled",
      "104:     And the \"Override for Test assignment one\" \"checkbox\" should be enabled",
      "",
      "---------------"
    ]
  },
  "candidates": [
    {
      "candidate_hash": "43cd0e3c9bdf661f0a6477e8bf5b4800266b8e36",
      "candidate_info": {
        "commit_hash": "43cd0e3c9bdf661f0a6477e8bf5b4800266b8e36",
        "repo": "moodle/moodle",
        "commit_url": "https://github.com/moodle/moodle/commit/43cd0e3c9bdf661f0a6477e8bf5b4800266b8e36",
        "files": [
          "grade/report/singleview/classes/local/screen/screen.php",
          "grade/report/singleview/classes/local/screen/tablelike.php",
          "grade/report/singleview/classes/local/ui/exclude.php"
        ],
        "message": "MDL-52378 Singleview: Exclude Grade Attribute Permissions\n\nSingleview users must have Manage Grade permission to modify the\nExclude grade attribute.",
        "before_after_code_files": [
          "grade/report/singleview/classes/local/screen/screen.php||grade/report/singleview/classes/local/screen/screen.php",
          "grade/report/singleview/classes/local/screen/tablelike.php||grade/report/singleview/classes/local/screen/tablelike.php",
          "grade/report/singleview/classes/local/ui/exclude.php||grade/report/singleview/classes/local/ui/exclude.php"
        ]
      },
      "candidate_patch_features": {
        "candidate_earlier_than_patch": 1,
        "same_branch_evolution": 1,
        "olp_code_files": {
          "patch": [
            "grade/report/singleview/classes/local/screen/screen.php||grade/report/singleview/classes/local/screen/screen.php",
            "grade/report/singleview/classes/local/screen/tablelike.php||grade/report/singleview/classes/local/screen/tablelike.php",
            "grade/report/singleview/classes/local/ui/exclude.php||grade/report/singleview/classes/local/ui/exclude.php"
          ],
          "candidate": [
            "grade/report/singleview/classes/local/screen/screen.php||grade/report/singleview/classes/local/screen/screen.php",
            "grade/report/singleview/classes/local/screen/tablelike.php||grade/report/singleview/classes/local/screen/tablelike.php",
            "grade/report/singleview/classes/local/ui/exclude.php||grade/report/singleview/classes/local/ui/exclude.php"
          ]
        }
      },
      "candidate_diff": {
        "grade/report/singleview/classes/local/screen/screen.php||grade/report/singleview/classes/local/screen/screen.php": [
          "File: grade/report/singleview/classes/local/screen/screen.php -> grade/report/singleview/classes/local/screen/screen.php",
          "--- Hunk 1 ---",
          "[Context before]",
          "329:                 continue;",
          "330:             }",
          "332:             $msg = $element->set($posted);",
          "",
          "[Removed Lines]",
          "[None]",
          "",
          "[Added Lines]",
          "334:             if ($matches[1] === 'exclude' && !has_capability('moodle/grade:manage', $this->context)){",
          "335:                 $warnings[] = get_string('nopermissions', 'error', get_string('grade:manage', 'role'));",
          "336:                 continue;",
          "337:             }",
          "",
          "---------------"
        ],
        "grade/report/singleview/classes/local/screen/tablelike.php||grade/report/singleview/classes/local/screen/tablelike.php": [
          "File: grade/report/singleview/classes/local/screen/tablelike.php -> grade/report/singleview/classes/local/screen/tablelike.php",
          "--- Hunk 1 ---",
          "[Context before]",
          "141:                 $html .= $this->structure->get_grade_analysis_icon($grade);",
          "142:             }",
          "144:             $line[] = $html;",
          "145:         }",
          "146:         return $line;",
          "",
          "[Removed Lines]",
          "[None]",
          "",
          "[Added Lines]",
          "146:             if ($field == 'exclude' && !has_capability('moodle/grade:manage', $this->context)){",
          "147:                 $html->locked=TRUE;",
          "148:             }",
          "",
          "---------------"
        ],
        "grade/report/singleview/classes/local/ui/exclude.php||grade/report/singleview/classes/local/ui/exclude.php": [
          "File: grade/report/singleview/classes/local/ui/exclude.php -> grade/report/singleview/classes/local/ui/exclude.php",
          "--- Hunk 1 ---",
          "[Context before]",
          "41:     public $name = 'exclude';",
          "",
          "[Removed Lines]",
          "[None]",
          "",
          "[Added Lines]",
          "44:     public $locked = FALSE;",
          "",
          "---------------",
          "--- Hunk 2 ---",
          "[Context before]",
          "49:         return $this->grade->is_excluded();",
          "50:     }",
          "",
          "[Removed Lines]",
          "[None]",
          "",
          "[Added Lines]",
          "60:     public function is_locked() {",
          "61:         return $this->locked;",
          "62:     }",
          "",
          "---------------",
          "--- Hunk 3 ---",
          "[Context before]",
          "58:         return new checkbox_attribute(",
          "59:             $this->get_name(),",
          "60:             $this->get_label(),",
          "62:         );",
          "63:     }",
          "",
          "[Removed Lines]",
          "61:             $this->is_checked()",
          "",
          "[Added Lines]",
          "73:             $this->is_checked(),",
          "75:             $this->is_locked() ? 1 : 0",
          "",
          "---------------"
        ]
      }
    },
    {
      "candidate_hash": "fc14932c40be74ac1bddd7d519cd97a16a5607ac",
      "candidate_info": {
        "commit_hash": "fc14932c40be74ac1bddd7d519cd97a16a5607ac",
        "repo": "moodle/moodle",
        "commit_url": "https://github.com/moodle/moodle/commit/fc14932c40be74ac1bddd7d519cd97a16a5607ac",
        "files": [
          "admin/settings/grades.php",
          "grade/export/txt/tests/behat/export.feature",
          "grade/report/grader/tests/behat/switch_views.feature",
          "grade/report/singleview/tests/behat/singleview.feature",
          "grade/report/user/tests/behat/view_usereport.feature",
          "grade/tests/behat/grade_aggregation.feature",
          "grade/tests/behat/grade_calculated_grade_items.feature",
          "grade/tests/behat/grade_calculated_grade_items_20150627.feature",
          "grade/tests/behat/grade_calculated_weights.feature",
          "grade/tests/behat/grade_contribution_with_extra_credit.feature",
          "grade/tests/behat/grade_hidden_items.feature",
          "grade/tests/behat/grade_letter_boundary.feature",
          "grade/tests/behat/grade_letter_boundary_20160518.feature",
          "grade/tests/behat/grade_natural_exclude_empty.feature",
          "grade/tests/behat/grade_natural_exclude_empty_20150619.feature",
          "grade/tests/behat/grade_natural_normalisation.feature",
          "grade/tests/behat/grade_natural_normalisation_20150619.feature",
          "grade/tests/behat/grade_scales.feature",
          "grade/tests/behat/grade_single_item_scales.feature",
          "grade/tests/behat/grade_view.feature",
          "mod/assign/tests/behat/steps_blind_marking.feature"
        ],
        "message": "MDL-57019 core_grades: change default navigation to tabs\n\nwithout navigation block in boost it is not easy to navigation between gradebook sections",
        "before_after_code_files": [
          "admin/settings/grades.php||admin/settings/grades.php",
          "grade/export/txt/tests/behat/export.feature||grade/export/txt/tests/behat/export.feature",
          "grade/report/grader/tests/behat/switch_views.feature||grade/report/grader/tests/behat/switch_views.feature",
          "grade/report/singleview/tests/behat/singleview.feature||grade/report/singleview/tests/behat/singleview.feature",
          "grade/report/user/tests/behat/view_usereport.feature||grade/report/user/tests/behat/view_usereport.feature",
          "grade/tests/behat/grade_aggregation.feature||grade/tests/behat/grade_aggregation.feature",
          "grade/tests/behat/grade_calculated_grade_items.feature||grade/tests/behat/grade_calculated_grade_items.feature",
          "grade/tests/behat/grade_calculated_grade_items_20150627.feature||grade/tests/behat/grade_calculated_grade_items_20150627.feature",
          "grade/tests/behat/grade_calculated_weights.feature||grade/tests/behat/grade_calculated_weights.feature",
          "grade/tests/behat/grade_contribution_with_extra_credit.feature||grade/tests/behat/grade_contribution_with_extra_credit.feature",
          "grade/tests/behat/grade_hidden_items.feature||grade/tests/behat/grade_hidden_items.feature",
          "grade/tests/behat/grade_letter_boundary.feature||grade/tests/behat/grade_letter_boundary.feature",
          "grade/tests/behat/grade_letter_boundary_20160518.feature||grade/tests/behat/grade_letter_boundary_20160518.feature",
          "grade/tests/behat/grade_natural_exclude_empty.feature||grade/tests/behat/grade_natural_exclude_empty.feature",
          "grade/tests/behat/grade_natural_exclude_empty_20150619.feature||grade/tests/behat/grade_natural_exclude_empty_20150619.feature",
          "grade/tests/behat/grade_natural_normalisation.feature||grade/tests/behat/grade_natural_normalisation.feature",
          "grade/tests/behat/grade_natural_normalisation_20150619.feature||grade/tests/behat/grade_natural_normalisation_20150619.feature",
          "grade/tests/behat/grade_scales.feature||grade/tests/behat/grade_scales.feature",
          "grade/tests/behat/grade_single_item_scales.feature||grade/tests/behat/grade_single_item_scales.feature",
          "grade/tests/behat/grade_view.feature||grade/tests/behat/grade_view.feature",
          "mod/assign/tests/behat/steps_blind_marking.feature||mod/assign/tests/behat/steps_blind_marking.feature"
        ]
      },
      "candidate_patch_features": {
        "candidate_earlier_than_patch": 0,
        "same_branch_evolution": 1,
        "olp_code_files": {
          "patch": [
            "grade/report/singleview/tests/behat/singleview.feature||grade/report/singleview/tests/behat/singleview.feature"
          ],
          "candidate": [
            "grade/report/singleview/tests/behat/singleview.feature||grade/report/singleview/tests/behat/singleview.feature"
          ]
        }
      },
      "candidate_diff": {
        "admin/settings/grades.php||admin/settings/grades.php": [
          "File: admin/settings/grades.php -> admin/settings/grades.php",
          "--- Hunk 1 ---",
          "[Context before]",
          "53:                                                          '3' => '3',",
          "54:                                                          '4' => '4',",
          "55:                                                          '5' => '5')));",
          "57:                                                   array(GRADE_NAVMETHOD_DROPDOWN => new lang_string('dropdown', 'grades'),",
          "58:                                                         GRADE_NAVMETHOD_TABS => new lang_string('tabs', 'grades'),",
          "59:                                                         GRADE_NAVMETHOD_COMBO => new lang_string('combo', 'grades'))));",
          "",
          "[Removed Lines]",
          "56:         $temp->add(new admin_setting_configselect('grade_navmethod', new lang_string('navmethod', 'grades'), null, 0,",
          "",
          "[Added Lines]",
          "56:         $temp->add(new admin_setting_configselect('grade_navmethod', new lang_string('navmethod', 'grades'), null,",
          "57:                                                   GRADE_NAVMETHOD_TABS,",
          "",
          "---------------"
        ],
        "grade/export/txt/tests/behat/export.feature||grade/export/txt/tests/behat/export.feature": [
          "File: grade/export/txt/tests/behat/export.feature -> grade/export/txt/tests/behat/export.feature",
          "--- Hunk 1 ---",
          "[Context before]",
          "30:   @javascript",
          "31:   Scenario: Export grades as text",
          "33:     And I expand all fieldsets",
          "34:     And I click on \"Course total\" \"checkbox\"",
          "35:     And I set the field \"Grade export decimal points\" to \"1\"",
          "",
          "[Removed Lines]",
          "32:     When I set the field \"Grade report\" to \"Plain text file\"",
          "",
          "[Added Lines]",
          "32:     When I follow \"Export\"",
          "33:     And I follow \"Plain text file\"",
          "",
          "---------------",
          "--- Hunk 2 ---",
          "[Context before]",
          "42:   @javascript",
          "43:   Scenario: Export grades as text using real",
          "45:     And I expand all fieldsets",
          "46:     And  I set the following fields to these values:",
          "47:       | Real        | 1                        |",
          "",
          "[Removed Lines]",
          "44:     When I set the field \"Grade report\" to \"Plain text file\"",
          "",
          "[Added Lines]",
          "45:     When I follow \"Export\"",
          "46:     And I follow \"Plain text file\"",
          "",
          "---------------",
          "--- Hunk 3 ---",
          "[Context before]",
          "53:   @javascript",
          "54:   Scenario: Export grades as text using percentages and letters",
          "56:     And  I set the following fields to these values:",
          "57:       | Percentage   | 1                        |",
          "58:       | Letter       | 1                        |",
          "",
          "[Removed Lines]",
          "55:     When I set the field \"Grade report\" to \"Plain text file\"",
          "",
          "[Added Lines]",
          "57:     When I follow \"Export\"",
          "58:     And I follow \"Plain text file\"",
          "",
          "---------------",
          "--- Hunk 4 ---",
          "[Context before]",
          "66:   @javascript",
          "67:   Scenario: Export grades as text using real, percentages and letters",
          "69:     And  I set the following fields to these values:",
          "70:       | Real         | 1                        |",
          "71:       | Percentage   | 1                        |",
          "",
          "[Removed Lines]",
          "68:     When I set the field \"Grade report\" to \"Plain text file\"",
          "",
          "[Added Lines]",
          "71:     When I follow \"Export\"",
          "72:     And I follow \"Plain text file\"",
          "",
          "---------------"
        ],
        "grade/report/grader/tests/behat/switch_views.feature||grade/report/grader/tests/behat/switch_views.feature": [
          "File: grade/report/grader/tests/behat/switch_views.feature -> grade/report/grader/tests/behat/switch_views.feature",
          "--- Hunk 1 ---",
          "[Context before]",
          "61:     And I click on \"Hide\" \"link\" in the \"Test assignment name 2\" activity",
          "62:     And I follow \"Course 1\"",
          "63:     And I click on \"Grades\" \"link\" in the \"Navigation\" \"block\"",
          "65:     And I should see \"Test assignment name 1\"",
          "66:     And I should see \"Test assignment name 2\"",
          "67:     And I should see \"Course total\"",
          "",
          "[Removed Lines]",
          "64:     And I select \"Grader report\" from the \"Grade report\" singleselect",
          "",
          "[Added Lines]",
          "[None]",
          "",
          "---------------",
          "--- Hunk 2 ---",
          "[Context before]",
          "98:     And I log in as \"teacher1\"",
          "99:     And I follow \"Course 1\"",
          "100:     And I click on \"Grades\" \"link\" in the \"Navigation\" \"block\"",
          "102:     And I should see \"Test assignment name 1\"",
          "103:     And I should see \"Test assignment name 2\"",
          "104:     And I should see \"Course total\"",
          "",
          "[Removed Lines]",
          "101:     And I select \"Grader report\" from the \"Grade report\" singleselect",
          "",
          "[Added Lines]",
          "[None]",
          "",
          "---------------"
        ],
        "grade/report/singleview/tests/behat/singleview.feature||grade/report/singleview/tests/behat/singleview.feature": [
          "File: grade/report/singleview/tests/behat/singleview.feature -> grade/report/singleview/tests/behat/singleview.feature",
          "--- Hunk 1 ---",
          "[Context before]",
          "57:   @javascript",
          "58:   Scenario: I can update grades, add feedback and exclude grades.",
          "60:     And I select \"Student 4\" from the \"Select user...\" singleselect",
          "61:     And I set the field \"Override for Test assignment one\" to \"1\"",
          "62:     When I set the following fields to these values:",
          "",
          "[Removed Lines]",
          "59:     Given I select \"Single view\" from the \"Grade report\" singleselect",
          "",
          "[Added Lines]",
          "59:     Given I follow \"Single view\"",
          "",
          "---------------",
          "--- Hunk 2 ---",
          "[Context before]",
          "98:     And I log in as \"teacher2\"",
          "99:     And I follow \"Course 1\"",
          "100:     And I click on \"Grades\" \"link\" in the \"Navigation\" \"block\"",
          "102:     And I click on \"Student 4\" \"option\"",
          "103:     And the \"Exclude for Test assignment one\" \"checkbox\" should be disabled",
          "104:     And the \"Override for Test assignment one\" \"checkbox\" should be enabled",
          "",
          "[Removed Lines]",
          "101:     And I click on \"Single view\" \"option\"",
          "",
          "[Added Lines]",
          "101:     And I follow \"Single view\"",
          "",
          "---------------"
        ],
        "grade/report/user/tests/behat/view_usereport.feature||grade/report/user/tests/behat/view_usereport.feature": [
          "File: grade/report/user/tests/behat/view_usereport.feature -> grade/report/user/tests/behat/view_usereport.feature",
          "--- Hunk 1 ---",
          "[Context before]",
          "13:       And I am on site homepage",
          "14:       And I follow \"Course 1\"",
          "15:       And I click on \"Grades\" \"link\" in the \"Navigation\" \"block\"",
          "17:       And I select \"All users (0)\" from the \"Select all or one user\" singleselect",
          "18:       Then I should see \"No students enrolled in this course yet\"",
          "",
          "[Removed Lines]",
          "16:       And I select \"User report\" from the \"Grade report\" singleselect",
          "",
          "[Added Lines]",
          "16:       And I follow \"User report\"",
          "",
          "---------------"
        ],
        "grade/tests/behat/grade_aggregation.feature||grade/tests/behat/grade_aggregation.feature": [
          "File: grade/tests/behat/grade_aggregation.feature -> grade/tests/behat/grade_aggregation.feature",
          "--- Hunk 1 ---",
          "[Context before]",
          "242:       | Aggregation                     | Natural |",
          "243:       | Include outcomes in aggregation | 1       |",
          "244:       | Exclude empty grades            | 0       |",
          "246:     And I give the grade \"Excellent\" to the user \"Student 1\" for the grade item \"Test outcome item one\"",
          "247:     And I press \"Save changes\"",
          "248:     And I navigate to \"Course grade settings\" node in \"Grade administration > Setup\"",
          "",
          "[Removed Lines]",
          "245:     And I follow \"Grader report\"",
          "",
          "[Added Lines]",
          "245:     And I follow \"View\"",
          "",
          "---------------",
          "--- Hunk 2 ---",
          "[Context before]",
          "307:     And I set the following settings for grade item \"Test outcome item one\":",
          "308:      | Weight adjusted  | 1   |",
          "309:      | aggregationcoef2 | 100 |",
          "311:     And I give the grade \"Excellent\" to the user \"Student 1\" for the grade item \"Test outcome item one\"",
          "312:     And I press \"Save changes\"",
          "313:     And I navigate to \"Course grade settings\" node in \"Grade administration > Setup\"",
          "",
          "[Removed Lines]",
          "310:     And I follow \"Grader report\"",
          "",
          "[Added Lines]",
          "310:     And I follow \"View\"",
          "",
          "---------------",
          "--- Hunk 3 ---",
          "[Context before]",
          "344:     And I set the field \"Show contribution to course total\" to \"Show\"",
          "345:     And I set the field \"Show weightings\" to \"Show\"",
          "346:     And I press \"Save changes\"",
          "348:     And I select \"Myself\" from the \"View report as\" singleselect",
          "349:     And I select \"Student 1\" from the \"Select all or one user\" singleselect",
          "350:     And the following should exist in the \"user-grade\" table:",
          "",
          "[Removed Lines]",
          "347:     And I select \"User report\" from the \"Grade report\" singleselect",
          "",
          "[Added Lines]",
          "347:     And I follow \"User report\"",
          "",
          "---------------",
          "--- Hunk 4 ---",
          "[Context before]",
          "412:       | Item name | Manual item 3 |",
          "413:       | Grade category | Sub category 3 |",
          "414:     And I press \"Save changes\"",
          "416:     And I give the grade \"60.00\" to the user \"Student 1\" for the grade item \"Manual item 1\"",
          "417:     And I give the grade \"20.00\" to the user \"Student 1\" for the grade item \"Manual item 2\"",
          "418:     And I give the grade \"40.00\" to the user \"Student 1\" for the grade item \"Manual item 3\"",
          "",
          "[Removed Lines]",
          "415:     And I follow \"Grader report\"",
          "",
          "[Added Lines]",
          "415:     And I follow \"View\"",
          "",
          "---------------",
          "--- Hunk 5 ---",
          "[Context before]",
          "452:       | Category name | Sub sub category 1 |",
          "453:       | Parent category | Sub category 3 |",
          "454:     And I press \"Save changes\"",
          "456:     And I should see \"270.00 (24.77 %)\" in the \".course\" \"css_element\"",
          "458:   @javascript",
          "459:   Scenario: Natural aggregation from the setup screen",
          "461:     And I set the following settings for grade item \"Course 1\":",
          "462:       | Aggregation          | Natural |",
          "463:     And I set the following settings for grade item \"Sub category 1\":",
          "",
          "[Removed Lines]",
          "455:     And I follow \"Grader report\"",
          "460:     And I select \"Gradebook setup\" from the \"Grade report\" singleselect",
          "",
          "[Added Lines]",
          "455:     And I follow \"View\"",
          "460:     And I follow \"Setup\"",
          "",
          "---------------",
          "--- Hunk 6 ---",
          "[Context before]",
          "519:       | Aggregation          | Natural |",
          "520:       | Exclude empty grades | 0       |",
          "521:     And I turn editing mode off",
          "523:     And I set the field \"Override weight of Test assignment one\" to \"1\"",
          "524:     And I set the field \"Weight of Test assignment one\" to \"0\"",
          "525:     And I set the field \"Override weight of Test assignment six\" to \"1\"",
          "",
          "[Removed Lines]",
          "522:     And I select \"Gradebook setup\" from the \"Grade report\" singleselect",
          "",
          "[Added Lines]",
          "522:     And I follow \"Setup\"",
          "",
          "---------------",
          "--- Hunk 7 ---",
          "[Context before]",
          "534:     And I set the field \"Show weightings\" to \"Show\"",
          "535:     And I press \"Save changes\"",
          "536:     Then I should see \"75.00 (16.85 %)\" in the \".course\" \"css_element\"",
          "538:     And I select \"Myself\" from the \"View report as\" singleselect",
          "539:     And I select \"Student 1\" from the \"Select all or one user\" singleselect",
          "540:     And the following should exist in the \"user-grade\" table:",
          "",
          "[Removed Lines]",
          "537:     And I select \"User report\" from the \"Grade report\" singleselect",
          "",
          "[Added Lines]",
          "537:     And I follow \"User report\"",
          "",
          "---------------"
        ],
        "grade/tests/behat/grade_calculated_grade_items.feature||grade/tests/behat/grade_calculated_grade_items.feature": [
          "File: grade/tests/behat/grade_calculated_grade_items.feature -> grade/tests/behat/grade_calculated_grade_items.feature",
          "--- Hunk 1 ---",
          "[Context before]",
          "39:       | grade item 1 | gi1 |",
          "40:     And I set the following settings for grade item \"Calc cat\":",
          "41:       | Maximum grade | 50 |",
          "43:     And I turn editing mode on",
          "44:     And I give the grade \"75.00\" to the user \"Student 1\" for the grade item \"grade item 1\"",
          "45:     And I press \"Save changes\"",
          "",
          "[Removed Lines]",
          "42:     And I follow \"Grader report\"",
          "",
          "[Added Lines]",
          "42:     And I follow \"View\"",
          "",
          "---------------",
          "--- Hunk 2 ---",
          "[Context before]",
          "66:       | grade item 1 | gi1 |",
          "67:     And I set the following settings for grade item \"Calc cat\":",
          "68:       | Maximum grade | 50 |",
          "71:     And I give the grade \"75.00\" to the user \"Student 1\" for the grade item \"grade item 1\"",
          "72:     And I press \"Save changes\"",
          "73:     And I follow \"User report\"",
          "",
          "[Removed Lines]",
          "69:     And I follow \"Grader report\"",
          "70:     And I turn editing mode on",
          "",
          "[Added Lines]",
          "69:     And I follow \"View\"",
          "70:     And I press \"Turn editing on\"",
          "",
          "---------------",
          "--- Hunk 3 ---",
          "[Context before]",
          "80:     And I navigate to \"Gradebook setup\" node in \"Grade administration > Setup\"",
          "81:     And I set the following settings for grade item \"Calc cat\":",
          "82:       | Maximum grade | 40 |",
          "83:     And I follow \"Grader report\"",
          "84:     And I give the grade \"65.00\" to the user \"Student 2\" for the grade item \"grade item 1\"",
          "85:     And I press \"Save changes\"",
          "",
          "[Removed Lines]",
          "[None]",
          "",
          "[Added Lines]",
          "83:     And I follow \"View\"",
          "",
          "---------------",
          "--- Hunk 4 ---",
          "[Context before]",
          "132:     And I set the following fields to these values:",
          "133:       | Min and max grades used in calculation | Initial min and max grades |",
          "134:     And I press \"Save changes\"",
          "137:     And I give the grade \"75.00\" to the user \"Student 1\" for the grade item \"grade item 1\"",
          "138:     And I press \"Save changes\"",
          "139:     And I follow \"User report\"",
          "",
          "[Removed Lines]",
          "135:     And I follow \"Grader report\"",
          "136:     And I turn editing mode on",
          "",
          "[Added Lines]",
          "136:     And I press \"Turn editing on\"",
          "",
          "---------------",
          "--- Hunk 5 ---",
          "[Context before]",
          "147:     And I set the following settings for grade item \"calc item\":",
          "148:       | Rescale existing grades | No |",
          "149:       | Maximum grade | 40 |",
          "150:     And I follow \"Grader report\"",
          "151:     And I give the grade \"65.00\" to the user \"Student 2\" for the grade item \"grade item 1\"",
          "152:     And I press \"Save changes\"",
          "",
          "[Removed Lines]",
          "[None]",
          "",
          "[Added Lines]",
          "150:     And I follow \"View\"",
          "",
          "---------------"
        ],
        "grade/tests/behat/grade_calculated_grade_items_20150627.feature||grade/tests/behat/grade_calculated_grade_items_20150627.feature": [
          "File: grade/tests/behat/grade_calculated_grade_items_20150627.feature -> grade/tests/behat/grade_calculated_grade_items_20150627.feature",
          "--- Hunk 1 ---",
          "[Context before]",
          "40:       | grade item 1 | gi1 |",
          "41:     And I set the following settings for grade item \"Calc cat\":",
          "42:       | Maximum grade | 50 |",
          "44:     And I turn editing mode on",
          "45:     And I give the grade \"75.00\" to the user \"Student 1\" for the grade item \"grade item 1\"",
          "46:     And I press \"Save changes\"",
          "",
          "[Removed Lines]",
          "43:     And I follow \"Grader report\"",
          "",
          "[Added Lines]",
          "[None]",
          "",
          "---------------",
          "--- Hunk 2 ---",
          "[Context before]",
          "67:       | grade item 1 | gi1 |",
          "68:     And I set the following settings for grade item \"Calc cat\":",
          "69:       | Maximum grade | 50 |",
          "70:     And I follow \"Grader report\"",
          "72:     And I give the grade \"75.00\" to the user \"Student 1\" for the grade item \"grade item 1\"",
          "73:     And I press \"Save changes\"",
          "74:     And I follow \"User report\"",
          "",
          "[Removed Lines]",
          "71:     And I turn editing mode on",
          "",
          "[Added Lines]",
          "69:     And I follow \"View\"",
          "71:     And I press \"Turn editing on\"",
          "",
          "---------------",
          "--- Hunk 3 ---",
          "[Context before]",
          "81:     And I navigate to \"Gradebook setup\" node in \"Grade administration > Setup\"",
          "82:     And I set the following settings for grade item \"Calc cat\":",
          "83:       | Maximum grade | 40 |",
          "84:     And I follow \"Grader report\"",
          "85:     And I give the grade \"65.00\" to the user \"Student 2\" for the grade item \"grade item 1\"",
          "86:     And I press \"Save changes\"",
          "",
          "[Removed Lines]",
          "[None]",
          "",
          "[Added Lines]",
          "84:     And I follow \"View\"",
          "",
          "---------------",
          "--- Hunk 4 ---",
          "[Context before]",
          "134:       | Min and max grades used in calculation | Initial min and max grades |",
          "135:     And I press \"Save changes\"",
          "136:     And I follow \"Grader report\"",
          "138:     And I give the grade \"75.00\" to the user \"Student 1\" for the grade item \"grade item 1\"",
          "139:     And I press \"Save changes\"",
          "140:     And I follow \"User report\"",
          "",
          "[Removed Lines]",
          "137:     And I turn editing mode on",
          "",
          "[Added Lines]",
          "138:     And I press \"Turn editing on\"",
          "",
          "---------------",
          "--- Hunk 5 ---",
          "[Context before]",
          "148:     And I set the following settings for grade item \"calc item\":",
          "149:       | Rescale existing grades | No |",
          "150:       | Maximum grade | 40 |",
          "151:     And I follow \"Grader report\"",
          "152:     And I give the grade \"65.00\" to the user \"Student 2\" for the grade item \"grade item 1\"",
          "153:     And I press \"Save changes\"",
          "",
          "[Removed Lines]",
          "[None]",
          "",
          "[Added Lines]",
          "152:     And I follow \"View\"",
          "",
          "---------------"
        ],
        "grade/tests/behat/grade_calculated_weights.feature||grade/tests/behat/grade_calculated_weights.feature": [
          "File: grade/tests/behat/grade_calculated_weights.feature -> grade/tests/behat/grade_calculated_weights.feature",
          "--- Hunk 1 ---",
          "[Context before]",
          "43:     And I set the field \"Show weightings\" to \"Show\"",
          "44:     And I set the field \"Show contribution to course total\" to \"Show\"",
          "45:     And I press \"Save changes\"",
          "47:     And I press \"Add category\"",
          "48:     And I set the field \"Category name\" to \"Sub category\"",
          "49:     And I press \"Save changes\"",
          "",
          "[Removed Lines]",
          "46:     And I set the field \"Grade report\" to \"Gradebook setup\"",
          "",
          "[Added Lines]",
          "46:     And I follow \"Setup\"",
          "",
          "---------------",
          "--- Hunk 2 ---",
          "[Context before]",
          "59:   Scenario: Mean of grades aggregation",
          "60:     And I set the following settings for grade item \"Course 1\":",
          "61:       | Aggregation | Mean of grades |",
          "63:     And I set the field \"Select all or one user\" to \"Student 1\"",
          "65:     # Check the values in the weights column.",
          "",
          "[Removed Lines]",
          "62:     And I set the field \"Grade report\" to \"User report\"",
          "",
          "[Added Lines]",
          "62:     And I follow \"User report\"",
          "",
          "---------------",
          "--- Hunk 3 ---",
          "[Context before]",
          "84:       | Item weight | 1.0 |",
          "85:     And I set the following settings for grade item \"Sub category\":",
          "86:       | Item weight | 1.0 |",
          "88:     And I set the field \"Select all or one user\" to \"Student 1\"",
          "90:     # Check the values in the weights column.",
          "",
          "[Removed Lines]",
          "87:     And I set the field \"Grade report\" to \"User report\"",
          "",
          "[Added Lines]",
          "87:     And I follow \"User report\"",
          "",
          "---------------",
          "--- Hunk 4 ---",
          "[Context before]",
          "105:       | Aggregation | Simple weighted mean of grades |",
          "106:     And I set the following settings for grade item \"Test assignment three\":",
          "107:       | Extra credit | 1 |",
          "109:     And I set the field \"Select all or one user\" to \"Student 1\"",
          "111:     # Check the values in the weights column.",
          "",
          "[Removed Lines]",
          "108:     And I set the field \"Grade report\" to \"User report\"",
          "",
          "[Added Lines]",
          "108:     And I follow \"View\"",
          "109:     And I follow \"User report\"",
          "",
          "---------------",
          "--- Hunk 5 ---",
          "[Context before]",
          "124:       | Aggregation | Mean of grades (with extra credits) |",
          "125:     And I set the following settings for grade item \"Test assignment three\":",
          "126:       | Extra credit weight | 1.0 |",
          "128:     And I set the field \"Select all or one user\" to \"Student 1\"",
          "130:     # Check the values in the weights column.",
          "",
          "[Removed Lines]",
          "127:     And I set the field \"Grade report\" to \"User report\"",
          "",
          "[Added Lines]",
          "128:     And I follow \"View\"",
          "129:     And I follow \"User report\"",
          "",
          "---------------",
          "--- Hunk 6 ---",
          "[Context before]",
          "141:   Scenario: Median of grades aggregation",
          "142:     And I set the following settings for grade item \"Course 1\":",
          "143:       | Aggregation | Median of grades |",
          "145:     And I set the field \"Select all or one user\" to \"Student 1\"",
          "147:     # Check the values in the weights column.",
          "",
          "[Removed Lines]",
          "144:     And I set the field \"Grade report\" to \"User report\"",
          "",
          "[Added Lines]",
          "146:     And I follow \"View\"",
          "147:     And I follow \"User report\"",
          "",
          "---------------",
          "--- Hunk 7 ---",
          "[Context before]",
          "158:   Scenario: Lowest grade aggregation",
          "159:     And I set the following settings for grade item \"Course 1\":",
          "160:       | Aggregation | Lowest grade |",
          "162:     And I set the field \"Select all or one user\" to \"Student 1\"",
          "164:     # Check the values in the weights column.",
          "",
          "[Removed Lines]",
          "161:     And I set the field \"Grade report\" to \"User report\"",
          "",
          "[Added Lines]",
          "164:     And I follow \"View\"",
          "165:     And I follow \"User report\"",
          "",
          "---------------",
          "--- Hunk 8 ---",
          "[Context before]",
          "175:   Scenario: Highest grade aggregation",
          "176:     And I set the following settings for grade item \"Course 1\":",
          "177:       | Aggregation | Highest grade |",
          "179:     And I set the field \"Select all or one user\" to \"Student 1\"",
          "181:     # Check the values in the weights column.",
          "",
          "[Removed Lines]",
          "178:     And I set the field \"Grade report\" to \"User report\"",
          "",
          "[Added Lines]",
          "182:     And I follow \"View\"",
          "183:     And I follow \"User report\"",
          "",
          "---------------",
          "--- Hunk 9 ---",
          "[Context before]",
          "192:   Scenario: Mode of grades aggregation",
          "193:     And I set the following settings for grade item \"Course 1\":",
          "194:       | Aggregation | Mode of grades |",
          "196:     And I set the field \"Select all or one user\" to \"Student 1\"",
          "198:     # Check the values in the weights column.",
          "",
          "[Removed Lines]",
          "195:     And I set the field \"Grade report\" to \"User report\"",
          "",
          "[Added Lines]",
          "200:     And I follow \"View\"",
          "201:     And I follow \"User report\"",
          "",
          "---------------",
          "--- Hunk 10 ---",
          "[Context before]",
          "213:       | Aggregation | Weighted mean of grades |",
          "214:     And I set the following settings for grade item \"Test assignment three\":",
          "215:       | Extra credit | 1 |",
          "217:     And I set the field \"Select all or one user\" to \"Student 1\"",
          "219:     # Check the values in the weights column.",
          "",
          "[Removed Lines]",
          "216:     And I set the field \"Grade report\" to \"User report\"",
          "",
          "[Added Lines]",
          "222:     And I follow \"View\"",
          "223:     And I follow \"User report\"",
          "",
          "---------------",
          "--- Hunk 11 ---",
          "[Context before]",
          "232:   Scenario: View user report with natural aggregation",
          "233:     And I set the following settings for grade item \"Test assignment three\":",
          "234:       | Extra credit | 1 |",
          "236:     And I set the field \"Select all or one user\" to \"Student 1\"",
          "238:     # Check the values in the weights column.",
          "",
          "[Removed Lines]",
          "235:     And I set the field \"Grade report\" to \"User report\"",
          "",
          "[Added Lines]",
          "242:     And I follow \"View\"",
          "243:     And I follow \"User report\"",
          "",
          "---------------"
        ],
        "grade/tests/behat/grade_contribution_with_extra_credit.feature||grade/tests/behat/grade_contribution_with_extra_credit.feature": [
          "File: grade/tests/behat/grade_contribution_with_extra_credit.feature -> grade/tests/behat/grade_contribution_with_extra_credit.feature",
          "--- Hunk 1 ---",
          "[Context before]",
          "56:     And I press \"Save changes\"",
          "58:   Scenario Outline: The contribution of extra credit items is normalised",
          "60:     When I set the following settings for grade item \"Course 1\":",
          "61:       | Aggregation | <aggregation> |",
          "62:     And I set the following settings for grade item \"Manual item 2\":",
          "",
          "[Removed Lines]",
          "59:     Given I set the field \"Grade report\" to \"Gradebook setup\"",
          "",
          "[Added Lines]",
          "59:     Given I follow \"Setup\"",
          "",
          "---------------",
          "--- Hunk 2 ---",
          "[Context before]",
          "65:       | Extra credit | 1 |",
          "66:     And I set the following settings for grade item \"Manual item 4\":",
          "67:       | Extra credit | 1 |",
          "69:     And I set the field \"Select all or one user\" to \"Student 1\"",
          "70:     Then the following should exist in the \"user-grade\" table:",
          "71:       | Grade item    | Calculated weight | Grade  | Contribution to course total |",
          "",
          "[Removed Lines]",
          "68:     And I set the field \"Grade report\" to \"User report\"",
          "",
          "[Added Lines]",
          "68:     And I follow \"View\"",
          "69:     And I follow \"User report\"",
          "",
          "---------------"
        ],
        "grade/tests/behat/grade_hidden_items.feature||grade/tests/behat/grade_hidden_items.feature": [
          "File: grade/tests/behat/grade_hidden_items.feature -> grade/tests/behat/grade_hidden_items.feature",
          "--- Hunk 1 ---",
          "[Context before]",
          "45:     And I press \"Save changes\"",
          "46:     And I follow \"Course 1\"",
          "47:     And I click on \"Grades\" \"link\" in the \"Navigation\" \"block\"",
          "49:     And I select \"Myself\" from the \"View report as\" singleselect",
          "50:     And I select \"Student 1\" from the \"Select all or one user\" singleselect",
          "51:     Then the following should exist in the \"user-grade\" table:",
          "",
          "[Removed Lines]",
          "48:     And I select \"User report\" from the \"Grade report\" singleselect",
          "",
          "[Added Lines]",
          "48:     And I follow \"User report\"",
          "",
          "---------------"
        ],
        "grade/tests/behat/grade_letter_boundary.feature||grade/tests/behat/grade_letter_boundary.feature": [
          "File: grade/tests/behat/grade_letter_boundary.feature -> grade/tests/behat/grade_letter_boundary.feature",
          "--- Hunk 1 ---",
          "[Context before]",
          "23:     And I log in as \"teacher1\"",
          "24:     And I follow \"Course 1\"",
          "25:     And I click on \"Grades\" \"link\" in the \"Navigation\" \"block\"",
          "27:     And I set the following fields to these values:",
          "28:       | Grade display type | Letter |",
          "29:     And I press \"Save changes\"",
          "",
          "[Removed Lines]",
          "26:     And I select \"Course grade settings\" from the \"Grade report\" singleselect",
          "",
          "[Added Lines]",
          "26:     And I follow \"Setup\"",
          "27:     And I follow \"Course grade settings\"",
          "",
          "---------------",
          "--- Hunk 2 ---",
          "[Context before]",
          "33:       | id_override | 1 |",
          "34:       | id_gradeboundary10 | 57 |",
          "35:     And I press \"Save changes\"",
          "37:     And I press \"Turn editing on\"",
          "38:     And I give the grade \"57\" to the user \"Student 1\" for the grade item \"Test assignment one\"",
          "39:     And I press \"Save changes\"",
          "",
          "[Removed Lines]",
          "36:     And I select \"Grader report\" from the \"Grade report\" singleselect",
          "",
          "[Added Lines]",
          "37:     And I follow \"View\"",
          "",
          "---------------"
        ],
        "grade/tests/behat/grade_letter_boundary_20160518.feature||grade/tests/behat/grade_letter_boundary_20160518.feature": [
          "File: grade/tests/behat/grade_letter_boundary_20160518.feature -> grade/tests/behat/grade_letter_boundary_20160518.feature",
          "--- Hunk 1 ---",
          "[Context before]",
          "24:     And I log in as \"teacher1\"",
          "25:     And I follow \"Course 1\"",
          "26:     And I click on \"Grades\" \"link\" in the \"Navigation\" \"block\"",
          "28:     And I set the following fields to these values:",
          "29:       | Grade display type | Letter |",
          "30:     And I press \"Save changes\"",
          "",
          "[Removed Lines]",
          "27:     And I select \"Course grade settings\" from the \"Grade report\" singleselect",
          "",
          "[Added Lines]",
          "27:     And I follow \"Setup\"",
          "28:     And I follow \"Course grade settings\"",
          "",
          "---------------",
          "--- Hunk 2 ---",
          "[Context before]",
          "34:       | id_override | 1 |",
          "35:       | id_gradeboundary10 | 57 |",
          "36:     And I press \"Save changes\"",
          "38:     And I press \"Turn editing on\"",
          "39:     And I give the grade \"57\" to the user \"Student 1\" for the grade item \"Test assignment one\"",
          "40:     And I press \"Save changes\"",
          "",
          "[Removed Lines]",
          "37:     And I select \"Grader report\" from the \"Grade report\" singleselect",
          "",
          "[Added Lines]",
          "38:     And I follow \"View\"",
          "",
          "---------------"
        ],
        "grade/tests/behat/grade_natural_exclude_empty.feature||grade/tests/behat/grade_natural_exclude_empty.feature": [
          "File: grade/tests/behat/grade_natural_exclude_empty.feature -> grade/tests/behat/grade_natural_exclude_empty.feature",
          "--- Hunk 1 ---",
          "[Context before]",
          "26:     And I log in as \"teacher1\"",
          "27:     And I follow \"Course 1\"",
          "28:     And I click on \"Grades\" \"link\" in the \"Navigation\" \"block\"",
          "30:     And I set the following settings for grade item \"Test assignment four (extra)\":",
          "31:       | Extra credit | 1 |",
          "32:     And I set the following settings for grade item \"Test assignment five (extra)\":",
          "",
          "[Removed Lines]",
          "29:     And I set the field \"Grade report\" to \"Gradebook setup\"",
          "",
          "[Added Lines]",
          "29:     And I follow \"Setup\"",
          "",
          "---------------",
          "--- Hunk 2 ---",
          "[Context before]",
          "42:     And I give the grade \"10.00\" to the user \"Student 1\" for the grade item \"Test assignment four (extra)\"",
          "43:     And I give the grade \"8.00\" to the user \"Student 1\" for the grade item \"Test assignment five (extra)\"",
          "44:     And I press \"Save changes\"",
          "46:     And I set the field \"Select all or one user\" to \"Student 1\"",
          "47:     Then the following should exist in the \"user-grade\" table:",
          "48:       | Grade item                   | Calculated weight      | Grade  | Range | Percentage | Contribution to course total |",
          "",
          "[Removed Lines]",
          "45:     And I set the field \"Grade report\" to \"User report\"",
          "",
          "[Added Lines]",
          "45:     And I follow \"User report\"",
          "",
          "---------------",
          "--- Hunk 3 ---",
          "[Context before]",
          "63:     And I give the grade \"10.00\" to the user \"Student 1\" for the grade item \"Test assignment four (extra)\"",
          "64:     And I give the grade \"8.00\" to the user \"Student 1\" for the grade item \"Test assignment five (extra)\"",
          "65:     And I press \"Save changes\"",
          "67:     And I set the field \"Select all or one user\" to \"Student 1\"",
          "68:     Then the following should exist in the \"user-grade\" table:",
          "69:       | Grade item                   | Calculated weight       | Grade  | Range | Percentage | Contribution to course total |",
          "",
          "[Removed Lines]",
          "66:     And I set the field \"Grade report\" to \"User report\"",
          "",
          "[Added Lines]",
          "66:     And I follow \"User report\"",
          "",
          "---------------",
          "--- Hunk 4 ---",
          "[Context before]",
          "82:     And I give the grade \"10.00\" to the user \"Student 1\" for the grade item \"Test assignment four (extra)\"",
          "83:     And I give the grade \"8.00\" to the user \"Student 1\" for the grade item \"Test assignment five (extra)\"",
          "84:     And I press \"Save changes\"",
          "86:     And I set the field \"Select all or one user\" to \"Student 1\"",
          "87:     Then the following should exist in the \"user-grade\" table:",
          "88:       | Grade item                   | Calculated weight      | Grade | Range | Percentage | Contribution to course total |",
          "",
          "[Removed Lines]",
          "85:     And I set the field \"Grade report\" to \"User report\"",
          "",
          "[Added Lines]",
          "85:     And I follow \"User report\"",
          "",
          "---------------",
          "--- Hunk 5 ---",
          "[Context before]",
          "109:     And I give the grade \"10.00\" to the user \"Student 1\" for the grade item \"Test assignment four (extra)\"",
          "110:     And I give the grade \"8.00\" to the user \"Student 1\" for the grade item \"Test assignment five (extra)\"",
          "111:     And I press \"Save changes\"",
          "113:     And I set the field \"Select all or one user\" to \"Student 1\"",
          "114:     Then the following should exist in the \"user-grade\" table:",
          "115:       | Grade item                   | Calculated weight      | Grade | Range | Percentage | Contribution to course total |",
          "",
          "[Removed Lines]",
          "112:     And I set the field \"Grade report\" to \"User report\"",
          "",
          "[Added Lines]",
          "112:     And I follow \"User report\"",
          "",
          "---------------",
          "--- Hunk 6 ---",
          "[Context before]",
          "134:     And I give the grade \"10.00\" to the user \"Student 1\" for the grade item \"Test assignment four (extra)\"",
          "135:     And I give the grade \"8.00\" to the user \"Student 1\" for the grade item \"Test assignment five (extra)\"",
          "136:     And I press \"Save changes\"",
          "138:     And I set the field \"Select all or one user\" to \"Student 1\"",
          "139:     Then the following should exist in the \"user-grade\" table:",
          "140:       | Grade item                   | Calculated weight      | Grade  | Range | Percentage | Contribution to course total |",
          "",
          "[Removed Lines]",
          "137:     And I set the field \"Grade report\" to \"User report\"",
          "",
          "[Added Lines]",
          "137:     And I follow \"User report\"",
          "",
          "---------------",
          "--- Hunk 7 ---",
          "[Context before]",
          "158:     And I give the grade \"10.00\" to the user \"Student 1\" for the grade item \"Test assignment four (extra)\"",
          "159:     And I give the grade \"8.00\" to the user \"Student 1\" for the grade item \"Test assignment five (extra)\"",
          "160:     And I press \"Save changes\"",
          "162:     And I set the field \"Select all or one user\" to \"Student 1\"",
          "163:     Then the following should exist in the \"user-grade\" table:",
          "164:       | Grade item                   | Calculated weight       | Grade  | Range | Percentage | Contribution to course total |",
          "",
          "[Removed Lines]",
          "161:     And I set the field \"Grade report\" to \"User report\"",
          "",
          "[Added Lines]",
          "161:     And I follow \"User report\"",
          "",
          "---------------",
          "--- Hunk 8 ---",
          "[Context before]",
          "180:     And I give the grade \"10.00\" to the user \"Student 1\" for the grade item \"Test assignment four (extra)\"",
          "181:     And I give the grade \"8.00\" to the user \"Student 1\" for the grade item \"Test assignment five (extra)\"",
          "182:     And I press \"Save changes\"",
          "184:     And I set the field \"Select all or one user\" to \"Student 1\"",
          "185:     Then the following should exist in the \"user-grade\" table:",
          "186:       | Grade item                   | Calculated weight      | Grade | Range | Percentage | Contribution to course total |",
          "",
          "[Removed Lines]",
          "183:     And I set the field \"Grade report\" to \"User report\"",
          "",
          "[Added Lines]",
          "183:     And I follow \"User report\"",
          "",
          "---------------",
          "--- Hunk 9 ---",
          "[Context before]",
          "207:     And I give the grade \"10.00\" to the user \"Student 1\" for the grade item \"Test assignment four (extra)\"",
          "208:     And I give the grade \"8.00\" to the user \"Student 1\" for the grade item \"Test assignment five (extra)\"",
          "209:     And I press \"Save changes\"",
          "211:     And I set the field \"Select all or one user\" to \"Student 1\"",
          "212:     Then the following should exist in the \"user-grade\" table:",
          "213:       | Grade item                   | Calculated weight       | Grade  | Range | Percentage | Contribution to course total |",
          "",
          "[Removed Lines]",
          "210:     And I set the field \"Grade report\" to \"User report\"",
          "",
          "[Added Lines]",
          "210:     And I follow \"User report\"",
          "",
          "---------------",
          "--- Hunk 10 ---",
          "[Context before]",
          "233:     And I give the grade \"10.00\" to the user \"Student 1\" for the grade item \"Test assignment four (extra)\"",
          "234:     And I give the grade \"8.00\" to the user \"Student 1\" for the grade item \"Test assignment five (extra)\"",
          "235:     And I press \"Save changes\"",
          "237:     And I set the field \"Select all or one user\" to \"Student 1\"",
          "238:     Then the following should exist in the \"user-grade\" table:",
          "239:       | Grade item                   | Calculated weight       | Grade  | Range | Percentage | Contribution to course total |",
          "",
          "[Removed Lines]",
          "236:     And I set the field \"Grade report\" to \"User report\"",
          "",
          "[Added Lines]",
          "236:     And I follow \"User report\"",
          "",
          "---------------",
          "--- Hunk 11 ---",
          "[Context before]",
          "257:     And I give the grade \"10.00\" to the user \"Student 1\" for the grade item \"Test assignment four (extra)\"",
          "258:     And I give the grade \"8.00\" to the user \"Student 1\" for the grade item \"Test assignment five (extra)\"",
          "259:     And I press \"Save changes\"",
          "261:     And I set the field \"Select all or one user\" to \"Student 1\"",
          "262:     Then the following should exist in the \"user-grade\" table:",
          "263:       | Grade item                   | Calculated weight      | Grade | Range | Percentage | Contribution to course total |",
          "",
          "[Removed Lines]",
          "260:     And I set the field \"Grade report\" to \"User report\"",
          "",
          "[Added Lines]",
          "260:     And I follow \"User report\"",
          "",
          "---------------"
        ],
        "grade/tests/behat/grade_natural_exclude_empty_20150619.feature||grade/tests/behat/grade_natural_exclude_empty_20150619.feature": [
          "File: grade/tests/behat/grade_natural_exclude_empty_20150619.feature -> grade/tests/behat/grade_natural_exclude_empty_20150619.feature",
          "--- Hunk 1 ---",
          "[Context before]",
          "27:     And I log in as \"teacher1\"",
          "28:     And I follow \"Course 1\"",
          "29:     And I click on \"Grades\" \"link\" in the \"Navigation\" \"block\"",
          "31:     And I set the following settings for grade item \"Test assignment four (extra)\":",
          "32:       | Extra credit | 1 |",
          "33:     And I set the following settings for grade item \"Test assignment five (extra)\":",
          "",
          "[Removed Lines]",
          "30:     And I set the field \"Grade report\" to \"Gradebook setup\"",
          "",
          "[Added Lines]",
          "30:     And I follow \"Setup\"",
          "",
          "---------------",
          "--- Hunk 2 ---",
          "[Context before]",
          "43:     And I give the grade \"10.00\" to the user \"Student 1\" for the grade item \"Test assignment four (extra)\"",
          "44:     And I give the grade \"8.00\" to the user \"Student 1\" for the grade item \"Test assignment five (extra)\"",
          "45:     And I press \"Save changes\"",
          "47:     And I set the field \"Select all or one user\" to \"Student 1\"",
          "48:     Then the following should exist in the \"user-grade\" table:",
          "49:       | Grade item                   | Calculated weight      | Grade  | Range | Percentage | Contribution to course total |",
          "",
          "[Removed Lines]",
          "46:     And I set the field \"Grade report\" to \"User report\"",
          "",
          "[Added Lines]",
          "46:     And I follow \"User report\"",
          "",
          "---------------",
          "--- Hunk 3 ---",
          "[Context before]",
          "64:     And I give the grade \"10.00\" to the user \"Student 1\" for the grade item \"Test assignment four (extra)\"",
          "65:     And I give the grade \"8.00\" to the user \"Student 1\" for the grade item \"Test assignment five (extra)\"",
          "66:     And I press \"Save changes\"",
          "68:     And I set the field \"Select all or one user\" to \"Student 1\"",
          "69:     Then the following should exist in the \"user-grade\" table:",
          "70:       | Grade item                   | Calculated weight       | Grade  | Range | Percentage | Contribution to course total |",
          "",
          "[Removed Lines]",
          "67:     And I set the field \"Grade report\" to \"User report\"",
          "",
          "[Added Lines]",
          "67:     And I follow \"User report\"",
          "",
          "---------------",
          "--- Hunk 4 ---",
          "[Context before]",
          "83:     And I give the grade \"10.00\" to the user \"Student 1\" for the grade item \"Test assignment four (extra)\"",
          "84:     And I give the grade \"8.00\" to the user \"Student 1\" for the grade item \"Test assignment five (extra)\"",
          "85:     And I press \"Save changes\"",
          "87:     And I set the field \"Select all or one user\" to \"Student 1\"",
          "88:     Then the following should exist in the \"user-grade\" table:",
          "89:       | Grade item                   | Calculated weight      | Grade | Range | Percentage | Contribution to course total |",
          "",
          "[Removed Lines]",
          "86:     And I set the field \"Grade report\" to \"User report\"",
          "",
          "[Added Lines]",
          "86:     And I follow \"User report\"",
          "",
          "---------------",
          "--- Hunk 5 ---",
          "[Context before]",
          "110:     And I give the grade \"10.00\" to the user \"Student 1\" for the grade item \"Test assignment four (extra)\"",
          "111:     And I give the grade \"8.00\" to the user \"Student 1\" for the grade item \"Test assignment five (extra)\"",
          "112:     And I press \"Save changes\"",
          "114:     And I set the field \"Select all or one user\" to \"Student 1\"",
          "115:     Then the following should exist in the \"user-grade\" table:",
          "116:       | Grade item                   | Calculated weight      | Grade | Range | Percentage | Contribution to course total |",
          "",
          "[Removed Lines]",
          "113:     And I set the field \"Grade report\" to \"User report\"",
          "",
          "[Added Lines]",
          "113:     And I follow \"User report\"",
          "",
          "---------------",
          "--- Hunk 6 ---",
          "[Context before]",
          "135:     And I give the grade \"10.00\" to the user \"Student 1\" for the grade item \"Test assignment four (extra)\"",
          "136:     And I give the grade \"8.00\" to the user \"Student 1\" for the grade item \"Test assignment five (extra)\"",
          "137:     And I press \"Save changes\"",
          "139:     And I set the field \"Select all or one user\" to \"Student 1\"",
          "140:     Then the following should exist in the \"user-grade\" table:",
          "141:       | Grade item                   | Calculated weight      | Grade  | Range | Percentage | Contribution to course total |",
          "",
          "[Removed Lines]",
          "138:     And I set the field \"Grade report\" to \"User report\"",
          "",
          "[Added Lines]",
          "138:     And I follow \"User report\"",
          "",
          "---------------",
          "--- Hunk 7 ---",
          "[Context before]",
          "160:     And I give the grade \"10.00\" to the user \"Student 1\" for the grade item \"Test assignment four (extra)\"",
          "161:     And I give the grade \"8.00\" to the user \"Student 1\" for the grade item \"Test assignment five (extra)\"",
          "162:     And I press \"Save changes\"",
          "164:     And I set the field \"Select all or one user\" to \"Student 1\"",
          "165:     Then the following should exist in the \"user-grade\" table:",
          "166:       | Grade item                   | Calculated weight       | Grade  | Range | Percentage | Contribution to course total |",
          "",
          "[Removed Lines]",
          "163:     And I set the field \"Grade report\" to \"User report\"",
          "",
          "[Added Lines]",
          "163:     And I follow \"User report\"",
          "",
          "---------------",
          "--- Hunk 8 ---",
          "[Context before]",
          "183:     And I give the grade \"10.00\" to the user \"Student 1\" for the grade item \"Test assignment four (extra)\"",
          "184:     And I give the grade \"8.00\" to the user \"Student 1\" for the grade item \"Test assignment five (extra)\"",
          "185:     And I press \"Save changes\"",
          "187:     And I set the field \"Select all or one user\" to \"Student 1\"",
          "188:     Then the following should exist in the \"user-grade\" table:",
          "189:       | Grade item                   | Calculated weight      | Grade | Range | Percentage | Contribution to course total |",
          "",
          "[Removed Lines]",
          "186:     And I set the field \"Grade report\" to \"User report\"",
          "",
          "[Added Lines]",
          "186:     And I follow \"User report\"",
          "",
          "---------------",
          "--- Hunk 9 ---",
          "[Context before]",
          "210:     And I give the grade \"10.00\" to the user \"Student 1\" for the grade item \"Test assignment four (extra)\"",
          "211:     And I give the grade \"8.00\" to the user \"Student 1\" for the grade item \"Test assignment five (extra)\"",
          "212:     And I press \"Save changes\"",
          "214:     And I set the field \"Select all or one user\" to \"Student 1\"",
          "215:     Then the following should exist in the \"user-grade\" table:",
          "216:       | Grade item                   | Calculated weight       | Grade  | Range | Percentage | Contribution to course total |",
          "",
          "[Removed Lines]",
          "213:     And I set the field \"Grade report\" to \"User report\"",
          "",
          "[Added Lines]",
          "213:     And I follow \"User report\"",
          "",
          "---------------",
          "--- Hunk 10 ---",
          "[Context before]",
          "237:     And I give the grade \"10.00\" to the user \"Student 1\" for the grade item \"Test assignment four (extra)\"",
          "238:     And I give the grade \"8.00\" to the user \"Student 1\" for the grade item \"Test assignment five (extra)\"",
          "239:     And I press \"Save changes\"",
          "241:     And I set the field \"Select all or one user\" to \"Student 1\"",
          "242:     Then the following should exist in the \"user-grade\" table:",
          "243:       | Grade item                   | Calculated weight       | Grade  | Range | Percentage | Contribution to course total |",
          "",
          "[Removed Lines]",
          "240:     And I set the field \"Grade report\" to \"User report\"",
          "",
          "[Added Lines]",
          "240:     And I follow \"User report\"",
          "",
          "---------------",
          "--- Hunk 11 ---",
          "[Context before]",
          "262:     And I give the grade \"10.00\" to the user \"Student 1\" for the grade item \"Test assignment four (extra)\"",
          "263:     And I give the grade \"8.00\" to the user \"Student 1\" for the grade item \"Test assignment five (extra)\"",
          "264:     And I press \"Save changes\"",
          "266:     And I set the field \"Select all or one user\" to \"Student 1\"",
          "267:     Then the following should exist in the \"user-grade\" table:",
          "268:       | Grade item                   | Calculated weight      | Grade | Range | Percentage | Contribution to course total |",
          "",
          "[Removed Lines]",
          "265:     And I set the field \"Grade report\" to \"User report\"",
          "",
          "[Added Lines]",
          "265:     And I follow \"User report\"",
          "",
          "---------------"
        ],
        "grade/tests/behat/grade_natural_normalisation.feature||grade/tests/behat/grade_natural_normalisation.feature": [
          "File: grade/tests/behat/grade_natural_normalisation.feature -> grade/tests/behat/grade_natural_normalisation.feature",
          "--- Hunk 1 ---",
          "[Context before]",
          "33:     And I log in as \"teacher1\"",
          "34:     And I follow \"Course 1\"",
          "35:     And I click on \"Grades\" \"link\" in the \"Navigation\" \"block\"",
          "38:   @javascript",
          "39:   Scenario: Setting all weights in a category to exactly one hundred in total.",
          "",
          "[Removed Lines]",
          "36:     And I set the field \"Grade report\" to \"Gradebook setup\"",
          "",
          "[Added Lines]",
          "36:     And I follow \"Setup\"",
          "",
          "---------------"
        ],
        "grade/tests/behat/grade_natural_normalisation_20150619.feature||grade/tests/behat/grade_natural_normalisation_20150619.feature": [
          "File: grade/tests/behat/grade_natural_normalisation_20150619.feature -> grade/tests/behat/grade_natural_normalisation_20150619.feature",
          "--- Hunk 1 ---",
          "[Context before]",
          "34:     And I log in as \"teacher1\"",
          "35:     And I follow \"Course 1\"",
          "36:     And I click on \"Grades\" \"link\" in the \"Navigation\" \"block\"",
          "39:   @javascript",
          "40:   Scenario: Grade items weights are normalised when all grade item weights are overridden (sum exactly 100). Extra credit is set to zero (before the fix 20150619).",
          "",
          "[Removed Lines]",
          "37:     And I set the field \"Grade report\" to \"Gradebook setup\"",
          "",
          "[Added Lines]",
          "37:     And I follow \"Setup\"",
          "",
          "---------------"
        ],
        "grade/tests/behat/grade_scales.feature||grade/tests/behat/grade_scales.feature": [
          "File: grade/tests/behat/grade_scales.feature -> grade/tests/behat/grade_scales.feature",
          "--- Hunk 1 ---",
          "[Context before]",
          "76:     And I set the field \"Show weightings\" to \"Show\"",
          "77:     And I set the field \"Show contribution to course total\" to \"Show\"",
          "78:     And I press \"Save changes\"",
          "80:     And I turn editing mode on",
          "82:   Scenario: Test displaying scales in gradebook in aggregation method Natural",
          "",
          "[Removed Lines]",
          "79:     And I follow \"Grader report\"",
          "",
          "[Added Lines]",
          "[None]",
          "",
          "---------------",
          "--- Hunk 2 ---",
          "[Context before]",
          "99:       | Test assignment one | C     | F\u2013A   | 50.00 %    | 60.00 %                      |",
          "100:       | Sub category 1 total      | 3.00  | 0\u20135   | 60.00 %    | -                            |",
          "101:       | Course total        | 3.00  | 0\u20135   | 60.00 %    | -                            |",
          "103:     And the following should exist in the \"grade_edit_tree_table\" table:",
          "104:       | Name                | Max grade |",
          "105:       | Test assignment one | 5.00      |",
          "",
          "[Removed Lines]",
          "102:     And I select \"Gradebook setup\" from the \"Grade report\" singleselect",
          "",
          "[Added Lines]",
          "101:     And I follow \"Setup\"",
          "",
          "---------------",
          "--- Hunk 3 ---",
          "[Context before]",
          "145:       | Test assignment one          | C              | F\u2013A   | 50.00 %       | <contrib3>                   |",
          "146:       | Sub category (<aggregation>) total<aggregation>. | 3.00           | 1\u20135   | 50.00 %       | -                            |",
          "147:       | Course total<aggregation>.   | <coursetotal3> | 0\u2013100 | <courseperc3> | -                            |",
          "149:     And the following should exist in the \"grade_edit_tree_table\" table:",
          "150:       | Name                | Max grade |",
          "151:       | Test assignment one | A (5)     |",
          "",
          "[Removed Lines]",
          "148:     And I select \"Gradebook setup\" from the \"Grade report\" singleselect",
          "",
          "[Added Lines]",
          "147:     And I follow \"Setup\"",
          "",
          "---------------"
        ],
        "grade/tests/behat/grade_single_item_scales.feature||grade/tests/behat/grade_single_item_scales.feature": [
          "File: grade/tests/behat/grade_single_item_scales.feature -> grade/tests/behat/grade_single_item_scales.feature",
          "--- Hunk 1 ---",
          "[Context before]",
          "54:     And I set the field \"Show weightings\" to \"Show\"",
          "55:     And I set the field \"Show contribution to course total\" to \"Show\"",
          "56:     And I press \"Save changes\"",
          "58:     And I turn editing mode on",
          "60:   Scenario: Test displaying single item scales in gradebook in aggregation method Natural",
          "",
          "[Removed Lines]",
          "57:     And I follow \"Grader report\"",
          "",
          "[Added Lines]",
          "[None]",
          "",
          "---------------",
          "--- Hunk 2 ---",
          "[Context before]",
          "79:       | Test assignment one | -     | Ace!\u2013Ace! | -                            |",
          "80:       | Sub category 1 total| -     | 0\u20131       | -                            |",
          "81:       | Course total        | -     | 0\u20131       | -                            |",
          "83:     And the following should exist in the \"grade_edit_tree_table\" table:",
          "84:       | Name                | Max grade |",
          "85:       | Test assignment one | 1.00      |",
          "",
          "[Removed Lines]",
          "82:     And I select \"Gradebook setup\" from the \"jump\" singleselect",
          "",
          "[Added Lines]",
          "81:     And I follow \"Setup\"",
          "",
          "---------------",
          "--- Hunk 3 ---",
          "[Context before]",
          "111:       | Test assignment one                              | Ace!           | Ace!\u2013Ace!   | <contrib1>                   |",
          "112:       | Sub category (<aggregation>) total<aggregation>. | <cattotal1>    | 0\u2013100       | -                            |",
          "113:       | Course total<aggregation>.                       | <coursetotal1> | 0\u2013100       | -                            |",
          "115:     And the following should exist in the \"grade_edit_tree_table\" table:",
          "116:       | Name                                             | Max grade |",
          "117:       | Test assignment one                              | Ace! (1)  |",
          "",
          "[Removed Lines]",
          "114:     And I select \"Gradebook setup\" from the \"jump\" singleselect",
          "",
          "[Added Lines]",
          "113:     And I follow \"Setup\"",
          "",
          "---------------"
        ],
        "grade/tests/behat/grade_view.feature||grade/tests/behat/grade_view.feature": [
          "File: grade/tests/behat/grade_view.feature -> grade/tests/behat/grade_view.feature",
          "--- Hunk 1 ---",
          "[Context before]",
          "58:     And I press \"Save changes\"",
          "60:   Scenario: Grade a grade item and ensure the results display correctly in the gradebook",
          "65:     And the \"Select all or one user\" select box should contain \"All users (1)\"",
          "66:     And I log out",
          "67:     And I log in as \"student1\"",
          "",
          "[Removed Lines]",
          "61:     When I select \"User report\" from the \"Grade report\" singleselect",
          "62:     And the \"Grade report\" select box should contain \"Grader report\"",
          "63:     And the \"Grade report\" select box should contain \"Outcomes report\"",
          "64:     And the \"Grade report\" select box should contain \"User report\"",
          "",
          "[Added Lines]",
          "61:     When I follow \"User report\"",
          "62:     And \"Grader report\" \"link\" should exist",
          "63:     And \"Outcomes report\" \"link\" should exist",
          "64:     And \"Grader report\" \"link\" should exist",
          "",
          "---------------",
          "--- Hunk 2 ---",
          "[Context before]",
          "80:     And \"Course 1\" row \"Grade\" column of \"overview-grade\" table should not contain \"90.00\"",
          "82:   Scenario: We can add a weighting to a grade item and it is displayed properly in the user report",
          "84:     And I set the following settings for grade item \"Course 1\":",
          "85:       | Aggregation | Weighted mean of grades |",
          "86:     And I set the field \"Extra credit value for Test assignment name\" to \"0.72\"",
          "87:     And I press \"Save changes\"",
          "89:     And I navigate to \"Course grade settings\" node in \"Grade administration > Setup\"",
          "90:     And I set the following fields to these values:",
          "91:       | Show weightings | Show |",
          "",
          "[Removed Lines]",
          "83:     When I select \"Gradebook setup\" from the \"Grade report\" singleselect",
          "88:     And I select \"User report\" from the \"Grade report\" singleselect",
          "",
          "[Added Lines]",
          "83:     When I follow \"Setup\"",
          "88:     And I follow \"View\"",
          "89:     And I follow \"User report\"",
          "",
          "---------------"
        ],
        "mod/assign/tests/behat/steps_blind_marking.feature||mod/assign/tests/behat/steps_blind_marking.feature": [
          "File: mod/assign/tests/behat/steps_blind_marking.feature -> mod/assign/tests/behat/steps_blind_marking.feature",
          "--- Hunk 1 ---",
          "[Context before]",
          "81:     And I log in as \"student1\"",
          "82:     And I follow \"Course 1\"",
          "83:     And I click on \"Grades\" \"link\" in the \"Navigation\" \"block\"",
          "85:     Then I should see \"50\"",
          "86:     And I should see \"Great job! Lol, not really.\"",
          "",
          "[Removed Lines]",
          "84:     And I set the field \"Grade report\" to \"User report\"",
          "",
          "[Added Lines]",
          "84:     And I follow \"User report\"",
          "",
          "---------------",
          "--- Hunk 2 ---",
          "[Context before]",
          "109:     And I log in as \"student1\"",
          "110:     And I follow \"Course 1\"",
          "111:     And I click on \"Grades\" \"link\" in the \"Navigation\" \"block\"",
          "113:     Then I should see \"50\"",
          "114:     And I should see \"Great job! Lol, not really.\"",
          "",
          "[Removed Lines]",
          "112:     And I set the field \"Grade report\" to \"User report\"",
          "",
          "[Added Lines]",
          "112:     And I follow \"User report\"",
          "",
          "---------------"
        ]
      }
    },
    {
      "candidate_hash": "ad67b7eeea4abf194eb432d5958e9a7032ee2c25",
      "candidate_info": {
        "commit_hash": "ad67b7eeea4abf194eb432d5958e9a7032ee2c25",
        "repo": "moodle/moodle",
        "commit_url": "https://github.com/moodle/moodle/commit/ad67b7eeea4abf194eb432d5958e9a7032ee2c25",
        "files": [
          "grade/report/singleview/classes/local/screen/screen.php",
          "grade/report/singleview/classes/local/screen/tablelike.php",
          "grade/report/singleview/classes/local/ui/exclude.php",
          "grade/report/singleview/tests/behat/singleview.feature"
        ],
        "message": "MDL-52378 singleview: Using is_disabled instead of is_locked",
        "before_after_code_files": [
          "grade/report/singleview/classes/local/screen/screen.php||grade/report/singleview/classes/local/screen/screen.php",
          "grade/report/singleview/classes/local/screen/tablelike.php||grade/report/singleview/classes/local/screen/tablelike.php",
          "grade/report/singleview/classes/local/ui/exclude.php||grade/report/singleview/classes/local/ui/exclude.php",
          "grade/report/singleview/tests/behat/singleview.feature||grade/report/singleview/tests/behat/singleview.feature"
        ]
      },
      "candidate_patch_features": {
        "candidate_earlier_than_patch": 1,
        "diff_branch_same_aad": 1,
        "olp_code_files": {
          "patch": [
            "grade/report/singleview/classes/local/screen/screen.php||grade/report/singleview/classes/local/screen/screen.php",
            "grade/report/singleview/classes/local/screen/tablelike.php||grade/report/singleview/classes/local/screen/tablelike.php",
            "grade/report/singleview/classes/local/ui/exclude.php||grade/report/singleview/classes/local/ui/exclude.php",
            "grade/report/singleview/tests/behat/singleview.feature||grade/report/singleview/tests/behat/singleview.feature"
          ],
          "candidate": [
            "grade/report/singleview/classes/local/screen/screen.php||grade/report/singleview/classes/local/screen/screen.php",
            "grade/report/singleview/classes/local/screen/tablelike.php||grade/report/singleview/classes/local/screen/tablelike.php",
            "grade/report/singleview/classes/local/ui/exclude.php||grade/report/singleview/classes/local/ui/exclude.php",
            "grade/report/singleview/tests/behat/singleview.feature||grade/report/singleview/tests/behat/singleview.feature"
          ]
        }
      },
      "candidate_diff": {
        "grade/report/singleview/classes/local/screen/screen.php||grade/report/singleview/classes/local/screen/screen.php": [
          "File: grade/report/singleview/classes/local/screen/screen.php -> grade/report/singleview/classes/local/screen/screen.php"
        ],
        "grade/report/singleview/classes/local/screen/tablelike.php||grade/report/singleview/classes/local/screen/tablelike.php": [
          "File: grade/report/singleview/classes/local/screen/tablelike.php -> grade/report/singleview/classes/local/screen/tablelike.php",
          "--- Hunk 1 ---",
          "[Context before]",
          "146:             if ($field == 'exclude' && !has_capability('moodle/grade:manage', $this->context)){",
          "148:             }",
          "150:             $line[] = $html;",
          "",
          "[Removed Lines]",
          "147:                 $html->locked=TRUE;",
          "",
          "[Added Lines]",
          "147:                 $html->disabled = true;",
          "",
          "---------------"
        ],
        "grade/report/singleview/classes/local/ui/exclude.php||grade/report/singleview/classes/local/ui/exclude.php": [
          "File: grade/report/singleview/classes/local/ui/exclude.php -> grade/report/singleview/classes/local/ui/exclude.php",
          "--- Hunk 1 ---",
          "[Context before]",
          "41:     public $name = 'exclude';",
          "",
          "[Removed Lines]",
          "38: class exclude extends grade_attribute_format implements be_checked {",
          "44:     public $locked = FALSE;",
          "",
          "[Added Lines]",
          "38: class exclude extends grade_attribute_format implements be_checked, be_disabled {",
          "44:     public $disabled = false;",
          "",
          "---------------",
          "--- Hunk 2 ---",
          "[Context before]",
          "53:     }",
          "62:     }",
          "",
          "[Removed Lines]",
          "60:     public function is_locked() {",
          "61:         return $this->locked;",
          "",
          "[Added Lines]",
          "60:     public function is_disabled() {",
          "61:         return $this->disabled;",
          "",
          "---------------",
          "--- Hunk 3 ---",
          "[Context before]",
          "71:             $this->get_name(),",
          "72:             $this->get_label(),",
          "73:             $this->is_checked(),",
          "76:         );",
          "77:     }",
          "",
          "[Removed Lines]",
          "75:             $this->is_locked() ? 1 : 0",
          "",
          "[Added Lines]",
          "74:             $this->is_disabled()",
          "",
          "---------------"
        ],
        "grade/report/singleview/tests/behat/singleview.feature||grade/report/singleview/tests/behat/singleview.feature": [
          "File: grade/report/singleview/tests/behat/singleview.feature -> grade/report/singleview/tests/behat/singleview.feature",
          "--- Hunk 1 ---",
          "[Context before]",
          "11:     And the following \"users\" exist:",
          "12:       | username | firstname | lastname | email | idnumber | alternatename |",
          "13:       | teacher1 | Teacher | 1 | teacher1@example.com | t1 | fred |",
          "14:       | student1 | Student | 1 | student1@example.com | s1 | james |",
          "15:       | student2 | Student | 2 | student1@example.com | s2 | holly |",
          "16:       | student3 | Student | 3 | student1@example.com | s3 | anna |",
          "",
          "[Removed Lines]",
          "[None]",
          "",
          "[Added Lines]",
          "14:       | teacher2 | No edit | 1 | teacher2@example.com | t2 | nick |",
          "",
          "---------------",
          "--- Hunk 2 ---",
          "[Context before]",
          "27:     And the following \"course enrolments\" exist:",
          "28:       | user | course | role |",
          "29:       | teacher1 | C1 | editingteacher |",
          "30:       | student1 | C1 | student |",
          "31:       | student2 | C1 | student |",
          "32:       | student3 | C1 | student |",
          "",
          "[Removed Lines]",
          "[None]",
          "",
          "[Added Lines]",
          "31:       | teacher2 | C1 | teacher |",
          "",
          "---------------",
          "--- Hunk 3 ---",
          "[Context before]",
          "44:     And the following \"grade items\" exist:",
          "45:       | itemname | course | gradetype |",
          "46:       | Test grade item | C1 | Scale |",
          "47:     And I log in as \"teacher1\"",
          "48:     And I follow \"Course 1\"",
          "49:     And I navigate to \"Grades\" node in \"Course administration\"",
          "",
          "[Removed Lines]",
          "[None]",
          "",
          "[Added Lines]",
          "49:     And the following \"permission overrides\" exist:",
          "50:       | capability                  | permission | role     | contextlevel  | reference |",
          "51:       | moodle/grade:edit           | Allow      | teacher  | Course        | C1        |",
          "52:       | gradereport/singleview:view | Allow      | teacher  | Course        | C1        |",
          "",
          "---------------",
          "--- Hunk 4 ---",
          "[Context before]",
          "89:     And the following should exist in the \"generaltable\" table:",
          "90:         | First name (Alternate name) Surname | Grade |",
          "91:         | james (Student) 1 | Very good |",
          "93:   Scenario: Single view links work on grade report.",
          "94:     Given I follow \"Single view for Test assignment one\"",
          "",
          "[Removed Lines]",
          "[None]",
          "",
          "[Added Lines]",
          "98:     And I log out",
          "99:     And I log in as \"teacher2\"",
          "100:     And I follow \"Course 1\"",
          "101:     And I navigate to \"Grades\" node in \"Course administration\"",
          "102:     And I click on \"Single view\" \"option\"",
          "103:     And I click on \"Student 4\" \"option\"",
          "104:     And the \"Exclude for Test assignment one\" \"checkbox\" should be disabled",
          "105:     And the \"Override for Test assignment one\" \"checkbox\" should be enabled",
          "",
          "---------------"
        ]
      }
    },
    {
      "candidate_hash": "c7f7b18adecb4a80c4f3defee31e72e591133693",
      "candidate_info": {
        "commit_hash": "c7f7b18adecb4a80c4f3defee31e72e591133693",
        "repo": "moodle/moodle",
        "commit_url": "https://github.com/moodle/moodle/commit/c7f7b18adecb4a80c4f3defee31e72e591133693",
        "files": [
          "grade/report/singleview/classes/local/screen/screen.php",
          "grade/report/singleview/classes/local/screen/tablelike.php",
          "grade/report/singleview/classes/local/ui/exclude.php",
          "grade/report/singleview/tests/behat/singleview.feature"
        ],
        "message": "MDL-52378 singleview: Using is_disabled instead of is_locked",
        "before_after_code_files": [
          "grade/report/singleview/classes/local/screen/screen.php||grade/report/singleview/classes/local/screen/screen.php",
          "grade/report/singleview/classes/local/screen/tablelike.php||grade/report/singleview/classes/local/screen/tablelike.php",
          "grade/report/singleview/classes/local/ui/exclude.php||grade/report/singleview/classes/local/ui/exclude.php",
          "grade/report/singleview/tests/behat/singleview.feature||grade/report/singleview/tests/behat/singleview.feature"
        ]
      },
      "candidate_patch_features": {
        "candidate_earlier_than_patch": 1,
        "diff_branch_same_aad": 1,
        "olp_code_files": {
          "patch": [
            "grade/report/singleview/classes/local/screen/screen.php||grade/report/singleview/classes/local/screen/screen.php",
            "grade/report/singleview/classes/local/screen/tablelike.php||grade/report/singleview/classes/local/screen/tablelike.php",
            "grade/report/singleview/classes/local/ui/exclude.php||grade/report/singleview/classes/local/ui/exclude.php",
            "grade/report/singleview/tests/behat/singleview.feature||grade/report/singleview/tests/behat/singleview.feature"
          ],
          "candidate": [
            "grade/report/singleview/classes/local/screen/screen.php||grade/report/singleview/classes/local/screen/screen.php",
            "grade/report/singleview/classes/local/screen/tablelike.php||grade/report/singleview/classes/local/screen/tablelike.php",
            "grade/report/singleview/classes/local/ui/exclude.php||grade/report/singleview/classes/local/ui/exclude.php",
            "grade/report/singleview/tests/behat/singleview.feature||grade/report/singleview/tests/behat/singleview.feature"
          ]
        }
      },
      "candidate_diff": {
        "grade/report/singleview/classes/local/screen/screen.php||grade/report/singleview/classes/local/screen/screen.php": [
          "File: grade/report/singleview/classes/local/screen/screen.php -> grade/report/singleview/classes/local/screen/screen.php"
        ],
        "grade/report/singleview/classes/local/screen/tablelike.php||grade/report/singleview/classes/local/screen/tablelike.php": [
          "File: grade/report/singleview/classes/local/screen/tablelike.php -> grade/report/singleview/classes/local/screen/tablelike.php",
          "--- Hunk 1 ---",
          "[Context before]",
          "146:             if ($field == 'exclude' && !has_capability('moodle/grade:manage', $this->context)){",
          "148:             }",
          "150:             $line[] = $html;",
          "",
          "[Removed Lines]",
          "147:                 $html->locked=TRUE;",
          "",
          "[Added Lines]",
          "147:                 $html->disabled = true;",
          "",
          "---------------"
        ],
        "grade/report/singleview/classes/local/ui/exclude.php||grade/report/singleview/classes/local/ui/exclude.php": [
          "File: grade/report/singleview/classes/local/ui/exclude.php -> grade/report/singleview/classes/local/ui/exclude.php",
          "--- Hunk 1 ---",
          "[Context before]",
          "41:     public $name = 'exclude';",
          "",
          "[Removed Lines]",
          "38: class exclude extends grade_attribute_format implements be_checked {",
          "44:     public $locked = FALSE;",
          "",
          "[Added Lines]",
          "38: class exclude extends grade_attribute_format implements be_checked, be_disabled {",
          "44:     public $disabled = false;",
          "",
          "---------------",
          "--- Hunk 2 ---",
          "[Context before]",
          "53:     }",
          "62:     }",
          "",
          "[Removed Lines]",
          "60:     public function is_locked() {",
          "61:         return $this->locked;",
          "",
          "[Added Lines]",
          "60:     public function is_disabled() {",
          "61:         return $this->disabled;",
          "",
          "---------------",
          "--- Hunk 3 ---",
          "[Context before]",
          "71:             $this->get_name(),",
          "72:             $this->get_label(),",
          "73:             $this->is_checked(),",
          "76:         );",
          "77:     }",
          "",
          "[Removed Lines]",
          "75:             $this->is_locked() ? 1 : 0",
          "",
          "[Added Lines]",
          "74:             $this->is_disabled()",
          "",
          "---------------"
        ],
        "grade/report/singleview/tests/behat/singleview.feature||grade/report/singleview/tests/behat/singleview.feature": [
          "File: grade/report/singleview/tests/behat/singleview.feature -> grade/report/singleview/tests/behat/singleview.feature",
          "--- Hunk 1 ---",
          "[Context before]",
          "11:     And the following \"users\" exist:",
          "12:       | username | firstname | lastname | email | idnumber | alternatename |",
          "13:       | teacher1 | Teacher | 1 | teacher1@example.com | t1 | fred |",
          "14:       | student1 | Student | 1 | student1@example.com | s1 | james |",
          "15:       | student2 | Student | 2 | student1@example.com | s2 | holly |",
          "16:       | student3 | Student | 3 | student1@example.com | s3 | anna |",
          "",
          "[Removed Lines]",
          "[None]",
          "",
          "[Added Lines]",
          "14:       | teacher2 | No edit | 1 | teacher2@example.com | t2 | nick |",
          "",
          "---------------",
          "--- Hunk 2 ---",
          "[Context before]",
          "27:     And the following \"course enrolments\" exist:",
          "28:       | user | course | role |",
          "29:       | teacher1 | C1 | editingteacher |",
          "30:       | student1 | C1 | student |",
          "31:       | student2 | C1 | student |",
          "32:       | student3 | C1 | student |",
          "",
          "[Removed Lines]",
          "[None]",
          "",
          "[Added Lines]",
          "31:       | teacher2 | C1 | teacher |",
          "",
          "---------------",
          "--- Hunk 3 ---",
          "[Context before]",
          "44:     And the following \"grade items\" exist:",
          "45:       | itemname | course | gradetype |",
          "46:       | Test grade item | C1 | Scale |",
          "47:     And I log in as \"teacher1\"",
          "48:     And I follow \"Course 1\"",
          "49:     And I navigate to \"Grades\" node in \"Course administration\"",
          "",
          "[Removed Lines]",
          "[None]",
          "",
          "[Added Lines]",
          "49:     And the following \"permission overrides\" exist:",
          "50:       | capability                  | permission | role     | contextlevel  | reference |",
          "51:       | moodle/grade:edit           | Allow      | teacher  | Course        | C1        |",
          "52:       | gradereport/singleview:view | Allow      | teacher  | Course        | C1        |",
          "",
          "---------------",
          "--- Hunk 4 ---",
          "[Context before]",
          "89:     And the following should exist in the \"generaltable\" table:",
          "90:         | First name (Alternate name) Surname | Grade |",
          "91:         | james (Student) 1 | Very good |",
          "93:   Scenario: Single view links work on grade report.",
          "94:     Given I follow \"Single view for Test assignment one\"",
          "",
          "[Removed Lines]",
          "[None]",
          "",
          "[Added Lines]",
          "98:     And I log out",
          "99:     And I log in as \"teacher2\"",
          "100:     And I follow \"Course 1\"",
          "101:     And I navigate to \"Grades\" node in \"Course administration\"",
          "102:     And I click on \"Single view\" \"option\"",
          "103:     And I click on \"Student 4\" \"option\"",
          "104:     And the \"Exclude for Test assignment one\" \"checkbox\" should be disabled",
          "105:     And the \"Override for Test assignment one\" \"checkbox\" should be enabled",
          "",
          "---------------"
        ]
      }
    },
    {
      "candidate_hash": "b74d0f8404651d9ad0d97fd7eb58a94079342eb3",
      "candidate_info": {
        "commit_hash": "b74d0f8404651d9ad0d97fd7eb58a94079342eb3",
        "repo": "moodle/moodle",
        "commit_url": "https://github.com/moodle/moodle/commit/b74d0f8404651d9ad0d97fd7eb58a94079342eb3",
        "files": [
          "grade/report/singleview/classes/local/screen/screen.php",
          "grade/report/singleview/classes/local/screen/tablelike.php",
          "grade/report/singleview/classes/local/ui/exclude.php",
          "grade/report/singleview/tests/behat/singleview.feature"
        ],
        "message": "MDL-52378 singleview: Using is_disabled instead of is_locked",
        "before_after_code_files": [
          "grade/report/singleview/classes/local/screen/screen.php||grade/report/singleview/classes/local/screen/screen.php",
          "grade/report/singleview/classes/local/screen/tablelike.php||grade/report/singleview/classes/local/screen/tablelike.php",
          "grade/report/singleview/classes/local/ui/exclude.php||grade/report/singleview/classes/local/ui/exclude.php",
          "grade/report/singleview/tests/behat/singleview.feature||grade/report/singleview/tests/behat/singleview.feature"
        ]
      },
      "candidate_patch_features": {
        "candidate_earlier_than_patch": 1,
        "diff_branch_same_aad": 1,
        "olp_code_files": {
          "patch": [
            "grade/report/singleview/classes/local/screen/screen.php||grade/report/singleview/classes/local/screen/screen.php",
            "grade/report/singleview/classes/local/screen/tablelike.php||grade/report/singleview/classes/local/screen/tablelike.php",
            "grade/report/singleview/classes/local/ui/exclude.php||grade/report/singleview/classes/local/ui/exclude.php",
            "grade/report/singleview/tests/behat/singleview.feature||grade/report/singleview/tests/behat/singleview.feature"
          ],
          "candidate": [
            "grade/report/singleview/classes/local/screen/screen.php||grade/report/singleview/classes/local/screen/screen.php",
            "grade/report/singleview/classes/local/screen/tablelike.php||grade/report/singleview/classes/local/screen/tablelike.php",
            "grade/report/singleview/classes/local/ui/exclude.php||grade/report/singleview/classes/local/ui/exclude.php",
            "grade/report/singleview/tests/behat/singleview.feature||grade/report/singleview/tests/behat/singleview.feature"
          ]
        }
      },
      "candidate_diff": {
        "grade/report/singleview/classes/local/screen/screen.php||grade/report/singleview/classes/local/screen/screen.php": [
          "File: grade/report/singleview/classes/local/screen/screen.php -> grade/report/singleview/classes/local/screen/screen.php"
        ],
        "grade/report/singleview/classes/local/screen/tablelike.php||grade/report/singleview/classes/local/screen/tablelike.php": [
          "File: grade/report/singleview/classes/local/screen/tablelike.php -> grade/report/singleview/classes/local/screen/tablelike.php",
          "--- Hunk 1 ---",
          "[Context before]",
          "146:             if ($field == 'exclude' && !has_capability('moodle/grade:manage', $this->context)){",
          "148:             }",
          "150:             $line[] = $html;",
          "",
          "[Removed Lines]",
          "147:                 $html->locked=TRUE;",
          "",
          "[Added Lines]",
          "147:                 $html->disabled = true;",
          "",
          "---------------"
        ],
        "grade/report/singleview/classes/local/ui/exclude.php||grade/report/singleview/classes/local/ui/exclude.php": [
          "File: grade/report/singleview/classes/local/ui/exclude.php -> grade/report/singleview/classes/local/ui/exclude.php",
          "--- Hunk 1 ---",
          "[Context before]",
          "41:     public $name = 'exclude';",
          "",
          "[Removed Lines]",
          "38: class exclude extends grade_attribute_format implements be_checked {",
          "44:     public $locked = FALSE;",
          "",
          "[Added Lines]",
          "38: class exclude extends grade_attribute_format implements be_checked, be_disabled {",
          "44:     public $disabled = false;",
          "",
          "---------------",
          "--- Hunk 2 ---",
          "[Context before]",
          "53:     }",
          "62:     }",
          "",
          "[Removed Lines]",
          "60:     public function is_locked() {",
          "61:         return $this->locked;",
          "",
          "[Added Lines]",
          "60:     public function is_disabled() {",
          "61:         return $this->disabled;",
          "",
          "---------------",
          "--- Hunk 3 ---",
          "[Context before]",
          "71:             $this->get_name(),",
          "72:             $this->get_label(),",
          "73:             $this->is_checked(),",
          "76:         );",
          "77:     }",
          "",
          "[Removed Lines]",
          "75:             $this->is_locked() ? 1 : 0",
          "",
          "[Added Lines]",
          "74:             $this->is_disabled()",
          "",
          "---------------"
        ],
        "grade/report/singleview/tests/behat/singleview.feature||grade/report/singleview/tests/behat/singleview.feature": [
          "File: grade/report/singleview/tests/behat/singleview.feature -> grade/report/singleview/tests/behat/singleview.feature",
          "--- Hunk 1 ---",
          "[Context before]",
          "11:     And the following \"users\" exist:",
          "12:       | username | firstname | lastname | email | idnumber | alternatename |",
          "13:       | teacher1 | Teacher | 1 | teacher1@example.com | t1 | fred |",
          "14:       | student1 | Student | 1 | student1@example.com | s1 | james |",
          "15:       | student2 | Student | 2 | student1@example.com | s2 | holly |",
          "16:       | student3 | Student | 3 | student1@example.com | s3 | anna |",
          "",
          "[Removed Lines]",
          "[None]",
          "",
          "[Added Lines]",
          "14:       | teacher2 | No edit | 1 | teacher2@example.com | t2 | nick |",
          "",
          "---------------",
          "--- Hunk 2 ---",
          "[Context before]",
          "27:     And the following \"course enrolments\" exist:",
          "28:       | user | course | role |",
          "29:       | teacher1 | C1 | editingteacher |",
          "30:       | student1 | C1 | student |",
          "31:       | student2 | C1 | student |",
          "32:       | student3 | C1 | student |",
          "",
          "[Removed Lines]",
          "[None]",
          "",
          "[Added Lines]",
          "31:       | teacher2 | C1 | teacher |",
          "",
          "---------------",
          "--- Hunk 3 ---",
          "[Context before]",
          "44:     And the following \"grade items\" exist:",
          "45:       | itemname | course | gradetype |",
          "46:       | Test grade item | C1 | Scale |",
          "47:     And I log in as \"teacher1\"",
          "48:     And I follow \"Course 1\"",
          "49:     And I follow \"Grades\"",
          "",
          "[Removed Lines]",
          "[None]",
          "",
          "[Added Lines]",
          "49:     And the following \"permission overrides\" exist:",
          "50:       | capability                  | permission | role     | contextlevel  | reference |",
          "51:       | moodle/grade:edit           | Allow      | teacher  | Course        | C1        |",
          "52:       | gradereport/singleview:view | Allow      | teacher  | Course        | C1        |",
          "",
          "---------------",
          "--- Hunk 4 ---",
          "[Context before]",
          "89:     And the following should exist in the \"generaltable\" table:",
          "90:         | First name (Alternate name) Surname | Grade |",
          "91:         | james (Student) 1 | Very good |",
          "93:   Scenario: Single view links work on grade report.",
          "94:     Given I follow \"Single view for Test assignment one\"",
          "",
          "[Removed Lines]",
          "[None]",
          "",
          "[Added Lines]",
          "98:     And I log out",
          "99:     And I log in as \"teacher2\"",
          "100:     And I follow \"Course 1\"",
          "101:     And I navigate to \"Grades\" node in \"Course administration\"",
          "102:     And I click on \"Single view\" \"option\"",
          "103:     And I click on \"Student 4\" \"option\"",
          "104:     And the \"Exclude for Test assignment one\" \"checkbox\" should be disabled",
          "105:     And the \"Override for Test assignment one\" \"checkbox\" should be enabled",
          "",
          "---------------"
        ]
      }
    }
  ]
}