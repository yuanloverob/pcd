{
  "cve_id": "CVE-2019-19923",
  "cve_desc": "flattenSubquery in select.c in SQLite 3.30.1 mishandles certain uses of SELECT DISTINCT involving a LEFT JOIN in which the right-hand side is a view. This can cause a NULL pointer dereference (or incorrect results).",
  "repo": "sqlite/sqlite",
  "patch_hash": "396afe6f6aa90a31303c183e11b2b2d4b7956b35",
  "patch_info": {
    "commit_hash": "396afe6f6aa90a31303c183e11b2b2d4b7956b35",
    "repo": "sqlite/sqlite",
    "commit_url": "https://github.com/sqlite/sqlite/commit/396afe6f6aa90a31303c183e11b2b2d4b7956b35",
    "files": [
      "manifest",
      "manifest.uuid",
      "src/select.c",
      "test/join.test"
    ],
    "message": "Continue to back away from the LEFT JOIN optimization of check-in [41c27bc0ff1d3135] by disallowing query flattening if the outer query is DISTINCT.  Without this fix, if an index scan is run on the table within the view on the right-hand side of the LEFT JOIN, stale result registers might be accessed yielding incorrect results, and/or an OP_IfNullRow opcode might be invoked on the un-opened table, resulting in a NULL-pointer dereference.  This problem was found by the Yongheng and Rui fuzzer.\n\nFossilOrigin-Name: 862974312edf00e9d1068115d1a39b7235b7db68b6d86b81d38a12f025a4748e",
    "before_after_code_files": [
      "manifest.uuid||manifest.uuid",
      "src/select.c||src/select.c",
      "test/join.test||test/join.test"
    ]
  },
  "patch_diff": {
    "manifest.uuid||manifest.uuid": [
      "File: manifest.uuid -> manifest.uuid",
      "--- Hunk 1 ---",
      "[Context before]",
      "[No context available]",
      "",
      "[Removed Lines]",
      "1: 289158aa24b066c453d2bce4bc2dead1c56fb0b23c3f7c4810b34b13627cef34",
      "",
      "[Added Lines]",
      "[None]",
      "",
      "---------------"
    ],
    "src/select.c||src/select.c": [
      "File: src/select.c -> src/select.c",
      "--- Hunk 1 ---",
      "[Context before]",
      "3797:   if( (pSubitem->fg.jointype & JT_OUTER)!=0 ){",
      "3798:     isLeftJoin = 1;",
      "3801:       return 0;",
      "3802:     }",
      "3803:   }",
      "",
      "[Removed Lines]",
      "3799:     if( pSubSrc->nSrc>1 || isAgg || IsVirtual(pSubSrc->a[0].pTab) ){",
      "",
      "[Added Lines]",
      "3804:     ){",
      "",
      "---------------"
    ],
    "test/join.test||test/join.test": [
      "File: test/join.test -> test/join.test",
      "--- Hunk 1 ---",
      "[Context before]",
      "975:   SELECT 24, * FROM t1 LEFT JOIN t0 ON +aa ISNULL;",
      "976: } {13 1 {} 14 1 {} 23 1 {} 24 1 {}}",
      "978: finish_test",
      "",
      "[Removed Lines]",
      "[None]",
      "",
      "[Added Lines]",
      "978: # 2019-12-18 problem with a LEFT JOIN where the RHS is a view.",
      "979: # Detected by Yongheng and Rui.",
      "980: # Follows from the optimization attempt of check-in 41c27bc0ff1d3135",
      "981: # on 2017-04-18",
      "982: #",
      "983: reset_db",
      "984: do_execsql_test join-22.10 {",
      "985:   CREATE TABLE t0(a, b);",
      "986:   CREATE INDEX t0a ON t0(a);",
      "987:   INSERT INTO t0 VALUES(10,10),(10,11),(10,12);",
      "988:   SELECT DISTINCT c FROM t0 LEFT JOIN (SELECT a+1 AS c FROM t0) ORDER BY c ;",
      "989: } {11}",
      "",
      "---------------"
    ]
  },
  "candidates": [
    {
      "candidate_hash": "418454c63fe1d6f3083542110d17cf561b8f369f",
      "candidate_info": {
        "commit_hash": "418454c63fe1d6f3083542110d17cf561b8f369f",
        "repo": "sqlite/sqlite",
        "commit_url": "https://github.com/sqlite/sqlite/commit/418454c63fe1d6f3083542110d17cf561b8f369f",
        "files": [
          "ext/session/sessionwor.test",
          "manifest",
          "manifest.uuid",
          "src/insert.c"
        ],
        "message": "For SQLITE_ENABLE_PREUPDATE_HOOK builds, disable the optimization for a REPLACE command on a WITHOUT ROWID table with no indexes, triggers or foreign key constraints that causes SQLite to clobber any existing row without separately checking for it. This optimization causes SQLite to omit the expected pre-update-hook callbacks.\n\nFossilOrigin-Name: 6281ef974c0ac7a7133c9e1e04c09fdbd627c019c6ff3227293548caf8283864",
        "before_after_code_files": [
          "ext/session/sessionwor.test||ext/session/sessionwor.test",
          "manifest.uuid||manifest.uuid",
          "src/insert.c||src/insert.c"
        ]
      },
      "candidate_patch_features": {
        "candidate_earlier_than_patch": 1,
        "same_branch_evolution": 1,
        "olp_code_files": {
          "patch": [
            "manifest.uuid||manifest.uuid"
          ],
          "candidate": [
            "manifest.uuid||manifest.uuid"
          ]
        }
      },
      "candidate_diff": {
        "ext/session/sessionwor.test||ext/session/sessionwor.test": [
          "File: ext/session/sessionwor.test -> ext/session/sessionwor.test",
          "--- Hunk 1 ---",
          "[Context before]",
          "30:   sqlite3 db2 test.db2",
          "31: }",
          "40: } {",
          "48: }",
          "52: } {",
          "54: }",
          "56: finish_test",
          "",
          "[Removed Lines]",
          "34: do_execsql_test 1.0 {",
          "35:   CREATE TABLE t1(a PRIMARY KEY, b) WITHOUT ROWID;",
          "36: }",
          "38: do_iterator_test 1.1 t1 {",
          "39:   INSERT INTO t1 VALUES('one', 'two');",
          "41:   {INSERT t1 0 X. {} {t one t two}}",
          "42: }",
          "44: do_iterator_test 1.2 t1 {",
          "45:   UPDATE t1 SET b='three'",
          "46: } {",
          "47:   {UPDATE t1 0 X. {t one t two} {{} {} t three}}",
          "50: do_iterator_test 1.3 t1 {",
          "51:   DELETE FROM t1;",
          "53:   {DELETE t1 0 X. {t one t three} {}}",
          "",
          "[Added Lines]",
          "33: foreach {tn wo} {",
          "34:   1 \"\"",
          "35:   2 \"WITHOUT ROWID\"",
          "37:   reset_db",
          "39:   do_execsql_test 1.$tn.0 \"CREATE TABLE t1(a PRIMARY KEY, b) $wo ;\"",
          "41:   do_iterator_test 1.$tn.1 t1 {",
          "42:     INSERT INTO t1 VALUES('one', 'two');",
          "43:   } {",
          "44:     {INSERT t1 0 X. {} {t one t two}}",
          "45:   }",
          "47:   do_iterator_test 1.$tn.2 t1 {",
          "48:     UPDATE t1 SET b='three'",
          "49:   } {",
          "50:     {UPDATE t1 0 X. {t one t two} {{} {} t three}}",
          "51:   }",
          "53:   do_iterator_test 1.$tn.3 t1 {",
          "54:     REPLACE INTO t1 VALUES('one', 'four');",
          "55:   } {",
          "56:     {UPDATE t1 0 X. {t one t three} {{} {} t four}}",
          "57:   }",
          "59:   do_iterator_test 1.$tn.4 t1 {",
          "60:     DELETE FROM t1;",
          "61:   } {",
          "62:     {DELETE t1 0 X. {t one t four} {}}",
          "63:   }",
          "66: foreach {tn wo} {",
          "67:   1 \"\"",
          "68:   2 \"WITHOUT ROWID\"",
          "70:   reset_db",
          "72:   do_execsql_test 2.$tn.0 \"CREATE TABLE t1(a INTEGER PRIMARY KEY, b) $wo ;\"",
          "74:   do_iterator_test 1.1 t1 {",
          "75:     INSERT INTO t1 VALUES(1, 'two');",
          "76:   } {",
          "77:     {INSERT t1 0 X. {} {i 1 t two}}",
          "78:   }",
          "80:   do_iterator_test 2.$tn.2 t1 {",
          "81:     UPDATE t1 SET b='three'",
          "82:   } {",
          "83:     {UPDATE t1 0 X. {i 1 t two} {{} {} t three}}",
          "84:   }",
          "86:   do_iterator_test 2.$tn.3 t1 {",
          "87:     REPLACE INTO t1 VALUES(1, 'four');",
          "88:   } {",
          "89:     {UPDATE t1 0 X. {i 1 t three} {{} {} t four}}",
          "90:   }",
          "92:   do_iterator_test 2.$tn.4 t1 {",
          "93:     DELETE FROM t1;",
          "94:   } {",
          "95:     {DELETE t1 0 X. {i 1 t four} {}}",
          "96:   }",
          "",
          "---------------"
        ],
        "manifest.uuid||manifest.uuid": [
          "File: manifest.uuid -> manifest.uuid",
          "--- Hunk 1 ---",
          "[Context before]",
          "[No context available]",
          "",
          "[Removed Lines]",
          "1: 6064584d578f0ac7aba3f67912a5d9eb1a3c6001469f6b9becbe68871131f887",
          "",
          "[Added Lines]",
          "[None]",
          "",
          "---------------"
        ],
        "src/insert.c||src/insert.c": [
          "File: src/insert.c -> src/insert.c",
          "--- Hunk 1 ---",
          "[Context before]",
          "[No context available]",
          "",
          "[Removed Lines]",
          "[None]",
          "",
          "[Added Lines]",
          "1719: #ifndef SQLITE_ENABLE_PREUPDATE_HOOK",
          "",
          "---------------"
        ]
      }
    },
    {
      "candidate_hash": "1e60261cfbc34cdad2625241ba6e5bedfb2e6716",
      "candidate_info": {
        "commit_hash": "1e60261cfbc34cdad2625241ba6e5bedfb2e6716",
        "repo": "sqlite/sqlite",
        "commit_url": "https://github.com/sqlite/sqlite/commit/1e60261cfbc34cdad2625241ba6e5bedfb2e6716",
        "files": [
          "manifest",
          "manifest.uuid",
          "src/resolve.c",
          "test/altertab3.test"
        ],
        "message": "Fix a problem with renaming tables when the schema contains an invocation of a currently unregistered aggregate with a FILTER clause.\n\nFossilOrigin-Name: bd37ce3fb8dee8d538f6afc0bfc13cdc3ebdd504e6461f0130c6ecc8af585f68",
        "before_after_code_files": [
          "manifest.uuid||manifest.uuid",
          "src/resolve.c||src/resolve.c",
          "test/altertab3.test||test/altertab3.test"
        ]
      },
      "candidate_patch_features": {
        "candidate_earlier_than_patch": 1,
        "same_branch_evolution": 1,
        "olp_code_files": {
          "patch": [
            "manifest.uuid||manifest.uuid"
          ],
          "candidate": [
            "manifest.uuid||manifest.uuid"
          ]
        }
      },
      "candidate_diff": {
        "manifest.uuid||manifest.uuid": [
          "File: manifest.uuid -> manifest.uuid",
          "--- Hunk 1 ---",
          "[Context before]",
          "[No context available]",
          "",
          "[Removed Lines]",
          "1: 2bf5a4c16457562dc942bcc6ec06d9b4e795ef3ea8e31550e18857bbebd08a76",
          "",
          "[Added Lines]",
          "[None]",
          "",
          "---------------"
        ],
        "src/resolve.c||src/resolve.c": [
          "File: src/resolve.c -> src/resolve.c",
          "--- Hunk 1 ---",
          "[Context before]",
          "892:         }",
          "893:       }",
          "894: #ifndef SQLITE_OMIT_WINDOWFUNC",
          "896:         is_agg = 1;",
          "897:       }",
          "898: #endif",
          "",
          "[Removed Lines]",
          "895:       else if( pWin ){",
          "",
          "[Added Lines]",
          "895:       else if( ExprHasProperty(pExpr, EP_WinFunc) ){",
          "",
          "---------------"
        ],
        "test/altertab3.test||test/altertab3.test": [
          "File: test/altertab3.test -> test/altertab3.test",
          "--- Hunk 1 ---",
          "[Context before]",
          "331:   ALTER TABLE t1 RENAME TO t1x;",
          "332: }",
          "334: finish_test",
          "",
          "[Removed Lines]",
          "[None]",
          "",
          "[Added Lines]",
          "334: #-------------------------------------------------------------------------",
          "335: reset_db",
          "336: do_execsql_test 14.1 {",
          "337:   CREATE TABLE t1(a);",
          "338:   CREATE TABLE t2(b);",
          "339:   CREATE TRIGGER AFTER INSERT ON t1 BEGIN",
          "340:     SELECT sum() FILTER (WHERE (SELECT sum() FILTER (WHERE 0)) AND a);",
          "341:   END;",
          "342: }",
          "344: do_catchsql_test 14.2 {",
          "345:   ALTER TABLE t1 RENAME TO t1x;",
          "346: } {1 {error in trigger AFTER: no such column: a}}",
          "",
          "---------------"
        ]
      }
    },
    {
      "candidate_hash": "ea38f4f4ccd5354fd47f5419c84ddef4d2f0c2c6",
      "candidate_info": {
        "commit_hash": "ea38f4f4ccd5354fd47f5419c84ddef4d2f0c2c6",
        "repo": "sqlite/sqlite",
        "commit_url": "https://github.com/sqlite/sqlite/commit/ea38f4f4ccd5354fd47f5419c84ddef4d2f0c2c6",
        "files": [
          "manifest",
          "manifest.uuid",
          "src/shell.c.in"
        ],
        "message": "Fix a double-quoted string literal used in the \".schema\" command of the CLI.\n\nFossilOrigin-Name: fcd937d9786a82ef4147e657d54ea0beb6ac87e2eb1677186b318493d473077b",
        "before_after_code_files": [
          "manifest.uuid||manifest.uuid",
          "src/shell.c.in||src/shell.c.in"
        ]
      },
      "candidate_patch_features": {
        "candidate_earlier_than_patch": 1,
        "same_branch_evolution": 1,
        "olp_code_files": {
          "patch": [
            "manifest.uuid||manifest.uuid"
          ],
          "candidate": [
            "manifest.uuid||manifest.uuid"
          ]
        }
      },
      "candidate_diff": {
        "manifest.uuid||manifest.uuid": [
          "File: manifest.uuid -> manifest.uuid",
          "--- Hunk 1 ---",
          "[Context before]",
          "[No context available]",
          "",
          "[Removed Lines]",
          "1: ee293e5aeac0b05a8b809095610fd8b4fdaf8e68cd368de90ec0d45e3582ffe5",
          "",
          "[Added Lines]",
          "[None]",
          "",
          "---------------"
        ],
        "src/shell.c.in||src/shell.c.in": [
          "File: src/shell.c.in -> src/shell.c.in",
          "--- Hunk 1 ---",
          "[Context before]",
          "8388:         zDiv = \" UNION ALL \";",
          "8389:         appendText(&sSelect, \"SELECT shell_add_schema(sql,\", 0);",
          "8390:         if( sqlite3_stricmp(zDb, \"main\")!=0 ){",
          "8392:         }else{",
          "8393:           appendText(&sSelect, \"NULL\", 0);",
          "8394:         }",
          "",
          "[Removed Lines]",
          "8391:           appendText(&sSelect, zDb, '\"');",
          "",
          "[Added Lines]",
          "8391:           appendText(&sSelect, zDb, '\\'');",
          "",
          "---------------",
          "--- Hunk 2 ---",
          "[Context before]",
          "8397:         appendText(&sSelect, \" AS snum, \", 0);",
          "8398:         appendText(&sSelect, zDb, '\\'');",
          "8399:         appendText(&sSelect, \" AS sname FROM \", 0);",
          "8401:         appendText(&sSelect, \".sqlite_master\", 0);",
          "8402:       }",
          "8403:       sqlite3_finalize(pStmt);",
          "",
          "[Removed Lines]",
          "8400:         appendText(&sSelect, zDb, '\"');",
          "",
          "[Added Lines]",
          "8400:         appendText(&sSelect, zDb, quoteChar(zDb));",
          "",
          "---------------"
        ]
      }
    },
    {
      "candidate_hash": "150dfbd2c87b115095e850fe01c2aed9612e0246",
      "candidate_info": {
        "commit_hash": "150dfbd2c87b115095e850fe01c2aed9612e0246",
        "repo": "sqlite/sqlite",
        "commit_url": "https://github.com/sqlite/sqlite/commit/150dfbd2c87b115095e850fe01c2aed9612e0246",
        "files": [
          "manifest",
          "manifest.uuid",
          "test/altertab3.test",
          "test/corruptC.test",
          "test/memdb1.test",
          "test/pragma4.test"
        ],
        "message": "Fix minor problems in tcl test scripts.\n\nFossilOrigin-Name: 56b664185e3e56ad22e0c16a5b946fc8204d4d33221b6b4269d6d650dfd9969c",
        "before_after_code_files": [
          "manifest.uuid||manifest.uuid",
          "test/altertab3.test||test/altertab3.test",
          "test/corruptC.test||test/corruptC.test",
          "test/memdb1.test||test/memdb1.test",
          "test/pragma4.test||test/pragma4.test"
        ]
      },
      "candidate_patch_features": {
        "candidate_earlier_than_patch": 1,
        "same_branch_evolution": 1,
        "olp_code_files": {
          "patch": [
            "manifest.uuid||manifest.uuid"
          ],
          "candidate": [
            "manifest.uuid||manifest.uuid"
          ]
        }
      },
      "candidate_diff": {
        "manifest.uuid||manifest.uuid": [
          "File: manifest.uuid -> manifest.uuid",
          "--- Hunk 1 ---",
          "[Context before]",
          "[No context available]",
          "",
          "[Removed Lines]",
          "1: edd87cd606ce264f181c16bbe889adeb8b27e90914f914c0f5d7b68c2dc2d7bd",
          "",
          "[Added Lines]",
          "[None]",
          "",
          "---------------"
        ],
        "test/altertab3.test||test/altertab3.test": [
          "File: test/altertab3.test -> test/altertab3.test",
          "--- Hunk 1 ---",
          "[Context before]",
          "99:   COMMIT;",
          "100: }",
          "101: do_execsql_test 4.1.3 {",
          "106: do_catchsql_test 4.2.1 {",
          "",
          "[Removed Lines]",
          "102:   SELECT * FROM sqlite_master WHERE type='table' AND name!='t1';",
          "103: } {table t3 t3 3 {CREATE TABLE t3(e, f)}}",
          "",
          "[Added Lines]",
          "102:   SELECT type, name, tbl_name, sql",
          "103:   FROM sqlite_master WHERE type='table' AND name!='t1';",
          "104: } {table t3 t3 {CREATE TABLE t3(e, f)}}",
          "",
          "---------------",
          "--- Hunk 2 ---",
          "[Context before]",
          "111:   COMMIT;",
          "112: }",
          "113: do_execsql_test 4.2.3 {",
          "117: #-------------------------------------------------------------------------",
          "118: reset_db",
          "",
          "[Removed Lines]",
          "114:   SELECT * FROM sqlite_master WHERE type='table' AND name!='t1';",
          "115: } {table t3 t3 3 {CREATE TABLE t3(e, f)}}",
          "",
          "[Added Lines]",
          "115:   SELECT type, name, tbl_name, sql",
          "116:   FROM sqlite_master WHERE type='table' AND name!='t1';",
          "117: } {table t3 t3 {CREATE TABLE t3(e, f)}}",
          "",
          "---------------"
        ],
        "test/corruptC.test||test/corruptC.test": [
          "File: test/corruptC.test -> test/corruptC.test",
          "--- Hunk 1 ---",
          "[Context before]",
          "98:   sqlite3 db test.db",
          "99:   catchsql {PRAGMA integrity_check}",
          "102: # test that a corrupt content offset size is handled (seed 5649)",
          "103: #",
          "",
          "[Removed Lines]",
          "100: } {1 {database disk image is malformed}}",
          "",
          "[Added Lines]",
          "100: } {0 {{*** in database main ***",
          "101: Page 3: free space corruption}}}",
          "",
          "---------------"
        ],
        "test/memdb1.test||test/memdb1.test": [
          "File: test/memdb1.test -> test/memdb1.test",
          "--- Hunk 1 ---",
          "[Context before]",
          "186: } {1 {wrong # args: should be \"db serialize ?DATABASE?\"}}",
          "188: #-------------------------------------------------------------------------",
          "201:   }",
          "204: finish_test",
          "",
          "[Removed Lines]",
          "189: reset_db",
          "190: do_execsql_test 700 {",
          "191:   CREATE TABLE t1(a, b);",
          "192:   PRAGMA schema_version = 0;",
          "193: }",
          "194: do_test 710 {",
          "195:   set ser [db serialize main]",
          "196:   db close",
          "197:   sqlite3 db",
          "198:   db deserialize main $ser",
          "199:   catchsql {",
          "200:     CREATE VIRTUAL TABLE t1 USING rtree(id, a, b, c, d);",
          "202: } {1 {table t1 already exists}}",
          "",
          "[Added Lines]",
          "189: ifcapable vtab {",
          "190:   reset_db",
          "191:   do_execsql_test 700 {",
          "192:     CREATE TABLE t1(a, b);",
          "193:     PRAGMA schema_version = 0;",
          "195:   do_test 710 {",
          "196:     set ser [db serialize main]",
          "197:     db close",
          "198:     sqlite3 db",
          "199:     db deserialize main $ser",
          "200:     catchsql {",
          "201:       CREATE VIRTUAL TABLE t1 USING rtree(id, a, b, c, d);",
          "202:     }",
          "203:   } {1 {table t1 already exists}}",
          "204: }",
          "",
          "---------------"
        ],
        "test/pragma4.test||test/pragma4.test": [
          "File: test/pragma4.test -> test/pragma4.test",
          "--- Hunk 1 ---",
          "[Context before]",
          "174:   execsql { DROP INDEX i1 } db3",
          "175:   execsql { DROP INDEX i2 } db2",
          "176: } {}",
          "177: ifcapable vtab {",
          "178:   do_execsql_test 4.3.5 { SELECT * FROM pragma_index_info('i1') }",
          "179:   do_execsql_test 4.3.6 { SELECT * FROM pragma_index_info('i2') }",
          "",
          "[Removed Lines]",
          "[None]",
          "",
          "[Added Lines]",
          "177: if {[permutation]==\"prepare\"} { catchsql { SELECT * FROM sqlite_master } }",
          "",
          "---------------",
          "--- Hunk 2 ---",
          "[Context before]",
          "192:   execsql { DROP INDEX i1 } db3",
          "193:   execsql { DROP INDEX i2 } db2",
          "194: } {}",
          "195: ifcapable vtab {",
          "196:   do_execsql_test 4.4.5 { SELECT * FROM pragma_index_list('t1') } {}",
          "197:   do_execsql_test 4.4.6 { SELECT * FROM pragma_index_list('t2') } {}",
          "",
          "[Removed Lines]",
          "[None]",
          "",
          "[Added Lines]",
          "196: if {[permutation]==\"prepare\"} {",
          "197:   catchsql { SELECT * FROM sqlite_master, aux.sqlite_master }",
          "198: }",
          "",
          "---------------",
          "--- Hunk 3 ---",
          "[Context before]",
          "216:   execsql { DROP TABLE c1 } db3",
          "217:   execsql { DROP TABLE c2 } db2",
          "218: } {}",
          "219: ifcapable vtab {",
          "220:   do_execsql_test 4.5.4 { SELECT * FROM pragma_foreign_key_list('c1') }",
          "221:   do_execsql_test 4.5.5 { SELECT * FROM pragma_foreign_key_list('c2') }",
          "",
          "[Removed Lines]",
          "[None]",
          "",
          "[Added Lines]",
          "223: if {[permutation]==\"prepare\"} {",
          "224:   catchsql { SELECT * FROM sqlite_master, aux.sqlite_master }",
          "225: }",
          "",
          "---------------"
        ]
      }
    },
    {
      "candidate_hash": "ae3977a8f30bb859b858c36d03f07319ba210615",
      "candidate_info": {
        "commit_hash": "ae3977a8f30bb859b858c36d03f07319ba210615",
        "repo": "sqlite/sqlite",
        "commit_url": "https://github.com/sqlite/sqlite/commit/ae3977a8f30bb859b858c36d03f07319ba210615",
        "files": [
          "manifest",
          "manifest.uuid",
          "src/insert.c"
        ],
        "message": "Fix the xfer optimization for generated columns, so that VACUUM works again.\n\nFossilOrigin-Name: 8f67b89b04622c1509dc102a83be7a80057dc791625804fc2c294089c98b97e4",
        "before_after_code_files": [
          "manifest.uuid||manifest.uuid",
          "src/insert.c||src/insert.c"
        ]
      },
      "candidate_patch_features": {
        "candidate_earlier_than_patch": 1,
        "same_branch_evolution": 1,
        "olp_code_files": {
          "patch": [
            "manifest.uuid||manifest.uuid"
          ],
          "candidate": [
            "manifest.uuid||manifest.uuid"
          ]
        }
      },
      "candidate_diff": {
        "manifest.uuid||manifest.uuid": [
          "File: manifest.uuid -> manifest.uuid",
          "--- Hunk 1 ---",
          "[Context before]",
          "[No context available]",
          "",
          "[Removed Lines]",
          "1: c21959d4eb5d742a097a98e1874c0bf132dc962a97a65be1ab22d6ca3cf2b261",
          "",
          "[Added Lines]",
          "[None]",
          "",
          "---------------"
        ],
        "src/insert.c||src/insert.c": [
          "File: src/insert.c -> src/insert.c",
          "--- Hunk 1 ---",
          "[Context before]",
          "2290:     }",
          "2291: #endif",
          "2292:     if( pDestCol->affinity!=pSrcCol->affinity ){",
          "2294:     }",
          "",
          "[Removed Lines]",
          "[None]",
          "",
          "[Added Lines]",
          "2292:     if( (pDestCol->colFlags & COLFLAG_GENERATED) !=",
          "2293:         (pSrcCol->colFlags & COLFLAG_GENERATED) ){",
          "2295:     }",
          "",
          "---------------",
          "--- Hunk 2 ---",
          "[Context before]",
          "2300:     }",
          "2303:       assert( pDestCol->pDflt==0 || pDestCol->pDflt->op==TK_SPAN );",
          "2304:       assert( pSrcCol->pDflt==0 || pSrcCol->pDflt->op==TK_SPAN );",
          "2305:       if( (pDestCol->pDflt==0)!=(pSrcCol->pDflt==0)",
          "",
          "[Removed Lines]",
          "2302:     if( i>0 ){",
          "",
          "[Added Lines]",
          "2306:     if( (pDestCol->colFlags & COLFLAG_GENERATED)==0 && i>0 ){",
          "",
          "---------------",
          "--- Hunk 3 ---",
          "[Context before]",
          "2310:       }",
          "2311:     }",
          "2312:   }",
          "2313:   for(pDestIdx=pDest->pIndex; pDestIdx; pDestIdx=pDestIdx->pNext){",
          "2314:     if( IsUniqueIndex(pDestIdx) ){",
          "",
          "[Removed Lines]",
          "[None]",
          "",
          "[Added Lines]",
          "2317:     if( (pDestCol->colFlags & COLFLAG_GENERATED)!=0 ){",
          "2318:       if( sqlite3ExprCompare(0, pSrcCol->pDflt, pDestCol->pDflt, -1)!=0 ){",
          "2320:       }",
          "2321:     }",
          "",
          "---------------"
        ]
      }
    }
  ]
}