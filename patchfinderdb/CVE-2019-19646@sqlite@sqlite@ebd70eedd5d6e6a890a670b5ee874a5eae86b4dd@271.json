{
  "cve_id": "CVE-2019-19646",
  "cve_desc": "pragma.c in SQLite through 3.30.1 mishandles NOT NULL in an integrity_check PRAGMA command in certain cases of generated columns.",
  "repo": "sqlite/sqlite",
  "patch_hash": "ebd70eedd5d6e6a890a670b5ee874a5eae86b4dd",
  "patch_info": {
    "commit_hash": "ebd70eedd5d6e6a890a670b5ee874a5eae86b4dd",
    "repo": "sqlite/sqlite",
    "commit_url": "https://github.com/sqlite/sqlite/commit/ebd70eedd5d6e6a890a670b5ee874a5eae86b4dd",
    "files": [
      "manifest",
      "manifest.uuid",
      "src/pragma.c",
      "test/gencol1.test"
    ],
    "message": "Fix the NOT NULL verification logic in PRAGMA integrity_check so that it works for generated columns whose value is the result of a comparison operator. Ticket [bd8c280671ba44a7]\n\nFossilOrigin-Name: f3b39c71b88cb6721f443de56cdce4c08252453a5e340b00a2bd88dc10c42400",
    "before_after_code_files": [
      "manifest.uuid||manifest.uuid",
      "src/pragma.c||src/pragma.c",
      "test/gencol1.test||test/gencol1.test"
    ]
  },
  "patch_diff": {
    "manifest.uuid||manifest.uuid": [
      "File: manifest.uuid -> manifest.uuid",
      "--- Hunk 1 ---",
      "[Context before]",
      "[No context available]",
      "",
      "[Removed Lines]",
      "1: e3398c5ffb060b2b26334b8598e2c63953741e2d6f5124dbd6bdfc8e94742539",
      "",
      "[Added Lines]",
      "[None]",
      "",
      "---------------"
    ],
    "src/pragma.c||src/pragma.c": [
      "File: src/pragma.c -> src/pragma.c",
      "--- Hunk 1 ---",
      "[Context before]",
      "1596:           if( j==pTab->iPKey ) continue;",
      "1597:           if( pTab->aCol[j].notNull==0 ) continue;",
      "1598:           sqlite3ExprCodeGetColumnOfTable(v, pTab, iDataCur, j, 3);",
      "1600:           jmp2 = sqlite3VdbeAddOp1(v, OP_NotNull, 3); VdbeCoverage(v);",
      "1601:           zErr = sqlite3MPrintf(db, \"NULL value in %s.%s\", pTab->zName,",
      "1602:                               pTab->aCol[j].zName);",
      "",
      "[Removed Lines]",
      "1599:           sqlite3VdbeChangeP5(v, OPFLAG_TYPEOFARG);",
      "",
      "[Added Lines]",
      "1599:           if( sqlite3VdbeGetOp(v,-1)->opcode==OP_Column ){",
      "1600:             sqlite3VdbeChangeP5(v, OPFLAG_TYPEOFARG);",
      "1601:           }",
      "",
      "---------------"
    ],
    "test/gencol1.test||test/gencol1.test": [
      "File: test/gencol1.test -> test/gencol1.test",
      "--- Hunk 1 ---",
      "[Context before]",
      "328:   INSERT OR REPLACE INTO t0(c0, c1) VALUES (2, 1), (1, 0)",
      "329: } {1 {FOREIGN KEY constraint failed}}",
      "331: finish_test",
      "",
      "[Removed Lines]",
      "[None]",
      "",
      "[Added Lines]",
      "331: # 2019-12-09 ticket bd8c280671ba44a7",
      "332: # With generated columns, the sqlite3ExprGetColumnOfTable() routine might",
      "333: # generate a code sequence that does not end with OP_Column.  So check to",
      "334: # make sure that the last instruction generated is an OP_column prior to",
      "335: # applying the OPFLAG_TYPEOFARG optimization to NOT NULL checks in the",
      "336: # PRAGMA integrity_check code.",
      "337: #",
      "338: sqlite3 db :memory:",
      "339: do_execsql_test gencol1-12.10 {",
      "340:   CREATE TABLE t0 (c0, c1 NOT NULL AS (c0==0));",
      "341:   INSERT INTO t0(c0) VALUES (0);",
      "342:   PRAGMA integrity_check;",
      "343: } {ok}",
      "",
      "---------------"
    ]
  },
  "candidates": [
    {
      "candidate_hash": "1194904b814d6da63930dee75bc468094706226a",
      "candidate_info": {
        "commit_hash": "1194904b814d6da63930dee75bc468094706226a",
        "repo": "sqlite/sqlite",
        "commit_url": "https://github.com/sqlite/sqlite/commit/1194904b814d6da63930dee75bc468094706226a",
        "files": [
          "manifest",
          "manifest.uuid",
          "src/expr.c",
          "src/fkey.c",
          "src/parse.y",
          "src/resolve.c",
          "src/sqliteInt.h",
          "src/treeview.c"
        ],
        "message": "Refactor field Expr.affinity into Expr.affExpr to avoid confusion with other fields and variables named \"affinity\" and display affExpr it in sqlite3TreeViewExpr() output.\n\nFossilOrigin-Name: a29f2a7d07beff64e489e8f824babc6228c4a499fadc0ee701caa60a63baadcd",
        "before_after_code_files": [
          "manifest.uuid||manifest.uuid",
          "src/expr.c||src/expr.c",
          "src/fkey.c||src/fkey.c",
          "src/parse.y||src/parse.y",
          "src/resolve.c||src/resolve.c",
          "src/sqliteInt.h||src/sqliteInt.h",
          "src/treeview.c||src/treeview.c"
        ]
      },
      "candidate_patch_features": {
        "candidate_earlier_than_patch": 1,
        "same_branch_evolution": 1,
        "olp_code_files": {
          "patch": [
            "manifest.uuid||manifest.uuid"
          ],
          "candidate": [
            "manifest.uuid||manifest.uuid"
          ]
        }
      },
      "candidate_diff": {
        "manifest.uuid||manifest.uuid": [
          "File: manifest.uuid -> manifest.uuid",
          "--- Hunk 1 ---",
          "[Context before]",
          "[No context available]",
          "",
          "[Removed Lines]",
          "1: 4b00799bdf107fce8a9dd84fd5bf6597e4f3373659b89aae4a1242be5964726f",
          "",
          "[Added Lines]",
          "[None]",
          "",
          "---------------"
        ],
        "src/expr.c||src/expr.c": [
          "File: src/expr.c -> src/expr.c",
          "--- Hunk 1 ---",
          "[Context before]",
          "71:         pExpr->pLeft->x.pSelect->pEList->a[pExpr->iColumn].pExpr",
          "72:     );",
          "73:   }",
          "75: }",
          "",
          "[Removed Lines]",
          "74:   return pExpr->affinity;",
          "",
          "[Added Lines]",
          "74:   return pExpr->affExpr;",
          "",
          "---------------",
          "--- Hunk 2 ---",
          "[Context before]",
          "4099:     }",
          "4100: #ifndef SQLITE_OMIT_TRIGGER",
          "4101:     case TK_RAISE: {",
          "4106:       );",
          "4107:       if( !pParse->pTriggerTab ){",
          "4108:         sqlite3ErrorMsg(pParse,",
          "4109:                        \"RAISE() may only be used within a trigger-program\");",
          "4110:         return 0;",
          "4111:       }",
          "4113:         sqlite3MayAbort(pParse);",
          "4114:       }",
          "4115:       assert( !ExprHasProperty(pExpr, EP_IntValue) );",
          "4117:         sqlite3VdbeAddOp4(",
          "4118:             v, OP_Halt, SQLITE_OK, OE_Ignore, 0, pExpr->u.zToken,0);",
          "4119:         VdbeCoverage(v);",
          "4120:       }else{",
          "4121:         sqlite3HaltConstraint(pParse, SQLITE_CONSTRAINT_TRIGGER,",
          "4123:       }",
          "4125:       break;",
          "",
          "[Removed Lines]",
          "4102:       assert( pExpr->affinity==OE_Rollback",
          "4103:            || pExpr->affinity==OE_Abort",
          "4104:            || pExpr->affinity==OE_Fail",
          "4105:            || pExpr->affinity==OE_Ignore",
          "4112:       if( pExpr->affinity==OE_Abort ){",
          "4116:       if( pExpr->affinity==OE_Ignore ){",
          "4122:                               pExpr->affinity, pExpr->u.zToken, 0, 0);",
          "",
          "[Added Lines]",
          "4102:       assert( pExpr->affExpr==OE_Rollback",
          "4103:            || pExpr->affExpr==OE_Abort",
          "4104:            || pExpr->affExpr==OE_Fail",
          "4105:            || pExpr->affExpr==OE_Ignore",
          "4112:       if( pExpr->affExpr==OE_Abort ){",
          "4116:       if( pExpr->affExpr==OE_Ignore ){",
          "4122:                               pExpr->affExpr, pExpr->u.zToken, 0, 0);",
          "",
          "---------------"
        ],
        "src/fkey.c||src/fkey.c": [
          "File: src/fkey.c -> src/fkey.c",
          "--- Hunk 1 ---",
          "[Context before]",
          "478:     if( iCol>=0 && iCol!=pTab->iPKey ){",
          "479:       pCol = &pTab->aCol[iCol];",
          "480:       pExpr->iTable = regBase + iCol + 1;",
          "482:       zColl = pCol->zColl;",
          "483:       if( zColl==0 ) zColl = db->pDfltColl->zName;",
          "484:       pExpr = sqlite3ExprAddCollateString(pParse, pExpr, zColl);",
          "485:     }else{",
          "486:       pExpr->iTable = regBase;",
          "488:     }",
          "489:   }",
          "490:   return pExpr;",
          "",
          "[Removed Lines]",
          "481:       pExpr->affinity = pCol->affinity;",
          "487:       pExpr->affinity = SQLITE_AFF_INTEGER;",
          "",
          "[Added Lines]",
          "481:       pExpr->affExpr = pCol->affinity;",
          "487:       pExpr->affExpr = SQLITE_AFF_INTEGER;",
          "",
          "---------------",
          "--- Hunk 2 ---",
          "[Context before]",
          "1287:       tFrom.n = nFrom;",
          "1288:       pRaise = sqlite3Expr(db, TK_RAISE, \"FOREIGN KEY constraint failed\");",
          "1289:       if( pRaise ){",
          "1291:       }",
          "1292:       pSelect = sqlite3SelectNew(pParse,",
          "1293:           sqlite3ExprListAppend(pParse, 0, pRaise),",
          "",
          "[Removed Lines]",
          "1290:         pRaise->affinity = OE_Abort;",
          "",
          "[Added Lines]",
          "1290:         pRaise->affExpr = OE_Abort;",
          "",
          "---------------"
        ],
        "src/parse.y||src/parse.y": [
          "File: src/parse.y -> src/parse.y",
          "--- Hunk 1 ---",
          "[Context before]",
          "949:     if( p ){",
          "951:       p->op = (u8)op;",
          "953:       p->flags = EP_Leaf;",
          "954:       p->iAgg = -1;",
          "955:       p->pLeft = p->pRight = 0;",
          "",
          "[Removed Lines]",
          "952:       p->affinity = 0;",
          "",
          "[Added Lines]",
          "952:       p->affExpr = 0;",
          "",
          "---------------",
          "--- Hunk 2 ---",
          "[Context before]",
          "1508: expr(A) ::= RAISE LP IGNORE RP.  {",
          "1509:   A = sqlite3PExpr(pParse, TK_RAISE, 0, 0);",
          "1510:   if( A ){",
          "1512:   }",
          "1513: }",
          "1514: expr(A) ::= RAISE LP raisetype(T) COMMA nm(Z) RP.  {",
          "1515:   A = sqlite3ExprAlloc(pParse->db, TK_RAISE, &Z, 1);",
          "1516:   if( A ) {",
          "1518:   }",
          "1519: }",
          "1520: %endif  !SQLITE_OMIT_TRIGGER",
          "",
          "[Removed Lines]",
          "1511:     A->affinity = OE_Ignore;",
          "1517:     A->affinity = (char)T;",
          "",
          "[Added Lines]",
          "1511:     A->affExpr = OE_Ignore;",
          "1517:     A->affExpr = (char)T;",
          "",
          "---------------"
        ],
        "src/resolve.c||src/resolve.c": [
          "File: src/resolve.c -> src/resolve.c",
          "--- Hunk 1 ---",
          "[Context before]",
          "381:           {",
          "382: #ifndef SQLITE_OMIT_TRIGGER",
          "383:             if( iCol<0 ){",
          "385:             }else if( pExpr->iTable==0 ){",
          "386:               testcase( iCol==31 );",
          "387:               testcase( iCol==32 );",
          "",
          "[Removed Lines]",
          "384:               pExpr->affinity = SQLITE_AFF_INTEGER;",
          "",
          "[Added Lines]",
          "384:               pExpr->affExpr = SQLITE_AFF_INTEGER;",
          "",
          "---------------",
          "--- Hunk 2 ---",
          "[Context before]",
          "413:     ){",
          "414:       cnt = 1;",
          "415:       pExpr->iColumn = -1;",
          "417:     }",
          "",
          "[Removed Lines]",
          "416:       pExpr->affinity = SQLITE_AFF_INTEGER;",
          "",
          "[Added Lines]",
          "416:       pExpr->affExpr = SQLITE_AFF_INTEGER;",
          "",
          "---------------"
        ],
        "src/sqliteInt.h||src/sqliteInt.h": [
          "File: src/sqliteInt.h -> src/sqliteInt.h"
        ],
        "src/treeview.c||src/treeview.c": [
          "File: src/treeview.c -> src/treeview.c",
          "--- Hunk 1 ---",
          "[Context before]",
          "402:     sqlite3TreeViewPop(pView);",
          "403:     return;",
          "404:   }",
          "406:     if( ExprHasProperty(pExpr, EP_FromJoin) ){",
          "409:     }else{",
          "411:     }",
          "412:   }else{",
          "413:     zFlgs[0] = 0;",
          "",
          "[Removed Lines]",
          "405:   if( pExpr->flags ){",
          "407:       sqlite3_snprintf(sizeof(zFlgs),zFlgs,\"  flags=0x%x iRJT=%d\",",
          "408:                        pExpr->flags, pExpr->iRightJoinTable);",
          "410:       sqlite3_snprintf(sizeof(zFlgs),zFlgs,\"  flags=0x%x\",pExpr->flags);",
          "",
          "[Added Lines]",
          "405:   if( pExpr->flags || pExpr->affExpr ){",
          "407:       sqlite3_snprintf(sizeof(zFlgs),zFlgs,\"  fg.af=%x.%c iRJT=%d\",",
          "408:                        pExpr->flags, pExpr->affExpr ? pExpr->affExpr : 'n',",
          "409:                        pExpr->iRightJoinTable);",
          "411:       sqlite3_snprintf(sizeof(zFlgs),zFlgs,\"  fg.af=%x.%c\",",
          "412:                        pExpr->flags, pExpr->affExpr ? pExpr->affExpr : 'n');",
          "",
          "---------------",
          "--- Hunk 2 ---",
          "[Context before]",
          "635: #ifndef SQLITE_OMIT_TRIGGER",
          "636:     case TK_RAISE: {",
          "637:       const char *zType = \"unk\";",
          "639:         case OE_Rollback:   zType = \"rollback\";  break;",
          "640:         case OE_Abort:      zType = \"abort\";     break;",
          "641:         case OE_Fail:       zType = \"fail\";      break;",
          "",
          "[Removed Lines]",
          "638:       switch( pExpr->affinity ){",
          "",
          "[Added Lines]",
          "640:       switch( pExpr->affExpr ){",
          "",
          "---------------",
          "--- Hunk 3 ---",
          "[Context before]",
          "676:     sqlite3TreeViewExpr(pView, pExpr->pRight, 0);",
          "677:   }else if( zUniOp ){",
          "678:     sqlite3TreeViewLine(pView, \"%s%s\", zUniOp, zFlgs);",
          "680:   }",
          "681:   sqlite3TreeViewPop(pView);",
          "682: }",
          "",
          "[Removed Lines]",
          "679:     sqlite3TreeViewExpr(pView, pExpr->pLeft, 0);",
          "",
          "[Added Lines]",
          "681:    sqlite3TreeViewExpr(pView, pExpr->pLeft, 0);",
          "",
          "---------------"
        ]
      }
    },
    {
      "candidate_hash": "e22976c5357fb6501cb0dd40220b8d48bd9295bb",
      "candidate_info": {
        "commit_hash": "e22976c5357fb6501cb0dd40220b8d48bd9295bb",
        "repo": "sqlite/sqlite",
        "commit_url": "https://github.com/sqlite/sqlite/commit/e22976c5357fb6501cb0dd40220b8d48bd9295bb",
        "files": [
          "manifest",
          "manifest.uuid",
          "src/pager.c"
        ],
        "message": "Fix the SQLITE_DIRECT_OVERFLOW_READ compile-time option so that it works with SQLITE_HAS_CODEC.\n\nFossilOrigin-Name: fd085e9260bec18f968704abb2dd324d954baa121d13b67c3f5b801e9e3834aa",
        "before_after_code_files": [
          "manifest.uuid||manifest.uuid",
          "src/pager.c||src/pager.c"
        ]
      },
      "candidate_patch_features": {
        "candidate_earlier_than_patch": 1,
        "same_branch_evolution": 1,
        "olp_code_files": {
          "patch": [
            "manifest.uuid||manifest.uuid"
          ],
          "candidate": [
            "manifest.uuid||manifest.uuid"
          ]
        }
      },
      "candidate_diff": {
        "manifest.uuid||manifest.uuid": [
          "File: manifest.uuid -> manifest.uuid",
          "--- Hunk 1 ---",
          "[Context before]",
          "[No context available]",
          "",
          "[Removed Lines]",
          "1: d49c32e6e7cc341b5961d2c7b7c68d1649c6542eeec201660e3f82a55aea9e3b",
          "",
          "[Added Lines]",
          "[None]",
          "",
          "---------------"
        ],
        "src/pager.c||src/pager.c": [
          "File: src/pager.c -> src/pager.c",
          "--- Hunk 1 ---",
          "[Context before]",
          "837: int sqlite3PagerDirectReadOk(Pager *pPager, Pgno pgno){",
          "838:   if( pPager->fd->pMethods==0 ) return 0;",
          "839:   if( sqlite3PCacheIsDirty(pPager->pPCache) ) return 0;",
          "840: #ifndef SQLITE_OMIT_WAL",
          "841:   if( pPager->pWal ){",
          "842:     u32 iRead = 0;",
          "",
          "[Removed Lines]",
          "[None]",
          "",
          "[Added Lines]",
          "840: #ifdef SQLITE_HAS_CODEC",
          "841:   if( pPager->xCodec!=0 ) return 0;",
          "842: #endif",
          "",
          "---------------"
        ]
      }
    },
    {
      "candidate_hash": "73c53b39c9656c5bf8cd6a1758b055d806dd7dcc",
      "candidate_info": {
        "commit_hash": "73c53b39c9656c5bf8cd6a1758b055d806dd7dcc",
        "repo": "sqlite/sqlite",
        "commit_url": "https://github.com/sqlite/sqlite/commit/73c53b39c9656c5bf8cd6a1758b055d806dd7dcc",
        "files": [
          "manifest",
          "manifest.uuid",
          "src/select.c",
          "test/countofview.test"
        ],
        "message": "Fix the count-of-view optimization so that it is (correctly) disabled for a query that includes a WHERE clause or a GROUP BY clause.\n\nFossilOrigin-Name: 05897ca48a40c6771ff83ba8ecc3a5c60dafddf58651c222dd8cf89b9fc7b077",
        "before_after_code_files": [
          "manifest.uuid||manifest.uuid",
          "src/select.c||src/select.c",
          "test/countofview.test||test/countofview.test"
        ]
      },
      "candidate_patch_features": {
        "candidate_earlier_than_patch": 1,
        "same_branch_evolution": 1,
        "olp_code_files": {
          "patch": [
            "manifest.uuid||manifest.uuid"
          ],
          "candidate": [
            "manifest.uuid||manifest.uuid"
          ]
        }
      },
      "candidate_diff": {
        "manifest.uuid||manifest.uuid": [
          "File: manifest.uuid -> manifest.uuid",
          "--- Hunk 1 ---",
          "[Context before]",
          "[No context available]",
          "",
          "[Removed Lines]",
          "1: adebffc18e6165672947a6bda5ca23ea7723cca7ab8da4feb81fca8f83e4fcaf",
          "",
          "[Added Lines]",
          "[None]",
          "",
          "---------------"
        ],
        "src/select.c||src/select.c": [
          "File: src/select.c -> src/select.c",
          "--- Hunk 1 ---",
          "[Context before]",
          "5519:   sqlite3 *db;",
          "5522:   pExpr = p->pEList->a[0].pExpr;",
          "",
          "[Removed Lines]",
          "[None]",
          "",
          "[Added Lines]",
          "5523:   if( p->pWhere ) return 0;",
          "5524:   if( p->pGroupBy ) return 0;",
          "",
          "---------------"
        ],
        "test/countofview.test||test/countofview.test": [
          "File: test/countofview.test -> test/countofview.test",
          "--- Hunk 1 ---",
          "[Context before]",
          "40:   )",
          "41: } {3}",
          "43: finish_test",
          "",
          "[Removed Lines]",
          "[None]",
          "",
          "[Added Lines]",
          "43: # 2019-05-15",
          "44: do_execsql_test 2.0 {",
          "45:   CREATE TABLE t1(x);",
          "46:   INSERT INTO t1 VALUES(1),(99),('abc');",
          "47:   CREATE VIEW v1(x,y) AS SELECT x,1 FROM t1 UNION ALL SELECT x,2 FROM t1;",
          "48:   SELECT count(*) FROM v1 WHERE x<>1;",
          "49: } {4}",
          "50: do_execsql_test 2.1 {",
          "51:   SELECT count(*) FROM v1 GROUP BY y;",
          "52: } {3 3}",
          "",
          "---------------"
        ]
      }
    },
    {
      "candidate_hash": "7edcb11ca7153b3e8a0b01d14142453e2b11ea6f",
      "candidate_info": {
        "commit_hash": "7edcb11ca7153b3e8a0b01d14142453e2b11ea6f",
        "repo": "sqlite/sqlite",
        "commit_url": "https://github.com/sqlite/sqlite/commit/7edcb11ca7153b3e8a0b01d14142453e2b11ea6f",
        "files": [
          "manifest",
          "manifest.uuid",
          "src/sqlite.h.in"
        ],
        "message": "Fix a typo in the documentation for sqlite3_total_changes().\n\nFossilOrigin-Name: 8474c1560e0c3a28c6a7ed360202a8e7caae3c8259f60bbfa6d2948ab7876f51",
        "before_after_code_files": [
          "manifest.uuid||manifest.uuid",
          "src/sqlite.h.in||src/sqlite.h.in"
        ]
      },
      "candidate_patch_features": {
        "candidate_earlier_than_patch": 1,
        "same_branch_evolution": 1,
        "olp_code_files": {
          "patch": [
            "manifest.uuid||manifest.uuid"
          ],
          "candidate": [
            "manifest.uuid||manifest.uuid"
          ]
        }
      },
      "candidate_diff": {
        "manifest.uuid||manifest.uuid": [
          "File: manifest.uuid -> manifest.uuid",
          "--- Hunk 1 ---",
          "[Context before]",
          "[No context available]",
          "",
          "[Removed Lines]",
          "1: 84162af521f29df8a186163fbdef9856e1aa8aba78e74d7df0ba2cc83bb86240",
          "",
          "[Added Lines]",
          "[None]",
          "",
          "---------------"
        ],
        "src/sqlite.h.in||src/sqlite.h.in": [
          "File: src/sqlite.h.in -> src/sqlite.h.in"
        ]
      }
    },
    {
      "candidate_hash": "8c754a3613e22b0f19c8e0847615cca9f98a4ac4",
      "candidate_info": {
        "commit_hash": "8c754a3613e22b0f19c8e0847615cca9f98a4ac4",
        "repo": "sqlite/sqlite",
        "commit_url": "https://github.com/sqlite/sqlite/commit/8c754a3613e22b0f19c8e0847615cca9f98a4ac4",
        "files": [
          "manifest",
          "manifest.uuid",
          "src/shell.c.in",
          "src/sqlite.h.in",
          "src/test1.c",
          "src/vtab.c"
        ],
        "message": "Omit the \"_except\" term from the name of the new interface.\n\nFossilOrigin-Name: e5ba47c2d8eb9f48a0e0d325e57d0092d536f85983819634c871ebd51829f1d1",
        "before_after_code_files": [
          "manifest.uuid||manifest.uuid",
          "src/shell.c.in||src/shell.c.in",
          "src/sqlite.h.in||src/sqlite.h.in",
          "src/test1.c||src/test1.c",
          "src/vtab.c||src/vtab.c"
        ]
      },
      "candidate_patch_features": {
        "candidate_earlier_than_patch": 1,
        "same_branch_evolution": 1,
        "olp_code_files": {
          "patch": [
            "manifest.uuid||manifest.uuid"
          ],
          "candidate": [
            "manifest.uuid||manifest.uuid"
          ]
        }
      },
      "candidate_diff": {
        "manifest.uuid||manifest.uuid": [
          "File: manifest.uuid -> manifest.uuid",
          "--- Hunk 1 ---",
          "[Context before]",
          "[No context available]",
          "",
          "[Removed Lines]",
          "1: 0851db4d337a87f8b2d3ce2ae9f9c928b9483591ca41a9e39cc01548059b1888",
          "",
          "[Added Lines]",
          "[None]",
          "",
          "---------------"
        ],
        "src/shell.c.in||src/shell.c.in": [
          "File: src/shell.c.in -> src/shell.c.in",
          "--- Hunk 1 ---",
          "[Context before]",
          "9409: #ifdef SQLITE_DEBUG",
          "9410:   if( c=='u' && strncmp(azArg[0], \"unmodule\", n)==0 ){",
          "9411:     int ii;",
          "9412:     char *zOpt;",
          "9413:     if( nArg<2 ){",
          "9414:       raw_printf(stderr, \"Usage: .unmodule [--allexcept] NAME ...\\n\");",
          "",
          "[Removed Lines]",
          "[None]",
          "",
          "[Added Lines]",
          "9412:     int lenOpt;",
          "",
          "---------------",
          "--- Hunk 2 ---",
          "[Context before]",
          "9418:     open_db(p, 0);",
          "9419:     zOpt = azArg[1];",
          "9420:     if( zOpt[0]=='-' && zOpt[1]=='-' && zOpt[2]!=0 ) zOpt++;",
          "9422:       assert( azArg[nArg]==0 );",
          "9424:     }else{",
          "9425:       for(ii=1; ii<nArg; ii++){",
          "9426:         sqlite3_create_module(p->db, azArg[ii], 0, 0);",
          "",
          "[Removed Lines]",
          "9421:     if( strcmp(zOpt, \"-allexcept\")==0 ){",
          "9423:       sqlite3_drop_modules_except(p->db, nArg>2 ? (const char**)(azArg+2) : 0);",
          "",
          "[Added Lines]",
          "9422:     lenOpt = (int)strlen(zOpt);",
          "9423:     if( lenOpt>=3 && strncmp(zOpt, \"-allexcept\",lenOpt)==0 ){",
          "9425:       sqlite3_drop_modules(p->db, nArg>2 ? (const char**)(azArg+2) : 0);",
          "",
          "---------------"
        ],
        "src/sqlite.h.in||src/sqlite.h.in": [
          "File: src/sqlite.h.in -> src/sqlite.h.in",
          "--- Hunk 1 ---",
          "[Context before]",
          "6670: );",
          "",
          "[Removed Lines]",
          "6667: int sqlite3_drop_modules_except(",
          "",
          "[Added Lines]",
          "6671: int sqlite3_drop_modules(",
          "",
          "---------------"
        ],
        "src/test1.c||src/test1.c": [
          "File: src/test1.c -> src/test1.c",
          "--- Hunk 1 ---",
          "[Context before]",
          "1111: }",
          "1121:   void *NotUsed,",
          "",
          "[Removed Lines]",
          "1120: static int SQLITE_TCLAPI test_drop_except(",
          "",
          "[Added Lines]",
          "1120: static int SQLITE_TCLAPI test_drop_modules(",
          "",
          "---------------",
          "--- Hunk 2 ---",
          "[Context before]",
          "1132:     return TCL_ERROR;",
          "1133:   }",
          "1134:   if( getDbPointer(interp, argv[1], &db) ) return TCL_ERROR;",
          "1136:   return TCL_OK;",
          "1137: }",
          "",
          "[Removed Lines]",
          "1135:   sqlite3_drop_modules_except(db, argc>2 ? (const char**)(argv+2) : 0);",
          "",
          "[Added Lines]",
          "1135:   sqlite3_drop_modules(db, argc>2 ? (const char**)(argv+2) : 0);",
          "",
          "---------------",
          "--- Hunk 3 ---",
          "[Context before]",
          "7886:      { \"sqlite3_close_v2\",              (Tcl_CmdProc*)sqlite_test_close_v2  },",
          "7887:      { \"sqlite3_create_function\",       (Tcl_CmdProc*)test_create_function  },",
          "7888:      { \"sqlite3_create_aggregate\",      (Tcl_CmdProc*)test_create_aggregate },",
          "7890:      { \"sqlite_register_test_function\", (Tcl_CmdProc*)test_register_func    },",
          "7891:      { \"sqlite_abort\",                  (Tcl_CmdProc*)sqlite_abort          },",
          "7892:      { \"sqlite_bind\",                   (Tcl_CmdProc*)test_bind             },",
          "",
          "[Removed Lines]",
          "7889:      { \"sqlite3_drop_modules_except\",   (Tcl_CmdProc*)test_drop_except      },",
          "",
          "[Added Lines]",
          "7889:      { \"sqlite3_drop_modules\",          (Tcl_CmdProc*)test_drop_modules     },",
          "",
          "---------------"
        ],
        "src/vtab.c||src/vtab.c": [
          "File: src/vtab.c -> src/vtab.c",
          "--- Hunk 1 ---",
          "[Context before]",
          "141:   HashElem *pThis, *pNext;",
          "142: #ifdef SQLITE_ENABLE_API_ARMOR",
          "143:   if( !sqlite3SafetyCheckOk(db) || zName==0 ) return SQLITE_MISUSE_BKPT;",
          "",
          "[Removed Lines]",
          "140: int sqlite3_drop_modules_except(sqlite3 *db, const char** azNames){",
          "",
          "[Added Lines]",
          "140: int sqlite3_drop_modules(sqlite3 *db, const char** azNames){",
          "",
          "---------------"
        ]
      }
    }
  ]
}