{
  "cve_id": "CVE-2019-20911",
  "cve_desc": "An issue was discovered in GNU LibreDWG through 0.9.3. Crafted input will lead to denial of service in bit_calc_CRC in bits.c, related to a for loop.",
  "repo": "LibreDWG/libredwg",
  "patch_hash": "c6f6668b82bfe595899cc820279ac37bb9ef16f5",
  "patch_info": {
    "commit_hash": "c6f6668b82bfe595899cc820279ac37bb9ef16f5",
    "repo": "LibreDWG/libredwg",
    "commit_url": "https://github.com/LibreDWG/libredwg/commit/c6f6668b82bfe595899cc820279ac37bb9ef16f5",
    "files": [
      "include/dwg.h",
      "src/decode.c",
      "src/encode.c",
      "src/free.c"
    ],
    "message": "cleanup tio.unknown\n\nnot needed anymore, we only have UNKNOWN_OBJ or UNKNOWN_ENT with full common\nentity_data.\nFixes GH #178 heap_overflow2",
    "before_after_code_files": [
      "include/dwg.h||include/dwg.h",
      "src/decode.c||src/decode.c",
      "src/encode.c||src/encode.c",
      "src/free.c||src/free.c"
    ]
  },
  "patch_diff": {
    "include/dwg.h||include/dwg.h": [
      "File: include/dwg.h -> include/dwg.h"
    ],
    "src/decode.c||src/decode.c": [
      "File: src/decode.c -> src/decode.c",
      "--- Hunk 1 ---",
      "[Context before]",
      "5013:           bit_set_position (dat, restartpos);",
      "5019:           if (i >= 0 && i < (int)dwg->num_classes)",
      "5020:             {",
      "",
      "[Removed Lines]",
      "[None]",
      "",
      "[Added Lines]",
      "5014:           obj->supertype = DWG_SUPERTYPE_UNKNOWN;",
      "",
      "---------------",
      "--- Hunk 2 ---",
      "[Context before]",
      "5032:                   LOG_ERROR (\"Invalid class index %d >%d\", i,",
      "5033:                              (int)dwg->num_classes);",
      "5034:                 }",
      "5036:               obj->type = 0;",
      "5038:               return error | DWG_ERR_VALUEOUTOFBOUNDS;",
      "5039:             }",
      "5096:         }",
      "5097:     }",
      "",
      "[Removed Lines]",
      "5035:               obj->supertype = DWG_SUPERTYPE_UNKNOWN;",
      "5041:           if (klass && !is_entity)",
      "5042:             {",
      "5043:               int err = dwg_decode_UNKNOWN_OBJ (dat, obj);",
      "5044:               error |= err;",
      "5045:               obj->supertype = DWG_SUPERTYPE_UNKNOWN;",
      "5046:               if (!dat)",
      "5047:                 return error;",
      "5048:               if (err >= DWG_ERR_CRITICAL)",
      "5050:             }",
      "5051:           else if (klass) // is_entity",
      "5052:             {",
      "5053:               int err;",
      "5054: #if 0 && !defined(IS_RELEASE)",
      "5055:               if (strEQc(klass->dxfname, \"MULTILEADER\")) { //debug CED",
      "5056:                 char *mleader = bit_read_TF(dat, obj->size);",
      "5057:                 LOG_INSANE_TF(mleader, (int)obj->size)",
      "5058:                 bit_set_position(dat, restartpos);",
      "5059:                 free (mleader);",
      "5060:               }",
      "5061: #endif",
      "5062:               err = dwg_decode_UNKNOWN_ENT (dat, obj);",
      "5063:               error |= err;",
      "5064:               obj->supertype = DWG_SUPERTYPE_UNKNOWN;",
      "5065:               if (!dat)",
      "5066:                 return error;",
      "5067:               if (err >= DWG_ERR_CRITICAL)",
      "5069:             }",
      "5070:           else // not a class",
      "5071:             {",
      "5072:               LOG_WARN (\"Unknown object, skipping eed/reactors/xdic\");",
      "5073:               SINCE (R_2000)",
      "5074:               {",
      "5075:                 obj->bitsize = bit_read_RL (dat);",
      "5076:                 LOG_TRACE (\"bitsize: \" FORMAT_RL \" [RL] @%lu.%u\\n\",",
      "5077:                            obj->bitsize, dat->byte-2, dat->bit);",
      "5078:                 if (obj->bitsize > obj->size * 8)",
      "5079:                   {",
      "5080:                     LOG_ERROR (\"Invalid bitsize \" FORMAT_RL \" => \" FORMAT_RL,",
      "5081:                                obj->bitsize, obj->size * 8);",
      "5082:                     obj->bitsize = obj->size * 8;",
      "5083:                     error |= DWG_ERR_VALUEOUTOFBOUNDS;",
      "5084:                   }",
      "5085:               }",
      "5086:               if (!bit_read_H (dat, &obj->handle))",
      "5087:                 {",
      "5088:                   LOG_TRACE (\"handle: \" FORMAT_H \" [H 5]\\n\",",
      "5089:                              ARGS_H (obj->handle));",
      "5090:                 }",
      "5091:               restartpos = dat->byte;",
      "5092:               obj->supertype = DWG_SUPERTYPE_UNKNOWN;",
      "5093:               obj->tio.unknown = bit_read_TF (dat, obj->size);",
      "5094:               dat->byte = restartpos;",
      "5095:             }",
      "",
      "[Added Lines]",
      "5037:           if (is_entity)",
      "5038:               error |= dwg_decode_UNKNOWN_ENT (dat, obj);",
      "5039:           else",
      "5040:               error |= dwg_decode_UNKNOWN_OBJ (dat, obj);",
      "5042:           if (!dat)",
      "5043:             return error;",
      "5044:           if (error >= DWG_ERR_CRITICAL)",
      "",
      "---------------"
    ],
    "src/encode.c||src/encode.c": [
      "File: src/encode.c -> src/encode.c",
      "--- Hunk 1 ---",
      "[Context before]",
      "1970:           else",
      "1971:             is_entity = obj->supertype == DWG_SUPERTYPE_ENTITY;",
      "1976:             error = dwg_encode_UNKNOWN_ENT (dat, obj);",
      "1993:         }",
      "1994:     }",
      "",
      "[Removed Lines]",
      "1973:           if (klass && !is_entity)",
      "1974:             error = dwg_encode_UNKNOWN_OBJ (dat, obj);",
      "1975:           else if (klass)",
      "1977:           else // not a class",
      "1978:             {",
      "1979:               LOG_WARN (\"Unknown object, skipping eed/reactors/xdic\");",
      "1980:               error = DWG_ERR_UNHANDLEDCLASS;",
      "1981:               SINCE (R_2000)",
      "1982:               {",
      "1983:                 bit_write_RL (dat, obj->bitsize);",
      "1984:                 LOG_INFO (\"bitsize: \" FORMAT_RL \" [RL] (@%lu.%u)\\n\", obj->bitsize,",
      "1985:                           dat->byte - 4, dat->bit);",
      "1986:               }",
      "1987:               bit_write_H (dat, &obj->handle);",
      "1988:               LOG_INFO (\"handle: \" FORMAT_H \" [H 5]\\n\", ARGS_H (obj->handle));",
      "1991:               bit_write_TF (dat, obj->tio.unknown, obj->size);",
      "1992:             }",
      "",
      "[Added Lines]",
      "1973:           if (is_entity)",
      "1975:           else",
      "1976:             error = dwg_encode_UNKNOWN_OBJ (dat, obj);",
      "",
      "---------------"
    ],
    "src/free.c||src/free.c": [
      "File: src/free.c -> src/free.c",
      "--- Hunk 1 ---",
      "[Context before]",
      "731:       else if ((error = dwg_free_variable_type (obj->parent, obj))",
      "732:                & DWG_ERR_UNHANDLEDCLASS)",
      "733:         {",
      "738:         unhandled:",
      "753:               dwg_free_UNKNOWN_ENT (dat, obj);",
      "761:               dwg_free_UNKNOWN_OBJ (dat, obj);",
      "771:         }",
      "772:     }",
      "",
      "[Removed Lines]",
      "734:           int is_entity;",
      "735:           int i;",
      "736:           Dwg_Class *klass;",
      "739:           is_entity = 0;",
      "740:           i = obj->type - 500;",
      "741:           klass = NULL;",
      "743:           dwg = obj->parent;",
      "744:           if (dwg->dwg_class && i >= 0 && i < (int)dwg->num_classes)",
      "745:             {",
      "746:               klass = &dwg->dwg_class[i];",
      "747:               is_entity = klass ? dwg_class_is_entity (klass) : 0;",
      "748:             }",
      "750:           if (obj->fixedtype == DWG_TYPE_TABLE)",
      "751:             {",
      "754:             }",
      "755:           else if (obj->fixedtype == DWG_TYPE_DATATABLE)",
      "756:             {",
      "757:               dwg_free_UNKNOWN_OBJ (dat, obj);",
      "758:             }",
      "759:           else if (klass && !is_entity)",
      "760:             {",
      "762:             }",
      "763:           else if (klass && is_entity)",
      "764:             {",
      "765:               dwg_free_UNKNOWN_ENT (dat, obj);",
      "766:             }",
      "767:           else // not a class",
      "768:             {",
      "769:               FREE_IF (obj->tio.unknown);",
      "770:             }",
      "",
      "[Added Lines]",
      "735:           if (obj->fixedtype == DWG_TYPE_UNKNOWN_ENT)",
      "737:           else if (obj->fixedtype == DWG_TYPE_UNKNOWN_OBJ)",
      "",
      "---------------"
    ]
  },
  "candidates": [
    {
      "candidate_hash": "0a44ad220195a3004586b55e5cc2a47ad68ecfcd",
      "candidate_info": {
        "commit_hash": "0a44ad220195a3004586b55e5cc2a47ad68ecfcd",
        "repo": "LibreDWG/libredwg",
        "commit_url": "https://github.com/LibreDWG/libredwg/commit/0a44ad220195a3004586b55e5cc2a47ad68ecfcd",
        "files": [
          "src/bits.c",
          "src/decode.c",
          "src/encode.c"
        ],
        "message": "encode: fix object CRC\n\nfix bitsize_pos logging,\nfix object address for the size calculation (dxf only).",
        "before_after_code_files": [
          "src/bits.c||src/bits.c",
          "src/decode.c||src/decode.c",
          "src/encode.c||src/encode.c"
        ]
      },
      "candidate_patch_features": {
        "candidate_earlier_than_patch": 1,
        "same_branch_evolution": 1,
        "olp_code_files": {
          "patch": [
            "src/decode.c||src/decode.c",
            "src/encode.c||src/encode.c"
          ],
          "candidate": [
            "src/decode.c||src/decode.c",
            "src/encode.c||src/encode.c"
          ]
        }
      },
      "candidate_diff": {
        "src/bits.c||src/bits.c": [
          "File: src/bits.c -> src/bits.c",
          "--- Hunk 1 ---",
          "[Context before]",
          "1214: {",
          "1215:   uint16_t calculated;",
          "1216:   uint16_t read;",
          "1217:   loglevel = dat->opts & 0xf;",
          "1219:   if (dat->bit > 0)",
          "",
          "[Removed Lines]",
          "[None]",
          "",
          "[Added Lines]",
          "1217:   long size;",
          "",
          "---------------",
          "--- Hunk 2 ---",
          "[Context before]",
          "1230:       return 0;",
          "1231:     }",
          "1235:   read = bit_read_RS (dat);",
          "1236:   LOG_TRACE (\"crc: %04X [RSx]\\n\", read);",
          "1237:   if (calculated == read)",
          "1238:     {",
          "1241:       return 1;",
          "1242:     }",
          "1243:   else",
          "1244:     {",
          "1247:       return 0;",
          "1248:     }",
          "1249: }",
          "",
          "[Removed Lines]",
          "1233:   calculated = bit_calc_CRC (seed, &(dat->chain[start_address]),",
          "1234:                              dat->byte - start_address);",
          "1239:       LOG_HANDLE (\" check_CRC %lu-%lu: %04X == %04X\\n\", start_address,",
          "1240:                   dat->byte - 2, calculated, read);",
          "1245:       LOG_WARN (\"check_CRC mismatch %lu-%lu: %04X <=> %04X\\n\", start_address,",
          "1246:                 dat->byte - 2, calculated, read)",
          "",
          "[Added Lines]",
          "1234:   size = dat->byte - start_address;",
          "1235:   calculated = bit_calc_CRC (seed, &dat->chain[start_address], size);",
          "1240:       LOG_HANDLE (\" check_CRC %lu-%lu = %ld: %04X == %04X\\n\", start_address,",
          "1241:                   dat->byte - 2, size, calculated, read)",
          "1246:       LOG_WARN (\"check_CRC mismatch %lu-%lu = %ld: %04X <=> %04X\\n\",",
          "1247:                 start_address, dat->byte - 2, size, calculated, read)",
          "",
          "---------------"
        ],
        "src/decode.c||src/decode.c": [
          "File: src/decode.c -> src/decode.c",
          "--- Hunk 1 ---",
          "[Context before]",
          "3248:   {",
          "3249:     obj->bitsize = bit_read_RL (dat); // until the handles",
          "3250:     LOG_TRACE (\"bitsize: \" FORMAT_RL \" [RL] @%lu.%u\\n\", obj->bitsize,",
          "3252:   }",
          "3253:   SINCE (R_2007)",
          "3254:   {",
          "",
          "[Removed Lines]",
          "3251:                dat->byte, dat->bit)",
          "",
          "[Added Lines]",
          "3251:                dat->byte-2, dat->bit)",
          "",
          "---------------",
          "--- Hunk 2 ---",
          "[Context before]",
          "3318:   VERSIONS (R_2000, R_2007)",
          "3319:   {",
          "3320:     obj->bitsize = bit_read_RL (dat);",
          "3323:   }",
          "3324:   SINCE (R_2007)",
          "3325:   {",
          "",
          "[Removed Lines]",
          "3321:     LOG_TRACE (\"bitsize: \" FORMAT_RL \" @%lu.%u\\n\", obj->bitsize, dat->byte,",
          "3322:                dat->bit)",
          "",
          "[Added Lines]",
          "3321:     LOG_TRACE (\"bitsize: \" FORMAT_RL \" [RL] @%lu.%u\\n\", obj->bitsize,",
          "3322:                dat->byte - 2, dat->bit)",
          "",
          "---------------",
          "--- Hunk 3 ---",
          "[Context before]",
          "4300:             (unsigned long)num, (unsigned long)num)",
          "4302:   obj->size = bit_read_MS (dat);",
          "4304:   SINCE (R_2010)",
          "4305:   {",
          "4307:     obj->handlestream_size = bit_read_UMC (dat);",
          "4309:     obj->bitsize = obj->size * 8 - obj->handlestream_size;",
          "4311:   }",
          "",
          "[Removed Lines]",
          "4303:   LOG_INFO (\", Size: %d\", obj->size)",
          "4308:     LOG_INFO (\", Hdlsize: \" FORMAT_UMC \" \", obj->handlestream_size);",
          "",
          "[Added Lines]",
          "4303:   LOG_INFO (\", Size: %d [MS]\", obj->size)",
          "4308:     LOG_INFO (\", Hdlsize: \" FORMAT_UMC \" [UMC] \", obj->handlestream_size);",
          "",
          "---------------",
          "--- Hunk 4 ---",
          "[Context before]",
          "4326:   SINCE (R_2010) { obj->type = bit_read_BOT (dat); }",
          "4327:   else { obj->type = bit_read_BS (dat); }",
          "4329:   restartpos = bit_position (dat); // relative",
          "",
          "[Removed Lines]",
          "4328:   LOG_INFO (\", Type: %d\\n\", obj->type);",
          "",
          "[Added Lines]",
          "4328:   LOG_INFO (\", Type: %d [%s]\\n\", obj->type, dat->version >= R_2010 ? \"BOT\" : \"BS\");",
          "",
          "---------------",
          "--- Hunk 5 ---",
          "[Context before]",
          "4745:               SINCE (R_2000)",
          "4746:               {",
          "4747:                 obj->bitsize = bit_read_RL (dat);",
          "4750:               }",
          "4751:               if (!bit_read_H (dat, &obj->handle))",
          "4752:                 {",
          "",
          "[Removed Lines]",
          "4748:                 LOG_TRACE (\"bitsize: \" FORMAT_RL \" @%lu.%u\\n\", obj->bitsize,",
          "4749:                            dat->byte, dat->bit);",
          "",
          "[Added Lines]",
          "4748:                 LOG_TRACE (\"bitsize: \" FORMAT_RL \" [RL] @%lu.%u\\n\",",
          "4749:                            obj->bitsize, dat->byte-2, dat->bit);",
          "",
          "---------------"
        ],
        "src/encode.c||src/encode.c": [
          "File: src/encode.c -> src/encode.c",
          "--- Hunk 1 ---",
          "[Context before]",
          "769:       {",
          "770:         switch (dwg->header.version)",
          "771:           {",
          "772:           case R_13:",
          "773:             _obj->dwg_version = 0x15;",
          "774:             break;",
          "775:           case R_2000:",
          "776:             _obj->dwg_version = 0x17;",
          "777:             break;",
          "",
          "[Removed Lines]",
          "[None]",
          "",
          "[Added Lines]",
          "772:           case R_9:",
          "773:             _obj->dwg_version = 0x11; // ?",
          "774:             break;",
          "775:           case R_10:",
          "776:             _obj->dwg_version = 0x12; // ?",
          "777:             break;",
          "778:           case R_11:",
          "779:             _obj->dwg_version = 0x13; // ?",
          "780:             break;",
          "784:           case R_14:",
          "785:             _obj->dwg_version = 0x16;",
          "786:             break;",
          "",
          "---------------",
          "--- Hunk 2 ---",
          "[Context before]",
          "790:           case R_2018:",
          "791:             _obj->dwg_version = 0x21;",
          "792:             break;",
          "793:           default:",
          "794:             break;",
          "795:           }",
          "",
          "[Removed Lines]",
          "[None]",
          "",
          "[Added Lines]",
          "805:           case R_INVALID:",
          "806:           case R_AFTER:",
          "807:           case R_1_1:",
          "808:           case R_1_2:",
          "809:           case R_1_4:",
          "810:           case R_2_0:",
          "811:           case R_2_1:",
          "812:           case R_2_5:",
          "813:           case R_2_6:",
          "",
          "---------------",
          "--- Hunk 3 ---",
          "[Context before]",
          "1139:       BITCODE_BL index = omap[i].index;",
          "1140:       unsigned long hdloff = omap[i].handle - (i ? omap[i - 1].handle : 0);",
          "1141:       int off = dat->byte - (i ? omap[i - 1].address : 0);",
          "1143:       LOG_TRACE (\"\\n> Next object: \" FORMAT_BL",
          "1144:                  \" Handleoff: %lu [UMC] Offset: %d [MC] @%lu\\n\"",
          "1145:                  \"==========================================\\n\",",
          "",
          "[Removed Lines]",
          "1142:       unsigned long end_address;",
          "",
          "[Added Lines]",
          "1163:       unsigned long address, end_address;",
          "",
          "---------------",
          "--- Hunk 4 ---",
          "[Context before]",
          "1155:         }",
          "1156:       obj = &dwg->object[index];",
          "1159:       assert (dat->byte);",
          "1160:       error |= dwg_encode_add_object (obj, dat, dat->byte);",
          "",
          "[Removed Lines]",
          "1158:       obj->address = dat->byte;",
          "",
          "[Added Lines]",
          "[None]",
          "",
          "---------------",
          "--- Hunk 5 ---",
          "[Context before]",
          "1167:           assert (dat->chain[1] == 'C');",
          "1168:         }",
          "1169: #endif",
          "1171:       if (end_address > dat->size)",
          "1172:         {",
          "1173:           dat->size = end_address;",
          "",
          "[Removed Lines]",
          "1170:       end_address = obj->address + (unsigned long)obj->size; // from RL",
          "",
          "[Added Lines]",
          "1190:       end_address = omap[i].address + (unsigned long)obj->size; // from RL",
          "",
          "---------------",
          "--- Hunk 6 ---",
          "[Context before]",
          "1590: dwg_encode_add_object (Dwg_Object *obj, Bit_Chain *dat, unsigned long address)",
          "1591: {",
          "1592:   int error = 0;",
          "1599:   assert (address);",
          "1600:   dat->byte = address;",
          "1601:   dat->bit = 0;",
          "",
          "[Removed Lines]",
          "1593:   unsigned long previous_address;",
          "1594:   unsigned long object_address;",
          "1595:   unsigned char previous_bit;",
          "1597:   previous_address = dat->byte;",
          "1598:   previous_bit = dat->bit;",
          "",
          "[Added Lines]",
          "1613:   unsigned long oldpos;",
          "1614:   unsigned long end_address = address + obj->size;",
          "1616:   oldpos = bit_position (dat);",
          "",
          "---------------",
          "--- Hunk 7 ---",
          "[Context before]",
          "1609:   bit_write_MS (dat, obj->size);",
          "1611:   LATER_VERSIONS",
          "1612:   {",
          "1613:     if (!obj->handlestream_size && obj->bitsize)",
          "1614:       obj->handlestream_size = obj->size * 8 - obj->bitsize;",
          "1615:     bit_write_UMC (dat, obj->handlestream_size);",
          "1616:     bit_write_BOT (dat, obj->type);",
          "1617:   }",
          "1622:   switch (obj->type)",
          "1623:     {",
          "",
          "[Removed Lines]",
          "1610:   PRE (R_2010) { bit_write_BS (dat, obj->type); }",
          "1619:   LOG_INFO (\", Size: %d, Type: %d\\n\", obj->size, obj->type)",
          "",
          "[Added Lines]",
          "1628:   obj->address = dat->byte;",
          "1629:   PRE (R_2010) {",
          "1630:     bit_write_BS (dat, obj->type);",
          "1631:     LOG_INFO (\", Size: %d [MS], Type: %d [BS]\\n\", obj->size, obj->type)",
          "1632:   }",
          "1638:     obj->address = dat->byte;",
          "1640:     LOG_INFO (\", Size: %d [MS], Hdlsize: %lu [UMC], Type: %d [BOT]\\n\",",
          "1641:               obj->size, (unsigned long)obj->handlestream_size, obj->type)",
          "",
          "---------------",
          "--- Hunk 8 ---",
          "[Context before]",
          "1908:   if (!obj->size)",
          "1909:     {",
          "1910:       BITCODE_BL pos = bit_position (dat);",
          "1913:       if (dat->bit)",
          "1914:         obj->size++;",
          "1918:       bit_write_MS (dat, obj->size);",
          "1921:       SINCE (R_2013)",
          "1922:       {",
          "1923:         if (!obj->handlestream_size && obj->bitsize)",
          "",
          "[Removed Lines]",
          "1911:       assert (previous_address);",
          "1912:       obj->size = dat->byte - previous_address;",
          "1915:       obj->bitsize = pos - (previous_address * 8);",
          "1917:       bit_set_position (dat, previous_address * 8);",
          "1920:       LOG_TRACE (\"size: %u [MS] @%lu\\n\", obj->size, previous_address);",
          "",
          "[Added Lines]",
          "1934:       assert (address);",
          "1935:       obj->size = dat->byte - address - 2; // excludes the CRC",
          "1938:       obj->bitsize = pos - (address * 8);",
          "1940:       bit_set_position (dat, address * 8);",
          "1941:       if (obj->size > 0x7fff)",
          "1943:         LOG_ERROR (\"Unhandled size %u > 0x7fff\", (unsigned)obj->size);",
          "1945:       LOG_TRACE (\"size: %u [MS] @%lu\\n\", obj->size, address);",
          "",
          "---------------",
          "--- Hunk 9 ---",
          "[Context before]",
          "1953:     {",
          "1958:     }",
          "1959:   bit_write_CRC (dat, address, 0xC0C1);",
          "1972:   return error;",
          "1973: }",
          "",
          "[Removed Lines]",
          "1952:   if (dat->bit)",
          "1954:       for (int i = dat->bit; i < 8; i++)",
          "1955:         {",
          "1956:           bit_write_B (dat, 1);",
          "1957:         }",
          "1961:   {",
          "1962:     unsigned long next_addr = address + obj->size + 2;",
          "1963:     if (next_addr != dat->byte)",
          "1964:       {",
          "1965:         if (obj->size)",
          "1966:           LOG_WARN (\"Wrong object size: %lu + %u + 2 != %lu: %ld off\", address,",
          "1967:                     obj->size, dat->byte, (long)(next_addr - dat->byte));",
          "1968:         dat->byte = next_addr;",
          "1969:       }",
          "1970:   }",
          "1971:   dat->bit = 0;",
          "",
          "[Added Lines]",
          "1977:   while (dat->bit)",
          "1978:     bit_write_B (dat, 1);",
          "1979:   end_address = obj->address + obj->size;",
          "1980:   if (end_address != dat->byte)",
          "1982:       if (obj->size)",
          "1983:         LOG_WARN (\"Wrong object size: %lu + %u = %lu != %lu: %ld off\", obj->address,",
          "1984:                   obj->size, end_address, dat->byte, (long)(end_address - dat->byte));",
          "1985:       dat->byte = end_address;",
          "1987:   assert (!dat->bit);",
          "",
          "---------------"
        ]
      }
    },
    {
      "candidate_hash": "78dee63d59b5ec9346728e3a2ecb7a696085ce19",
      "candidate_info": {
        "commit_hash": "78dee63d59b5ec9346728e3a2ecb7a696085ce19",
        "repo": "LibreDWG/libredwg",
        "commit_url": "https://github.com/LibreDWG/libredwg/commit/78dee63d59b5ec9346728e3a2ecb7a696085ce19",
        "files": [
          "src/free.c"
        ],
        "message": "free: fix more indxf leaks\n\nthe underlying cause is that indxf already adds\nDEBUGGING classes, for which no dwg_free_OBJECT code exists.\ni.e. TABLE.preview (common entity data), or TABLE colors.\nLet dwg_free_UNKNOWN_ENT handle that and leak the rest",
        "before_after_code_files": [
          "src/free.c||src/free.c"
        ]
      },
      "candidate_patch_features": {
        "candidate_earlier_than_patch": 1,
        "same_branch_evolution": 1,
        "olp_code_files": {
          "patch": [
            "src/free.c||src/free.c"
          ],
          "candidate": [
            "src/free.c||src/free.c"
          ]
        }
      },
      "candidate_diff": {
        "src/free.c||src/free.c": [
          "File: src/free.c -> src/free.c",
          "--- Hunk 1 ---",
          "[Context before]",
          "123:   {                                                                           \\",
          "124:   }",
          "125: #define FIELD_T(name, dxf) FIELD_TV (name, dxf)",
          "126: #define FIELD_BT(name, dxf) FIELD (name, BT);",
          "127: #define FIELD_4BITS(name, dxf)                                                \\",
          "128:   {                                                                           \\",
          "",
          "[Removed Lines]",
          "[None]",
          "",
          "[Added Lines]",
          "126: #define FIELD_BINARY(name, len, dxf) FIELD_TV (name, dxf)",
          "",
          "---------------",
          "--- Hunk 2 ---",
          "[Context before]",
          "276:                                                                               \\",
          "277:         dwg_free_common_entity_data (obj);                                    \\",
          "278:         dwg_free_eed (obj);                                                   \\",
          "280:           {                                                                   \\",
          "281:             FREE_IF (obj->tio.entity->tio.token);                             \\",
          "282:             FREE_IF (obj->tio.entity);                                        \\",
          "",
          "[Removed Lines]",
          "279:         if (obj->tio.object)                                                  \\",
          "",
          "[Added Lines]",
          "280:         if (obj->tio.entity)                                                  \\",
          "",
          "---------------",
          "--- Hunk 3 ---",
          "[Context before]",
          "369:     return;",
          "370:   _obj = ent;",
          "373:   #include \"common_entity_data.spec\"",
          "374:   SINCE (R_13) {",
          "",
          "[Removed Lines]",
          "[None]",
          "",
          "[Added Lines]",
          "373:   FREE_IF (ent->preview);",
          "",
          "---------------",
          "--- Hunk 4 ---",
          "[Context before]",
          "736:               klass = &dwg->dwg_class[i];",
          "737:               is_entity = klass ? dwg_class_is_entity (klass) : 0;",
          "738:             }",
          "740:             {",
          "741:               dwg_free_UNKNOWN_OBJ (dat, obj);",
          "742:             }",
          "744:             {",
          "745:               dwg_free_UNKNOWN_ENT (dat, obj);",
          "746:             }",
          "",
          "[Removed Lines]",
          "739:           if (klass && obj->fixedtype == DWG_TYPE_UNKNOWN_OBJ)",
          "743:           else if (klass && obj->fixedtype == DWG_TYPE_UNKNOWN_ENT)",
          "",
          "[Added Lines]",
          "745:           if (obj->fixedtype == DWG_TYPE_TABLE)",
          "746:             {",
          "748:               dwg_free_UNKNOWN_ENT (dat, obj);",
          "749:             }",
          "750:           else if (klass && !is_entity)",
          "754:           else if (klass && is_entity)",
          "",
          "---------------"
        ]
      }
    },
    {
      "candidate_hash": "148d9516be8424b8bbb8bf3d5a0ca134ddf0225f",
      "candidate_info": {
        "commit_hash": "148d9516be8424b8bbb8bf3d5a0ca134ddf0225f",
        "repo": "LibreDWG/libredwg",
        "commit_url": "https://github.com/LibreDWG/libredwg/commit/148d9516be8424b8bbb8bf3d5a0ca134ddf0225f",
        "files": [
          "src/bits.c",
          "src/bits.h",
          "src/decode.c"
        ],
        "message": "add bits dat->opts for loglevel\n\nthis way we can silence known overflows,\nand honor the given loglevel",
        "before_after_code_files": [
          "src/bits.c||src/bits.c",
          "src/bits.h||src/bits.h",
          "src/decode.c||src/decode.c"
        ]
      },
      "candidate_patch_features": {
        "candidate_earlier_than_patch": 1,
        "same_branch_evolution": 1,
        "olp_code_files": {
          "patch": [
            "src/decode.c||src/decode.c"
          ],
          "candidate": [
            "src/decode.c||src/decode.c"
          ]
        }
      },
      "candidate_diff": {
        "src/bits.c||src/bits.c": [
          "File: src/bits.c -> src/bits.c",
          "--- Hunk 1 ---",
          "[Context before]",
          "31: #endif",
          "39: #include \"logging.h\"",
          "40: #include \"bits.h\"",
          "",
          "[Removed Lines]",
          "34: #ifdef IS_RELEASE",
          "35: #  define DWG_LOGLEVEL DWG_LOGLEVEL_NONE",
          "36: #else",
          "37: #  define DWG_LOGLEVEL DWG_LOGLEVEL_ERROR",
          "38: #endif",
          "",
          "[Added Lines]",
          "34: static unsigned int loglevel;",
          "35: #define DWG_LOGLEVEL loglevel",
          "",
          "---------------",
          "--- Hunk 2 ---",
          "[Context before]",
          "55:       if (dat->byte != dat->size - 1 || dat->bit != 0)",
          "56:         {",
          "57:           LOG_ERROR (\"buffer overflow at pos %lu, size %lu, advance by %ld\",",
          "58:                      dat->byte, dat->size, advance)",
          "59:         }",
          "",
          "[Removed Lines]",
          "[None]",
          "",
          "[Added Lines]",
          "54:           loglevel = dat->opts & 0xf;",
          "",
          "---------------",
          "--- Hunk 3 ---",
          "[Context before]",
          "63:     }",
          "64:   if ((long)dat->byte + (endpos / 8) < 0)",
          "65:     {",
          "66:       LOG_ERROR (\"buffer underflow at pos %lu, size %lu, advance by %ld\",",
          "67:                  dat->byte, dat->size, advance)",
          "68:       dat->byte = 0;",
          "",
          "[Removed Lines]",
          "[None]",
          "",
          "[Added Lines]",
          "64:       loglevel = dat->opts & 0xf;",
          "",
          "---------------",
          "--- Hunk 4 ---",
          "[Context before]",
          "90:   dat->bit = bitpos & 7;",
          "91:   if (dat->byte > dat->size || (dat->byte == dat->size && dat->bit))",
          "92:     {",
          "93:       LOG_ERROR (\"buffer overflow at %lu, have %lu\", dat->byte, dat->size)",
          "94:     }",
          "95: }",
          "",
          "[Removed Lines]",
          "[None]",
          "",
          "[Added Lines]",
          "92:       loglevel = dat->opts & 0xf;",
          "",
          "---------------",
          "--- Hunk 5 ---",
          "[Context before]",
          "105:   if (dat->byte >= dat->size)",
          "106:     {",
          "107:       LOG_ERROR (\"buffer overflow at %lu\", dat->byte)",
          "108:       return 0;",
          "109:     }",
          "",
          "[Removed Lines]",
          "[None]",
          "",
          "[Added Lines]",
          "107:       loglevel = dat->opts & 0xf;",
          "",
          "---------------",
          "--- Hunk 6 ---",
          "[Context before]",
          "141:   if (dat->byte >= dat->size)",
          "142:     {",
          "143:       LOG_ERROR (\"buffer overflow at %lu\", dat->byte)",
          "144:       return 0;",
          "145:     }",
          "",
          "[Removed Lines]",
          "[None]",
          "",
          "[Added Lines]",
          "144:       loglevel = dat->opts & 0xf;",
          "",
          "---------------",
          "--- Hunk 7 ---",
          "[Context before]",
          "224: {",
          "225:   if (value > 7)",
          "226:     {",
          "227:       LOG_ERROR (\"Invalid bit_write_3B value %d > 7\", value)",
          "228:       return;",
          "229:     }",
          "",
          "[Removed Lines]",
          "[None]",
          "",
          "[Added Lines]",
          "229:       loglevel = dat->opts & 0xf;",
          "",
          "---------------",
          "--- Hunk 8 ---",
          "[Context before]",
          "275:   if (dat->byte >= dat->size)",
          "276:     {",
          "277:       LOG_ERROR (\"buffer overflow at %lu\", dat->byte)",
          "278:       return 0;",
          "279:     }",
          "",
          "[Removed Lines]",
          "[None]",
          "",
          "[Added Lines]",
          "280:       loglevel = dat->opts & 0xf;",
          "",
          "---------------",
          "--- Hunk 9 ---",
          "[Context before]",
          "523:     return 0;",
          "525:     {",
          "526:       LOG_ERROR (\"bit_read_BL: unexpected 2-bit code: '11'\")",
          "527:       return 256;",
          "528:     }",
          "",
          "[Removed Lines]",
          "[None]",
          "",
          "[Added Lines]",
          "530:       loglevel = dat->opts & 0xf;",
          "",
          "---------------",
          "--- Hunk 10 ---",
          "[Context before]",
          "724:     return 0.0;",
          "726:     {",
          "727:       LOG_ERROR (\"bit_read_BD: unexpected 2-bit code: '11'\")",
          "728:       return bit_nan ();",
          "729:     }",
          "",
          "[Removed Lines]",
          "[None]",
          "",
          "[Added Lines]",
          "732:       loglevel = dat->opts & 0xf;",
          "",
          "---------------",
          "--- Hunk 11 ---",
          "[Context before]",
          "801:       result |= ((BITCODE_UMC)byte[i]) << j;",
          "802:     }",
          "804:   LOG_ERROR (\"bit_read_MC: error parsing modular char, i=%d,j=%d,result=0x%lx\",",
          "805:              i, j, result)",
          "",
          "[Removed Lines]",
          "[None]",
          "",
          "[Added Lines]",
          "810:   loglevel = dat->opts & 0xf;",
          "",
          "---------------",
          "--- Hunk 12 ---",
          "[Context before]",
          "865:       result |= ((BITCODE_UMC)byte[i]) << j;",
          "866:     }",
          "868:   LOG_ERROR (",
          "869:       \"bit_read_UMC: error parsing modular char, i=%d,j=%d,result=0x%lx\", i, j,",
          "870:       result)",
          "",
          "[Removed Lines]",
          "[None]",
          "",
          "[Added Lines]",
          "875:   loglevel = dat->opts & 0xf;",
          "",
          "---------------",
          "--- Hunk 13 ---",
          "[Context before]",
          "923:         word[i] &= 0x7fff;",
          "924:       result |= ((BITCODE_MS)word[i]) << j;",
          "925:     }",
          "926:   LOG_ERROR (\"bit_read_MS: error parsing modular short, i=%d,j=%d\", i, j)",
          "928: }",
          "",
          "[Removed Lines]",
          "[None]",
          "",
          "[Added Lines]",
          "934:   loglevel = dat->opts & 0xf;",
          "",
          "---------------",
          "--- Hunk 14 ---",
          "[Context before]",
          "1105:   handle->value = 0;",
          "1106:   if (handle->size > 4 || handle->code > 14)",
          "1107:     {",
          "1108:       LOG_WARN (\"Invalid handle-reference, longer than 4 bytes: (%x.%d.%lX)\",",
          "1109:                 handle->code, handle->size, handle->value)",
          "1110:       return DWG_ERR_INVALIDHANDLE;",
          "",
          "[Removed Lines]",
          "[None]",
          "",
          "[Added Lines]",
          "1117:       loglevel = dat->opts & 0xf;",
          "",
          "---------------",
          "--- Hunk 15 ---",
          "[Context before]",
          "1161: {",
          "1162:   uint16_t result;",
          "1163:   long unsigned int start_address;",
          "1165:   if (dat->bit > 0)",
          "1166:     {",
          "",
          "[Removed Lines]",
          "[None]",
          "",
          "[Added Lines]",
          "1174:   loglevel = dat->opts & 0xf;",
          "",
          "---------------",
          "--- Hunk 16 ---",
          "[Context before]",
          "1181: {",
          "1182:   uint16_t calculated;",
          "1183:   uint16_t read;",
          "1185:   if (dat->bit > 0)",
          "1186:     {",
          "",
          "[Removed Lines]",
          "[None]",
          "",
          "[Added Lines]",
          "1195:   loglevel = dat->opts & 0xf;",
          "",
          "---------------",
          "--- Hunk 17 ---",
          "[Context before]",
          "1191:   calculated = bit_calc_CRC (seed, &(dat->chain[start_address]),",
          "1192:                              dat->byte - start_address);",
          "1193:   read = bit_read_RS (dat);",
          "1197:   return (calculated == read);",
          "1198: }",
          "",
          "[Removed Lines]",
          "1194:   LOG_TRACE (\"check CRC at %lx: 0x%x <=> 0x%x\\n\", start_address, calculated,",
          "1195:              read)",
          "",
          "[Added Lines]",
          "1206:   LOG_TRACE (\"check CRC %lu - %lu: 0x%x <=> 0x%x\\n\", start_address,",
          "1207:              dat->byte, calculated, read)",
          "",
          "---------------",
          "--- Hunk 18 ---",
          "[Context before]",
          "1203: bit_write_CRC (Bit_Chain *dat, long unsigned int start_address, uint16_t seed)",
          "1204: {",
          "1205:   uint16_t crc;",
          "1207:   while (dat->bit > 0)",
          "1208:     bit_write_B (dat, 0);",
          "",
          "[Removed Lines]",
          "[None]",
          "",
          "[Added Lines]",
          "1218:   loglevel = dat->opts & 0xf;",
          "",
          "---------------",
          "--- Hunk 19 ---",
          "[Context before]",
          "1418:         }",
          "1419:       else if ((c & 0xf0) == 0xe0)",
          "1420:         {",
          "1426:           }",
          "1430:           wstr[i++]",
          "1431:               = ((c & 0x0f) << 12) | ((str[1] & 0x3f) << 6) | (str[2] & 0x3f);",
          "1432:           str++;",
          "",
          "[Removed Lines]",
          "1423:           if (str[1] < 0x80 || str[1] > 0xBF ||",
          "1424:               str[2] < 0x80 || str[2] > 0xBF) {",
          "1425:             LOG_ERROR(\"utf-8: BAD_CONTINUATION_BYTE %s\", str);",
          "1427:           if (c == 0xe0 && str[1] < 0xa0) {",
          "1428:             LOG_ERROR(\"utf-8: NON_SHORTEST %s\", str);",
          "",
          "[Added Lines]",
          "1435:           if ((unsigned char)str[1] < 0x80 || (unsigned char)str[1] > 0xBF ||",
          "1436:               (unsigned char)str[2] < 0x80 || (unsigned char)str[2] > 0xBF) {",
          "1437:             LOG_WARN (\"utf-8: BAD_CONTINUATION_BYTE %s\", str);",
          "1438:           }",
          "1439:           if (c == 0xe0 && (unsigned char)str[1] < 0xa0) {",
          "1440:             LOG_WARN (\"utf-8: NON_SHORTEST %s\", str);",
          "",
          "---------------"
        ],
        "src/bits.h||src/bits.h": [
          "File: src/bits.h -> src/bits.h",
          "--- Hunk 1 ---",
          "[Context before]",
          "52:   FILE *fh;",
          "53:   Dwg_Version_Type version;",
          "54:   Dwg_Version_Type from_version;",
          "55: } Bit_Chain;",
          "",
          "[Removed Lines]",
          "[None]",
          "",
          "[Added Lines]",
          "55:   unsigned char opts;",
          "",
          "---------------"
        ],
        "src/decode.c||src/decode.c": [
          "File: src/decode.c -> src/decode.c",
          "--- Hunk 1 ---",
          "[Context before]",
          "151:   memset (&dwg->second_header, 0, sizeof (dwg->second_header));",
          "153:   if (dwg->opts)",
          "155: #ifdef USE_TRACING",
          "157:   if (!env_var_checked_p)",
          "",
          "[Removed Lines]",
          "154:     loglevel = dwg->opts & 0xf;",
          "",
          "[Added Lines]",
          "154:     {",
          "155:       loglevel = dwg->opts & 0xf;",
          "156:       dat->opts = dwg->opts;",
          "157:     }",
          "",
          "---------------",
          "--- Hunk 2 ---",
          "[Context before]",
          "1085:             dwg->object[dwg->num_objects - 1].handle.value = last_handle;",
          "1087: #endif",
          "1088:         }",
          "1089:       if (dat->byte == oldpos)",
          "1090:         break;",
          "",
          "[Removed Lines]",
          "[None]",
          "",
          "[Added Lines]",
          "1092:           LOG_HANDLE (\"dat: @%lu.%u\\n\", dat->byte, dat->bit);",
          "",
          "---------------",
          "--- Hunk 3 ---",
          "[Context before]",
          "1097:         }",
          "1099:       crc = bit_read_RS_LE (dat);",
          "1101:       crc2 = bit_calc_CRC (0xC0C1, dat->chain + startpos, section_size);",
          "1102:       if (crc != crc2)",
          "1103:         {",
          "",
          "[Removed Lines]",
          "1100:       LOG_TRACE (\"crc: %04X\\n\", crc);",
          "1104:           LOG_ERROR (\"Section CRC mismatch %04X <=> %04X\", crc, crc2);",
          "",
          "[Added Lines]",
          "1105:       LOG_TRACE (\"\\nsection_crc: %04X\\n\", crc);",
          "1109:           LOG_ERROR (\"Object Section CRC mismatch %04X <=> %04X\", crc, crc2);",
          "",
          "---------------",
          "--- Hunk 4 ---",
          "[Context before]",
          "2109:   int error;",
          "2110:   Bit_Chain sec_dat = { 0 };",
          "2112:   error = read_2004_compressed_section (dat, dwg, &sec_dat, SECTION_HEADER);",
          "2113:   if (error >= DWG_ERR_CRITICAL)",
          "2114:     {",
          "",
          "[Removed Lines]",
          "[None]",
          "",
          "[Added Lines]",
          "2117:   sec_dat.opts = dwg->opts & 0xf;",
          "",
          "---------------",
          "--- Hunk 5 ---",
          "[Context before]",
          "2131:       }",
          "2132:       else",
          "2133:       {",
          "2135:         BITCODE_RL endbits = 160; // start bit: 16 sentinel + 4 size",
          "2136:         hdl_dat = sec_dat;",
          "2137:         str_dat = sec_dat;",
          "",
          "[Removed Lines]",
          "2134:         Bit_Chain hdl_dat = { 0 }, str_dat = { 0 };",
          "",
          "[Added Lines]",
          "2140:         Bit_Chain hdl_dat, str_dat;",
          "",
          "---------------",
          "--- Hunk 6 ---",
          "[Context before]",
          "2165:   long unsigned int endpos;",
          "2166:   int error;",
          "2168:   error = read_2004_compressed_section (dat, dwg, &obj_dat, SECTION_OBJECTS);",
          "2169:   if (error >= DWG_ERR_CRITICAL)",
          "2170:     {",
          "",
          "[Removed Lines]",
          "[None]",
          "",
          "[Added Lines]",
          "2174:   obj_dat.opts = hdl_dat.opts = dwg->opts & 0xf;",
          "",
          "---------------",
          "--- Hunk 7 ---",
          "[Context before]",
          "3922:   obj->size = bit_read_MS (dat);",
          "3923:   LOG_INFO (\", Size: %d/0x%x\", obj->size, obj->size)",
          "3924:   SINCE (R_2010)",
          "3932:   obj->address = dat->byte;",
          "",
          "[Removed Lines]",
          "3925:   {",
          "3927:     obj->handlestream_size = bit_read_UMC (dat);",
          "3928:     LOG_INFO (\", Hdlsize: \" FORMAT_UMC, obj->handlestream_size);",
          "3929:     obj->bitsize = obj->size * 8 - obj->handlestream_size;",
          "3930:   }",
          "",
          "[Added Lines]",
          "3932:     {",
          "3934:       obj->handlestream_size = bit_read_UMC (dat);",
          "3935:       LOG_INFO (\", Hdlsize: \" FORMAT_UMC, obj->handlestream_size);",
          "3936:       obj->bitsize = obj->size * 8 - obj->handlestream_size;",
          "3937:     }",
          "",
          "---------------",
          "--- Hunk 8 ---",
          "[Context before]",
          "4356:                   dat->chain[dat->byte] & ((1 << r) - 1), r);",
          "4357:       bit_advance_position (dat, r);",
          "4358:     }",
          "4360:   bit_check_CRC (dat, address, 0xC0C1);",
          "",
          "[Removed Lines]",
          "4359: #if 1",
          "4361: #else",
          "4362:   {",
          "4363:     BITCODE_RS seed, calc;",
          "4364:     BITCODE_RS crc = bit_read_RS (dat);",
          "4365:     LOG_TRACE (\"crc: %04X [RSx]\\n\", crc);",
          "4366:     dat->byte -= 2;",
          "4368:     for (seed = 0; seed < 0xffff; seed++)",
          "4369:       {",
          "4370:         calc",
          "4371:             = bit_calc_CRC (seed, &(dat->chain[address]), dat->byte - address);",
          "4372:         if (calc == crc)",
          "4373:           break;",
          "4374:       }",
          "4375:     bit_check_CRC (dat, address, 0xC0C1);",
          "4376:     LOG_TRACE (\"seed: %04X [RSx]\\n\", seed);",
          "4377:     LOG_TRACE (\"size: %d\\n\", (int)(dat->byte - address - 2));",
          "4378:   }",
          "4379: #endif",
          "",
          "[Added Lines]",
          "[None]",
          "",
          "---------------"
        ]
      }
    },
    {
      "candidate_hash": "21fe27e10a760801ba9a781396852f111ecd59eb",
      "candidate_info": {
        "commit_hash": "21fe27e10a760801ba9a781396852f111ecd59eb",
        "repo": "LibreDWG/libredwg",
        "commit_url": "https://github.com/LibreDWG/libredwg/commit/21fe27e10a760801ba9a781396852f111ecd59eb",
        "files": [
          "include/dwg.h",
          "programs/dwg2SVG.c",
          "src/bits.c",
          "src/classes.inc",
          "src/decode.c",
          "src/dwg.c",
          "src/encode.c",
          "src/header_variables_r11.spec",
          "src/in_dxf.c",
          "src/out_dxf.c",
          "src/out_dxfb.c",
          "src/out_geojson.c",
          "src/out_json.c",
          "src/print.c"
        ],
        "message": "api: change handle sizes to long",
        "before_after_code_files": [
          "include/dwg.h||include/dwg.h",
          "programs/dwg2SVG.c||programs/dwg2SVG.c",
          "src/bits.c||src/bits.c",
          "src/classes.inc||src/classes.inc",
          "src/decode.c||src/decode.c",
          "src/dwg.c||src/dwg.c",
          "src/encode.c||src/encode.c",
          "src/header_variables_r11.spec||src/header_variables_r11.spec",
          "src/in_dxf.c||src/in_dxf.c",
          "src/out_dxf.c||src/out_dxf.c",
          "src/out_dxfb.c||src/out_dxfb.c",
          "src/out_geojson.c||src/out_geojson.c",
          "src/out_json.c||src/out_json.c",
          "src/print.c||src/print.c"
        ]
      },
      "candidate_patch_features": {
        "candidate_earlier_than_patch": 1,
        "same_branch_evolution": 1,
        "olp_code_files": {
          "patch": [
            "include/dwg.h||include/dwg.h",
            "src/decode.c||src/decode.c",
            "src/encode.c||src/encode.c"
          ],
          "candidate": [
            "include/dwg.h||include/dwg.h",
            "src/decode.c||src/decode.c",
            "src/encode.c||src/encode.c"
          ]
        }
      },
      "candidate_diff": {
        "include/dwg.h||include/dwg.h": [
          "File: include/dwg.h -> include/dwg.h",
          "--- Hunk 1 ---",
          "[Context before]",
          "489: {",
          "491:   BITCODE_RC size;",
          "493: } Dwg_Handle;",
          "496: #define ARGS_H(hdl) (hdl).code, (hdl).size, (hdl).value",
          "498: #define ARGS_REF(ref) (ref)->handleref.code, (ref)->handleref.size, \\",
          "499:     (ref)->handleref.value, (ref)->absolute_ref",
          "",
          "[Removed Lines]",
          "492:   BITCODE_RL value;",
          "495: #define FORMAT_H \"%u.%u.%X\"",
          "497: #define FORMAT_REF \"(%u.%u.%X) abs:%X\"",
          "",
          "[Added Lines]",
          "492:   unsigned long value;",
          "495: #define FORMAT_H \"%u.%u.%lX\"",
          "497: #define FORMAT_REF \"(%u.%u.%lX) abs:%lX\"",
          "",
          "---------------",
          "--- Hunk 2 ---",
          "[Context before]",
          "511: {",
          "512:   struct _dwg_object* obj;",
          "513:   Dwg_Handle handleref;",
          "515: } Dwg_Object_Ref;",
          "517: typedef Dwg_Object_Ref* BITCODE_H;",
          "",
          "[Removed Lines]",
          "514:   BITCODE_RL absolute_ref;",
          "",
          "[Added Lines]",
          "514:   unsigned long absolute_ref;",
          "",
          "---------------",
          "--- Hunk 3 ---",
          "[Context before]",
          "5882: EXPORT Dwg_Object *",
          "5883: dwg_resolve_handle (const Dwg_Data* dwg,",
          "5885: EXPORT int",
          "5886: dwg_resolve_handleref (Dwg_Object_Ref *restrict ref,",
          "5887:                       const Dwg_Object *restrict obj);",
          "",
          "[Removed Lines]",
          "5884:                     const BITCODE_BL absref);",
          "",
          "[Added Lines]",
          "5884:                     const unsigned long absref);",
          "",
          "---------------",
          "--- Hunk 4 ---",
          "[Context before]",
          "5910: EXPORT int",
          "5912:                 Dwg_Object *restrict obj);",
          "",
          "[Removed Lines]",
          "5911: dwg_add_handle (Dwg_Handle *restrict hdl, BITCODE_RC code, BITCODE_RL value,",
          "",
          "[Added Lines]",
          "5911: dwg_add_handle (Dwg_Handle *restrict hdl, BITCODE_RC code, unsigned long value,",
          "",
          "---------------",
          "--- Hunk 5 ---",
          "[Context before]",
          "5916:     always absolute.",
          "5918: EXPORT Dwg_Object_Ref *",
          "5920:                    Dwg_Object *restrict obj);",
          "",
          "[Removed Lines]",
          "5919: dwg_add_handleref (Dwg_Data *restrict dwg, BITCODE_RC code, BITCODE_RL value,",
          "",
          "[Added Lines]",
          "5919: dwg_add_handleref (Dwg_Data *restrict dwg, BITCODE_RC code, unsigned long value,",
          "",
          "---------------"
        ],
        "programs/dwg2SVG.c||programs/dwg2SVG.c": [
          "File: programs/dwg2SVG.c -> programs/dwg2SVG.c",
          "--- Hunk 1 ---",
          "[Context before]",
          "149:   if (insert->block_header && insert->block_header->handleref.value)",
          "150:     {",
          "151:       printf (\"\\t<use id=\\\"dwg-object-%d\\\" transform=\\\"translate(%f %f) \"",
          "153:               \"<!-- block_header->handleref: \" FORMAT_H \" -->\\n\",",
          "154:               obj->index, transform_X (insert->ins_pt.x),",
          "155:               transform_Y (insert->ins_pt.y),",
          "",
          "[Removed Lines]",
          "152:               \"rotate(%f) scale(%f %f)\\\" xlink:href=\\\"#symbol-%X\\\" />\"",
          "",
          "[Added Lines]",
          "152:               \"rotate(%f) scale(%f %f)\\\" xlink:href=\\\"#symbol-%lX\\\" />\"",
          "",
          "---------------",
          "--- Hunk 2 ---",
          "[Context before]",
          "217:     }",
          "219:   hdr = ref->obj->tio.object->tio.BLOCK_HEADER;",
          "221:           hdr->name);",
          "223:   obj = get_first_owned_entity (ref->obj);",
          "",
          "[Removed Lines]",
          "220:   printf (\"\\t<g id=\\\"symbol-%X\\\" >\\n\\t\\t<!-- %s -->\\n\", ref->absolute_ref,",
          "",
          "[Added Lines]",
          "220:   printf (\"\\t<g id=\\\"symbol-%lX\\\" >\\n\\t\\t<!-- %s -->\\n\", ref->absolute_ref,",
          "",
          "---------------"
        ],
        "src/bits.c||src/bits.c": [
          "File: src/bits.c -> src/bits.c",
          "--- Hunk 1 ---",
          "[Context before]",
          "1171:     }",
          "1174:   val = (unsigned char *)&handle->value;",
          "1176:     if (val[i])",
          "1177:       break;",
          "",
          "[Removed Lines]",
          "1175:   for (i = sizeof(val)-1; i >= 0; i--)",
          "",
          "[Added Lines]",
          "1174:   memset (&val, 0, sizeof(val));",
          "1176:   for (i = sizeof(val) - 1; i >= 0; i--)",
          "",
          "---------------"
        ],
        "src/classes.inc||src/classes.inc": [
          "File: src/classes.inc -> src/classes.inc",
          "--- Hunk 1 ---",
          "[Context before]",
          "29: #define _STR(s)  #s",
          "31: #define WARN_UNHANDLED_CLASS \\",
          "33:                klass->number, klass->dxfname, klass->proxyflag,\\",
          "34:                klass->wasazombie ? \" was proxy\" : \"\",\\",
          "35:                obj->index, obj->handle.value)",
          "36: #define WARN_UNSTABLE_CLASS \\",
          "38:                klass->number, klass->dxfname, klass->proxyflag,\\",
          "39:                klass->wasazombie ? \" was proxy\" : \"\",\\",
          "40:                obj->index, obj->handle.value)",
          "",
          "[Removed Lines]",
          "32:       LOG_WARN(\"Unhandled Class %s %d %s (0x%x%s) %u/%X\", is_entity ? \"entity\" : \"object\",\\",
          "37:       LOG_WARN(\"Unstable Class %s %d %s (0x%x%s) %u/%X\", is_entity ? \"entity\" : \"object\",\\",
          "",
          "[Added Lines]",
          "32:       LOG_WARN(\"Unhandled Class %s %d %s (0x%x%s) %u/%lX\", is_entity ? \"entity\" : \"object\",\\",
          "37:       LOG_WARN(\"Unstable Class %s %d %s (0x%x%s) %u/%lX\", is_entity ? \"entity\" : \"object\",\\",
          "",
          "---------------"
        ],
        "src/decode.c||src/decode.c": [
          "File: src/decode.c -> src/decode.c",
          "--- Hunk 1 ---",
          "[Context before]",
          "2998:                               = obj->tio.MLEADERSTYLE;",
          "2999:                           this->is_new_format = 1;",
          "3000:                           LOG_TRACE (",
          "3002:                               ref.absolute_ref);",
          "3003:                         }",
          "3004:                     }",
          "",
          "[Removed Lines]",
          "3001:                               \"EED found ACAD_MLEADERVER %X: new format\\n\",",
          "",
          "[Added Lines]",
          "3001:                               \"EED found ACAD_MLEADERVER %lX: new format\\n\",",
          "",
          "---------------",
          "--- Hunk 2 ---",
          "[Context before]",
          "4010:         layer->obj = dwg_ref_object_relative (dwg, layer, obj);",
          "4011:       if (!layer || !layer->obj)",
          "4012:         { // maybe a reactor pointing forwards or vertex",
          "4015:           if (_obj->num_owned > 0)",
          "4016:             {",
          "4017:               Dwg_Object_Ref *vertex = _obj->vertex[0];",
          "",
          "[Removed Lines]",
          "4013:           LOG_WARN (\"Wrong POLYLINE.layer %X\",",
          "4014:                     layer ? layer->handleref.value : 0);",
          "",
          "[Added Lines]",
          "4013:           LOG_WARN (\"Wrong POLYLINE.layer %lX\",",
          "4014:                     layer ? layer->handleref.value : 0L);",
          "",
          "---------------",
          "--- Hunk 3 ---",
          "[Context before]",
          "4023:                   Dwg_Object *seq;",
          "4024:                   obj->tio.entity->layer = layer = vertex;",
          "4025:                   LOG_WARN (",
          "4027:                       layer->handleref.value);",
          "4029:                   for (i = 0; i < _obj->num_owned - 1; i++)",
          "",
          "[Removed Lines]",
          "4026:                       \"POLYLINE.layer is vertex[0] %X, shift em, NULL seqend\",",
          "",
          "[Added Lines]",
          "4026:                       \"POLYLINE.layer is vertex[0] %lX, shift em, NULL seqend\",",
          "",
          "---------------",
          "--- Hunk 4 ---",
          "[Context before]",
          "4038:                   seq = dwg_next_object (obj);",
          "4039:                   if (seq && seq->type == DWG_TYPE_SEQEND)",
          "4040:                     {",
          "4042:                                 seq->handle.value);",
          "4043:                       seqend = _obj->seqend = dwg_find_objectref (dwg, seq);",
          "4044:                     }",
          "",
          "[Removed Lines]",
          "4041:                       LOG_WARN (\"POLYLINE.seqend = POLYLINE+1 %X\",",
          "",
          "[Added Lines]",
          "4041:                       LOG_WARN (\"POLYLINE.seqend = POLYLINE+1 %lX\",",
          "",
          "---------------",
          "--- Hunk 5 ---",
          "[Context before]",
          "4047:                       seq = dwg_next_object (seqend->obj);",
          "4048:                       if (seq && seq->type == DWG_TYPE_SEQEND)",
          "4049:                         {",
          "4051:                                     seq->handle.value);",
          "4052:                           seqend = _obj->seqend",
          "4053:                               = dwg_find_objectref (dwg, seq);",
          "",
          "[Removed Lines]",
          "4050:                           LOG_WARN (\"POLYLINE.seqend = VERTEX+1 %X\",",
          "",
          "[Added Lines]",
          "4050:                           LOG_WARN (\"POLYLINE.seqend = VERTEX+1 %lX\",",
          "",
          "---------------",
          "--- Hunk 6 ---",
          "[Context before]",
          "4083:                    && v->obj->fixedtype != DWG_TYPE_VERTEX_PFACE",
          "4084:                    && v->obj->fixedtype != DWG_TYPE_VERTEX_PFACE_FACE)",
          "4085:             {",
          "4087:                         v->handleref.value, v->obj->dxfname)",
          "4088:             }",
          "4089:         }",
          "",
          "[Removed Lines]",
          "4086:               LOG_WARN (\"Wrong POLYLINE.vertex[%d] %X %s\", i,",
          "",
          "[Added Lines]",
          "4086:               LOG_WARN (\"Wrong POLYLINE.vertex[%d] %lX %s\", i,",
          "",
          "---------------",
          "--- Hunk 7 ---",
          "[Context before]",
          "4783:   if (obj->handle.value)",
          "4784:     { // empty only with UNKNOWN",
          "4786:                   (unsigned long)num);",
          "4787:       hash_set (dwg->object_map, obj->handle.value, (uint32_t)num);",
          "4788:     }",
          "",
          "[Removed Lines]",
          "4785:       LOG_HANDLE (\" object_map{%X} = %lu\\n\", obj->handle.value,",
          "",
          "[Added Lines]",
          "4785:       LOG_HANDLE (\" object_map{%lX} = %lu\\n\", obj->handle.value,",
          "",
          "---------------",
          "--- Hunk 8 ---",
          "[Context before]",
          "4907:         return 1;",
          "4908:       if (!seqend || next == seqend->obj)",
          "4909:         {",
          "4911:                      obj->handle.value,",
          "4913:           return 0;",
          "4914:         }",
          "4915:     }",
          "",
          "[Removed Lines]",
          "4910:           LOG_TRACE (\"unsorted INSERT %X SEQEND %X ATTRIB\\n\",",
          "4912:                      seqend && seqend->obj ? seqend->obj->handle.value : 0)",
          "",
          "[Added Lines]",
          "4910:           LOG_TRACE (\"unsorted INSERT %lX SEQEND %lX ATTRIB\\n\",",
          "4912:                      seqend && seqend->obj ? seqend->obj->handle.value : 0L)",
          "",
          "---------------",
          "--- Hunk 9 ---",
          "[Context before]",
          "4921:         return 1;",
          "4922:       if (!seqend || next == seqend->obj)",
          "4923:         {",
          "4925:                      obj->handle.value,",
          "4927:           return 0;",
          "4928:         }",
          "4929:     }",
          "",
          "[Removed Lines]",
          "4924:           LOG_TRACE (\"unsorted INSERT %X SEQEND %X ATTRIB\\n\",",
          "4926:                      seqend && seqend->obj ? seqend->obj->handle.value : 0)",
          "",
          "[Added Lines]",
          "4924:           LOG_TRACE (\"unsorted INSERT %lX SEQEND %lX ATTRIB\\n\",",
          "4926:                      seqend && seqend->obj ? seqend->obj->handle.value : 0L)",
          "",
          "---------------",
          "--- Hunk 10 ---",
          "[Context before]",
          "5010:           if (first_vertex->obj->index < obj->index)",
          "5011:             {",
          "5013:                         first_vertex->obj->handle.value, obj->handle.value);",
          "5014:               if (_obj->num_owned > 1)",
          "5015:                 first_vertex = _obj->vertex[1];",
          "",
          "[Removed Lines]",
          "5012:               LOG_WARN (\"skip wrong POLYLINE.vertex[0] handle %X < %X\\n\",",
          "",
          "[Added Lines]",
          "5012:               LOG_WARN (\"skip wrong POLYLINE.vertex[0] handle %lX < %lX\\n\",",
          "",
          "---------------"
        ],
        "src/dwg.c||src/dwg.c": [
          "File: src/dwg.c -> src/dwg.c",
          "--- Hunk 1 ---",
          "[Context before]",
          "678: EXPORT Dwg_Object *",
          "680: {",
          "681:   uint32_t i;",
          "682:   if (!absref) // illegal usage",
          "683:     return NULL;",
          "684:   i = hash_get (dwg->object_map, (uint32_t)absref);",
          "686:   if (i == HASH_NOT_FOUND",
          "687:       || (BITCODE_BL)i >= dwg->num_objects) // the latter being an invalid",
          "",
          "[Removed Lines]",
          "679: dwg_resolve_handle (const Dwg_Data *dwg, const BITCODE_BL absref)",
          "685:   LOG_HANDLE (\"object_map{%lX} => %u\\n\", (unsigned long)absref, i);",
          "",
          "[Added Lines]",
          "679: dwg_resolve_handle (const Dwg_Data *dwg, const unsigned long absref)",
          "685:   LOG_HANDLE (\"object_map{%lX} => %u\\n\", absref, i);",
          "",
          "---------------",
          "--- Hunk 2 ---",
          "[Context before]",
          "691:       if (absref && absref < dwg->num_objects)",
          "692:         {",
          "694:                     \" objects\",",
          "696:         }",
          "697:       return NULL;",
          "698:     }",
          "",
          "[Removed Lines]",
          "693:           LOG_WARN (\"Object handle not found, \" FORMAT_BL \" in \" FORMAT_BL",
          "695:                     absref, dwg->num_objects);",
          "",
          "[Added Lines]",
          "693:           LOG_WARN (\"Object handle not found, %lu/%lX in \" FORMAT_BL",
          "695:                     absref, absref, dwg->num_objects);",
          "",
          "---------------",
          "--- Hunk 3 ---",
          "[Context before]",
          "1319: EXPORT int",
          "1321:                 Dwg_Object *restrict obj)",
          "1322: {",
          "1323:   int offset = obj ? (value - (int)obj->handle.value) : 0;",
          "",
          "[Removed Lines]",
          "1320: dwg_add_handle (Dwg_Handle *restrict hdl, BITCODE_RC code, BITCODE_RL value,",
          "",
          "[Added Lines]",
          "1320: dwg_add_handle (Dwg_Handle *restrict hdl, BITCODE_RC code, unsigned long value,",
          "",
          "---------------",
          "--- Hunk 4 ---",
          "[Context before]",
          "1327:   hdl->value = value;",
          "1328:   if (obj && !offset && value) // only if same obj",
          "1329:     {",
          "1331:       hash_set (obj->parent->object_map, value, (uint32_t)obj->index);",
          "1332:     }",
          "",
          "[Removed Lines]",
          "1330:       LOG_HANDLE (\"object_map{%X} = %u\\n\", (unsigned)value, obj->index);",
          "",
          "[Added Lines]",
          "1330:       LOG_HANDLE (\"object_map{%lX} = %u\\n\", value, obj->index);",
          "",
          "---------------",
          "--- Hunk 5 ---",
          "[Context before]",
          "1379: EXPORT Dwg_Object_Ref *",
          "1381:                    Dwg_Object *restrict obj)",
          "1382: {",
          "1383:   Dwg_Object_Ref *ref;",
          "",
          "[Removed Lines]",
          "1380: dwg_add_handleref (Dwg_Data *restrict dwg, BITCODE_RC code, BITCODE_RL value,",
          "",
          "[Added Lines]",
          "1380: dwg_add_handleref (Dwg_Data *restrict dwg, BITCODE_RC code, unsigned long value,",
          "",
          "---------------",
          "--- Hunk 6 ---",
          "[Context before]",
          "1385:   for (BITCODE_BL i = 0; i < dwg->num_object_refs; i++)",
          "1386:     {",
          "1387:       Dwg_Object_Ref *refi = dwg->object_ref[i];",
          "1389:           && refi->handleref.code == code)",
          "1390:         return refi;",
          "1391:     }",
          "",
          "[Removed Lines]",
          "1388:       if (refi->absolute_ref == (BITCODE_BL)value",
          "",
          "[Added Lines]",
          "1388:       if (refi->absolute_ref == value",
          "",
          "---------------"
        ],
        "src/encode.c||src/encode.c": [
          "File: src/encode.c -> src/encode.c",
          "--- Hunk 1 ---",
          "[Context before]",
          "649: typedef struct",
          "650: {",
          "653:   BITCODE_BL index;",
          "654: } Object_Map;",
          "",
          "[Removed Lines]",
          "651:   BITCODE_BL handle;",
          "652:   long int address;",
          "",
          "[Added Lines]",
          "652:   unsigned long handle;",
          "653:   long address;",
          "",
          "---------------",
          "--- Hunk 2 ---",
          "[Context before]",
          "1054:     {",
          "1055:       LOG_HANDLE (\"\\nSorting objects...\\n\");",
          "1056:       for (i = 0; i < dwg->num_objects; i++)",
          "1058:                  dwg->object[i].handle.value, dwg->object[i].index);",
          "1059:     }",
          "",
          "[Removed Lines]",
          "1057:         fprintf (OUTPUT, \"Object(%3i): %4X / idx: %u\\n\", i,",
          "",
          "[Added Lines]",
          "1058:         fprintf (OUTPUT, \"Object(%3i): %4lX / idx: %u\\n\", i,",
          "",
          "---------------",
          "--- Hunk 3 ---",
          "[Context before]",
          "1080:     {",
          "1081:       LOG_HANDLE (\"\\nSorted handles:\\n\");",
          "1082:       for (i = 0; i < dwg->num_objects; i++)",
          "1084:                  omap[i].index);",
          "1085:     }",
          "",
          "[Removed Lines]",
          "1083:         fprintf (OUTPUT, \"Handle(%3i): %4X / idx: %u\\n\", i, omap[i].handle,",
          "",
          "[Added Lines]",
          "1084:         fprintf (OUTPUT, \"Handle(%3i): %4lX / idx: %u\\n\", i, omap[i].handle,",
          "",
          "---------------",
          "--- Hunk 4 ---",
          "[Context before]",
          "1090:     {",
          "1091:       Dwg_Object *obj;",
          "1092:       BITCODE_BL index = omap[i].index;",
          "1094:       int off = dat->byte - (i ? omap[i - 1].address : 0);",
          "1095:       unsigned long end_address;",
          "1096:       LOG_TRACE (\"\\n> Next object: \" FORMAT_BL",
          "1098:                  \"==========================================\\n\",",
          "1099:                  i, hdloff, off, dat->byte);",
          "1100:       omap[i].address = dat->byte;",
          "",
          "[Removed Lines]",
          "1093:       unsigned hdloff = omap[i].handle - (i ? omap[i - 1].handle : 0);",
          "1097:                  \" Handleoff: %u [UMC] Offset: %d [MC] @%lu\\n\"",
          "",
          "[Added Lines]",
          "1094:       unsigned long hdloff = omap[i].handle - (i ? omap[i - 1].handle : 0);",
          "1098:                  \" Handleoff: %lu [UMC] Offset: %d [MC] @%lu\\n\"",
          "",
          "---------------",
          "--- Hunk 5 ---",
          "[Context before]",
          "1132:     {",
          "1133:       LOG_HANDLE (\"\\nSorted objects:\\n\");",
          "1134:       for (i = 0; i < dwg->num_objects; i++)",
          "1136:                     omap[i].handle, omap[i].address, omap[i].index);",
          "1137:     }",
          "",
          "[Removed Lines]",
          "1135:         LOG_HANDLE (\"Object(%d): %X / Address: %ld / Idx: %d\\n\", i,",
          "",
          "[Added Lines]",
          "1136:         LOG_HANDLE (\"Object(%d): %lX / Address: %ld / Idx: %d\\n\", i,",
          "",
          "---------------",
          "--- Hunk 6 ---",
          "[Context before]",
          "1161:       index = omap[i].index;",
          "1162:       handleoff = omap[i].handle - last_handle;",
          "1163:       bit_write_UMC (dat, handleoff);",
          "1165:                   omap[i].handle)",
          "1166:       last_handle = omap[i].handle;",
          "",
          "[Removed Lines]",
          "1164:       LOG_HANDLE (\"Handleoff(%3i): %4lu (%4X)\\t\", index, handleoff,",
          "",
          "[Added Lines]",
          "1165:       LOG_HANDLE (\"Handleoff(%3i): %4lu (%4lX)\\t\", index, handleoff,",
          "",
          "---------------"
        ],
        "src/header_variables_r11.spec||src/header_variables_r11.spec": [
          "File: src/header_variables_r11.spec -> src/header_variables_r11.spec",
          "--- Hunk 1 ---",
          "[Context before]",
          "135:   DECODER {",
          "136:     _obj->CELTYPE = calloc(1, sizeof(Dwg_Object_Ref));",
          "137:     _obj->CELTYPE->absolute_ref = (BITCODE_RL)bit_read_RS(dat); // 6, ff for BYLAYER, fe for BYBLOCK",
          "139:   }",
          "140:   FIELD_TIMEBLL (TDCREATE, 40);",
          "141:   FIELD_TIMEBLL (TDUPDATE, 40);",
          "",
          "[Removed Lines]",
          "138:     LOG_TRACE(\"CELTYPE: %u [long 6]\\n\", _obj->CELTYPE->absolute_ref)",
          "",
          "[Added Lines]",
          "138:     LOG_TRACE(\"CELTYPE: %lu [long 6]\\n\", _obj->CELTYPE->absolute_ref)",
          "",
          "---------------",
          "--- Hunk 2 ---",
          "[Context before]",
          "205:   DECODER {",
          "206:     _obj->HANDSEED = calloc(1, sizeof(Dwg_Object_Ref));",
          "207:     _obj->HANDSEED->absolute_ref = (BITCODE_RL)bit_read_RS(dat);",
          "209:   }",
          "210:   DEBUG_HERE //4f0",
          "",
          "[Removed Lines]",
          "208:     LOG_TRACE(\"HANDSEED: %u [long 5]\\n\", _obj->HANDSEED->absolute_ref)",
          "",
          "[Added Lines]",
          "208:     LOG_TRACE(\"HANDSEED: %lu [long 5]\\n\", _obj->HANDSEED->absolute_ref)",
          "",
          "---------------"
        ],
        "src/in_dxf.c||src/in_dxf.c": [
          "File: src/in_dxf.c -> src/in_dxf.c",
          "--- Hunk 1 ---",
          "[Context before]",
          "5018:                 {",
          "5019:                   prev->tio.entity->next_entity",
          "5020:                       = dwg_add_handleref (dwg, 4, obj->handle.value, prev);",
          "5022:                              prev->name, prev->handle.value,",
          "5023:                              ARGS_REF (prev->tio.entity->next_entity));",
          "5024:                 }",
          "",
          "[Removed Lines]",
          "5021:                   LOG_TRACE (\"prev %s(%X).next_entity = \" FORMAT_REF \"\\n\",",
          "",
          "[Added Lines]",
          "5021:                   LOG_TRACE (\"prev %s(%lX).next_entity = \" FORMAT_REF \"\\n\",",
          "",
          "---------------"
        ],
        "src/out_dxf.c||src/out_dxf.c": [
          "File: src/out_dxf.c -> src/out_dxf.c",
          "--- Hunk 1 ---",
          "[Context before]",
          "126: #define VALUE_HANDLE(value, nam, handle_code, dxf)                            \\",
          "127:   if (dxf)                                                                    \\",
          "128:     {                                                                         \\",
          "130:                value != NULL ? ((BITCODE_H)value)->absolute_ref : 0);         \\",
          "131:     }",
          "",
          "[Removed Lines]",
          "129:       fprintf (dat->fh, \"%3i\\r\\n%X\\r\\n\", dxf,                                 \\",
          "",
          "[Added Lines]",
          "129:       fprintf (dat->fh, \"%3i\\r\\n%lX\\r\\n\", dxf,                                 \\",
          "",
          "---------------",
          "--- Hunk 2 ---",
          "[Context before]",
          "144:       else if (dxf == 8)                                                      \\",
          "145:         FIELD_HANDLE_NAME (nam, dxf, LAYER)                                   \\",
          "146:       else if (dat->version >= R_13)                                          \\",
          "148:                  _obj->nam->obj ? _obj->nam->absolute_ref : 0);               \\",
          "149:     }",
          "150: #define SUB_FIELD_HANDLE(o, nam, handle_code, dxf)                            \\",
          "",
          "[Removed Lines]",
          "147:         fprintf (dat->fh, \"%3i\\r\\n%X\\r\\n\", dxf,                               \\",
          "",
          "[Added Lines]",
          "147:         fprintf (dat->fh, \"%3i\\r\\n%lX\\r\\n\", dxf,                               \\",
          "",
          "---------------",
          "--- Hunk 3 ---",
          "[Context before]",
          "159:       else if (dxf == 8)                                                      \\",
          "160:         SUB_FIELD_HANDLE_NAME (o, nam, dxf, LAYER)                            \\",
          "161:       else if (dat->version >= R_13)                                          \\",
          "163:                  _obj->o.nam->obj ? _obj->o.nam->absolute_ref : 0);           \\",
          "164:     }",
          "165: #define HEADER_9(nam)                                                         \\",
          "",
          "[Removed Lines]",
          "162:         fprintf (dat->fh, \"%3i\\r\\n%X\\r\\n\", dxf,                               \\",
          "",
          "[Added Lines]",
          "162:         fprintf (dat->fh, \"%3i\\r\\n%lX\\r\\n\", dxf,                               \\",
          "",
          "---------------",
          "--- Hunk 4 ---",
          "[Context before]",
          "167:   fprintf (dat->fh, \"$%s\\r\\n\", #nam)",
          "168: #define VALUE_H(value, dxf)                                                   \\",
          "169:   if (dxf)                                                                    \\",
          "171: #define HEADER_H(nam, dxf)                                                    \\",
          "172:   HEADER_9 (nam);                                                             \\",
          "173:   VALUE_H (dwg->header_vars.nam, dxf)",
          "",
          "[Removed Lines]",
          "170:   fprintf (dat->fh, \"%3i\\r\\n%X\\r\\n\", dxf, value ? value->absolute_ref : 0)",
          "",
          "[Added Lines]",
          "170:   fprintf (dat->fh, \"%3i\\r\\n%lX\\r\\n\", dxf, value ? value->absolute_ref : 0)",
          "",
          "---------------",
          "--- Hunk 5 ---",
          "[Context before]",
          "724:     SINCE (R_11)                                                              \\",
          "725:     {                                                                         \\",
          "726:       LOG_TRACE (\"Entity handle: \" FORMAT_H \"\\n\", ARGS_H (obj->handle));      \\",
          "728:     }                                                                         \\",
          "729:     SINCE (R_13) { error |= dxf_common_entity_handle_data (dat, obj); }",
          "",
          "[Removed Lines]",
          "727:       fprintf (dat->fh, \"%3i\\r\\n%X\\r\\n\", 5, obj->handle.value);               \\",
          "",
          "[Added Lines]",
          "727:       fprintf (dat->fh, \"%3i\\r\\n%lX\\r\\n\", 5, obj->handle.value);               \\",
          "",
          "---------------",
          "--- Hunk 6 ---",
          "[Context before]",
          "762:         SINCE (R_13)                                                          \\",
          "763:         {                                                                     \\",
          "764:           const int dxf = obj->type == DWG_TYPE_DIMSTYLE ? 105 : 5;           \\",
          "766:           _XDICOBJHANDLE (3);                                                 \\",
          "767:           _REACTORS (4);                                                      \\",
          "768:         }                                                                     \\",
          "",
          "[Removed Lines]",
          "765:           fprintf (dat->fh, \"%3i\\r\\n%X\\r\\n\", dxf, obj->handle.value);         \\",
          "",
          "[Added Lines]",
          "765:           fprintf (dat->fh, \"%3i\\r\\n%lX\\r\\n\", dxf, obj->handle.value);         \\",
          "",
          "---------------",
          "--- Hunk 7 ---",
          "[Context before]",
          "847:           break;",
          "848:         case VT_HANDLE:",
          "849:         case VT_OBJECTID:",
          "852:           break;",
          "853:         case VT_INVALID:",
          "854:           break; // skip",
          "",
          "[Removed Lines]",
          "850:           fprintf (dat->fh, \"%3i\\r\\n%X\\r\\n\", dxftype,",
          "851:                    (unsigned)*(uint64_t *)rbuf->value.hdl);",
          "",
          "[Added Lines]",
          "850:           fprintf (dat->fh, \"%3i\\r\\n%lX\\r\\n\", dxftype,",
          "851:                    (unsigned long)*(uint64_t *)rbuf->value.hdl);",
          "",
          "---------------",
          "--- Hunk 8 ---",
          "[Context before]",
          "1012:     {                                                                         \\",
          "1013:       SINCE (R_13)                                                            \\",
          "1014:       {                                                                       \\",
          "1016:       }                                                                       \\",
          "1017:       SINCE (R_14)                                                            \\",
          "1018:       {                                                                       \\",
          "",
          "[Removed Lines]",
          "1015:         fprintf (dat->fh, \"%3i\\r\\n%X\\r\\n\", 5, ctrl->handle.value);            \\",
          "",
          "[Added Lines]",
          "1015:         fprintf (dat->fh, \"%3i\\r\\n%lX\\r\\n\", 5, ctrl->handle.value);            \\",
          "",
          "---------------",
          "--- Hunk 9 ---",
          "[Context before]",
          "1489:       return dwg_dxf_MLINE (dat, obj);",
          "1490: #else",
          "1492:                 obj->handle.value)",
          "1493:       if (0)",
          "1494:         dwg_dxf_MLINE (dat, obj);",
          "",
          "[Removed Lines]",
          "1491:       LOG_WARN (\"Unhandled Entity MLINE in out_dxf %u/%X\", obj->index,",
          "",
          "[Added Lines]",
          "1491:       LOG_WARN (\"Unhandled Entity MLINE in out_dxf %u/%lX\", obj->index,",
          "",
          "---------------",
          "--- Hunk 10 ---",
          "[Context before]",
          "1658:   if (0 <= code && code < 5)",
          "1659:     return \"%s\";",
          "1660:   if (code == 5 || code == -5)",
          "1662:   if (5 < code && code < 10)",
          "1663:     return \"%s\";",
          "1664:   if (code < 60)",
          "",
          "[Removed Lines]",
          "1661:     return \"%X\";",
          "",
          "[Added Lines]",
          "1661:     return \"%lX\";",
          "",
          "---------------",
          "--- Hunk 11 ---",
          "[Context before]",
          "1672:   if (code == 102)",
          "1673:     return \"%s\";",
          "1674:   if (code == 105)",
          "1676:   if (110 <= code && code <= 149)",
          "1677:     return \"%-16.14f\";",
          "1678:   if (160 <= code && code <= 169)",
          "",
          "[Removed Lines]",
          "1675:     return \"%X\";",
          "",
          "[Added Lines]",
          "1675:     return \"%lX\";",
          "",
          "---------------",
          "--- Hunk 12 ---",
          "[Context before]",
          "1688:   if (300 <= code && code <= 319)",
          "1689:     return \"%s\";",
          "1690:   if (320 <= code && code <= 369)",
          "1692:   if (370 <= code && code <= 389)",
          "1693:     return \"%6i\";",
          "1694:   if (390 <= code && code <= 399)",
          "1696:   if (400 <= code && code <= 409)",
          "1697:     return \"%6i\";",
          "1698:   if (410 <= code && code <= 419)",
          "",
          "[Removed Lines]",
          "1691:     return \"%X\";",
          "1695:     return \"%X\";",
          "",
          "[Added Lines]",
          "1691:     return \"%lX\";",
          "1695:     return \"%lX\";",
          "",
          "---------------",
          "--- Hunk 13 ---",
          "[Context before]",
          "1710:   if (470 <= code && code <= 479)",
          "1711:     return \"%s\";",
          "1712:   if (480 <= code && code <= 481)",
          "1714:   if (code == 999)",
          "1715:     return \"%s\";",
          "1716:   if (1000 <= code && code <= 1009)",
          "",
          "[Removed Lines]",
          "1713:     return \"%X\";",
          "",
          "[Added Lines]",
          "1713:     return \"%lX\";",
          "",
          "---------------",
          "--- Hunk 14 ---",
          "[Context before]",
          "2147:     error |= dwg_dxf_ENDBLK (dat, endblk);",
          "2148:   else",
          "2149:     {",
          "2151:                 hdr ? hdr->handle.value : 0);",
          "2152:       dxf_ENDBLK_empty (dat, hdr);",
          "2153:     }",
          "",
          "[Removed Lines]",
          "2150:       LOG_WARN (\"Empty ENDBLK for \\\"%s\\\" %X\", _hdr->name,",
          "",
          "[Added Lines]",
          "2150:       LOG_WARN (\"Empty ENDBLK for \\\"%s\\\" %lX\", _hdr->name,",
          "",
          "---------------",
          "--- Hunk 15 ---",
          "[Context before]",
          "2227:   Dwg_Object_Ref *ownerhandle = obj->tio.object->ownerhandle;",
          "2228:   if (ownerhandle && !dwg_ref_object (obj->parent, ownerhandle))",
          "2229:     {",
          "2232:       ownerhandle->absolute_ref = 0;",
          "2233:       return 0;",
          "2234:     }",
          "",
          "[Removed Lines]",
          "2230:       LOG_INFO (\"Wrong DICTIONARY.ownerhandle %X\\n\",",
          "2231:                 (unsigned)ownerhandle->absolute_ref);",
          "",
          "[Added Lines]",
          "2230:       LOG_INFO (\"Wrong DICTIONARY.ownerhandle %lX\\n\", ownerhandle->absolute_ref);",
          "",
          "---------------"
        ],
        "src/out_dxfb.c||src/out_dxfb.c": [
          "File: src/out_dxfb.c -> src/out_dxfb.c",
          "--- Hunk 1 ---",
          "[Context before]",
          "1310:       return dwg_dxfb_MLINE (dat, obj);",
          "1311: #else",
          "1313:                 obj->handle.value)",
          "1314:       if (0)",
          "1315:         dwg_dxfb_MLINE (dat, obj);",
          "",
          "[Removed Lines]",
          "1312:       LOG_WARN (\"Unhandled Entity MLINE in out_dxfb %u/%X\", obj->index,",
          "",
          "[Added Lines]",
          "1312:       LOG_WARN (\"Unhandled Entity MLINE in out_dxfb %u/%lX\", obj->index,",
          "",
          "---------------"
        ],
        "src/out_geojson.c||src/out_geojson.c": [
          "File: src/out_geojson.c -> src/out_geojson.c",
          "--- Hunk 1 ---",
          "[Context before]",
          "374:         }",
          "375:     }",
          "379:   if (obj->type == DWG_TYPE_GEOPOSITIONMARKER)",
          "380:     {",
          "",
          "[Removed Lines]",
          "377:   sprintf (tmp, \"%X\", obj->handle.value);",
          "",
          "[Added Lines]",
          "377:   sprintf (tmp, \"%lX\", obj->handle.value);",
          "",
          "---------------"
        ],
        "src/out_json.c||src/out_json.c": [
          "File: src/out_json.c -> src/out_json.c",
          "--- Hunk 1 ---",
          "[Context before]",
          "104: #define ENDSEC() ENDARRAY",
          "106: #undef FORMAT_H",
          "108: #undef ARGS_H",
          "109: #define ARGS_H(hdl) hdl.code, hdl.value",
          "110: #undef FORMAT_RC",
          "",
          "[Removed Lines]",
          "107: #define FORMAT_H \"[%u, %u]\"",
          "",
          "[Added Lines]",
          "107: #define FORMAT_H \"[%u, %lu]\"",
          "",
          "---------------",
          "--- Hunk 2 ---",
          "[Context before]",
          "1161:       Dwg_Object *obj = &dwg->object[j];",
          "1163:       PREFIX;",
          "1165:     }",
          "1166:   NOCOMMA;",
          "1167:   ENDSEC ();",
          "",
          "[Removed Lines]",
          "1164:       fprintf (dat->fh, \"[ %u, %lu ],\\n\", obj->handle.value, obj->address);",
          "",
          "[Added Lines]",
          "1164:       fprintf (dat->fh, \"[ %lu, %lu ],\\n\", obj->handle.value, obj->address);",
          "",
          "---------------"
        ],
        "src/print.c||src/print.c": [
          "File: src/print.c -> src/print.c",
          "--- Hunk 1 ---",
          "[Context before]",
          "68: #define VALUE_HANDLE(handleptr, name, handle_code, dxf)                       \\",
          "69:   if (handleptr)                                                              \\",
          "70:     {                                                                         \\",
          "73:     }",
          "74: #define FIELD_HANDLE(nam, handle_code, dxf)                                   \\",
          "75:   VALUE_HANDLE (_obj->nam, nam, handle_code, dxf)",
          "",
          "[Removed Lines]",
          "71:       LOG_TRACE (#name \": HANDLE\" FORMAT_REF \"/%u [%d]\\n\",                    \\",
          "72:                  ARGS_REF (handleptr), handleptr->absolute_ref, dxf);         \\",
          "",
          "[Added Lines]",
          "71:       LOG_TRACE (#name \": HANDLE\" FORMAT_REF \" [%d]\\n\", ARGS_REF (handleptr), \\",
          "72:                  dxf);                                                        \\",
          "",
          "---------------",
          "--- Hunk 2 ---",
          "[Context before]",
          "79: #define VALUE_HANDLE_N(handleptr, name, vcount, handle_code, dxf)             \\",
          "80:   if (handleptr)                                                              \\",
          "81:     {                                                                         \\",
          "84:     }",
          "85: #define FIELD_HANDLE_N(name, vcount, handle_code, dxf)                        \\",
          "86:   VALUE_HANDLE_N (_obj->name, name, vcount, handle_code, dxf)",
          "",
          "[Removed Lines]",
          "82:       LOG_TRACE (#name \"[%d]: HANDLE\" FORMAT_REF \"/%u [%d]\\n\", (int)vcount,   \\",
          "83:                  ARGS_REF (handleptr), handleptr->absolute_ref, dxf);         \\",
          "",
          "[Added Lines]",
          "82:       LOG_TRACE (#name \"[%d]: HANDLE\" FORMAT_REF \" [%d]\\n\", (int)vcount,      \\",
          "83:                  ARGS_REF (handleptr),  dxf);                                 \\",
          "",
          "---------------"
        ]
      }
    },
    {
      "candidate_hash": "f4b41137d1fc1f6f1c836c14605988563e3ba086",
      "candidate_info": {
        "commit_hash": "f4b41137d1fc1f6f1c836c14605988563e3ba086",
        "repo": "LibreDWG/libredwg",
        "commit_url": "https://github.com/LibreDWG/libredwg/commit/f4b41137d1fc1f6f1c836c14605988563e3ba086",
        "files": [
          "include/dwg.h",
          "src/bits.c",
          "src/bits.h",
          "src/dec_macros.h",
          "src/decode.c",
          "src/decode.h",
          "src/decode_r2007.c",
          "src/dwg.spec",
          "src/dwg_api.c",
          "src/dynapi.c",
          "src/encode.c",
          "src/out_dxf.c",
          "src/out_dxfb.c",
          "src/out_json.c",
          "src/spec.h"
        ],
        "message": "seperate and restrict the 3 streams\n\nto catch overflows, put them on the stack.\nSee #85\nThis enables now interleaving of handles in the spec,\nneed not to be at the very end.\n\nrestrict dat at dwg_decode_add_object(),\nkeep the 3 streams at the same initial offset, the\nobj->address - obj->size, and also its size,\nand tighten it later as of now (in decode private).\nPreviously the hdl_dat 0 and str_dat 0 were at their resp.\nstarts, but this way we can compare them easier.\nCalculating the relative stream positions is now trivial, e.g.\nfor the padding check in DWG_ENTITY_END.\n\nadd helper function obj_stream_position() which returns\nthe furthest handle position (data, handle, string streams)\nset dat position to the max(dat, hdl_dat, str_dat) for the padding\nand crc check.\n\nharmonize pos and address name suffices\npos for bit positions, address for absolute byte addresses (objects only)\n\nThere's no need for the offset fields dat_address,\nhdlpos, strpos, only bitsize_pos is needed for encode, to patch-in\nthe bitsize.\nRemove unneeded obj->handle_offset (== obj->bitsize)\nand obj->string_offset.\n\nXRECORD: fixup objid_handles[] hdl_dat loop",
        "before_after_code_files": [
          "include/dwg.h||include/dwg.h",
          "src/bits.c||src/bits.c",
          "src/bits.h||src/bits.h",
          "src/dec_macros.h||src/dec_macros.h",
          "src/decode.c||src/decode.c",
          "src/decode.h||src/decode.h",
          "src/decode_r2007.c||src/decode_r2007.c",
          "src/dwg.spec||src/dwg.spec",
          "src/dwg_api.c||src/dwg_api.c",
          "src/dynapi.c||src/dynapi.c",
          "src/encode.c||src/encode.c",
          "src/out_dxf.c||src/out_dxf.c",
          "src/out_dxfb.c||src/out_dxfb.c",
          "src/out_json.c||src/out_json.c",
          "src/spec.h||src/spec.h"
        ]
      },
      "candidate_patch_features": {
        "candidate_earlier_than_patch": 1,
        "same_branch_evolution": 1,
        "olp_code_files": {
          "patch": [
            "include/dwg.h||include/dwg.h",
            "src/decode.c||src/decode.c",
            "src/encode.c||src/encode.c"
          ],
          "candidate": [
            "include/dwg.h||include/dwg.h",
            "src/decode.c||src/decode.c",
            "src/encode.c||src/encode.c"
          ]
        }
      },
      "candidate_diff": {
        "include/dwg.h||include/dwg.h": [
          "File: include/dwg.h -> include/dwg.h",
          "--- Hunk 1 ---",
          "[Context before]",
          "5312:   } tio;",
          "5316:   Dwg_Handle handle;",
          "5317:   struct _dwg_struct *parent;",
          "5322:   unsigned long num_unknown_bits;",
          "5323:   char *unknown_bits;",
          "",
          "[Removed Lines]",
          "5320:   int handle_offset;",
          "5321:   int string_offset;",
          "",
          "[Added Lines]",
          "[None]",
          "",
          "---------------"
        ],
        "src/bits.c||src/bits.c": [
          "File: src/bits.c -> src/bits.c",
          "--- Hunk 1 ---",
          "[Context before]",
          "93:       LOG_ERROR (\"buffer overflow at %lu, have %lu\", dat->byte, dat->size)",
          "94:     }",
          "95: }",
          "",
          "[Removed Lines]",
          "[None]",
          "",
          "[Added Lines]",
          "97: void",
          "98: bit_reset_chain (Bit_Chain *dat)",
          "99: {",
          "100:   unsigned long pos = dat->byte;",
          "101:   dat->byte = 0;",
          "102:   dat->chain += pos;",
          "103:   if (dat->size > 0)",
          "104:     dat->size -= pos;",
          "105: }",
          "",
          "---------------"
        ],
        "src/bits.h||src/bits.h": [
          "File: src/bits.h -> src/bits.h",
          "--- Hunk 1 ---",
          "[Context before]",
          "60: void bit_advance_position (Bit_Chain *dat, long advance);",
          "62: unsigned long bit_position (Bit_Chain *dat);",
          "64: void bit_set_position (Bit_Chain *dat, unsigned long bitpos);",
          "66: BITCODE_B",
          "67: bit_read_B (Bit_Chain *dat);",
          "",
          "[Removed Lines]",
          "[None]",
          "",
          "[Added Lines]",
          "63: void bit_reset_chain (Bit_Chain *dat);",
          "",
          "---------------"
        ],
        "src/dec_macros.h||src/dec_macros.h": [
          "File: src/dec_macros.h -> src/dec_macros.h",
          "--- Hunk 1 ---",
          "[Context before]",
          "811: #define END_STRING_STREAM                                                     \\",
          "813:   }",
          "815: #define START_HANDLE_STREAM                                                   \\",
          "817:   if (dat->version >= R_2007)                                                 \\",
          "818:     {                                                                         \\",
          "820:       if (obj->hdlpos != (unsigned long)vcount)                               \\",
          "821:         {                                                                     \\",
          "824:                       (long)obj->hdlpos - (long)vcount,                       \\",
          "826:                       ((long)obj->hdlpos - (long)vcount) >= 8                 \\",
          "827:                           ? \"MISSING\"                                         \\",
          "830:         }                                                                     \\",
          "831:     }",
          "",
          "[Removed Lines]",
          "819:       vcount = bit_position (dat);                                            \\",
          "822:           bit_set_position (hdl_dat, obj->hdlpos);                            \\",
          "823:           LOG_HANDLE (\" handle stream: %+ld @%lu.%u %s\\n\",                    \\",
          "825:                       dat->byte - obj->address, dat->bit,                     \\",
          "828:                           : ((long)obj->hdlpos < (long)vcount) ? \"OVERSHOOT\"  \\",
          "829:                                                                : \"\");         \\",
          "",
          "[Added Lines]",
          "819:       vcount = 1 + bit_position (dat);                                        \\",
          "822:           LOG_HANDLE (\" handle stream: %+ld @%lu.%u %s (@%lu.%u \"             \\",
          "823:                       \" @%lu.%u)\\n\",                                          \\",
          "825:                       dat->byte, dat->bit,                                    \\",
          "828:                           : ((long)obj->hdlpos < (long)vcount)                \\",
          "829:                             ? \"OVERSHOOT\"                                     \\",
          "830:                             : \"\",                                             \\",
          "831:                       obj->hdlpos/8, (unsigned)obj->hdlpos%8,                 \\",
          "832:                       hdl_dat->byte, hdl_dat->bit);                           \\",
          "833:           bit_set_position (dat, obj->hdlpos);                                \\",
          "",
          "---------------",
          "--- Hunk 2 ---",
          "[Context before]",
          "950:   }                                                                           \\",
          "951:                                                                               \\",
          "952:   static int dwg_decode_##token##_private (                                   \\",
          "954:                                                                               \\",
          "957:   static int dwg_decode_##token (Bit_Chain *restrict dat,                     \\",
          "958:                                  Dwg_Object *restrict obj)                    \\",
          "959:   {                                                                           \\",
          "961:     int error = dwg_add_##token (obj);                                        \\",
          "962:     if (error)                                                                \\",
          "963:       return error;                                                           \\",
          "965:       {                                                                       \\",
          "971:       }                                                                       \\",
          "972:     else                                                                      \\",
          "973:       {                                                                       \\",
          "980:       }                                                                       \\",
          "981:     return error;                                                             \\",
          "982:   }                                                                           \\",
          "983:                                                                               \\",
          "984:   static int dwg_decode_##token##_private (                                   \\",
          "986:   {                                                                           \\",
          "987:     BITCODE_BL vcount, rcount1, rcount2, rcount3, rcount4;                    \\",
          "988:     int error;                                                                \\",
          "989:     Dwg_Entity_##token *ent, *_obj;                                           \\",
          "990:     Dwg_Object_Entity *_ent;                                                  \\",
          "991:     Dwg_Data *dwg = obj->parent;                                              \\",
          "993:     LOG_INFO (\"Decode entity \" #token \"\\n\")                                   \\",
          "994:     _ent = obj->tio.entity;                                                   \\",
          "995:     ent = obj->tio.entity->tio.token;                                         \\",
          "",
          "[Removed Lines]",
          "953:       Bit_Chain *dat, Bit_Chain *str_dat, Dwg_Object *restrict obj);          \\",
          "960:     Bit_Chain *str_dat;                                                       \\",
          "964:     if (dat->version >= R_2007)                                               \\",
          "966:         str_dat                                                               \\",
          "967:             = calloc (1, sizeof (Bit_Chain)); /* separate string buffer */    \\",
          "968:         if (!str_dat)                                                         \\",
          "969:           return DWG_ERR_OUTOFMEM;                                            \\",
          "974:         str_dat = dat;                                                        \\",
          "975:       }                                                                       \\",
          "976:     error = dwg_decode_##token##_private (dat, str_dat, obj);                 \\",
          "977:     if (dat->version >= R_2007)                                               \\",
          "978:       {                                                                       \\",
          "979:         free (str_dat);                                                       \\",
          "985:       Bit_Chain *dat, Bit_Chain *str_dat, Dwg_Object *restrict obj)           \\",
          "992:     Bit_Chain *hdl_dat = dat;                                                 \\",
          "",
          "[Added Lines]",
          "957:       Bit_Chain *restrict dat, Bit_Chain *restrict hdl_dat,                   \\",
          "958:       Bit_Chain *restrict str_dat, Dwg_Object *restrict obj);                 \\",
          "968:     SINCE (R_2007)                                                            \\",
          "970:         Bit_Chain obj_dat, str_dat, hdl_dat;                                  \\",
          "971:         obj_dat = *dat;                                                       \\",
          "972:         hdl_dat = *dat;                                                       \\",
          "973:         str_dat = *dat;                                                       \\",
          "974:         error = dwg_decode_##token##_private (&obj_dat, &hdl_dat, &str_dat, obj);  \\",
          "978:         error = dwg_decode_##token##_private (dat, dat, dat, obj);            \\",
          "984:       Bit_Chain *restrict dat, Bit_Chain *restrict hdl_dat,                   \\",
          "985:       Bit_Chain *restrict str_dat, Dwg_Object *restrict obj)                  \\",
          "",
          "---------------",
          "--- Hunk 3 ---",
          "[Context before]",
          "997:     _ent->dwg = dwg;                                                          \\",
          "998:     _ent->objid = obj->index; /* obj ptr itself might move */                 \\",
          "999:     _obj->parent = obj->tio.entity;                                           \\",
          "1001:       {                                                                       \\",
          "1002:         error = dwg_decode_entity (dat, hdl_dat, str_dat, _ent);              \\",
          "1003:       }                                                                       \\",
          "",
          "[Removed Lines]",
          "1000:     if (dat->version >= R_13)                                                 \\",
          "",
          "[Added Lines]",
          "999:     SINCE (R_13)                                                              \\",
          "",
          "---------------",
          "--- Hunk 4 ---",
          "[Context before]",
          "1012: #define DWG_ENTITY_END                                                        \\",
          "1021:   }",
          "1023: #define DWG_OBJECT(token)                                                     \\",
          "",
          "[Removed Lines]",
          "1013:   {                                                                           \\",
          "1014:     int64_t pos = (obj->size + obj->address) * 8                              \\",
          "1015:                   - bit_position (dat->version >= R_2007 ? hdl_dat : dat);    \\",
          "1016:     if (pos)                                                                  \\",
          "1017:       LOG_HANDLE (\" padding: %+ld %s\\n\", (long)pos,                           \\",
          "1018:                   pos >= 8 ? \"MISSING\" : (pos < 0) ? \"OVERSHOOT\" : \"\");       \\",
          "1019:   }                                                                           \\",
          "1020:   return error & ~DWG_ERR_UNHANDLEDCLASS;                                     \\",
          "",
          "[Added Lines]",
          "1012:     {                                                                         \\",
          "1013:       unsigned long pos = obj_stream_position (dat, hdl_dat, str_dat);        \\",
          "1014:       int64_t padding = (obj->size * 8) - pos;                                \\",
          "1016:       SINCE(R_2007) bit_set_position(dat, pos);                               \\",
          "1017:       if (padding)                                                            \\",
          "1018:         LOG_HANDLE (\" padding: %+ld %s\\n\", (long)padding,                     \\",
          "1019:                     padding >= 8                                              \\",
          "1020:                       ? \"MISSING\"                                             \\",
          "1021:                       : (padding < 0) ? \"OVERSHOOT\" : \"\");                    \\",
          "1022:     }                                                                         \\",
          "1023:     return error & ~DWG_ERR_UNHANDLEDCLASS;                                   \\",
          "",
          "---------------",
          "--- Hunk 5 ---",
          "[Context before]",
          "1056:     return 0;                                                                 \\",
          "1057:   }                                                                           \\",
          "1058:   static int dwg_decode_##token##_private (                                   \\",
          "1060:   static int dwg_decode_##token (Bit_Chain *restrict dat,                     \\",
          "1061:                                  Dwg_Object *restrict obj)                    \\",
          "1062:   {                                                                           \\",
          "1064:     int error = dwg_add_##token (obj);                                        \\",
          "1065:     if (error)                                                                \\",
          "1066:       return error;                                                           \\",
          "1068:       {                                                                       \\",
          "1073:       }                                                                       \\",
          "1074:     else                                                                      \\",
          "1075:       {                                                                       \\",
          "1082:       }                                                                       \\",
          "1083:     return error;                                                             \\",
          "1084:   }                                                                           \\",
          "1085:                                                                               \\",
          "1086:   static int dwg_decode_##token##_private (                                   \\",
          "1088:   {                                                                           \\",
          "1089:     BITCODE_BL vcount, rcount1, rcount2, rcount3, rcount4;                    \\",
          "1090:     int error;                                                                \\",
          "1091:     Dwg_Object_##token *_obj;                                                 \\",
          "1092:     Dwg_Data *dwg = obj->parent;                                              \\",
          "1095:     _obj = obj->tio.object->tio.token;                                        \\",
          "1096:     error = dwg_decode_object (dat, hdl_dat, str_dat, obj->tio.object);       \\",
          "1097:     if (error >= DWG_ERR_CRITICAL)                                            \\",
          "",
          "[Removed Lines]",
          "1059:       Bit_Chain *dat, Bit_Chain *str_dat, Dwg_Object *restrict obj);          \\",
          "1063:     Bit_Chain *str_dat;                                                       \\",
          "1067:     if (dat->version >= R_2007)                                               \\",
          "1069:         str_dat                                                               \\",
          "1070:             = calloc (1, sizeof (Bit_Chain)); /* separate string buffer */    \\",
          "1071:         if (!str_dat)                                                         \\",
          "1072:           return DWG_ERR_OUTOFMEM;                                            \\",
          "1076:         str_dat = dat;                                                        \\",
          "1077:       }                                                                       \\",
          "1078:     error = dwg_decode_##token##_private (dat, str_dat, obj);                 \\",
          "1079:     if (dat->version >= R_2007)                                               \\",
          "1080:       {                                                                       \\",
          "1081:         free (str_dat);                                                       \\",
          "1087:       Bit_Chain *dat, Bit_Chain *str_dat, Dwg_Object *restrict obj)           \\",
          "1093:     Bit_Chain *hdl_dat = dat; /* handle stream initially the same */          \\",
          "1094:     LOG_INFO (\"Decode object \" #token \"\\n\")                                    \\",
          "",
          "[Added Lines]",
          "1062:       Bit_Chain *restrict obj_dat, Bit_Chain *restrict hdl_dat,               \\",
          "1063:       Bit_Chain *restrict str_dat, Dwg_Object *restrict obj);                 \\",
          "1064:                                                                               \\",
          "1071:     SINCE (R_2007)                                                            \\",
          "1073:         Bit_Chain obj_dat, str_dat, hdl_dat;                                  \\",
          "1074:         obj_dat = *dat;                                                       \\",
          "1075:         hdl_dat = *dat;                                                       \\",
          "1076:         str_dat = *dat;                                                       \\",
          "1077:         error = dwg_decode_##token##_private (&obj_dat, &hdl_dat, &str_dat, obj); \\",
          "1081:         error = dwg_decode_##token##_private (dat, dat, dat, obj);            \\",
          "1087:       Bit_Chain *restrict dat, Bit_Chain *restrict hdl_dat,                   \\",
          "1088:       Bit_Chain *restrict str_dat, Dwg_Object *restrict obj)                  \\",
          "1094:     LOG_INFO (\"Decode object \" #token \"\\n\")                                   \\",
          "",
          "---------------"
        ],
        "src/decode.c||src/decode.c": [
          "File: src/decode.c -> src/decode.c",
          "--- Hunk 1 ---",
          "[Context before]",
          "2174:   obj_dat.opts = hdl_dat.opts = dwg->opts & 0xf;",
          "2175:   error = read_2004_compressed_section (dat, dwg, &obj_dat, SECTION_OBJECTS);",
          "2177:     {",
          "2178:       LOG_ERROR (\"Failed to read compressed objects section\");",
          "2179:       if (obj_dat.chain)",
          "",
          "[Removed Lines]",
          "2176:   if (error >= DWG_ERR_CRITICAL)",
          "",
          "[Added Lines]",
          "2176:   if (error >= DWG_ERR_CRITICAL || !obj_dat.chain)",
          "",
          "---------------",
          "--- Hunk 2 ---",
          "[Context before]",
          "2182:     }",
          "2184:   error = read_2004_compressed_section (dat, dwg, &hdl_dat, SECTION_HANDLES);",
          "2186:     {",
          "2187:       LOG_ERROR (\"Failed to read compressed handles section\");",
          "2188:       free (obj_dat.chain);",
          "",
          "[Removed Lines]",
          "2185:   if (error >= DWG_ERR_CRITICAL)",
          "",
          "[Added Lines]",
          "2185:   if (error >= DWG_ERR_CRITICAL || !hdl_dat.chain)",
          "",
          "---------------",
          "--- Hunk 3 ---",
          "[Context before]",
          "2210:       if (section_size > 2040)",
          "2211:         {",
          "2212:           LOG_ERROR (\"Object-map/handles section size greater than 2040!\");",
          "2213:           free (obj_dat.chain);",
          "2214:           return DWG_ERR_VALUEOUTOFBOUNDS;",
          "2215:         }",
          "",
          "[Removed Lines]",
          "[None]",
          "",
          "[Added Lines]",
          "2213:           free (hdl_dat.chain);",
          "",
          "---------------",
          "--- Hunk 4 ---",
          "[Context before]",
          "2272:   while (section_size > 2);",
          "2274:   LOG_TRACE (\"\\nNum objects: %lu\\n\", (unsigned long)dwg->num_objects);",
          "2279:   return error;",
          "2280: }",
          "",
          "[Removed Lines]",
          "2275:   if (hdl_dat.chain)",
          "2276:     free (hdl_dat.chain);",
          "2277:   if (obj_dat.chain)",
          "2278:     free (obj_dat.chain);",
          "",
          "[Added Lines]",
          "2276:   free (hdl_dat.chain);",
          "2277:   free (obj_dat.chain);",
          "",
          "---------------",
          "--- Hunk 5 ---",
          "[Context before]",
          "2877:   Dwg_Data *dwg = ent->dwg;",
          "2878:   Dwg_Object *obj = &dwg->object[ent->objid];",
          "2879:   Dwg_Object_Entity *_obj = ent;",
          "2882:   PRE (R_13)",
          "2893:             = dwg_decode_handleref_with_code (dat, obj, dwg, 0);",
          "2902:   VERSIONS (R_2000, R_2007)",
          "2908:   SINCE (R_2007)",
          "2915:     {",
          "2919:     }",
          "2926:   error |= bit_read_H (dat, &(obj->handle));",
          "2927:   if (error & DWG_ERR_INVALIDHANDLE)",
          "",
          "[Removed Lines]",
          "2880:   unsigned long object_address = bit_position (dat);",
          "2883:   {",
          "2885:     if (FIELD_VALUE (flag_r11) & 4 && FIELD_VALUE (kind_r11) > 2",
          "2886:         && FIELD_VALUE (kind_r11) != 22)",
          "2887:       FIELD_RD (elevation_r11, 30);",
          "2888:     if (FIELD_VALUE (flag_r11) & 8)",
          "2889:       FIELD_RD (thickness_r11, 39);",
          "2890:     if (FIELD_VALUE (flag_r11) & 0x20)",
          "2891:       {",
          "2892:         Dwg_Object_Ref *hdl",
          "2894:         if (hdl)",
          "2895:           obj->handle = hdl->handleref;",
          "2896:       }",
          "2897:     if (FIELD_VALUE (extra_r11) & 4)",
          "2898:       FIELD_RS (paper_r11, 0);",
          "2899:   }",
          "2901:   SINCE (R_2007) { *str_dat = *dat; }",
          "2903:   {",
          "2904:     obj->bitsize = bit_read_RL (dat); // until the handles",
          "2905:     LOG_TRACE (\"bitsize: \" FORMAT_RL \" @%lu.%u\\n\", obj->bitsize, dat->byte,",
          "2906:                dat->bit)",
          "2907:   }",
          "2909:   {",
          "2912:     obj->hdlpos = obj->address * 8 + obj->bitsize;",
          "2913:     obj->handle_offset = obj->bitsize;",
          "2914:     SINCE (R_2010)",
          "2916:       LOG_HANDLE (\" bitsize: \" FORMAT_RL \", \", obj->bitsize);",
          "2917:       LOG_HANDLE (\"hdlpos: @%lu.%u)\\n\", obj->hdlpos / 8,",
          "2918:                   (unsigned)(obj->hdlpos % 8));",
          "2922:     if (obj->type >= 500 || obj_has_strings (obj->type))",
          "2923:       error |= obj_string_stream (dat, obj, str_dat);",
          "2924:   }",
          "",
          "[Added Lines]",
          "2879:   unsigned long objectpos = bit_position (dat);",
          "2882:   obj->bitsize_pos = objectpos; // absolute. needed for encode",
          "2884:     {",
          "2885:       if (FIELD_VALUE (flag_r11) & 4 && FIELD_VALUE (kind_r11) > 2",
          "2886:           && FIELD_VALUE (kind_r11) != 22)",
          "2887:         FIELD_RD (elevation_r11, 30);",
          "2888:       if (FIELD_VALUE (flag_r11) & 8)",
          "2889:         FIELD_RD (thickness_r11, 39);",
          "2890:       if (FIELD_VALUE (flag_r11) & 0x20)",
          "2891:         {",
          "2892:           Dwg_Object_Ref *hdl",
          "2894:           if (hdl)",
          "2895:             obj->handle = hdl->handleref;",
          "2896:         }",
          "2897:       if (FIELD_VALUE (extra_r11) & 4)",
          "2898:         FIELD_RS (paper_r11, 0);",
          "2899:     }",
          "2902:     {",
          "2903:       obj->bitsize = bit_read_RL (dat); // until the handles",
          "2904:       LOG_TRACE (\"bitsize: \" FORMAT_RL \" @%lu.%u\\n\", obj->bitsize, dat->byte,",
          "2905:                  dat->bit)",
          "2906:     }",
          "2909:       SINCE (R_2010)",
          "2910:         LOG_HANDLE (\" bitsize: \" FORMAT_RL \",\", obj->bitsize);",
          "2912:       error |= obj_handle_stream (dat, obj, hdl_dat);",
          "2915:       if (obj->type >= 500 || obj_has_strings (obj->type))",
          "2916:         error |= obj_string_stream (dat, obj, str_dat);",
          "2917:       else",
          "2918:         {",
          "2919:           str_dat->chain += str_dat->byte;",
          "2920:           str_dat->byte = 0;",
          "2921:           str_dat->bit = 0;",
          "2922:           str_dat->size = 0;",
          "2923:           bit_advance_position (str_dat, obj->bitsize - 1 - 8);",
          "2924:         }",
          "",
          "---------------",
          "--- Hunk 6 ---",
          "[Context before]",
          "2944: #include \"common_entity_data.spec\"",
          "2948:   LOG_HANDLE (\"--common_size: %lu\\n\", obj->common_size); // needed for unknown",
          "2950:   return error;",
          "",
          "[Removed Lines]",
          "2947:   obj->common_size = bit_position (dat) - object_address;",
          "",
          "[Added Lines]",
          "2948:   obj->common_size = bit_position (dat) - objectpos;",
          "",
          "---------------",
          "--- Hunk 7 ---",
          "[Context before]",
          "2960:                    Dwg_Object_Object *restrict _obj)",
          "2961: {",
          "2962:   unsigned int i;",
          "2964:   int error = 0;",
          "2965:   Dwg_Data *dwg = _obj->dwg;",
          "2966:   Dwg_Object *obj = &dwg->object[_obj->objid];",
          "2971:   VERSIONS (R_2000, R_2007)",
          "2972:     {",
          "2973:       obj->bitsize = bit_read_RL (dat);",
          "",
          "[Removed Lines]",
          "2963:   BITCODE_BS size;",
          "2967:   unsigned long object_address = bit_position (dat);",
          "2969:   _obj->datpos = dat->byte; // the data stream offset",
          "2970:   SINCE (R_2007) { *str_dat = *dat; }",
          "",
          "[Added Lines]",
          "2967:   unsigned long objectpos = bit_position (dat);",
          "2970:   obj->bitsize_pos = objectpos; // absolute. needed for encode",
          "",
          "---------------",
          "--- Hunk 8 ---",
          "[Context before]",
          "2975:                  dat->bit)",
          "2976:     }",
          "2977:   SINCE (R_2007)",
          "2986:     {",
          "2990:     }",
          "2996:   error |= bit_read_H (dat, &obj->handle);",
          "2997:   if (error & DWG_ERR_INVALIDHANDLE)",
          "",
          "[Removed Lines]",
          "2978:   {",
          "2983:     obj->hdlpos = (obj->address * 8) + obj->bitsize;",
          "2984:     obj->handle_offset = obj->bitsize;",
          "2985:     SINCE (R_2010)",
          "2987:       LOG_HANDLE (\" bitsize: \" FORMAT_RL \", \", obj->bitsize);",
          "2988:       LOG_HANDLE (\"hdlpos: @%lu.%u\\n\", obj->hdlpos / 8,",
          "2989:                   (unsigned)(obj->hdlpos % 8));",
          "2992:     if (obj->type >= 500 || obj_has_strings (obj->type))",
          "2993:       error |= obj_string_stream (dat, obj, str_dat);",
          "2994:   }",
          "",
          "[Added Lines]",
          "2979:       SINCE (R_2010)",
          "2980:         LOG_HANDLE (\" bitsize: \" FORMAT_RL \",\", obj->bitsize);",
          "2982:       error |= obj_handle_stream (dat, obj, hdl_dat);",
          "2985:       if (obj->type >= 500 || obj_has_strings (obj->type))",
          "2986:         error |= obj_string_stream (dat, obj, str_dat);",
          "2987:       else",
          "2988:         {",
          "2989:           str_dat->chain += str_dat->byte;",
          "2990:           str_dat->byte = 0;",
          "2991:           str_dat->bit = 0;",
          "2992:           str_dat->size = 0;",
          "2993:           bit_advance_position (str_dat, obj->bitsize - 1 - 8);",
          "2994:         }",
          "",
          "---------------",
          "--- Hunk 9 ---",
          "[Context before]",
          "3007:     return error;",
          "3009:   VERSIONS (R_13, R_14)",
          "3015:   FIELD_BL (num_reactors, 0);",
          "3016:   SINCE (R_2010)",
          "3024:   SINCE (R_2004) { FIELD_B (xdic_missing_flag, 0); }",
          "3025:   SINCE (R_2013) { FIELD_B (has_ds_binary_data, 0); }",
          "3027:   LOG_HANDLE (\"--common_size: %lu\\n\", obj->common_size); // needed for unknown",
          "3029:   return error;",
          "",
          "[Removed Lines]",
          "3010:   {",
          "3011:     obj->bitsize = bit_read_RL (dat);",
          "3012:     LOG_TRACE (\"bitsize: %u [RL]\\n\", obj->bitsize);",
          "3013:   }",
          "3017:   {",
          "3018:     if (_obj->num_reactors > 0x1000)",
          "3019:       {",
          "3020:         LOG_WARN (\"Invalid num_reactors %ld\", (long)_obj->num_reactors)",
          "3021:         _obj->num_reactors = 0;",
          "3022:       }",
          "3023:   }",
          "3026:   obj->common_size = bit_position (dat) - object_address;",
          "",
          "[Added Lines]",
          "3011:     {",
          "3012:       obj->bitsize = bit_read_RL (dat);",
          "3013:       LOG_TRACE (\"bitsize: %u [RL]\\n\", obj->bitsize);",
          "3014:     }",
          "3018:     {",
          "3019:       if (_obj->num_reactors > 0x1000)",
          "3020:         {",
          "3021:           LOG_WARN (\"Invalid num_reactors %ld\", (long)_obj->num_reactors)",
          "3022:             _obj->num_reactors = 0;",
          "3023:         }",
          "3024:     }",
          "3027:   obj->common_size = bit_position (dat) - objectpos;",
          "",
          "---------------",
          "--- Hunk 10 ---",
          "[Context before]",
          "3192:                                 Dwg_Object *restrict obj,",
          "3193:                                 Dwg_Data *restrict dwg, unsigned int code)",
          "3194: {",
          "3195:   Dwg_Object_Ref *ref = (Dwg_Object_Ref *)calloc (1, sizeof (Dwg_Object_Ref));",
          "3196:   if (!ref)",
          "3197:     {",
          "",
          "[Removed Lines]",
          "[None]",
          "",
          "[Added Lines]",
          "3196:   int err;",
          "",
          "---------------",
          "--- Hunk 11 ---",
          "[Context before]",
          "3199:       return NULL;",
          "3200:     }",
          "3203:     {",
          "3206:       free (ref);",
          "3207:       return NULL;",
          "3208:     }",
          "",
          "[Removed Lines]",
          "3202:   if (bit_read_H (dat, &ref->handleref))",
          "3204:       LOG_WARN (\"Invalid handleref: wanted code %d, got (%d.%d.%lX)\", code,",
          "3205:                 ref->handleref.code, ref->handleref.size, ref->handleref.value)",
          "",
          "[Added Lines]",
          "3204:   err = bit_read_H (dat, &ref->handleref);",
          "3205:   if (err)",
          "3208:       LOG_WARN (\"Invalid handleref error: 0x%x. Wanted code %d, got (%d.%d.%lX)\",",
          "3209:                 err, code, ref->handleref.code, ref->handleref.size,",
          "3210:                 ref->handleref.value)",
          "",
          "---------------",
          "--- Hunk 12 ---",
          "[Context before]",
          "3893:                        Bit_Chain *hdl_dat, long unsigned int address)",
          "3894: {",
          "3895:   long unsigned int oldpos;",
          "3897:   unsigned char previous_bit;",
          "3898:   Dwg_Object *obj;",
          "3899:   BITCODE_BL num = dwg->num_objects;",
          "3900:   int error = 0;",
          "3901:   int realloced = 0;",
          "",
          "[Removed Lines]",
          "3896:   long unsigned int object_address, end_address;",
          "3905:   oldpos = dat->byte;",
          "3906:   previous_bit = dat->bit;",
          "",
          "[Added Lines]",
          "3902:   long unsigned int restartpos, end_address;",
          "3903:   Bit_Chain abs_dat = { NULL };",
          "3911:   abs_dat = *dat;",
          "",
          "---------------",
          "--- Hunk 13 ---",
          "[Context before]",
          "3918:   realloced = dwg_add_object (dwg);",
          "3919:   if (realloced > 0)",
          "3920:     {",
          "3923:       return realloced; // i.e. DWG_ERR_OUTOFMEM",
          "3924:     }",
          "3925:   obj = &dwg->object[num];",
          "",
          "[Removed Lines]",
          "3921:       dat->byte = oldpos;",
          "3922:       dat->bit = previous_bit;",
          "",
          "[Added Lines]",
          "[None]",
          "",
          "---------------",
          "--- Hunk 14 ---",
          "[Context before]",
          "3940:   obj->address = dat->byte;",
          "3943:   SINCE (R_2010) { obj->type = bit_read_BOT (dat); }",
          "3944:   else { obj->type = bit_read_BS (dat); }",
          "",
          "[Removed Lines]",
          "3945:   LOG_INFO (\", Type: %d\\n\", obj->type)",
          "3946:   object_address = bit_position (dat);",
          "",
          "[Added Lines]",
          "3948:   bit_reset_chain (dat);",
          "3949:   dat->size = obj->size;",
          "3953:   LOG_INFO (\", Type: %d\\n\", obj->type);",
          "3954:   restartpos = bit_position (dat); // relative",
          "",
          "---------------",
          "--- Hunk 15 ---",
          "[Context before]",
          "[No context available]",
          "",
          "[Removed Lines]",
          "4271:           bit_set_position (dat, object_address);",
          "",
          "[Added Lines]",
          "4279:           bit_set_position (dat, restartpos);",
          "",
          "---------------",
          "--- Hunk 16 ---",
          "[Context before]",
          "4291:                 }",
          "4292:               obj->supertype = DWG_SUPERTYPE_UNKNOWN;",
          "4293:               obj->type = 0;",
          "4296:               return error | DWG_ERR_VALUEOUTOFBOUNDS;",
          "4297:             }",
          "",
          "[Removed Lines]",
          "4294:               dat->byte = oldpos;",
          "4295:               dat->bit = previous_bit;",
          "",
          "[Added Lines]",
          "[None]",
          "",
          "---------------",
          "--- Hunk 17 ---",
          "[Context before]",
          "4301:               int err = dwg_decode_UNKNOWN_OBJ (dat, obj);",
          "4302:               error |= err;",
          "4303:               obj->supertype = DWG_SUPERTYPE_UNKNOWN;",
          "4305:                 return error;",
          "4306:             }",
          "4307:           else if (klass)",
          "4308:             {",
          "",
          "[Removed Lines]",
          "4304:               if (err >= DWG_ERR_CRITICAL || !dat)",
          "",
          "[Added Lines]",
          "4311:               if (!dat)",
          "4313:               if (err >= DWG_ERR_CRITICAL) {",
          "4315:               }",
          "",
          "---------------",
          "--- Hunk 18 ---",
          "[Context before]",
          "4311:               if (!strcmp(klass->dxfname, \"MULTILEADER\")) { //debug CED",
          "4312:                 char *mleader = bit_read_TF(dat, obj->size);",
          "4313:                 LOG_INSANE_TF(mleader, (int)obj->size)",
          "4315:                 free (mleader);",
          "4316:               }",
          "4317: #endif",
          "4318:               err = dwg_decode_UNKNOWN_ENT (dat, obj);",
          "4319:               error |= err;",
          "4320:               obj->supertype = DWG_SUPERTYPE_UNKNOWN;",
          "4322:                 return error;",
          "4323:             }",
          "4324:           else // not a class",
          "4325:             {",
          "",
          "[Removed Lines]",
          "4314:                 bit_set_position(dat, object_address);",
          "4321:               if (err >= DWG_ERR_CRITICAL || !dat)",
          "",
          "[Added Lines]",
          "4324:                 bit_set_position(dat, restartpos);",
          "4331:               if (!dat)",
          "4333:               if (err >= DWG_ERR_CRITICAL) {",
          "4335:               }",
          "",
          "---------------",
          "--- Hunk 19 ---",
          "[Context before]",
          "4335:                   LOG_TRACE (\"handle: %d.%d.%lX [5]\\n\", obj->handle.code,",
          "4336:                              obj->handle.size, obj->handle.value);",
          "4337:                 }",
          "4339:               obj->supertype = DWG_SUPERTYPE_UNKNOWN;",
          "4340:               obj->tio.unknown = bit_read_TF (dat, obj->size);",
          "4342:             }",
          "4343:         }",
          "4344:     }",
          "",
          "[Removed Lines]",
          "4338:               object_address = dat->byte;",
          "4341:               dat->byte = object_address;",
          "",
          "[Added Lines]",
          "4351:               restartpos = dat->byte;",
          "4354:               dat->byte = restartpos;",
          "",
          "---------------",
          "--- Hunk 20 ---",
          "[Context before]",
          "4353:   if (dat->byte > 8 * dat->size)",
          "4354:     {",
          "4356:                  8 * dat->size);",
          "4357:       return error | DWG_ERR_INVALIDDWG;",
          "4358:     }",
          "",
          "[Removed Lines]",
          "4355:       LOG_ERROR (\"Invalid object_address: %lu > %lu\", dat->byte,",
          "",
          "[Added Lines]",
          "4368:       LOG_ERROR (\"Invalid object address (overflow): %lu > %lu\", dat->byte,",
          "",
          "---------------",
          "--- Hunk 21 ---",
          "[Context before]",
          "4367:   if (!bit_check_CRC (dat, address, 0xC0C1))",
          "4368:     error |= DWG_ERR_WRONGCRC;",
          "4374:   return realloced ? -1 : error; // re-alloced or not",
          "4375: }",
          "",
          "[Removed Lines]",
          "4372:   dat->byte = oldpos;",
          "4373:   dat->bit = previous_bit;",
          "",
          "[Added Lines]",
          "[None]",
          "",
          "---------------",
          "--- Hunk 22 ---",
          "[Context before]",
          "4380:    and string stream offsets.",
          "4381:    It starts after the common_entity|object_data until and goes until the end",
          "4382:    of final padding, to the CRC.",
          "4385: int",
          "4386: dwg_decode_unknown (Bit_Chain *restrict dat, Dwg_Object *restrict obj)",
          "",
          "[Removed Lines]",
          "4383:    (obj->address+obj->common_size/8 .. obj->address+obj->size)",
          "",
          "[Added Lines]",
          "4394:    (obj->common_size/8 .. obj->size)",
          "",
          "---------------",
          "--- Hunk 23 ---",
          "[Context before]",
          "4389:   int num_bytes;",
          "4390:   unsigned long pos = bit_position (dat);",
          "4392:   if (bitsize < 0)",
          "4393:     return DWG_ERR_VALUEOUTOFBOUNDS;",
          "",
          "[Removed Lines]",
          "4391:   long bitsize = 8 * (obj->address + obj->size) - pos;",
          "",
          "[Added Lines]",
          "4402:   long bitsize = (8 * obj->size) - pos;",
          "",
          "---------------",
          "--- Hunk 24 ---",
          "[Context before]",
          "4401:   obj->unknown_bits = bit_read_TF (dat, num_bytes);",
          "4402:   LOG_TRACE (\"unknown_bits [%ld (%lu,%ld,%d) TF]: \", bitsize, obj->common_size,",
          "4405:   LOG_TRACE_TF (obj->unknown_bits, num_bytes);",
          "4406:   bit_set_position (dat, pos);",
          "4407:   return 0;",
          "",
          "[Removed Lines]",
          "4403:              obj->handle_offset - obj->common_size,",
          "4404:              (int)obj->stringstream_size);",
          "",
          "[Added Lines]",
          "4414:              obj->bitsize - obj->common_size, (int)obj->stringstream_size);",
          "",
          "---------------"
        ],
        "src/decode.h||src/decode.h": [
          "File: src/decode.h -> src/decode.h",
          "--- Hunk 1 ---",
          "[Context before]",
          "78: int dwg_validate_POLYLINE (Dwg_Object *obj);",
          "81: int obj_string_stream (Bit_Chain *dat, Dwg_Object *restrict obj,",
          "84: void read_r2007_init (Dwg_Data *dwg);",
          "85: int read_r2007_meta_data (Bit_Chain *dat, Bit_Chain *hdl_dat,",
          "",
          "[Removed Lines]",
          "82:                        Bit_Chain *str);",
          "",
          "[Added Lines]",
          "81: int obj_handle_stream (Bit_Chain *dat, Dwg_Object *restrict obj,",
          "82:                        Bit_Chain *hdl_dat);",
          "84:                        Bit_Chain *str_dat);",
          "85: unsigned long obj_stream_position (Bit_Chain *restrict dat,",
          "86:                                    Bit_Chain *restrict hdl_dat,",
          "87:                                    Bit_Chain *restrict str_dat);",
          "",
          "---------------"
        ],
        "src/decode_r2007.c||src/decode_r2007.c": [
          "File: src/decode_r2007.c -> src/decode_r2007.c",
          "--- Hunk 1 ---",
          "[Context before]",
          "1125:   return error;",
          "1126: }",
          "1128: int",
          "1130: {",
          "1131:   BITCODE_RL start = obj->bitsize - 1; // in bits",
          "1132:   BITCODE_RL data_size = 0;            // in byte",
          "",
          "[Removed Lines]",
          "1129: obj_string_stream (Bit_Chain *dat, Dwg_Object *restrict obj, Bit_Chain *str)",
          "",
          "[Added Lines]",
          "1129:    data, handle and string.",
          "1131: unsigned long",
          "1132: obj_stream_position (Bit_Chain *restrict dat, Bit_Chain *restrict hdl_dat,",
          "1133:                      Bit_Chain *restrict str_dat)",
          "1134: {",
          "1135:   unsigned long p1 = bit_position (dat);",
          "1136:   SINCE (R_2007)",
          "1137:   {",
          "1139:     unsigned long p2 = bit_position (hdl_dat);",
          "1140:     unsigned long p3 = bit_position (str_dat);",
          "1142:     if (p2 > p1)",
          "1143:       return p3 > p2 ? p3 : p2;",
          "1144:     else",
          "1145:       return p3 > p1 ? p3 : p1;",
          "1146:   }",
          "1147:   else { return p1; }",
          "1148: }",
          "1150: int",
          "1151: obj_handle_stream (Bit_Chain *restrict dat, Dwg_Object *restrict obj,",
          "1152:                    Bit_Chain *restrict hdl_dat)",
          "1153: {",
          "1154:   long unsigned int bit8 = obj->bitsize / 8;",
          "1155:   long unsigned int pos = dat->byte;",
          "1158:   obj->hdlpos = obj->bitsize; // relative to dat",
          "1160:   hdl_dat->byte = bit8;",
          "1161:   hdl_dat->bit = obj->bitsize % 8;",
          "1163:   if (!obj->handlestream_size)",
          "1164:     {",
          "1165:       obj->handlestream_size = (obj->size * 8) - obj->bitsize;",
          "1166:       LOG_TRACE (\" Hdlsize: %lu,\", obj->handlestream_size);",
          "1167:     }",
          "1168:   hdl_dat->size = obj->size + obj->address;",
          "1169:   pos = (pos*8) + obj->bitsize + obj->handlestream_size;",
          "1170:   LOG_HANDLE (\" hdl_dat: @%lu.%u - @%lu.%lu\", bit8, hdl_dat->bit, pos / 8,",
          "1171:               pos % 8);",
          "1172:   LOG_TRACE (\"\\n\")",
          "1173:   return 0;",
          "1174: }",
          "1177: obj_string_stream (Bit_Chain *restrict dat, Dwg_Object *restrict obj,",
          "1178:                    Bit_Chain *restrict str)",
          "",
          "---------------",
          "--- Hunk 2 ---",
          "[Context before]",
          "1136:   old_byte = str->byte;",
          "1138:   str->chain += str->byte;",
          "1139:   str->byte = 0;",
          "1140:   str->bit = 0;",
          "1141:   str->size = (obj->bitsize / 8) + ((obj->bitsize % 8) ? 1 : 0);",
          "1142:   bit_advance_position (str, start - 8);",
          "1143:   if (str->byte >= old_size - old_byte)",
          "1144:     {",
          "1145:       LOG_WARN (\"obj_string_stream overflow\");",
          "",
          "[Removed Lines]",
          "[None]",
          "",
          "[Added Lines]",
          "1195:   if (obj->supertype == DWG_SUPERTYPE_UNKNOWN) {",
          "1196:     str->size = 0;",
          "1198:     return 0;",
          "1199:   }",
          "",
          "---------------",
          "--- Hunk 3 ---",
          "[Context before]",
          "1149:              str->bit & 7, bit_position (str));",
          "1150:   obj->has_strings = bit_read_B (str);",
          "1151:   LOG_TRACE (\" has_strings: %d\\n\", (int)obj->has_strings);",
          "1153:     return 0;",
          "1155:   bit_advance_position (str, -1); //-17",
          "1156:   str->byte -= 2;",
          "",
          "[Removed Lines]",
          "1152:   if (!obj->has_strings)",
          "",
          "[Added Lines]",
          "1209:   if (!obj->has_strings) {",
          "1210:     str->size = 0;",
          "1213:   }",
          "",
          "---------------",
          "--- Hunk 4 ---",
          "[Context before]",
          "1166:       data_size &= 0x7FFF;",
          "1167:       hi_size = bit_read_RS (str);",
          "1168:       data_size |= (hi_size << 15);",
          "1171:     }",
          "1172:   str->byte -= 2;",
          "1173:   if (data_size > obj->bitsize)",
          "1174:     {",
          "1176:                  str->bit & 7);",
          "1177:       obj->has_strings = 0;",
          "1178:       return DWG_ERR_NOTYETSUPPORTED; // a very low severity error",
          "1179:     }",
          "1180:   obj->stringstream_size = data_size;",
          "1181:   bit_advance_position (str, -(int)data_size);",
          "1185:   return 0;",
          "1186: }",
          "",
          "[Removed Lines]",
          "1169:       LOG_HANDLE (\" data_size: %u/0x%x\", data_size, data_size);",
          "1175:       LOG_TRACE (\"Invalid string stream data_size: @%lu.%u\\n\", str->byte,",
          "",
          "[Added Lines]",
          "1229:       LOG_HANDLE (\" data_size: %u/0x%x\\n\", data_size, data_size);",
          "1232:   else",
          "1233:     LOG_HANDLE (\"\\n\");",
          "1237:       LOG_WARN (\"Invalid string stream data_size: @%lu.%u\\n\", str->byte,",
          "1240:       bit_reset_chain (str);",
          "",
          "---------------",
          "--- Hunk 5 ---",
          "[Context before]",
          "1193:   BITCODE_RL data_size; // in bits",
          "1194:   BITCODE_B endbit;",
          "1195:   PRE (R_2010)",
          "1200:   else",
          "1206:   bit_set_position (str, start);",
          "1207:   LOG_TRACE (\"section string stream\\n  pos: \" FORMAT_RL \", %lu/%u\\n\", start,",
          "",
          "[Removed Lines]",
          "1196:   {",
          "1198:     start = bitsize + 159;",
          "1199:   }",
          "1201:   {",
          "1204:   }",
          "",
          "[Added Lines]",
          "1261:     {",
          "1263:       start = bitsize + 159;",
          "1264:     }",
          "1266:     {",
          "1269:     }",
          "",
          "---------------"
        ],
        "src/dwg.spec||src/dwg.spec": [
          "File: src/dwg.spec -> src/dwg.spec",
          "--- Hunk 1 ---",
          "[Context before]",
          "30:     FIELD_HANDLE (style, 5, 7);",
          "31:   }",
          "32:   SUBCLASS (AcDbText)",
          "34:     FIELD_2RD (insertion_pt, 10);",
          "35:     FIELD_RD (height, 40);",
          "36:     FIELD_TV (text_value, 1);",
          "",
          "[Removed Lines]",
          "33:   PRE(R_13) {",
          "",
          "[Added Lines]",
          "33:   PRE (R_13) {",
          "",
          "---------------",
          "--- Hunk 2 ---",
          "[Context before]",
          "71:       FIELD_BS (vert_alignment, 73);",
          "72:     }",
          "75:     {",
          "77:          is responsible for taking care of properly updating the dataflags field",
          "",
          "[Removed Lines]",
          "74:   SINCE(R_2000)",
          "",
          "[Added Lines]",
          "74:   SINCE (R_2000)",
          "",
          "---------------",
          "--- Hunk 3 ---",
          "[Context before]",
          "112:     }",
          "114:   COMMON_ENTITY_HANDLE_DATA;",
          "116:     {",
          "117:       IF_ENCODE_FROM_PRE_R13 {",
          "",
          "[Removed Lines]",
          "115:   SINCE(R_13)",
          "",
          "[Added Lines]",
          "115:   SINCE (R_13)",
          "",
          "---------------",
          "--- Hunk 4 ---",
          "[Context before]",
          "130: DWG_ENTITY(ATTRIB)",
          "132:   SUBCLASS (AcDbText)",
          "134:     {",
          "135:       LOG_ERROR(\"TODO ATTRIB\")",
          "136:     }",
          "",
          "[Removed Lines]",
          "133:   PRE(R_13)",
          "",
          "[Added Lines]",
          "133:   PRE (R_13)",
          "",
          "---------------",
          "--- Hunk 5 ---",
          "[Context before]",
          "151:       FIELD_BS (vert_alignment, 73);",
          "152:     }",
          "155:     {",
          "157:          is responsible for taking care of properly updating the dataflags field",
          "",
          "[Removed Lines]",
          "154:   SINCE(R_2000)",
          "",
          "[Added Lines]",
          "154:   SINCE (R_2000)",
          "",
          "---------------",
          "--- Hunk 6 ---",
          "[Context before]",
          "191:         FIELD_BS (vert_alignment, 74);",
          "192:     }",
          "195:     {",
          "196:       FIELD_RC (class_version, 280); // 0 = r2010",
          "197:       if (FIELD_VALUE(class_version) > 10)",
          "198:         return DWG_ERR_VALUEOUTOFBOUNDS;",
          "199:     }",
          "201:     {",
          "202:       FIELD_RC (type, 70); // 1=single line, 2=multi line attrib, 4=multi line attdef",
          "",
          "[Removed Lines]",
          "194:   SINCE(R_2010)",
          "200:   SINCE(R_2018)",
          "",
          "[Added Lines]",
          "194:   SINCE (R_2010)",
          "200:   SINCE (R_2018)",
          "",
          "---------------",
          "--- Hunk 7 ---",
          "[Context before]",
          "224:   FIELD_BS (field_length, 73);",
          "225:   FIELD_RC (flags, 70); // 1 invisible, 2 constant, 4 verify, 8 preset",
          "228:     FIELD_B (lock_position_flag, 0); // 70",
          "229:   }",
          "",
          "[Removed Lines]",
          "227:   SINCE(R_2007) {",
          "",
          "[Added Lines]",
          "227:   SINCE (R_2007) {",
          "",
          "---------------",
          "--- Hunk 8 ---",
          "[Context before]",
          "238: DWG_ENTITY(ATTDEF)",
          "240:   SUBCLASS (AcDbText)",
          "242:     {",
          "243:       LOG_ERROR(\"TODO ATTDEF\")",
          "244:     }",
          "",
          "[Removed Lines]",
          "241:   PRE(R_13)",
          "",
          "[Added Lines]",
          "241:   PRE (R_13)",
          "",
          "---------------",
          "--- Hunk 9 ---",
          "[Context before]",
          "259:       FIELD_BS (vert_alignment, 74);",
          "260:     }",
          "263:     {",
          "265:          is responsible for taking care of properly updating the dataflags field",
          "",
          "[Removed Lines]",
          "262:   SINCE(R_2000)",
          "",
          "[Added Lines]",
          "262:   SINCE (R_2000)",
          "",
          "---------------",
          "--- Hunk 10 ---",
          "[Context before]",
          "299:         FIELD_BS (vert_alignment, 74);",
          "300:     }",
          "303:     {",
          "304:       FIELD_RC (class_version, 280); // 0 = r2010",
          "305:       if (FIELD_VALUE(class_version) > 10)",
          "306:         return DWG_ERR_VALUEOUTOFBOUNDS;",
          "307:     }",
          "309:     {",
          "310:       FIELD_RC (type, 70); // 1=single line, 2=multi line attrib, 4=multi line attdef",
          "",
          "[Removed Lines]",
          "302:   SINCE(R_2010)",
          "308:   SINCE(R_2018)",
          "",
          "[Added Lines]",
          "302:   SINCE (R_2010)",
          "308:   SINCE (R_2018)",
          "",
          "---------------",
          "--- Hunk 11 ---",
          "[Context before]",
          "329:   DXF { FIELD_HANDLE (style, 5, 7); }",
          "330:   SUBCLASS (AcDbAttributeDefinition)",
          "331:   DXF {",
          "334:       FIELD_T (prompt, 3);",
          "335:     }",
          "",
          "[Removed Lines]",
          "332:     SINCE(R_2010) {",
          "",
          "[Added Lines]",
          "332:     SINCE (R_2010) {",
          "",
          "---------------",
          "--- Hunk 12 ---",
          "[Context before]",
          "338:   FIELD_BS (field_length, 0); //DXF 73, unused",
          "339:   FIELD_RC (flags, 70); // 1 invisible, 2 constant, 4 verify, 8 preset",
          "342:     FIELD_B (lock_position_flag, 70);",
          "343:   }",
          "347:     FIELD_RC (attdef_class_version, 280);",
          "348:     if (FIELD_VALUE(class_version) > 10)",
          "349:       return DWG_ERR_VALUEOUTOFBOUNDS;",
          "",
          "[Removed Lines]",
          "341:   SINCE(R_2007) {",
          "346:   SINCE(R_2010) {",
          "",
          "[Added Lines]",
          "341:   SINCE (R_2007) {",
          "346:   SINCE (R_2010) {",
          "",
          "---------------",
          "--- Hunk 13 ---",
          "[Context before]",
          "351:   FIELD_T (prompt, 0);",
          "353:   COMMON_ENTITY_HANDLE_DATA;",
          "356: DWG_ENTITY_END",
          "",
          "[Removed Lines]",
          "354:   FIELD_HANDLE (style, 5, 0); // unexpected here in DXF",
          "",
          "[Added Lines]",
          "354:   FIELD_HANDLE (style, 5, 0);",
          "",
          "---------------",
          "--- Hunk 14 ---",
          "[Context before]",
          "397:   SUBCLASS (AcDbBlockReference)",
          "398:   DXF { FIELD_B (has_attribs, 66); }",
          "400:     FIELD_2RD (ins_pt, 10);",
          "401:   } else {",
          "402:     FIELD_3DPOINT (ins_pt, 10);",
          "",
          "[Removed Lines]",
          "399:   PRE(R_13) {",
          "",
          "[Added Lines]",
          "399:   PRE (R_13) {",
          "",
          "---------------",
          "--- Hunk 15 ---",
          "[Context before]",
          "407:       FIELD_3BD_1 (scale, 41); // 42,43",
          "408:     }",
          "411:     {",
          "412:       DXF_OR_PRINT {",
          "413:         FIELD_3BD_1 (scale, 41);",
          "",
          "[Removed Lines]",
          "410:   SINCE(R_2000)",
          "",
          "[Added Lines]",
          "410:   SINCE (R_2000)",
          "",
          "---------------",
          "--- Hunk 16 ---",
          "[Context before]",
          "478:         }",
          "479:     }",
          "482:     FIELD_RD (rotation, 50);",
          "483:   } else {",
          "484:     FIELD_BD (rotation, 50);",
          "",
          "[Removed Lines]",
          "481:   PRE(R_13) {",
          "",
          "[Added Lines]",
          "481:   PRE (R_13) {",
          "",
          "---------------",
          "--- Hunk 17 ---",
          "[Context before]",
          "486:     FIELD_B (has_attribs, 0); // 66 above",
          "487:   }",
          "490:     {",
          "491:       if (FIELD_VALUE(has_attribs))",
          "492:         FIELD_BL (num_owned, 0);",
          "493:     }",
          "495:   COMMON_ENTITY_HANDLE_DATA;",
          "497:   FIELD_HANDLE (block_header, 5, 2);",
          "501:   VERSIONS(R_13, R_2000)",
          "",
          "[Removed Lines]",
          "489:   SINCE(R_2004)",
          "",
          "[Added Lines]",
          "489:   SINCE (R_2004)",
          "",
          "---------------",
          "--- Hunk 18 ---",
          "[Context before]",
          "513:     {",
          "514:       if (FIELD_VALUE(has_attribs))",
          "515:         {",
          "",
          "[Removed Lines]",
          "512:   SINCE(R_2004)",
          "",
          "[Added Lines]",
          "510:   SINCE (R_2004)",
          "",
          "---------------",
          "--- Hunk 19 ---",
          "[Context before]",
          "535:     FIELD_3BD_1 (scale, 41);",
          "536:   }",
          "539:     {",
          "540:       DXF_OR_PRINT {",
          "541:         FIELD_3BD_1 (scale, 41);",
          "",
          "[Removed Lines]",
          "538:   SINCE(R_2000)",
          "",
          "[Added Lines]",
          "536:   SINCE (R_2000)",
          "",
          "---------------",
          "--- Hunk 20 ---",
          "[Context before]",
          "610:   FIELD_3BD (extrusion, 210);",
          "611:   FIELD_B (has_attribs, 0);",
          "614:     {",
          "615:       if (FIELD_VALUE(has_attribs))",
          "616:         FIELD_BL (num_owned, 0);",
          "",
          "[Removed Lines]",
          "613:   SINCE(R_2004)",
          "",
          "[Added Lines]",
          "611:   SINCE (R_2004)",
          "",
          "---------------",
          "--- Hunk 21 ---",
          "[Context before]",
          "634:       }",
          "635:   }",
          "638:     {",
          "639:     if (FIELD_VALUE(has_attribs))",
          "640:       {",
          "",
          "[Removed Lines]",
          "637:   SINCE(R_2004)",
          "",
          "[Added Lines]",
          "633:   SINCE (R_2004)",
          "",
          "---------------",
          "--- Hunk 22 ---",
          "[Context before]",
          "657:   SUBCLASS (AcDbVertex)",
          "658:   SUBCLASS (AcDb2dVertex)",
          "660:   {",
          "661:     FIELD_2RD (point, 10);",
          "662:     if (R11OPTS(1))",
          "",
          "[Removed Lines]",
          "659:   PRE(R_13)",
          "",
          "[Added Lines]",
          "655:   PRE (R_13)",
          "",
          "---------------",
          "--- Hunk 23 ---",
          "[Context before]",
          "668:     if (R11OPTS(8))",
          "669:       FIELD_RC (flag, 70);",
          "670:   }",
          "672:   {",
          "673:     DXF {",
          "674:       if (FIELD_VALUE(flag) != 0)",
          "",
          "[Removed Lines]",
          "671:   SINCE(R_13)",
          "",
          "[Added Lines]",
          "667:   SINCE (R_13)",
          "",
          "---------------",
          "--- Hunk 24 ---",
          "[Context before]",
          "727:     } else {",
          "728:       FIELD_BD (bulge, 42);",
          "729:     }",
          "731:       FIELD_BL (id, 91);",
          "732:     }",
          "733:     DXF {",
          "",
          "[Removed Lines]",
          "730:     SINCE(R_2010) {",
          "",
          "[Added Lines]",
          "726:     SINCE (R_2010) {",
          "",
          "---------------",
          "--- Hunk 25 ---",
          "[Context before]",
          "815:   SUBCLASS (AcDb2dPolyline)",
          "817:   {",
          "818:     if (R11OPTS(1))",
          "819:       FIELD_CAST (flag, RC, RS, 70);",
          "",
          "[Removed Lines]",
          "816:   PRE(R_13)",
          "",
          "[Added Lines]",
          "812:   PRE (R_13)",
          "",
          "---------------",
          "--- Hunk 26 ---",
          "[Context before]",
          "856:     }",
          "857:     FIELD_BE (extrusion, 210);",
          "860:       FIELD_BL (num_owned, 0);",
          "861:     }",
          "862:   }",
          "",
          "[Removed Lines]",
          "859:     SINCE(R_2004) {",
          "",
          "[Added Lines]",
          "855:     SINCE (R_2004) {",
          "",
          "---------------",
          "--- Hunk 27 ---",
          "[Context before]",
          "868:       FIELD_HANDLE (last_vertex, 4, 0);",
          "869:     }",
          "872:     {",
          "873:       HANDLE_VECTOR(vertex, num_owned, 3, 0);",
          "874:     }",
          "",
          "[Removed Lines]",
          "871:   SINCE(R_2004)",
          "",
          "[Added Lines]",
          "867:   SINCE (R_2004)",
          "",
          "---------------",
          "--- Hunk 28 ---",
          "[Context before]",
          "887:   FIELD_RC (curve_type, 75);",
          "888:   FIELD_RC (flag, 70);",
          "891:     FIELD_BL (num_owned, 0);",
          "892:   }",
          "895:   VERSIONS(R_13, R_2000)",
          "896:     {",
          "897:       FIELD_HANDLE (first_vertex, 4, 0);",
          "898:       FIELD_HANDLE (last_vertex, 4, 0);",
          "899:     }",
          "902:     {",
          "903:       HANDLE_VECTOR(vertex, num_owned, 3, 0);",
          "904:     }",
          "906:   FIELD_HANDLE (seqend, 3, 0);",
          "908: DWG_ENTITY_END",
          "",
          "[Removed Lines]",
          "890:   SINCE(R_2004) {",
          "893:   COMMON_ENTITY_HANDLE_DATA;",
          "901:   SINCE(R_2004)",
          "",
          "[Added Lines]",
          "886:   SINCE (R_2004) {",
          "890:   COMMON_ENTITY_HANDLE_DATA;",
          "896:   SINCE (R_2004)",
          "",
          "---------------",
          "--- Hunk 29 ---",
          "[Context before]",
          "914:   SUBCLASS (AcDbCircle)",
          "916:     FIELD_2RD (center, 10);",
          "917:     FIELD_RD (radius, 40);",
          "918:     FIELD_RD (start_angle, 50);",
          "",
          "[Removed Lines]",
          "915:   PRE(R_13) {",
          "",
          "[Added Lines]",
          "909:   PRE (R_13) {",
          "",
          "---------------",
          "--- Hunk 30 ---",
          "[Context before]",
          "943:   SUBCLASS (AcDbCircle)",
          "945:     FIELD_2RD (center, 10);",
          "946:     FIELD_RD (radius, 40);",
          "947:     if (R11OPTS(1))",
          "",
          "[Removed Lines]",
          "944:   PRE(R_13) {",
          "",
          "[Added Lines]",
          "938:   PRE (R_13) {",
          "",
          "---------------",
          "--- Hunk 31 ---",
          "[Context before]",
          "967:   SUBCLASS (AcDbLine)",
          "969:     if (R11FLAG(4))",
          "970:       FIELD_3RD (start, 10)",
          "971:     else",
          "",
          "[Removed Lines]",
          "968:   PRE(R_13) {",
          "",
          "[Added Lines]",
          "962:   PRE (R_13) {",
          "",
          "---------------",
          "--- Hunk 32 ---",
          "[Context before]",
          "986:       FIELD_3BD (start, 10);",
          "987:       FIELD_3BD (end, 11);",
          "988:     }",
          "990:     {",
          "991:       DXF_OR_PRINT",
          "992:         {",
          "",
          "[Removed Lines]",
          "989:   SINCE(R_2000)",
          "",
          "[Added Lines]",
          "983:   SINCE (R_2000)",
          "",
          "---------------",
          "--- Hunk 33 ---",
          "[Context before]",
          "1034:         }",
          "1035:     }",
          "1038:     FIELD_BT (thickness, 39);",
          "1039:     FIELD_BE (extrusion, 210);",
          "1040:   }",
          "",
          "[Removed Lines]",
          "1037:   SINCE(R_13) {",
          "",
          "[Added Lines]",
          "1031:   SINCE (R_13) {",
          "",
          "---------------",
          "--- Hunk 34 ---",
          "[Context before]",
          "1049: #define DIMENSION_COMMON_DECODE \\",
          "1051:       { \\",
          "1052:         FIELD_RC (class_version, 280); /* 0=r2010 */ \\",
          "1053:         if (FIELD_VALUE(class_version) > 10) \\",
          "",
          "[Removed Lines]",
          "1050:     SINCE(R_2010) \\",
          "",
          "[Added Lines]",
          "1044:     SINCE (R_2010) \\",
          "",
          "---------------",
          "--- Hunk 35 ---",
          "[Context before]",
          "1094:     FIELD_BD (horiz_dir, 51); \\",
          "1095:     FIELD_3BD_1 (ins_scale, 41); \\",
          "1096:     FIELD_BD (ins_rotation, 54); \\",
          "1098:       { \\",
          "1099:         FIELD_BS (attachment, 71); \\",
          "1100:         FIELD_BS (lspace_style, 72); \\",
          "1101:         FIELD_BD (lspace_factor, 41); \\",
          "1102:         FIELD_BD (act_measurement, 42); \\",
          "1103:       } \\",
          "1105:       { \\",
          "1106:         FIELD_B (unknown, 73); \\",
          "1107:         FIELD_B (flip_arrow1, 74); \\",
          "",
          "[Removed Lines]",
          "1097:     SINCE(R_2000) \\",
          "1104:     SINCE(R_2007) \\",
          "",
          "[Added Lines]",
          "1091:     SINCE (R_2000) \\",
          "1098:     SINCE (R_2007) \\",
          "",
          "---------------",
          "--- Hunk 36 ---",
          "[Context before]",
          "1281:       FIELD_BS (invis_flags, 70);",
          "1282:     }",
          "1285:     {",
          "1286:       FIELD_B (has_no_flags, 0);",
          "",
          "[Removed Lines]",
          "1284:   SINCE(R_2000)",
          "",
          "[Added Lines]",
          "1278:   SINCE (R_2000)",
          "",
          "---------------",
          "--- Hunk 37 ---",
          "[Context before]",
          "1326:   FIELD_BS (numverts, 71);",
          "1327:   FIELD_BS (numfaces, 72);",
          "1330:     FIELD_BL (num_owned, 0);",
          "1331:   }",
          "1333:   COMMON_ENTITY_HANDLE_DATA;",
          "1335:   VERSIONS(R_13, R_2000)",
          "1336:     {",
          "1337:       FIELD_HANDLE (first_vertex, 4, 0);",
          "1338:       FIELD_HANDLE (last_vertex, 4, 0);",
          "1339:     }",
          "1341:     {",
          "1342:       HANDLE_VECTOR(vertex, num_owned, 4, 0);",
          "1343:     }",
          "",
          "[Removed Lines]",
          "1329:   SINCE(R_2004) {",
          "1340:   SINCE(R_2004)",
          "",
          "[Added Lines]",
          "1323:   SINCE (R_2004) {",
          "1333:   SINCE (R_2004)",
          "",
          "---------------",
          "--- Hunk 38 ---",
          "[Context before]",
          "1356:   FIELD_BS (m_density, 73);",
          "1357:   FIELD_BS (n_density, 74);",
          "1360:     FIELD_BL (num_owned, 0);",
          "1361:   }",
          "1363:   COMMON_ENTITY_HANDLE_DATA;",
          "1365:   VERSIONS(R_13, R_2000)",
          "1366:     {",
          "1367:       FIELD_HANDLE (first_vertex, 4, 0);",
          "1368:       FIELD_HANDLE (last_vertex, 4, 0);",
          "1369:     }",
          "1371:     {",
          "1372:       HANDLE_VECTOR(vertex, num_owned, 4, 0);",
          "1373:     }",
          "",
          "[Removed Lines]",
          "1359:   SINCE(R_2004) {",
          "1370:   SINCE(R_2004)",
          "",
          "[Added Lines]",
          "1352:   SINCE (R_2004) {",
          "1362:   SINCE (R_2004)",
          "",
          "---------------",
          "--- Hunk 39 ---",
          "[Context before]",
          "1379: DWG_ENTITY(SOLID)",
          "1381:   SUBCLASS (AcDbTrace)",
          "1383:     FIELD_2RD (corner1, 10);",
          "1384:     FIELD_2RD (corner2, 11);",
          "1385:     FIELD_2RD (corner3, 12);",
          "",
          "[Removed Lines]",
          "1382:   PRE(R_13) {",
          "",
          "[Added Lines]",
          "1374:   PRE (R_13) {",
          "",
          "---------------",
          "--- Hunk 40 ---",
          "[Context before]",
          "1407: DWG_ENTITY(TRACE)",
          "1409:   SUBCLASS (AcDbTrace)",
          "1411:     FIELD_2RD (corner1, 10);",
          "1412:     FIELD_2RD (corner2, 11);",
          "1413:     FIELD_2RD (corner3, 12);",
          "",
          "[Removed Lines]",
          "1410:   PRE(R_13) {",
          "",
          "[Added Lines]",
          "1402:   PRE (R_13) {",
          "",
          "---------------",
          "--- Hunk 41 ---",
          "[Context before]",
          "1437:   DXF { FIELD_HANDLE (style, 5, 7); }",
          "1438:   SUBCLASS (AcDbShape)",
          "1440:     FIELD_HANDLE (style, 5, 0);",
          "1441:     FIELD_2RD (ins_pt, 10);",
          "1442:     FIELD_RS (shape_no, 2);",
          "",
          "[Removed Lines]",
          "1439:   PRE(R_13) {",
          "",
          "[Added Lines]",
          "1431:   PRE (R_13) {",
          "",
          "---------------",
          "--- Hunk 42 ---",
          "[Context before]",
          "1465: DWG_ENTITY(VIEWPORT)",
          "1467:   SUBCLASS (AcDbViewport)",
          "1469:     FIELD_3RD (center, 10);",
          "1470:     FIELD_RD (width, 40);",
          "1471:     FIELD_RD (height, 41);",
          "",
          "[Removed Lines]",
          "1468:   PRE(R_13) {",
          "",
          "[Added Lines]",
          "1460:   PRE (R_13) {",
          "",
          "---------------",
          "--- Hunk 43 ---",
          "[Context before]",
          "1483:     FIELD_RS(id, 69);",
          "1484:   }",
          "1487:     {",
          "1488:       FIELD_3BD (view_target, 17);",
          "1489:       FIELD_3BD (view_direction, 16);",
          "",
          "[Removed Lines]",
          "1486:   SINCE(R_2000)",
          "",
          "[Added Lines]",
          "1478:   SINCE (R_2000)",
          "",
          "---------------",
          "--- Hunk 44 ---",
          "[Context before]",
          "1500:       FIELD_BS (circle_zoom, 72);",
          "1501:     }",
          "1504:     FIELD_BS (grid_major, 61);",
          "1505:   }",
          "1508:     {",
          "1509:       FIELD_BL (num_frozen_layers, 0);",
          "1510:       FIELD_BL (status_flag, 90);",
          "",
          "[Removed Lines]",
          "1503:   SINCE(R_2007) {",
          "1507:   SINCE(R_2000)",
          "",
          "[Added Lines]",
          "1495:   SINCE (R_2007) {",
          "1499:   SINCE (R_2000)",
          "",
          "---------------",
          "--- Hunk 45 ---",
          "[Context before]",
          "1519:       FIELD_BS (ucs_ortho_view_type, 79);",
          "1520:     }",
          "1523:     FIELD_BS (shadeplot_mode, 170);",
          "1524:   }",
          "1527:     {",
          "1528:       FIELD_B (use_default_lights, 292);",
          "1529:       FIELD_RC (default_lighting_type, 282);",
          "",
          "[Removed Lines]",
          "1522:   SINCE(R_2004) {",
          "1526:   SINCE(R_2007)",
          "",
          "[Added Lines]",
          "1514:   SINCE (R_2004) {",
          "1518:   SINCE (R_2007)",
          "",
          "---------------",
          "--- Hunk 46 ---",
          "[Context before]",
          "1562:     if (FIELD_VALUE(scenario) != 1 && FIELD_VALUE(scenario) != 2)",
          "1563:       fprintf(stderr, \"Error: unknown scenario %d\", FIELD_VALUE (scenario));",
          "1564:   }",
          "1566:     FIELD_BL (splineflags1, 0);",
          "1567:     FIELD_BL (knotparam, 0);",
          "1568:     if (FIELD_VALUE(splineflags1) & 1)",
          "",
          "[Removed Lines]",
          "1565:   SINCE(R_2013) {",
          "",
          "[Added Lines]",
          "1557:   SINCE (R_2013) {",
          "",
          "---------------",
          "--- Hunk 47 ---",
          "[Context before]",
          "1956: #ifdef IS_DXF",
          "1957:   SUBCLASS (AcDbDictionary)",
          "1959:   {",
          "1960:     if (FIELD_VALUE(hard_owner))",
          "1961:       FIELD_RC (hard_owner, 280);",
          "",
          "[Removed Lines]",
          "1958:   SINCE(R_2000)",
          "",
          "[Added Lines]",
          "1949:   SINCE (R_2000)",
          "",
          "---------------",
          "--- Hunk 48 ---",
          "[Context before]",
          "1965:   FIELD_BL (numitems, 0);",
          "1966:   VERSION(R_14)",
          "1967:     FIELD_RC (hard_owner, 0); // always 0",
          "1969:     {",
          "1970:       IF_ENCODE_FROM_EARLIER {",
          "1971:         FIELD_VALUE(cloning) = FIELD_VALUE(hard_owner) & 0xffff;",
          "",
          "[Removed Lines]",
          "1968:   SINCE(R_2000)",
          "",
          "[Added Lines]",
          "1959:   SINCE (R_2000)",
          "",
          "---------------",
          "--- Hunk 49 ---",
          "[Context before]",
          "1997: #endif",
          "1999:   START_OBJECT_HANDLE_STREAM;",
          "2001:     {",
          "2002:       HANDLE_VECTOR(itemhandles, numitems, 2, 0);",
          "2003:     }",
          "",
          "[Removed Lines]",
          "2000:   SINCE(R_2000)",
          "",
          "[Added Lines]",
          "1991:   SINCE (R_2000)",
          "",
          "---------------",
          "--- Hunk 50 ---",
          "[Context before]",
          "2010: #ifdef IS_DXF",
          "2011:   SUBCLASS (AcDbDictionary)",
          "2013:   {",
          "2014:     if (FIELD_VALUE(hard_owner))",
          "2015:       FIELD_RC (hard_owner, 280);",
          "",
          "[Removed Lines]",
          "2012:   SINCE(R_2000)",
          "",
          "[Added Lines]",
          "2003:   SINCE (R_2000)",
          "",
          "---------------",
          "--- Hunk 51 ---",
          "[Context before]",
          "2019:   FIELD_BL (numitems, 0);",
          "2020:   VERSION(R_14)",
          "2021:     FIELD_RL (cloning_rl, 0); // always 0",
          "2023:     {",
          "2024:       IF_ENCODE_FROM_EARLIER {",
          "2025:         FIELD_VALUE(cloning) = FIELD_VALUE(cloning_rl) & 0xffff;",
          "",
          "[Removed Lines]",
          "2022:   SINCE(R_2000)",
          "",
          "[Added Lines]",
          "2013:   SINCE (R_2000)",
          "",
          "---------------",
          "--- Hunk 52 ---",
          "[Context before]",
          "2050: #endif",
          "2052:   START_OBJECT_HANDLE_STREAM;",
          "2054:     {",
          "2055:       HANDLE_VECTOR(itemhandles, numitems, 2, 0);",
          "2056:     }",
          "",
          "[Removed Lines]",
          "2053:   SINCE(R_2000)",
          "",
          "[Added Lines]",
          "2044:   SINCE (R_2000)",
          "",
          "---------------",
          "--- Hunk 53 ---",
          "[Context before]",
          "2069:   FIELD_BS (flag, 70);",
          "2071:     FIELD_BS (mode, 0);",
          "2072:   }",
          "",
          "[Removed Lines]",
          "2070:   SINCE(R_2000) {",
          "",
          "[Added Lines]",
          "2061:   SINCE (R_2000) {",
          "",
          "---------------",
          "--- Hunk 54 ---",
          "[Context before]",
          "2090:   FIELD_3BD (x_axis_dir, 11);",
          "2092:   FIELD_BD (rect_width, 41);",
          "2094:     FIELD_BD (rect_height, 0);",
          "2095:   }",
          "",
          "[Removed Lines]",
          "2093:   SINCE(R_2007) {",
          "",
          "[Added Lines]",
          "2084:   SINCE (R_2007) {",
          "",
          "---------------",
          "--- Hunk 55 ---",
          "[Context before]",
          "2106:   }",
          "2110:     {",
          "2111:       FIELD_BS (linespace_style, 73);",
          "2112:       FIELD_BD (linespace_factor, 44);",
          "2113:       FIELD_B (unknown_bit, 0);",
          "2114:     }",
          "2117:     {",
          "2118:       FIELD_BL (bg_fill_flag, 90);",
          "2119:       if (FIELD_VALUE(bg_fill_flag) & (dat->version <= R_2018 ? 1 : 0x10))",
          "",
          "[Removed Lines]",
          "2109:   SINCE(R_2000)",
          "2116:   SINCE(R_2004)",
          "",
          "[Added Lines]",
          "2100:   SINCE (R_2000)",
          "2107:   SINCE (R_2004)",
          "",
          "---------------",
          "--- Hunk 56 ---",
          "[Context before]",
          "2123:           FIELD_BL (bg_fill_trans, 441);",
          "2124:         }",
          "2125:     }",
          "2127:     {",
          "2128:       FIELD_B(annotative, 0);",
          "2129:       if (!FIELD_VALUE(annotative))",
          "",
          "[Removed Lines]",
          "2126:   SINCE(R_2018)",
          "",
          "[Added Lines]",
          "2117:   SINCE (R_2018)",
          "",
          "---------------",
          "--- Hunk 57 ---",
          "[Context before]",
          "2202:       FIELD_B (unknown_bit_5, 0);",
          "2203:     }",
          "2206:     {",
          "2207:       FIELD_B (hookline_on, 75);",
          "2208:       FIELD_B (unknown_bit_5, 0);",
          "",
          "[Removed Lines]",
          "2205:   SINCE(R_2000)",
          "",
          "[Added Lines]",
          "2196:   SINCE (R_2000)",
          "",
          "---------------",
          "--- Hunk 58 ---",
          "[Context before]",
          "2211:   COMMON_ENTITY_HANDLE_DATA;",
          "2214:     FIELD_HANDLE (associated_annotation, 2, 340);",
          "2215:   }",
          "2216:   FIELD_HANDLE (dimstyle, 5, 2);",
          "",
          "[Removed Lines]",
          "2213:   SINCE(R_13) {",
          "",
          "[Added Lines]",
          "2204:   SINCE (R_13) {",
          "",
          "---------------",
          "--- Hunk 59 ---",
          "[Context before]",
          "2322:     return 0;",
          "2323:   }",
          "2326:   {",
          "2327:     FIELD_RD (base_pt.z, 30);",
          "2328:     FIELD_2RD (base_pt, 10);",
          "",
          "[Removed Lines]",
          "2325:   PRE(R_13)",
          "",
          "[Added Lines]",
          "2316:   PRE (R_13)",
          "",
          "---------------",
          "--- Hunk 60 ---",
          "[Context before]",
          "2337:     FIELD_VALUE(blkisxref)    = FIELD_VALUE(flag) & 4;",
          "2338:     FIELD_VALUE(xrefoverlaid) = FIELD_VALUE(flag) & 8;",
          "2339:   }",
          "2341:     FIELD_B (anonymous, 0); // bit 1",
          "2342:     FIELD_B (hasattrs, 0);  // bit 2",
          "2343:     FIELD_B (blkisxref, 0); // bit 4",
          "2344:     FIELD_B (xrefoverlaid, 0); // bit 8",
          "2345:   }",
          "2347:     FIELD_B (loaded_bit, 0); // bit 32",
          "2348:   }",
          "2350:     FIELD_VALUE(flag) = FIELD_VALUE(anonymous) |",
          "2351:                         FIELD_VALUE(hasattrs) << 1 |",
          "2352:                         FIELD_VALUE(blkisxref) << 2 |",
          "",
          "[Removed Lines]",
          "2340:   SINCE(R_13) {",
          "2346:   SINCE(R_2000) {",
          "2349:   SINCE(R_13) {",
          "",
          "[Added Lines]",
          "2331:   SINCE (R_13) {",
          "2337:   SINCE (R_2000) {",
          "2340:   SINCE (R_13) {",
          "",
          "---------------",
          "--- Hunk 61 ---",
          "[Context before]",
          "2354:                         FIELD_VALUE(xrefdep) << 4 |",
          "2355:                         FIELD_VALUE(xrefref) << 6;",
          "2356:   }",
          "2358:     FIELD_BL (num_owned, 0);",
          "2359:     if (FIELD_VALUE(num_owned) > 0xf00000)",
          "2360:       {",
          "",
          "[Removed Lines]",
          "2357:   SINCE(R_2004) { // but not in 2007",
          "",
          "[Added Lines]",
          "2348:   SINCE (R_2004) { // but not in 2007",
          "",
          "---------------",
          "--- Hunk 62 ---",
          "[Context before]",
          "2362:       }",
          "2363:   }",
          "2366:     FIELD_3DPOINT (base_pt, 10);",
          "2367:     FIELD_T (xref_pname, 1); // and 3",
          "2368:   }",
          "2371:     {",
          "2372:       FIELD_NUM_INSERTS (num_inserts, RL, 0);",
          "2373:       FIELD_T (description, 4);",
          "",
          "[Removed Lines]",
          "2365:   SINCE(R_13) {",
          "2370:   SINCE(R_2000)",
          "",
          "[Added Lines]",
          "2356:   SINCE (R_13) {",
          "2361:   SINCE (R_2000)",
          "",
          "---------------",
          "--- Hunk 63 ---",
          "[Context before]",
          "2387:         }",
          "2388:     }",
          "2391:     {",
          "2392:       FIELD_BS (insert_units, 70);",
          "2393:       FIELD_B (explodable, 280);",
          "2394:       FIELD_RC (block_scaling, 281);",
          "2395:     }",
          "2398:     START_OBJECT_HANDLE_STREAM;",
          "2399:     FIELD_HANDLE (null_handle, 5, 0);",
          "2400:     FIELD_HANDLE (block_entity, 3, 0);",
          "",
          "[Removed Lines]",
          "2390:   SINCE(R_2007)",
          "2397:   SINCE(R_13) {",
          "",
          "[Added Lines]",
          "2381:   SINCE (R_2007)",
          "2388:   SINCE (R_13) {",
          "",
          "---------------",
          "--- Hunk 64 ---",
          "[Context before]",
          "2409:         }",
          "2410:     }",
          "2413:     {",
          "2414:       if (FIELD_VALUE(num_owned) < 0xf00000)",
          "2415:         {",
          "",
          "[Removed Lines]",
          "2412:   SINCE(R_2004)",
          "",
          "[Added Lines]",
          "2403:   SINCE (R_2004)",
          "",
          "---------------",
          "--- Hunk 65 ---",
          "[Context before]",
          "2417:         }",
          "2418:     }",
          "2421:     FIELD_HANDLE (endblk_entity, 3, 0);",
          "2422:   }",
          "2424:     {",
          "2425:       if (FIELD_VALUE(num_inserts) && FIELD_VALUE(num_inserts) < 0xf00000) {",
          "2426:         HANDLE_VECTOR(insert_handles, num_inserts, ANYCODE, 0);",
          "",
          "[Removed Lines]",
          "2420:   SINCE(R_13) {",
          "2423:   SINCE(R_2000)",
          "",
          "[Added Lines]",
          "2411:   SINCE (R_13) {",
          "2414:   SINCE (R_2000)",
          "",
          "---------------",
          "--- Hunk 66 ---",
          "[Context before]",
          "2450:   LAYER_TABLE_FLAGS(Layer);",
          "2453:   {",
          "2454:     FIELD_RS (color_rs, 62);     // color",
          "2455:     FIELD_RS (linetype_rs, 7);   // style",
          "",
          "[Removed Lines]",
          "2452:   PRE(R_13)",
          "",
          "[Added Lines]",
          "2443:   PRE (R_13)",
          "",
          "---------------",
          "--- Hunk 67 ---",
          "[Context before]",
          "2468:     FIELD_B (frozen_in_new, 0);",
          "2469:     FIELD_B (locked, 0);",
          "2470:   }",
          "2472:     int flag = FIELD_VALUE(flag);",
          "2473:     FIELD_BSx (flag, 0); // 70,290,370",
          "2474:     flag = FIELD_VALUE(flag);",
          "",
          "[Removed Lines]",
          "2471:   SINCE(R_2000) {",
          "",
          "[Added Lines]",
          "2462:   SINCE (R_2000) {",
          "",
          "---------------",
          "--- Hunk 68 ---",
          "[Context before]",
          "2502:   START_OBJECT_HANDLE_STREAM;",
          "2503:   FIELD_HANDLE (xref, 5, 0);",
          "2505:     FIELD_HANDLE (plotstyle, 5, 390);",
          "2506:   }",
          "2508:     FIELD_HANDLE (material, ANYCODE, 347);",
          "2509:   }",
          "2510:   FIELD_HANDLE (linetype, 5, 6); // DXF: the name",
          "",
          "[Removed Lines]",
          "2504:   SINCE(R_2000) {",
          "2507:   SINCE(R_2007) {",
          "",
          "[Added Lines]",
          "2495:   SINCE (R_2000) {",
          "2498:   SINCE (R_2007) {",
          "",
          "---------------",
          "--- Hunk 69 ---",
          "[Context before]",
          "2533:   COMMON_TABLE_FLAGS(TextStyle)",
          "2536:   {",
          "2537:     FIELD_B (shape_file, 0);   //wrong oda doc",
          "2538:     FIELD_B (vertical, 0);     //",
          "2539:     FIELD_VALUE(flag) |= (FIELD_VALUE(vertical) ? 4 : 0) +",
          "2540:                          (FIELD_VALUE(shape_file) ? 1 : 0);",
          "2541:   }",
          "2543:   {",
          "2544:     FIELD_RD (fixed_height, 40);",
          "2545:     FIELD_RD (width_factor, 41);",
          "",
          "[Removed Lines]",
          "2535:   SINCE(R_13)",
          "2542:   PRE(R_13)",
          "",
          "[Added Lines]",
          "2526:   SINCE (R_13)",
          "2533:   PRE (R_13)",
          "",
          "---------------",
          "--- Hunk 70 ---",
          "[Context before]",
          "2567:       char *s;",
          "2568:       if (_obj->font_name)",
          "2569:         {",
          "2571:             s = bit_convert_TU((BITCODE_TU)_obj->font_name);",
          "2572:             strncpy(_buf, s, 255);",
          "2573:             free (s);",
          "",
          "[Removed Lines]",
          "2570:           SINCE(R_2007) {",
          "",
          "[Added Lines]",
          "2561:           SINCE (R_2007) {",
          "",
          "---------------",
          "--- Hunk 71 ---",
          "[Context before]",
          "2613:   COMMON_TABLE_FLAGS(Linetype)",
          "2616:   {",
          "2617:     FIELD_TF (description, 48, 3);",
          "2618:     FIELD_RC (alignment, 72);",
          "",
          "[Removed Lines]",
          "2615:   PRE(R_13)",
          "",
          "[Added Lines]",
          "2606:   PRE (R_13)",
          "",
          "---------------",
          "--- Hunk 72 ---",
          "[Context before]",
          "2626:   FIELD_RC (num_dashes, 73);",
          "2627:   REPEAT_C(num_dashes, dashes, Dwg_LTYPE_dash)",
          "2628:   REPEAT_BLOCK",
          "2630:       {",
          "2631:         FIELD_RD (dashes[rcount1].length, 49);",
          "2632: #ifndef IS_PRINT",
          "",
          "[Removed Lines]",
          "2629:       PRE(R_13)",
          "",
          "[Added Lines]",
          "2620:       PRE (R_13)",
          "",
          "---------------",
          "--- Hunk 73 ---",
          "[Context before]",
          "2697:   COMMON_TABLE_FLAGS(View)",
          "2700:   {",
          "2701:     FIELD_RD (height, 40);",
          "2702:     FIELD_2RD (center, 10);",
          "",
          "[Removed Lines]",
          "2699:   PRE(R_13)",
          "",
          "[Added Lines]",
          "2690:   PRE (R_13)",
          "",
          "---------------",
          "--- Hunk 74 ---",
          "[Context before]",
          "2722:     FIELD_BD (back_clip, 44);",
          "2723:     FIELD_4BITS(VIEWMODE, 71);",
          "2724:   }",
          "2726:     FIELD_RC (render_mode, 281);",
          "2727:   }",
          "2729:     IF_ENCODE_FROM_EARLIER {",
          "2730:       FIELD_VALUE(use_default_lights) = 1;",
          "2731:       FIELD_VALUE(default_lightning_type) = 1;",
          "",
          "[Removed Lines]",
          "2725:   SINCE(R_2000) {",
          "2728:   SINCE(R_2007) {",
          "",
          "[Added Lines]",
          "2716:   SINCE (R_2000) {",
          "2719:   SINCE (R_2007) {",
          "",
          "---------------",
          "--- Hunk 75 ---",
          "[Context before]",
          "2739:     FIELD_BD (contrast, 142);",
          "2740:     FIELD_CMC (ambient_color, 63,421);",
          "2741:   }",
          "2743:     FIELD_B (pspace_flag, 0);",
          "2744:     FIELD_VALUE(flag) =",
          "2745:       FIELD_VALUE(pspace_flag) |",
          "",
          "[Removed Lines]",
          "2742:   SINCE(R_13) {",
          "",
          "[Added Lines]",
          "2733:   SINCE (R_13) {",
          "",
          "---------------",
          "--- Hunk 76 ---",
          "[Context before]",
          "2747:       (FIELD_VALUE(xrefindex_plus1)>0 ? 32 : 0) |",
          "2748:       FIELD_VALUE(xrefref) << 6;",
          "2749:   }",
          "2751:     {",
          "2752:       FIELD_B (associated_ucs, 72);",
          "",
          "[Removed Lines]",
          "2750:   SINCE(R_2000)",
          "",
          "[Added Lines]",
          "2741:   SINCE (R_2000)",
          "",
          "---------------",
          "--- Hunk 77 ---",
          "[Context before]",
          "2761:         }",
          "2762:     }",
          "2765:     FIELD_B (camera_plottable, 73);",
          "2766:   }",
          "2768:     START_OBJECT_HANDLE_STREAM;",
          "2769:     FIELD_HANDLE (null_handle, 5, 0);",
          "2770:   }",
          "2772:     FIELD_HANDLE (background_handle, 4, 332);",
          "2773:     FIELD_HANDLE (visual_style_handle, 5, 348);",
          "2774:     FIELD_HANDLE (sun_handle, 3, 361);",
          "2775:   }",
          "2777:     {",
          "2778:       if (FIELD_VALUE(associated_ucs) & 1)",
          "2779:         {",
          "",
          "[Removed Lines]",
          "2764:   SINCE(R_2007) {",
          "2767:   SINCE(R_13) {",
          "2771:   SINCE(R_2007) {",
          "2776:   SINCE(R_2000)",
          "",
          "[Added Lines]",
          "2755:   SINCE (R_2007) {",
          "2758:   SINCE (R_13) {",
          "2762:   SINCE (R_2007) {",
          "2767:   SINCE (R_2000)",
          "",
          "---------------",
          "--- Hunk 78 ---",
          "[Context before]",
          "2781:           FIELD_HANDLE (named_ucs_handle, 5, 345);",
          "2782:         }",
          "2783:     }",
          "2785:     FIELD_HANDLE (live_section_handle, 4, 334);",
          "2786:   }",
          "",
          "[Removed Lines]",
          "2784:   SINCE(R_2007) {",
          "",
          "[Added Lines]",
          "2775:   SINCE (R_2007) {",
          "",
          "---------------",
          "--- Hunk 79 ---",
          "[Context before]",
          "2803:   COMMON_TABLE_FLAGS(Ucs)",
          "2806:   {",
          "2807:     FIELD_3RD (origin, 10);",
          "2808:     FIELD_3RD (x_direction, 11);",
          "",
          "[Removed Lines]",
          "2805:   PRE(R_13)",
          "",
          "[Added Lines]",
          "2796:   PRE (R_13)",
          "",
          "---------------",
          "--- Hunk 80 ---",
          "[Context before]",
          "2815:     FIELD_3BD (y_direction, 12);",
          "2816:   }",
          "2819:   {",
          "2820:     FIELD_BD (elevation, 146);",
          "2821:     FIELD_BS (orthographic_view_type, 71);",
          "2822:     FIELD_BS (orthographic_type, 71); // on pairs with 13?",
          "2823:   }",
          "2826:   {",
          "2827:     START_OBJECT_HANDLE_STREAM;",
          "2828:     FIELD_HANDLE (null_handle, 5, 0);",
          "2829:   }",
          "2831:   {",
          "2832:     FIELD_HANDLE (base_ucs_handle, ANYCODE, 346);",
          "2833:     FIELD_HANDLE (unknown, ANYCODE, 0);",
          "",
          "[Removed Lines]",
          "2818:   SINCE(R_2000)",
          "2825:   SINCE(R_13)",
          "2830:   SINCE(R_2000)",
          "",
          "[Added Lines]",
          "2809:   SINCE (R_2000)",
          "2816:   SINCE (R_13)",
          "2821:   SINCE (R_2000)",
          "",
          "---------------",
          "--- Hunk 81 ---",
          "[Context before]",
          "2865:   FIELD_3RD (VIEWDIR, 16);",
          "2866:   FIELD_3RD (view_target, 17);",
          "2867:   FIELD_RD (VIEWSIZE, 40);",
          "2869:     FIELD_RD (aspect_ratio, 41);",
          "2870:   } else {",
          "2871:     VALUE_RD(FIELD_VALUE(aspect_ratio) / FIELD_VALUE(VIEWSIZE), 41);",
          "",
          "[Removed Lines]",
          "2868:   PRE(R_13) {",
          "",
          "[Added Lines]",
          "2859:   PRE (R_13) {",
          "",
          "---------------",
          "--- Hunk 82 ---",
          "[Context before]",
          "2876:   FIELD_RD (SNAPANG, 50);",
          "2877:   FIELD_RD (view_twist, 51);",
          "2880:     FIELD_RC (UCSFOLLOW, 71);",
          "2881:   }",
          "2882:   else {",
          "",
          "[Removed Lines]",
          "2879:   PRE(R_13) {",
          "",
          "[Added Lines]",
          "2870:   PRE (R_13) {",
          "",
          "---------------",
          "--- Hunk 83 ---",
          "[Context before]",
          "2890:   FIELD_CAST (SNAPMODE, RS, B, 75);",
          "2891:   FIELD_RC (SNAPSTYLE, 77);",
          "2892:   FIELD_RS (SNAPISOPAIR, 78);",
          "2894:     FIELD_RC (render_mode, 281);",
          "2895:   }",
          "2899:   {",
          "2900:     FIELD_3BD (ucs_origin, 110);",
          "2901:     FIELD_3BD (ucs_x_axis, 111);",
          "",
          "[Removed Lines]",
          "2893:   SINCE(R_2000) {",
          "2898:   SINCE(R_2000)",
          "",
          "[Added Lines]",
          "2884:   SINCE (R_2000) {",
          "2889:   SINCE (R_2000)",
          "",
          "---------------",
          "--- Hunk 84 ---",
          "[Context before]",
          "2907:     FIELD_BS (ucs_orthografic_type, 79);",
          "2908:     FIELD_BD (ucs_elevation, 146);",
          "2909:   }",
          "2911:   {",
          "2912:     FIELD_HANDLE (visual_style_handle, 5, 348);",
          "2913:     FIELD_BS (grid_flags, 60);",
          "",
          "[Removed Lines]",
          "2910:   SINCE(R_2007)",
          "",
          "[Added Lines]",
          "2901:   SINCE (R_2007)",
          "",
          "---------------",
          "--- Hunk 85 ---",
          "[Context before]",
          "2938:   else {",
          "2941:   { // TODO verify",
          "2942:     FIELD_RD (VIEWSIZE, 40);",
          "2943:     FIELD_RD (aspect_ratio, 41);",
          "",
          "[Removed Lines]",
          "2940:   PRE(R_13)",
          "",
          "[Added Lines]",
          "2931:   PRE (R_13)",
          "",
          "---------------",
          "--- Hunk 86 ---",
          "[Context before]",
          "2978:     FIELD_BD (back_clip, 44);",
          "2979:     FIELD_4BITS (VIEWMODE, 71);",
          "2982:       FIELD_RC (render_mode, 281);",
          "2983:     }",
          "2985:     {",
          "2986:       IF_ENCODE_FROM_EARLIER {",
          "2987:         FIELD_VALUE(use_default_lights) = 1;",
          "",
          "[Removed Lines]",
          "2981:     SINCE(R_2000) {",
          "2984:     SINCE(R_2007)",
          "",
          "[Added Lines]",
          "2972:     SINCE (R_2000) {",
          "2975:     SINCE (R_2007)",
          "",
          "---------------",
          "--- Hunk 87 ---",
          "[Context before]",
          "3012:     FIELD_2RD (SNAPBASE, 13);",
          "3013:     FIELD_2RD (SNAPUNIT, 14);",
          "3016:     {",
          "3017:       FIELD_B (unknown, 0);",
          "3018:       FIELD_B (ucs_pre_viewport, 71); // bit 0 of 71",
          "",
          "[Removed Lines]",
          "3015:     SINCE(R_2000)",
          "",
          "[Added Lines]",
          "3006:     SINCE (R_2000)",
          "",
          "---------------",
          "--- Hunk 88 ---",
          "[Context before]",
          "3023:       FIELD_BS (ucs_orthografic_type, 79);",
          "3024:     }",
          "3027:     {",
          "3028:       FIELD_BS (grid_flags, 60);",
          "3029:       FIELD_BS (grid_major, 61);",
          "",
          "[Removed Lines]",
          "3026:     SINCE(R_2007)",
          "",
          "[Added Lines]",
          "3017:     SINCE (R_2007)",
          "",
          "---------------",
          "--- Hunk 89 ---",
          "[Context before]",
          "3033:     FIELD_HANDLE (null_handle, 5, 0);",
          "3034:   }",
          "3037:     {",
          "3038:       FIELD_HANDLE (background_handle, 4, 332); //soft ptr",
          "3039:       FIELD_HANDLE (visual_style_handle, 5, 348); //hard ptr",
          "3040:       FIELD_HANDLE (sun_handle, 3, 361); //hard owner",
          "3041:     }",
          "3044:     {",
          "3045:       FIELD_HANDLE (named_ucs_handle, 5, 345);",
          "3046:       FIELD_HANDLE (base_ucs_handle, 5, 346);",
          "",
          "[Removed Lines]",
          "3036:   SINCE(R_2007)",
          "3043:   SINCE(R_2000)",
          "",
          "[Added Lines]",
          "3027:   SINCE (R_2007)",
          "3034:   SINCE (R_2000)",
          "",
          "---------------",
          "--- Hunk 90 ---",
          "[Context before]",
          "3065:   COMMON_TABLE_FLAGS(RegApp)",
          "3068:     DXF {",
          "3069:       if (FIELD_VALUE(unknown))",
          "3070:         FIELD_RC (unknown, 71); // not in DXF if 0. has_something",
          "",
          "[Removed Lines]",
          "3067:   SINCE(R_13) {",
          "",
          "[Added Lines]",
          "3058:   SINCE (R_13) {",
          "",
          "---------------",
          "--- Hunk 91 ---",
          "[Context before]",
          "3084:   FIELD_BS (num_entries, 70);",
          "3085:   SUBCLASS (AcDbDimStyleTable)",
          "3088:       FIELD_RC (num_morehandles, 71);",
          "3089:     }",
          "",
          "[Removed Lines]",
          "3086:   SINCE(R_2000)",
          "",
          "[Added Lines]",
          "3077:   SINCE (R_2000)",
          "",
          "---------------",
          "--- Hunk 92 ---",
          "[Context before]",
          "3100:   COMMON_TABLE_FLAGS(DimStyle)",
          "3103:     {",
          "3104:       FIELD_RC (DIMTOL, 71);",
          "3105:       FIELD_RC (DIMLIM, 72);",
          "",
          "[Removed Lines]",
          "3102:   PRE(R_13)",
          "",
          "[Added Lines]",
          "3093:   PRE (R_13)",
          "",
          "---------------",
          "--- Hunk 93 ---",
          "[Context before]",
          "3214:       FIELD_CMC (DIMCLRT, 178,0);",
          "3215:     }",
          "3218:     {",
          "3219:       FIELD_T (DIMPOST, 3);",
          "3220:       FIELD_T (DIMAPOST, 4);",
          "",
          "[Removed Lines]",
          "3217:   SINCE(R_2000)",
          "",
          "[Added Lines]",
          "3208:   SINCE (R_2000)",
          "",
          "---------------",
          "--- Hunk 94 ---",
          "[Context before]",
          "3229:       FIELD_BD (DIMTM, 48);",
          "3230:     }",
          "3233:     {",
          "3234:       FIELD_BD (DIMFXL, 49);",
          "3235:       FIELD_BD (DIMJOGANG, 50);",
          "",
          "[Removed Lines]",
          "3232:   SINCE(R_2007)",
          "",
          "[Added Lines]",
          "3223:   SINCE (R_2007)",
          "",
          "---------------",
          "--- Hunk 95 ---",
          "[Context before]",
          "3237:       FIELD_CMC (DIMTFILLCLR, 70,0);",
          "3238:     }",
          "3241:     {",
          "3242:       FIELD_B (DIMTOL, 71);",
          "3243:       FIELD_B (DIMLIM, 72);",
          "",
          "[Removed Lines]",
          "3240:   SINCE(R_2000)",
          "",
          "[Added Lines]",
          "3231:   SINCE (R_2000)",
          "",
          "---------------",
          "--- Hunk 96 ---",
          "[Context before]",
          "3250:       FIELD_BS (DIMAZIN, 79);",
          "3251:     }",
          "3254:     {",
          "3255:       FIELD_BS (DIMARCSYM, 90);",
          "3256:     }",
          "3259:     {",
          "3260:       FIELD_BD (DIMTXT, 140);",
          "3261:       FIELD_BD (DIMCEN, 141);",
          "",
          "[Removed Lines]",
          "3253:   SINCE(R_2007)",
          "3258:   SINCE(R_2000)",
          "",
          "[Added Lines]",
          "3244:   SINCE (R_2007)",
          "3249:   SINCE (R_2000)",
          "",
          "---------------",
          "--- Hunk 97 ---",
          "[Context before]",
          "3296:       FIELD_BS (DIMFIT, 289);",
          "3297:     }",
          "3300:     {",
          "3301:       FIELD_B (DIMFXLON, 290);",
          "3302:     }",
          "3305:     {",
          "3306:       FIELD_B (DIMTXTDIRECTION, 295);",
          "3307:       FIELD_BD (DIMALTMZF, 0); // undocumented",
          "",
          "[Removed Lines]",
          "3299:   SINCE(R_2007)",
          "3304:   SINCE(R_2010)",
          "",
          "[Added Lines]",
          "3290:   SINCE (R_2007)",
          "3295:   SINCE (R_2010)",
          "",
          "---------------",
          "--- Hunk 98 ---",
          "[Context before]",
          "3310:       FIELD_T (DIMMZS, 0); // undocumented",
          "3311:     }",
          "3314:     {",
          "3315:       FIELD_BS (DIMLWD, 371);",
          "3316:       FIELD_BS (DIMLWE, 372);",
          "3317:     }",
          "3320:   {",
          "3321:     FIELD_B (flag, 70); // Bit 0 of 70",
          "3322:     FIELD_VALUE(flag) = FIELD_VALUE(flag) |",
          "",
          "[Removed Lines]",
          "3313:   SINCE(R_2000)",
          "3319:   SINCE(R_13)",
          "",
          "[Added Lines]",
          "3304:   SINCE (R_2000)",
          "3310:   SINCE (R_13)",
          "",
          "---------------",
          "--- Hunk 99 ---",
          "[Context before]",
          "3329:   }",
          "3332:     {",
          "",
          "[Removed Lines]",
          "3331:   SINCE(R_2000)",
          "",
          "[Added Lines]",
          "3322:   SINCE (R_2000)",
          "",
          "---------------",
          "--- Hunk 100 ---",
          "[Context before]",
          "3337:     }",
          "3340:     {",
          "3341:       FIELD_HANDLE (DIMLTYPE, ANYCODE, 345);",
          "3342:       FIELD_HANDLE (DIMLTEX1, ANYCODE, 346);",
          "",
          "[Removed Lines]",
          "3339:   SINCE(R_2007)",
          "",
          "[Added Lines]",
          "3330:   SINCE (R_2007)",
          "",
          "---------------",
          "--- Hunk 101 ---",
          "[Context before]",
          "3361:   COMMON_TABLE_FLAGS(ViewportEntity) //??",
          "3364:     DXF {",
          "3365:       ;",
          "3366:     } else {",
          "",
          "[Removed Lines]",
          "3363:   SINCE(R_13) {",
          "",
          "[Added Lines]",
          "3354:   SINCE (R_13) {",
          "",
          "---------------",
          "--- Hunk 102 ---",
          "[Context before]",
          "3426: #ifndef IS_FREE",
          "3428: #endif",
          "3430:     {",
          "3431: #if defined(IS_DXF) && !defined(IS_ENCODE)",
          "3432:         switch (FIELD_VALUE(lines[rcount1].ltindex)) {",
          "",
          "[Removed Lines]",
          "3429:     PRE(R_2018)",
          "",
          "[Added Lines]",
          "3420:     PRE (R_2018)",
          "",
          "---------------",
          "--- Hunk 103 ---",
          "[Context before]",
          "3446:   END_REPEAT(lines);",
          "3448:   START_OBJECT_HANDLE_STREAM;",
          "3450:   {",
          "3451:     _REPEAT_N (FIELD_VALUE (num_lines), lines, Dwg_MLINESTYLE_line, 1)",
          "3452:     REPEAT_BLOCK",
          "",
          "[Removed Lines]",
          "3449:   SINCE(R_2018)",
          "",
          "[Added Lines]",
          "3440:   SINCE (R_2018)",
          "",
          "---------------",
          "--- Hunk 104 ---",
          "[Context before]",
          "3513:   SUBCLASS (AcDbHatch)",
          "3514: #ifndef IS_DXF",
          "3516:     {",
          "3517:       error |= DWG_FUNC_N(ACTION,_HATCH_gradientfill)(dat,str_dat,obj,_obj);",
          "3518:     }",
          "",
          "[Removed Lines]",
          "3515:   SINCE(R_2004)",
          "",
          "[Added Lines]",
          "3506:   SINCE (R_2004)",
          "",
          "---------------",
          "--- Hunk 105 ---",
          "[Context before]",
          "3620:                       SET_PARENT(paths[rcount1].segs[rcount2].control_points,",
          "3621:                                  &_obj->paths[rcount1].segs[rcount2])",
          "3622:                       END_REPEAT(paths[rcount1].segs[rcount2].control_points);",
          "3624:                         {",
          "3625:                           SUB_FIELD_BL(paths[rcount1].segs[rcount2], num_fitpts, 97);",
          "3626:                           FIELD_2RD_VECTOR(paths[rcount1].segs[rcount2].fitpts,",
          "",
          "[Removed Lines]",
          "3623:                       SINCE(R_2013) // r2014 really",
          "",
          "[Added Lines]",
          "3614:                       SINCE (R_2013) // r2014 really",
          "",
          "---------------",
          "--- Hunk 106 ---",
          "[Context before]",
          "3680:   SET_PARENT_OBJ(paths)",
          "3681:   END_REPEAT(paths);",
          "3682: #ifdef IS_DXF",
          "3684:     {",
          "3685:       error |= DWG_FUNC_N(ACTION,_HATCH_gradientfill)(dat,str_dat,obj,_obj);",
          "3686:     }",
          "",
          "[Removed Lines]",
          "3683:   SINCE(R_2004)",
          "",
          "[Added Lines]",
          "3674:   SINCE (R_2004)",
          "",
          "---------------",
          "--- Hunk 107 ---",
          "[Context before]",
          "3755:   FIELD_RC (brightness, 281);",
          "3756:   FIELD_RC (contrast, 282);",
          "3757:   FIELD_RC (fade, 283);",
          "3759:     FIELD_B (clip_mode, 290); // 0 outside, 1 inside",
          "3760:   }",
          "3761:   FIELD_BS (clip_boundary_type, 71); // 1 rect, 2 polygon",
          "",
          "[Removed Lines]",
          "3758:   SINCE(R_2010) {",
          "",
          "[Added Lines]",
          "3749:   SINCE (R_2010) {",
          "",
          "---------------",
          "--- Hunk 108 ---",
          "[Context before]",
          "3865:   FIELD_BD (scale_factor, 147);",
          "3866:   FIELD_2BD_1 (paper_image_origin, 148);",
          "3869:     {",
          "3870:       FIELD_BS (shade_plot_mode, 76);",
          "3871:       FIELD_BS (shade_plot_res_level, 77);",
          "",
          "[Removed Lines]",
          "3868:   SINCE(R_2004)",
          "",
          "[Added Lines]",
          "3859:   SINCE (R_2004)",
          "",
          "---------------",
          "--- Hunk 109 ---",
          "[Context before]",
          "3886:   FIELD_3DPOINT (extent_min, 14);",
          "3887:   FIELD_3DPOINT (extent_max, 15);",
          "3890:     FIELD_BL (num_viewports, 0);",
          "3891:   }",
          "3893:   START_OBJECT_HANDLE_STREAM;",
          "3895:     FIELD_HANDLE (plot_view, 5, 6);",
          "3896:   }",
          "3898:     FIELD_HANDLE (visual_style, 4, 0);",
          "3899:   }",
          "3900:   FIELD_HANDLE (pspace_block_record, 4, 330);",
          "",
          "[Removed Lines]",
          "3889:   SINCE(R_2004) {",
          "3894:   SINCE(R_2004) {",
          "3897:   SINCE(R_2007) {",
          "",
          "[Added Lines]",
          "3880:   SINCE (R_2004) {",
          "3885:   SINCE (R_2004) {",
          "3888:   SINCE (R_2007) {",
          "",
          "---------------",
          "--- Hunk 110 ---",
          "[Context before]",
          "3902:   FIELD_HANDLE (base_ucs, 5, 346);",
          "3903:   FIELD_HANDLE (named_ucs, 5, 345);",
          "3906:     HANDLE_VECTOR(viewports, num_viewports, 4, 0);",
          "3907:   }",
          "",
          "[Removed Lines]",
          "3905:   SINCE(R_2004) {",
          "",
          "[Added Lines]",
          "3896:   SINCE (R_2004) {",
          "",
          "---------------",
          "--- Hunk 111 ---",
          "[Context before]",
          "3936:   if (FIELD_VALUE(flag) & 16)",
          "3937:     FIELD_BL (num_bulges, 0);",
          "3939:     if (FIELD_VALUE(flag) & 1024)",
          "3940:       FIELD_BL (num_vertexids, 0); //always same as num_points",
          "3941:   }",
          "",
          "[Removed Lines]",
          "3938:   SINCE(R_2010) {",
          "",
          "[Added Lines]",
          "3929:   SINCE (R_2010) {",
          "",
          "---------------",
          "--- Hunk 112 ---",
          "[Context before]",
          "3957:         if (FIELD_VALUE(num_bulges) && FIELD_VALUE(bulges) &&",
          "3958:             FIELD_VALUE(num_bulges) == FIELD_VALUE(num_points))",
          "3959:           FIELD_BD (bulges[rcount1], 42);",
          "3961:           if (FIELD_VALUE(num_vertexids) && FIELD_VALUE(vertexids) &&",
          "3962:               FIELD_VALUE(num_vertexids) == FIELD_VALUE(num_points))",
          "3963:             FIELD_BL (vertexids[rcount1], 91);",
          "",
          "[Removed Lines]",
          "3960:         SINCE(R_2010) {",
          "",
          "[Added Lines]",
          "3951:         SINCE (R_2010) {",
          "",
          "---------------",
          "--- Hunk 113 ---",
          "[Context before]",
          "3975:     VERSIONS(R_13, R_14) {",
          "3976:       FIELD_2RD_VECTOR (points, num_points, 10);",
          "3977:     }",
          "3979:       FIELD_2DD_VECTOR (points, num_points, 10);",
          "3980:     }",
          "3982:     FIELD_VECTOR (bulges, BD, num_bulges, 42);",
          "3984:       FIELD_VECTOR (vertexids, BL, num_vertexids, 91);",
          "3985:     }",
          "3986:     REPEAT(num_widths, widths, Dwg_LWPOLYLINE_width)",
          "",
          "[Removed Lines]",
          "3978:     SINCE(R_2000) {",
          "3983:     SINCE(R_2010) {",
          "",
          "[Added Lines]",
          "3969:     SINCE (R_2000) {",
          "3974:     SINCE (R_2010) {",
          "",
          "---------------",
          "--- Hunk 114 ---",
          "[Context before]",
          "4003:   SUBCLASS (AcDbOle2Frame)",
          "4004:   FIELD_BS (flag, 70);",
          "4006:     FIELD_BS (mode, 0);",
          "4007:   }",
          "4009:   FIELD_BL (data_length, 0);",
          "4010:   FIELD_TF (data, FIELD_VALUE(data_length), 0);",
          "4013:     FIELD_RC (unknown, 0);",
          "4014:   }",
          "",
          "[Removed Lines]",
          "4005:   SINCE(R_2000) {",
          "4012:   SINCE(R_2000) {",
          "",
          "[Added Lines]",
          "3996:   SINCE (R_2000) {",
          "4003:   SINCE (R_2000) {",
          "",
          "---------------",
          "--- Hunk 115 ---",
          "[Context before]",
          "4045:     FIELD_2RD_VECTOR (points, num_points);",
          "4046:   }",
          "4049:     FIELD_2DD_VECTOR (points, num_points);",
          "4050:   }",
          "",
          "[Removed Lines]",
          "4048:   SINCE(R_2000) {",
          "",
          "[Added Lines]",
          "4039:   SINCE (R_2000) {",
          "",
          "---------------",
          "--- Hunk 116 ---",
          "[Context before]",
          "4072:   DECODE_UNKNOWN_BITS",
          "4073:   FIELD_BL (class_id, 91);",
          "4075:   {",
          "4076:     FIELD_BL (version, 95);",
          "4077:   }",
          "4079:   { // if encode from earlier: maint_version = version<<16 + acad version",
          "4080:     FIELD_BL (version, 71);",
          "4081:     FIELD_BL (maint_version, 97);",
          "4082:   }",
          "4084:   {",
          "4085:     FIELD_B (from_dxf, 70); // Original Data Format: 0 dwg, 1 dxf",
          "4086:   }",
          "",
          "[Removed Lines]",
          "4074:   PRE(R_2018)",
          "4078:   SINCE(R_2018)",
          "4083:   SINCE(R_2000)",
          "",
          "[Added Lines]",
          "4065:   PRE (R_2018)",
          "4069:   SINCE (R_2018)",
          "4074:   SINCE (R_2000)",
          "",
          "---------------",
          "--- Hunk 117 ---",
          "[Context before]",
          "4102:   DECODE_UNKNOWN_BITS",
          "4103:   FIELD_BL (class_id, 91);",
          "4105:   {",
          "4106:     FIELD_BL (version, 95);",
          "4107:   }",
          "4109:   { // if encode from earlier: maint_version = version<<16 + acad version",
          "4110:     FIELD_BL (version, 71);",
          "4111:     FIELD_BL (maint_version, 97);",
          "4112:   }",
          "4114:   {",
          "4115:     FIELD_B (from_dxf, 70); // Original Data Format: 0 dwg, 1 dxf",
          "4116:   }",
          "",
          "[Removed Lines]",
          "4104:   PRE(R_2018)",
          "4108:   SINCE(R_2018)",
          "4113:   SINCE(R_2000)",
          "",
          "[Added Lines]",
          "4095:   PRE (R_2018)",
          "4099:   SINCE (R_2018)",
          "4104:   SINCE (R_2000)",
          "",
          "---------------",
          "--- Hunk 118 ---",
          "[Context before]",
          "4129: DWG_OBJECT(OBJECTCONTEXTDATA)",
          "4132:     IF_ENCODE_FROM_EARLIER {",
          "4133:       FIELD_VALUE(class_version) = 3;",
          "4134:     }",
          "",
          "[Removed Lines]",
          "4131:   SINCE(R_2010) {",
          "",
          "[Added Lines]",
          "4122:   SINCE (R_2010) {",
          "",
          "---------------",
          "--- Hunk 119 ---",
          "[Context before]",
          "4147: #define Table_Value(value) \\",
          "4149:     { \\",
          "4150:       FIELD_BL (value.flags, 93); \\",
          "4151:     } \\",
          "",
          "[Removed Lines]",
          "4148:   SINCE(R_2007) \\",
          "",
          "[Added Lines]",
          "4139:   SINCE (R_2007) \\",
          "",
          "---------------",
          "--- Hunk 120 ---",
          "[Context before]",
          "4194:       LOG_ERROR(\"Unknown data type in TABLE entity: \\\"kResBuf\\\".\\n\") \\",
          "4195:       break; \\",
          "4196:     case 512: /* kGeneral since r2007*/ \\",
          "4198:         { \\",
          "4199:           FIELD_BL (value.data_size, 0); \\",
          "4200:         } \\",
          "",
          "[Removed Lines]",
          "4197:       SINCE(R_2007) \\",
          "",
          "[Added Lines]",
          "4188:       SINCE (R_2007) \\",
          "",
          "---------------",
          "--- Hunk 121 ---",
          "[Context before]",
          "4210:       break; \\",
          "4212:     } \\",
          "4214:     { \\",
          "4215:       FIELD_BL (value.unit_type, 94); \\",
          "4216:       FIELD_T (value.format_string, 300); \\",
          "",
          "[Removed Lines]",
          "4213:   SINCE(R_2007) \\",
          "",
          "[Added Lines]",
          "4204:   SINCE (R_2007) \\",
          "",
          "---------------",
          "--- Hunk 122 ---",
          "[Context before]",
          "4224:   FIELD_T (code, 2); // and code 3 for subsequent >255 chunks",
          "4225:   FIELD_BL (num_childs, 90);",
          "4226:   FIELD_BL (num_objects, 97);",
          "4228:     FIELD_TV (format, 4);",
          "4229:   }",
          "4230:   FIELD_BL (evaluation_option, 91);",
          "",
          "[Removed Lines]",
          "4227:   PRE(R_2007) {",
          "",
          "[Added Lines]",
          "4218:   PRE (R_2007) {",
          "",
          "---------------",
          "--- Hunk 123 ---",
          "[Context before]",
          "4285:   FIELD_HANDLE (host_block, 4, 330);",
          "4286:   FIELD_BS (coord_type, 70); // 0 unknown, local grid 1, projected grid 2,",
          "4289:     {",
          "4290:       FIELD_3BD (design_pt, 10);",
          "4291:       FIELD_3BD (ref_pt, 11);",
          "",
          "[Removed Lines]",
          "4288:   SINCE(R_2010)",
          "",
          "[Added Lines]",
          "4279:   SINCE (R_2010)",
          "",
          "---------------",
          "--- Hunk 124 ---",
          "[Context before]",
          "4703: DWG_ENTITY(TABLE)",
          "4705:   DECODE_UNKNOWN_BITS",
          "4707:     {",
          "4708:       FIELD_RC (unknown_rc, 0);",
          "4709:       FIELD_HANDLE (unknown_h, 5, 0);",
          "",
          "[Removed Lines]",
          "4706:   SINCE(R_2010) //AC1024",
          "",
          "[Added Lines]",
          "4697:   SINCE (R_2010) //AC1024",
          "",
          "---------------",
          "--- Hunk 125 ---",
          "[Context before]",
          "4727:     FIELD_3BD_1 (scale, 41);",
          "4728:   }",
          "4731:     {",
          "4732:       FIELD_BB (data_flags, 0);",
          "4733:       switch (FIELD_VALUE(data_flags))",
          "",
          "[Removed Lines]",
          "4730:   SINCE(R_2000)",
          "",
          "[Added Lines]",
          "4721:   SINCE (R_2000)",
          "",
          "---------------",
          "--- Hunk 126 ---",
          "[Context before]",
          "4767:   FIELD_3BD (extrusion, 210);",
          "4768:   FIELD_B (has_attribs, 66);",
          "4771:     FIELD_BL (num_owned, 0);",
          "4772:   }",
          "",
          "[Removed Lines]",
          "4770:   SINCE(R_2004) {",
          "",
          "[Added Lines]",
          "4761:   SINCE (R_2004) {",
          "",
          "---------------",
          "--- Hunk 127 ---",
          "[Context before]",
          "5079:         }",
          "5080:     }",
          "5083:     {",
          "5084:       HANDLE_VECTOR (attrib_handles, num_owned, 4, 0)",
          "5085:     }",
          "",
          "[Removed Lines]",
          "5082:   SINCE(R_2004)",
          "",
          "[Added Lines]",
          "5073:   SINCE (R_2004)",
          "",
          "---------------",
          "--- Hunk 128 ---",
          "[Context before]",
          "5128:         FIELD_HANDLE (data_row_style_override, ANYCODE, 7);",
          "5129:     }",
          "5132:     {",
          "5134:       LOG_WARN(\"TODO TABLE r2010+\")",
          "",
          "[Removed Lines]",
          "5131:   SINCE(R_2010)",
          "",
          "[Added Lines]",
          "5122:   SINCE (R_2010)",
          "",
          "---------------",
          "--- Hunk 129 ---",
          "[Context before]",
          "5175:   DXF {",
          "5176:     SUBCLASS (AcDbXrecord)",
          "5178:       FIELD_BS (cloning_flags, 280);",
          "5179:     }",
          "5180:   }",
          "5181:   FIELD_BL (num_databytes, 0);",
          "5182:   FIELD_XDATA (xdata, num_databytes);",
          "5183: #ifndef IS_DXF",
          "5185:     FIELD_BS (cloning_flags, 280);",
          "5186:   }",
          "5187: #endif",
          "",
          "[Removed Lines]",
          "5177:     SINCE(R_2000) {",
          "5184:   SINCE(R_2000) {",
          "",
          "[Added Lines]",
          "5168:     SINCE (R_2000) {",
          "5175:   SINCE (R_2000) {",
          "",
          "---------------",
          "--- Hunk 130 ---",
          "[Context before]",
          "5189:   START_OBJECT_HANDLE_STREAM;",
          "5190:   DECODER",
          "5191:     {",
          "5195:         {",
          "5196:           FIELD_VALUE(objid_handles) = vcount",
          "5197:             ? realloc(FIELD_VALUE(objid_handles),",
          "",
          "[Removed Lines]",
          "5192:       for (vcount=0;",
          "5193:            hdl_dat->byte < obj->tio.object->datpos + (obj->bitsize/8);",
          "5194:            vcount++)",
          "",
          "[Added Lines]",
          "5183:       for (vcount=0; bit_position(hdl_dat) < obj->handlestream_size; vcount++)",
          "",
          "---------------",
          "--- Hunk 131 ---",
          "[Context before]",
          "5268:   SUBCLASS (AcDbMLeader)",
          "5269:   DXF_OR_PRINT { VALUE_TFF (\"CONTEXT_DATA{\", 300); } //AcDbObjectContextData",
          "5272:     {",
          "5273:       FIELD_BS (class_version, 270); // default 2. 1 <= r2004",
          "5274:       if (FIELD_VALUE(class_version) > 10) {",
          "",
          "[Removed Lines]",
          "5271:   SINCE(R_2010)",
          "",
          "[Added Lines]",
          "5260:   SINCE (R_2010)",
          "",
          "---------------",
          "--- Hunk 132 ---",
          "[Context before]",
          "5611:   FIELD_RC (contrast, 282);",
          "5612:   FIELD_RC (fade, 283);",
          "5615:     FIELD_B (clip_mode, 290);",
          "5616:   }",
          "5617:   FIELD_BS (clip_boundary_type, 71); // 1 rect, 2 polygon",
          "",
          "[Removed Lines]",
          "5614:   SINCE(R_2010) {",
          "",
          "[Added Lines]",
          "5603:   SINCE (R_2010) {",
          "",
          "---------------",
          "--- Hunk 133 ---",
          "[Context before]",
          "6007:     if (FIELD_VALUE(scenario) != 1 && FIELD_VALUE(scenario) != 2)",
          "6008:       fprintf(stderr, \"Error: unknown scenario %d\", FIELD_VALUE (scenario));",
          "6009:   }",
          "6011:     FIELD_BL (splineflags1, 0);",
          "6012:     FIELD_BL (knotparam, 0);",
          "6013:     if (FIELD_VALUE(splineflags1) & 1)",
          "",
          "[Removed Lines]",
          "6010:   SINCE(R_2013) {",
          "",
          "[Added Lines]",
          "5999:   SINCE (R_2013) {",
          "",
          "---------------",
          "--- Hunk 134 ---",
          "[Context before]",
          "6366:   FIELD_2BD_1 (paper_image_origin, 148); // + 149",
          "6368:     {",
          "6369:       FIELD_BS (shade_plot_mode, 76); /*!< 0 display, 1 wireframe, 2 hidden, 3 rendered, 4 visualstyle,",
          "",
          "[Removed Lines]",
          "6367:   SINCE(R_2004)",
          "",
          "[Added Lines]",
          "6356:   SINCE (R_2004)",
          "",
          "---------------"
        ],
        "src/dwg_api.c||src/dwg_api.c": [
          "File: src/dwg_api.c -> src/dwg_api.c",
          "--- Hunk 1 ---",
          "[Context before]",
          "19743:       && block_header->parent->ownerhandle->obj->tio.object)",
          "19744:     {",
          "19747:     }",
          "19748:   else",
          "19749:     {",
          "",
          "[Removed Lines]",
          "19746:       return block_header->parent->ownerhandle->obj->tio.object->tio.BLOCK_CONTROL;",
          "",
          "[Added Lines]",
          "19746:       return block_header->parent->ownerhandle->obj->tio.object->tio",
          "19747:           .BLOCK_CONTROL;",
          "",
          "---------------"
        ],
        "src/dynapi.c||src/dynapi.c": [
          "File: src/dynapi.c -> src/dynapi.c",
          "--- Hunk 1 ---",
          "[Context before]",
          "3841: static const Dwg_DYNAPI_field _dwg_object_object_fields[] = {",
          "3843:   { \"dwg\", \"struct _dwg_struct*\", sizeof (void *), OFF (struct _dwg_object_object,dwg), 1,1,0, 0 },",
          "3844:   { \"eed\", \"Dwg_Eed*\", sizeof (Dwg_Eed*), OFF (struct _dwg_object_object,eed), 1,1,0, 0 },",
          "3845:   { \"handleref\", \"Dwg_Handle*\", sizeof (Dwg_Handle*), OFF (struct _dwg_object_object,handleref), 1,1,0, 0 },",
          "",
          "[Removed Lines]",
          "3842:   { \"datpos\", \"unsigned long int\", sizeof (unsigned long int), OFF (struct _dwg_object_object,datpos), 0,0,0, 0 },",
          "",
          "[Added Lines]",
          "[None]",
          "",
          "---------------"
        ],
        "src/encode.c||src/encode.c": [
          "File: src/encode.c -> src/encode.c",
          "--- Hunk 1 ---",
          "[Context before]",
          "538:     if (error)                                                                \\",
          "539:       return error;",
          "541: #define DWG_ENTITY_END                                                        \\",
          "542:   if (obj->bitsize == 0 && dat->version >= R_13 && dat->version <= R_2010)    \\",
          "543:     {                                                                         \\",
          "544:       unsigned long address = bit_position (dat);                             \\",
          "547:       bit_write_RL (dat, bitsize);                                            \\",
          "548:       bit_set_position (dat, address);                                        \\",
          "550:     }                                                                         \\",
          "551:   return error;                                                               \\",
          "552:   }",
          "",
          "[Removed Lines]",
          "545:       unsigned long bitsize = address - obj->bitsize_address;                 \\",
          "546:       bit_set_position (dat, obj->bitsize_address);                           \\",
          "",
          "[Added Lines]",
          "546:       unsigned long bitsize = address - obj->bitsize_pos;                     \\",
          "547:       bit_set_position (dat, obj->bitsize_pos);                               \\",
          "",
          "---------------",
          "--- Hunk 2 ---",
          "[Context before]",
          "575:   if (obj->bitsize == 0 && dat->version >= R_13 && dat->version <= R_2007)    \\",
          "576:     {                                                                         \\",
          "577:       unsigned long address = bit_position (dat);                             \\",
          "580:       bit_write_RL (dat, bitsize);                                            \\",
          "581:       bit_set_position (dat, address);                                        \\",
          "",
          "[Removed Lines]",
          "578:       unsigned long bitsize = address - obj->bitsize_address;                 \\",
          "579:       bit_set_position (dat, obj->bitsize_address);                           \\",
          "",
          "[Added Lines]",
          "579:       unsigned long bitsize = address - obj->bitsize_pos;                 \\",
          "580:       bit_set_position (dat, obj->bitsize_pos);                           \\",
          "",
          "---------------",
          "--- Hunk 3 ---",
          "[Context before]",
          "1715:   SINCE (R_2007) { *str_dat = *dat; }",
          "1716:   VERSIONS (R_2000, R_2007)",
          "1717:   {",
          "1719:     if (!obj->bitsize)",
          "1720:       bit_write_RL (dat, obj->size * 8);",
          "1721:     else",
          "",
          "[Removed Lines]",
          "1718:     obj->bitsize_address = bit_position (dat);",
          "",
          "[Added Lines]",
          "1719:     obj->bitsize_pos = bit_position (dat);",
          "",
          "---------------",
          "--- Hunk 4 ---",
          "[Context before]",
          "1850:   VERSIONS (R_2000, R_2007)",
          "1851:   {",
          "1853:     if (!obj->bitsize)",
          "1854:       bit_write_RL (dat, obj->size * 8);",
          "1855:     else",
          "",
          "[Removed Lines]",
          "1852:     obj->bitsize_address = bit_position (dat);",
          "",
          "[Added Lines]",
          "1853:     obj->bitsize_pos = bit_position (dat);",
          "",
          "---------------",
          "--- Hunk 5 ---",
          "[Context before]",
          "1872:   VERSIONS (R_13, R_14)",
          "1873:   {",
          "1875:     if (!obj->bitsize)",
          "1876:       bit_write_RL (dat, obj->size * 8);",
          "1877:     else",
          "",
          "[Removed Lines]",
          "1874:     obj->bitsize_address = bit_position (dat);",
          "",
          "[Added Lines]",
          "1875:     obj->bitsize_pos = bit_position (dat);",
          "",
          "---------------"
        ],
        "src/out_dxf.c||src/out_dxf.c": [
          "File: src/out_dxf.c -> src/out_dxf.c",
          "--- Hunk 1 ---",
          "[Context before]",
          "994:       {                                                                       \\",
          "995:         fprintf (dat->fh, \"%3i\\r\\n%lX\\r\\n\", 5, ctrl->handle.value);           \\",
          "996:       }                                                                       \\",
          "998:         VALUE_HANDLE (ctrl->tio.object->ownerhandle, ownerhandle, 3, 330);    \\",
          "999:       }                                                                       \\",
          "1000:     }                                                                         \\",
          "",
          "[Removed Lines]",
          "997:       SINCE (R_14) {                                                          \\",
          "",
          "[Added Lines]",
          "997:       SINCE (R_14)                                                            \\",
          "998:       {                                                                       \\",
          "",
          "---------------"
        ],
        "src/out_dxfb.c||src/out_dxfb.c": [
          "File: src/out_dxfb.c -> src/out_dxfb.c",
          "--- Hunk 1 ---",
          "[Context before]",
          "850:   {                                                                           \\",
          "851:     VALUE_HANDLE (ctrl->tio.object->ownerhandle, ownerhandle, 3, 330);        \\",
          "852:   }                                                                           \\",
          "858: #define COMMON_TABLE_FLAGS(acdbname)                                          \\",
          "",
          "[Removed Lines]",
          "853:   SINCE (R_13)                                                                \\",
          "854:   {                                                                           \\",
          "855:     VALUE_TV (\"AcDbSymbolTable\", 100);                                        \\",
          "856:   }                                                                           \\",
          "",
          "[Added Lines]",
          "853:   SINCE (R_13) { VALUE_TV (\"AcDbSymbolTable\", 100); }",
          "",
          "---------------"
        ],
        "src/out_json.c||src/out_json.c": [
          "File: src/out_json.c -> src/out_json.c",
          "--- Hunk 1 ---",
          "[Context before]",
          "581: #define SECTION_STRING_STREAM",
          "582: #define START_STRING_STREAM",
          "583: #define END_STRING_STREAM",
          "587: static void",
          "588: _prefix (Bit_Chain *dat)",
          "",
          "[Removed Lines]",
          "584: #define START_HANDLE_STREAM \\",
          "585:     KEY (ownerhandle)",
          "",
          "[Added Lines]",
          "584: #define START_HANDLE_STREAM KEY (ownerhandle)",
          "",
          "---------------"
        ],
        "src/spec.h||src/spec.h": [
          "File: src/spec.h -> src/spec.h",
          "--- Hunk 1 ---",
          "[Context before]",
          "235: #ifndef START_OBJECT_HANDLE_STREAM",
          "236: #  define START_OBJECT_HANDLE_STREAM                                          \\",
          "241: #endif",
          "243: #ifndef COMMON_TABLE_FLAGS",
          "",
          "[Removed Lines]",
          "237:   START_HANDLE_STREAM;                                                        \\",
          "238:   VALUE_HANDLE (obj->tio.object->ownerhandle, ownerhandle, 4, 0);             \\",
          "239:   REACTORS(4);                                                                \\",
          "240:   XDICOBJHANDLE(3)",
          "",
          "[Added Lines]",
          "237:     START_HANDLE_STREAM;                                                      \\",
          "238:     VALUE_HANDLE (obj->tio.object->ownerhandle, ownerhandle, 4, 0);           \\",
          "239:     REACTORS (4);                                                             \\",
          "240:     XDICOBJHANDLE (3)",
          "",
          "---------------"
        ]
      }
    }
  ]
}