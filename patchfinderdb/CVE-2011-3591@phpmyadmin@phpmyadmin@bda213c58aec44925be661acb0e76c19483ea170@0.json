{
  "cve_id": "CVE-2011-3591",
  "cve_desc": "Multiple cross-site scripting (XSS) vulnerabilities in phpMyAdmin 3.4.x before 3.4.5 allow remote authenticated users to inject arbitrary web script or HTML via a crafted row that triggers an improperly constructed confirmation message after inline-editing and save operations, related to (1) js/functions.js and (2) js/tbl_structure.js.",
  "repo": "phpmyadmin/phpmyadmin",
  "patch_hash": "bda213c58aec44925be661acb0e76c19483ea170",
  "patch_info": {
    "commit_hash": "bda213c58aec44925be661acb0e76c19483ea170",
    "repo": "phpmyadmin/phpmyadmin",
    "commit_url": "https://github.com/phpmyadmin/phpmyadmin/commit/bda213c58aec44925be661acb0e76c19483ea170",
    "files": [
      "ChangeLog",
      "js/functions.js",
      "js/tbl_structure.js"
    ],
    "message": "Escape HTML in js-generated confirmation messages",
    "before_after_code_files": [
      "js/functions.js||js/functions.js",
      "js/tbl_structure.js||js/tbl_structure.js"
    ]
  },
  "patch_diff": {
    "js/functions.js||js/functions.js": [
      "File: js/functions.js -> js/functions.js",
      "--- Hunk 1 ---",
      "[Context before]",
      "1662:         $(this).PMA_confirm(question, $(this).attr('href') ,function(url) {",
      "",
      "[Removed Lines]",
      "1660:         var question = PMA_messages['strDropDatabaseStrongWarning'] + '\\n' + PMA_messages['strDoYouReally'] + ' :\\n' + 'DROP DATABASE ' + window.parent.db;",
      "",
      "[Added Lines]",
      "1660:         var question = PMA_messages['strDropDatabaseStrongWarning'] + '\\n' + PMA_messages['strDoYouReally'] + ' :\\n' + 'DROP DATABASE ' + escapeHtml(window.parent.db);",
      "",
      "---------------",
      "--- Hunk 2 ---",
      "[Context before]",
      "2288: }) // end of $(document).ready()",
      "",
      "[Removed Lines]",
      "[None]",
      "",
      "[Added Lines]",
      "2293: function escapeHtml(unsafe) {",
      "2294:     return unsafe",
      "2295:         .replace(/&/g, \"&amp;\")",
      "2296:         .replace(/</g, \"&lt;\")",
      "2297:         .replace(/>/g, \"&gt;\")",
      "2298:         .replace(/\"/g, \"&quot;\")",
      "2299:         .replace(/'/g, \"&#039;\");",
      "2300: }",
      "",
      "---------------"
    ],
    "js/tbl_structure.js||js/tbl_structure.js": [
      "File: js/tbl_structure.js -> js/tbl_structure.js",
      "--- Hunk 1 ---",
      "[Context before]",
      "49:         $(this).PMA_confirm(question, $(this).attr('href'), function(url) {",
      "",
      "[Removed Lines]",
      "47:         var question = PMA_messages['strDoYouReally'] + ' :\\n ALTER TABLE `' + curr_table_name + '` DROP `' + curr_column_name + '`';",
      "",
      "[Added Lines]",
      "47:         var question = PMA_messages['strDoYouReally'] + ' :\\n ALTER TABLE `' + escapeHtml(curr_table_name) + '` DROP `' + escapeHtml(curr_column_name) + '`';",
      "",
      "---------------",
      "--- Hunk 2 ---",
      "[Context before]",
      "88:         $(this).PMA_confirm(question, $(this).attr('href'), function(url) {",
      "",
      "[Removed Lines]",
      "86:         var question = PMA_messages['strDoYouReally'] + ' :\\n ALTER TABLE `' + curr_table_name + '` ADD PRIMARY KEY(`' + curr_column_name + '`)';",
      "",
      "[Added Lines]",
      "86:         var question = PMA_messages['strDoYouReally'] + ' :\\n ALTER TABLE `' + escapeHtml(curr_table_name) + '` ADD PRIMARY KEY(`' + escapeHtml(curr_column_name) + '`)';",
      "",
      "---------------"
    ]
  },
  "candidates": [
    {
      "candidate_hash": "03cb36142033f0b2d9fcfe60b83de3e493d73a53",
      "candidate_info": {
        "commit_hash": "03cb36142033f0b2d9fcfe60b83de3e493d73a53",
        "repo": "phpmyadmin/phpmyadmin",
        "commit_url": "https://github.com/phpmyadmin/phpmyadmin/commit/03cb36142033f0b2d9fcfe60b83de3e493d73a53",
        "files": [
          "js/tbl_structure.js",
          "libraries/Index.class.php",
          "pmd_relation_new.php",
          "pmd_relation_upd.php",
          "tbl_addfield.php",
          "tbl_alter.php",
          "tbl_indexes.php",
          "tbl_operations.php",
          "tbl_structure.php"
        ],
        "message": "Add trailing ; after ALTER TABLE (rfe #2009500)",
        "before_after_code_files": [
          "js/tbl_structure.js||js/tbl_structure.js",
          "libraries/Index.class.php||libraries/Index.class.php",
          "pmd_relation_new.php||pmd_relation_new.php",
          "pmd_relation_upd.php||pmd_relation_upd.php",
          "tbl_addfield.php||tbl_addfield.php",
          "tbl_alter.php||tbl_alter.php",
          "tbl_indexes.php||tbl_indexes.php",
          "tbl_operations.php||tbl_operations.php",
          "tbl_structure.php||tbl_structure.php"
        ]
      },
      "candidate_patch_features": {
        "candidate_earlier_than_patch": 0,
        "same_branch_evolution": 1,
        "olp_code_files": {
          "patch": [
            "js/tbl_structure.js||js/tbl_structure.js"
          ],
          "candidate": [
            "js/tbl_structure.js||js/tbl_structure.js"
          ]
        }
      },
      "candidate_diff": {
        "js/tbl_structure.js||js/tbl_structure.js": [
          "File: js/tbl_structure.js -> js/tbl_structure.js",
          "--- Hunk 1 ---",
          "[Context before]",
          "50:         $(this).PMA_confirm(question, $(this).attr('href'), function(url) {",
          "",
          "[Removed Lines]",
          "48:         var question = $.sprintf(PMA_messages['strDoYouReally'], 'ALTER TABLE `' + escapeHtml(curr_table_name) + '` DROP `' + escapeHtml(curr_column_name) + '`');",
          "",
          "[Added Lines]",
          "48:         var question = $.sprintf(PMA_messages['strDoYouReally'], 'ALTER TABLE `' + escapeHtml(curr_table_name) + '` DROP `' + escapeHtml(curr_column_name) + '`;');",
          "",
          "---------------",
          "--- Hunk 2 ---",
          "[Context before]",
          "96:         $(this).PMA_confirm(question, $(this).attr('href'), function(url) {",
          "",
          "[Removed Lines]",
          "94:         var question = $.sprintf(PMA_messages['strDoYouReally'], 'ALTER TABLE `' + escapeHtml(curr_table_name) + '` ADD PRIMARY KEY(`' + escapeHtml(curr_column_name) + '`)');",
          "",
          "[Added Lines]",
          "94:         var question = $.sprintf(PMA_messages['strDoYouReally'], 'ALTER TABLE `' + escapeHtml(curr_table_name) + '` ADD PRIMARY KEY(`' + escapeHtml(curr_column_name) + '`);');",
          "",
          "---------------",
          "--- Hunk 3 ---",
          "[Context before]",
          "626:     if (cur_width > max_width && $table.find(\"td.more_opts\").length != 0) {",
          "628:             && $(\".replaced_by_more:visible\").length > 0) {",
          "",
          "[Removed Lines]",
          "627:         while (cur_width > max_width",
          "",
          "[Added Lines]",
          "627:         while (cur_width > max_width",
          "",
          "---------------"
        ],
        "libraries/Index.class.php||libraries/Index.class.php": [
          "File: libraries/Index.class.php -> libraries/Index.class.php",
          "--- Hunk 1 ---",
          "[Context before]",
          "488:                 $this_params = $GLOBALS['url_params'];",
          "489:                 if ($index->getName() == 'PRIMARY') {",
          "491:                     $this_params['message_to_show'] = __('The primary key has been dropped');",
          "492:                     $js_msg      = PMA_jsFormat('ALTER TABLE ' . $table . ' DROP PRIMARY KEY');",
          "493:                 } else {",
          "495:                     $this_params['message_to_show'] = sprintf(__('Index %s has been dropped'), $index->getName());",
          "497:                 }",
          "499:                 $r .= '<td ' . $row_span . '>';",
          "",
          "[Removed Lines]",
          "490:                     $this_params['sql_query'] = 'ALTER TABLE ' . PMA_backquote($table) . ' DROP PRIMARY KEY';",
          "494:                     $this_params['sql_query'] = 'ALTER TABLE ' . PMA_backquote($table) . ' DROP INDEX ' . PMA_backquote($index->getName());",
          "496:                     $js_msg      = PMA_jsFormat('ALTER TABLE ' . $table . ' DROP INDEX ' . $index->getName());",
          "",
          "[Added Lines]",
          "490:                     $this_params['sql_query'] = 'ALTER TABLE ' . PMA_backquote($table) . ' DROP PRIMARY KEY;';",
          "494:                     $this_params['sql_query'] = 'ALTER TABLE ' . PMA_backquote($table) . ' DROP INDEX ' . PMA_backquote($index->getName()) . ';';",
          "496:                     $js_msg      = PMA_jsFormat('ALTER TABLE ' . $table . ' DROP INDEX ' . $index->getName()) . ';';",
          "",
          "---------------"
        ],
        "pmd_relation_new.php||pmd_relation_new.php": [
          "File: pmd_relation_new.php -> pmd_relation_new.php",
          "--- Hunk 1 ---",
          "[Context before]",
          "57:         if ($on_update != 'nix') {",
          "58:             $upd_query   .= ' ON UPDATE ' . $on_update;",
          "59:         }",
          "60:         PMA_DBI_try_query($upd_query) or PMD_return_new(0, __('Error: Relation not added.'));",
          "61:     PMD_return_new(1, __('FOREIGN KEY relation added'));",
          "62:     }",
          "",
          "[Removed Lines]",
          "[None]",
          "",
          "[Added Lines]",
          "60:         $upd_query .= ';';",
          "",
          "---------------"
        ],
        "pmd_relation_upd.php||pmd_relation_upd.php": [
          "File: pmd_relation_upd.php -> pmd_relation_upd.php",
          "--- Hunk 1 ---",
          "[Context before]",
          "31:     if (isset($existrel_foreign[$F2]['constraint'])) {",
          "32:         $upd_query  = 'ALTER TABLE ' . PMA_backquote($T2)",
          "33:                   . ' DROP FOREIGN KEY '",
          "35:         $upd_rs     = PMA_DBI_query($upd_query);",
          "36:     } else {",
          "",
          "[Removed Lines]",
          "34:                   . PMA_backquote($existrel_foreign[$F2]['constraint']);",
          "",
          "[Added Lines]",
          "34:                   . PMA_backquote($existrel_foreign[$F2]['constraint'])",
          "35:                   . ';';",
          "",
          "---------------"
        ],
        "tbl_addfield.php||tbl_addfield.php": [
          "File: tbl_addfield.php -> tbl_addfield.php",
          "--- Hunk 1 ---",
          "[Context before]",
          "160:     PMA_DBI_select_db($db) or PMA_mysqlDie(PMA_getError(), 'USE ' . PMA_backquotes($db), '', $err_url);",
          "162:     $result = PMA_DBI_try_query($sql_query);",
          "164:     if ($result === true) {",
          "",
          "[Removed Lines]",
          "161:     $sql_query    = 'ALTER TABLE ' . PMA_backquote($table) . ' ' . implode(', ', $definitions);",
          "",
          "[Added Lines]",
          "161:     $sql_query    = 'ALTER TABLE ' . PMA_backquote($table) . ' ' . implode(', ', $definitions) . ';';",
          "",
          "---------------"
        ],
        "tbl_alter.php||tbl_alter.php": [
          "File: tbl_alter.php -> tbl_alter.php",
          "--- Hunk 1 ---",
          "[Context before]",
          "105:     }",
          "106:     $sql_query = 'ALTER TABLE ' . PMA_backquote($table) . ' ';",
          "107:     $sql_query .= implode(', ', $changes) . $key_query;",
          "108:     $result    = PMA_DBI_try_query($sql_query);",
          "110:     if ($result !== false) {",
          "",
          "[Removed Lines]",
          "[None]",
          "",
          "[Added Lines]",
          "108:     $sql_query .= ';';",
          "",
          "---------------"
        ],
        "tbl_indexes.php||tbl_indexes.php": [
          "File: tbl_indexes.php -> tbl_indexes.php",
          "--- Hunk 1 ---",
          "[Context before]",
          "47:     $error = false;",
          "53:     if (! empty($_REQUEST['old_index'])) {",
          "",
          "[Removed Lines]",
          "50:     $sql_query = 'ALTER TABLE ' . PMA_backquote($db) . '.' . PMA_backquote($table);",
          "",
          "[Added Lines]",
          "50:     $sql_query = 'ALTER TABLE ' . PMA_backquote($db) . '.' . PMA_backquote($table) . ';';",
          "",
          "---------------"
        ],
        "tbl_operations.php||tbl_operations.php": [
          "File: tbl_operations.php -> tbl_operations.php",
          "--- Hunk 1 ---",
          "[Context before]",
          "164:     if (count($table_alters) > 0) {",
          "165:         $sql_query      = 'ALTER TABLE ' . PMA_backquote($GLOBALS['table']);",
          "166:         $sql_query     .= \"\\r\\n\" . implode(\"\\r\\n\", $table_alters);",
          "167:         $result        .= PMA_DBI_query($sql_query) ? true : false;",
          "168:         $reread_info    = true;",
          "169:         unset($table_alters);",
          "",
          "[Removed Lines]",
          "[None]",
          "",
          "[Added Lines]",
          "167:         $sql_query     .= ';';",
          "",
          "---------------",
          "--- Hunk 2 ---",
          "[Context before]",
          "191:     if (isset($_REQUEST['order_order']) && $_REQUEST['order_order'] === 'desc') {",
          "192:         $sql_query .= ' DESC';",
          "193:     }",
          "194:     $result = PMA_DBI_query($sql_query);",
          "195: } // end if",
          "",
          "[Removed Lines]",
          "[None]",
          "",
          "[Added Lines]",
          "195:     $sql_query .= ';';",
          "",
          "---------------",
          "--- Hunk 3 ---",
          "[Context before]",
          "200: if (isset($_REQUEST['submit_partition']) && ! empty($_REQUEST['partition_operation'])) {",
          "202:     $result = PMA_DBI_query($sql_query);",
          "203: } // end if",
          "",
          "[Removed Lines]",
          "201:     $sql_query = 'ALTER TABLE ' . PMA_backquote($GLOBALS['table']) . ' ' . $_REQUEST['partition_operation'] . ' PARTITION ' . $_REQUEST['partition_name'];",
          "",
          "[Added Lines]",
          "203:     $sql_query = 'ALTER TABLE ' . PMA_backquote($GLOBALS['table']) . ' ' . $_REQUEST['partition_operation'] . ' PARTITION ' . $_REQUEST['partition_name'] . ';';",
          "",
          "---------------",
          "--- Hunk 4 ---",
          "[Context before]",
          "613:     if ($is_innodb) {",
          "614:         $this_url_params = array_merge(",
          "615:             $url_params,",
          "617:         );",
          "618:         ?>",
          "619:     <li><a class='maintain_action' href=\"sql.php<?php echo PMA_generate_common_url($this_url_params); ?>\">",
          "",
          "[Removed Lines]",
          "616:             array('sql_query' => 'ALTER TABLE ' . PMA_backquote($GLOBALS['table']) . ' ENGINE = InnoDB')",
          "",
          "[Added Lines]",
          "618:             array('sql_query' => 'ALTER TABLE ' . PMA_backquote($GLOBALS['table']) . ' ENGINE = InnoDB;')",
          "",
          "---------------",
          "--- Hunk 5 ---",
          "[Context before]",
          "775:     $this_url_params = array_merge(",
          "776:         $url_params,",
          "777:         array(",
          "779:             )",
          "780:         );",
          "781: ?>",
          "",
          "[Removed Lines]",
          "778:             'sql_query' => 'ALTER TABLE ' . PMA_backquote($GLOBALS['table']) . ' REMOVE PARTITIONING'",
          "",
          "[Added Lines]",
          "780:             'sql_query' => 'ALTER TABLE ' . PMA_backquote($GLOBALS['table']) . ' REMOVE PARTITIONING;'",
          "",
          "---------------"
        ],
        "tbl_structure.php||tbl_structure.php": [
          "File: tbl_structure.php -> tbl_structure.php",
          "--- Hunk 1 ---",
          "[Context before]",
          "349:             <?php echo $titles['Change']; ?></a>",
          "350:     </td>",
          "351:     <td class=\"drop center\">",
          "353:             <?php echo $titles['Drop']; ?></a>",
          "354:     </td>",
          "355:     <?php }",
          "",
          "[Removed Lines]",
          "352:         <a <?php echo ($GLOBALS['cfg']['AjaxEnable'] ? ' class=\"drop_column_anchor\"' : ''); ?> href=\"sql.php?<?php echo $url_query; ?>&amp;sql_query=<?php echo urlencode('ALTER TABLE ' . PMA_backquote($table) . ' DROP ' . PMA_backquote($row['Field'])); ?>&amp;dropped_column=<?php echo urlencode($row['Field']); ?>&amp;message_to_show=<?php echo urlencode(sprintf(__('Column %s has been dropped'), htmlspecialchars($row['Field']))); ?>\" >",
          "",
          "[Added Lines]",
          "352:         <a <?php echo ($GLOBALS['cfg']['AjaxEnable'] ? ' class=\"drop_column_anchor\"' : ''); ?> href=\"sql.php?<?php echo $url_query; ?>&amp;sql_query=<?php echo urlencode('ALTER TABLE ' . PMA_backquote($table) . ' DROP ' . PMA_backquote($row['Field']) . ';'); ?>&amp;dropped_column=<?php echo urlencode($row['Field']); ?>&amp;message_to_show=<?php echo urlencode(sprintf(__('Column %s has been dropped'), htmlspecialchars($row['Field']))); ?>\" >",
          "",
          "---------------",
          "--- Hunk 2 ---",
          "[Context before]",
          "362:         } else {",
          "363:             echo \"\\n\";",
          "364:             ?>",
          "366:             <?php echo $titles['Primary']; ?></a>",
          "367:             <?php $primary_enabled = true;",
          "368:         }",
          "",
          "[Removed Lines]",
          "365:         <a class=\"add_primary_key_anchor\" href=\"sql.php?<?php echo $url_query; ?>&amp;sql_query=<?php echo urlencode('ALTER TABLE ' . PMA_backquote($table) . ($primary ? ' DROP PRIMARY KEY,' : '') . ' ADD PRIMARY KEY(' . PMA_backquote($row['Field']) . ')'); ?>&amp;message_to_show=<?php echo urlencode(sprintf(__('A primary key has been added on %s'), htmlspecialchars($row['Field']))); ?>\" >",
          "",
          "[Added Lines]",
          "365:         <a class=\"add_primary_key_anchor\" href=\"sql.php?<?php echo $url_query; ?>&amp;sql_query=<?php echo urlencode('ALTER TABLE ' . PMA_backquote($table) . ($primary ? ' DROP PRIMARY KEY,' : '') . ' ADD PRIMARY KEY(' . PMA_backquote($row['Field']) . ');'); ?>&amp;message_to_show=<?php echo urlencode(sprintf(__('A primary key has been added on %s'), htmlspecialchars($row['Field']))); ?>\" >",
          "",
          "---------------",
          "--- Hunk 3 ---",
          "[Context before]",
          "377:         } else {",
          "378:             echo \"\\n\";",
          "379:             ?>",
          "381:             <?php echo $titles['Unique']; ?></a>",
          "382:             <?php $unique_enabled = true;",
          "383:         }",
          "",
          "[Removed Lines]",
          "380:         <a href=\"sql.php?<?php echo $url_query; ?>&amp;sql_query=<?php echo urlencode('ALTER TABLE ' . PMA_backquote($table) . ' ADD UNIQUE(' . PMA_backquote($row['Field']) . ')'); ?>&amp;message_to_show=<?php echo urlencode(sprintf(__('An index has been added on %s'), htmlspecialchars($row['Field']))); ?>\">",
          "",
          "[Added Lines]",
          "380:         <a href=\"sql.php?<?php echo $url_query; ?>&amp;sql_query=<?php echo urlencode('ALTER TABLE ' . PMA_backquote($table) . ' ADD UNIQUE(' . PMA_backquote($row['Field']) . ');'); ?>&amp;message_to_show=<?php echo urlencode(sprintf(__('An index has been added on %s'), htmlspecialchars($row['Field']))); ?>\">",
          "",
          "---------------",
          "--- Hunk 4 ---",
          "[Context before]",
          "392:         } else {",
          "393:             echo \"\\n\";",
          "394:             ?>",
          "396:             <?php echo $titles['Index']; ?></a>",
          "397:             <?php",
          "398:             $index_enabled = true;",
          "",
          "[Removed Lines]",
          "395:         <a href=\"sql.php?<?php echo $url_query; ?>&amp;sql_query=<?php echo urlencode('ALTER TABLE ' . PMA_backquote($table) . ' ADD INDEX(' . PMA_backquote($row['Field']) . ')'); ?>&amp;message_to_show=<?php echo urlencode(sprintf(__('An index has been added on %s'), htmlspecialchars($row['Field']))); ?>\">",
          "",
          "[Added Lines]",
          "395:         <a href=\"sql.php?<?php echo $url_query; ?>&amp;sql_query=<?php echo urlencode('ALTER TABLE ' . PMA_backquote($table) . ' ADD INDEX(' . PMA_backquote($row['Field']) . ');'); ?>&amp;message_to_show=<?php echo urlencode(sprintf(__('An index has been added on %s'), htmlspecialchars($row['Field']))); ?>\">",
          "",
          "---------------",
          "--- Hunk 5 ---",
          "[Context before]",
          "415:         } else {",
          "416:             echo \"\\n\";",
          "417:             ?>",
          "419:             <?php echo $titles['Spatial']; ?></a>",
          "420:             <?php",
          "421:             $spatial_enabled = true;",
          "",
          "[Removed Lines]",
          "418:         <a href=\"sql.php?<?php echo $url_query; ?>&amp;sql_query=<?php echo urlencode('ALTER TABLE ' . PMA_backquote($table) . ' ADD SPATIAL(' . PMA_backquote($row['Field']) . ')'); ?>&amp;message_to_show=<?php echo urlencode(sprintf(__('An index has been added on %s'), htmlspecialchars($row['Field']))); ?>\">",
          "",
          "[Added Lines]",
          "418:         <a href=\"sql.php?<?php echo $url_query; ?>&amp;sql_query=<?php echo urlencode('ALTER TABLE ' . PMA_backquote($table) . ' ADD SPATIAL(' . PMA_backquote($row['Field']) . ');'); ?>&amp;message_to_show=<?php echo urlencode(sprintf(__('An index has been added on %s'), htmlspecialchars($row['Field']))); ?>\">",
          "",
          "---------------",
          "--- Hunk 6 ---",
          "[Context before]",
          "430:             echo \"\\n\";",
          "431:             ?>",
          "432:     <td class=\"fulltext replaced_by_more center nowrap\">",
          "434:             <?php echo $titles['IdxFulltext']; ?></a>",
          "435:             <?php $fulltext_enabled = true; ?>",
          "436:     </td>",
          "",
          "[Removed Lines]",
          "433:         <a href=\"sql.php?<?php echo $url_query; ?>&amp;sql_query=<?php echo urlencode('ALTER TABLE ' . PMA_backquote($table) . ' ADD FULLTEXT(' . PMA_backquote($row['Field']) . ')'); ?>&amp;message_to_show=<?php echo urlencode(sprintf(__('An index has been added on %s'), htmlspecialchars($row['Field']))); ?>\">",
          "",
          "[Added Lines]",
          "433:         <a href=\"sql.php?<?php echo $url_query; ?>&amp;sql_query=<?php echo urlencode('ALTER TABLE ' . PMA_backquote($table) . ' ADD FULLTEXT(' . PMA_backquote($row['Field']) . ');'); ?>&amp;message_to_show=<?php echo urlencode(sprintf(__('An index has been added on %s'), htmlspecialchars($row['Field']))); ?>\">",
          "",
          "---------------",
          "--- Hunk 7 ---",
          "[Context before]",
          "458:                 <?php",
          "459:                 if (isset($primary_enabled)) {",
          "460:                      if ($primary_enabled) { ?>",
          "462:                              <?php echo $hidden_titles['Primary']; ?>",
          "463:                          </a>",
          "464:                      <?php",
          "",
          "[Removed Lines]",
          "461:                           <a href=\"sql.php?<?php echo $url_query; ?>&amp;sql_query=<?php echo urlencode('ALTER TABLE ' . PMA_backquote($table) . ($primary ? ' DROP PRIMARY KEY,' : '') . ' ADD PRIMARY KEY(' . PMA_backquote($row['Field']) . ')'); ?>&amp;message_to_show=<?php echo urlencode(sprintf(__('A primary key has been added on %s'), htmlspecialchars($row['Field']))); ?>\">",
          "",
          "[Added Lines]",
          "461:                           <a href=\"sql.php?<?php echo $url_query; ?>&amp;sql_query=<?php echo urlencode('ALTER TABLE ' . PMA_backquote($table) . ($primary ? ' DROP PRIMARY KEY,' : '') . ' ADD PRIMARY KEY(' . PMA_backquote($row['Field']) . ');'); ?>&amp;message_to_show=<?php echo urlencode(sprintf(__('A primary key has been added on %s'), htmlspecialchars($row['Field']))); ?>\">",
          "",
          "---------------",
          "--- Hunk 8 ---",
          "[Context before]",
          "471:                 <?php",
          "472:                 if (isset($unique_enabled)) {",
          "473:                      if ($unique_enabled) { ?>",
          "475:                              <?php echo $hidden_titles['Unique']; ?>",
          "476:                          </a>",
          "477:                      <?php",
          "",
          "[Removed Lines]",
          "474:                          <a href=\"sql.php?<?php echo $url_query; ?>&amp;sql_query=<?php echo urlencode('ALTER TABLE ' . PMA_backquote($table) . ' ADD UNIQUE(' . PMA_backquote($row['Field']) . ')'); ?>&amp;message_to_show=<?php echo urlencode(sprintf(__('An index has been added on %s'), htmlspecialchars($row['Field']))); ?>\">",
          "",
          "[Added Lines]",
          "474:                          <a href=\"sql.php?<?php echo $url_query; ?>&amp;sql_query=<?php echo urlencode('ALTER TABLE ' . PMA_backquote($table) . ' ADD UNIQUE(' . PMA_backquote($row['Field']) . ');'); ?>&amp;message_to_show=<?php echo urlencode(sprintf(__('An index has been added on %s'), htmlspecialchars($row['Field']))); ?>\">",
          "",
          "---------------",
          "--- Hunk 9 ---",
          "[Context before]",
          "484:                <?php",
          "485:                 if (isset($index_enabled)) {",
          "486:                      if ($index_enabled) { ?>",
          "488:                              <?php echo $hidden_titles['Index']; ?>",
          "489:                          </a>",
          "490:                      <?php",
          "",
          "[Removed Lines]",
          "487:                          <a href=\"sql.php?<?php echo $url_query; ?>&amp;sql_query=<?php echo urlencode('ALTER TABLE ' . PMA_backquote($table) . ' ADD INDEX(' . PMA_backquote($row['Field']) . ')'); ?>&amp;message_to_show=<?php echo urlencode(sprintf(__('An index has been added on %s'), htmlspecialchars($row['Field']))); ?>\">",
          "",
          "[Added Lines]",
          "487:                          <a href=\"sql.php?<?php echo $url_query; ?>&amp;sql_query=<?php echo urlencode('ALTER TABLE ' . PMA_backquote($table) . ' ADD INDEX(' . PMA_backquote($row['Field']) . ');'); ?>&amp;message_to_show=<?php echo urlencode(sprintf(__('An index has been added on %s'), htmlspecialchars($row['Field']))); ?>\">",
          "",
          "---------------",
          "--- Hunk 10 ---",
          "[Context before]",
          "498:                 <?php",
          "499:                 if (isset($spatial_enabled)) {",
          "500:                     if ($spatial_enabled) { ?>",
          "502:                             <?php echo $hidden_titles['Spatial']; ?>",
          "503:                         </a>",
          "504:                     <?php",
          "",
          "[Removed Lines]",
          "501:                         <a href=\"sql.php?<?php echo $url_query; ?>&amp;sql_query=<?php echo urlencode('ALTER TABLE ' . PMA_backquote($table) . ' ADD SPATIAL(' . PMA_backquote($row['Field']) . ')'); ?>&amp;message_to_show=<?php echo urlencode(sprintf(__('An index has been added on %s'), htmlspecialchars($row['Field']))); ?>\">",
          "",
          "[Added Lines]",
          "501:                         <a href=\"sql.php?<?php echo $url_query; ?>&amp;sql_query=<?php echo urlencode('ALTER TABLE ' . PMA_backquote($table) . ' ADD SPATIAL(' . PMA_backquote($row['Field']) . ');'); ?>&amp;message_to_show=<?php echo urlencode(sprintf(__('An index has been added on %s'), htmlspecialchars($row['Field']))); ?>\">",
          "",
          "---------------",
          "--- Hunk 11 ---",
          "[Context before]",
          "511:                 <?php",
          "512:                 if (isset($fulltext_enabled)) {",
          "513:                      if ($fulltext_enabled) { ?>",
          "515:                              <?php echo $hidden_titles['IdxFulltext']; ?>",
          "516:                          </a>",
          "517:                      <?php",
          "",
          "[Removed Lines]",
          "514:                          <a href=\"sql.php?<?php echo $url_query; ?>&amp;sql_query=<?php echo urlencode('ALTER TABLE ' . PMA_backquote($table) . ' ADD FULLTEXT(' . PMA_backquote($row['Field']) . ')'); ?>&amp;message_to_show=<?php echo urlencode(sprintf(__('An index has been added on %s'), htmlspecialchars($row['Field']))); ?>\">",
          "",
          "[Added Lines]",
          "514:                          <a href=\"sql.php?<?php echo $url_query; ?>&amp;sql_query=<?php echo urlencode('ALTER TABLE ' . PMA_backquote($table) . ' ADD FULLTEXT(' . PMA_backquote($row['Field']) . ');'); ?>&amp;message_to_show=<?php echo urlencode(sprintf(__('An index has been added on %s'), htmlspecialchars($row['Field']))); ?>\">",
          "",
          "---------------"
        ]
      }
    },
    {
      "candidate_hash": "a3edbfc1b1579d3abaf61f0ba4ed943b2888f13c",
      "candidate_info": {
        "commit_hash": "a3edbfc1b1579d3abaf61f0ba4ed943b2888f13c",
        "repo": "phpmyadmin/phpmyadmin",
        "commit_url": "https://github.com/phpmyadmin/phpmyadmin/commit/a3edbfc1b1579d3abaf61f0ba4ed943b2888f13c",
        "files": [
          "db_structure.php",
          "js/db_structure.js",
          "js/functions.js",
          "js/gis_data_editor.js",
          "js/messages.php",
          "js/server_privileges.js",
          "js/server_status.js",
          "js/tbl_structure.js",
          "libraries/common.inc.php",
          "libraries/mult_submits.inc.php",
          "main.php",
          "tbl_structure.php"
        ],
        "message": "Add parameter to strDoYouReally message for better translatability Include jquery.sprintf.js everywhere",
        "before_after_code_files": [
          "db_structure.php||db_structure.php",
          "js/db_structure.js||js/db_structure.js",
          "js/functions.js||js/functions.js",
          "js/gis_data_editor.js||js/gis_data_editor.js",
          "js/messages.php||js/messages.php",
          "js/server_privileges.js||js/server_privileges.js",
          "js/server_status.js||js/server_status.js",
          "js/tbl_structure.js||js/tbl_structure.js",
          "libraries/common.inc.php||libraries/common.inc.php",
          "libraries/mult_submits.inc.php||libraries/mult_submits.inc.php",
          "main.php||main.php",
          "tbl_structure.php||tbl_structure.php"
        ]
      },
      "candidate_patch_features": {
        "candidate_earlier_than_patch": 0,
        "same_branch_evolution": 1,
        "olp_code_files": {
          "patch": [
            "js/functions.js||js/functions.js",
            "js/tbl_structure.js||js/tbl_structure.js"
          ],
          "candidate": [
            "js/functions.js||js/functions.js",
            "js/tbl_structure.js||js/tbl_structure.js"
          ]
        }
      },
      "candidate_diff": {
        "db_structure.php||db_structure.php": [
          "File: db_structure.php -> db_structure.php",
          "--- Hunk 1 ---",
          "[Context before]",
          "14: $GLOBALS['js_include'][] = 'db_structure.js';",
          "15: $GLOBALS['js_include'][] = 'tbl_change.js';",
          "16: $GLOBALS['js_include'][] = 'jquery/timepicker.js';",
          "",
          "[Removed Lines]",
          "17: $GLOBALS['js_include'][] = 'jquery/jquery.sprintf.js';",
          "",
          "[Added Lines]",
          "[None]",
          "",
          "---------------"
        ],
        "js/db_structure.js||js/db_structure.js": [
          "File: js/db_structure.js -> js/db_structure.js",
          "--- Hunk 1 ---",
          "[Context before]",
          "301:         var question =",
          "302:             PMA_messages.strTruncateTableStrongWarning + ' '",
          "306:         $this_anchor.PMA_confirm(question, $this_anchor.attr('href'), function(url) {",
          "",
          "[Removed Lines]",
          "303:             + PMA_messages.strDoYouReally",
          "304:             + '<br /><br />TRUNCATE ' + curr_table_name;",
          "",
          "[Added Lines]",
          "303:             + $.sprintf(PMA_messages.strDoYouReally, 'TRUNCATE ' + curr_table_name);",
          "",
          "---------------"
        ],
        "js/functions.js||js/functions.js": [
          "File: js/functions.js -> js/functions.js",
          "--- Hunk 1 ---",
          "[Context before]",
          "242:         return true;",
          "243:     }",
          "246:     if (is_confirmed) {",
          "247:         if ( $(theLink).hasClass('formLinkSubmit') ) {",
          "248:             var name = 'is_js_confirmed';",
          "",
          "[Removed Lines]",
          "245:     var is_confirmed = confirm(PMA_messages['strDoYouReally'] + '\\n' + theSqlQuery);",
          "",
          "[Added Lines]",
          "245:     var is_confirmed = confirm($.sprintf(PMA_messages['strDoYouReally'], theSqlQuery));",
          "",
          "---------------",
          "--- Hunk 2 ---",
          "[Context before]",
          "311:         var message      = (sqlQuery1.value.length > 100)",
          "312:                          ? sqlQuery1.value.substr(0, 100) + '\\n    ...'",
          "313:                          : sqlQuery1.value;",
          "",
          "[Removed Lines]",
          "314:         var is_confirmed = confirm(PMA_messages['strDoYouReally'] + '\\n' + message);",
          "",
          "[Added Lines]",
          "314:         var is_confirmed = confirm($.sprintf(PMA_messages['strDoYouReally'], message));",
          "",
          "---------------",
          "--- Hunk 3 ---",
          "[Context before]",
          "2285:         var question =",
          "2286:             PMA_messages.strDropDatabaseStrongWarning + ' '",
          "2290:         $(this).PMA_confirm(question, $(this).attr('href'), function(url) {",
          "",
          "[Removed Lines]",
          "2287:             + PMA_messages.strDoYouReally",
          "2288:             + '<br /><br />DROP DATABASE ' + escapeHtml(window.parent.db);",
          "",
          "[Added Lines]",
          "2287:             + $.sprintf(PMA_messages.strDoYouReally, 'DROP DATABASE ' + escapeHtml(window.parent.db));",
          "",
          "---------------",
          "--- Hunk 4 ---",
          "[Context before]",
          "3347:         var question =",
          "3348:             PMA_messages.strDropTableStrongWarning + ' '",
          "3352:         $(this).PMA_confirm(question, $(this).attr('href'), function(url) {",
          "",
          "[Removed Lines]",
          "3349:             + PMA_messages.strDoYouReally",
          "3350:             + '<br /><br />DROP TABLE ' + window.parent.table;",
          "",
          "[Added Lines]",
          "3348:             + $.sprintf(PMA_messages.strDoYouReally, 'DROP TABLE ' + window.parent.table);",
          "",
          "---------------",
          "--- Hunk 5 ---",
          "[Context before]",
          "3381:         var question =",
          "3382:             PMA_messages.strTruncateTableStrongWarning + ' '",
          "3386:         $(this).PMA_confirm(question, $(this).attr('href'), function(url) {",
          "",
          "[Removed Lines]",
          "3383:             + PMA_messages.strDoYouReally",
          "3384:             + '<br /><br />TRUNCATE ' + window.parent.table;",
          "",
          "[Added Lines]",
          "3381:             + $.sprintf(PMA_messages.strDoYouReally, 'TRUNCATE ' + window.parent.table);",
          "",
          "---------------"
        ],
        "js/gis_data_editor.js||js/gis_data_editor.js": [
          "File: js/gis_data_editor.js -> js/gis_data_editor.js",
          "--- Hunk 1 ---",
          "[Context before]",
          "96:     var smallScripts = [ 'js/jquery/jquery.svg.js',",
          "98:                      'js/jquery/jquery.mousewheel.js',",
          "99:                      'js/jquery/jquery.event.drag-2.0.js',",
          "100:                      'js/tbl_gis_visualization.js' ];",
          "",
          "[Removed Lines]",
          "97:                      'js/jquery/jquery.sprintf.js',",
          "",
          "[Added Lines]",
          "[None]",
          "",
          "---------------"
        ],
        "js/messages.php||js/messages.php": [
          "File: js/messages.php -> js/messages.php",
          "--- Hunk 1 ---",
          "[Context before]",
          "27: $js_messages['strNoDropDatabases'] = $cfg['AllowUserDropDatabase'] ? '' : __('\"DROP DATABASE\" statements are disabled.');",
          "31: $js_messages['strDropDatabaseStrongWarning'] = __('You are about to DESTROY a complete database!');",
          "32: $js_messages['strDropTableStrongWarning'] = __('You are about to DESTROY a complete table!');",
          "33: $js_messages['strTruncateTableStrongWarning'] = __('You are about to TRUNCATE a complete table!');",
          "",
          "[Removed Lines]",
          "30: $js_messages['strDoYouReally'] = __('Do you really want to execute following query?');",
          "",
          "[Added Lines]",
          "30: $js_messages['strDoYouReally'] = __('Do you really want to execute \"%s\"?');",
          "",
          "---------------"
        ],
        "js/server_privileges.js||js/server_privileges.js": [
          "File: js/server_privileges.js -> js/server_privileges.js",
          "--- Hunk 1 ---",
          "[Context before]",
          "594:     $('#checkbox_drop_users_db').click(function() {",
          "595:         var $this_checkbox = $(this);",
          "596:         if ($this_checkbox.is(':checked')) {",
          "598:             if (! is_confirmed) {",
          "599:                 $this_checkbox.prop('checked', false);",
          "600:             }",
          "",
          "[Removed Lines]",
          "597:             var is_confirmed = confirm(PMA_messages['strDropDatabaseStrongWarning'] + '\\n' + PMA_messages['strDoYouReally'] + '\\nDROP DATABASE');",
          "",
          "[Added Lines]",
          "597:             var is_confirmed = confirm(PMA_messages['strDropDatabaseStrongWarning'] + '\\n' + $.sprintf(PMA_messages['strDoYouReally'], 'DROP DATABASE'));",
          "",
          "---------------"
        ],
        "js/server_status.js||js/server_status.js": [
          "File: js/server_status.js -> js/server_status.js",
          "--- Hunk 1 ---",
          "[Context before]",
          "157:                 setTimeout(function() {",
          "158:                     loadJavascript(['js/jquery/timepicker.js', 'js/jquery/jquery.json-2.2.js',",
          "160:                                     'js/codemirror/lib/codemirror.js', 'js/codemirror/mode/mysql/mysql.js',",
          "161:                                     'js/server_status_monitor.js']);",
          "162:                 }, 50);",
          "",
          "[Removed Lines]",
          "159:                                     'js/jquery/jquery.sprintf.js', 'js/jquery/jquery.sortableTable.js',",
          "",
          "[Added Lines]",
          "159:                                     'js/jquery/jquery.sortableTable.js',",
          "",
          "---------------"
        ],
        "js/tbl_structure.js||js/tbl_structure.js": [
          "File: js/tbl_structure.js -> js/tbl_structure.js",
          "--- Hunk 1 ---",
          "[Context before]",
          "52:         $(this).PMA_confirm(question, $(this).attr('href'), function(url) {",
          "",
          "[Removed Lines]",
          "50:         var question = PMA_messages['strDoYouReally'] + '\\n ALTER TABLE `' + escapeHtml(curr_table_name) + '` DROP `' + escapeHtml(curr_column_name) + '`';",
          "",
          "[Added Lines]",
          "50:         var question = $.sprintf(PMA_messages['strDoYouReally'], 'ALTER TABLE `' + escapeHtml(curr_table_name) + '` DROP `' + escapeHtml(curr_column_name) + '`');",
          "",
          "---------------",
          "--- Hunk 2 ---",
          "[Context before]",
          "100:         $(this).PMA_confirm(question, $(this).attr('href'), function(url) {",
          "",
          "[Removed Lines]",
          "98:         var question = PMA_messages['strDoYouReally'] + '\\n ALTER TABLE `' + escapeHtml(curr_table_name) + '` ADD PRIMARY KEY(`' + escapeHtml(curr_column_name) + '`)';",
          "",
          "[Added Lines]",
          "98:         var question = $.sprintf(PMA_messages['strDoYouReally'], 'ALTER TABLE `' + escapeHtml(curr_table_name) + '` ADD PRIMARY KEY(`' + escapeHtml(curr_column_name) + '`)');",
          "",
          "---------------"
        ],
        "libraries/common.inc.php||libraries/common.inc.php": [
          "File: libraries/common.inc.php -> libraries/common.inc.php",
          "--- Hunk 1 ---",
          "[Context before]",
          "564: $GLOBALS['js_include'] = array();",
          "565: $GLOBALS['js_include'][] = 'jquery/jquery-1.7.2.js';",
          "566: $GLOBALS['js_include'][] = 'jquery/jquery-ui-1.8.16.custom.js';",
          "567: $GLOBALS['js_include'][] = 'update-location.js';",
          "",
          "[Removed Lines]",
          "[None]",
          "",
          "[Added Lines]",
          "567: $GLOBALS['js_include'][] = 'jquery/jquery.sprintf.js';",
          "",
          "---------------"
        ],
        "libraries/mult_submits.inc.php||libraries/mult_submits.inc.php": [
          "File: libraries/mult_submits.inc.php -> libraries/mult_submits.inc.php",
          "--- Hunk 1 ---",
          "[Context before]",
          "302:                 if ($what == 'drop_db') {",
          "303:                     echo  __('You are about to DESTROY a complete database!') . '&nbsp;';",
          "304:                 }",
          "306:             ?>:</legend>",
          "307:             <code><?php echo $full_query; ?></code>",
          "308:         </fieldset>",
          "",
          "[Removed Lines]",
          "305:                 echo __('Do you really want to execute following query?');",
          "",
          "[Added Lines]",
          "305:                 echo __('Do you really want to execute the following query?');",
          "",
          "---------------"
        ],
        "main.php||main.php": [
          "File: main.php -> main.php",
          "--- Hunk 1 ---",
          "[Context before]",
          "11: require_once 'libraries/common.inc.php';",
          "13: $GLOBALS['js_include'][] = 'jquery/jquery-ui-1.8.16.custom.js';",
          "17: $GLOBALS['db'] = '';",
          "",
          "[Removed Lines]",
          "14: $GLOBALS['js_include'][] = 'jquery/jquery.sprintf.js';",
          "",
          "[Added Lines]",
          "[None]",
          "",
          "---------------"
        ],
        "tbl_structure.php||tbl_structure.php": [
          "File: tbl_structure.php -> tbl_structure.php"
        ]
      }
    },
    {
      "candidate_hash": "3f545e316a6696d3a73a76002d752e731df0f568",
      "candidate_info": {
        "commit_hash": "3f545e316a6696d3a73a76002d752e731df0f568",
        "repo": "phpmyadmin/phpmyadmin",
        "commit_url": "https://github.com/phpmyadmin/phpmyadmin/commit/3f545e316a6696d3a73a76002d752e731df0f568",
        "files": [
          "js/db_structure.js",
          "js/functions.js"
        ],
        "message": "Fix DoYouReally confirm dialogs",
        "before_after_code_files": [
          "js/db_structure.js||js/db_structure.js",
          "js/functions.js||js/functions.js"
        ]
      },
      "candidate_patch_features": {
        "candidate_earlier_than_patch": 0,
        "same_branch_evolution": 1,
        "olp_code_files": {
          "patch": [
            "js/functions.js||js/functions.js"
          ],
          "candidate": [
            "js/functions.js||js/functions.js"
          ]
        }
      },
      "candidate_diff": {
        "js/db_structure.js||js/db_structure.js": [
          "File: js/db_structure.js -> js/db_structure.js",
          "--- Hunk 1 ---",
          "[Context before]",
          "303:         $this_anchor.PMA_confirm(question, $this_anchor.attr('href'), function(url) {",
          "",
          "[Removed Lines]",
          "301:         var question = 'TRUNCATE ' + curr_table_name;",
          "",
          "[Added Lines]",
          "301:         var question =",
          "302:             PMA_messages.strTruncateTableStrongWarning + ' '",
          "303:             + PMA_messages.strDoYouReally",
          "304:             + '<br /><br />TRUNCATE ' + curr_table_name;",
          "",
          "---------------"
        ],
        "js/functions.js||js/functions.js": [
          "File: js/functions.js -> js/functions.js",
          "--- Hunk 1 ---",
          "[Context before]",
          "2287:         $(this).PMA_confirm(question, $(this).attr('href'), function(url) {",
          "",
          "[Removed Lines]",
          "2285:         var question = PMA_messages['strDropDatabaseStrongWarning'] + '\\n' + PMA_messages['strDoYouReally'] + '\\n' + 'DROP DATABASE ' + escapeHtml(window.parent.db);",
          "",
          "[Added Lines]",
          "2285:         var question =",
          "2286:             PMA_messages.strDropDatabaseStrongWarning + ' '",
          "2287:             + PMA_messages.strDoYouReally",
          "2288:             + '<br /><br />DROP DATABASE ' + escapeHtml(window.parent.db);",
          "",
          "---------------",
          "--- Hunk 2 ---",
          "[Context before]",
          "3346:         $(this).PMA_confirm(question, $(this).attr('href'), function(url) {",
          "",
          "[Removed Lines]",
          "3344:         var question = PMA_messages['strDropTableStrongWarning'] + '\\n' + PMA_messages['strDoYouReally'] + '\\n' + 'DROP TABLE ' + window.parent.table;",
          "",
          "[Added Lines]",
          "3347:         var question =",
          "3348:             PMA_messages.strDropTableStrongWarning + ' '",
          "3349:             + PMA_messages.strDoYouReally",
          "3350:             + '<br /><br />DROP TABLE ' + window.parent.table;",
          "",
          "---------------",
          "--- Hunk 3 ---",
          "[Context before]",
          "3377:         $(this).PMA_confirm(question, $(this).attr('href'), function(url) {",
          "",
          "[Removed Lines]",
          "3375:         var question = PMA_messages['strTruncateTableStrongWarning'] + '\\n' + PMA_messages['strDoYouReally'] + '\\n' + 'TRUNCATE TABLE ' + window.parent.table;",
          "",
          "[Added Lines]",
          "3381:         var question =",
          "3382:             PMA_messages.strTruncateTableStrongWarning + ' '",
          "3383:             + PMA_messages.strDoYouReally",
          "3384:             + '<br /><br />TRUNCATE ' + window.parent.table;",
          "",
          "---------------"
        ]
      }
    },
    {
      "candidate_hash": "a5b5c2e541c4ff5d3721f1870ae610f386530879",
      "candidate_info": {
        "commit_hash": "a5b5c2e541c4ff5d3721f1870ae610f386530879",
        "repo": "phpmyadmin/phpmyadmin",
        "commit_url": "https://github.com/phpmyadmin/phpmyadmin/commit/a5b5c2e541c4ff5d3721f1870ae610f386530879",
        "files": [
          "js/functions.js",
          "js/messages.php",
          "js/server_privileges.js",
          "js/tbl_structure.js",
          "libraries/mult_submits.inc.php",
          "sql.php"
        ],
        "message": "Clearer confirmation of query",
        "before_after_code_files": [
          "js/functions.js||js/functions.js",
          "js/messages.php||js/messages.php",
          "js/server_privileges.js||js/server_privileges.js",
          "js/tbl_structure.js||js/tbl_structure.js",
          "libraries/mult_submits.inc.php||libraries/mult_submits.inc.php",
          "sql.php||sql.php"
        ]
      },
      "candidate_patch_features": {
        "candidate_earlier_than_patch": 0,
        "same_branch_evolution": 1,
        "olp_code_files": {
          "patch": [
            "js/functions.js||js/functions.js",
            "js/tbl_structure.js||js/tbl_structure.js"
          ],
          "candidate": [
            "js/functions.js||js/functions.js",
            "js/tbl_structure.js||js/tbl_structure.js"
          ]
        }
      },
      "candidate_diff": {
        "js/functions.js||js/functions.js": [
          "File: js/functions.js -> js/functions.js",
          "--- Hunk 1 ---",
          "[Context before]",
          "242:         return true;",
          "243:     }",
          "246:     if (is_confirmed) {",
          "247:         if ( $(theLink).hasClass('formLinkSubmit') ) {",
          "248:             var name = 'is_js_confirmed';",
          "",
          "[Removed Lines]",
          "245:     var is_confirmed = confirm(PMA_messages['strDoYouReally'] + ' :\\n' + theSqlQuery);",
          "",
          "[Added Lines]",
          "245:     var is_confirmed = confirm(PMA_messages['strDoYouReally'] + '\\n' + theSqlQuery);",
          "",
          "---------------",
          "--- Hunk 2 ---",
          "[Context before]",
          "311:         var message      = (sqlQuery1.value.length > 100)",
          "312:                          ? sqlQuery1.value.substr(0, 100) + '\\n    ...'",
          "313:                          : sqlQuery1.value;",
          "",
          "[Removed Lines]",
          "314:         var is_confirmed = confirm(PMA_messages['strDoYouReally'] + ' :\\n' + message);",
          "",
          "[Added Lines]",
          "314:         var is_confirmed = confirm(PMA_messages['strDoYouReally'] + '\\n' + message);",
          "",
          "---------------",
          "--- Hunk 3 ---",
          "[Context before]",
          "2273:         $(this).PMA_confirm(question, $(this).attr('href') ,function(url) {",
          "",
          "[Removed Lines]",
          "2271:         var question = PMA_messages['strDropDatabaseStrongWarning'] + '\\n' + PMA_messages['strDoYouReally'] + ' :\\n' + 'DROP DATABASE ' + escapeHtml(window.parent.db);",
          "",
          "[Added Lines]",
          "2271:         var question = PMA_messages['strDropDatabaseStrongWarning'] + '\\n' + PMA_messages['strDoYouReally'] + '\\n' + 'DROP DATABASE ' + escapeHtml(window.parent.db);",
          "",
          "---------------",
          "--- Hunk 4 ---",
          "[Context before]",
          "3337:         $(this).PMA_confirm(question, $(this).attr('href') ,function(url) {",
          "",
          "[Removed Lines]",
          "3335:         var question = PMA_messages['strDropTableStrongWarning'] + '\\n' + PMA_messages['strDoYouReally'] + ' :\\n' + 'DROP TABLE ' + window.parent.table;",
          "",
          "[Added Lines]",
          "3335:         var question = PMA_messages['strDropTableStrongWarning'] + '\\n' + PMA_messages['strDoYouReally'] + '\\n' + 'DROP TABLE ' + window.parent.table;",
          "",
          "---------------",
          "--- Hunk 5 ---",
          "[Context before]",
          "3368:         $(this).PMA_confirm(question, $(this).attr('href') ,function(url) {",
          "",
          "[Removed Lines]",
          "3366:         var question = PMA_messages['strTruncateTableStrongWarning'] + '\\n' + PMA_messages['strDoYouReally'] + ' :\\n' + 'TRUNCATE TABLE ' + window.parent.table;",
          "",
          "[Added Lines]",
          "3366:         var question = PMA_messages['strTruncateTableStrongWarning'] + '\\n' + PMA_messages['strDoYouReally'] + '\\n' + 'TRUNCATE TABLE ' + window.parent.table;",
          "",
          "---------------"
        ],
        "js/messages.php||js/messages.php": [
          "File: js/messages.php -> js/messages.php",
          "--- Hunk 1 ---",
          "[Context before]",
          "27: $js_messages['strNoDropDatabases'] = $cfg['AllowUserDropDatabase'] ? '' : __('\"DROP DATABASE\" statements are disabled.');",
          "31: $js_messages['strDropDatabaseStrongWarning'] = __('You are about to DESTROY a complete database!');",
          "32: $js_messages['strDropTableStrongWarning'] = __('You are about to DESTROY a complete table!');",
          "33: $js_messages['strTruncateTableStrongWarning'] = __('You are about to TRUNCATE a complete table!');",
          "",
          "[Removed Lines]",
          "30: $js_messages['strDoYouReally'] = __('Do you really want to ');",
          "",
          "[Added Lines]",
          "30: $js_messages['strDoYouReally'] = __('Do you really want to execute following query?');",
          "",
          "---------------"
        ],
        "js/server_privileges.js||js/server_privileges.js": [
          "File: js/server_privileges.js -> js/server_privileges.js",
          "--- Hunk 1 ---",
          "[Context before]",
          "541:     $('#checkbox_drop_users_db').click(function() {",
          "542:         $this_checkbox = $(this);",
          "543:         if ($this_checkbox.is(':checked')) {",
          "545:             if (! is_confirmed) {",
          "546:                 $this_checkbox.attr('checked', false);",
          "547:             }",
          "",
          "[Removed Lines]",
          "544:             var is_confirmed = confirm(PMA_messages['strDropDatabaseStrongWarning'] + '\\n' + PMA_messages['strDoYouReally'] + ' :\\nDROP DATABASE');",
          "",
          "[Added Lines]",
          "544:             var is_confirmed = confirm(PMA_messages['strDropDatabaseStrongWarning'] + '\\n' + PMA_messages['strDoYouReally'] + '\\nDROP DATABASE');",
          "",
          "---------------"
        ],
        "js/tbl_structure.js||js/tbl_structure.js": [
          "File: js/tbl_structure.js -> js/tbl_structure.js",
          "--- Hunk 1 ---",
          "[Context before]",
          "52:         $(this).PMA_confirm(question, $(this).attr('href'), function(url) {",
          "",
          "[Removed Lines]",
          "50:         var question = PMA_messages['strDoYouReally'] + ' :\\n ALTER TABLE `' + escapeHtml(curr_table_name) + '` DROP `' + escapeHtml(curr_column_name) + '`';",
          "",
          "[Added Lines]",
          "50:         var question = PMA_messages['strDoYouReally'] + '\\n ALTER TABLE `' + escapeHtml(curr_table_name) + '` DROP `' + escapeHtml(curr_column_name) + '`';",
          "",
          "---------------",
          "--- Hunk 2 ---",
          "[Context before]",
          "100:         $(this).PMA_confirm(question, $(this).attr('href'), function(url) {",
          "",
          "[Removed Lines]",
          "98:         var question = PMA_messages['strDoYouReally'] + ' :\\n ALTER TABLE `' + escapeHtml(curr_table_name) + '` ADD PRIMARY KEY(`' + escapeHtml(curr_column_name) + '`)';",
          "",
          "[Added Lines]",
          "98:         var question = PMA_messages['strDoYouReally'] + '\\n ALTER TABLE `' + escapeHtml(curr_table_name) + '` ADD PRIMARY KEY(`' + escapeHtml(curr_column_name) + '`)';",
          "",
          "---------------"
        ],
        "libraries/mult_submits.inc.php||libraries/mult_submits.inc.php": [
          "File: libraries/mult_submits.inc.php -> libraries/mult_submits.inc.php",
          "--- Hunk 1 ---",
          "[Context before]",
          "289:     <?php",
          "290:         } else { ?>",
          "291:     <fieldset class=\"confirmation\">",
          "293:         <tt><?php echo $full_query; ?></tt>",
          "294:     </fieldset>",
          "295:     <fieldset class=\"tblFooters\">",
          "",
          "[Removed Lines]",
          "292:         <legend><?php echo ($what == 'drop_db' ? __('You are about to DESTROY a complete database!') . '&nbsp;' : '') . __('Do you really want to '); ?>:</legend>",
          "",
          "[Added Lines]",
          "292:         <legend><?php",
          "293:             if ($what == 'drop_db') {",
          "294:                 echo  __('You are about to DESTROY a complete database!') . '&nbsp;';",
          "295:             }",
          "296:             echo __('Do you really want to execute following query?');",
          "297:         ?>:</legend>",
          "",
          "---------------"
        ],
        "sql.php||sql.php": [
          "File: sql.php -> sql.php",
          "--- Hunk 1 ---",
          "[Context before]",
          "383:     <input type=\"hidden\" name=\"show_query\" value=\"<?php echo isset($show_query) ? PMA_sanitize($show_query, true) : ''; ?>\" />",
          "384:     <?php",
          "385:     echo '<fieldset class=\"confirmation\">' . \"\\n\"",
          "387:         .'    <tt>' . htmlspecialchars($stripped_sql_query) . '</tt>' . \"\\n\"",
          "388:         .'</fieldset>' . \"\\n\"",
          "389:         .'<fieldset class=\"tblFooters\">' . \"\\n\";",
          "",
          "[Removed Lines]",
          "386:         .'    <legend>' . __('Do you really want to ') . '</legend>'",
          "",
          "[Added Lines]",
          "386:         .'    <legend>' . __('Do you really want to execute following query?') . '</legend>'",
          "",
          "---------------"
        ]
      }
    }
  ]
}