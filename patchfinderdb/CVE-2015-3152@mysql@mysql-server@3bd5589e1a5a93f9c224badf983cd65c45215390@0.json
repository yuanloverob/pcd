{
  "cve_id": "CVE-2015-3152",
  "cve_desc": "Oracle MySQL before 5.7.3, Oracle MySQL Connector/C (aka libmysqlclient) before 6.1.3, and MariaDB before 5.5.44 use the --ssl option to mean that SSL is optional, which allows man-in-the-middle attackers to spoof servers via a cleartext-downgrade attack, aka a \"BACKRONYM\" attack.",
  "repo": "mysql/mysql-server",
  "patch_hash": "3bd5589e1a5a93f9c224badf983cd65c45215390",
  "patch_info": {
    "commit_hash": "3bd5589e1a5a93f9c224badf983cd65c45215390",
    "repo": "mysql/mysql-server",
    "commit_url": "https://github.com/mysql/mysql-server/commit/3bd5589e1a5a93f9c224badf983cd65c45215390",
    "files": [
      "client/mysql.cc",
      "client/mysql_secure_installation.cc",
      "client/mysql_upgrade.c",
      "client/mysqladmin.cc",
      "client/mysqlbinlog.cc",
      "client/mysqlcheck.c",
      "client/mysqldump.c",
      "client/mysqlimport.c",
      "client/mysqlshow.c",
      "client/mysqlslap.c",
      "client/mysqltest.cc",
      "cmake/mysql_version.cmake",
      "include/mysql.h",
      "include/mysql.h.pp",
      "include/sql_common.h",
      "include/sslopt-case.h",
      "include/sslopt-longopts.h",
      "include/sslopt-vars.h",
      "mysql-test/r/mysql_ssl.result",
      "mysql-test/r/plugin_auth_sha256_server_default_tls.result",
      "mysql-test/r/ssl_cipher.result",
      "mysql-test/t/mysql_ssl-master.opt",
      "mysql-test/t/mysql_ssl.test",
      "mysql-test/t/plugin_auth_sha256_server_default_tls.test",
      "mysql-test/t/ssl_cipher.test",
      "sql-common/client.c",
      "sql-common/client_authentication.cc",
      "sql/rpl_slave.cc",
      "tests/mysql_client_test.c"
    ],
    "message": "WL#6791 : Redefine client --ssl option to imply enforced encryption\n\n# Changed the meaning of the --ssl=1 option of all client binaries\nto mean force ssl, not try ssl and fail over to eunecrypted\n# Added a new MYSQL_OPT_SSL_ENFORCE mysql_options()\noption to specify that an ssl connection is required.\n# Added a new macro SSL_SET_OPTIONS() to the client\nSSL handling headers that sets all the relevant SSL options at \nonce.\n# Revamped all of the current native clients to use the new macro\n# Removed some Windows line endings.\n# Added proper handling of the new option into the ssl helper\nheaders.\n# If SSL is mandatory assume that the media is secure enough \nfor the sha256 plugin to do unencrypted password exchange even\nbefore establishing a connection.\n# Set the default ssl cipher to DHE-RSA-AES256-SHA if none is \nspecified.\n# updated test cases that require a non-default cipher to spawn \na mysql command line tool binary since mysqltest has no support\nfor specifying ciphers.\n# updated the replication slave connection code to always enforce\nSSL if any of the SSL config options is present.\n# test cases added and updated.\n# added a mysql_get_option() API to return mysql_options() \nvalues. Used the new API inside the sha256 plugin.\n# Fixed compilation warnings because of unused variables.\n# Fixed test failures (mysql_ssl and bug13115401)\n# Fixed whitespace issues.\n# Fully implemented the mysql_get_option() function.\n# Added a test case for mysql_get_option()\n# fixed some trailing whitespace issues\n# fixed some uint/int warnings in mysql_client_test.c\n# removed shared memory option from non-windows get_options\n tests\n# moved MYSQL_OPT_LOCAL_INFILE to the uint options",
    "before_after_code_files": [
      "client/mysql.cc||client/mysql.cc",
      "client/mysql_secure_installation.cc||client/mysql_secure_installation.cc",
      "client/mysql_upgrade.c||client/mysql_upgrade.c",
      "client/mysqladmin.cc||client/mysqladmin.cc",
      "client/mysqlbinlog.cc||client/mysqlbinlog.cc",
      "client/mysqlcheck.c||client/mysqlcheck.c",
      "client/mysqldump.c||client/mysqldump.c",
      "client/mysqlimport.c||client/mysqlimport.c",
      "client/mysqlshow.c||client/mysqlshow.c",
      "client/mysqlslap.c||client/mysqlslap.c",
      "client/mysqltest.cc||client/mysqltest.cc",
      "cmake/mysql_version.cmake||cmake/mysql_version.cmake",
      "include/mysql.h||include/mysql.h",
      "include/mysql.h.pp||include/mysql.h.pp",
      "include/sql_common.h||include/sql_common.h",
      "include/sslopt-case.h||include/sslopt-case.h",
      "include/sslopt-longopts.h||include/sslopt-longopts.h",
      "include/sslopt-vars.h||include/sslopt-vars.h",
      "mysql-test/r/mysql_ssl.result||mysql-test/r/mysql_ssl.result",
      "mysql-test/r/plugin_auth_sha256_server_default_tls.result||mysql-test/r/plugin_auth_sha256_server_default_tls.result",
      "mysql-test/r/ssl_cipher.result||mysql-test/r/ssl_cipher.result",
      "mysql-test/t/mysql_ssl-master.opt||mysql-test/t/mysql_ssl-master.opt",
      "mysql-test/t/mysql_ssl.test||mysql-test/t/mysql_ssl.test",
      "mysql-test/t/plugin_auth_sha256_server_default_tls.test||mysql-test/t/plugin_auth_sha256_server_default_tls.test",
      "mysql-test/t/ssl_cipher.test||mysql-test/t/ssl_cipher.test",
      "sql-common/client.c||sql-common/client.c",
      "sql-common/client_authentication.cc||sql-common/client_authentication.cc",
      "sql/rpl_slave.cc||sql/rpl_slave.cc",
      "tests/mysql_client_test.c||tests/mysql_client_test.c"
    ]
  },
  "patch_diff": {
    "client/mysql.cc||client/mysql.cc": [
      "File: client/mysql.cc -> client/mysql.cc",
      "--- Hunk 1 ---",
      "[Context before]",
      "4953:   if (using_opt_local_infile)",
      "4954:     mysql_options(mysql, MYSQL_OPT_LOCAL_INFILE, (char*) &opt_local_infile);",
      "4968:   if (opt_protocol)",
      "4969:     mysql_options(mysql, MYSQL_OPT_PROTOCOL, (char*) &opt_protocol);",
      "",
      "[Removed Lines]",
      "4956: #if defined(HAVE_OPENSSL) && !defined(EMBEDDED_LIBRARY)",
      "4957:   if (opt_use_ssl)",
      "4958:   {",
      "4959:     mysql_ssl_set(mysql, opt_ssl_key, opt_ssl_cert, opt_ssl_ca,",
      "4960:     opt_ssl_capath, opt_ssl_cipher);",
      "4961:     mysql_options(mysql, MYSQL_OPT_SSL_CRL, opt_ssl_crl);",
      "4962:     mysql_options(mysql, MYSQL_OPT_SSL_CRLPATH, opt_ssl_crlpath);",
      "4963:   }",
      "4964:   mysql_options(mysql, MYSQL_OPT_SSL_VERIFY_SERVER_CERT,",
      "4965:                 (char*) &opt_ssl_verify_server_cert);",
      "4966: #endif",
      "",
      "[Added Lines]",
      "4956:   SSL_SET_OPTIONS(mysql);",
      "",
      "---------------"
    ],
    "client/mysql_secure_installation.cc||client/mysql_secure_installation.cc": [
      "File: client/mysql_secure_installation.cc -> client/mysql_secure_installation.cc",
      "--- Hunk 1 ---",
      "[Context before]",
      "158: static void",
      "159: init_connection_options(MYSQL *mysql)",
      "160: {",
      "173:   if (opt_protocol)",
      "174:     mysql_options(mysql, MYSQL_OPT_PROTOCOL, (char*) &opt_protocol);",
      "",
      "[Removed Lines]",
      "161: #if defined(HAVE_OPENSSL) && !defined(EMBEDDED_LIBRARY)",
      "162:   if (opt_use_ssl)",
      "163:   {",
      "164:     mysql_ssl_set(mysql, opt_ssl_key, opt_ssl_cert, opt_ssl_ca,",
      "165:                   opt_ssl_capath, opt_ssl_cipher);",
      "166:     mysql_options(mysql, MYSQL_OPT_SSL_CRL, opt_ssl_crl);",
      "167:     mysql_options(mysql, MYSQL_OPT_SSL_CRLPATH, opt_ssl_crlpath);",
      "168:   }",
      "169:   mysql_options(mysql, MYSQL_OPT_SSL_VERIFY_SERVER_CERT,",
      "170:                 (char*) &opt_ssl_verify_server_cert);",
      "171: #endif",
      "",
      "[Added Lines]",
      "161:   SSL_SET_OPTIONS(mysql);",
      "",
      "---------------"
    ],
    "client/mysql_upgrade.c||client/mysql_upgrade.c": [
      "File: client/mysql_upgrade.c -> client/mysql_upgrade.c",
      "--- Hunk 1 ---",
      "[Context before]",
      "289:     add_option= FALSE;",
      "290:     break;",
      "",
      "[Removed Lines]",
      "[None]",
      "",
      "[Added Lines]",
      "291: #include <sslopt-case.h>",
      "",
      "---------------"
    ],
    "client/mysqladmin.cc||client/mysqladmin.cc": [
      "File: client/mysqladmin.cc -> client/mysqladmin.cc",
      "--- Hunk 1 ---",
      "[Context before]",
      "361:     uint tmp=opt_connect_timeout;",
      "362:     mysql_options(&mysql,MYSQL_OPT_CONNECT_TIMEOUT, (char*) &tmp);",
      "363:   }",
      "375:   if (opt_protocol)",
      "376:     mysql_options(&mysql,MYSQL_OPT_PROTOCOL,(char*)&opt_protocol);",
      "377: #if defined (_WIN32) && !defined (EMBEDDED_LIBRARY)",
      "",
      "[Removed Lines]",
      "364: #ifdef HAVE_OPENSSL",
      "365:   if (opt_use_ssl)",
      "366:   {",
      "367:     mysql_ssl_set(&mysql, opt_ssl_key, opt_ssl_cert, opt_ssl_ca,",
      "368:     opt_ssl_capath, opt_ssl_cipher);",
      "369:     mysql_options(&mysql, MYSQL_OPT_SSL_CRL, opt_ssl_crl);",
      "370:     mysql_options(&mysql, MYSQL_OPT_SSL_CRLPATH, opt_ssl_crlpath);",
      "371:   }",
      "372:   mysql_options(&mysql,MYSQL_OPT_SSL_VERIFY_SERVER_CERT,",
      "373:                 (char*)&opt_ssl_verify_server_cert);",
      "374: #endif",
      "",
      "[Added Lines]",
      "364:   SSL_SET_OPTIONS(&mysql);",
      "",
      "---------------"
    ],
    "client/mysqlbinlog.cc||client/mysqlbinlog.cc": [
      "File: client/mysqlbinlog.cc -> client/mysqlbinlog.cc",
      "--- Hunk 1 ---",
      "[Context before]",
      "1885:     return ERROR_STOP;",
      "1886:   }",
      "1900:   if (opt_plugin_dir && *opt_plugin_dir)",
      "1901:     mysql_options(mysql, MYSQL_PLUGIN_DIR, opt_plugin_dir);",
      "",
      "[Removed Lines]",
      "1888: #ifdef HAVE_OPENSSL",
      "1889:   if (opt_use_ssl)",
      "1890:   {",
      "1891:     mysql_ssl_set(mysql, opt_ssl_key, opt_ssl_cert, opt_ssl_ca,",
      "1892:                   opt_ssl_capath, opt_ssl_cipher);",
      "1893:     mysql_options(mysql, MYSQL_OPT_SSL_CRL, opt_ssl_crl);",
      "1894:     mysql_options(mysql, MYSQL_OPT_SSL_CRLPATH, opt_ssl_crlpath);",
      "1895:   }",
      "1896:   mysql_options(mysql, MYSQL_OPT_SSL_VERIFY_SERVER_CERT,",
      "1897:                 (char*) &opt_ssl_verify_server_cert);",
      "1898: #endif",
      "",
      "[Added Lines]",
      "1888:   SSL_SET_OPTIONS(mysql);",
      "",
      "---------------"
    ],
    "client/mysqlcheck.c||client/mysqlcheck.c": [
      "File: client/mysqlcheck.c -> client/mysqlcheck.c",
      "--- Hunk 1 ---",
      "[Context before]",
      "881:   mysql_init(&mysql_connection);",
      "882:   if (opt_compress)",
      "883:     mysql_options(&mysql_connection, MYSQL_OPT_COMPRESS, NullS);",
      "893:   if (opt_protocol)",
      "894:     mysql_options(&mysql_connection,MYSQL_OPT_PROTOCOL,(char*)&opt_protocol);",
      "895:   if (opt_bind_addr)",
      "",
      "[Removed Lines]",
      "884: #ifdef HAVE_OPENSSL",
      "885:   if (opt_use_ssl)",
      "886:   {",
      "887:     mysql_ssl_set(&mysql_connection, opt_ssl_key, opt_ssl_cert, opt_ssl_ca,",
      "888:     opt_ssl_capath, opt_ssl_cipher);",
      "889:     mysql_options(&mysql_connection, MYSQL_OPT_SSL_CRL, opt_ssl_crl);",
      "890:     mysql_options(&mysql_connection, MYSQL_OPT_SSL_CRLPATH, opt_ssl_crlpath);",
      "891:   }",
      "892: #endif",
      "",
      "[Added Lines]",
      "884:   SSL_SET_OPTIONS(&mysql_connection);",
      "",
      "---------------"
    ],
    "client/mysqldump.c||client/mysqldump.c": [
      "File: client/mysqldump.c -> client/mysqldump.c",
      "--- Hunk 1 ---",
      "[Context before]",
      "1595:   mysql_init(&mysql_connection);",
      "1596:   if (opt_compress)",
      "1597:     mysql_options(&mysql_connection,MYSQL_OPT_COMPRESS,NullS);",
      "1609:   if (opt_protocol)",
      "1610:     mysql_options(&mysql_connection,MYSQL_OPT_PROTOCOL,(char*)&opt_protocol);",
      "1611:   if (opt_bind_addr)",
      "",
      "[Removed Lines]",
      "1598: #ifdef HAVE_OPENSSL",
      "1599:   if (opt_use_ssl)",
      "1600:   {",
      "1601:     mysql_ssl_set(&mysql_connection, opt_ssl_key, opt_ssl_cert, opt_ssl_ca,",
      "1602:                   opt_ssl_capath, opt_ssl_cipher);",
      "1603:     mysql_options(&mysql_connection, MYSQL_OPT_SSL_CRL, opt_ssl_crl);",
      "1604:     mysql_options(&mysql_connection, MYSQL_OPT_SSL_CRLPATH, opt_ssl_crlpath);",
      "1605:   }",
      "1606:   mysql_options(&mysql_connection,MYSQL_OPT_SSL_VERIFY_SERVER_CERT,",
      "1607:                 (char*)&opt_ssl_verify_server_cert);",
      "1608: #endif",
      "",
      "[Added Lines]",
      "1598:   SSL_SET_OPTIONS(&mysql_connection);",
      "",
      "---------------"
    ],
    "client/mysqlimport.c||client/mysqlimport.c": [
      "File: client/mysqlimport.c -> client/mysqlimport.c",
      "--- Hunk 1 ---",
      "[Context before]",
      "420:   if (opt_local_file)",
      "421:     mysql_options(mysql,MYSQL_OPT_LOCAL_INFILE,",
      "422:     (char*) &opt_local_file);",
      "434:   if (opt_protocol)",
      "435:     mysql_options(mysql,MYSQL_OPT_PROTOCOL,(char*)&opt_protocol);",
      "436:   if (opt_bind_addr)",
      "",
      "[Removed Lines]",
      "423: #ifdef HAVE_OPENSSL",
      "424:   if (opt_use_ssl)",
      "425:   {",
      "426:     mysql_ssl_set(mysql, opt_ssl_key, opt_ssl_cert, opt_ssl_ca,",
      "427:     opt_ssl_capath, opt_ssl_cipher);",
      "428:     mysql_options(mysql, MYSQL_OPT_SSL_CRL, opt_ssl_crl);",
      "429:     mysql_options(mysql, MYSQL_OPT_SSL_CRLPATH, opt_ssl_crlpath);",
      "430:   }",
      "431:   mysql_options(mysql,MYSQL_OPT_SSL_VERIFY_SERVER_CERT,",
      "432:                 (char*)&opt_ssl_verify_server_cert);",
      "433: #endif",
      "",
      "[Added Lines]",
      "423:   SSL_SET_OPTIONS(mysql);",
      "",
      "---------------"
    ],
    "client/mysqlshow.c||client/mysqlshow.c": [
      "File: client/mysqlshow.c -> client/mysqlshow.c",
      "--- Hunk 1 ---",
      "[Context before]",
      "117:   mysql_init(&mysql);",
      "118:   if (opt_compress)",
      "119:     mysql_options(&mysql,MYSQL_OPT_COMPRESS,NullS);",
      "131:   if (opt_protocol)",
      "132:     mysql_options(&mysql,MYSQL_OPT_PROTOCOL,(char*)&opt_protocol);",
      "133:   if (opt_bind_addr)",
      "",
      "[Removed Lines]",
      "120: #ifdef HAVE_OPENSSL",
      "121:   if (opt_use_ssl)",
      "122:   {",
      "123:     mysql_ssl_set(&mysql, opt_ssl_key, opt_ssl_cert, opt_ssl_ca,",
      "124:     opt_ssl_capath, opt_ssl_cipher);",
      "125:     mysql_options(&mysql, MYSQL_OPT_SSL_CRL, opt_ssl_crl);",
      "126:     mysql_options(&mysql, MYSQL_OPT_SSL_CRLPATH, opt_ssl_crlpath);",
      "127:   }",
      "128:   mysql_options(&mysql,MYSQL_OPT_SSL_VERIFY_SERVER_CERT,",
      "129:                 (char*)&opt_ssl_verify_server_cert);",
      "130: #endif",
      "",
      "[Added Lines]",
      "120:   SSL_SET_OPTIONS(&mysql);",
      "",
      "---------------"
    ],
    "client/mysqlslap.c||client/mysqlslap.c": [
      "File: client/mysqlslap.c -> client/mysqlslap.c",
      "--- Hunk 1 ---",
      "[Context before]",
      "144: const char *auto_generate_sql_type= \"mixed\";",
      "146: static unsigned long connect_flags= CLIENT_MULTI_RESULTS |",
      "151: static int verbose, delimiter_length;",
      "",
      "[Removed Lines]",
      "147:                                     CLIENT_MULTI_STATEMENTS |",
      "148:                                     CLIENT_REMEMBER_OPTIONS;",
      "",
      "[Added Lines]",
      "147:                                     CLIENT_MULTI_STATEMENTS |",
      "148:                                     CLIENT_REMEMBER_OPTIONS;",
      "",
      "---------------",
      "--- Hunk 2 ---",
      "[Context before]",
      "335:   mysql_init(&mysql);",
      "336:   if (opt_compress)",
      "337:     mysql_options(&mysql,MYSQL_OPT_COMPRESS,NullS);",
      "347:   if (opt_protocol)",
      "348:     mysql_options(&mysql,MYSQL_OPT_PROTOCOL,(char*)&opt_protocol);",
      "349: #if defined (_WIN32) && !defined (EMBEDDED_LIBRARY)",
      "",
      "[Removed Lines]",
      "338: #ifdef HAVE_OPENSSL",
      "339:   if (opt_use_ssl)",
      "340:   {",
      "341:     mysql_ssl_set(&mysql, opt_ssl_key, opt_ssl_cert, opt_ssl_ca,",
      "342:                   opt_ssl_capath, opt_ssl_cipher);",
      "343:     mysql_options(&mysql, MYSQL_OPT_SSL_CRL, opt_ssl_crl);",
      "344:     mysql_options(&mysql, MYSQL_OPT_SSL_CRLPATH, opt_ssl_crlpath);",
      "345:   }",
      "346: #endif",
      "",
      "[Added Lines]",
      "338:   SSL_SET_OPTIONS(&mysql);",
      "",
      "---------------"
    ],
    "client/mysqltest.cc||client/mysqltest.cc": [
      "File: client/mysqltest.cc -> client/mysqltest.cc",
      "--- Hunk 1 ---",
      "[Context before]",
      "5507:   my_bool con_pipe= 0, con_shm= 0, con_cleartext_enable= 0;",
      "5508:   my_bool con_secure_auth= 1;",
      "5509:   struct st_connection* con_slot;",
      "5511:   static DYNAMIC_STRING ds_connection_name;",
      "5512:   static DYNAMIC_STRING ds_host;",
      "",
      "[Removed Lines]",
      "[None]",
      "",
      "[Added Lines]",
      "5510: #if defined(HAVE_OPENSSL) && !defined(EMBEDDED_LIBRARY)",
      "5511:   my_bool save_opt_use_ssl= opt_use_ssl;",
      "5512: #endif",
      "",
      "---------------",
      "--- Hunk 2 ---",
      "[Context before]",
      "5641: #if defined(HAVE_OPENSSL) && !defined(EMBEDDED_LIBRARY)",
      "5642:   if (opt_use_ssl)",
      "5643:     con_ssl= 1;",
      "5647:   {",
      "5655:     opt_ssl_verify_server_cert= !strcmp(ds_host.str, \"localhost\");",
      "5658: #endif",
      "5659: #endif",
      "5662:   if (con_pipe)",
      "5663:   {",
      "",
      "[Removed Lines]",
      "5644: #endif",
      "5646:   if (con_ssl)",
      "5648: #if defined(HAVE_OPENSSL) && !defined(EMBEDDED_LIBRARY)",
      "5649:     mysql_ssl_set(&con_slot->mysql, opt_ssl_key, opt_ssl_cert, opt_ssl_ca,",
      "5650:     opt_ssl_capath, opt_ssl_cipher);",
      "5651:     mysql_options(&con_slot->mysql, MYSQL_OPT_SSL_CRL, opt_ssl_crl);",
      "5652:     mysql_options(&con_slot->mysql, MYSQL_OPT_SSL_CRLPATH, opt_ssl_crlpath);",
      "5653: #if MYSQL_VERSION_ID >= 50000",
      "5656:     mysql_options(&con_slot->mysql, MYSQL_OPT_SSL_VERIFY_SERVER_CERT,",
      "5657:                   &opt_ssl_verify_server_cert);",
      "5660:   }",
      "",
      "[Added Lines]",
      "5648:   opt_use_ssl= con_ssl;",
      "5650:   if (opt_use_ssl)",
      "5654:   }",
      "5655: #else",
      "5657:   con_ssl = con_ssl ? TRUE : FALSE;",
      "5659:   SSL_SET_OPTIONS(&con_slot->mysql);",
      "5660: #if defined(HAVE_OPENSSL) && !defined(EMBEDDED_LIBRARY)",
      "5661:   opt_use_ssl= save_opt_use_ssl;",
      "",
      "---------------",
      "--- Hunk 3 ---",
      "[Context before]",
      "8764:     mysql_options(&con->mysql,MYSQL_OPT_PROTOCOL,(char*)&opt_protocol);",
      "8765: #endif",
      "8769:   if (opt_use_ssl)",
      "8770:   {",
      "8777:     opt_ssl_verify_server_cert= opt_host && !strcmp(opt_host, \"localhost\");",
      "8781:   }",
      "8782: #endif",
      "8784: #if defined (_WIN32) && !defined (EMBEDDED_LIBRARY)",
      "8785:   if (shared_memory_base_name)",
      "",
      "[Removed Lines]",
      "8767: #if defined(HAVE_OPENSSL) && !defined(EMBEDDED_LIBRARY)",
      "8771:     mysql_ssl_set(&con->mysql, opt_ssl_key, opt_ssl_cert, opt_ssl_ca,",
      "8772:     opt_ssl_capath, opt_ssl_cipher);",
      "8773:     mysql_options(&con->mysql, MYSQL_OPT_SSL_CRL, opt_ssl_crl);",
      "8774:     mysql_options(&con->mysql, MYSQL_OPT_SSL_CRLPATH, opt_ssl_crlpath);",
      "8775: #if MYSQL_VERSION_ID >= 50000",
      "8778:     mysql_options(&con->mysql, MYSQL_OPT_SSL_VERIFY_SERVER_CERT,",
      "8779:                   &opt_ssl_verify_server_cert);",
      "8780: #endif",
      "",
      "[Added Lines]",
      "8770: #if defined(HAVE_OPENSSL) && !defined(EMBEDDED_LIBRARY)",
      "8777:   SSL_SET_OPTIONS(&con->mysql);",
      "",
      "---------------"
    ],
    "cmake/mysql_version.cmake||cmake/mysql_version.cmake": [
      "File: cmake/mysql_version.cmake -> cmake/mysql_version.cmake",
      "--- Hunk 1 ---",
      "[Context before]",
      "18: #",
      "20: SET(SHARED_LIB_MAJOR_VERSION \"18\")",
      "22: SET(PROTOCOL_VERSION \"10\")",
      "23: SET(DOT_FRM_VERSION \"6\")",
      "",
      "[Removed Lines]",
      "21: SET(SHARED_LIB_MINOR_VERSION \"1\")",
      "",
      "[Added Lines]",
      "21: SET(SHARED_LIB_MINOR_VERSION \"2\")",
      "",
      "---------------"
    ],
    "include/mysql.h||include/mysql.h": [
      "File: include/mysql.h -> include/mysql.h",
      "--- Hunk 1 ---",
      "[Context before]",
      "159:   MYSQL_OPT_CONNECT_ATTR_DELETE,",
      "160:   MYSQL_SERVER_PUBLIC_KEY,",
      "161:   MYSQL_ENABLE_CLEARTEXT_PLUGIN,",
      "163: };",
      "",
      "[Removed Lines]",
      "162:   MYSQL_OPT_CAN_HANDLE_EXPIRED_PASSWORDS",
      "",
      "[Added Lines]",
      "162:   MYSQL_OPT_CAN_HANDLE_EXPIRED_PASSWORDS,",
      "163:   MYSQL_OPT_SSL_ENFORCE",
      "",
      "---------------",
      "--- Hunk 2 ---",
      "[Context before]",
      "451:           const void *arg);",
      "452: int  STDCALL mysql_options4(MYSQL *mysql,enum mysql_option option,",
      "453:                                        const void *arg1, const void *arg2);",
      "454: void  STDCALL mysql_free_result(MYSQL_RES *result);",
      "455: void  STDCALL mysql_data_seek(MYSQL_RES *result,",
      "456:      my_ulonglong offset);",
      "",
      "[Removed Lines]",
      "[None]",
      "",
      "[Added Lines]",
      "455: int             STDCALL mysql_get_option(MYSQL *mysql, enum mysql_option option,",
      "456:                                          const void *arg);",
      "",
      "---------------"
    ],
    "include/mysql.h.pp||include/mysql.h.pp": [
      "File: include/mysql.h.pp -> include/mysql.h.pp",
      "--- Hunk 1 ---",
      "[Context before]",
      "316:   MYSQL_OPT_CONNECT_ATTR_DELETE,",
      "317:   MYSQL_SERVER_PUBLIC_KEY,",
      "318:   MYSQL_ENABLE_CLEARTEXT_PLUGIN,",
      "320: };",
      "321: struct st_mysql_options_extention;",
      "322: struct st_mysql_options {",
      "",
      "[Removed Lines]",
      "319:   MYSQL_OPT_CAN_HANDLE_EXPIRED_PASSWORDS",
      "",
      "[Added Lines]",
      "319:   MYSQL_OPT_CAN_HANDLE_EXPIRED_PASSWORDS,",
      "320:   MYSQL_OPT_SSL_ENFORCE",
      "",
      "---------------",
      "--- Hunk 2 ---",
      "[Context before]",
      "518:           const void *arg);",
      "519: int mysql_options4(MYSQL *mysql,enum mysql_option option,",
      "520:                                        const void *arg1, const void *arg2);",
      "521: void mysql_free_result(MYSQL_RES *result);",
      "522: void mysql_data_seek(MYSQL_RES *result,",
      "523:      my_ulonglong offset);",
      "",
      "[Removed Lines]",
      "[None]",
      "",
      "[Added Lines]",
      "522: int mysql_get_option(MYSQL *mysql, enum mysql_option option,",
      "523:                                          const void *arg);",
      "",
      "---------------"
    ],
    "include/sql_common.h||include/sql_common.h": [
      "File: include/sql_common.h -> include/sql_common.h",
      "--- Hunk 1 ---",
      "[Context before]",
      "67:   char *server_public_key_path;",
      "68:   size_t connection_attributes_length;",
      "69:   my_bool enable_cleartext_plugin;",
      "70: };",
      "72: typedef struct st_mysql_methods",
      "",
      "[Removed Lines]",
      "[None]",
      "",
      "[Added Lines]",
      "71:   my_bool ssl_enforce;",
      "",
      "---------------"
    ],
    "include/sslopt-case.h||include/sslopt-case.h": [
      "File: include/sslopt-case.h -> include/sslopt-case.h",
      "--- Hunk 1 ---",
      "[Context before]",
      "19: #if defined(HAVE_OPENSSL) && !defined(EMBEDDED_LIBRARY)",
      "20:     case OPT_SSL_KEY:",
      "21:     case OPT_SSL_CERT:",
      "22:     case OPT_SSL_CA:",
      "",
      "[Removed Lines]",
      "[None]",
      "",
      "[Added Lines]",
      "20: #ifdef MYSQL_CLIENT",
      "21:     case OPT_SSL_SSL:",
      "23:         A client side --ssl option handling.",
      "24:         --ssl=1 means enforce (use=1, enforce=1)",
      "25:  --ssl=0 means can't enforce (use=0, enforce=0)",
      "26:  no --ssl means default : no enforce (use=1), just try (enforce=1)",
      "28:       opt_ssl_enforce= opt_use_ssl;",
      "29:       break;",
      "30: #endif",
      "",
      "---------------",
      "--- Hunk 2 ---",
      "[Context before]",
      "28:       Enable use of SSL if we are using any ssl option",
      "29:       One can disable SSL later by using --skip-ssl or --ssl=0",
      "33: #ifdef HAVE_YASSL",
      "34:       opt_ssl_crl= NULL;",
      "",
      "[Removed Lines]",
      "31:       opt_use_ssl= 1;",
      "",
      "[Added Lines]",
      "42:       opt_use_ssl= TRUE;",
      "",
      "---------------"
    ],
    "include/sslopt-longopts.h||include/sslopt-longopts.h": [
      "File: include/sslopt-longopts.h -> include/sslopt-longopts.h",
      "--- Hunk 1 ---",
      "[Context before]",
      "19: #if defined(HAVE_OPENSSL) && !defined(EMBEDDED_LIBRARY)",
      "21:   {\"ssl\", OPT_SSL_SSL,",
      "23:    &opt_use_ssl, &opt_use_ssl, 0, GET_BOOL, OPT_ARG, 0, 0, 0, 0, 0, 0},",
      "24:   {\"ssl-ca\", OPT_SSL_CA,",
      "26:    &opt_ssl_ca, &opt_ssl_ca, 0, GET_STR, REQUIRED_ARG,",
      "27:    0, 0, 0, 0, 0, 0},",
      "28:   {\"ssl-capath\", OPT_SSL_CAPATH,",
      "30:    &opt_ssl_capath, &opt_ssl_capath, 0, GET_STR, REQUIRED_ARG,",
      "31:    0, 0, 0, 0, 0, 0},",
      "33:    &opt_ssl_cert, &opt_ssl_cert, 0, GET_STR, REQUIRED_ARG,",
      "34:    0, 0, 0, 0, 0, 0},",
      "36:    &opt_ssl_cipher, &opt_ssl_cipher, 0, GET_STR, REQUIRED_ARG,",
      "37:    0, 0, 0, 0, 0, 0},",
      "39:    &opt_ssl_key, &opt_ssl_key, 0, GET_STR, REQUIRED_ARG,",
      "40:    0, 0, 0, 0, 0, 0},",
      "42:    &opt_ssl_crl, &opt_ssl_crl, 0, GET_STR, REQUIRED_ARG,",
      "43:    0, 0, 0, 0, 0, 0},",
      "44:   {\"ssl-crlpath\", OPT_SSL_CRLPATH,",
      "46:    &opt_ssl_crlpath, &opt_ssl_crlpath, 0, GET_STR, REQUIRED_ARG,",
      "47:    0, 0, 0, 0, 0, 0},",
      "48: #ifdef MYSQL_CLIENT",
      "",
      "[Removed Lines]",
      "22:    \"Enable SSL for connection (automatically enabled with other flags).\",",
      "25:    \"CA file in PEM format (check OpenSSL docs, implies --ssl).\",",
      "29:    \"CA directory (check OpenSSL docs, implies --ssl).\",",
      "32:   {\"ssl-cert\", OPT_SSL_CERT, \"X509 cert in PEM format (implies --ssl).\",",
      "35:   {\"ssl-cipher\", OPT_SSL_CIPHER, \"SSL cipher to use (implies --ssl).\",",
      "38:   {\"ssl-key\", OPT_SSL_KEY, \"X509 key in PEM format (implies --ssl).\",",
      "41:   {\"ssl-crl\", OPT_SSL_CRL, \"Certificate revocation list (implies --ssl).\",",
      "45:     \"Certificate revocation list path (implies --ssl).\",",
      "",
      "[Added Lines]",
      "22:    \"If set to ON, this option enforces that SSL is established before client \"",
      "23:    \"attempts to authenticate to the server. To disable client SSL capabilities \"",
      "24:    \"use --ssl=OFF.\",",
      "27:    \"CA file in PEM format.\",",
      "31:    \"CA directory.\",",
      "34:   {\"ssl-cert\", OPT_SSL_CERT, \"X509 cert in PEM format.\",",
      "37:   {\"ssl-cipher\", OPT_SSL_CIPHER, \"SSL cipher to use.\",",
      "40:   {\"ssl-key\", OPT_SSL_KEY, \"X509 key in PEM format.\",",
      "43:   {\"ssl-crl\", OPT_SSL_CRL, \"Certificate revocation list.\",",
      "47:     \"Certificate revocation list path.\",",
      "",
      "---------------"
    ],
    "include/sslopt-vars.h||include/sslopt-vars.h": [
      "File: include/sslopt-vars.h -> include/sslopt-vars.h",
      "--- Hunk 1 ---",
      "[Context before]",
      "19: #if defined(HAVE_OPENSSL) && !defined(EMBEDDED_LIBRARY)",
      "21: static char *opt_ssl_ca      = 0;",
      "22: static char *opt_ssl_capath  = 0;",
      "23: static char *opt_ssl_cert    = 0;",
      "",
      "[Removed Lines]",
      "20: static my_bool opt_use_ssl   = 0;",
      "",
      "[Added Lines]",
      "21: static my_bool opt_use_ssl   = TRUE;",
      "23: static my_bool opt_ssl_enforce= FALSE;",
      "",
      "---------------",
      "--- Hunk 2 ---",
      "[Context before]",
      "25: static char *opt_ssl_key     = 0;",
      "26: static char *opt_ssl_crl     = 0;",
      "27: static char *opt_ssl_crlpath = 0;",
      "30: #endif",
      "31: #endif",
      "",
      "[Removed Lines]",
      "28: #ifdef MYSQL_CLIENT",
      "29: static my_bool opt_ssl_verify_server_cert= 0;",
      "",
      "[Added Lines]",
      "31: #ifndef MYSQL_CLIENT",
      "32: #error This header is supposed to be used only in the client",
      "34: #define SSL_SET_OPTIONS(mysql) \\",
      "35:   if (opt_use_ssl) \\",
      "36:   { \\",
      "37:     mysql_ssl_set(mysql, opt_ssl_key, opt_ssl_cert, opt_ssl_ca, \\",
      "38:       opt_ssl_capath, opt_ssl_cipher); \\",
      "39:     mysql_options(mysql, MYSQL_OPT_SSL_CRL, opt_ssl_crl); \\",
      "40:     mysql_options(mysql, MYSQL_OPT_SSL_CRLPATH, opt_ssl_crlpath); \\",
      "41:     mysql_options(mysql, MYSQL_OPT_SSL_ENFORCE, &opt_ssl_enforce); \\",
      "42:   } \\",
      "43:   mysql_options(mysql, MYSQL_OPT_SSL_VERIFY_SERVER_CERT, \\",
      "44:     (char*)&opt_ssl_verify_server_cert)",
      "46: static my_bool opt_ssl_verify_server_cert= 0;",
      "47: #else",
      "48: #define SSL_SET_OPTIONS(mysql) do { } while(0)",
      "",
      "---------------"
    ],
    "mysql-test/r/mysql_ssl.result||mysql-test/r/mysql_ssl.result": [
      "File: mysql-test/r/mysql_ssl.result -> mysql-test/r/mysql_ssl.result",
      "--- Hunk 1 ---",
      "[Context before]",
      "[No context available]",
      "",
      "[Removed Lines]",
      "[None]",
      "",
      "[Added Lines]",
      "1: #",
      "2: # WL#6791 Redefine client --ssl option to imply enforced encryption",
      "3: #",
      "4: # verify that --ssl makes SSL required against a no-ssl server",
      "5: End of 5.7 tests",
      "",
      "---------------"
    ],
    "mysql-test/r/plugin_auth_sha256_server_default_tls.result||mysql-test/r/plugin_auth_sha256_server_default_tls.result": [
      "File: mysql-test/r/plugin_auth_sha256_server_default_tls.result -> mysql-test/r/plugin_auth_sha256_server_default_tls.result",
      "--- Hunk 1 ---",
      "[Context before]",
      "27: USER() CURRENT_USER()",
      "28: kristofer2@localhost kristofer2@localhost",
      "36: user() current_user()",
      "37: kristofer@localhost kristofer@localhost",
      "",
      "[Removed Lines]",
      "30: #### Test is disabled because it requires RSA-keys and this only works",
      "31: #### with OpenSSL. The reason is that the current client library",
      "32: #### framework can't know if SSL was attempted or not when the default",
      "33: #### client auth is switched and hence it will only report that the",
      "34: #### connection is unencrypted.",
      "",
      "[Added Lines]",
      "30: user() current_user()",
      "31: kristofer@localhost kristofer@localhost",
      "",
      "---------------"
    ],
    "mysql-test/r/ssl_cipher.result||mysql-test/r/ssl_cipher.result": [
      "File: mysql-test/r/ssl_cipher.result -> mysql-test/r/ssl_cipher.result",
      "--- Hunk 1 ---",
      "[Context before]",
      "1: #",
      "2: # BUG#11760210 - SSL_CIPHER_LIST NOT SET OR RETURNED FOR \"SHOW STATUS LIKE 'SSL_CIPHER_LIST'\"",
      "3: #",
      "5: Variable_name Value",
      "6: Ssl_cipher AES128-SHA",
      "8: Variable_name Value",
      "9: Ssl_cipher_list AES128-SHA",
      "",
      "[Removed Lines]",
      "4: SHOW STATUS LIKE 'Ssl_cipher';",
      "7: SHOW STATUS LIKE 'Ssl_cipher_list';",
      "",
      "[Added Lines]",
      "4: # must return AES128-SHA",
      "9: # must fail since the default SSL cipher is not compatible",
      "",
      "---------------"
    ],
    "mysql-test/t/mysql_ssl-master.opt||mysql-test/t/mysql_ssl-master.opt": [
      "File: mysql-test/t/mysql_ssl-master.opt -> mysql-test/t/mysql_ssl-master.opt",
      "--- Hunk 1 ---",
      "[Context before]",
      "[No context available]",
      "",
      "[Removed Lines]",
      "[None]",
      "",
      "[Added Lines]",
      "1: --skip-ssl",
      "",
      "---------------"
    ],
    "mysql-test/t/mysql_ssl.test||mysql-test/t/mysql_ssl.test": [
      "File: mysql-test/t/mysql_ssl.test -> mysql-test/t/mysql_ssl.test",
      "--- Hunk 1 ---",
      "[Context before]",
      "[No context available]",
      "",
      "[Removed Lines]",
      "[None]",
      "",
      "[Added Lines]",
      "1: #Want to skip this test from daily Valgrind execution",
      "2: --source include/no_valgrind_without_big.inc",
      "4: # This test should work in embedded server after we fix mysqltest",
      "5: -- source include/not_embedded.inc",
      "7: # Save the initial number of concurrent sessions",
      "8: --source include/count_sessions.inc",
      "10: --echo #",
      "11: --echo # WL#6791 Redefine client --ssl option to imply enforced encryption",
      "12: --echo #",
      "14: --echo # verify that --ssl makes SSL required against a no-ssl server",
      "15: --error 1",
      "16: --exec $MYSQL --ssl -e \"SHOW STATUS like 'Ssl_cipher'\"",
      "19: --echo End of 5.7 tests",
      "22: # Wait till all disconnects are completed",
      "23: --source include/wait_until_count_sessions.inc",
      "25: ##  This test file is for testing encrypted communication only, not other",
      "26: ##  encryption routines that the SSL library happens to provide!",
      "",
      "---------------"
    ],
    "mysql-test/t/plugin_auth_sha256_server_default_tls.test||mysql-test/t/plugin_auth_sha256_server_default_tls.test": [
      "File: mysql-test/t/plugin_auth_sha256_server_default_tls.test -> mysql-test/t/plugin_auth_sha256_server_default_tls.test",
      "--- Hunk 1 ---",
      "[Context before]",
      "36: connection default;",
      "37: disconnect con2;",
      "38: --echo **** Client default_auth=sha_256_password and server default auth=sha256_password",
      "45: --echo **** Client default_auth=native and server default auth=sha256_password",
      "46: --exec $MYSQL -ukristofer -psecret2 --default_auth=mysql_native_password --ssl-ca=$MYSQL_TEST_DIR/std_data/cacert.pem --ssl-key=$MYSQL_TEST_DIR/std_data/client-key.pem --ssl-cert=$MYSQL_TEST_DIR/std_data/client-cert.pem -e \"select user(), current_user()\"",
      "",
      "[Removed Lines]",
      "39: --echo #### Test is disabled because it requires RSA-keys and this only works",
      "40: --echo #### with OpenSSL. The reason is that the current client library",
      "41: --echo #### framework can't know if SSL was attempted or not when the default",
      "42: --echo #### client auth is switched and hence it will only report that the",
      "43: --echo #### connection is unencrypted.",
      "44: # --exec xterm -e gdb --args $MYSQL -ukristofer -psecret2 --default_auth=sha256_password --ssl-ca=$MYSQL_TEST_DIR/std_data/cacert.pem --ssl-key=$MYSQL_TEST_DIR/std_data/client-key.pem --ssl-cert=$MYSQL_TEST_DIR/std_data/client-cert.pem -e \"select user(), current_user()\"",
      "",
      "[Added Lines]",
      "39: # Why using sha256_password requires --ssl=1 ?",
      "40: # The current client library can't know if SSL was attempted or not",
      "41: # when the default client auth is switched and hence it will only report",
      "42: # that the connection is unencrypted forcing the client to ask for RSA keys.",
      "43: # However, it is possible to inform the client library to enforce SSL using",
      "44: # MYSQL_OPT_ENFORCE_SSL (or --ssl=1) and this will be enough for the",
      "45: # sha256_password plugin to safely assume a secure connection despite it hasn't",
      "46: # really been established yet.",
      "47: --exec $MYSQL -ukristofer -psecret2 --default_auth=sha256_password --ssl-ca=$MYSQL_TEST_DIR/std_data/cacert.pem --ssl-key=$MYSQL_TEST_DIR/std_data/client-key.pem --ssl-cert=$MYSQL_TEST_DIR/std_data/client-cert.pem --ssl -e \"select user(), current_user()\"",
      "",
      "---------------"
    ],
    "mysql-test/t/ssl_cipher.test||mysql-test/t/ssl_cipher.test": [
      "File: mysql-test/t/ssl_cipher.test -> mysql-test/t/ssl_cipher.test",
      "--- Hunk 1 ---",
      "[Context before]",
      "3: #but needs to be kept for tests that would need MyISAM in future.",
      "4: --source include/force_myisam_default.inc",
      "6: # Turn on ssl between the client and server",
      "7: # and run a number of tests",
      "",
      "[Removed Lines]",
      "[None]",
      "",
      "[Added Lines]",
      "6: --source include/not_embedded.inc",
      "",
      "---------------",
      "--- Hunk 2 ---",
      "[Context before]",
      "15: # Save the initial number of concurrent sessions",
      "16: --source include/count_sessions.inc",
      "27: # Wait till all disconnects are completed",
      "28: --source include/wait_until_count_sessions.inc",
      "",
      "[Removed Lines]",
      "18: connect (ssl_con,localhost,root,,,,,SSL);",
      "20: # Check Cipher Name and Cipher List",
      "21: SHOW STATUS LIKE 'Ssl_cipher';",
      "22: SHOW STATUS LIKE 'Ssl_cipher_list';",
      "24: connection default;",
      "25: disconnect ssl_con;",
      "",
      "[Added Lines]",
      "20: --echo # must return AES128-SHA",
      "21: # need to use mysql since mysqltest doesn't support --ssl-cipher",
      "22: --exec $MYSQL --host=localhost -e \"SHOW STATUS LIKE 'Ssl_cipher'; SHOW STATUS LIKE 'Ssl_cipher_list'\" --ssl --ssl-cipher=AES128-SHA",
      "25: --echo # must fail since the default SSL cipher is not compatible",
      "26: --error 1",
      "27: --exec $MYSQL --host=localhost -e \"SHOW STATUS LIKE 'Ssl_cipher'; SHOW STATUS LIKE 'Ssl_cipher_list'\" --ssl",
      "",
      "---------------"
    ],
    "sql-common/client.c||sql-common/client.c": [
      "File: sql-common/client.c -> sql-common/client.c",
      "--- Hunk 1 ---",
      "[Context before]",
      "148: uint  mysql_port=0;",
      "149: char  *mysql_unix_port= 0;",
      "150: const char *unknown_sqlstate= \"HY000\";",
      "",
      "[Removed Lines]",
      "[None]",
      "",
      "[Added Lines]",
      "148: const char      *default_ssl_cipher= \"DHE-RSA-AES256-SHA\";",
      "",
      "---------------",
      "--- Hunk 2 ---",
      "[Context before]",
      "1248:                   (STR), MYF(MY_WME)) : NULL;                    \\",
      "1249:     } while (0)",
      "1253:     if (mysql->options.opt_var) \\",
      "1254:       my_free(mysql->options.opt_var); \\",
      "1256:     if (mysql->options.opt_var) \\",
      "1258: #define EXTENSION_SET_SSL_STRING(OPTS, X, STR) \\",
      "1259:     EXTENSION_SET_STRING(OPTS, X, STR); \\",
      "1260:     if ((OPTS)->extension->X) \\",
      "1264: #else",
      "1265: #define SET_SSL_OPTION(opt_var,arg) \\",
      "1266:     do { \\",
      "",
      "[Removed Lines]",
      "1251: #if defined(HAVE_OPENSSL) && !defined(EMBEDDED_LIBRARY)",
      "1252: #define SET_SSL_OPTION(opt_var,arg) \\",
      "1255:     mysql->options.opt_var= arg ? my_strdup(key_memory_mysql_options, arg, MYF(MY_WME)) : NULL; \\",
      "1257:       mysql->options.use_ssl= 1",
      "1261:       (OPTS)->use_ssl= 1",
      "",
      "[Added Lines]",
      "1252: #define SET_OPTION(opt_var,arg) \\",
      "1253:   do { \\",
      "1256:     mysql->options.opt_var = arg ? my_strdup(key_memory_mysql_options, arg, MYF(MY_WME)) : NULL; \\",
      "1257:   } while (0)",
      "1260: #if defined(HAVE_OPENSSL) && !defined(EMBEDDED_LIBRARY)",
      "1261: #define SET_SSL_OPTION(opt_var,arg) \\",
      "1262:   do { \\",
      "1263:     SET_OPTION(opt_var, arg); \\",
      "1265:       mysql->options.use_ssl = TRUE; \\",
      "1266:   } while (0)",
      "1269:   do { \\",
      "1272:       (OPTS)->use_ssl = TRUE; \\",
      "1273:   } while (0)",
      "",
      "---------------",
      "--- Hunk 3 ---",
      "[Context before]",
      "2808:     mysql->client_flag|= CLIENT_MULTI_RESULTS;",
      "2810: #if defined(HAVE_OPENSSL) && !defined(EMBEDDED_LIBRARY)",
      "2811:   if (mysql->options.ssl_key || mysql->options.ssl_cert ||",
      "2812:       mysql->options.ssl_ca || mysql->options.ssl_capath ||",
      "2813:       mysql->options.ssl_cipher ||",
      "2817:   if (mysql->options.use_ssl)",
      "2820:   if (mpvio->db)",
      "2821:     mysql->client_flag|= CLIENT_CONNECT_WITH_DB;",
      "",
      "[Removed Lines]",
      "2814:       (mysql->options.extension && mysql->options.extension->ssl_crl) ||",
      "2815:       (mysql->options.extension && mysql->options.extension->ssl_crlpath))",
      "2816:     mysql->options.use_ssl= 1;",
      "2818:     mysql->client_flag|= CLIENT_SSL;",
      "",
      "[Added Lines]",
      "2825:       (mysql->options.extension && mysql->options.extension->ssl_crl) ||",
      "2826:       (mysql->options.extension && mysql->options.extension->ssl_crlpath) ||",
      "2827:       (mysql->options.extension && mysql->options.extension->ssl_enforce))",
      "2828:     mysql->options.use_ssl = TRUE;",
      "2830:     mysql->client_flag |= CLIENT_SSL;",
      "",
      "---------------",
      "--- Hunk 4 ---",
      "[Context before]",
      "2847:     end= buff+5;",
      "2848:   }",
      "2849: #ifdef HAVE_OPENSSL",
      "2851:   {",
      "2853:     struct st_mysql_options *options= &mysql->options;",
      "",
      "[Removed Lines]",
      "2850:   if (mysql->client_flag & CLIENT_SSL)",
      "",
      "[Added Lines]",
      "2863:   if (mysql->options.extension && mysql->options.extension->ssl_enforce)",
      "2864:   {",
      "2866:       ssl_enforce=1 means enforce ssl",
      "2867:       Don't fallback on unencrypted connection.",
      "2870:     DBUG_ASSERT(mysql->options.use_ssl);",
      "2872:     if (!(mysql->server_capabilities & CLIENT_SSL))",
      "2873:     {",
      "2874:       set_mysql_extended_error(mysql, CR_SSL_CONNECTION_ERROR, unknown_sqlstate,",
      "2875:                                ER(CR_SSL_CONNECTION_ERROR),",
      "2876:                                \"SSL is required but the server doesn't \"",
      "2877:                                \"support it\"",
      "2878:                                );",
      "2879:       goto error;",
      "2880:     }",
      "2881:   }",
      "2885:    use_ssl=0 => Disable ssl and connect using unencrypted channel if server",
      "2886:      allows it",
      "2888:    use_ssl=1, ssl_enforce=0 (default) => attempt ssl connection if possible but",
      "2889:      fallback on unencrypted connection if possible.",
      "2892:   if ((mysql->server_capabilities & CLIENT_SSL) && mysql->options.use_ssl)",
      "",
      "---------------",
      "--- Hunk 5 ---",
      "[Context before]",
      "2856:     const char *cert_error;",
      "2857:     unsigned long ssl_error;",
      "2860:       Send mysql->client_flag, max_packet_size - unencrypted otherwise",
      "2861:       the server does not know we want to do SSL",
      "",
      "[Removed Lines]",
      "[None]",
      "",
      "[Added Lines]",
      "2901:     if (!mysql->options.ssl_cipher)",
      "2902:     {",
      "2903:       SET_OPTION(ssl_cipher, default_ssl_cipher);",
      "2904:     }",
      "",
      "---------------",
      "--- Hunk 6 ---",
      "[Context before]",
      "4728:   case MYSQL_OPT_SSL_CRLPATH:  EXTENSION_SET_SSL_STRING(&mysql->options,",
      "4729:                                                         ssl_crlpath, arg);",
      "4730:                                break;",
      "4731:   case MYSQL_SERVER_PUBLIC_KEY:",
      "4732:     EXTENSION_SET_STRING(&mysql->options, server_public_key_path, arg);",
      "4733:     break;",
      "",
      "[Removed Lines]",
      "[None]",
      "",
      "[Added Lines]",
      "4779:   case MYSQL_OPT_SSL_ENFORCE:  ENSURE_EXTENSIONS_PRESENT(&mysql->options);",
      "4780:                         mysql->options.extension->ssl_enforce=",
      "4781:      (*(my_bool *) arg) ? TRUE : FALSE;",
      "4782:                                mysql->options.use_ssl= TRUE;",
      "4783:                                break;",
      "",
      "---------------",
      "--- Hunk 7 ---",
      "[Context before]",
      "4788: }",
      "4792:   A function to return the key from a connection attribute",
      "",
      "[Removed Lines]",
      "[None]",
      "",
      "[Added Lines]",
      "4845:   Return the current values for the options settable through mysql_options()",
      "4847:   Returns the current values for all of the connection options.",
      "4848:   Callers should not manipulate the returned data !",
      "4849:   Data are valid at the time of returning them until the next C API CALL",
      "4850:   arg should always be a pointer to a variable of the appropriate type.",
      "4851:   type of variable, based on the parameter:",
      "4853:   uint",
      "4854:     MYSQL_OPT_CONNECT_TIMEOUT, MYSQL_OPT_READ_TIMEOUT, MYSQL_OPT_WRITE_TIMEOUT,",
      "4855:     MYSQL_OPT_PROTOCOL",
      "4857:   my_bool",
      "4858:     MYSQL_OPT_COMPRESS, MYSQL_OPT_LOCAL_INFILE, MYSQL_OPT_USE_REMOTE_CONNECTION,",
      "4859:     MYSQL_OPT_USE_EMBEDDED_CONNECTION, MYSQL_OPT_GUESS_CONNECTION,",
      "4860:     MYSQL_SECURE_AUTH, MYSQL_REPORT_DATA_TRUNCATION, MYSQL_OPT_RECONNECT,",
      "4861:     MYSQL_OPT_SSL_VERIFY_SERVER_CERT, MYSQL_OPT_SSL_ENFORCE,",
      "4862:     MYSQL_ENABLE_CLEARTEXT_PLUGIN, MYSQL_OPT_CAN_HANDLE_EXPIRED_PASSWORDS",
      "4864:   const char *",
      "4865:     MYSQL_READ_DEFAULT_FILE, MYSQL_READ_DEFAULT_GROUP,",
      "4866:     MYSQL_SET_CHARSET_DIR, MYSQL_SET_CHARSET_NAME, MYSQL_SHARED_MEMORY_BASE_NAME,",
      "4867:     MYSQL_SET_CLIENT_IP, MYSQL_OPT_BIND, MYSQL_PLUGIN_DIR, MYSQL_DEFAULT_AUTH,",
      "4868:     MYSQL_OPT_SSL_KEY, MYSQL_OPT_SSL_CERT, MYSQL_OPT_SSL_CA, MYSQL_OPT_SSL_CAPATH,",
      "4869:     MYSQL_OPT_SSL_CIPHER, MYSQL_OPT_SSL_CRL, MYSQL_OPT_SSL_CRLPATH,",
      "4870:     MYSQL_SERVER_PUBLIC_KEY",
      "4872:   <none, error returned>",
      "4873:     MYSQL_OPT_NAMED_PIPE, MYSQL_OPT_CONNECT_ATTR_RESET,",
      "4874:     MYSQL_OPT_CONNECT_ATTR_DELETE, MYSQL_INIT_COMMAND",
      "4876:   @param      mysql       The MYSQL connection to operate on",
      "4877:   @param      option      The option to return the value for",
      "4878:   @param  out arg         Must be non-null. Receives the current value.",
      "4879:   @return status",
      "4880:   @retval 0 SUCCESS",
      "4883: int STDCALL",
      "4884: mysql_get_option(MYSQL *mysql, enum mysql_option option, const void *arg)",
      "4885: {",
      "4886:   DBUG_ENTER(\"mysql_option\");",
      "4887:   DBUG_PRINT(\"enter\", (\"option: %d\", (int)option));",
      "4889:   if (!arg)",
      "4890:     DBUG_RETURN(1);",
      "4892:   switch (option) {",
      "4893:   case MYSQL_OPT_CONNECT_TIMEOUT:",
      "4895:     break;",
      "4896:   case MYSQL_OPT_READ_TIMEOUT:",
      "4898:     break;",
      "4899:   case MYSQL_OPT_WRITE_TIMEOUT:",
      "4901:     break;",
      "4902:   case MYSQL_OPT_COMPRESS:",
      "4904:     break;",
      "4907:                     TRUE : FALSE;",
      "4908:     break;",
      "4909:   case MYSQL_READ_DEFAULT_FILE:",
      "4911:     break;",
      "4912:   case MYSQL_READ_DEFAULT_GROUP:",
      "4914:     break;",
      "4915:   case MYSQL_SET_CHARSET_DIR:",
      "4917:     break;",
      "4918:   case MYSQL_SET_CHARSET_NAME:",
      "4920:     break;",
      "4921:   case MYSQL_OPT_PROTOCOL:",
      "4923:     break;",
      "4924:   case MYSQL_SHARED_MEMORY_BASE_NAME:",
      "4925: #if defined (_WIN32) && !defined (EMBEDDED_LIBRARY)",
      "4927: #else",
      "4929: #endif",
      "4930:     break;",
      "4931:   case MYSQL_OPT_USE_REMOTE_CONNECTION:",
      "4933:       (mysql->options.methods_to_use == MYSQL_OPT_USE_REMOTE_CONNECTION) ?",
      "4934:                                         TRUE : FALSE;",
      "4935:     break;",
      "4936:   case MYSQL_OPT_USE_EMBEDDED_CONNECTION:",
      "4938:       (mysql->options.methods_to_use == MYSQL_OPT_USE_EMBEDDED_CONNECTION) ?",
      "4939:     TRUE : FALSE;",
      "4940:     break;",
      "4941:   case MYSQL_OPT_GUESS_CONNECTION:",
      "4943:       (mysql->options.methods_to_use == MYSQL_OPT_GUESS_CONNECTION) ?",
      "4944:     TRUE : FALSE;",
      "4945:     break;",
      "4946:   case MYSQL_SET_CLIENT_IP:",
      "4948:     break;",
      "4949:   case MYSQL_SECURE_AUTH:",
      "4951:     break;",
      "4952:   case MYSQL_REPORT_DATA_TRUNCATION:",
      "4954:     break;",
      "4955:   case MYSQL_OPT_RECONNECT:",
      "4957:     break;",
      "4958:   case MYSQL_OPT_BIND:",
      "4960:     break;",
      "4961:   case MYSQL_OPT_SSL_VERIFY_SERVER_CERT:",
      "4963:                          CLIENT_SSL_VERIFY_SERVER_CERT) ? TRUE : FALSE;",
      "4964:     break;",
      "4965:   case MYSQL_PLUGIN_DIR:",
      "4967:                      mysql->options.extension->plugin_dir : NULL;",
      "4968:     break;",
      "4969:   case MYSQL_DEFAULT_AUTH:",
      "4971:                      mysql->options.extension->default_auth : NULL;",
      "4972:     break;",
      "4973:   case MYSQL_OPT_SSL_KEY:",
      "4975:     break;",
      "4976:   case MYSQL_OPT_SSL_CERT:",
      "4978:     break;",
      "4979:   case MYSQL_OPT_SSL_CA:",
      "4981:     break;",
      "4982:   case MYSQL_OPT_SSL_CAPATH:",
      "4984:     break;",
      "4985:   case MYSQL_OPT_SSL_CIPHER:",
      "4987:     break;",
      "4988:   case MYSQL_OPT_SSL_CRL:",
      "4990:                      mysql->options.extension->ssl_crl : NULL;",
      "4991:     break;",
      "4992:   case MYSQL_OPT_SSL_CRLPATH:",
      "4994:                      mysql->options.extension->ssl_crlpath : NULL;",
      "4995:     break;",
      "4996:   case MYSQL_OPT_SSL_ENFORCE:",
      "4998:                         mysql->options.extension->ssl_enforce) ? TRUE : FALSE;",
      "4999:     break;",
      "5000:   case MYSQL_SERVER_PUBLIC_KEY:",
      "5002:                      mysql->options.extension->server_public_key_path : NULL;",
      "5003:     break;",
      "5004:   case MYSQL_ENABLE_CLEARTEXT_PLUGIN:",
      "5006:                         mysql->options.extension->enable_cleartext_plugin) ?",
      "5007:    TRUE : FALSE;",
      "5008:     break;",
      "5009:   case MYSQL_OPT_CAN_HANDLE_EXPIRED_PASSWORDS:",
      "5011:                        CLIENT_CAN_HANDLE_EXPIRED_PASSWORDS) ? TRUE : FALSE;",
      "5012:     break;",
      "5018:   default:",
      "5019:     DBUG_RETURN(1);",
      "5020:   }",
      "5021:   DBUG_RETURN(0);",
      "5022: }",
      "",
      "---------------"
    ],
    "sql-common/client_authentication.cc||sql-common/client_authentication.cc": [
      "File: sql-common/client_authentication.cc -> sql-common/client_authentication.cc",
      "--- Hunk 1 ---",
      "[Context before]",
      "145:   bool connection_is_secure= false;",
      "146:   unsigned char scramble_pkt[20];",
      "147:   unsigned char *pkt;",
      "150:   DBUG_ENTER(\"sha256_password_auth_client\");",
      "",
      "[Removed Lines]",
      "[None]",
      "",
      "[Added Lines]",
      "148:   my_bool ssl_enforce= FALSE;",
      "",
      "---------------",
      "--- Hunk 2 ---",
      "[Context before]",
      "165:   memcpy(scramble_pkt, pkt, SCRAMBLE_LENGTH);",
      "167:   if (mysql_get_ssl_cipher(mysql) != NULL)",
      "168:     connection_is_secure= true;",
      "171:   if (!connection_is_secure)",
      "172:   {",
      "",
      "[Removed Lines]",
      "[None]",
      "",
      "[Added Lines]",
      "168:   if (mysql_get_option(mysql, MYSQL_OPT_SSL_ENFORCE, &ssl_enforce))",
      "169:     ssl_enforce= FALSE;",
      "174:     If set to the default plugin, then the client and server haven't",
      "175:     attempted a SSL connection yet and there is no way of knowing if this will",
      "176:     be successful later on when encryption is needed.",
      "178:     The only way to be sure that SSL will be established is to check if the",
      "179:     client enforce SSL.",
      "181:     If MYSQL_OPT_ENFORCE_SSL flag isn't set then SSL might be established but",
      "182:     the client will still expect RSA keys from the server and fail if those",
      "183:     aren't available.",
      "185:   else if (ssl_enforce)",
      "186:     connection_is_secure= true; // Safely assume connection will be encrypted",
      "",
      "---------------"
    ],
    "sql/rpl_slave.cc||sql/rpl_slave.cc": [
      "File: sql/rpl_slave.cc -> sql/rpl_slave.cc",
      "--- Hunk 1 ---",
      "[Context before]",
      "6966: #ifdef HAVE_OPENSSL",
      "6967:   if (mi->ssl)",
      "6968:   {",
      "6969:     mysql_ssl_set(mysql,",
      "6970:                   mi->ssl_key[0]?mi->ssl_key:0,",
      "6971:                   mi->ssl_cert[0]?mi->ssl_cert:0,",
      "6972:                   mi->ssl_ca[0]?mi->ssl_ca:0,",
      "6973:                   mi->ssl_capath[0]?mi->ssl_capath:0,",
      "6974:                   mi->ssl_cipher[0]?mi->ssl_cipher:0);",
      "6976:                   mi->ssl_crl[0] ? mi->ssl_crl : 0);",
      "6978:                   mi->ssl_crlpath[0] ? mi->ssl_crlpath : 0);",
      "6979:     mysql_options(mysql, MYSQL_OPT_SSL_VERIFY_SERVER_CERT,",
      "6980:                   &mi->ssl_verify_server_cert);",
      "6981:   }",
      "6982: #endif",
      "",
      "[Removed Lines]",
      "6975:     mysql_options(mysql, MYSQL_OPT_SSL_CRL,",
      "6977:     mysql_options(mysql, MYSQL_OPT_SSL_CRLPATH,",
      "",
      "[Added Lines]",
      "6969:     const static my_bool ssl_enforce_true= TRUE;",
      "6976:     mysql_options(mysql, MYSQL_OPT_SSL_CRL,",
      "6978:     mysql_options(mysql, MYSQL_OPT_SSL_CRLPATH,",
      "6983:     mysql_options(mysql, MYSQL_OPT_SSL_ENFORCE, &ssl_enforce_true);",
      "",
      "---------------"
    ],
    "tests/mysql_client_test.c||tests/mysql_client_test.c": [
      "File: tests/mysql_client_test.c -> tests/mysql_client_test.c",
      "--- Hunk 1 ---",
      "[Context before]",
      "19514:   mysql_stmt_close(stmt);",
      "19515: }",
      "19517: static struct my_tests_st my_tests[]= {",
      "19518:   { \"disable_query_logs\", disable_query_logs },",
      "19519:   { \"test_view_sp_list_fields\", test_view_sp_list_fields },",
      "",
      "[Removed Lines]",
      "[None]",
      "",
      "[Added Lines]",
      "19518: static void test_wl6791()",
      "19519: {",
      "19520:   int        rc;",
      "19521:   uint       idx;",
      "19522:   MYSQL      *l_mysql;",
      "19523:   enum mysql_option",
      "19524:   uint_opts[] = {",
      "19525:     MYSQL_OPT_CONNECT_TIMEOUT, MYSQL_OPT_READ_TIMEOUT, MYSQL_OPT_WRITE_TIMEOUT,",
      "19526:     MYSQL_OPT_PROTOCOL, MYSQL_OPT_LOCAL_INFILE",
      "19527:   },",
      "19528:   my_bool_opts[] = {",
      "19529:     MYSQL_OPT_COMPRESS, MYSQL_OPT_USE_REMOTE_CONNECTION,",
      "19530:     MYSQL_OPT_USE_EMBEDDED_CONNECTION, MYSQL_OPT_GUESS_CONNECTION,",
      "19531:     MYSQL_SECURE_AUTH, MYSQL_REPORT_DATA_TRUNCATION, MYSQL_OPT_RECONNECT,",
      "19532:     MYSQL_OPT_SSL_VERIFY_SERVER_CERT, MYSQL_OPT_SSL_ENFORCE,",
      "19533:     MYSQL_ENABLE_CLEARTEXT_PLUGIN, MYSQL_OPT_CAN_HANDLE_EXPIRED_PASSWORDS",
      "19534:   },",
      "19535:   const_char_opts[] = {",
      "19536:     MYSQL_READ_DEFAULT_FILE, MYSQL_READ_DEFAULT_GROUP,",
      "19537:     MYSQL_SET_CHARSET_DIR, MYSQL_SET_CHARSET_NAME,",
      "19538: #if defined (_WIN32) && !defined (EMBEDDED_LIBRARY)",
      "19540:     MYSQL_SHARED_MEMORY_BASE_NAME,",
      "19541: #endif",
      "19542:     MYSQL_SET_CLIENT_IP, MYSQL_OPT_BIND, MYSQL_PLUGIN_DIR, MYSQL_DEFAULT_AUTH,",
      "19543:     MYSQL_OPT_SSL_KEY, MYSQL_OPT_SSL_CERT, MYSQL_OPT_SSL_CA, MYSQL_OPT_SSL_CAPATH,",
      "19544:     MYSQL_OPT_SSL_CIPHER, MYSQL_OPT_SSL_CRL, MYSQL_OPT_SSL_CRLPATH,",
      "19545:     MYSQL_SERVER_PUBLIC_KEY",
      "19546:   },",
      "19547:   err_opts[] = {",
      "19548:     MYSQL_OPT_NAMED_PIPE, MYSQL_OPT_CONNECT_ATTR_RESET,",
      "19549:     MYSQL_OPT_CONNECT_ATTR_DELETE, MYSQL_INIT_COMMAND",
      "19550:   };",
      "19552:   myheader(\"test_wl6791\");",
      "19555:   l_mysql = mysql_client_init(NULL);",
      "19556:   DIE_UNLESS(l_mysql != NULL);",
      "19558:   for (idx= 0; idx < sizeof(uint_opts) / sizeof(enum mysql_option); idx++)",
      "19559:   {",
      "19560:     uint opt_before= 1, opt_after= 0;",
      "19562:     if (!opt_silent)",
      "19563:       fprintf(stdout, \"testing uint option #%d (%d)\\n\", idx,",
      "19564:               (int) uint_opts[idx]);",
      "19565:     rc= mysql_options(l_mysql, uint_opts[idx], &opt_before);",
      "19566:     DIE_UNLESS(rc == 0);",
      "19568:     rc = mysql_get_option(l_mysql, uint_opts[idx], &opt_after);",
      "19569:     DIE_UNLESS(rc == 0);",
      "19571:     DIE_UNLESS(opt_before == opt_after);",
      "19572:   }",
      "19574:   for (idx= 0; idx < sizeof(my_bool_opts) / sizeof(enum mysql_option); idx++)",
      "19575:   {",
      "19576:     my_bool opt_before = TRUE, opt_after = FALSE;",
      "19578:     if (!opt_silent)",
      "19579:       fprintf(stdout, \"testing my_bool option #%d (%d)\\n\", idx,",
      "19580:       (int)my_bool_opts[idx]);",
      "19582:     rc = mysql_options(l_mysql, my_bool_opts[idx], &opt_before);",
      "19583:     DIE_UNLESS(rc == 0);",
      "19585:     rc = mysql_get_option(l_mysql, my_bool_opts[idx], &opt_after);",
      "19586:     DIE_UNLESS(rc == 0);",
      "19588:     DIE_UNLESS(opt_before == opt_after);",
      "19589:   }",
      "19591:   for (idx= 0; idx < sizeof(const_char_opts) / sizeof(enum mysql_option); idx++)",
      "19592:   {",
      "19593:     const char *opt_before = \"TEST\", *opt_after = NULL;",
      "19595:     if (!opt_silent)",
      "19596:       fprintf(stdout, \"testing const char * option #%d (%d)\\n\", idx,",
      "19597:       (int)const_char_opts[idx]);",
      "19599:     rc = mysql_options(l_mysql, const_char_opts[idx], opt_before);",
      "19600:     DIE_UNLESS(rc == 0);",
      "19602:     rc = mysql_get_option(l_mysql, const_char_opts[idx], &opt_after);",
      "19603:     DIE_UNLESS(rc == 0);",
      "19605:     DIE_UNLESS(opt_before && opt_after &&",
      "19606:                0 == strcmp(opt_before, opt_after));",
      "19607:   }",
      "19609:   for (idx= 0; idx < sizeof(err_opts) / sizeof(enum mysql_option); idx++)",
      "19610:   {",
      "19611:     void *dummy_arg;",
      "19612:     if (!opt_silent)",
      "19613:       fprintf(stdout, \"testing invalid option #%d (%d)\\n\", idx,",
      "19614:       (int)err_opts[idx]);",
      "19616:     rc = mysql_get_option(l_mysql, err_opts[idx], &dummy_arg);",
      "19617:     DIE_UNLESS(rc != 0);",
      "19618:   }",
      "19621:   mysql_close(l_mysql);",
      "19622: }",
      "",
      "---------------",
      "--- Hunk 2 ---",
      "[Context before]",
      "19785:   { \"test_wl6587\", test_wl6587 },",
      "19786:   { \"test_wl5928\", test_wl5928 },",
      "19787:   { \"test_wl6797\", test_wl6797 },",
      "19788:   { 0, 0 }",
      "19789: };",
      "",
      "[Removed Lines]",
      "[None]",
      "",
      "[Added Lines]",
      "19896:   { \"test_wl6791\", test_wl6791 },",
      "",
      "---------------"
    ]
  },
  "candidates": [
    {
      "candidate_hash": "53ab9bcbfb3e2f908e7dcf48d258ec2fc5d47b8c",
      "candidate_info": {
        "commit_hash": "53ab9bcbfb3e2f908e7dcf48d258ec2fc5d47b8c",
        "repo": "mysql/mysql-server",
        "commit_url": "https://github.com/mysql/mysql-server/commit/53ab9bcbfb3e2f908e7dcf48d258ec2fc5d47b8c",
        "files": [
          "client/mysqlbinlog.cc"
        ],
        "message": "WL#7198 Add SSL support for mysqlbinlog Bug#11751199 SUPPORT FOR SSL OPTIONS NOT INCLUDED IN MYSQLBINLOG\n\nProblem:\n=======\nUnlike other client programs (mysqldump, mysqladmin, ...) mysqlbinlog does\nnot support SSL options.\n\nUsers cannot use secure channels to query binlog of a remote server.\n\nAnalysis:\n========\nAll MySQL client tools supporting SSL use the same set of SSL options to\nconfigure SSL support into a MySQL client connection with a given MySQL server.\n\nThe code for supporting these SSL options in command line parameters, for\ncreating SSL options variables (using its defaults) and for handling the SSL\noptions during command line options evaluation already exists and is distributed\nin three include files.\n\nFix:\n===\nIncluded in mysqlbinlog references to sslopt-longopts.h, sslopt-vars.h and\nsslopt-case.h. Also, added the SSL options to the MySQL connection, so the\nclient could effectively use SSL on its connection.",
        "before_after_code_files": [
          "client/mysqlbinlog.cc||client/mysqlbinlog.cc"
        ]
      },
      "candidate_patch_features": {
        "candidate_earlier_than_patch": 1,
        "same_branch_evolution": 1,
        "olp_code_files": {
          "patch": [
            "client/mysqlbinlog.cc||client/mysqlbinlog.cc"
          ],
          "candidate": [
            "client/mysqlbinlog.cc||client/mysqlbinlog.cc"
          ]
        }
      },
      "candidate_diff": {
        "client/mysqlbinlog.cc||client/mysqlbinlog.cc": [
          "File: client/mysqlbinlog.cc -> client/mysqlbinlog.cc",
          "--- Hunk 1 ---",
          "[Context before]",
          "33: #include \"client_priv.h\"",
          "34: #include \"my_default.h\"",
          "35: #include <my_time.h>",
          "37: #include \"sql_priv.h\"",
          "38: #include <signal.h>",
          "",
          "[Removed Lines]",
          "[None]",
          "",
          "[Added Lines]",
          "36: #include <sslopt-vars.h>",
          "",
          "---------------",
          "--- Hunk 2 ---",
          "[Context before]",
          "1528:   {\"socket\", 'S', \"The socket file to use for connection.\",",
          "1529:    &sock, &sock, 0, GET_STR, REQUIRED_ARG, 0, 0, 0, 0,",
          "1530:    0, 0},",
          "1531:   {\"start-datetime\", OPT_START_DATETIME,",
          "1532:    \"Start reading the binlog at first event having a datetime equal or \"",
          "1533:    \"posterior to the argument; the argument must be a date and time \"",
          "",
          "[Removed Lines]",
          "[None]",
          "",
          "[Added Lines]",
          "1532: #include <sslopt-longopts.h>",
          "",
          "---------------",
          "--- Hunk 3 ---",
          "[Context before]",
          "1756:     DBUG_PUSH(argument ? argument : default_dbug_option);",
          "1757:     break;",
          "1758: #endif",
          "1759:   case 'd':",
          "1760:     one_database = 1;",
          "1761:     break;",
          "",
          "[Removed Lines]",
          "[None]",
          "",
          "[Added Lines]",
          "1761: #include <sslopt-case.h>",
          "",
          "---------------",
          "--- Hunk 4 ---",
          "[Context before]",
          "1882:     return ERROR_STOP;",
          "1883:   }",
          "1885:   if (opt_plugin_dir && *opt_plugin_dir)",
          "1886:     mysql_options(mysql, MYSQL_PLUGIN_DIR, opt_plugin_dir);",
          "",
          "[Removed Lines]",
          "[None]",
          "",
          "[Added Lines]",
          "1888: #ifdef HAVE_OPENSSL",
          "1889:   if (opt_use_ssl)",
          "1890:   {",
          "1891:     mysql_ssl_set(mysql, opt_ssl_key, opt_ssl_cert, opt_ssl_ca,",
          "1892:                   opt_ssl_capath, opt_ssl_cipher);",
          "1893:     mysql_options(mysql, MYSQL_OPT_SSL_CRL, opt_ssl_crl);",
          "1894:     mysql_options(mysql, MYSQL_OPT_SSL_CRLPATH, opt_ssl_crlpath);",
          "1895:   }",
          "1896:   mysql_options(mysql, MYSQL_OPT_SSL_VERIFY_SERVER_CERT,",
          "1897:                 (char*) &opt_ssl_verify_server_cert);",
          "1898: #endif",
          "",
          "---------------"
        ]
      }
    },
    {
      "candidate_hash": "955fa660eb08537a1eec10875eff79bcf5bbc7cd",
      "candidate_info": {
        "commit_hash": "955fa660eb08537a1eec10875eff79bcf5bbc7cd",
        "repo": "mysql/mysql-server",
        "commit_url": "https://github.com/mysql/mysql-server/commit/955fa660eb08537a1eec10875eff79bcf5bbc7cd",
        "files": [
          "client/mysqladmin.cc",
          "client/mysqldump.c",
          "mysql-test/r/plugin_auth.result",
          "mysql-test/t/plugin_auth.test"
        ],
        "message": "Merging from mysql-5.5-bugteam.",
        "before_after_code_files": [
          "client/mysqladmin.cc||client/mysqladmin.cc",
          "client/mysqldump.c||client/mysqldump.c",
          "mysql-test/r/plugin_auth.result||mysql-test/r/plugin_auth.result",
          "mysql-test/t/plugin_auth.test||mysql-test/t/plugin_auth.test"
        ]
      },
      "candidate_patch_features": {
        "candidate_earlier_than_patch": 1,
        "same_branch_evolution": 1,
        "olp_code_files": {
          "patch": [
            "client/mysqladmin.cc||client/mysqladmin.cc",
            "client/mysqldump.c||client/mysqldump.c"
          ],
          "candidate": [
            "client/mysqladmin.cc||client/mysqladmin.cc",
            "client/mysqldump.c||client/mysqldump.c"
          ]
        }
      },
      "candidate_diff": {
        "client/mysqladmin.cc||client/mysqladmin.cc": [
          "File: client/mysqladmin.cc -> client/mysqladmin.cc",
          "--- Hunk 1 ---",
          "[Context before]",
          "45: static char *opt_bind_addr = NULL;",
          "46: static ulong opt_connect_timeout, opt_shutdown_timeout;",
          "47: static char * unix_port=0;",
          "49: #ifdef HAVE_SMEM",
          "50: static char *shared_memory_base_name=0;",
          "",
          "[Removed Lines]",
          "[None]",
          "",
          "[Added Lines]",
          "48: static char *opt_plugin_dir= 0, *opt_default_auth;",
          "",
          "---------------",
          "--- Hunk 2 ---",
          "[Context before]",
          "210:   {\"shutdown_timeout\", OPT_SHUTDOWN_TIMEOUT, \"\", &opt_shutdown_timeout,",
          "211:    &opt_shutdown_timeout, 0, GET_ULONG, REQUIRED_ARG,",
          "212:    SHUTDOWN_DEF_TIMEOUT, 0, 3600*12, 0, 1, 0},",
          "213:   { 0, 0, 0, 0, 0, 0, GET_NO_ARG, NO_ARG, 0, 0, 0, 0, 0, 0}",
          "214: };",
          "",
          "[Removed Lines]",
          "[None]",
          "",
          "[Added Lines]",
          "214:   {\"plugin_dir\", OPT_PLUGIN_DIR, \"Directory for client-side plugins.\",",
          "215:    (uchar**) &opt_plugin_dir, (uchar**) &opt_plugin_dir, 0,",
          "216:    GET_STR, REQUIRED_ARG, 0, 0, 0, 0, 0, 0},",
          "217:   {\"default_auth\", OPT_PLUGIN_DIR,",
          "218:    \"Default authentication client-side plugin to use.\",",
          "219:    (uchar**) &opt_default_auth, (uchar**) &opt_default_auth, 0,",
          "220:    GET_STR, REQUIRED_ARG, 0, 0, 0, 0, 0, 0},",
          "",
          "---------------",
          "--- Hunk 3 ---",
          "[Context before]",
          "348:   mysql_options(&mysql, MYSQL_SET_CHARSET_NAME, default_charset);",
          "349:   error_flags= (myf)(opt_nobeep ? 0 : ME_BELL);",
          "351:   if (sql_connect(&mysql, option_wait))",
          "352:   {",
          "",
          "[Removed Lines]",
          "[None]",
          "",
          "[Added Lines]",
          "359:   if (opt_plugin_dir && *opt_plugin_dir)",
          "360:     mysql_options(&mysql, MYSQL_PLUGIN_DIR, opt_plugin_dir);",
          "362:   if (opt_default_auth && *opt_default_auth)",
          "363:     mysql_options(&mysql, MYSQL_DEFAULT_AUTH, opt_default_auth);",
          "",
          "---------------"
        ],
        "client/mysqldump.c||client/mysqldump.c": [
          "File: client/mysqldump.c -> client/mysqldump.c",
          "--- Hunk 1 ---",
          "[Context before]",
          "138: static char *shared_memory_base_name=0;",
          "139: #endif",
          "140: static uint opt_protocol= 0;",
          "143: Dynamic_string wrapper functions. In this file use these",
          "",
          "[Removed Lines]",
          "[None]",
          "",
          "[Added Lines]",
          "141: static char *opt_plugin_dir= 0, *opt_default_auth;",
          "",
          "---------------",
          "--- Hunk 2 ---",
          "[Context before]",
          "506:    &where, &where, 0, GET_STR, REQUIRED_ARG, 0, 0, 0, 0, 0, 0},",
          "507:   {\"xml\", 'X', \"Dump a database as well formed XML.\", 0, 0, 0, GET_NO_ARG,",
          "508:    NO_ARG, 0, 0, 0, 0, 0, 0},",
          "509:   {0, 0, 0, 0, 0, 0, GET_NO_ARG, NO_ARG, 0, 0, 0, 0, 0, 0}",
          "510: };",
          "",
          "[Removed Lines]",
          "[None]",
          "",
          "[Added Lines]",
          "510:   {\"plugin_dir\", OPT_PLUGIN_DIR, \"Directory for client-side plugins.\",",
          "511:    (uchar**) &opt_plugin_dir, (uchar**) &opt_plugin_dir, 0,",
          "512:    GET_STR, REQUIRED_ARG, 0, 0, 0, 0, 0, 0},",
          "513:   {\"default_auth\", OPT_PLUGIN_DIR,",
          "514:    \"Default authentication client-side plugin to use.\",",
          "515:    (uchar**) &opt_default_auth, (uchar**) &opt_default_auth, 0,",
          "516:    GET_STR, REQUIRED_ARG, 0, 0, 0, 0, 0, 0},",
          "",
          "---------------",
          "--- Hunk 3 ---",
          "[Context before]",
          "1465:     mysql_options(&mysql_connection,MYSQL_SHARED_MEMORY_BASE_NAME,shared_memory_base_name);",
          "1466: #endif",
          "1467:   mysql_options(&mysql_connection, MYSQL_SET_CHARSET_NAME, default_charset);",
          "1468:   if (!(mysql= mysql_real_connect(&mysql_connection,host,user,passwd,",
          "1469:                                   NULL,opt_mysql_port,opt_mysql_unix_port,",
          "1470:                                   0)))",
          "",
          "[Removed Lines]",
          "[None]",
          "",
          "[Added Lines]",
          "1477:   if (opt_plugin_dir && *opt_plugin_dir)",
          "1478:     mysql_options(&mysql_connection, MYSQL_PLUGIN_DIR, opt_plugin_dir);",
          "1480:   if (opt_default_auth && *opt_default_auth)",
          "1481:     mysql_options(&mysql_connection, MYSQL_DEFAULT_AUTH, opt_default_auth);",
          "",
          "---------------"
        ],
        "mysql-test/r/plugin_auth.result||mysql-test/r/plugin_auth.result": [
          "File: mysql-test/r/plugin_auth.result -> mysql-test/r/plugin_auth.result",
          "--- Hunk 1 ---",
          "[Context before]",
          "320: Proxied_user",
          "321: With_grant 1",
          "322: FLUSH PRIVILEGES;",
          "323: End of 5.5 tests",
          "",
          "[Removed Lines]",
          "[None]",
          "",
          "[Added Lines]",
          "323: #",
          "324: # Bug#58139 : default-auth option not recognized in MySQL standardi",
          "325: #             command line clients",
          "326: #",
          "327: # Executing 'mysql'",
          "328: 1",
          "329: 1",
          "330: # Executing 'mysqladmin'",
          "331: mysqld is alive",
          "332: # Executing 'mysqldump'",
          "",
          "---------------"
        ],
        "mysql-test/t/plugin_auth.test||mysql-test/t/plugin_auth.test": [
          "File: mysql-test/t/plugin_auth.test -> mysql-test/t/plugin_auth.test",
          "--- Hunk 1 ---",
          "[Context before]",
          "395: FLUSH PRIVILEGES;",
          "397: --echo End of 5.5 tests",
          "",
          "[Removed Lines]",
          "[None]",
          "",
          "[Added Lines]",
          "397: --echo #",
          "398: --echo # Bug#58139 : default-auth option not recognized in MySQL standardi",
          "399: --echo #             command line clients",
          "400: --echo #",
          "402: --echo # Executing 'mysql'",
          "403: --exec $MYSQL -u root -S $MASTER_MYSOCK -P $MASTER_MYPORT --default-auth=auth_test_plugin $PLUGIN_AUTH_OPT -e 'SELECT 1'",
          "405: --echo # Executing 'mysqladmin'",
          "406: --exec $MYSQLADMIN -u root -S $MASTER_MYSOCK -P $MASTER_MYPORT --default-auth=auth_test_plugin $PLUGIN_AUTH_OPT ping",
          "408: --echo # Executing 'mysqldump'",
          "409: --exec $MYSQL_DUMP -u root -S $MASTER_MYSOCK -P $MASTER_MYPORT --compact --default-auth=auth_test_plugin $PLUGIN_AUTH_OPT test",
          "",
          "---------------"
        ]
      }
    },
    {
      "candidate_hash": "a6acb35c8652489e01b623e1a5594426e43c76d5",
      "candidate_info": {
        "commit_hash": "a6acb35c8652489e01b623e1a5594426e43c76d5",
        "repo": "mysql/mysql-server",
        "commit_url": "https://github.com/mysql/mysql-server/commit/a6acb35c8652489e01b623e1a5594426e43c76d5",
        "files": [
          "cmake/install_macros.cmake",
          "cmake/mysql_version.cmake",
          "libmysql/CMakeLists.txt"
        ],
        "message": "Bug#16809055 MYSQL 5.6 AND 5.7 STILL USE LIBMYSQLCLIENT.SO.18\n\nWith this patch, the libmysql/ directory contains:\nlibmysqlclient.a\nlibmysqlclient_r.a -> libmysqlclient.a\nlibmysqlclient_r.so -> libmysqlclient.so*\nlibmysqlclient_r.so.18 -> libmysqlclient.so.18*\nlibmysqlclient_r.so.18.1.0 -> libmysqlclient.so.18.1.0*\nlibmysqlclient.so -> libmysqlclient.so.18*\nlibmysqlclient.so.18 -> libmysqlclient.so.18.1.0*\nlibmysqlclient.so.18.1.0*",
        "before_after_code_files": [
          "cmake/install_macros.cmake||cmake/install_macros.cmake",
          "cmake/mysql_version.cmake||cmake/mysql_version.cmake"
        ]
      },
      "candidate_patch_features": {
        "candidate_earlier_than_patch": 1,
        "same_branch_evolution": 1,
        "olp_code_files": {
          "patch": [
            "cmake/mysql_version.cmake||cmake/mysql_version.cmake"
          ],
          "candidate": [
            "cmake/mysql_version.cmake||cmake/mysql_version.cmake"
          ]
        }
      },
      "candidate_diff": {
        "cmake/install_macros.cmake||cmake/install_macros.cmake": [
          "File: cmake/install_macros.cmake -> cmake/install_macros.cmake",
          "--- Hunk 1 ---",
          "[Context before]",
          "2: #",
          "3: # This program is free software; you can redistribute it and/or modify",
          "4: # it under the terms of the GNU General Public License as published by",
          "",
          "[Removed Lines]",
          "1: # Copyright (c) 2009, 2011, Oracle and/or its affiliates. All rights reserved.",
          "",
          "[Added Lines]",
          "1: # Copyright (c) 2009, 2013, Oracle and/or its affiliates. All rights reserved.",
          "",
          "---------------",
          "--- Hunk 2 ---",
          "[Context before]",
          "111: ENDFUNCTION()",
          "113: # Install symbolic link to CMake target.",
          "117: IF(UNIX)",
          "118:   GET_TARGET_PROPERTY(location ${target} LOCATION)",
          "119:   GET_FILENAME_COMPONENT(path ${location} PATH)",
          "122:   ADD_CUSTOM_COMMAND(",
          "123:     OUTPUT ${output}",
          "124:     COMMAND ${CMAKE_COMMAND} ARGS -E remove -f ${output}",
          "125:     COMMAND ${CMAKE_COMMAND} ARGS -E create_symlink",
          "128:     WORKING_DIRECTORY ${path}",
          "129:     DEPENDS ${target}",
          "130:     )",
          "133:     ALL",
          "134:     DEPENDS ${output})",
          "136:   IF(CMAKE_GENERATOR MATCHES \"Xcode\")",
          "137:     # For Xcode, replace project config with install config",
          "138:     STRING(REPLACE \"${CMAKE_CFG_INTDIR}\"",
          "",
          "[Removed Lines]",
          "114: # the link is created in the same directory as target",
          "115: # and extension will be the same as for target file.",
          "116: MACRO(INSTALL_SYMLINK linkname target destination component)",
          "120:   GET_FILENAME_COMPONENT(name ${location} NAME)",
          "121:   SET(output ${path}/${linkname})",
          "126:       ${name}",
          "127:       ${linkname}",
          "132:   ADD_CUSTOM_TARGET(symlink_${linkname}",
          "135:   SET_TARGET_PROPERTIES(symlink_${linkname} PROPERTIES CLEAN_DIRECT_OUTPUT 1)",
          "",
          "[Added Lines]",
          "114: # We do 'cd path; ln -s target_name link_name'",
          "115: # We also add an INSTALL target for \"${path}/${link_name}\"",
          "116: MACRO(INSTALL_SYMLINK target target_name link_name destination component)",
          "120:   MESSAGE(STATUS \"target ${target}\")",
          "121:   MESSAGE(STATUS \"link_name ${link_name}\")",
          "122:   MESSAGE(STATUS \"target_name ${target_name}\")",
          "123:   MESSAGE(STATUS \"path ${path}\")",
          "124:   MESSAGE(STATUS \"\")",
          "126:   SET(output ${path}/${link_name})",
          "131:       ${target_name}",
          "132:       ${link_name}",
          "137:   ADD_CUSTOM_TARGET(symlink_${link_name}",
          "140:   SET_TARGET_PROPERTIES(symlink_${link_name} PROPERTIES CLEAN_DIRECT_OUTPUT 1)",
          "",
          "---------------"
        ],
        "cmake/mysql_version.cmake||cmake/mysql_version.cmake": [
          "File: cmake/mysql_version.cmake -> cmake/mysql_version.cmake",
          "--- Hunk 1 ---",
          "[Context before]",
          "2: #",
          "3: # This program is free software; you can redistribute it and/or modify",
          "4: # it under the terms of the GNU General Public License as published by",
          "",
          "[Removed Lines]",
          "1: # Copyright (c) 2009, 2012, Oracle and/or its affiliates. All rights reserved.",
          "",
          "[Added Lines]",
          "1: # Copyright (c) 2009, 2013, Oracle and/or its affiliates. All rights reserved.",
          "",
          "---------------",
          "--- Hunk 2 ---",
          "[Context before]",
          "18: #",
          "20: SET(SHARED_LIB_MAJOR_VERSION \"18\")",
          "21: SET(PROTOCOL_VERSION \"10\")",
          "22: SET(DOT_FRM_VERSION \"6\")",
          "",
          "[Removed Lines]",
          "[None]",
          "",
          "[Added Lines]",
          "21: SET(SHARED_LIB_MINOR_VERSION \"1\")",
          "",
          "---------------"
        ]
      }
    },
    {
      "candidate_hash": "d5e7008bddb6a7192c46c0c8f9100e5b099e71b0",
      "candidate_info": {
        "commit_hash": "d5e7008bddb6a7192c46c0c8f9100e5b099e71b0",
        "repo": "mysql/mysql-server",
        "commit_url": "https://github.com/mysql/mysql-server/commit/d5e7008bddb6a7192c46c0c8f9100e5b099e71b0",
        "files": [
          "client/mysqladmin.cc",
          "client/mysqldump.c",
          "mysql-test/r/plugin_auth.result",
          "mysql-test/t/plugin_auth.test"
        ],
        "message": "Bug#58139 : default-auth option not recognized in MySQL standard             command line clients.\n\nCommand line tools like mysqladmin and mysqldump did not recognize\ndefault-auth and plugin-dir options.\n\nSupport for these options was found missing in these command line\ntools.\n\nFixed by adding support for the same.",
        "before_after_code_files": [
          "client/mysqladmin.cc||client/mysqladmin.cc",
          "client/mysqldump.c||client/mysqldump.c",
          "mysql-test/r/plugin_auth.result||mysql-test/r/plugin_auth.result",
          "mysql-test/t/plugin_auth.test||mysql-test/t/plugin_auth.test"
        ]
      },
      "candidate_patch_features": {
        "candidate_earlier_than_patch": 1,
        "same_branch_evolution": 1,
        "olp_code_files": {
          "patch": [
            "client/mysqladmin.cc||client/mysqladmin.cc",
            "client/mysqldump.c||client/mysqldump.c"
          ],
          "candidate": [
            "client/mysqladmin.cc||client/mysqladmin.cc",
            "client/mysqldump.c||client/mysqldump.c"
          ]
        }
      },
      "candidate_diff": {
        "client/mysqladmin.cc||client/mysqladmin.cc": [
          "File: client/mysqladmin.cc -> client/mysqladmin.cc",
          "--- Hunk 1 ---",
          "[Context before]",
          "44: static uint opt_count_iterations= 0, my_end_arg;",
          "45: static ulong opt_connect_timeout, opt_shutdown_timeout;",
          "46: static char * unix_port=0;",
          "48: #ifdef HAVE_SMEM",
          "49: static char *shared_memory_base_name=0;",
          "",
          "[Removed Lines]",
          "[None]",
          "",
          "[Added Lines]",
          "47: static char *opt_plugin_dir= 0, *opt_default_auth;",
          "",
          "---------------",
          "--- Hunk 2 ---",
          "[Context before]",
          "206:   {\"shutdown_timeout\", OPT_SHUTDOWN_TIMEOUT, \"\", &opt_shutdown_timeout,",
          "207:    &opt_shutdown_timeout, 0, GET_ULONG, REQUIRED_ARG,",
          "208:    SHUTDOWN_DEF_TIMEOUT, 0, 3600*12, 0, 1, 0},",
          "209:   { 0, 0, 0, 0, 0, 0, GET_NO_ARG, NO_ARG, 0, 0, 0, 0, 0, 0}",
          "210: };",
          "",
          "[Removed Lines]",
          "[None]",
          "",
          "[Added Lines]",
          "210:   {\"plugin_dir\", OPT_PLUGIN_DIR, \"Directory for client-side plugins.\",",
          "211:    (uchar**) &opt_plugin_dir, (uchar**) &opt_plugin_dir, 0,",
          "212:    GET_STR, REQUIRED_ARG, 0, 0, 0, 0, 0, 0},",
          "213:   {\"default_auth\", OPT_PLUGIN_DIR,",
          "214:    \"Default authentication client-side plugin to use.\",",
          "215:    (uchar**) &opt_default_auth, (uchar**) &opt_default_auth, 0,",
          "216:    GET_STR, REQUIRED_ARG, 0, 0, 0, 0, 0, 0},",
          "",
          "---------------",
          "--- Hunk 3 ---",
          "[Context before]",
          "342:   mysql_options(&mysql, MYSQL_SET_CHARSET_NAME, default_charset);",
          "343:   error_flags= (myf)(opt_nobeep ? 0 : ME_BELL);",
          "345:   if (sql_connect(&mysql, option_wait))",
          "346:   {",
          "",
          "[Removed Lines]",
          "[None]",
          "",
          "[Added Lines]",
          "353:   if (opt_plugin_dir && *opt_plugin_dir)",
          "354:     mysql_options(&mysql, MYSQL_PLUGIN_DIR, opt_plugin_dir);",
          "356:   if (opt_default_auth && *opt_default_auth)",
          "357:     mysql_options(&mysql, MYSQL_DEFAULT_AUTH, opt_default_auth);",
          "",
          "---------------"
        ],
        "client/mysqldump.c||client/mysqldump.c": [
          "File: client/mysqldump.c -> client/mysqldump.c",
          "--- Hunk 1 ---",
          "[Context before]",
          "137: static char *shared_memory_base_name=0;",
          "138: #endif",
          "139: static uint opt_protocol= 0;",
          "142: Dynamic_string wrapper functions. In this file use these",
          "",
          "[Removed Lines]",
          "[None]",
          "",
          "[Added Lines]",
          "140: static char *opt_plugin_dir= 0, *opt_default_auth;",
          "",
          "---------------",
          "--- Hunk 2 ---",
          "[Context before]",
          "499:    &where, &where, 0, GET_STR, REQUIRED_ARG, 0, 0, 0, 0, 0, 0},",
          "500:   {\"xml\", 'X', \"Dump a database as well formed XML.\", 0, 0, 0, GET_NO_ARG,",
          "501:    NO_ARG, 0, 0, 0, 0, 0, 0},",
          "502:   {0, 0, 0, 0, 0, 0, GET_NO_ARG, NO_ARG, 0, 0, 0, 0, 0, 0}",
          "503: };",
          "",
          "[Removed Lines]",
          "[None]",
          "",
          "[Added Lines]",
          "503:   {\"plugin_dir\", OPT_PLUGIN_DIR, \"Directory for client-side plugins.\",",
          "504:    (uchar**) &opt_plugin_dir, (uchar**) &opt_plugin_dir, 0,",
          "505:    GET_STR, REQUIRED_ARG, 0, 0, 0, 0, 0, 0},",
          "506:   {\"default_auth\", OPT_PLUGIN_DIR,",
          "507:    \"Default authentication client-side plugin to use.\",",
          "508:    (uchar**) &opt_default_auth, (uchar**) &opt_default_auth, 0,",
          "509:    GET_STR, REQUIRED_ARG, 0, 0, 0, 0, 0, 0},",
          "",
          "---------------",
          "--- Hunk 3 ---",
          "[Context before]",
          "1452:     mysql_options(&mysql_connection,MYSQL_SHARED_MEMORY_BASE_NAME,shared_memory_base_name);",
          "1453: #endif",
          "1454:   mysql_options(&mysql_connection, MYSQL_SET_CHARSET_NAME, default_charset);",
          "1455:   if (!(mysql= mysql_real_connect(&mysql_connection,host,user,passwd,",
          "1456:                                   NULL,opt_mysql_port,opt_mysql_unix_port,",
          "1457:                                   0)))",
          "",
          "[Removed Lines]",
          "[None]",
          "",
          "[Added Lines]",
          "1464:   if (opt_plugin_dir && *opt_plugin_dir)",
          "1465:     mysql_options(&mysql_connection, MYSQL_PLUGIN_DIR, opt_plugin_dir);",
          "1467:   if (opt_default_auth && *opt_default_auth)",
          "1468:     mysql_options(&mysql_connection, MYSQL_DEFAULT_AUTH, opt_default_auth);",
          "",
          "---------------"
        ],
        "mysql-test/r/plugin_auth.result||mysql-test/r/plugin_auth.result": [
          "File: mysql-test/r/plugin_auth.result -> mysql-test/r/plugin_auth.result",
          "--- Hunk 1 ---",
          "[Context before]",
          "318: Proxied_user",
          "319: With_grant 1",
          "320: FLUSH PRIVILEGES;",
          "321: End of 5.5 tests",
          "",
          "[Removed Lines]",
          "[None]",
          "",
          "[Added Lines]",
          "321: #",
          "322: # Bug#58139 : default-auth option not recognized in MySQL standardi",
          "323: #             command line clients",
          "324: #",
          "325: # Executing 'mysql'",
          "326: 1",
          "327: 1",
          "328: # Executing 'mysqladmin'",
          "329: mysqld is alive",
          "330: # Executing 'mysqldump'",
          "",
          "---------------"
        ],
        "mysql-test/t/plugin_auth.test||mysql-test/t/plugin_auth.test": [
          "File: mysql-test/t/plugin_auth.test -> mysql-test/t/plugin_auth.test",
          "--- Hunk 1 ---",
          "[Context before]",
          "395: FLUSH PRIVILEGES;",
          "397: --echo End of 5.5 tests",
          "",
          "[Removed Lines]",
          "[None]",
          "",
          "[Added Lines]",
          "397: --echo #",
          "398: --echo # Bug#58139 : default-auth option not recognized in MySQL standardi",
          "399: --echo #             command line clients",
          "400: --echo #",
          "402: --echo # Executing 'mysql'",
          "403: --exec $MYSQL -u root -S $MASTER_MYSOCK -P $MASTER_MYPORT --default-auth=auth_test_plugin $PLUGIN_AUTH_OPT -e 'SELECT 1'",
          "405: --echo # Executing 'mysqladmin'",
          "406: --exec $MYSQLADMIN -u root -S $MASTER_MYSOCK -P $MASTER_MYPORT --default-auth=auth_test_plugin $PLUGIN_AUTH_OPT ping",
          "408: --echo # Executing 'mysqldump'",
          "409: --exec $MYSQL_DUMP -u root -S $MASTER_MYSOCK -P $MASTER_MYPORT --compact --default-auth=auth_test_plugin $PLUGIN_AUTH_OPT test",
          "",
          "---------------"
        ]
      }
    },
    {
      "candidate_hash": "bf14b2fea689a75a6f673935ce9fa749799d884e",
      "candidate_info": {
        "commit_hash": "bf14b2fea689a75a6f673935ce9fa749799d884e",
        "repo": "mysql/mysql-server",
        "commit_url": "https://github.com/mysql/mysql-server/commit/bf14b2fea689a75a6f673935ce9fa749799d884e",
        "files": [
          "cmake/mysql_version.cmake",
          "libmysql/libmysql.ver.in"
        ],
        "message": "Bug#19729266 BUMP LIBMYSQLCLIENT MAJOR VERSION IN 5.7\n\nBump the version number of libmysqlclient.so to 20.0.0 and the symbol\nversion number of all symbols to \"libmysqlclient_20.0\".\n\nBump the version number of libmysqld.so to 20.0.0.",
        "before_after_code_files": [
          "cmake/mysql_version.cmake||cmake/mysql_version.cmake",
          "libmysql/libmysql.ver.in||libmysql/libmysql.ver.in"
        ]
      },
      "candidate_patch_features": {
        "candidate_earlier_than_patch": 0,
        "same_branch_evolution": 1,
        "olp_code_files": {
          "patch": [
            "cmake/mysql_version.cmake||cmake/mysql_version.cmake"
          ],
          "candidate": [
            "cmake/mysql_version.cmake||cmake/mysql_version.cmake"
          ]
        }
      },
      "candidate_diff": {
        "cmake/mysql_version.cmake||cmake/mysql_version.cmake": [
          "File: cmake/mysql_version.cmake -> cmake/mysql_version.cmake",
          "--- Hunk 1 ---",
          "[Context before]",
          "17: # Global constants, only to be changed between major releases.",
          "18: #",
          "22: SET(PROTOCOL_VERSION \"10\")",
          "23: SET(DOT_FRM_VERSION \"6\")",
          "",
          "[Removed Lines]",
          "20: SET(SHARED_LIB_MAJOR_VERSION \"18\")",
          "21: SET(SHARED_LIB_MINOR_VERSION \"3\")",
          "",
          "[Added Lines]",
          "20: SET(SHARED_LIB_MAJOR_VERSION \"20\")",
          "21: SET(SHARED_LIB_MINOR_VERSION \"0\")",
          "",
          "---------------"
        ],
        "libmysql/libmysql.ver.in||libmysql/libmysql.ver.in": [
          "File: libmysql/libmysql.ver.in -> libmysql/libmysql.ver.in",
          "--- Hunk 1 ---",
          "[Context before]",
          "[No context available]",
          "",
          "[Removed Lines]",
          "1: libmysqlclient_@SHARED_LIB_MAJOR_VERSION@ { global: *; };",
          "",
          "[Added Lines]",
          "1: libmysqlclient_@SHARED_LIB_MAJOR_VERSION@.@SHARED_LIB_MINOR_VERSION@ { global: *; };",
          "",
          "---------------"
        ]
      }
    }
  ]
}