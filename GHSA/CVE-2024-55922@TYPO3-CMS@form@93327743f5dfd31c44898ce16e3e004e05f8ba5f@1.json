{
  "cve_id": "CVE-2024-55922",
  "cve_desc": "TYPO3 is a free and open source Content Management Framework. A vulnerability has been identified in the backend user interface functionality involving deep links. Specifically, this functionality is susceptible to Cross-Site Request Forgery (CSRF). Additionally, state-changing actions in downstream components incorrectly accepted submissions via HTTP GET and did not enforce the appropriate HTTP method. Successful exploitation of this vulnerability requires the victim to have an active session on the backend user interface and to be deceived into interacting with a malicious URL targeting the backend, which can occur under the following conditions: The user opens a malicious link, such as one sent via email. The user visits a compromised or manipulated website while the following settings are misconfigured: 1. `security.backend.enforceReferrer` feature is disabled, 2. `BE/cookieSameSite` configuration is set to lax or none The vulnerability in the affected downstream component \u201cForm Framework Module\u201d allows attackers to manipulate or delete persisted form definitions. Users are advised to update to TYPO3 versions 11.5.42 ELTS, 12.4.25 LTS, 13.4.3 LTS which fix the problem described. There are no known workarounds for this vulnerability.",
  "repo": "TYPO3-CMS/form",
  "patch_hash": "93327743f5dfd31c44898ce16e3e004e05f8ba5f",
  "patch_info": {
    "commit_hash": "93327743f5dfd31c44898ce16e3e004e05f8ba5f",
    "repo": "TYPO3-CMS/form",
    "commit_url": "https://github.com/TYPO3-CMS/form/commit/93327743f5dfd31c44898ce16e3e004e05f8ba5f",
    "files": [
      "Classes/Controller/FormEditorController.php",
      "Classes/Controller/FormManagerController.php",
      "Resources/Private/Templates/Backend/FormManager/Index.html",
      "Resources/Public/JavaScript/backend/form-manager/view-model.js"
    ],
    "message": "[SECURITY] Enforce HTTP method assertions for backend modules\n\nResolves: #104456\nReleases: main, 13.4, 12.4\nChange-Id: Ic679584a343b6d35e81325a03148b0cff81f1d27\nSecurity-Bulletin: TYPO3-CORE-SA-2025-003\nSecurity-Bulletin: TYPO3-CORE-SA-2025-004\nSecurity-Bulletin: TYPO3-CORE-SA-2025-005\nSecurity-Bulletin: TYPO3-CORE-SA-2025-006\nSecurity-Bulletin: TYPO3-CORE-SA-2025-007\nSecurity-Bulletin: TYPO3-CORE-SA-2025-008\nSecurity-References: CVE-2024-55893\nSecurity-References: CVE-2024-55894\nSecurity-References: CVE-2024-55920\nSecurity-References: CVE-2024-55921\nSecurity-References: CVE-2024-55922\nSecurity-References: CVE-2024-55923\nReviewed-on: https://review.typo3.org/c/Packages/TYPO3.CMS/+/87744\nTested-by: Oliver Hader <oliver.hader@typo3.org>\nReviewed-by: Oliver Hader <oliver.hader@typo3.org>",
    "before_after_code_files": [
      "Classes/Controller/FormEditorController.php||Classes/Controller/FormEditorController.php",
      "Classes/Controller/FormManagerController.php||Classes/Controller/FormManagerController.php",
      "Resources/Private/Templates/Backend/FormManager/Index.html||Resources/Private/Templates/Backend/FormManager/Index.html",
      "Resources/Public/JavaScript/backend/form-manager/view-model.js||Resources/Public/JavaScript/backend/form-manager/view-model.js"
    ]
  },
  "patch_diff": {
    "Classes/Controller/FormEditorController.php||Classes/Controller/FormEditorController.php": [
      "File: Classes/Controller/FormEditorController.php -> Classes/Controller/FormEditorController.php",
      "--- Hunk 1 ---",
      "[Context before]",
      "22: use TYPO3\\CMS\\Backend\\Template\\Components\\ButtonBar;",
      "23: use TYPO3\\CMS\\Backend\\Template\\ModuleTemplate;",
      "24: use TYPO3\\CMS\\Backend\\Template\\ModuleTemplateFactory;",
      "25: use TYPO3\\CMS\\Core\\Imaging\\IconFactory;",
      "26: use TYPO3\\CMS\\Core\\Imaging\\IconSize;",
      "27: use TYPO3\\CMS\\Core\\Localization\\LanguageService;",
      "",
      "[Removed Lines]",
      "[None]",
      "",
      "[Added Lines]",
      "25: use TYPO3\\CMS\\Core\\Http\\AllowedMethodsTrait;",
      "",
      "---------------",
      "--- Hunk 2 ---",
      "[Context before]",
      "58: class FormEditorController extends ActionController",
      "59: {",
      "60:     protected const JS_MODULE_NAMES = ['app', 'mediator', 'viewModel'];",
      "62:     public function __construct(",
      "",
      "[Removed Lines]",
      "[None]",
      "",
      "[Added Lines]",
      "61:     use AllowedMethodsTrait;",
      "",
      "---------------",
      "--- Hunk 3 ---",
      "[Context before]",
      "171:     protected function initializeSaveFormAction(): void",
      "172:     {",
      "173:         $this->defaultViewObjectName = JsonView::class;",
      "174:     }",
      "",
      "[Removed Lines]",
      "[None]",
      "",
      "[Added Lines]",
      "176:         $this->assertAllowedHttpMethod($this->request, 'POST');",
      "",
      "---------------"
    ],
    "Classes/Controller/FormManagerController.php||Classes/Controller/FormManagerController.php": [
      "File: Classes/Controller/FormManagerController.php -> Classes/Controller/FormManagerController.php",
      "--- Hunk 1 ---",
      "[Context before]",
      "26: use TYPO3\\CMS\\Backend\\Template\\ModuleTemplateFactory;",
      "27: use TYPO3\\CMS\\Backend\\Utility\\BackendUtility;",
      "28: use TYPO3\\CMS\\Core\\Charset\\CharsetConverter;",
      "29: use TYPO3\\CMS\\Core\\Imaging\\IconFactory;",
      "30: use TYPO3\\CMS\\Core\\Imaging\\IconSize;",
      "31: use TYPO3\\CMS\\Core\\Localization\\LanguageService;",
      "",
      "[Removed Lines]",
      "[None]",
      "",
      "[Added Lines]",
      "29: use TYPO3\\CMS\\Core\\Http\\AllowedMethodsTrait;",
      "",
      "---------------",
      "--- Hunk 2 ---",
      "[Context before]",
      "33: use TYPO3\\CMS\\Core\\Page\\PageRenderer;",
      "34: use TYPO3\\CMS\\Core\\Pagination\\ArrayPaginator;",
      "35: use TYPO3\\CMS\\Core\\Pagination\\SimplePagination;",
      "37: use TYPO3\\CMS\\Core\\Utility\\ArrayUtility;",
      "38: use TYPO3\\CMS\\Core\\Utility\\GeneralUtility;",
      "39: use TYPO3\\CMS\\Extbase\\Configuration\\ConfigurationManagerInterface;",
      "",
      "[Removed Lines]",
      "36: use TYPO3\\CMS\\Core\\Type\\ContextualFeedbackSeverity;",
      "",
      "[Added Lines]",
      "[None]",
      "",
      "---------------",
      "--- Hunk 3 ---",
      "[Context before]",
      "55: class FormManagerController extends ActionController",
      "56: {",
      "57:     protected const JS_MODULE_NAMES = ['app', 'viewModel'];",
      "58:     protected const PAGINATION_MAX = 20;",
      "",
      "[Removed Lines]",
      "[None]",
      "",
      "[Added Lines]",
      "57:     use AllowedMethodsTrait;",
      "",
      "---------------",
      "--- Hunk 4 ---",
      "[Context before]",
      "119:     protected function initializeCreateAction(): void",
      "120:     {",
      "121:         $this->defaultViewObjectName = JsonView::class;",
      "122:     }",
      "",
      "[Removed Lines]",
      "[None]",
      "",
      "[Added Lines]",
      "123:         $this->assertAllowedHttpMethod($this->request, 'POST');",
      "",
      "---------------",
      "--- Hunk 5 ---",
      "[Context before]",
      "186:     protected function initializeDuplicateAction(): void",
      "187:     {",
      "188:         $this->defaultViewObjectName = JsonView::class;",
      "189:     }",
      "",
      "[Removed Lines]",
      "[None]",
      "",
      "[Added Lines]",
      "191:         $this->assertAllowedHttpMethod($this->request, 'POST');",
      "",
      "---------------",
      "--- Hunk 6 ---",
      "[Context before]",
      "273:         return $this->jsonResponse();",
      "274:     }",
      "",
      "[Removed Lines]",
      "[None]",
      "",
      "[Added Lines]",
      "280:     protected function initializeDeleteAction(): void",
      "281:     {",
      "282:         $this->assertAllowedHttpMethod($this->request, 'POST');",
      "283:         $this->defaultViewObjectName = JsonView::class;",
      "284:     }",
      "",
      "---------------",
      "--- Hunk 7 ---",
      "[Context before]",
      "284:         if (!$this->formPersistenceManager->isAllowedPersistencePath($formPersistenceIdentifier, $formSettings)) {",
      "285:             throw new PersistenceManagerException(sprintf('Delete \"%s\" is not allowed', $formPersistenceIdentifier), 1614500661);",
      "286:         }",
      "287:         if (empty($this->databaseService->getReferencesByPersistenceIdentifier($formPersistenceIdentifier))) {",
      "288:             foreach ($GLOBALS['TYPO3_CONF_VARS']['SC_OPTIONS']['ext/form']['beforeFormDelete'] ?? [] as $className) {",
      "289:                 $hookObj = GeneralUtility::makeInstance($className);",
      "",
      "[Removed Lines]",
      "[None]",
      "",
      "[Added Lines]",
      "297:         $response = [",
      "298:             'status' => 'success',",
      "299:             'url' => $this->uriBuilder->uriFor('index', [], 'FormManager'),",
      "300:         ];",
      "",
      "---------------",
      "--- Hunk 8 ---",
      "[Context before]",
      "299:                 $formSettings['formManager']['controller'],",
      "300:                 $formSettings['formManager']['translationFiles'] ?? []",
      "301:             );",
      "307:         }",
      "309:     }",
      "311:     protected function getFormSettings(): array",
      "",
      "[Removed Lines]",
      "302:             $this->addFlashMessage(",
      "303:                 sprintf($controllerConfiguration['deleteAction']['errorMessage'], $formPersistenceIdentifier),",
      "304:                 $controllerConfiguration['deleteAction']['errorTitle'],",
      "305:                 ContextualFeedbackSeverity::ERROR,",
      "306:             );",
      "308:         return $this->redirect('index');",
      "",
      "[Added Lines]",
      "317:             $response = [",
      "318:                 'status' => 'error',",
      "319:                 'title' => $controllerConfiguration['deleteAction']['errorTitle'],",
      "320:                 'message' => sprintf($controllerConfiguration['deleteAction']['errorMessage'], $formPersistenceIdentifier),",
      "321:             ];",
      "327:         $view = $this->view;",
      "328:         $view->assign('response', $response);",
      "329:         $view->setVariablesToRender([",
      "330:             'response',",
      "331:         ]);",
      "332:         return $this->jsonResponse();",
      "",
      "---------------"
    ],
    "Resources/Private/Templates/Backend/FormManager/Index.html||Resources/Private/Templates/Backend/FormManager/Index.html": [
      "File: Resources/Private/Templates/Backend/FormManager/Index.html -> Resources/Private/Templates/Backend/FormManager/Index.html",
      "--- Hunk 1 ---",
      "[Context before]",
      "140:                                                     data-bs-original-title=\"{f:translate(key: 'LLL:EXT:form/Resources/Private/Language/Database.xlf:formManager.delete_form')}\"",
      "141:                                                     data-identifier=\"removeForm\"",
      "142:                                                     data-form-persistence-identifier=\"{form.persistenceIdentifier}\"",
      "143:                                                     title=\"{f:translate(key: 'LLL:EXT:form/Resources/Private/Language/Database.xlf:formManager.delete_form')}\"",
      "144:                                                 >",
      "145:                                                     <core:icon identifier=\"actions-edit-delete\" />",
      "",
      "[Removed Lines]",
      "[None]",
      "",
      "[Added Lines]",
      "143:                                                     data-form-name=\"{form.name}\"",
      "",
      "---------------"
    ],
    "Resources/Public/JavaScript/backend/form-manager/view-model.js||Resources/Public/JavaScript/backend/form-manager/view-model.js": [
      "File: Resources/Public/JavaScript/backend/form-manager/view-model.js -> Resources/Public/JavaScript/backend/form-manager/view-model.js",
      "--- Hunk 1 ---",
      "[Context before]",
      "[No context available]",
      "",
      "[Removed Lines]",
      "13: import $ from\"jquery\";import Modal from\"@typo3/backend/modal.js\";import Severity from\"@typo3/backend/severity.js\";import MultiStepWizard from\"@typo3/backend/multi-step-wizard.js\";import Icons from\"@typo3/backend/icons.js\";import Notification from\"@typo3/backend/notification.js\";import SecurityUtility from\"@typo3/core/security-utility.js\";import{selector}from\"@typo3/core/literals.js\";import SortableTable from\"@typo3/backend/sortable-table.js\";const securityUtility=new SecurityUtility;var Identifiers;function newFormSetup(e){$(Identifiers.newFormModalTrigger).on(\"click\",(function(t){t.preventDefault(),MultiStepWizard.addSlide(\"new-form-step-1\",TYPO3.lang[\"formManager.newFormWizard.step1.title\"],\"\",Severity.notice,TYPO3.lang[\"formManager.newFormWizard.step1.progressLabel\"],(async function(t){const a=await Icons.getIcon(\"actions-plus\",Icons.sizes.small),r=await Icons.getIcon(\"form-page\",Icons.sizes.large),i=await Icons.getIcon(\"apps-pagetree-page-default\",Icons.sizes.large);let o;const n=MultiStepWizard.setup.$carousel.closest(\".modal\"),l=n.find(\".modal-footer\").find('button[name=\"next\"]');MultiStepWizard.blurCancelStep(),MultiStepWizard.lockNextStep(),MultiStepWizard.lockPrevStep();0===e.getAccessibleFormStorageFolders().length&&(o='<div class=\"new-form-modal\"><div class=\"row\"><label class=\"col col-form-label\">'+TYPO3.lang[\"formManager.newFormWizard.step1.noStorages\"]+\"</label></div></div>\",t.html(o),e.assert(!1,\"No accessible form storage folders\",1477506500)),o='<div class=\"new-form-modal\">',o+='<div class=\"card-container\"><div class=\"card card-size-medium\"><div class=\"card-header\"><div class=\"card-icon\">'+i+'</div><div class=\"card-header-body\"><h2 class=\"card-title\">'+TYPO3.lang[\"formManager.blankForm.label\"]+'</h2><span class=\"card-subtitle\">'+TYPO3.lang[\"formManager.blankForm.subtitle\"]+'</span></div></div><div class=\"card-body\"><p class=\"card-text\">'+TYPO3.lang[\"formManager.blankForm.description\"]+'</p></div><div class=\"card-footer\"><button type=\"button\" class=\"btn btn-default\" data-inline=\"1\" value=\"blank\" data-identifier=\"newFormModeButton\">'+a+\" \"+TYPO3.lang[\"formManager.blankForm.label\"]+'</button></div></div><div class=\"card card-size-medium\"><div class=\"card-header\"><div class=\"card-icon\">'+r+'</div><div class=\"card-header-body\"><h2 class=\"card-title\">'+TYPO3.lang[\"formManager.predefinedForm.label\"]+'</h2><span class=\"card-subtitle\">'+TYPO3.lang[\"formManager.predefinedForm.subtitle\"]+'</span></div></div><div class=\"card-body\"><p class=\"card-text\">'+TYPO3.lang[\"formManager.predefinedForm.description\"]+'</p></div><div class=\"card-footer\"><button type=\"button\" class=\"btn btn-default\" data-inline=\"1\" value=\"predefined\" data-identifier=\"newFormModeButton\">'+a+\" \"+TYPO3.lang[\"formManager.predefinedForm.label\"]+\"</button></div></div>\",o+=\"</div>\",t.html(o),$(Identifiers.newFormModeButton,n).on(\"click\",(function(e){MultiStepWizard.set(\"newFormMode\",$(e.currentTarget).val()),MultiStepWizard.next()})),l.on(\"click\",(async function(){t.html($(\"<div />\",{class:\"text-center\"}).append(await Icons.getIcon(\"spinner-circle\",Icons.sizes.default,null,null)).prop(\"outerHTML\"))}))})),MultiStepWizard.addSlide(\"new-form-step-2\",TYPO3.lang[\"formManager.newFormWizard.step2.title\"],\"\",Severity.notice,top.TYPO3.lang[\"wizard.progressStep.configure\"],(function(t,a){let r,i;MultiStepWizard.lockNextStep(),MultiStepWizard.unlockPrevStep();const o=MultiStepWizard.setup.$carousel.closest(\".modal\"),n=o.find(\".modal-footer\").find('button[name=\"next\"]'),l=e.getAccessibleFormStorageFolders();if(a.savePath||(MultiStepWizard.set(\"savePath\",l[0].value),MultiStepWizard.set(\"savePathName\",l[0].label)),l.length>1){i=$('<select class=\"new-form-save-path form-select\" id=\"new-form-save-path\" data-identifier=\"newFormSavePath\" />');for(let e=0,t=l.length;e<t;++e){const t=new Option(l[e].label,l[e].value);$(i).append(t)}}const s=e.getPrototypes();e.assert(s.length>0,\"No prototypes available\",1477506501),a.prototypeName||(MultiStepWizard.set(\"prototypeName\",s[0].value),MultiStepWizard.set(\"prototypeNameName\",s[0].label));const d=$('<select class=\"new-form-prototype-name form-select\" id=\"new-form-prototype-name\" data-identifier=\"newFormPrototypeName\" />');for(let e=0,t=s.length;e<t;++e){const t=new Option(s[e].label,s[e].value);$(d).append(t)}let c=e.getTemplatesForPrototype(s[0].value);e.assert(c.length>0,\"No templates available\",1477506502),a.templatePath||(MultiStepWizard.set(\"templatePath\",c[0].value),MultiStepWizard.set(\"templatePathName\",c[0].label));const m=$('<select class=\"new-form-template form-select\" id=\"new-form-template\" data-identifier=\"newFormTemplate\" />');for(let e=0,t=c.length;e<t;++e){const t=new Option(c[e].label,c[e].value);$(m).append(t)}r='<div class=\"new-form-modal\">',\"blank\"===a.newFormMode?(r+='<h5 class=\"form-section-headline\">'+TYPO3.lang[\"formManager.blankForm.label\"]+\"</h5>\",MultiStepWizard.set(\"templatePath\",\"EXT:form/Resources/Private/Backend/Templates/FormEditor/Yaml/NewForms/BlankForm.yaml\"),MultiStepWizard.set(\"templatePathName\",TYPO3.lang[\"formManager.blankForm.label\"])):(r+='<h5 class=\"form-section-headline\">'+TYPO3.lang[\"formManager.predefinedForm.label\"]+\"</h5>\",s.length>1&&(r+='<div class=\"mb-3\"><label for=\"new-form-prototype-name\"><strong>'+TYPO3.lang[\"formManager.form_prototype\"]+'</strong></label><div class=\"formengine-field-item t3js-formengine-field-item\"><div class=\"form-control-wrap\">'+$(d)[0].outerHTML+\"</div></div></div>\"),c.length>1&&(r+='<div class=\"mb-3\"><label for=\"new-form-template\"><strong>'+TYPO3.lang[\"formManager.form_template\"]+'</strong></label><div class=\"formengine-field-item t3js-formengine-field-item\"><div class=\"form-description\">'+TYPO3.lang[\"formManager.form_template_description\"]+'</div><div class=\"form-control-wrap\">'+$(m)[0].outerHTML+\"</div></div></div>\")),r+='<div class=\"mb-3\"><label for=\"new-form-name\"><strong>'+TYPO3.lang[\"formManager.form_name\"]+'</strong></label><div class=\"formengine-field-item t3js-formengine-field-item\"><div class=\"form-description\">'+TYPO3.lang[\"formManager.form_name_description\"]+'</div><div class=\"form-control-wrap\">',a.formName?(r+='<input class=\"form-control\" id=\"new-form-name\" data-identifier=\"newFormName\" value=\"'+securityUtility.encodeHtml(a.formName)+'\" />',setTimeout((function(){MultiStepWizard.unlockNextStep()}),200)):r+='<input class=\"form-control has-error\" id=\"new-form-name\" data-identifier=\"newFormName\" />',r+=\"</div></div></div>\",i&&(r+='<div class=\"mb-3\"><label for=\"new-form-save-path\"><strong>'+TYPO3.lang[\"formManager.form_save_path\"]+'</strong></label><div class=\"formengine-field-item t3js-formengine-field-item\"><div class=\"form-description\">'+TYPO3.lang[\"formManager.form_save_path_description\"]+'</div><div class=\"form-control-wrap\">'+$(i)[0].outerHTML+\"</div></div></div>\"),r+=\"</div>\",t.html(r),a.savePath&&$(Identifiers.newFormSavePath,o).val(a.savePath),a.templatePath&&$(Identifiers.newFormTemplate,o).val(a.templatePath),s.length>1?$(Identifiers.newFormPrototypeName,o).focus():c.length>1&&$(Identifiers.newFormTemplate,o).focus();const p=function(){$(Identifiers.newFormTemplate,o).on(\"change\",(function(){MultiStepWizard.set(\"templatePath\",$(Identifiers.newFormTemplate+\" option:selected\",o).val()),MultiStepWizard.set(\"templatePathName\",$(Identifiers.newFormTemplate+\" option:selected\",o).text()),MultiStepWizard.set(\"templatePathOnPrev\",$(Identifiers.newFormTemplate+\" option:selected\",o).val())}))};$(Identifiers.newFormPrototypeName,o).on(\"change\",(function(t){MultiStepWizard.set(\"prototypeName\",$(Identifiers.newFormPrototypeName+\" option:selected\",o).val()),MultiStepWizard.set(\"prototypeNameName\",$(Identifiers.newFormPrototypeName+\" option:selected\",o).text()),c=e.getTemplatesForPrototype($(t.currentTarget).val()),$(Identifiers.newFormTemplate,o).off().empty();for(let e=0,t=c.length;e<t;++e){const t=new Option(c[e].label,c[e].value);$(Identifiers.newFormTemplate,o).append(t),MultiStepWizard.set(\"templatePath\",c[0].value),MultiStepWizard.set(\"templatePathName\",c[0].label)}p()})),p(),a.prototypeName&&($(Identifiers.newFormPrototypeName,o).val(a.prototypeName),$(Identifiers.newFormPrototypeName,o).trigger(\"change\"),a.templatePathOnPrev&&($(Identifiers.newFormTemplate,o).find(selector`option[value=\"${a.templatePathOnPrev}\"]`).prop(\"selected\",!0),$(Identifiers.newFormTemplate,o).trigger(\"change\"))),$(Identifiers.newFormName,o).focus(),$(Identifiers.newFormName,o).on(\"keyup paste\",(function(e){$(e.currentTarget).val().length>0?($(e.currentTarget).removeClass(\"has-error\"),MultiStepWizard.unlockNextStep(),MultiStepWizard.set(\"formName\",$(e.currentTarget).val()),\"code\"in e&&\"Enter\"===e.code&&MultiStepWizard.triggerStepButton(\"next\")):($(e.currentTarget).addClass(\"has-error\"),MultiStepWizard.lockNextStep())})),$(Identifiers.newFormSavePath,o).on(\"change\",(function(){MultiStepWizard.set(\"savePath\",$(Identifiers.newFormSavePath+\" option:selected\",o).val()),MultiStepWizard.set(\"savePathName\",$(Identifiers.newFormSavePath+\" option:selected\",o).text())})),\"blank\"===a.newFormMode||a.templatePathName||MultiStepWizard.set(\"templatePathName\",$(Identifiers.newFormTemplate+\" option:selected\",o).text()),n.on(\"click\",(async function(){MultiStepWizard.setup.forceSelection=!1,t.html($(\"<div />\",{class:\"text-center\"}).append(await Icons.getIcon(\"spinner-circle\",Icons.sizes.default,null,null)).prop(\"outerHTML\"))}))})),MultiStepWizard.addSlide(\"new-form-step-3\",TYPO3.lang[\"formManager.newFormWizard.step3.title\"],\"\",Severity.notice,TYPO3.lang[\"formManager.newFormWizard.step3.progressLabel\"],(async function(e,t){const a=await Icons.getIcon(\"actions-cog\",Icons.sizes.small),r=await Icons.getIcon(\"actions-file-t3d\",Icons.sizes.small),i=await Icons.getIcon(\"actions-tag\",Icons.sizes.small),o=await Icons.getIcon(\"actions-database\",Icons.sizes.small),n=MultiStepWizard.setup.$carousel.closest(\".modal\").find(\".modal-footer\").find('button[name=\"next\"]');let l='<div class=\"new-form-modal\">';l+='<div class=\"mb-3\"><h5 class=\"form-section-headline\">'+TYPO3.lang[\"formManager.newFormWizard.step3.check\"]+\"</h5><p>\"+TYPO3.lang[\"formManager.newFormWizard.step3.message\"]+'</p></div><div class=\"alert alert-notice\">',t.prototypeNameName&&(l+='<div class=\"row my-1\"><div class=\"col col-sm-6\">'+a+\" \"+TYPO3.lang[\"formManager.form_prototype\"]+'</div><div class=\"col\">'+securityUtility.encodeHtml(t.prototypeNameName)+\"</div></div>\"),t.templatePathName&&(l+='<div class=\"row my-1\"><div class=\"col col-sm-6\">'+r+\" \"+TYPO3.lang[\"formManager.form_template\"]+'</div><div class=\"col\">'+securityUtility.encodeHtml(t.templatePathName)+\"</div></div>\"),l+='<div class=\"row my-1\"><div class=\"col col-sm-6\">'+i+\" \"+TYPO3.lang[\"formManager.form_name\"]+'</div><div class=\"col\">'+securityUtility.encodeHtml(t.formName)+'</div></div><div class=\"row my-1\"><div class=\"col col-sm-6\">'+o+\" \"+TYPO3.lang[\"formManager.form_save_path\"]+'</div><div class=\"col\">'+securityUtility.encodeHtml(t.savePathName)+\"</div></div>\",l+=\"</div></div>\",e.html(l),n.focus(),n.on(\"click\",(async function(){MultiStepWizard.setup.forceSelection=!1,e.html($(\"<div />\",{class:\"text-center\"}).append(await Icons.getIcon(\"spinner-circle\",Icons.sizes.default,null,null)).prop(\"outerHTML\"))}))})),MultiStepWizard.addFinalProcessingSlide((function(){$.post(e.getAjaxEndpoint(\"create\"),{formName:MultiStepWizard.setup.settings.formName,templatePath:MultiStepWizard.setup.settings.templatePath,prototypeName:MultiStepWizard.setup.settings.prototypeName,savePath:MultiStepWizard.setup.settings.savePath},(function(e){\"success\"===e.status?document.location=e.url:Notification.error(TYPO3.lang[\"formManager.newFormWizard.step4.errorTitle\"],TYPO3.lang[\"formManager.newFormWizard.step4.errorMessage\"]+\" \"+e.message),MultiStepWizard.dismiss()})).fail((function(e,t,a){const r=(new DOMParser).parseFromString(e.responseText,\"text/html\"),i=$(r.body);Notification.error(t,a,2),MultiStepWizard.dismiss(),$(Identifiers.t3Logo,i).remove(),$(Identifiers.t3Footer,i).remove(),$(Identifiers.moduleBody).html(i.html())}))})).then((function(){MultiStepWizard.show()}))}))}function removeFormSetup(e){$(Identifiers.removeFormModalTrigger).on(\"click\",(function(t){const a=[];t.preventDefault();const r=$(t.currentTarget);a.push({text:TYPO3.lang[\"formManager.cancel\"],active:!0,btnClass:\"btn-default\",name:\"cancel\",trigger:function(e,t){t.hideModal()}}),a.push({text:TYPO3.lang[\"formManager.remove_form\"],active:!0,btnClass:\"btn-danger\",name:\"createform\",trigger:function(t,a){document.location=e.getAjaxEndpoint(\"delete\")+\"&formPersistenceIdentifier=\"+r.data(\"formPersistenceIdentifier\"),a.hideModal()}}),Modal.show(TYPO3.lang[\"formManager.remove_form_title\"],TYPO3.lang[\"formManager.remove_form_message\"].replace(\"{0}\",r.data(\"formName\")),Severity.error,a)}))}function duplicateFormSetup(e){$(Identifiers.duplicateFormModalTrigger).on(\"click\",(function(t){t.preventDefault();const a=$(t.currentTarget);MultiStepWizard.addSlide(\"duplicate-form-step-1\",TYPO3.lang[\"formManager.duplicateFormWizard.step1.title\"].replace(\"{0}\",a.data(\"formName\")),\"\",Severity.notice,top.TYPO3.lang[\"wizard.progressStep.configure\"],(function(t){let r,i;MultiStepWizard.lockPrevStep(),MultiStepWizard.lockNextStep();const o=MultiStepWizard.setup.$carousel.closest(\".modal\"),n=o.find(\".modal-footer\").find('button[name=\"next\"]'),l=e.getAccessibleFormStorageFolders();if(e.assert(l.length>0,\"No accessible form storage folders\",1477649539),MultiStepWizard.set(\"formPersistenceIdentifier\",a.data(\"formPersistenceIdentifier\")),MultiStepWizard.set(\"savePath\",l[0].value),l.length>1){i=$('<select id=\"duplicate-form-save-path\" class=\"form-select\" data-identifier=\"duplicateFormSavePath\" />');for(let e=0,t=l.length;e<t;++e){const t=new Option(l[e].label,l[e].value);$(i).append(t)}}r='<div class=\"duplicate-form-modal\"><h2 class=\"h3 form-section-headline\">'+TYPO3.lang[\"formManager.new_form_name\"]+'</h2><div class=\"mb-3\"><label for=\"duplicate-form-name\"><strong>'+TYPO3.lang[\"formManager.form_name\"]+'</strong></label><div class=\"formengine-field-item t3js-formengine-field-item\"><div class=\"form-description\">'+TYPO3.lang[\"formManager.form_name_description\"]+'</div><div class=\"form-control-wrap\"><input id=\"duplicate-form-name\" class=\"form-control has-error\" data-identifier=\"duplicateFormName\" /></div></div></div>',i&&(r+='<div class=\"mb-3\"><label for=\"duplicate-form-save-path\"><strong>'+TYPO3.lang[\"formManager.form_save_path\"]+'</strong></label><div class=\"formengine-field-item t3js-formengine-field-item\"><div class=\"form-description\">'+TYPO3.lang[\"formManager.form_save_path_description\"]+'</div><div class=\"form-control-wrap\">'+$(i)[0].outerHTML+\"</div></div></div>\"),r+=\"</div>\",t.html(r),$(Identifiers.duplicateFormName,o).focus(),$(Identifiers.duplicateFormName,o).on(\"keyup paste\",(function(e){const t=$(event.currentTarget);t.val().length>0?(t.removeClass(\"has-error\"),MultiStepWizard.unlockNextStep(),MultiStepWizard.set(\"formName\",t.val()),\"code\"in e&&\"Enter\"===e.code&&MultiStepWizard.triggerStepButton(\"next\")):(t.addClass(\"has-error\"),MultiStepWizard.lockNextStep())})),n.on(\"click\",(async function(){MultiStepWizard.setup.forceSelection=!1,MultiStepWizard.set(\"confirmationDuplicateFormName\",a.data(\"formName\")),l.length>1?(MultiStepWizard.set(\"savePath\",$(Identifiers.duplicateFormSavePath+\" option:selected\",o).val()),MultiStepWizard.set(\"confirmationDuplicateFormSavePath\",$(Identifiers.duplicateFormSavePath+\" option:selected\",o).text())):(MultiStepWizard.set(\"savePath\",l[0].value),MultiStepWizard.set(\"confirmationDuplicateFormSavePath\",l[0].label)),t.html($(\"<div />\",{class:\"text-center\"}).append(await Icons.getIcon(\"spinner-circle\",Icons.sizes.default,null,null)).prop(\"outerHTML\"))}))})),MultiStepWizard.addSlide(\"duplicate-form-step-2\",TYPO3.lang[\"formManager.duplicateFormWizard.step2.title\"],\"\",Severity.notice,TYPO3.lang[\"formManager.duplicateFormWizard.step2.progressLabel\"],(async function(e,t){const a=await Icons.getIcon(\"actions-file-t3d\",Icons.sizes.small),r=await Icons.getIcon(\"actions-tag\",Icons.sizes.small),i=await Icons.getIcon(\"actions-database\",Icons.sizes.small);MultiStepWizard.unlockPrevStep(),MultiStepWizard.unlockNextStep();const o=MultiStepWizard.setup.$carousel.closest(\".modal\").find(\".modal-footer\").find('button[name=\"next\"]');let n='<div class=\"new-form-modal\"><div class=\"row\"><div class=\"col\">';n+='<div class=\"mb-3\"><h5 class=\"form-section-headline\">'+TYPO3.lang[\"formManager.duplicateFormWizard.step2.check\"]+\"</h5><p>\"+TYPO3.lang[\"formManager.newFormWizard.step3.message\"]+'</p></div><div class=\"alert alert-notice\"><div class=\"dropdown-table-row\"><div class=\"dropdown-table-column dropdown-table-icon\">'+a+'</div><div class=\"dropdown-table-column dropdown-table-title\">'+TYPO3.lang[\"formManager.form_copied\"]+'</div><div class=\"dropdown-table-column dropdown-table-value\">'+securityUtility.encodeHtml(t.confirmationDuplicateFormName)+'</div></div><div class=\"dropdown-table-row\"><div class=\"dropdown-table-column dropdown-table-icon\">'+r+'</div><div class=\"dropdown-table-column dropdown-table-title\">'+TYPO3.lang[\"formManager.form_name\"]+'</div><div class=\"dropdown-table-column dropdown-table-value\">'+securityUtility.encodeHtml(t.formName)+'</div></div><div class=\"dropdown-table-row\"><div class=\"dropdown-table-column dropdown-table-icon\">'+i+'</div><div class=\"dropdown-table-column dropdown-table-title\">'+TYPO3.lang[\"formManager.form_save_path\"]+'</div><div class=\"dropdown-table-column dropdown-table-value\">'+securityUtility.encodeHtml(t.confirmationDuplicateFormSavePath)+\"</div></div></div>\",n+=\"</div></div></div>\",e.html(n),o.focus(),o.on(\"click\",(async function(){MultiStepWizard.setup.forceSelection=!1,e.html($(\"<div />\",{class:\"text-center\"}).append(await Icons.getIcon(\"spinner-circle\",Icons.sizes.default,null,null)).prop(\"outerHTML\"))}))})),MultiStepWizard.addFinalProcessingSlide((function(){$.post(e.getAjaxEndpoint(\"duplicate\"),{formName:MultiStepWizard.setup.settings.formName,formPersistenceIdentifier:MultiStepWizard.setup.settings.formPersistenceIdentifier,savePath:MultiStepWizard.setup.settings.savePath},(function(e){\"success\"===e.status?document.location=e.url:Notification.error(TYPO3.lang[\"formManager.duplicateFormWizard.step3.errorTitle\"],TYPO3.lang[\"formManager.duplicateFormWizard.step3.errorMessage\"]+\" \"+e.message),MultiStepWizard.dismiss()})).fail((function(e,t,a){const r=(new DOMParser).parseFromString(e.responseText,\"text/html\"),i=$(r.body);Notification.error(t,a,2),MultiStepWizard.dismiss(),$(Identifiers.t3Logo,i).remove(),$(Identifiers.t3Footer,i).remove(),$(Identifiers.moduleBody).html(i.html())}))})).then((function(){MultiStepWizard.show()}))}))}function showReferencesSetup(e){$(Identifiers.showReferences).on(\"click\",(t=>{t.preventDefault();const a=$(t.currentTarget),r=e.getAjaxEndpoint(\"references\")+\"&formPersistenceIdentifier=\"+a.data(\"formPersistenceIdentifier\");$.get(r,(async function(e){let t;const r=[];r.push({text:TYPO3.lang[\"formManager.cancel\"],active:!0,btnClass:\"btn-default\",name:\"cancel\",trigger:function(e,t){t.hideModal()}});const i=e.references.length,o=await Icons.getIcon(\"actions-open\",Icons.sizes.small);if(i>0){t='<div><h2 class=\"h3\">'+TYPO3.lang[\"formManager.references.headline\"].replace(\"{0}\",securityUtility.encodeHtml(a.data(\"formName\")))+'</h2></div><div class=\"table-fit\"><table id=\"forms\" class=\"table table-striped table-hover\"><thead><tr><th class=\"col-icon\"></th><th class=\"col-recordtitle\">'+TYPO3.lang[\"formManager.table.field.title\"]+\"</th><th>\"+TYPO3.lang[\"formManager.table.field.uid\"]+'</th><th class=\"col-control nowrap\"><span class=\"visually-hidden\">'+TYPO3.lang[\"formManager.table.field._CONTROL_\"]+\"</span></th></tr></thead><tbody>\";for(let a=0,r=e.references.length;a<r;++a)t+='<tr><td class=\"col-icon\">'+e.references[a].recordIcon+'</td><td class=\"col-recordtitle\"><a href=\"'+securityUtility.encodeHtml(e.references[a].recordEditUrl)+'\" data-identifier=\"referenceLink\">'+securityUtility.encodeHtml(e.references[a].recordTitle)+\"</a></td><td>\"+securityUtility.encodeHtml(e.references[a].recordUid)+'</td><td class=\"col-control\"><div class=\"btn-group\" role=\"group\"><a href=\"'+securityUtility.encodeHtml(e.references[a].recordEditUrl)+'\" data-identifier=\"referenceLink\" class=\"btn btn-default\" title=\"'+TYPO3.lang[\"formManager.btn.edit.title\"]+'\">'+o+\"</a></div></td></tr>\";t+=\"</tbody></table></div>\"}else t=\"<div><h1>\"+TYPO3.lang[\"formManager.references.title\"].replace(\"{0}\",securityUtility.encodeHtml(e.formPersistenceIdentifier))+\"</h1></div><div>\"+TYPO3.lang[\"formManager.no_references\"]+\"</div>\";t=$(t),$(Identifiers.referenceLink,t).on(\"click\",(function(e){e.preventDefault(),Modal.currentModal.hideModal(),document.location=$(e.currentTarget).prop(\"href\")})),Modal.show(TYPO3.lang[\"formManager.references.title\"].replace(\"{0}\",a.data(\"formName\")),t,Severity.notice,r)})).fail((function(e,t,a){0!==e.status&&Notification.error(t,a,2)}))}))}function initializeSortable(){const e=document.querySelector(Identifiers.formsTable);null!==e&&new SortableTable(e)}!function(e){e.newFormModalTrigger='[data-identifier=\"newForm\"]',e.duplicateFormModalTrigger='[data-identifier=\"duplicateForm\"]',e.removeFormModalTrigger='[data-identifier=\"removeForm\"]',e.newFormModeButton='[data-identifier=\"newFormModeButton\"]',e.newFormName='[data-identifier=\"newFormName\"]',e.newFormSavePath='[data-identifier=\"newFormSavePath\"]',e.newFormPrototypeName='[data-identifier=\"newFormPrototypeName\"]',e.newFormTemplate='[data-identifier=\"newFormTemplate\"]',e.duplicateFormName='[data-identifier=\"duplicateFormName\"]',e.duplicateFormSavePath='[data-identifier=\"duplicateFormSavePath\"]',e.showReferences='[data-identifier=\"showReferences\"]',e.referenceLink='[data-identifier=\"referenceLink\"]',e.moduleBody=\".module-body.t3js-module-body\",e.t3Logo=\".t3-message-page-logo\",e.t3Footer=\"#t3-footer\",e.formsTable=\"#forms\"}(Identifiers||(Identifiers={}));export function bootstrap(e){removeFormSetup(e),newFormSetup(e),duplicateFormSetup(e),showReferencesSetup(e),initializeSortable()}",
      "",
      "[Added Lines]",
      "[None]",
      "",
      "---------------"
    ]
  },
  "candidates": [
    {
      "candidate_hash": "88d57afc4a6bdf1b14ea72f955984755f22b6ab0",
      "candidate_info": {
        "commit_hash": "88d57afc4a6bdf1b14ea72f955984755f22b6ab0",
        "repo": "TYPO3-CMS/form",
        "commit_url": "https://github.com/TYPO3-CMS/form/commit/88d57afc4a6bdf1b14ea72f955984755f22b6ab0",
        "files": [
          "Resources/Private/Templates/Backend/FormManager/Index.html",
          "Resources/Public/JavaScript/backend/form-manager/view-model.js"
        ],
        "message": "[FEATURE] Make form listing sortable\n\nThe form listing in the form backend\nmodule is now sortable.\n\nResolves: #104067\nReleases: main\nChange-Id: Ib950e17b6b8a350b07e3340ce948969da7fed69d\nReviewed-on: https://review.typo3.org/c/Packages/TYPO3.CMS/+/84656\nTested-by: core-ci <typo3@b13.com>\nReviewed-by: Andreas Nedbal <andy@pixelde.su>\nTested-by: Andreas Nedbal <andy@pixelde.su>\nReviewed-by: Oliver Bartsch <bo@cedev.de>\nTested-by: Andreas Kienast <a.fernandez@scripting-base.de>\nReviewed-by: Andreas Kienast <a.fernandez@scripting-base.de>\nTested-by: Oliver Bartsch <bo@cedev.de>",
        "before_after_code_files": [
          "Resources/Private/Templates/Backend/FormManager/Index.html||Resources/Private/Templates/Backend/FormManager/Index.html",
          "Resources/Public/JavaScript/backend/form-manager/view-model.js||Resources/Public/JavaScript/backend/form-manager/view-model.js"
        ]
      },
      "candidate_patch_features": {
        "candidate_earlier_than_patch": 1,
        "same_branch_evolution": 1,
        "olp_code_files": {
          "patch": [
            "Resources/Private/Templates/Backend/FormManager/Index.html||Resources/Private/Templates/Backend/FormManager/Index.html",
            "Resources/Public/JavaScript/backend/form-manager/view-model.js||Resources/Public/JavaScript/backend/form-manager/view-model.js"
          ],
          "candidate": [
            "Resources/Private/Templates/Backend/FormManager/Index.html||Resources/Private/Templates/Backend/FormManager/Index.html",
            "Resources/Public/JavaScript/backend/form-manager/view-model.js||Resources/Public/JavaScript/backend/form-manager/view-model.js"
          ]
        }
      },
      "candidate_diff": {
        "Resources/Private/Templates/Backend/FormManager/Index.html||Resources/Private/Templates/Backend/FormManager/Index.html": [
          "File: Resources/Private/Templates/Backend/FormManager/Index.html -> Resources/Private/Templates/Backend/FormManager/Index.html",
          "--- Hunk 1 ---",
          "[Context before]",
          "38:                 <table id=\"forms\" class=\"table table-striped table-hover\">",
          "39:                     <thead>",
          "40:                         <tr>",
          "42:                             <th><f:translate key=\"LLL:EXT:form/Resources/Private/Language/Database.xlf:formManager.form_name\" /></th>",
          "43:                             <th><f:translate key=\"LLL:EXT:form/Resources/Private/Language/Database.xlf:formManager.location\" /></th>",
          "46:                         </tr>",
          "47:                     </thead>",
          "48:                     <tbody>",
          "",
          "[Removed Lines]",
          "41:                             <th></th>",
          "44:                             <th></th>",
          "45:                             <th></th>",
          "",
          "[Added Lines]",
          "41:                             <th data-sort-method=\"none\"></th>",
          "44:                             <th><f:translate key=\"LLL:EXT:form/Resources/Private/Language/Database.xlf:formManager.references\" /></th>",
          "45:                             <th data-sort-method=\"none\"></th>",
          "",
          "---------------",
          "--- Hunk 2 ---",
          "[Context before]",
          "83:                                         <f:then>",
          "84:                                             <a href=\"#\" data-identifier=\"showReferences\" data-form-persistence-identifier=\"{form.persistenceIdentifier}\" data-form-name=\"{form.name}\">",
          "85:                                                 <span class=\"badge badge-info\">",
          "87:                                                 </span>",
          "88:                                             </a>",
          "89:                                         </f:then>",
          "90:                                         <f:else>",
          "91:                                             <span class=\"badge badge-default\">",
          "93:                                             </span>",
          "94:                                         </f:else>",
          "95:                                     </f:if>",
          "",
          "[Removed Lines]",
          "86:                                                     {form.referenceCount} <f:translate key=\"LLL:EXT:form/Resources/Private/Language/Database.xlf:formManager.references\"/>",
          "92:                                                 {form.referenceCount} <f:translate key=\"LLL:EXT:form/Resources/Private/Language/Database.xlf:formManager.references\"/>",
          "",
          "[Added Lines]",
          "86:                                                     {form.referenceCount}",
          "92:                                                 {form.referenceCount}",
          "",
          "---------------"
        ],
        "Resources/Public/JavaScript/backend/form-manager/view-model.js||Resources/Public/JavaScript/backend/form-manager/view-model.js": [
          "File: Resources/Public/JavaScript/backend/form-manager/view-model.js -> Resources/Public/JavaScript/backend/form-manager/view-model.js",
          "--- Hunk 1 ---",
          "[Context before]",
          "[No context available]",
          "",
          "[Removed Lines]",
          "13: import $ from\"jquery\";import Modal from\"@typo3/backend/modal.js\";import Severity from\"@typo3/backend/severity.js\";import MultiStepWizard from\"@typo3/backend/multi-step-wizard.js\";import Icons from\"@typo3/backend/icons.js\";import Notification from\"@typo3/backend/notification.js\";import SecurityUtility from\"@typo3/core/security-utility.js\";import{selector}from\"@typo3/core/literals.js\";const securityUtility=new SecurityUtility;var Identifiers;function newFormSetup(e){$(Identifiers.newFormModalTrigger).on(\"click\",(function(t){t.preventDefault(),MultiStepWizard.addSlide(\"new-form-step-1\",TYPO3.lang[\"formManager.newFormWizard.step1.title\"],\"\",Severity.info,TYPO3.lang[\"formManager.newFormWizard.step1.progressLabel\"],(async function(t){const a=await Icons.getIcon(\"actions-plus\",Icons.sizes.small),r=await Icons.getIcon(\"form-page\",Icons.sizes.large),i=await Icons.getIcon(\"apps-pagetree-page-default\",Icons.sizes.large);let o;const n=MultiStepWizard.setup.$carousel.closest(\".modal\"),l=n.find(\".modal-footer\").find('button[name=\"next\"]');MultiStepWizard.blurCancelStep(),MultiStepWizard.lockNextStep(),MultiStepWizard.lockPrevStep();0===e.getAccessibleFormStorageFolders().length&&(o='<div class=\"new-form-modal\"><div class=\"row\"><label class=\"col col-form-label\">'+TYPO3.lang[\"formManager.newFormWizard.step1.noStorages\"]+\"</label></div></div>\",t.html(o),e.assert(!1,\"No accessible form storage folders\",1477506500)),o='<div class=\"new-form-modal\">',o+='<div class=\"card-container\"><div class=\"card card-size-medium\"><div class=\"card-header\"><div class=\"card-icon\">'+i+'</div><div class=\"card-header-body\"><h2 class=\"card-title\">'+TYPO3.lang[\"formManager.blankForm.label\"]+'</h2><span class=\"card-subtitle\">'+TYPO3.lang[\"formManager.blankForm.subtitle\"]+'</span></div></div><div class=\"card-body\"><p class=\"card-text\">'+TYPO3.lang[\"formManager.blankForm.description\"]+'</p></div><div class=\"card-footer\"><button type=\"button\" class=\"btn btn-success\" data-inline=\"1\" value=\"blank\" data-identifier=\"newFormModeButton\">'+a+\" \"+TYPO3.lang[\"formManager.blankForm.label\"]+'</button></div></div><div class=\"card card-size-medium\"><div class=\"card-header\"><div class=\"card-icon\">'+r+'</div><div class=\"card-header-body\"><h2 class=\"card-title\">'+TYPO3.lang[\"formManager.predefinedForm.label\"]+'</h2><span class=\"card-subtitle\">'+TYPO3.lang[\"formManager.predefinedForm.subtitle\"]+'</span></div></div><div class=\"card-body\"><p class=\"card-text\">'+TYPO3.lang[\"formManager.predefinedForm.description\"]+'</p></div><div class=\"card-footer\"><button type=\"button\" class=\"btn btn-success\" data-inline=\"1\" value=\"predefined\" data-identifier=\"newFormModeButton\">'+a+\" \"+TYPO3.lang[\"formManager.predefinedForm.label\"]+\"</button></div></div>\",o+=\"</div>\",t.html(o),$(Identifiers.newFormModeButton,n).on(\"click\",(function(e){MultiStepWizard.set(\"newFormMode\",$(e.currentTarget).val()),MultiStepWizard.next()})),l.on(\"click\",(async function(){t.html($(\"<div />\",{class:\"text-center\"}).append(await Icons.getIcon(\"spinner-circle\",Icons.sizes.default,null,null)).prop(\"outerHTML\"))}))})),MultiStepWizard.addSlide(\"new-form-step-2\",TYPO3.lang[\"formManager.newFormWizard.step2.title\"],\"\",Severity.info,top.TYPO3.lang[\"wizard.progressStep.configure\"],(function(t,a){let r,i;MultiStepWizard.lockNextStep(),MultiStepWizard.unlockPrevStep();const o=MultiStepWizard.setup.$carousel.closest(\".modal\"),n=o.find(\".modal-footer\").find('button[name=\"next\"]'),l=e.getAccessibleFormStorageFolders();if(a.savePath||(MultiStepWizard.set(\"savePath\",l[0].value),MultiStepWizard.set(\"savePathName\",l[0].label)),l.length>1){i=$('<select class=\"new-form-save-path form-select\" id=\"new-form-save-path\" data-identifier=\"newFormSavePath\" />');for(let e=0,t=l.length;e<t;++e){const t=new Option(l[e].label,l[e].value);$(i).append(t)}}const s=e.getPrototypes();e.assert(s.length>0,\"No prototypes available\",1477506501),a.prototypeName||(MultiStepWizard.set(\"prototypeName\",s[0].value),MultiStepWizard.set(\"prototypeNameName\",s[0].label));const d=$('<select class=\"new-form-prototype-name form-select\" id=\"new-form-prototype-name\" data-identifier=\"newFormPrototypeName\" />');for(let e=0,t=s.length;e<t;++e){const t=new Option(s[e].label,s[e].value);$(d).append(t)}let c=e.getTemplatesForPrototype(s[0].value);e.assert(c.length>0,\"No templates available\",1477506502),a.templatePath||(MultiStepWizard.set(\"templatePath\",c[0].value),MultiStepWizard.set(\"templatePathName\",c[0].label));const m=$('<select class=\"new-form-template form-select\" id=\"new-form-template\" data-identifier=\"newFormTemplate\" />');for(let e=0,t=c.length;e<t;++e){const t=new Option(c[e].label,c[e].value);$(m).append(t)}r='<div class=\"new-form-modal\">',\"blank\"===a.newFormMode?(r+='<h5 class=\"form-section-headline\">'+TYPO3.lang[\"formManager.blankForm.label\"]+\"</h5>\",MultiStepWizard.set(\"templatePath\",\"EXT:form/Resources/Private/Backend/Templates/FormEditor/Yaml/NewForms/BlankForm.yaml\"),MultiStepWizard.set(\"templatePathName\",TYPO3.lang[\"formManager.blankForm.label\"])):(r+='<h5 class=\"form-section-headline\">'+TYPO3.lang[\"formManager.predefinedForm.label\"]+\"</h5>\",s.length>1&&(r+='<div class=\"mb-3\"><label for=\"new-form-prototype-name\"><strong>'+TYPO3.lang[\"formManager.form_prototype\"]+'</strong></label><div class=\"formengine-field-item t3js-formengine-field-item\"><div class=\"form-control-wrap\">'+$(d)[0].outerHTML+\"</div></div></div>\"),c.length>1&&(r+='<div class=\"mb-3\"><label for=\"new-form-template\"><strong>'+TYPO3.lang[\"formManager.form_template\"]+'</strong></label><div class=\"formengine-field-item t3js-formengine-field-item\"><div class=\"form-description\">'+TYPO3.lang[\"formManager.form_template_description\"]+'</div><div class=\"form-control-wrap\">'+$(m)[0].outerHTML+\"</div></div></div>\")),r+='<div class=\"mb-3\"><label for=\"new-form-name\"><strong>'+TYPO3.lang[\"formManager.form_name\"]+'</strong></label><div class=\"formengine-field-item t3js-formengine-field-item\"><div class=\"form-description\">'+TYPO3.lang[\"formManager.form_name_description\"]+'</div><div class=\"form-control-wrap\">',a.formName?(r+='<input class=\"form-control\" id=\"new-form-name\" data-identifier=\"newFormName\" value=\"'+securityUtility.encodeHtml(a.formName)+'\" />',setTimeout((function(){MultiStepWizard.unlockNextStep()}),200)):r+='<input class=\"form-control has-error\" id=\"new-form-name\" data-identifier=\"newFormName\" />',r+=\"</div></div></div>\",i&&(r+='<div class=\"mb-3\"><label for=\"new-form-save-path\"><strong>'+TYPO3.lang[\"formManager.form_save_path\"]+'</strong></label><div class=\"formengine-field-item t3js-formengine-field-item\"><div class=\"form-description\">'+TYPO3.lang[\"formManager.form_save_path_description\"]+'</div><div class=\"form-control-wrap\">'+$(i)[0].outerHTML+\"</div></div></div>\"),r+=\"</div>\",t.html(r),a.savePath&&$(Identifiers.newFormSavePath,o).val(a.savePath),a.templatePath&&$(Identifiers.newFormTemplate,o).val(a.templatePath),s.length>1?$(Identifiers.newFormPrototypeName,o).focus():c.length>1&&$(Identifiers.newFormTemplate,o).focus();const p=function(){$(Identifiers.newFormTemplate,o).on(\"change\",(function(){MultiStepWizard.set(\"templatePath\",$(Identifiers.newFormTemplate+\" option:selected\",o).val()),MultiStepWizard.set(\"templatePathName\",$(Identifiers.newFormTemplate+\" option:selected\",o).text()),MultiStepWizard.set(\"templatePathOnPrev\",$(Identifiers.newFormTemplate+\" option:selected\",o).val())}))};$(Identifiers.newFormPrototypeName,o).on(\"change\",(function(t){MultiStepWizard.set(\"prototypeName\",$(Identifiers.newFormPrototypeName+\" option:selected\",o).val()),MultiStepWizard.set(\"prototypeNameName\",$(Identifiers.newFormPrototypeName+\" option:selected\",o).text()),c=e.getTemplatesForPrototype($(t.currentTarget).val()),$(Identifiers.newFormTemplate,o).off().empty();for(let e=0,t=c.length;e<t;++e){const t=new Option(c[e].label,c[e].value);$(Identifiers.newFormTemplate,o).append(t),MultiStepWizard.set(\"templatePath\",c[0].value),MultiStepWizard.set(\"templatePathName\",c[0].label)}p()})),p(),a.prototypeName&&($(Identifiers.newFormPrototypeName,o).val(a.prototypeName),$(Identifiers.newFormPrototypeName,o).trigger(\"change\"),a.templatePathOnPrev&&($(Identifiers.newFormTemplate,o).find(selector`option[value=\"${a.templatePathOnPrev}\"]`).prop(\"selected\",!0),$(Identifiers.newFormTemplate,o).trigger(\"change\"))),$(Identifiers.newFormName,o).focus(),$(Identifiers.newFormName,o).on(\"keyup paste\",(function(e){$(e.currentTarget).val().length>0?($(e.currentTarget).removeClass(\"has-error\"),MultiStepWizard.unlockNextStep(),MultiStepWizard.set(\"formName\",$(e.currentTarget).val()),\"code\"in e&&\"Enter\"===e.code&&MultiStepWizard.triggerStepButton(\"next\")):($(e.currentTarget).addClass(\"has-error\"),MultiStepWizard.lockNextStep())})),$(Identifiers.newFormSavePath,o).on(\"change\",(function(){MultiStepWizard.set(\"savePath\",$(Identifiers.newFormSavePath+\" option:selected\",o).val()),MultiStepWizard.set(\"savePathName\",$(Identifiers.newFormSavePath+\" option:selected\",o).text())})),\"blank\"===a.newFormMode||a.templatePathName||MultiStepWizard.set(\"templatePathName\",$(Identifiers.newFormTemplate+\" option:selected\",o).text()),n.on(\"click\",(async function(){MultiStepWizard.setup.forceSelection=!1,t.html($(\"<div />\",{class:\"text-center\"}).append(await Icons.getIcon(\"spinner-circle\",Icons.sizes.default,null,null)).prop(\"outerHTML\"))}))})),MultiStepWizard.addSlide(\"new-form-step-3\",TYPO3.lang[\"formManager.newFormWizard.step3.title\"],\"\",Severity.info,TYPO3.lang[\"formManager.newFormWizard.step3.progressLabel\"],(async function(e,t){const a=await Icons.getIcon(\"actions-cog\",Icons.sizes.small),r=await Icons.getIcon(\"actions-file-t3d\",Icons.sizes.small),i=await Icons.getIcon(\"actions-tag\",Icons.sizes.small),o=await Icons.getIcon(\"actions-database\",Icons.sizes.small),n=MultiStepWizard.setup.$carousel.closest(\".modal\").find(\".modal-footer\").find('button[name=\"next\"]');let l='<div class=\"new-form-modal\">';l+='<div class=\"mb-3\"><h5 class=\"form-section-headline\">'+TYPO3.lang[\"formManager.newFormWizard.step3.check\"]+\"</h5><p>\"+TYPO3.lang[\"formManager.newFormWizard.step3.message\"]+'</p></div><div class=\"alert alert-notice\"><div class=\"alert-body mt-1\">',t.prototypeNameName&&(l+='<div class=\"row my-1\"><div class=\"col col-sm-6\">'+a+\" \"+TYPO3.lang[\"formManager.form_prototype\"]+'</div><div class=\"col\">'+securityUtility.encodeHtml(t.prototypeNameName)+\"</div></div>\"),t.templatePathName&&(l+='<div class=\"row my-1\"><div class=\"col col-sm-6\">'+r+\" \"+TYPO3.lang[\"formManager.form_template\"]+'</div><div class=\"col\">'+securityUtility.encodeHtml(t.templatePathName)+\"</div></div>\"),l+='<div class=\"row my-1\"><div class=\"col col-sm-6\">'+i+\" \"+TYPO3.lang[\"formManager.form_name\"]+'</div><div class=\"col\">'+securityUtility.encodeHtml(t.formName)+'</div></div><div class=\"row my-1\"><div class=\"col col-sm-6\">'+o+\" \"+TYPO3.lang[\"formManager.form_save_path\"]+'</div><div class=\"col\">'+securityUtility.encodeHtml(t.savePathName)+\"</div></div>\",l+=\"</div></div></div>\",e.html(l),n.focus(),n.on(\"click\",(async function(){MultiStepWizard.setup.forceSelection=!1,e.html($(\"<div />\",{class:\"text-center\"}).append(await Icons.getIcon(\"spinner-circle\",Icons.sizes.default,null,null)).prop(\"outerHTML\"))}))})),MultiStepWizard.addFinalProcessingSlide((function(){$.post(e.getAjaxEndpoint(\"create\"),{formName:MultiStepWizard.setup.settings.formName,templatePath:MultiStepWizard.setup.settings.templatePath,prototypeName:MultiStepWizard.setup.settings.prototypeName,savePath:MultiStepWizard.setup.settings.savePath},(function(e){\"success\"===e.status?document.location=e.url:Notification.error(TYPO3.lang[\"formManager.newFormWizard.step4.errorTitle\"],TYPO3.lang[\"formManager.newFormWizard.step4.errorMessage\"]+\" \"+e.message),MultiStepWizard.dismiss()})).fail((function(e,t,a){const r=(new DOMParser).parseFromString(e.responseText,\"text/html\"),i=$(r.body);Notification.error(t,a,2),MultiStepWizard.dismiss(),$(Identifiers.t3Logo,i).remove(),$(Identifiers.t3Footer,i).remove(),$(Identifiers.moduleBody).html(i.html())}))})).then((function(){MultiStepWizard.show()}))}))}function removeFormSetup(e){$(Identifiers.removeFormModalTrigger).on(\"click\",(function(t){const a=[];t.preventDefault();const r=$(t.currentTarget);a.push({text:TYPO3.lang[\"formManager.cancel\"],active:!0,btnClass:\"btn-default\",name:\"cancel\",trigger:function(e,t){t.hideModal()}}),a.push({text:TYPO3.lang[\"formManager.remove_form\"],active:!0,btnClass:\"btn-warning\",name:\"createform\",trigger:function(t,a){document.location=e.getAjaxEndpoint(\"delete\")+\"&formPersistenceIdentifier=\"+r.data(\"formPersistenceIdentifier\"),a.hideModal()}}),Modal.show(TYPO3.lang[\"formManager.remove_form_title\"],TYPO3.lang[\"formManager.remove_form_message\"],Severity.warning,a)}))}function duplicateFormSetup(e){$(Identifiers.duplicateFormModalTrigger).on(\"click\",(function(t){t.preventDefault();const a=$(t.currentTarget);MultiStepWizard.addSlide(\"duplicate-form-step-1\",TYPO3.lang[\"formManager.duplicateFormWizard.step1.title\"].replace(\"{0}\",a.data(\"formName\")),\"\",Severity.info,top.TYPO3.lang[\"wizard.progressStep.configure\"],(function(t){let r,i;MultiStepWizard.lockPrevStep(),MultiStepWizard.lockNextStep();const o=MultiStepWizard.setup.$carousel.closest(\".modal\"),n=o.find(\".modal-footer\").find('button[name=\"next\"]'),l=e.getAccessibleFormStorageFolders();if(e.assert(l.length>0,\"No accessible form storage folders\",1477649539),MultiStepWizard.set(\"formPersistenceIdentifier\",a.data(\"formPersistenceIdentifier\")),MultiStepWizard.set(\"savePath\",l[0].value),l.length>1){i=$('<select id=\"duplicate-form-save-path\" class=\"form-select\" data-identifier=\"duplicateFormSavePath\" />');for(let e=0,t=l.length;e<t;++e){const t=new Option(l[e].label,l[e].value);$(i).append(t)}}r='<div class=\"duplicate-form-modal\"><h5 class=\"form-section-headline\">'+TYPO3.lang[\"formManager.new_form_name\"]+'</h5><div class=\"mb-3\"><label for=\"duplicate-form-name\"><strong>'+TYPO3.lang[\"formManager.form_name\"]+'</strong></label><div class=\"formengine-field-item t3js-formengine-field-item\"><div class=\"form-description\">'+TYPO3.lang[\"formManager.form_name_description\"]+'</div><div class=\"form-control-wrap\"><input id=\"duplicate-form-name\" class=\"form-control has-error\" data-identifier=\"duplicateFormName\" /></div></div></div>',i&&(r+='<div class=\"mb-3\"><label for=\"duplicate-form-save-path\"><strong>'+TYPO3.lang[\"formManager.form_save_path\"]+'</strong></label><div class=\"formengine-field-item t3js-formengine-field-item\"><div class=\"form-description\">'+TYPO3.lang[\"formManager.form_save_path_description\"]+'</div><div class=\"form-control-wrap\">'+$(i)[0].outerHTML+\"</div></div></div>\"),r+=\"</div>\",t.html(r),$(Identifiers.duplicateFormName,o).focus(),$(Identifiers.duplicateFormName,o).on(\"keyup paste\",(function(e){const t=$(event.currentTarget);t.val().length>0?(t.removeClass(\"has-error\"),MultiStepWizard.unlockNextStep(),MultiStepWizard.set(\"formName\",t.val()),\"code\"in e&&\"Enter\"===e.code&&MultiStepWizard.triggerStepButton(\"next\")):(t.addClass(\"has-error\"),MultiStepWizard.lockNextStep())})),n.on(\"click\",(async function(){MultiStepWizard.setup.forceSelection=!1,MultiStepWizard.set(\"confirmationDuplicateFormName\",a.data(\"formName\")),l.length>1?(MultiStepWizard.set(\"savePath\",$(Identifiers.duplicateFormSavePath+\" option:selected\",o).val()),MultiStepWizard.set(\"confirmationDuplicateFormSavePath\",$(Identifiers.duplicateFormSavePath+\" option:selected\",o).text())):(MultiStepWizard.set(\"savePath\",l[0].value),MultiStepWizard.set(\"confirmationDuplicateFormSavePath\",l[0].label)),t.html($(\"<div />\",{class:\"text-center\"}).append(await Icons.getIcon(\"spinner-circle\",Icons.sizes.default,null,null)).prop(\"outerHTML\"))}))})),MultiStepWizard.addSlide(\"duplicate-form-step-2\",TYPO3.lang[\"formManager.duplicateFormWizard.step2.title\"],\"\",Severity.info,TYPO3.lang[\"formManager.duplicateFormWizard.step2.progressLabel\"],(async function(e,t){const a=await Icons.getIcon(\"actions-file-t3d\",Icons.sizes.small),r=await Icons.getIcon(\"actions-tag\",Icons.sizes.small),i=await Icons.getIcon(\"actions-database\",Icons.sizes.small);MultiStepWizard.unlockPrevStep(),MultiStepWizard.unlockNextStep();const o=MultiStepWizard.setup.$carousel.closest(\".modal\").find(\".modal-footer\").find('button[name=\"next\"]');let n='<div class=\"new-form-modal\"><div class=\"row\"><div class=\"col\">';n+='<div class=\"mb-3\"><h5 class=\"form-section-headline\">'+TYPO3.lang[\"formManager.duplicateFormWizard.step2.check\"]+\"</h5><p>\"+TYPO3.lang[\"formManager.newFormWizard.step3.message\"]+'</p></div><div class=\"alert alert-notice\"><div class=\"alert-body mt-1\"><div class=\"dropdown-table-row\"><div class=\"dropdown-table-column dropdown-table-icon\">'+a+'</div><div class=\"dropdown-table-column dropdown-table-title\">'+TYPO3.lang[\"formManager.form_copied\"]+'</div><div class=\"dropdown-table-column dropdown-table-value\">'+securityUtility.encodeHtml(t.confirmationDuplicateFormName)+'</div></div><div class=\"dropdown-table-row\"><div class=\"dropdown-table-column dropdown-table-icon\">'+r+'</div><div class=\"dropdown-table-column dropdown-table-title\">'+TYPO3.lang[\"formManager.form_name\"]+'</div><div class=\"dropdown-table-column dropdown-table-value\">'+securityUtility.encodeHtml(t.formName)+'</div></div><div class=\"dropdown-table-row\"><div class=\"dropdown-table-column dropdown-table-icon\">'+i+'</div><div class=\"dropdown-table-column dropdown-table-title\">'+TYPO3.lang[\"formManager.form_save_path\"]+'</div><div class=\"dropdown-table-column dropdown-table-value\">'+securityUtility.encodeHtml(t.confirmationDuplicateFormSavePath)+\"</div></div></div></div>\",n+=\"</div></div></div>\",e.html(n),o.focus(),o.on(\"click\",(async function(){MultiStepWizard.setup.forceSelection=!1,e.html($(\"<div />\",{class:\"text-center\"}).append(await Icons.getIcon(\"spinner-circle\",Icons.sizes.default,null,null)).prop(\"outerHTML\"))}))})),MultiStepWizard.addFinalProcessingSlide((function(){$.post(e.getAjaxEndpoint(\"duplicate\"),{formName:MultiStepWizard.setup.settings.formName,formPersistenceIdentifier:MultiStepWizard.setup.settings.formPersistenceIdentifier,savePath:MultiStepWizard.setup.settings.savePath},(function(e){\"success\"===e.status?document.location=e.url:Notification.error(TYPO3.lang[\"formManager.duplicateFormWizard.step3.errorTitle\"],TYPO3.lang[\"formManager.duplicateFormWizard.step3.errorMessage\"]+\" \"+e.message),MultiStepWizard.dismiss()})).fail((function(e,t,a){const r=(new DOMParser).parseFromString(e.responseText,\"text/html\"),i=$(r.body);Notification.error(t,a,2),MultiStepWizard.dismiss(),$(Identifiers.t3Logo,i).remove(),$(Identifiers.t3Footer,i).remove(),$(Identifiers.moduleBody).html(i.html())}))})).then((function(){MultiStepWizard.show()}))}))}function showReferencesSetup(e){$(Identifiers.showReferences).on(\"click\",(t=>{t.preventDefault();const a=$(t.currentTarget),r=e.getAjaxEndpoint(\"references\")+\"&formPersistenceIdentifier=\"+a.data(\"formPersistenceIdentifier\");$.get(r,(function(e){let t;const r=[];r.push({text:TYPO3.lang[\"formManager.cancel\"],active:!0,btnClass:\"btn-default\",name:\"cancel\",trigger:function(e,t){t.hideModal()}});if(e.references.length>0){t=\"<div><h3>\"+TYPO3.lang[\"formManager.references.headline\"].replace(\"{0}\",securityUtility.encodeHtml(a.data(\"formName\")))+'</h3></div><div class=\"table-fit\"><table id=\"forms\" class=\"table table-striped table-sm\"><thead><tr><th>'+TYPO3.lang[\"formManager.page\"]+\"</th><th>\"+TYPO3.lang[\"formManager.record\"]+\"</th></tr></thead><tbody>\";for(let a=0,r=e.references.length;a<r;++a)t+=\"<tr><td>\"+securityUtility.encodeHtml(e.references[a].recordPageTitle)+\"</td><td>\"+e.references[a].recordIcon+'<a href=\"'+securityUtility.encodeHtml(e.references[a].recordEditUrl)+'\" data-identifier=\"referenceLink\">'+securityUtility.encodeHtml(e.references[a].recordTitle)+\" (uid: \"+securityUtility.encodeHtml(e.references[a].recordUid)+\")</a></td></tr>\";t+=\"</tbody></table></div>\"}else t=\"<div><h1>\"+TYPO3.lang[\"formManager.references.title\"].replace(\"{0}\",securityUtility.encodeHtml(e.formPersistenceIdentifier))+\"</h1></div><div>\"+TYPO3.lang[\"formManager.no_references\"]+\"</div>\";t=$(t),$(Identifiers.referenceLink,t).on(\"click\",(function(e){e.preventDefault(),Modal.currentModal.hideModal(),document.location=$(e.currentTarget).prop(\"href\")})),Modal.show(TYPO3.lang[\"formManager.references.title\"],t,Severity.info,r)})).fail((function(e,t,a){0!==e.status&&Notification.error(t,a,2)}))}))}!function(e){e.newFormModalTrigger='[data-identifier=\"newForm\"]',e.duplicateFormModalTrigger='[data-identifier=\"duplicateForm\"]',e.removeFormModalTrigger='[data-identifier=\"removeForm\"]',e.newFormModeButton='[data-identifier=\"newFormModeButton\"]',e.newFormName='[data-identifier=\"newFormName\"]',e.newFormSavePath='[data-identifier=\"newFormSavePath\"]',e.newFormPrototypeName='[data-identifier=\"newFormPrototypeName\"]',e.newFormTemplate='[data-identifier=\"newFormTemplate\"]',e.duplicateFormName='[data-identifier=\"duplicateFormName\"]',e.duplicateFormSavePath='[data-identifier=\"duplicateFormSavePath\"]',e.showReferences='[data-identifier=\"showReferences\"]',e.referenceLink='[data-identifier=\"referenceLink\"]',e.moduleBody=\".module-body.t3js-module-body\",e.t3Logo=\".t3-message-page-logo\",e.t3Footer=\"#t3-footer\"}(Identifiers||(Identifiers={}));export function bootstrap(e){removeFormSetup(e),newFormSetup(e),duplicateFormSetup(e),showReferencesSetup(e)}",
          "",
          "[Added Lines]",
          "[None]",
          "",
          "---------------"
        ]
      }
    },
    {
      "candidate_hash": "52b550c617e5990302f222c20f0ebab651d8f545",
      "candidate_info": {
        "commit_hash": "52b550c617e5990302f222c20f0ebab651d8f545",
        "repo": "TYPO3-CMS/form",
        "commit_url": "https://github.com/TYPO3-CMS/form/commit/52b550c617e5990302f222c20f0ebab651d8f545",
        "files": [
          "Resources/Private/Language/Database.xlf",
          "Resources/Private/Language/locallang_formManager_javascript.xlf",
          "Resources/Private/Templates/Backend/FormManager/Index.html",
          "Resources/Public/JavaScript/backend/form-manager/view-model.js"
        ],
        "message": "[TASK] Update display of \"Form\" module list view\n\n* Align display of \"References\" table column with usual system display\n* Increase size of \"Location\" table column\n* Adjust action buttons displayed in table rows\n* Use \"Info\" color for form duplication and references modals\n* Update table, buttons and modal header in references modal\n* Use \"Danger\" color for form deletion modal and update used wording\n\nResolves: #104043\nRelated: #102978\nReleases: main\nChange-Id: I3672dd45605cc4e2ed483168cf86db7529fc2788\nReviewed-on: https://review.typo3.org/c/Packages/TYPO3.CMS/+/84088\nTested-by: Jasmina Lie\u00dfmann <minapokhalo+typo3@gmail.com>\nReviewed-by: Jasmina Lie\u00dfmann <minapokhalo+typo3@gmail.com>\nTested-by: core-ci <typo3@b13.com>\nReviewed-by: Benni Mack <benni@typo3.org>\nTested-by: Jochen Roth <rothjochen@gmail.com>\nTested-by: Benni Mack <benni@typo3.org>\nReviewed-by: Jochen Roth <rothjochen@gmail.com>",
        "before_after_code_files": [
          "Resources/Private/Language/Database.xlf||Resources/Private/Language/Database.xlf",
          "Resources/Private/Language/locallang_formManager_javascript.xlf||Resources/Private/Language/locallang_formManager_javascript.xlf",
          "Resources/Private/Templates/Backend/FormManager/Index.html||Resources/Private/Templates/Backend/FormManager/Index.html",
          "Resources/Public/JavaScript/backend/form-manager/view-model.js||Resources/Public/JavaScript/backend/form-manager/view-model.js"
        ]
      },
      "candidate_patch_features": {
        "candidate_earlier_than_patch": 1,
        "same_branch_evolution": 1,
        "olp_code_files": {
          "patch": [
            "Resources/Private/Templates/Backend/FormManager/Index.html||Resources/Private/Templates/Backend/FormManager/Index.html",
            "Resources/Public/JavaScript/backend/form-manager/view-model.js||Resources/Public/JavaScript/backend/form-manager/view-model.js"
          ],
          "candidate": [
            "Resources/Private/Templates/Backend/FormManager/Index.html||Resources/Private/Templates/Backend/FormManager/Index.html",
            "Resources/Public/JavaScript/backend/form-manager/view-model.js||Resources/Public/JavaScript/backend/form-manager/view-model.js"
          ]
        }
      },
      "candidate_diff": {
        "Resources/Private/Language/Database.xlf||Resources/Private/Language/Database.xlf": [
          "File: Resources/Private/Language/Database.xlf -> Resources/Private/Language/Database.xlf",
          "--- Hunk 1 ---",
          "[Context before]",
          "187:     <source>Location</source>",
          "188:    </trans-unit>",
          "189:    <trans-unit id=\"formManager.references\" resname=\"formManager.references\" xml:space=\"preserve\">",
          "191:    </trans-unit>",
          "192:    <trans-unit id=\"formManager.options\" resname=\"formManager.options\" xml:space=\"preserve\">",
          "193:     <source>Options</source>",
          "194:    </trans-unit>",
          "198:    <trans-unit id=\"formManager.edit_form\" resname=\"formManager.edit_form\" xml:space=\"preserve\">",
          "199:     <source>Edit this form</source>",
          "200:    </trans-unit>",
          "",
          "[Removed Lines]",
          "190:     <source>References</source>",
          "195:    <trans-unit id=\"formManager.show_references\" resname=\"formManager.show_references\" xml:space=\"preserve\">",
          "196:     <source>Show references for this form</source>",
          "197:    </trans-unit>",
          "",
          "[Added Lines]",
          "190:     <source>Ref</source>",
          "",
          "---------------"
        ],
        "Resources/Private/Language/locallang_formManager_javascript.xlf||Resources/Private/Language/locallang_formManager_javascript.xlf": [
          "File: Resources/Private/Language/locallang_formManager_javascript.xlf -> Resources/Private/Language/locallang_formManager_javascript.xlf",
          "--- Hunk 1 ---",
          "[Context before]",
          "37:                 <source>Cancel</source>",
          "38:             </trans-unit>",
          "39:             <trans-unit id=\"formManager.remove_form\" resname=\"formManager.remove_form\" xml:space=\"preserve\">",
          "41:             </trans-unit>",
          "42:             <trans-unit id=\"formManager.remove_form_title\" resname=\"formManager.remove_form_title\" xml:space=\"preserve\">",
          "44:             </trans-unit>",
          "45:             <trans-unit id=\"formManager.remove_form_message\" resname=\"formManager.remove_form_message\" xml:space=\"preserve\">",
          "47:             </trans-unit>",
          "48:             <trans-unit id=\"formManager.newFormWizard.step1.title\" resname=\"formManager.newFormWizard.step1.title\" xml:space=\"preserve\">",
          "49:                 <source>Create new form</source>",
          "",
          "[Removed Lines]",
          "40:                 <source>Remove</source>",
          "43:                 <source>Remove form</source>",
          "46:                 <source>Are you sure that you want to remove this form?</source>",
          "",
          "[Added Lines]",
          "40:                 <source>Delete</source>",
          "43:                 <source>Confirm deletion</source>",
          "46:                 <source>Do you really want to delete the form \"{0}\" permanently? You cannot revert this action!</source>",
          "",
          "---------------",
          "--- Hunk 2 ---",
          "[Context before]",
          "97:                 <source>The form could not be saved</source>",
          "98:             </trans-unit>",
          "99:             <trans-unit id=\"formManager.no_references\" resname=\"formManager.no_references\" xml:space=\"preserve\">",
          "101:             </trans-unit>",
          "104:             </trans-unit>",
          "107:             </trans-unit>",
          "108:             <trans-unit id=\"formManager.references.title\" resname=\"formManager.references.title\" xml:space=\"preserve\">",
          "110:             </trans-unit>",
          "111:             <trans-unit id=\"formManager.references.headline\" resname=\"formManager.references.headline\" xml:space=\"preserve\">",
          "113:             </trans-unit>",
          "114:             <trans-unit id=\"formManager.blankForm.label\" resname=\"formManager.blankForm.label\" xml:space=\"preserve\">",
          "115:                 <source>Blank form</source>",
          "",
          "[Removed Lines]",
          "100:                 <source>There are no references yet</source>",
          "102:             <trans-unit id=\"formManager.page\" resname=\"formManager.page\" xml:space=\"preserve\">",
          "103:                 <source>Page</source>",
          "105:             <trans-unit id=\"formManager.record\" resname=\"formManager.record\" xml:space=\"preserve\">",
          "106:                 <source>Record</source>",
          "109:                 <source>References</source>",
          "112:                 <source>References for \"{0}\"</source>",
          "",
          "[Added Lines]",
          "100:                 <source>There are no references yet.</source>",
          "102:             <trans-unit id=\"formManager.table.field.control\" resname=\"formManager.table.field.control\">",
          "103:                 <source>Control</source>",
          "105:             <trans-unit id=\"formManager.table.field.uid\" resname=\"formManager.table.field.uid\">",
          "106:                 <source>Uid</source>",
          "107:             </trans-unit>",
          "108:             <trans-unit id=\"formManager.table.field.title\" resname=\"formManager.table.field.title\" xml:space=\"preserve\">",
          "109:                 <source>Title</source>",
          "110:             </trans-unit>",
          "111:             <trans-unit id=\"formManager.btn.edit.title\" resname=\"formManager.btn.edit.title\" xml:space=\"preserve\">",
          "112:                 <source>Edit</source>",
          "115:                 <source>Form: {0}</source>",
          "118:                 <source>References to this item</source>",
          "",
          "---------------"
        ],
        "Resources/Private/Templates/Backend/FormManager/Index.html||Resources/Private/Templates/Backend/FormManager/Index.html": [
          "File: Resources/Private/Templates/Backend/FormManager/Index.html -> Resources/Private/Templates/Backend/FormManager/Index.html",
          "--- Hunk 1 ---",
          "[Context before]",
          "38:                 <table id=\"forms\" class=\"table table-striped table-hover\">",
          "39:                     <thead>",
          "40:                         <tr>",
          "46:                         </tr>",
          "47:                     </thead>",
          "48:                     <tbody>",
          "",
          "[Removed Lines]",
          "41:                             <th data-sort-method=\"none\"></th>",
          "42:                             <th><f:translate key=\"LLL:EXT:form/Resources/Private/Language/Database.xlf:formManager.form_name\" /></th>",
          "43:                             <th><f:translate key=\"LLL:EXT:form/Resources/Private/Language/Database.xlf:formManager.location\" /></th>",
          "44:                             <th><f:translate key=\"LLL:EXT:form/Resources/Private/Language/Database.xlf:formManager.references\" /></th>",
          "45:                             <th data-sort-method=\"none\"></th>",
          "",
          "[Added Lines]",
          "41:                             <th class=\"col-icon\" data-sort-method=\"none\"></th>",
          "42:                             <th class=\"col-50 col-responsive\"><f:translate key=\"LLL:EXT:form/Resources/Private/Language/Database.xlf:formManager.form_name\" /></th>",
          "43:                             <th class=\"col-50\"><f:translate key=\"LLL:EXT:form/Resources/Private/Language/Database.xlf:formManager.location\" /></th>",
          "44:                             <th class=\"col-state\"><f:translate key=\"LLL:EXT:form/Resources/Private/Language/Database.xlf:formManager.references\" /></th>",
          "45:                             <th class=\"col-control\" data-sort-method=\"none\"><span class=\"visually-hidden\">{f:translate(key: 'LLL:EXT:core/Resources/Private/Language/locallang_core.xlf:labels._CONTROL_')}</span></th>",
          "",
          "---------------",
          "--- Hunk 2 ---",
          "[Context before]",
          "67:                                         </f:else>",
          "68:                                     </f:if>",
          "69:                                 </td>",
          "71:                                     <f:if condition=\"{form.invalid} || {form.readOnly}\">",
          "72:                                         <f:then>",
          "73:                                             <div title=\"{form.name}\">{form.name}</div>",
          "",
          "[Removed Lines]",
          "70:                                 <td class=\"col-title\">",
          "",
          "[Added Lines]",
          "70:                                 <td class=\"col-50\">",
          "",
          "---------------",
          "--- Hunk 3 ---",
          "[Context before]",
          "77:                                         </f:else>",
          "78:                                     </f:if>",
          "79:                                 </td>",
          "82:                                     <f:if condition=\"{form.referenceCount}\">",
          "83:                                         <f:then>",
          "84:                                             <a href=\"#\" data-identifier=\"showReferences\" data-form-persistence-identifier=\"{form.persistenceIdentifier}\" data-form-name=\"{form.name}\">",
          "88:                                             </a>",
          "89:                                         </f:then>",
          "95:                                     </f:if>",
          "96:                                 </td>",
          "97:                                 <td class=\"col-control\">",
          "98:                                     <div class=\"btn-group\" role=\"group\">",
          "99:                                         <f:if condition=\"{form.invalid} || {form.readOnly}\">",
          "100:                                             <f:then>",
          "102:                                             </f:then>",
          "103:                                             <f:else>",
          "105:                                             </f:else>",
          "106:                                         </f:if>",
          "107:                                         <f:if condition=\"{form.invalid}\">",
          "109:                                         </f:if>",
          "138:                                                     <li>",
          "142:                                                         </a>",
          "143:                                                     </li>",
          "147:                                     </div>",
          "148:                                 </td>",
          "149:                             </tr>",
          "",
          "[Removed Lines]",
          "80:                                 <td><code>{form.persistenceIdentifier}</code></td>",
          "81:                                 <td>",
          "85:                                                 <span class=\"badge badge-info\">",
          "86:                                                     {form.referenceCount}",
          "87:                                                 </span>",
          "90:                                         <f:else>",
          "91:                                             <span class=\"badge badge-default\">",
          "92:                                                 {form.referenceCount}",
          "93:                                             </span>",
          "94:                                         </f:else>",
          "101:                                                 <button class=\"btn btn-default form-record-readonly\" disabled=\"disabled\" title=\"{f:translate(key: 'LLL:EXT:form/Resources/Private/Language/Database.xlf:formManager.edit_form_not_allowed')}\"><core:icon identifier=\"actions-open\" /></button>",
          "104:                                                 <f:link.action controller=\"FormEditor\" action=\"index\" arguments=\"{formPersistenceIdentifier: form.persistenceIdentifier}\" title=\"{f:translate(key: 'LLL:EXT:form/Resources/Private/Language/Database.xlf:formManager.edit_form')}\" class=\"btn btn-default form-record-open\"><core:icon identifier=\"actions-open\" /></f:link.action>",
          "108:                                             <button class=\"btn btn-default form-record-readonly\" disabled=\"disabled\" title=\"{f:translate(key: 'LLL:EXT:form/Resources/Private/Language/Database.xlf:formManager.duplicate_form_not_allowed')}\"><core:icon identifier=\"actions-duplicate\" /></button>",
          "110:                                         <div class=\"btn-group dropdown\">",
          "111:                                             <a href=\"#actions-{form.identifier}\" class=\"btn btn-default dropdown-toggle dropdown-toggle-no-chevron\" data-bs-toggle=\"dropdown\" data-bs-boundary=\"window\" aria-expanded=\"false\"><core:icon identifier=\"actions-menu-alternative\" /></a>",
          "112:                                             <ul id=\"actions-{form.identifier}\" class=\"dropdown-menu\">",
          "113:                                                 <f:if condition=\"{form.invalid}\">",
          "114:                                                     <f:else>",
          "115:                                                         <li>",
          "116:                                                             <a href=\"#\" class=\"dropdown-item\" data-bs-original-title=\"{f:translate(key: 'LLL:EXT:form/Resources/Private/Language/Database.xlf:formManager.duplicate_this_form')}\" data-identifier=\"duplicateForm\" data-form-persistence-identifier=\"{form.persistenceIdentifier}\" data-form-name=\"{form.name}\">",
          "117:                                                                 <span class=\"dropdown-item-columns\">",
          "118:                                                                     <span class=\"dropdown-item-column dropdown-item-column-icon text-{cacheAction.severity}\">",
          "119:                                                                         <core:icon identifier=\"actions-duplicate\" />",
          "120:                                                                     </span>",
          "121:                                                                     <span class=\"dropdown-item-column dropdown-item-column-text\">",
          "122:                                                                         <f:translate key=\"LLL:EXT:form/Resources/Private/Language/Database.xlf:formManager.duplicate_this_form\" />",
          "123:                                                                     </span>",
          "124:                                                                 </span>",
          "125:                                                             </a>",
          "126:                                                         </li>",
          "127:                                                     </f:else>",
          "128:                                                 </f:if>",
          "129:                                                 <f:if condition=\"{form.referenceCount}\">",
          "130:                                                     <li>",
          "131:                                                         <a href=\"#\" class=\"dropdown-item\" data-bs-original-title=\"{f:translate(key: 'LLL:EXT:form/Resources/Private/Language/Database.xlf:formManager.show_references')}\" data-identifier=\"showReferences\" data-form-persistence-identifier=\"{form.persistenceIdentifier}\" data-form-name=\"{form.name}\">",
          "132:                                                             <core:icon identifier=\"actions-eye-link\" />",
          "133:                                                             <f:translate key=\"LLL:EXT:form/Resources/Private/Language/Database.xlf:formManager.show_references\" />",
          "134:                                                         </a>",
          "135:                                                     </li>",
          "136:                                                 </f:if>",
          "137:                                                 <f:if condition=\"{form.removable} && ({form.invalid} == '0') && ({form.referenceCount} == '0')\">",
          "139:                                                         <a href=\"#\" class=\"dropdown-item\" data-bs-original-title=\"{f:translate(key: 'LLL:EXT:form/Resources/Private/Language/Database.xlf:formManager.delete_form')}\" data-identifier=\"removeForm\" data-form-persistence-identifier=\"{form.persistenceIdentifier}\">",
          "140:                                                             <core:icon identifier=\"actions-edit-delete\" />",
          "141:                                                             <f:translate key=\"LLL:EXT:form/Resources/Private/Language/Database.xlf:formManager.delete_form\" />",
          "144:                                                 </f:if>",
          "145:                                             </ul>",
          "146:                                         </div>",
          "",
          "[Added Lines]",
          "80:                                 <td class=\"col-50\"><code>{form.persistenceIdentifier}</code></td>",
          "81:                                 <td class=\"col-state\">",
          "85:                                                 {form.referenceCount}",
          "88:                                         <f:else>-</f:else>",
          "95:                                                 <button",
          "96:                                                     class=\"btn btn-default form-record-readonly\"",
          "97:                                                     disabled=\"disabled\"",
          "98:                                                     title=\"{f:translate(key: 'LLL:EXT:form/Resources/Private/Language/Database.xlf:formManager.edit_form_not_allowed')}\"",
          "99:                                                 >",
          "100:                                                     <core:icon identifier=\"actions-open\" />",
          "101:                                                 </button>",
          "104:                                                 <f:link.action",
          "105:                                                     controller=\"FormEditor\"",
          "106:                                                     action=\"index\"",
          "107:                                                     arguments=\"{formPersistenceIdentifier: form.persistenceIdentifier}\"",
          "108:                                                     title=\"{f:translate(key: 'LLL:EXT:form/Resources/Private/Language/Database.xlf:formManager.edit_form')}\"",
          "109:                                                     class=\"btn btn-default form-record-open\"",
          "110:                                                 >",
          "111:                                                     <core:icon identifier=\"actions-open\" />",
          "112:                                                 </f:link.action>",
          "116:                                             <button",
          "117:                                                 class=\"btn btn-default form-record-readonly\"",
          "118:                                                 disabled=\"disabled\"",
          "119:                                                 title=\"{f:translate(key: 'LLL:EXT:form/Resources/Private/Language/Database.xlf:formManager.duplicate_form_not_allowed')}\"",
          "120:                                             >",
          "121:                                                 <core:icon identifier=\"actions-duplicate\" />",
          "122:                                             </button>",
          "124:                                         <f:if condition=\"{form.removable} && ({form.invalid} == '0') && ({form.referenceCount} == '0')\">",
          "125:                                             <f:then>",
          "126:                                                 <a",
          "127:                                                     href=\"#\"",
          "128:                                                     class=\"btn btn-default\"",
          "129:                                                     data-bs-original-title=\"{f:translate(key: 'LLL:EXT:form/Resources/Private/Language/Database.xlf:formManager.delete_form')}\"",
          "130:                                                     data-identifier=\"removeForm\"",
          "131:                                                     data-form-persistence-identifier=\"{form.persistenceIdentifier}\"",
          "132:                                                     title=\"{f:translate(key: 'LLL:EXT:form/Resources/Private/Language/Database.xlf:formManager.delete_form')}\"",
          "133:                                                 >",
          "134:                                                     <core:icon identifier=\"actions-edit-delete\" />",
          "135:                                                 </a>",
          "136:                                             </f:then>",
          "137:                                             <f:else>",
          "138:                                                 <span class=\"btn btn-default disabled\"><core:icon identifier=\"empty-empty\" /></span>",
          "139:                                             </f:else>",
          "140:                                         </f:if>",
          "141:                                     </div>",
          "142:                                     <div class=\"btn-group dropdown\" role=\"group\">",
          "143:                                         <a",
          "144:                                             href=\"#actions-{form.identifier}\"",
          "145:                                             class=\"btn btn-default dropdown-toggle dropdown-toggle-no-chevron\"",
          "146:                                             data-bs-toggle=\"dropdown\"",
          "147:                                             data-bs-boundary=\"window\"",
          "148:                                             aria-expanded=\"false\"",
          "149:                                         >",
          "150:                                             <core:icon identifier=\"actions-menu-alternative\" />",
          "151:                                         </a>",
          "152:                                         <ul id=\"actions-{form.identifier}\" class=\"dropdown-menu\">",
          "153:                                             <f:if condition=\"{form.invalid}\">",
          "154:                                                 <f:else>",
          "156:                                                         <a",
          "157:                                                             href=\"#\"",
          "158:                                                             class=\"dropdown-item\"",
          "159:                                                             data-bs-original-title=\"{f:translate(key: 'LLL:EXT:form/Resources/Private/Language/Database.xlf:formManager.duplicate_this_form')}\"",
          "160:                                                             data-identifier=\"duplicateForm\"",
          "161:                                                             data-form-persistence-identifier=\"{form.persistenceIdentifier}\"",
          "162:                                                             data-form-name=\"{form.name}\"",
          "163:                                                         >",
          "164:                                                             <span class=\"dropdown-item-columns\">",
          "165:                                                                 <span class=\"dropdown-item-column dropdown-item-column-icon text-{cacheAction.severity}\">",
          "166:                                                                     <core:icon identifier=\"actions-duplicate\" />",
          "167:                                                                 </span>",
          "168:                                                                 <span class=\"dropdown-item-column dropdown-item-column-text\">",
          "169:                                                                     <f:translate key=\"LLL:EXT:form/Resources/Private/Language/Database.xlf:formManager.duplicate_this_form\" />",
          "170:                                                                 </span>",
          "171:                                                             </span>",
          "174:                                                 </f:else>",
          "175:                                             </f:if>",
          "176:                                         </ul>",
          "",
          "---------------"
        ],
        "Resources/Public/JavaScript/backend/form-manager/view-model.js||Resources/Public/JavaScript/backend/form-manager/view-model.js": [
          "File: Resources/Public/JavaScript/backend/form-manager/view-model.js -> Resources/Public/JavaScript/backend/form-manager/view-model.js",
          "--- Hunk 1 ---",
          "[Context before]",
          "[No context available]",
          "",
          "[Removed Lines]",
          "13: import $ from\"jquery\";import Modal from\"@typo3/backend/modal.js\";import Severity from\"@typo3/backend/severity.js\";import MultiStepWizard from\"@typo3/backend/multi-step-wizard.js\";import Icons from\"@typo3/backend/icons.js\";import Notification from\"@typo3/backend/notification.js\";import SecurityUtility from\"@typo3/core/security-utility.js\";import{selector}from\"@typo3/core/literals.js\";import SortableTable from\"@typo3/backend/sortable-table.js\";const securityUtility=new SecurityUtility;var Identifiers;function newFormSetup(e){$(Identifiers.newFormModalTrigger).on(\"click\",(function(t){t.preventDefault(),MultiStepWizard.addSlide(\"new-form-step-1\",TYPO3.lang[\"formManager.newFormWizard.step1.title\"],\"\",Severity.info,TYPO3.lang[\"formManager.newFormWizard.step1.progressLabel\"],(async function(t){const a=await Icons.getIcon(\"actions-plus\",Icons.sizes.small),r=await Icons.getIcon(\"form-page\",Icons.sizes.large),i=await Icons.getIcon(\"apps-pagetree-page-default\",Icons.sizes.large);let o;const n=MultiStepWizard.setup.$carousel.closest(\".modal\"),l=n.find(\".modal-footer\").find('button[name=\"next\"]');MultiStepWizard.blurCancelStep(),MultiStepWizard.lockNextStep(),MultiStepWizard.lockPrevStep();0===e.getAccessibleFormStorageFolders().length&&(o='<div class=\"new-form-modal\"><div class=\"row\"><label class=\"col col-form-label\">'+TYPO3.lang[\"formManager.newFormWizard.step1.noStorages\"]+\"</label></div></div>\",t.html(o),e.assert(!1,\"No accessible form storage folders\",1477506500)),o='<div class=\"new-form-modal\">',o+='<div class=\"card-container\"><div class=\"card card-size-medium\"><div class=\"card-header\"><div class=\"card-icon\">'+i+'</div><div class=\"card-header-body\"><h2 class=\"card-title\">'+TYPO3.lang[\"formManager.blankForm.label\"]+'</h2><span class=\"card-subtitle\">'+TYPO3.lang[\"formManager.blankForm.subtitle\"]+'</span></div></div><div class=\"card-body\"><p class=\"card-text\">'+TYPO3.lang[\"formManager.blankForm.description\"]+'</p></div><div class=\"card-footer\"><button type=\"button\" class=\"btn btn-success\" data-inline=\"1\" value=\"blank\" data-identifier=\"newFormModeButton\">'+a+\" \"+TYPO3.lang[\"formManager.blankForm.label\"]+'</button></div></div><div class=\"card card-size-medium\"><div class=\"card-header\"><div class=\"card-icon\">'+r+'</div><div class=\"card-header-body\"><h2 class=\"card-title\">'+TYPO3.lang[\"formManager.predefinedForm.label\"]+'</h2><span class=\"card-subtitle\">'+TYPO3.lang[\"formManager.predefinedForm.subtitle\"]+'</span></div></div><div class=\"card-body\"><p class=\"card-text\">'+TYPO3.lang[\"formManager.predefinedForm.description\"]+'</p></div><div class=\"card-footer\"><button type=\"button\" class=\"btn btn-success\" data-inline=\"1\" value=\"predefined\" data-identifier=\"newFormModeButton\">'+a+\" \"+TYPO3.lang[\"formManager.predefinedForm.label\"]+\"</button></div></div>\",o+=\"</div>\",t.html(o),$(Identifiers.newFormModeButton,n).on(\"click\",(function(e){MultiStepWizard.set(\"newFormMode\",$(e.currentTarget).val()),MultiStepWizard.next()})),l.on(\"click\",(async function(){t.html($(\"<div />\",{class:\"text-center\"}).append(await Icons.getIcon(\"spinner-circle\",Icons.sizes.default,null,null)).prop(\"outerHTML\"))}))})),MultiStepWizard.addSlide(\"new-form-step-2\",TYPO3.lang[\"formManager.newFormWizard.step2.title\"],\"\",Severity.info,top.TYPO3.lang[\"wizard.progressStep.configure\"],(function(t,a){let r,i;MultiStepWizard.lockNextStep(),MultiStepWizard.unlockPrevStep();const o=MultiStepWizard.setup.$carousel.closest(\".modal\"),n=o.find(\".modal-footer\").find('button[name=\"next\"]'),l=e.getAccessibleFormStorageFolders();if(a.savePath||(MultiStepWizard.set(\"savePath\",l[0].value),MultiStepWizard.set(\"savePathName\",l[0].label)),l.length>1){i=$('<select class=\"new-form-save-path form-select\" id=\"new-form-save-path\" data-identifier=\"newFormSavePath\" />');for(let e=0,t=l.length;e<t;++e){const t=new Option(l[e].label,l[e].value);$(i).append(t)}}const s=e.getPrototypes();e.assert(s.length>0,\"No prototypes available\",1477506501),a.prototypeName||(MultiStepWizard.set(\"prototypeName\",s[0].value),MultiStepWizard.set(\"prototypeNameName\",s[0].label));const d=$('<select class=\"new-form-prototype-name form-select\" id=\"new-form-prototype-name\" data-identifier=\"newFormPrototypeName\" />');for(let e=0,t=s.length;e<t;++e){const t=new Option(s[e].label,s[e].value);$(d).append(t)}let c=e.getTemplatesForPrototype(s[0].value);e.assert(c.length>0,\"No templates available\",1477506502),a.templatePath||(MultiStepWizard.set(\"templatePath\",c[0].value),MultiStepWizard.set(\"templatePathName\",c[0].label));const m=$('<select class=\"new-form-template form-select\" id=\"new-form-template\" data-identifier=\"newFormTemplate\" />');for(let e=0,t=c.length;e<t;++e){const t=new Option(c[e].label,c[e].value);$(m).append(t)}r='<div class=\"new-form-modal\">',\"blank\"===a.newFormMode?(r+='<h5 class=\"form-section-headline\">'+TYPO3.lang[\"formManager.blankForm.label\"]+\"</h5>\",MultiStepWizard.set(\"templatePath\",\"EXT:form/Resources/Private/Backend/Templates/FormEditor/Yaml/NewForms/BlankForm.yaml\"),MultiStepWizard.set(\"templatePathName\",TYPO3.lang[\"formManager.blankForm.label\"])):(r+='<h5 class=\"form-section-headline\">'+TYPO3.lang[\"formManager.predefinedForm.label\"]+\"</h5>\",s.length>1&&(r+='<div class=\"mb-3\"><label for=\"new-form-prototype-name\"><strong>'+TYPO3.lang[\"formManager.form_prototype\"]+'</strong></label><div class=\"formengine-field-item t3js-formengine-field-item\"><div class=\"form-control-wrap\">'+$(d)[0].outerHTML+\"</div></div></div>\"),c.length>1&&(r+='<div class=\"mb-3\"><label for=\"new-form-template\"><strong>'+TYPO3.lang[\"formManager.form_template\"]+'</strong></label><div class=\"formengine-field-item t3js-formengine-field-item\"><div class=\"form-description\">'+TYPO3.lang[\"formManager.form_template_description\"]+'</div><div class=\"form-control-wrap\">'+$(m)[0].outerHTML+\"</div></div></div>\")),r+='<div class=\"mb-3\"><label for=\"new-form-name\"><strong>'+TYPO3.lang[\"formManager.form_name\"]+'</strong></label><div class=\"formengine-field-item t3js-formengine-field-item\"><div class=\"form-description\">'+TYPO3.lang[\"formManager.form_name_description\"]+'</div><div class=\"form-control-wrap\">',a.formName?(r+='<input class=\"form-control\" id=\"new-form-name\" data-identifier=\"newFormName\" value=\"'+securityUtility.encodeHtml(a.formName)+'\" />',setTimeout((function(){MultiStepWizard.unlockNextStep()}),200)):r+='<input class=\"form-control has-error\" id=\"new-form-name\" data-identifier=\"newFormName\" />',r+=\"</div></div></div>\",i&&(r+='<div class=\"mb-3\"><label for=\"new-form-save-path\"><strong>'+TYPO3.lang[\"formManager.form_save_path\"]+'</strong></label><div class=\"formengine-field-item t3js-formengine-field-item\"><div class=\"form-description\">'+TYPO3.lang[\"formManager.form_save_path_description\"]+'</div><div class=\"form-control-wrap\">'+$(i)[0].outerHTML+\"</div></div></div>\"),r+=\"</div>\",t.html(r),a.savePath&&$(Identifiers.newFormSavePath,o).val(a.savePath),a.templatePath&&$(Identifiers.newFormTemplate,o).val(a.templatePath),s.length>1?$(Identifiers.newFormPrototypeName,o).focus():c.length>1&&$(Identifiers.newFormTemplate,o).focus();const p=function(){$(Identifiers.newFormTemplate,o).on(\"change\",(function(){MultiStepWizard.set(\"templatePath\",$(Identifiers.newFormTemplate+\" option:selected\",o).val()),MultiStepWizard.set(\"templatePathName\",$(Identifiers.newFormTemplate+\" option:selected\",o).text()),MultiStepWizard.set(\"templatePathOnPrev\",$(Identifiers.newFormTemplate+\" option:selected\",o).val())}))};$(Identifiers.newFormPrototypeName,o).on(\"change\",(function(t){MultiStepWizard.set(\"prototypeName\",$(Identifiers.newFormPrototypeName+\" option:selected\",o).val()),MultiStepWizard.set(\"prototypeNameName\",$(Identifiers.newFormPrototypeName+\" option:selected\",o).text()),c=e.getTemplatesForPrototype($(t.currentTarget).val()),$(Identifiers.newFormTemplate,o).off().empty();for(let e=0,t=c.length;e<t;++e){const t=new Option(c[e].label,c[e].value);$(Identifiers.newFormTemplate,o).append(t),MultiStepWizard.set(\"templatePath\",c[0].value),MultiStepWizard.set(\"templatePathName\",c[0].label)}p()})),p(),a.prototypeName&&($(Identifiers.newFormPrototypeName,o).val(a.prototypeName),$(Identifiers.newFormPrototypeName,o).trigger(\"change\"),a.templatePathOnPrev&&($(Identifiers.newFormTemplate,o).find(selector`option[value=\"${a.templatePathOnPrev}\"]`).prop(\"selected\",!0),$(Identifiers.newFormTemplate,o).trigger(\"change\"))),$(Identifiers.newFormName,o).focus(),$(Identifiers.newFormName,o).on(\"keyup paste\",(function(e){$(e.currentTarget).val().length>0?($(e.currentTarget).removeClass(\"has-error\"),MultiStepWizard.unlockNextStep(),MultiStepWizard.set(\"formName\",$(e.currentTarget).val()),\"code\"in e&&\"Enter\"===e.code&&MultiStepWizard.triggerStepButton(\"next\")):($(e.currentTarget).addClass(\"has-error\"),MultiStepWizard.lockNextStep())})),$(Identifiers.newFormSavePath,o).on(\"change\",(function(){MultiStepWizard.set(\"savePath\",$(Identifiers.newFormSavePath+\" option:selected\",o).val()),MultiStepWizard.set(\"savePathName\",$(Identifiers.newFormSavePath+\" option:selected\",o).text())})),\"blank\"===a.newFormMode||a.templatePathName||MultiStepWizard.set(\"templatePathName\",$(Identifiers.newFormTemplate+\" option:selected\",o).text()),n.on(\"click\",(async function(){MultiStepWizard.setup.forceSelection=!1,t.html($(\"<div />\",{class:\"text-center\"}).append(await Icons.getIcon(\"spinner-circle\",Icons.sizes.default,null,null)).prop(\"outerHTML\"))}))})),MultiStepWizard.addSlide(\"new-form-step-3\",TYPO3.lang[\"formManager.newFormWizard.step3.title\"],\"\",Severity.info,TYPO3.lang[\"formManager.newFormWizard.step3.progressLabel\"],(async function(e,t){const a=await Icons.getIcon(\"actions-cog\",Icons.sizes.small),r=await Icons.getIcon(\"actions-file-t3d\",Icons.sizes.small),i=await Icons.getIcon(\"actions-tag\",Icons.sizes.small),o=await Icons.getIcon(\"actions-database\",Icons.sizes.small),n=MultiStepWizard.setup.$carousel.closest(\".modal\").find(\".modal-footer\").find('button[name=\"next\"]');let l='<div class=\"new-form-modal\">';l+='<div class=\"mb-3\"><h5 class=\"form-section-headline\">'+TYPO3.lang[\"formManager.newFormWizard.step3.check\"]+\"</h5><p>\"+TYPO3.lang[\"formManager.newFormWizard.step3.message\"]+'</p></div><div class=\"alert alert-notice\"><div class=\"alert-body mt-1\">',t.prototypeNameName&&(l+='<div class=\"row my-1\"><div class=\"col col-sm-6\">'+a+\" \"+TYPO3.lang[\"formManager.form_prototype\"]+'</div><div class=\"col\">'+securityUtility.encodeHtml(t.prototypeNameName)+\"</div></div>\"),t.templatePathName&&(l+='<div class=\"row my-1\"><div class=\"col col-sm-6\">'+r+\" \"+TYPO3.lang[\"formManager.form_template\"]+'</div><div class=\"col\">'+securityUtility.encodeHtml(t.templatePathName)+\"</div></div>\"),l+='<div class=\"row my-1\"><div class=\"col col-sm-6\">'+i+\" \"+TYPO3.lang[\"formManager.form_name\"]+'</div><div class=\"col\">'+securityUtility.encodeHtml(t.formName)+'</div></div><div class=\"row my-1\"><div class=\"col col-sm-6\">'+o+\" \"+TYPO3.lang[\"formManager.form_save_path\"]+'</div><div class=\"col\">'+securityUtility.encodeHtml(t.savePathName)+\"</div></div>\",l+=\"</div></div></div>\",e.html(l),n.focus(),n.on(\"click\",(async function(){MultiStepWizard.setup.forceSelection=!1,e.html($(\"<div />\",{class:\"text-center\"}).append(await Icons.getIcon(\"spinner-circle\",Icons.sizes.default,null,null)).prop(\"outerHTML\"))}))})),MultiStepWizard.addFinalProcessingSlide((function(){$.post(e.getAjaxEndpoint(\"create\"),{formName:MultiStepWizard.setup.settings.formName,templatePath:MultiStepWizard.setup.settings.templatePath,prototypeName:MultiStepWizard.setup.settings.prototypeName,savePath:MultiStepWizard.setup.settings.savePath},(function(e){\"success\"===e.status?document.location=e.url:Notification.error(TYPO3.lang[\"formManager.newFormWizard.step4.errorTitle\"],TYPO3.lang[\"formManager.newFormWizard.step4.errorMessage\"]+\" \"+e.message),MultiStepWizard.dismiss()})).fail((function(e,t,a){const r=(new DOMParser).parseFromString(e.responseText,\"text/html\"),i=$(r.body);Notification.error(t,a,2),MultiStepWizard.dismiss(),$(Identifiers.t3Logo,i).remove(),$(Identifiers.t3Footer,i).remove(),$(Identifiers.moduleBody).html(i.html())}))})).then((function(){MultiStepWizard.show()}))}))}function removeFormSetup(e){$(Identifiers.removeFormModalTrigger).on(\"click\",(function(t){const a=[];t.preventDefault();const r=$(t.currentTarget);a.push({text:TYPO3.lang[\"formManager.cancel\"],active:!0,btnClass:\"btn-default\",name:\"cancel\",trigger:function(e,t){t.hideModal()}}),a.push({text:TYPO3.lang[\"formManager.remove_form\"],active:!0,btnClass:\"btn-warning\",name:\"createform\",trigger:function(t,a){document.location=e.getAjaxEndpoint(\"delete\")+\"&formPersistenceIdentifier=\"+r.data(\"formPersistenceIdentifier\"),a.hideModal()}}),Modal.show(TYPO3.lang[\"formManager.remove_form_title\"],TYPO3.lang[\"formManager.remove_form_message\"],Severity.warning,a)}))}function duplicateFormSetup(e){$(Identifiers.duplicateFormModalTrigger).on(\"click\",(function(t){t.preventDefault();const a=$(t.currentTarget);MultiStepWizard.addSlide(\"duplicate-form-step-1\",TYPO3.lang[\"formManager.duplicateFormWizard.step1.title\"].replace(\"{0}\",a.data(\"formName\")),\"\",Severity.info,top.TYPO3.lang[\"wizard.progressStep.configure\"],(function(t){let r,i;MultiStepWizard.lockPrevStep(),MultiStepWizard.lockNextStep();const o=MultiStepWizard.setup.$carousel.closest(\".modal\"),n=o.find(\".modal-footer\").find('button[name=\"next\"]'),l=e.getAccessibleFormStorageFolders();if(e.assert(l.length>0,\"No accessible form storage folders\",1477649539),MultiStepWizard.set(\"formPersistenceIdentifier\",a.data(\"formPersistenceIdentifier\")),MultiStepWizard.set(\"savePath\",l[0].value),l.length>1){i=$('<select id=\"duplicate-form-save-path\" class=\"form-select\" data-identifier=\"duplicateFormSavePath\" />');for(let e=0,t=l.length;e<t;++e){const t=new Option(l[e].label,l[e].value);$(i).append(t)}}r='<div class=\"duplicate-form-modal\"><h5 class=\"form-section-headline\">'+TYPO3.lang[\"formManager.new_form_name\"]+'</h5><div class=\"mb-3\"><label for=\"duplicate-form-name\"><strong>'+TYPO3.lang[\"formManager.form_name\"]+'</strong></label><div class=\"formengine-field-item t3js-formengine-field-item\"><div class=\"form-description\">'+TYPO3.lang[\"formManager.form_name_description\"]+'</div><div class=\"form-control-wrap\"><input id=\"duplicate-form-name\" class=\"form-control has-error\" data-identifier=\"duplicateFormName\" /></div></div></div>',i&&(r+='<div class=\"mb-3\"><label for=\"duplicate-form-save-path\"><strong>'+TYPO3.lang[\"formManager.form_save_path\"]+'</strong></label><div class=\"formengine-field-item t3js-formengine-field-item\"><div class=\"form-description\">'+TYPO3.lang[\"formManager.form_save_path_description\"]+'</div><div class=\"form-control-wrap\">'+$(i)[0].outerHTML+\"</div></div></div>\"),r+=\"</div>\",t.html(r),$(Identifiers.duplicateFormName,o).focus(),$(Identifiers.duplicateFormName,o).on(\"keyup paste\",(function(e){const t=$(event.currentTarget);t.val().length>0?(t.removeClass(\"has-error\"),MultiStepWizard.unlockNextStep(),MultiStepWizard.set(\"formName\",t.val()),\"code\"in e&&\"Enter\"===e.code&&MultiStepWizard.triggerStepButton(\"next\")):(t.addClass(\"has-error\"),MultiStepWizard.lockNextStep())})),n.on(\"click\",(async function(){MultiStepWizard.setup.forceSelection=!1,MultiStepWizard.set(\"confirmationDuplicateFormName\",a.data(\"formName\")),l.length>1?(MultiStepWizard.set(\"savePath\",$(Identifiers.duplicateFormSavePath+\" option:selected\",o).val()),MultiStepWizard.set(\"confirmationDuplicateFormSavePath\",$(Identifiers.duplicateFormSavePath+\" option:selected\",o).text())):(MultiStepWizard.set(\"savePath\",l[0].value),MultiStepWizard.set(\"confirmationDuplicateFormSavePath\",l[0].label)),t.html($(\"<div />\",{class:\"text-center\"}).append(await Icons.getIcon(\"spinner-circle\",Icons.sizes.default,null,null)).prop(\"outerHTML\"))}))})),MultiStepWizard.addSlide(\"duplicate-form-step-2\",TYPO3.lang[\"formManager.duplicateFormWizard.step2.title\"],\"\",Severity.info,TYPO3.lang[\"formManager.duplicateFormWizard.step2.progressLabel\"],(async function(e,t){const a=await Icons.getIcon(\"actions-file-t3d\",Icons.sizes.small),r=await Icons.getIcon(\"actions-tag\",Icons.sizes.small),i=await Icons.getIcon(\"actions-database\",Icons.sizes.small);MultiStepWizard.unlockPrevStep(),MultiStepWizard.unlockNextStep();const o=MultiStepWizard.setup.$carousel.closest(\".modal\").find(\".modal-footer\").find('button[name=\"next\"]');let n='<div class=\"new-form-modal\"><div class=\"row\"><div class=\"col\">';n+='<div class=\"mb-3\"><h5 class=\"form-section-headline\">'+TYPO3.lang[\"formManager.duplicateFormWizard.step2.check\"]+\"</h5><p>\"+TYPO3.lang[\"formManager.newFormWizard.step3.message\"]+'</p></div><div class=\"alert alert-notice\"><div class=\"alert-body mt-1\"><div class=\"dropdown-table-row\"><div class=\"dropdown-table-column dropdown-table-icon\">'+a+'</div><div class=\"dropdown-table-column dropdown-table-title\">'+TYPO3.lang[\"formManager.form_copied\"]+'</div><div class=\"dropdown-table-column dropdown-table-value\">'+securityUtility.encodeHtml(t.confirmationDuplicateFormName)+'</div></div><div class=\"dropdown-table-row\"><div class=\"dropdown-table-column dropdown-table-icon\">'+r+'</div><div class=\"dropdown-table-column dropdown-table-title\">'+TYPO3.lang[\"formManager.form_name\"]+'</div><div class=\"dropdown-table-column dropdown-table-value\">'+securityUtility.encodeHtml(t.formName)+'</div></div><div class=\"dropdown-table-row\"><div class=\"dropdown-table-column dropdown-table-icon\">'+i+'</div><div class=\"dropdown-table-column dropdown-table-title\">'+TYPO3.lang[\"formManager.form_save_path\"]+'</div><div class=\"dropdown-table-column dropdown-table-value\">'+securityUtility.encodeHtml(t.confirmationDuplicateFormSavePath)+\"</div></div></div></div>\",n+=\"</div></div></div>\",e.html(n),o.focus(),o.on(\"click\",(async function(){MultiStepWizard.setup.forceSelection=!1,e.html($(\"<div />\",{class:\"text-center\"}).append(await Icons.getIcon(\"spinner-circle\",Icons.sizes.default,null,null)).prop(\"outerHTML\"))}))})),MultiStepWizard.addFinalProcessingSlide((function(){$.post(e.getAjaxEndpoint(\"duplicate\"),{formName:MultiStepWizard.setup.settings.formName,formPersistenceIdentifier:MultiStepWizard.setup.settings.formPersistenceIdentifier,savePath:MultiStepWizard.setup.settings.savePath},(function(e){\"success\"===e.status?document.location=e.url:Notification.error(TYPO3.lang[\"formManager.duplicateFormWizard.step3.errorTitle\"],TYPO3.lang[\"formManager.duplicateFormWizard.step3.errorMessage\"]+\" \"+e.message),MultiStepWizard.dismiss()})).fail((function(e,t,a){const r=(new DOMParser).parseFromString(e.responseText,\"text/html\"),i=$(r.body);Notification.error(t,a,2),MultiStepWizard.dismiss(),$(Identifiers.t3Logo,i).remove(),$(Identifiers.t3Footer,i).remove(),$(Identifiers.moduleBody).html(i.html())}))})).then((function(){MultiStepWizard.show()}))}))}function showReferencesSetup(e){$(Identifiers.showReferences).on(\"click\",(t=>{t.preventDefault();const a=$(t.currentTarget),r=e.getAjaxEndpoint(\"references\")+\"&formPersistenceIdentifier=\"+a.data(\"formPersistenceIdentifier\");$.get(r,(function(e){let t;const r=[];r.push({text:TYPO3.lang[\"formManager.cancel\"],active:!0,btnClass:\"btn-default\",name:\"cancel\",trigger:function(e,t){t.hideModal()}});if(e.references.length>0){t=\"<div><h3>\"+TYPO3.lang[\"formManager.references.headline\"].replace(\"{0}\",securityUtility.encodeHtml(a.data(\"formName\")))+'</h3></div><div class=\"table-fit\"><table id=\"forms\" class=\"table table-striped table-sm\"><thead><tr><th>'+TYPO3.lang[\"formManager.page\"]+\"</th><th>\"+TYPO3.lang[\"formManager.record\"]+\"</th></tr></thead><tbody>\";for(let a=0,r=e.references.length;a<r;++a)t+=\"<tr><td>\"+securityUtility.encodeHtml(e.references[a].recordPageTitle)+\"</td><td>\"+e.references[a].recordIcon+'<a href=\"'+securityUtility.encodeHtml(e.references[a].recordEditUrl)+'\" data-identifier=\"referenceLink\">'+securityUtility.encodeHtml(e.references[a].recordTitle)+\" (uid: \"+securityUtility.encodeHtml(e.references[a].recordUid)+\")</a></td></tr>\";t+=\"</tbody></table></div>\"}else t=\"<div><h1>\"+TYPO3.lang[\"formManager.references.title\"].replace(\"{0}\",securityUtility.encodeHtml(e.formPersistenceIdentifier))+\"</h1></div><div>\"+TYPO3.lang[\"formManager.no_references\"]+\"</div>\";t=$(t),$(Identifiers.referenceLink,t).on(\"click\",(function(e){e.preventDefault(),Modal.currentModal.hideModal(),document.location=$(e.currentTarget).prop(\"href\")})),Modal.show(TYPO3.lang[\"formManager.references.title\"],t,Severity.info,r)})).fail((function(e,t,a){0!==e.status&&Notification.error(t,a,2)}))}))}function initializeSortable(){const e=document.querySelector(Identifiers.formsTable);null!==e&&new SortableTable(e)}!function(e){e.newFormModalTrigger='[data-identifier=\"newForm\"]',e.duplicateFormModalTrigger='[data-identifier=\"duplicateForm\"]',e.removeFormModalTrigger='[data-identifier=\"removeForm\"]',e.newFormModeButton='[data-identifier=\"newFormModeButton\"]',e.newFormName='[data-identifier=\"newFormName\"]',e.newFormSavePath='[data-identifier=\"newFormSavePath\"]',e.newFormPrototypeName='[data-identifier=\"newFormPrototypeName\"]',e.newFormTemplate='[data-identifier=\"newFormTemplate\"]',e.duplicateFormName='[data-identifier=\"duplicateFormName\"]',e.duplicateFormSavePath='[data-identifier=\"duplicateFormSavePath\"]',e.showReferences='[data-identifier=\"showReferences\"]',e.referenceLink='[data-identifier=\"referenceLink\"]',e.moduleBody=\".module-body.t3js-module-body\",e.t3Logo=\".t3-message-page-logo\",e.t3Footer=\"#t3-footer\",e.formsTable=\"#forms\"}(Identifiers||(Identifiers={}));export function bootstrap(e){removeFormSetup(e),newFormSetup(e),duplicateFormSetup(e),showReferencesSetup(e),initializeSortable()}",
          "",
          "[Added Lines]",
          "[None]",
          "",
          "---------------"
        ]
      }
    },
    {
      "candidate_hash": "3cdecdbb051a5e708e7a230ae46938593efe6300",
      "candidate_info": {
        "commit_hash": "3cdecdbb051a5e708e7a230ae46938593efe6300",
        "repo": "TYPO3-CMS/form",
        "commit_url": "https://github.com/TYPO3-CMS/form/commit/3cdecdbb051a5e708e7a230ae46938593efe6300",
        "files": [
          "Classes/Controller/FormEditorController.php",
          "Classes/Controller/FormManagerController.php",
          "Resources/Private/Templates/Backend/FormManager/Index.html",
          "Resources/Public/JavaScript/backend/form-manager/view-model.js"
        ],
        "message": "[SECURITY] Enforce HTTP method assertions for backend modules\n\nResolves: #104456\nReleases: main, 13.4, 12.4\nChange-Id: Ic679584a343b6d35e81325a03148b0cff81f1d27\nSecurity-Bulletin: TYPO3-CORE-SA-2025-003\nSecurity-Bulletin: TYPO3-CORE-SA-2025-004\nSecurity-Bulletin: TYPO3-CORE-SA-2025-005\nSecurity-Bulletin: TYPO3-CORE-SA-2025-006\nSecurity-Bulletin: TYPO3-CORE-SA-2025-007\nSecurity-Bulletin: TYPO3-CORE-SA-2025-008\nSecurity-References: CVE-2024-55893\nSecurity-References: CVE-2024-55894\nSecurity-References: CVE-2024-55920\nSecurity-References: CVE-2024-55921\nSecurity-References: CVE-2024-55922\nSecurity-References: CVE-2024-55923\nReviewed-on: https://review.typo3.org/c/Packages/TYPO3.CMS/+/87738\nTested-by: Oliver Hader <oliver.hader@typo3.org>\nReviewed-by: Oliver Hader <oliver.hader@typo3.org>",
        "before_after_code_files": [
          "Classes/Controller/FormEditorController.php||Classes/Controller/FormEditorController.php",
          "Classes/Controller/FormManagerController.php||Classes/Controller/FormManagerController.php",
          "Resources/Private/Templates/Backend/FormManager/Index.html||Resources/Private/Templates/Backend/FormManager/Index.html",
          "Resources/Public/JavaScript/backend/form-manager/view-model.js||Resources/Public/JavaScript/backend/form-manager/view-model.js"
        ]
      },
      "candidate_patch_features": {
        "candidate_earlier_than_patch": 1,
        "diff_branch_message": 1,
        "olp_code_files": {
          "patch": [
            "Classes/Controller/FormEditorController.php||Classes/Controller/FormEditorController.php",
            "Classes/Controller/FormManagerController.php||Classes/Controller/FormManagerController.php",
            "Resources/Private/Templates/Backend/FormManager/Index.html||Resources/Private/Templates/Backend/FormManager/Index.html",
            "Resources/Public/JavaScript/backend/form-manager/view-model.js||Resources/Public/JavaScript/backend/form-manager/view-model.js"
          ],
          "candidate": [
            "Classes/Controller/FormEditorController.php||Classes/Controller/FormEditorController.php",
            "Classes/Controller/FormManagerController.php||Classes/Controller/FormManagerController.php",
            "Resources/Private/Templates/Backend/FormManager/Index.html||Resources/Private/Templates/Backend/FormManager/Index.html",
            "Resources/Public/JavaScript/backend/form-manager/view-model.js||Resources/Public/JavaScript/backend/form-manager/view-model.js"
          ]
        }
      },
      "candidate_diff": {
        "Classes/Controller/FormEditorController.php||Classes/Controller/FormEditorController.php": [
          "File: Classes/Controller/FormEditorController.php -> Classes/Controller/FormEditorController.php",
          "--- Hunk 1 ---",
          "[Context before]",
          "23: use TYPO3\\CMS\\Backend\\Template\\ModuleTemplate;",
          "24: use TYPO3\\CMS\\Backend\\Template\\ModuleTemplateFactory;",
          "25: use TYPO3\\CMS\\Core\\Authentication\\BackendUserAuthentication;",
          "26: use TYPO3\\CMS\\Core\\Imaging\\Icon;",
          "27: use TYPO3\\CMS\\Core\\Imaging\\IconFactory;",
          "28: use TYPO3\\CMS\\Core\\Localization\\LanguageService;",
          "",
          "[Removed Lines]",
          "[None]",
          "",
          "[Added Lines]",
          "26: use TYPO3\\CMS\\Core\\Http\\AllowedMethodsTrait;",
          "",
          "---------------",
          "--- Hunk 2 ---",
          "[Context before]",
          "54: class FormEditorController extends AbstractBackendController",
          "55: {",
          "56:     protected const JS_MODULE_NAMES = ['app', 'mediator', 'viewModel'];",
          "58:     protected array $prototypeConfiguration;",
          "",
          "[Removed Lines]",
          "[None]",
          "",
          "[Added Lines]",
          "57:     use AllowedMethodsTrait;",
          "",
          "---------------",
          "--- Hunk 3 ---",
          "[Context before]",
          "206:     public function initializeSaveFormAction(): void",
          "207:     {",
          "208:         $this->defaultViewObjectName = JsonView::class;",
          "209:     }",
          "",
          "[Removed Lines]",
          "[None]",
          "",
          "[Added Lines]",
          "211:         $this->assertAllowedHttpMethod($this->request, 'POST');",
          "",
          "---------------"
        ],
        "Classes/Controller/FormManagerController.php||Classes/Controller/FormManagerController.php": [
          "File: Classes/Controller/FormManagerController.php -> Classes/Controller/FormManagerController.php",
          "--- Hunk 1 ---",
          "[Context before]",
          "27: use TYPO3\\CMS\\Backend\\Utility\\BackendUtility;",
          "28: use TYPO3\\CMS\\Core\\Authentication\\BackendUserAuthentication;",
          "29: use TYPO3\\CMS\\Core\\Charset\\CharsetConverter;",
          "30: use TYPO3\\CMS\\Core\\Imaging\\Icon;",
          "31: use TYPO3\\CMS\\Core\\Imaging\\IconFactory;",
          "32: use TYPO3\\CMS\\Core\\Localization\\LanguageService;",
          "",
          "[Removed Lines]",
          "[None]",
          "",
          "[Added Lines]",
          "30: use TYPO3\\CMS\\Core\\Http\\AllowedMethodsTrait;",
          "",
          "---------------",
          "--- Hunk 2 ---",
          "[Context before]",
          "34: use TYPO3\\CMS\\Core\\Page\\PageRenderer;",
          "35: use TYPO3\\CMS\\Core\\Pagination\\ArrayPaginator;",
          "36: use TYPO3\\CMS\\Core\\Pagination\\SimplePagination;",
          "38: use TYPO3\\CMS\\Core\\Utility\\ArrayUtility;",
          "39: use TYPO3\\CMS\\Core\\Utility\\GeneralUtility;",
          "40: use TYPO3\\CMS\\Extbase\\Mvc\\View\\JsonView;",
          "",
          "[Removed Lines]",
          "37: use TYPO3\\CMS\\Core\\Type\\ContextualFeedbackSeverity;",
          "",
          "[Added Lines]",
          "[None]",
          "",
          "---------------",
          "--- Hunk 3 ---",
          "[Context before]",
          "52: class FormManagerController extends AbstractBackendController",
          "53: {",
          "54:     protected const JS_MODULE_NAMES = ['app', 'viewModel'];",
          "56:     protected int $limit = 20;",
          "",
          "[Removed Lines]",
          "[None]",
          "",
          "[Added Lines]",
          "54:     use AllowedMethodsTrait;",
          "",
          "---------------",
          "--- Hunk 4 ---",
          "[Context before]",
          "129:     protected function initializeCreateAction(): void",
          "130:     {",
          "131:         $this->defaultViewObjectName = JsonView::class;",
          "132:     }",
          "",
          "[Removed Lines]",
          "[None]",
          "",
          "[Added Lines]",
          "133:         $this->assertAllowedHttpMethod($this->request, 'POST');",
          "",
          "---------------",
          "--- Hunk 5 ---",
          "[Context before]",
          "201:     protected function initializeDuplicateAction(): void",
          "202:     {",
          "203:         $this->defaultViewObjectName = JsonView::class;",
          "204:     }",
          "",
          "[Removed Lines]",
          "[None]",
          "",
          "[Added Lines]",
          "206:         $this->assertAllowedHttpMethod($this->request, 'POST');",
          "",
          "---------------",
          "--- Hunk 6 ---",
          "[Context before]",
          "291:         return $this->jsonResponse();",
          "292:     }",
          "",
          "[Removed Lines]",
          "[None]",
          "",
          "[Added Lines]",
          "298:     protected function initializeDeleteAction(): void",
          "299:     {",
          "300:         $this->assertAllowedHttpMethod($this->request, 'POST');",
          "301:         $this->defaultViewObjectName = JsonView::class;",
          "302:     }",
          "",
          "---------------",
          "--- Hunk 7 ---",
          "[Context before]",
          "302:             throw new PersistenceManagerException(sprintf('Delete \"%s\" is not allowed', $formPersistenceIdentifier), 1614500661);",
          "303:         }",
          "305:         if (empty($this->databaseService->getReferencesByPersistenceIdentifier($formPersistenceIdentifier))) {",
          "306:             foreach ($GLOBALS['TYPO3_CONF_VARS']['SC_OPTIONS']['ext/form']['beforeFormDelete'] ?? [] as $className) {",
          "307:                 $hookObj = GeneralUtility::makeInstance($className);",
          "",
          "[Removed Lines]",
          "[None]",
          "",
          "[Added Lines]",
          "315:         $response = [",
          "316:             'status' => 'success',",
          "317:             'url' => $this->uriBuilder->uriFor('index', [], 'FormManager'),",
          "318:         ];",
          "",
          "---------------",
          "--- Hunk 8 ---",
          "[Context before]",
          "319:                 $this->formSettings['formManager']['translationFiles'] ?? []",
          "320:             );",
          "328:         }",
          "330:     }",
          "",
          "[Removed Lines]",
          "322:             $this->addFlashMessage(",
          "323:                 sprintf($controllerConfiguration['deleteAction']['errorMessage'], $formPersistenceIdentifier),",
          "324:                 $controllerConfiguration['deleteAction']['errorTitle'],",
          "325:                 ContextualFeedbackSeverity::ERROR,",
          "326:                 true",
          "327:             );",
          "329:         return $this->redirect('index');",
          "",
          "[Added Lines]",
          "336:             $response = [",
          "337:                 'status' => 'error',",
          "338:                 'title' => $controllerConfiguration['deleteAction']['errorTitle'],",
          "339:                 'message' => sprintf($controllerConfiguration['deleteAction']['errorMessage'], $formPersistenceIdentifier),",
          "340:             ];",
          "346:         $view = $this->view;",
          "347:         $view->assign('response', $response);",
          "348:         $view->setVariablesToRender([",
          "349:             'response',",
          "350:         ]);",
          "351:         return $this->jsonResponse();",
          "",
          "---------------"
        ],
        "Resources/Private/Templates/Backend/FormManager/Index.html||Resources/Private/Templates/Backend/FormManager/Index.html": [
          "File: Resources/Private/Templates/Backend/FormManager/Index.html -> Resources/Private/Templates/Backend/FormManager/Index.html",
          "--- Hunk 1 ---",
          "[Context before]",
          "95:                                                 <f:if condition=\"{form.invalid}\">",
          "96:                                                     <f:else>",
          "97:                                                         <li>",
          "99:                                                                 <span class=\"dropdown-item-columns\">",
          "100:                                                                     <span class=\"dropdown-item-column dropdown-item-column-icon text-{cacheAction.severity}\">",
          "101:                                                                         <core:icon identifier=\"actions-duplicate\" />",
          "",
          "[Removed Lines]",
          "98:                                                             <a href=\"#\" class=\"dropdown-item\" data-bs-original-title=\"{f:translate(key: 'LLL:EXT:form/Resources/Private/Language/Database.xlf:formManager.duplicate_this_form')}\" data-identifier=\"duplicateForm\" data-form-persistence-identifier=\"{form.persistenceIdentifier}\" data-form-name=\"{form.name}\">",
          "",
          "[Added Lines]",
          "98:                                                             <a href=\"#\" class=\"dropdown-item\" data-bs-original-title=\"{f:translate(key: 'LLL:EXT:form/Resources/Private/Language/Database.xlf:formManager.duplicate_this_form')}\" data-identifier=\"duplicateForm\" data-form-persistence-identifier=\"{form.persistenceIdentifier}\">",
          "",
          "---------------",
          "--- Hunk 2 ---",
          "[Context before]",
          "118:                                                 </f:if>",
          "119:                                                 <f:if condition=\"{form.removable} && ({form.invalid} == '0') && ({form.referenceCount} == '0')\">",
          "120:                                                     <li>",
          "122:                                                             <core:icon identifier=\"actions-edit-delete\" />",
          "123:                                                             <f:translate key=\"LLL:EXT:form/Resources/Private/Language/Database.xlf:formManager.delete_form\" />",
          "124:                                                         </a>",
          "",
          "[Removed Lines]",
          "121:                                                         <a href=\"#\" class=\"dropdown-item\" data-bs-original-title=\"{f:translate(key: 'LLL:EXT:form/Resources/Private/Language/Database.xlf:formManager.delete_form')}\" data-identifier=\"removeForm\" data-form-persistence-identifier=\"{form.persistenceIdentifier}\">",
          "",
          "[Added Lines]",
          "121:                                                         <a href=\"#\" class=\"dropdown-item\" data-bs-original-title=\"{f:translate(key: 'LLL:EXT:form/Resources/Private/Language/Database.xlf:formManager.delete_form')}\" data-identifier=\"removeForm\" data-form-persistence-identifier=\"{form.persistenceIdentifier}\" data-form-name=\"{form.name}\">",
          "",
          "---------------"
        ],
        "Resources/Public/JavaScript/backend/form-manager/view-model.js||Resources/Public/JavaScript/backend/form-manager/view-model.js": [
          "File: Resources/Public/JavaScript/backend/form-manager/view-model.js -> Resources/Public/JavaScript/backend/form-manager/view-model.js",
          "--- Hunk 1 ---",
          "[Context before]",
          "[No context available]",
          "",
          "[Removed Lines]",
          "13: import $ from\"jquery\";import Modal from\"@typo3/backend/modal.js\";import Severity from\"@typo3/backend/severity.js\";import MultiStepWizard from\"@typo3/backend/multi-step-wizard.js\";import Icons from\"@typo3/backend/icons.js\";import Notification from\"@typo3/backend/notification.js\";import SecurityUtility from\"@typo3/core/security-utility.js\";import{selector}from\"@typo3/core/literals.js\";const securityUtility=new SecurityUtility;var Identifiers;function newFormSetup(e){$(Identifiers.newFormModalTrigger).on(\"click\",(function(t){t.preventDefault(),MultiStepWizard.addSlide(\"new-form-step-1\",TYPO3.lang[\"formManager.newFormWizard.step1.title\"],\"\",Severity.info,TYPO3.lang[\"formManager.newFormWizard.step1.progressLabel\"],(function(t){Icons.getIcon(\"actions-plus\",Icons.sizes.small).then((function(a){Icons.getIcon(\"form-page\",Icons.sizes.large).then((function(r){Icons.getIcon(\"apps-pagetree-page-default\",Icons.sizes.large).then((function(i){let o;const n=MultiStepWizard.setup.$carousel.closest(\".modal\"),l=n.find(\".modal-footer\").find('button[name=\"next\"]');MultiStepWizard.blurCancelStep(),MultiStepWizard.lockNextStep(),MultiStepWizard.lockPrevStep();0===e.getAccessibleFormStorageFolders().length&&(o='<div class=\"new-form-modal\"><div class=\"row\"><label class=\"col col-form-label\">'+TYPO3.lang[\"formManager.newFormWizard.step1.noStorages\"]+\"</label></div></div>\",t.html(o),e.assert(!1,\"No accessible form storage folders\",1477506500)),o='<div class=\"new-form-modal\">',o+='<div class=\"card-container\"><div class=\"card card-size-medium\"><div class=\"card-header\"><div class=\"card-icon\">'+i+'</div><div class=\"card-header-body\"><h2 class=\"card-title\">'+TYPO3.lang[\"formManager.blankForm.label\"]+'</h2><span class=\"card-subtitle\">'+TYPO3.lang[\"formManager.blankForm.subtitle\"]+'</span></div></div><div class=\"card-body\"><p class=\"card-text\">'+TYPO3.lang[\"formManager.blankForm.description\"]+'</p></div><div class=\"card-footer\"><button type=\"button\" class=\"btn btn-success\" data-inline=\"1\" value=\"blank\" data-identifier=\"newFormModeButton\">'+a+\" \"+TYPO3.lang[\"formManager.blankForm.label\"]+'</button></div></div><div class=\"card card-size-medium\"><div class=\"card-header\"><div class=\"card-icon\">'+r+'</div><div class=\"card-header-body\"><h2 class=\"card-title\">'+TYPO3.lang[\"formManager.predefinedForm.label\"]+'</h2><span class=\"card-subtitle\">'+TYPO3.lang[\"formManager.predefinedForm.subtitle\"]+'</span></div></div><div class=\"card-body\"><p class=\"card-text\">'+TYPO3.lang[\"formManager.predefinedForm.description\"]+'</p></div><div class=\"card-footer\"><button type=\"button\" class=\"btn btn-success\" data-inline=\"1\" value=\"predefined\" data-identifier=\"newFormModeButton\">'+a+\" \"+TYPO3.lang[\"formManager.predefinedForm.label\"]+\"</button></div></div>\",o+=\"</div>\",t.html(o),$(Identifiers.newFormModeButton,n).on(\"click\",(function(e){MultiStepWizard.set(\"newFormMode\",$(e.currentTarget).val()),MultiStepWizard.unlockNextStep().trigger(\"click\")})),l.on(\"click\",(function(){Icons.getIcon(\"spinner-circle\",Icons.sizes.default,null,null).then((function(e){t.html($(\"<div />\",{class:\"text-center\"}).append(e).prop(\"outerHTML\"))}))}))}))}))}))})),MultiStepWizard.addSlide(\"new-form-step-2\",TYPO3.lang[\"formManager.newFormWizard.step2.title\"],\"\",Severity.info,top.TYPO3.lang[\"wizard.progressStep.configure\"],(function(t,a){let r,i;MultiStepWizard.lockNextStep(),MultiStepWizard.unlockPrevStep();const o=MultiStepWizard.setup.$carousel.closest(\".modal\"),n=o.find(\".modal-footer\").find('button[name=\"next\"]'),l=e.getAccessibleFormStorageFolders();if(a.savePath||(MultiStepWizard.set(\"savePath\",l[0].value),MultiStepWizard.set(\"savePathName\",l[0].label)),l.length>1){i=$('<select class=\"new-form-save-path form-select\" id=\"new-form-save-path\" data-identifier=\"newFormSavePath\" />');for(let e=0,t=l.length;e<t;++e){const t=new Option(l[e].label,l[e].value);$(i).append(t)}}const s=e.getPrototypes();e.assert(s.length>0,\"No prototypes available\",1477506501),a.prototypeName||(MultiStepWizard.set(\"prototypeName\",s[0].value),MultiStepWizard.set(\"prototypeNameName\",s[0].label));const d=$('<select class=\"new-form-prototype-name form-select\" id=\"new-form-prototype-name\" data-identifier=\"newFormPrototypeName\" />');for(let e=0,t=s.length;e<t;++e){const t=new Option(s[e].label,s[e].value);$(d).append(t)}let c=e.getTemplatesForPrototype(s[0].value);e.assert(c.length>0,\"No templates available\",1477506502),a.templatePath||(MultiStepWizard.set(\"templatePath\",c[0].value),MultiStepWizard.set(\"templatePathName\",c[0].label));const m=$('<select class=\"new-form-template form-select\" id=\"new-form-template\" data-identifier=\"newFormTemplate\" />');for(let e=0,t=c.length;e<t;++e){const t=new Option(c[e].label,c[e].value);$(m).append(t)}r='<div class=\"new-form-modal\">',\"blank\"===a.newFormMode?(r+='<h5 class=\"form-section-headline\">'+TYPO3.lang[\"formManager.blankForm.label\"]+\"</h5>\",MultiStepWizard.set(\"templatePath\",\"EXT:form/Resources/Private/Backend/Templates/FormEditor/Yaml/NewForms/BlankForm.yaml\"),MultiStepWizard.set(\"templatePathName\",TYPO3.lang[\"formManager.blankForm.label\"])):(r+='<h5 class=\"form-section-headline\">'+TYPO3.lang[\"formManager.predefinedForm.label\"]+\"</h5>\",s.length>1&&(r+='<div class=\"mb-3\"><label for=\"new-form-prototype-name\"><strong>'+TYPO3.lang[\"formManager.form_prototype\"]+'</strong></label><div class=\"formengine-field-item t3js-formengine-field-item\"><div class=\"form-control-wrap\">'+$(d)[0].outerHTML+\"</div></div></div>\"),c.length>1&&(r+='<div class=\"mb-3\"><label for=\"new-form-template\"><strong>'+TYPO3.lang[\"formManager.form_template\"]+'</strong></label><div class=\"formengine-field-item t3js-formengine-field-item\"><div class=\"form-description\">'+TYPO3.lang[\"formManager.form_template_description\"]+'</div><div class=\"form-control-wrap\">'+$(m)[0].outerHTML+\"</div></div></div>\")),r+='<div class=\"mb-3\"><label for=\"new-form-name\"><strong>'+TYPO3.lang[\"formManager.form_name\"]+'</strong></label><div class=\"formengine-field-item t3js-formengine-field-item\"><div class=\"form-description\">'+TYPO3.lang[\"formManager.form_name_description\"]+'</div><div class=\"form-control-wrap\">',a.formName?(r+='<input class=\"form-control\" id=\"new-form-name\" data-identifier=\"newFormName\" value=\"'+securityUtility.encodeHtml(a.formName)+'\" />',setTimeout((function(){MultiStepWizard.unlockNextStep()}),200)):r+='<input class=\"form-control has-error\" id=\"new-form-name\" data-identifier=\"newFormName\" />',r+=\"</div></div></div>\",i&&(r+='<div class=\"mb-3\"><label for=\"new-form-save-path\"><strong>'+TYPO3.lang[\"formManager.form_save_path\"]+'</strong></label><div class=\"formengine-field-item t3js-formengine-field-item\"><div class=\"form-description\">'+TYPO3.lang[\"formManager.form_save_path_description\"]+'</div><div class=\"form-control-wrap\">'+$(i)[0].outerHTML+\"</div></div></div>\"),r+=\"</div>\",t.html(r),a.savePath&&$(Identifiers.newFormSavePath,o).val(a.savePath),a.templatePath&&$(Identifiers.newFormTemplate,o).val(a.templatePath),s.length>1?$(Identifiers.newFormPrototypeName,o).focus():c.length>1&&$(Identifiers.newFormTemplate,o).focus();const p=function(){$(Identifiers.newFormTemplate,o).on(\"change\",(function(){MultiStepWizard.set(\"templatePath\",$(Identifiers.newFormTemplate+\" option:selected\",o).val()),MultiStepWizard.set(\"templatePathName\",$(Identifiers.newFormTemplate+\" option:selected\",o).text()),MultiStepWizard.set(\"templatePathOnPrev\",$(Identifiers.newFormTemplate+\" option:selected\",o).val())}))};$(Identifiers.newFormPrototypeName,o).on(\"change\",(function(t){MultiStepWizard.set(\"prototypeName\",$(Identifiers.newFormPrototypeName+\" option:selected\",o).val()),MultiStepWizard.set(\"prototypeNameName\",$(Identifiers.newFormPrototypeName+\" option:selected\",o).text()),c=e.getTemplatesForPrototype($(t.currentTarget).val()),$(Identifiers.newFormTemplate,o).off().empty();for(let e=0,t=c.length;e<t;++e){const t=new Option(c[e].label,c[e].value);$(Identifiers.newFormTemplate,o).append(t),MultiStepWizard.set(\"templatePath\",c[0].value),MultiStepWizard.set(\"templatePathName\",c[0].label)}p()})),p(),a.prototypeName&&($(Identifiers.newFormPrototypeName,o).val(a.prototypeName),$(Identifiers.newFormPrototypeName,o).trigger(\"change\"),a.templatePathOnPrev&&($(Identifiers.newFormTemplate,o).find(selector`option[value=\"${a.templatePathOnPrev}\"]`).prop(\"selected\",!0),$(Identifiers.newFormTemplate,o).trigger(\"change\"))),$(Identifiers.newFormName,o).focus(),$(Identifiers.newFormName,o).on(\"keyup paste\",(function(e){$(e.currentTarget).val().length>0?($(e.currentTarget).removeClass(\"has-error\"),MultiStepWizard.unlockNextStep(),MultiStepWizard.set(\"formName\",$(e.currentTarget).val()),\"code\"in e&&\"Enter\"===e.code&&MultiStepWizard.triggerStepButton(\"next\")):($(e.currentTarget).addClass(\"has-error\"),MultiStepWizard.lockNextStep())})),$(Identifiers.newFormSavePath,o).on(\"change\",(function(){MultiStepWizard.set(\"savePath\",$(Identifiers.newFormSavePath+\" option:selected\",o).val()),MultiStepWizard.set(\"savePathName\",$(Identifiers.newFormSavePath+\" option:selected\",o).text())})),\"blank\"===a.newFormMode||a.templatePathName||MultiStepWizard.set(\"templatePathName\",$(Identifiers.newFormTemplate+\" option:selected\",o).text()),n.on(\"click\",(function(){MultiStepWizard.setup.forceSelection=!1,Icons.getIcon(\"spinner-circle\",Icons.sizes.default,null,null).then((function(e){t.html($(\"<div />\",{class:\"text-center\"}).append(e).prop(\"outerHTML\"))}))}))})),MultiStepWizard.addSlide(\"new-form-step-3\",TYPO3.lang[\"formManager.newFormWizard.step3.title\"],\"\",Severity.info,TYPO3.lang[\"formManager.newFormWizard.step3.progressLabel\"],(function(e,t){Icons.getIcon(\"actions-cog\",Icons.sizes.small).then((function(a){Icons.getIcon(\"actions-file-t3d\",Icons.sizes.small).then((function(r){Icons.getIcon(\"actions-tag\",Icons.sizes.small).then((function(i){Icons.getIcon(\"actions-database\",Icons.sizes.small).then((function(o){const n=MultiStepWizard.setup.$carousel.closest(\".modal\").find(\".modal-footer\").find('button[name=\"next\"]');let l='<div class=\"new-form-modal\">';l+='<div class=\"mb-3\"><h5 class=\"form-section-headline\">'+TYPO3.lang[\"formManager.newFormWizard.step3.check\"]+\"</h5><p>\"+TYPO3.lang[\"formManager.newFormWizard.step3.message\"]+'</p></div><div class=\"alert alert-notice\"><div class=\"alert-body mt-1\">',t.prototypeNameName&&(l+='<div class=\"row my-1\"><div class=\"col col-sm-6\">'+a+\" \"+TYPO3.lang[\"formManager.form_prototype\"]+'</div><div class=\"col\">'+securityUtility.encodeHtml(t.prototypeNameName)+\"</div></div>\"),t.templatePathName&&(l+='<div class=\"row my-1\"><div class=\"col col-sm-6\">'+r+\" \"+TYPO3.lang[\"formManager.form_template\"]+'</div><div class=\"col\">'+securityUtility.encodeHtml(t.templatePathName)+\"</div></div>\"),l+='<div class=\"row my-1\"><div class=\"col col-sm-6\">'+i+\" \"+TYPO3.lang[\"formManager.form_name\"]+'</div><div class=\"col\">'+securityUtility.encodeHtml(t.formName)+'</div></div><div class=\"row my-1\"><div class=\"col col-sm-6\">'+o+\" \"+TYPO3.lang[\"formManager.form_save_path\"]+'</div><div class=\"col\">'+securityUtility.encodeHtml(t.savePathName)+\"</div></div>\",l+=\"</div></div></div>\",e.html(l),n.focus(),n.on(\"click\",(function(){MultiStepWizard.setup.forceSelection=!1,Icons.getIcon(\"spinner-circle\",Icons.sizes.default,null,null).then((function(t){e.html($(\"<div />\",{class:\"text-center\"}).append(t).prop(\"outerHTML\"))}))}))}))}))}))}))})),MultiStepWizard.addFinalProcessingSlide((function(){$.post(e.getAjaxEndpoint(\"create\"),{formName:MultiStepWizard.setup.settings.formName,templatePath:MultiStepWizard.setup.settings.templatePath,prototypeName:MultiStepWizard.setup.settings.prototypeName,savePath:MultiStepWizard.setup.settings.savePath},(function(e){\"success\"===e.status?document.location=e.url:Notification.error(TYPO3.lang[\"formManager.newFormWizard.step4.errorTitle\"],TYPO3.lang[\"formManager.newFormWizard.step4.errorMessage\"]+\" \"+e.message),MultiStepWizard.dismiss()})).fail((function(e,t,a){const r=(new DOMParser).parseFromString(e.responseText,\"text/html\"),i=$(r.body);Notification.error(t,a,2),MultiStepWizard.dismiss(),$(Identifiers.t3Logo,i).remove(),$(Identifiers.t3Footer,i).remove(),$(Identifiers.moduleBody).html(i.html())}))})).then((function(){MultiStepWizard.show()}))}))}function removeFormSetup(e){$(Identifiers.removeFormModalTrigger).on(\"click\",(function(t){const a=[];t.preventDefault();const r=$(t.currentTarget);a.push({text:TYPO3.lang[\"formManager.cancel\"],active:!0,btnClass:\"btn-default\",name:\"cancel\",trigger:function(e,t){t.hideModal()}}),a.push({text:TYPO3.lang[\"formManager.remove_form\"],active:!0,btnClass:\"btn-warning\",name:\"createform\",trigger:function(t,a){document.location=e.getAjaxEndpoint(\"delete\")+\"&formPersistenceIdentifier=\"+r.data(\"formPersistenceIdentifier\"),a.hideModal()}}),Modal.show(TYPO3.lang[\"formManager.remove_form_title\"],TYPO3.lang[\"formManager.remove_form_message\"],Severity.warning,a)}))}function duplicateFormSetup(e){$(Identifiers.duplicateFormModalTrigger).on(\"click\",(function(t){t.preventDefault();const a=$(t.currentTarget);MultiStepWizard.addSlide(\"duplicate-form-step-1\",TYPO3.lang[\"formManager.duplicateFormWizard.step1.title\"].replace(\"{0}\",a.data(\"formName\")),\"\",Severity.info,top.TYPO3.lang[\"wizard.progressStep.configure\"],(function(t){let r,i;MultiStepWizard.lockPrevStep(),MultiStepWizard.lockNextStep();const o=MultiStepWizard.setup.$carousel.closest(\".modal\"),n=o.find(\".modal-footer\").find('button[name=\"next\"]'),l=e.getAccessibleFormStorageFolders();if(e.assert(l.length>0,\"No accessible form storage folders\",1477649539),MultiStepWizard.set(\"formPersistenceIdentifier\",a.data(\"formPersistenceIdentifier\")),MultiStepWizard.set(\"savePath\",l[0].value),l.length>1){i=$('<select id=\"duplicate-form-save-path\" class=\"form-select\" data-identifier=\"duplicateFormSavePath\" />');for(let e=0,t=l.length;e<t;++e){const t=new Option(l[e].label,l[e].value);$(i).append(t)}}r='<div class=\"duplicate-form-modal\"><h5 class=\"form-section-headline\">'+TYPO3.lang[\"formManager.new_form_name\"]+'</h5><div class=\"mb-3\"><label for=\"duplicate-form-name\"><strong>'+TYPO3.lang[\"formManager.form_name\"]+'</strong></label><div class=\"formengine-field-item t3js-formengine-field-item\"><div class=\"form-description\">'+TYPO3.lang[\"formManager.form_name_description\"]+'</div><div class=\"form-control-wrap\"><input id=\"duplicate-form-name\" class=\"form-control has-error\" data-identifier=\"duplicateFormName\" /></div></div></div>',i&&(r+='<div class=\"mb-3\"><label for=\"duplicate-form-save-path\"><strong>'+TYPO3.lang[\"formManager.form_save_path\"]+'</strong></label><div class=\"formengine-field-item t3js-formengine-field-item\"><div class=\"form-description\">'+TYPO3.lang[\"formManager.form_save_path_description\"]+'</div><div class=\"form-control-wrap\">'+$(i)[0].outerHTML+\"</div></div></div>\"),r+=\"</div>\",t.html(r),$(Identifiers.duplicateFormName,o).focus(),$(Identifiers.duplicateFormName,o).on(\"keyup paste\",(function(e){const t=$(event.currentTarget);t.val().length>0?(t.removeClass(\"has-error\"),MultiStepWizard.unlockNextStep(),MultiStepWizard.set(\"formName\",t.val()),\"code\"in e&&\"Enter\"===e.code&&MultiStepWizard.triggerStepButton(\"next\")):(t.addClass(\"has-error\"),MultiStepWizard.lockNextStep())})),n.on(\"click\",(function(){MultiStepWizard.setup.forceSelection=!1,Icons.getIcon(\"spinner-circle\",Icons.sizes.default,null,null).then((function(e){MultiStepWizard.set(\"confirmationDuplicateFormName\",a.data(\"formName\")),l.length>1?(MultiStepWizard.set(\"savePath\",$(Identifiers.duplicateFormSavePath+\" option:selected\",o).val()),MultiStepWizard.set(\"confirmationDuplicateFormSavePath\",$(Identifiers.duplicateFormSavePath+\" option:selected\",o).text())):(MultiStepWizard.set(\"savePath\",l[0].value),MultiStepWizard.set(\"confirmationDuplicateFormSavePath\",l[0].label)),t.html($(\"<div />\",{class:\"text-center\"}).append(e).prop(\"outerHTML\"))}))}))})),MultiStepWizard.addSlide(\"duplicate-form-step-2\",TYPO3.lang[\"formManager.duplicateFormWizard.step2.title\"],\"\",Severity.info,TYPO3.lang[\"formManager.duplicateFormWizard.step2.progressLabel\"],(function(e,t){Icons.getIcon(\"actions-file-t3d\",Icons.sizes.small).then((function(a){Icons.getIcon(\"actions-tag\",Icons.sizes.small).then((function(r){Icons.getIcon(\"actions-database\",Icons.sizes.small).then((function(i){MultiStepWizard.unlockPrevStep(),MultiStepWizard.unlockNextStep();const o=MultiStepWizard.setup.$carousel.closest(\".modal\").find(\".modal-footer\").find('button[name=\"next\"]');let n='<div class=\"new-form-modal\"><div class=\"row\"><div class=\"col\">';n+='<div class=\"mb-3\"><h5 class=\"form-section-headline\">'+TYPO3.lang[\"formManager.duplicateFormWizard.step2.check\"]+\"</h5><p>\"+TYPO3.lang[\"formManager.newFormWizard.step3.message\"]+'</p></div><div class=\"alert alert-notice\"><div class=\"alert-body mt-1\"><div class=\"dropdown-table-row\"><div class=\"dropdown-table-column dropdown-table-icon\">'+a+'</div><div class=\"dropdown-table-column dropdown-table-title\">'+TYPO3.lang[\"formManager.form_copied\"]+'</div><div class=\"dropdown-table-column dropdown-table-value\">'+securityUtility.encodeHtml(t.confirmationDuplicateFormName)+'</div></div><div class=\"dropdown-table-row\"><div class=\"dropdown-table-column dropdown-table-icon\">'+r+'</div><div class=\"dropdown-table-column dropdown-table-title\">'+TYPO3.lang[\"formManager.form_name\"]+'</div><div class=\"dropdown-table-column dropdown-table-value\">'+securityUtility.encodeHtml(t.formName)+'</div></div><div class=\"dropdown-table-row\"><div class=\"dropdown-table-column dropdown-table-icon\">'+i+'</div><div class=\"dropdown-table-column dropdown-table-title\">'+TYPO3.lang[\"formManager.form_save_path\"]+'</div><div class=\"dropdown-table-column dropdown-table-value\">'+securityUtility.encodeHtml(t.confirmationDuplicateFormSavePath)+\"</div></div></div></div>\",n+=\"</div></div></div>\",e.html(n),o.focus(),o.on(\"click\",(function(){MultiStepWizard.setup.forceSelection=!1,Icons.getIcon(\"spinner-circle\",Icons.sizes.default,null,null).then((function(t){e.html($(\"<div />\",{class:\"text-center\"}).append(t).prop(\"outerHTML\"))}))}))}))}))}))})),MultiStepWizard.addFinalProcessingSlide((function(){$.post(e.getAjaxEndpoint(\"duplicate\"),{formName:MultiStepWizard.setup.settings.formName,formPersistenceIdentifier:MultiStepWizard.setup.settings.formPersistenceIdentifier,savePath:MultiStepWizard.setup.settings.savePath},(function(e){\"success\"===e.status?document.location=e.url:Notification.error(TYPO3.lang[\"formManager.duplicateFormWizard.step3.errorTitle\"],TYPO3.lang[\"formManager.duplicateFormWizard.step3.errorMessage\"]+\" \"+e.message),MultiStepWizard.dismiss()})).fail((function(e,t,a){const r=(new DOMParser).parseFromString(e.responseText,\"text/html\"),i=$(r.body);Notification.error(t,a,2),MultiStepWizard.dismiss(),$(Identifiers.t3Logo,i).remove(),$(Identifiers.t3Footer,i).remove(),$(Identifiers.moduleBody).html(i.html())}))})).then((function(){MultiStepWizard.show()}))}))}function showReferencesSetup(e){$(Identifiers.showReferences).on(\"click\",(t=>{t.preventDefault();const a=$(t.currentTarget),r=e.getAjaxEndpoint(\"references\")+\"&formPersistenceIdentifier=\"+a.data(\"formPersistenceIdentifier\");$.get(r,(function(e){let t;const r=[];r.push({text:TYPO3.lang[\"formManager.cancel\"],active:!0,btnClass:\"btn-default\",name:\"cancel\",trigger:function(e,t){t.hideModal()}});if(e.references.length>0){t=\"<div><h3>\"+TYPO3.lang[\"formManager.references.headline\"].replace(\"{0}\",securityUtility.encodeHtml(a.data(\"formName\")))+'</h3></div><div class=\"table-fit\"><table id=\"forms\" class=\"table table-striped table-sm\"><thead><tr><th>'+TYPO3.lang[\"formManager.page\"]+\"</th><th>\"+TYPO3.lang[\"formManager.record\"]+\"</th></tr></thead><tbody>\";for(let a=0,r=e.references.length;a<r;++a)t+=\"<tr><td>\"+securityUtility.encodeHtml(e.references[a].recordPageTitle)+\"</td><td>\"+e.references[a].recordIcon+'<a href=\"'+securityUtility.encodeHtml(e.references[a].recordEditUrl)+'\" data-identifier=\"referenceLink\">'+securityUtility.encodeHtml(e.references[a].recordTitle)+\" (uid: \"+securityUtility.encodeHtml(e.references[a].recordUid)+\")</a></td></tr>\";t+=\"</tbody></table></div>\"}else t=\"<div><h1>\"+TYPO3.lang[\"formManager.references.title\"].replace(\"{0}\",securityUtility.encodeHtml(e.formPersistenceIdentifier))+\"</h1></div><div>\"+TYPO3.lang[\"formManager.no_references\"]+\"</div>\";t=$(t),$(Identifiers.referenceLink,t).on(\"click\",(function(e){e.preventDefault(),Modal.currentModal.hideModal(),document.location=$(e.currentTarget).prop(\"href\")})),Modal.show(TYPO3.lang[\"formManager.references.title\"],t,Severity.info,r)})).fail((function(e,t,a){0!==e.status&&Notification.error(t,a,2)}))}))}!function(e){e.newFormModalTrigger='[data-identifier=\"newForm\"]',e.duplicateFormModalTrigger='[data-identifier=\"duplicateForm\"]',e.removeFormModalTrigger='[data-identifier=\"removeForm\"]',e.newFormModeButton='[data-identifier=\"newFormModeButton\"]',e.newFormName='[data-identifier=\"newFormName\"]',e.newFormSavePath='[data-identifier=\"newFormSavePath\"]',e.newFormPrototypeName='[data-identifier=\"newFormPrototypeName\"]',e.newFormTemplate='[data-identifier=\"newFormTemplate\"]',e.duplicateFormName='[data-identifier=\"duplicateFormName\"]',e.duplicateFormSavePath='[data-identifier=\"duplicateFormSavePath\"]',e.showReferences='[data-identifier=\"showReferences\"]',e.referenceLink='[data-identifier=\"referenceLink\"]',e.moduleBody=\".module-body.t3js-module-body\",e.t3Logo=\".t3-message-page-logo\",e.t3Footer=\"#t3-footer\"}(Identifiers||(Identifiers={}));export function bootstrap(e){removeFormSetup(e),newFormSetup(e),duplicateFormSetup(e),showReferencesSetup(e)}",
          "",
          "[Added Lines]",
          "[None]",
          "",
          "---------------"
        ]
      }
    },
    {
      "candidate_hash": "c7761108bd0df65f57e6899c483088e2df28fe70",
      "candidate_info": {
        "commit_hash": "c7761108bd0df65f57e6899c483088e2df28fe70",
        "repo": "TYPO3-CMS/form",
        "commit_url": "https://github.com/TYPO3-CMS/form/commit/c7761108bd0df65f57e6899c483088e2df28fe70",
        "files": [
          "Classes/Controller/FormEditorController.php",
          "Classes/Controller/FormManagerController.php",
          "Resources/Private/Templates/Backend/FormManager/Index.html",
          "Resources/Public/JavaScript/backend/form-manager/view-model.js"
        ],
        "message": "[SECURITY] Enforce HTTP method assertions for backend modules\n\nResolves: #104456\nReleases: main, 13.4, 12.4\nChange-Id: Ic679584a343b6d35e81325a03148b0cff81f1d27\nSecurity-Bulletin: TYPO3-CORE-SA-2025-003\nSecurity-Bulletin: TYPO3-CORE-SA-2025-004\nSecurity-Bulletin: TYPO3-CORE-SA-2025-005\nSecurity-Bulletin: TYPO3-CORE-SA-2025-006\nSecurity-Bulletin: TYPO3-CORE-SA-2025-007\nSecurity-Bulletin: TYPO3-CORE-SA-2025-008\nSecurity-References: CVE-2024-55893\nSecurity-References: CVE-2024-55894\nSecurity-References: CVE-2024-55920\nSecurity-References: CVE-2024-55921\nSecurity-References: CVE-2024-55922\nSecurity-References: CVE-2024-55923\nReviewed-on: https://review.typo3.org/c/Packages/TYPO3.CMS/+/87741\nTested-by: Oliver Hader <oliver.hader@typo3.org>\nReviewed-by: Oliver Hader <oliver.hader@typo3.org>",
        "before_after_code_files": [
          "Classes/Controller/FormEditorController.php||Classes/Controller/FormEditorController.php",
          "Classes/Controller/FormManagerController.php||Classes/Controller/FormManagerController.php",
          "Resources/Private/Templates/Backend/FormManager/Index.html||Resources/Private/Templates/Backend/FormManager/Index.html",
          "Resources/Public/JavaScript/backend/form-manager/view-model.js||Resources/Public/JavaScript/backend/form-manager/view-model.js"
        ]
      },
      "candidate_patch_features": {
        "candidate_earlier_than_patch": 1,
        "diff_branch_message": 1,
        "olp_code_files": {
          "patch": [
            "Classes/Controller/FormEditorController.php||Classes/Controller/FormEditorController.php",
            "Classes/Controller/FormManagerController.php||Classes/Controller/FormManagerController.php",
            "Resources/Private/Templates/Backend/FormManager/Index.html||Resources/Private/Templates/Backend/FormManager/Index.html",
            "Resources/Public/JavaScript/backend/form-manager/view-model.js||Resources/Public/JavaScript/backend/form-manager/view-model.js"
          ],
          "candidate": [
            "Classes/Controller/FormEditorController.php||Classes/Controller/FormEditorController.php",
            "Classes/Controller/FormManagerController.php||Classes/Controller/FormManagerController.php",
            "Resources/Private/Templates/Backend/FormManager/Index.html||Resources/Private/Templates/Backend/FormManager/Index.html",
            "Resources/Public/JavaScript/backend/form-manager/view-model.js||Resources/Public/JavaScript/backend/form-manager/view-model.js"
          ]
        }
      },
      "candidate_diff": {
        "Classes/Controller/FormEditorController.php||Classes/Controller/FormEditorController.php": [
          "File: Classes/Controller/FormEditorController.php -> Classes/Controller/FormEditorController.php",
          "--- Hunk 1 ---",
          "[Context before]",
          "22: use TYPO3\\CMS\\Backend\\Template\\Components\\ButtonBar;",
          "23: use TYPO3\\CMS\\Backend\\Template\\ModuleTemplate;",
          "24: use TYPO3\\CMS\\Backend\\Template\\ModuleTemplateFactory;",
          "25: use TYPO3\\CMS\\Core\\Imaging\\IconFactory;",
          "26: use TYPO3\\CMS\\Core\\Imaging\\IconSize;",
          "27: use TYPO3\\CMS\\Core\\Localization\\LanguageService;",
          "",
          "[Removed Lines]",
          "[None]",
          "",
          "[Added Lines]",
          "25: use TYPO3\\CMS\\Core\\Http\\AllowedMethodsTrait;",
          "",
          "---------------",
          "--- Hunk 2 ---",
          "[Context before]",
          "58: class FormEditorController extends ActionController",
          "59: {",
          "60:     protected const JS_MODULE_NAMES = ['app', 'mediator', 'viewModel'];",
          "62:     public function __construct(",
          "",
          "[Removed Lines]",
          "[None]",
          "",
          "[Added Lines]",
          "61:     use AllowedMethodsTrait;",
          "",
          "---------------",
          "--- Hunk 3 ---",
          "[Context before]",
          "171:     protected function initializeSaveFormAction(): void",
          "172:     {",
          "173:         $this->defaultViewObjectName = JsonView::class;",
          "174:     }",
          "",
          "[Removed Lines]",
          "[None]",
          "",
          "[Added Lines]",
          "176:         $this->assertAllowedHttpMethod($this->request, 'POST');",
          "",
          "---------------"
        ],
        "Classes/Controller/FormManagerController.php||Classes/Controller/FormManagerController.php": [
          "File: Classes/Controller/FormManagerController.php -> Classes/Controller/FormManagerController.php",
          "--- Hunk 1 ---",
          "[Context before]",
          "26: use TYPO3\\CMS\\Backend\\Template\\ModuleTemplateFactory;",
          "27: use TYPO3\\CMS\\Backend\\Utility\\BackendUtility;",
          "28: use TYPO3\\CMS\\Core\\Charset\\CharsetConverter;",
          "29: use TYPO3\\CMS\\Core\\Imaging\\IconFactory;",
          "30: use TYPO3\\CMS\\Core\\Imaging\\IconSize;",
          "31: use TYPO3\\CMS\\Core\\Localization\\LanguageService;",
          "",
          "[Removed Lines]",
          "[None]",
          "",
          "[Added Lines]",
          "29: use TYPO3\\CMS\\Core\\Http\\AllowedMethodsTrait;",
          "",
          "---------------",
          "--- Hunk 2 ---",
          "[Context before]",
          "33: use TYPO3\\CMS\\Core\\Page\\PageRenderer;",
          "34: use TYPO3\\CMS\\Core\\Pagination\\ArrayPaginator;",
          "35: use TYPO3\\CMS\\Core\\Pagination\\SimplePagination;",
          "37: use TYPO3\\CMS\\Core\\Utility\\ArrayUtility;",
          "38: use TYPO3\\CMS\\Core\\Utility\\GeneralUtility;",
          "39: use TYPO3\\CMS\\Extbase\\Configuration\\ConfigurationManagerInterface;",
          "",
          "[Removed Lines]",
          "36: use TYPO3\\CMS\\Core\\Type\\ContextualFeedbackSeverity;",
          "",
          "[Added Lines]",
          "[None]",
          "",
          "---------------",
          "--- Hunk 3 ---",
          "[Context before]",
          "55: class FormManagerController extends ActionController",
          "56: {",
          "57:     protected const JS_MODULE_NAMES = ['app', 'viewModel'];",
          "58:     protected const PAGINATION_MAX = 20;",
          "",
          "[Removed Lines]",
          "[None]",
          "",
          "[Added Lines]",
          "57:     use AllowedMethodsTrait;",
          "",
          "---------------",
          "--- Hunk 4 ---",
          "[Context before]",
          "119:     protected function initializeCreateAction(): void",
          "120:     {",
          "121:         $this->defaultViewObjectName = JsonView::class;",
          "122:     }",
          "",
          "[Removed Lines]",
          "[None]",
          "",
          "[Added Lines]",
          "123:         $this->assertAllowedHttpMethod($this->request, 'POST');",
          "",
          "---------------",
          "--- Hunk 5 ---",
          "[Context before]",
          "186:     protected function initializeDuplicateAction(): void",
          "187:     {",
          "188:         $this->defaultViewObjectName = JsonView::class;",
          "189:     }",
          "",
          "[Removed Lines]",
          "[None]",
          "",
          "[Added Lines]",
          "191:         $this->assertAllowedHttpMethod($this->request, 'POST');",
          "",
          "---------------",
          "--- Hunk 6 ---",
          "[Context before]",
          "273:         return $this->jsonResponse();",
          "274:     }",
          "",
          "[Removed Lines]",
          "[None]",
          "",
          "[Added Lines]",
          "280:     protected function initializeDeleteAction(): void",
          "281:     {",
          "282:         $this->assertAllowedHttpMethod($this->request, 'POST');",
          "283:         $this->defaultViewObjectName = JsonView::class;",
          "284:     }",
          "",
          "---------------",
          "--- Hunk 7 ---",
          "[Context before]",
          "284:         if (!$this->formPersistenceManager->isAllowedPersistencePath($formPersistenceIdentifier, $formSettings)) {",
          "285:             throw new PersistenceManagerException(sprintf('Delete \"%s\" is not allowed', $formPersistenceIdentifier), 1614500661);",
          "286:         }",
          "287:         if (empty($this->databaseService->getReferencesByPersistenceIdentifier($formPersistenceIdentifier))) {",
          "288:             foreach ($GLOBALS['TYPO3_CONF_VARS']['SC_OPTIONS']['ext/form']['beforeFormDelete'] ?? [] as $className) {",
          "289:                 $hookObj = GeneralUtility::makeInstance($className);",
          "",
          "[Removed Lines]",
          "[None]",
          "",
          "[Added Lines]",
          "297:         $response = [",
          "298:             'status' => 'success',",
          "299:             'url' => $this->uriBuilder->uriFor('index', [], 'FormManager'),",
          "300:         ];",
          "",
          "---------------",
          "--- Hunk 8 ---",
          "[Context before]",
          "299:                 $formSettings['formManager']['controller'],",
          "300:                 $formSettings['formManager']['translationFiles'] ?? []",
          "301:             );",
          "307:         }",
          "309:     }",
          "311:     protected function getFormSettings(): array",
          "",
          "[Removed Lines]",
          "302:             $this->addFlashMessage(",
          "303:                 sprintf($controllerConfiguration['deleteAction']['errorMessage'], $formPersistenceIdentifier),",
          "304:                 $controllerConfiguration['deleteAction']['errorTitle'],",
          "305:                 ContextualFeedbackSeverity::ERROR,",
          "306:             );",
          "308:         return $this->redirect('index');",
          "",
          "[Added Lines]",
          "317:             $response = [",
          "318:                 'status' => 'error',",
          "319:                 'title' => $controllerConfiguration['deleteAction']['errorTitle'],",
          "320:                 'message' => sprintf($controllerConfiguration['deleteAction']['errorMessage'], $formPersistenceIdentifier),",
          "321:             ];",
          "327:         $view = $this->view;",
          "328:         $view->assign('response', $response);",
          "329:         $view->setVariablesToRender([",
          "330:             'response',",
          "331:         ]);",
          "332:         return $this->jsonResponse();",
          "",
          "---------------"
        ],
        "Resources/Private/Templates/Backend/FormManager/Index.html||Resources/Private/Templates/Backend/FormManager/Index.html": [
          "File: Resources/Private/Templates/Backend/FormManager/Index.html -> Resources/Private/Templates/Backend/FormManager/Index.html",
          "--- Hunk 1 ---",
          "[Context before]",
          "140:                                                     data-bs-original-title=\"{f:translate(key: 'LLL:EXT:form/Resources/Private/Language/Database.xlf:formManager.delete_form')}\"",
          "141:                                                     data-identifier=\"removeForm\"",
          "142:                                                     data-form-persistence-identifier=\"{form.persistenceIdentifier}\"",
          "143:                                                     title=\"{f:translate(key: 'LLL:EXT:form/Resources/Private/Language/Database.xlf:formManager.delete_form')}\"",
          "144:                                                 >",
          "145:                                                     <core:icon identifier=\"actions-edit-delete\" />",
          "",
          "[Removed Lines]",
          "[None]",
          "",
          "[Added Lines]",
          "143:                                                     data-form-name=\"{form.name}\"",
          "",
          "---------------"
        ],
        "Resources/Public/JavaScript/backend/form-manager/view-model.js||Resources/Public/JavaScript/backend/form-manager/view-model.js": [
          "File: Resources/Public/JavaScript/backend/form-manager/view-model.js -> Resources/Public/JavaScript/backend/form-manager/view-model.js",
          "--- Hunk 1 ---",
          "[Context before]",
          "[No context available]",
          "",
          "[Removed Lines]",
          "13: import $ from\"jquery\";import Modal from\"@typo3/backend/modal.js\";import Severity from\"@typo3/backend/severity.js\";import MultiStepWizard from\"@typo3/backend/multi-step-wizard.js\";import Icons from\"@typo3/backend/icons.js\";import Notification from\"@typo3/backend/notification.js\";import SecurityUtility from\"@typo3/core/security-utility.js\";import{selector}from\"@typo3/core/literals.js\";import SortableTable from\"@typo3/backend/sortable-table.js\";const securityUtility=new SecurityUtility;var Identifiers;function newFormSetup(e){$(Identifiers.newFormModalTrigger).on(\"click\",(function(t){t.preventDefault(),MultiStepWizard.addSlide(\"new-form-step-1\",TYPO3.lang[\"formManager.newFormWizard.step1.title\"],\"\",Severity.notice,TYPO3.lang[\"formManager.newFormWizard.step1.progressLabel\"],(async function(t){const a=await Icons.getIcon(\"actions-plus\",Icons.sizes.small),r=await Icons.getIcon(\"form-page\",Icons.sizes.large),i=await Icons.getIcon(\"apps-pagetree-page-default\",Icons.sizes.large);let o;const n=MultiStepWizard.setup.$carousel.closest(\".modal\"),l=n.find(\".modal-footer\").find('button[name=\"next\"]');MultiStepWizard.blurCancelStep(),MultiStepWizard.lockNextStep(),MultiStepWizard.lockPrevStep();0===e.getAccessibleFormStorageFolders().length&&(o='<div class=\"new-form-modal\"><div class=\"row\"><label class=\"col col-form-label\">'+TYPO3.lang[\"formManager.newFormWizard.step1.noStorages\"]+\"</label></div></div>\",t.html(o),e.assert(!1,\"No accessible form storage folders\",1477506500)),o='<div class=\"new-form-modal\">',o+='<div class=\"card-container\"><div class=\"card card-size-medium\"><div class=\"card-header\"><div class=\"card-icon\">'+i+'</div><div class=\"card-header-body\"><h2 class=\"card-title\">'+TYPO3.lang[\"formManager.blankForm.label\"]+'</h2><span class=\"card-subtitle\">'+TYPO3.lang[\"formManager.blankForm.subtitle\"]+'</span></div></div><div class=\"card-body\"><p class=\"card-text\">'+TYPO3.lang[\"formManager.blankForm.description\"]+'</p></div><div class=\"card-footer\"><button type=\"button\" class=\"btn btn-default\" data-inline=\"1\" value=\"blank\" data-identifier=\"newFormModeButton\">'+a+\" \"+TYPO3.lang[\"formManager.blankForm.label\"]+'</button></div></div><div class=\"card card-size-medium\"><div class=\"card-header\"><div class=\"card-icon\">'+r+'</div><div class=\"card-header-body\"><h2 class=\"card-title\">'+TYPO3.lang[\"formManager.predefinedForm.label\"]+'</h2><span class=\"card-subtitle\">'+TYPO3.lang[\"formManager.predefinedForm.subtitle\"]+'</span></div></div><div class=\"card-body\"><p class=\"card-text\">'+TYPO3.lang[\"formManager.predefinedForm.description\"]+'</p></div><div class=\"card-footer\"><button type=\"button\" class=\"btn btn-default\" data-inline=\"1\" value=\"predefined\" data-identifier=\"newFormModeButton\">'+a+\" \"+TYPO3.lang[\"formManager.predefinedForm.label\"]+\"</button></div></div>\",o+=\"</div>\",t.html(o),$(Identifiers.newFormModeButton,n).on(\"click\",(function(e){MultiStepWizard.set(\"newFormMode\",$(e.currentTarget).val()),MultiStepWizard.next()})),l.on(\"click\",(async function(){t.html($(\"<div />\",{class:\"text-center\"}).append(await Icons.getIcon(\"spinner-circle\",Icons.sizes.default,null,null)).prop(\"outerHTML\"))}))})),MultiStepWizard.addSlide(\"new-form-step-2\",TYPO3.lang[\"formManager.newFormWizard.step2.title\"],\"\",Severity.notice,top.TYPO3.lang[\"wizard.progressStep.configure\"],(function(t,a){let r,i;MultiStepWizard.lockNextStep(),MultiStepWizard.unlockPrevStep();const o=MultiStepWizard.setup.$carousel.closest(\".modal\"),n=o.find(\".modal-footer\").find('button[name=\"next\"]'),l=e.getAccessibleFormStorageFolders();if(a.savePath||(MultiStepWizard.set(\"savePath\",l[0].value),MultiStepWizard.set(\"savePathName\",l[0].label)),l.length>1){i=$('<select class=\"new-form-save-path form-select\" id=\"new-form-save-path\" data-identifier=\"newFormSavePath\" />');for(let e=0,t=l.length;e<t;++e){const t=new Option(l[e].label,l[e].value);$(i).append(t)}}const s=e.getPrototypes();e.assert(s.length>0,\"No prototypes available\",1477506501),a.prototypeName||(MultiStepWizard.set(\"prototypeName\",s[0].value),MultiStepWizard.set(\"prototypeNameName\",s[0].label));const d=$('<select class=\"new-form-prototype-name form-select\" id=\"new-form-prototype-name\" data-identifier=\"newFormPrototypeName\" />');for(let e=0,t=s.length;e<t;++e){const t=new Option(s[e].label,s[e].value);$(d).append(t)}let c=e.getTemplatesForPrototype(s[0].value);e.assert(c.length>0,\"No templates available\",1477506502),a.templatePath||(MultiStepWizard.set(\"templatePath\",c[0].value),MultiStepWizard.set(\"templatePathName\",c[0].label));const m=$('<select class=\"new-form-template form-select\" id=\"new-form-template\" data-identifier=\"newFormTemplate\" />');for(let e=0,t=c.length;e<t;++e){const t=new Option(c[e].label,c[e].value);$(m).append(t)}r='<div class=\"new-form-modal\">',\"blank\"===a.newFormMode?(r+='<h5 class=\"form-section-headline\">'+TYPO3.lang[\"formManager.blankForm.label\"]+\"</h5>\",MultiStepWizard.set(\"templatePath\",\"EXT:form/Resources/Private/Backend/Templates/FormEditor/Yaml/NewForms/BlankForm.yaml\"),MultiStepWizard.set(\"templatePathName\",TYPO3.lang[\"formManager.blankForm.label\"])):(r+='<h5 class=\"form-section-headline\">'+TYPO3.lang[\"formManager.predefinedForm.label\"]+\"</h5>\",s.length>1&&(r+='<div class=\"mb-3\"><label for=\"new-form-prototype-name\"><strong>'+TYPO3.lang[\"formManager.form_prototype\"]+'</strong></label><div class=\"formengine-field-item t3js-formengine-field-item\"><div class=\"form-control-wrap\">'+$(d)[0].outerHTML+\"</div></div></div>\"),c.length>1&&(r+='<div class=\"mb-3\"><label for=\"new-form-template\"><strong>'+TYPO3.lang[\"formManager.form_template\"]+'</strong></label><div class=\"formengine-field-item t3js-formengine-field-item\"><div class=\"form-description\">'+TYPO3.lang[\"formManager.form_template_description\"]+'</div><div class=\"form-control-wrap\">'+$(m)[0].outerHTML+\"</div></div></div>\")),r+='<div class=\"mb-3\"><label for=\"new-form-name\"><strong>'+TYPO3.lang[\"formManager.form_name\"]+'</strong></label><div class=\"formengine-field-item t3js-formengine-field-item\"><div class=\"form-description\">'+TYPO3.lang[\"formManager.form_name_description\"]+'</div><div class=\"form-control-wrap\">',a.formName?(r+='<input class=\"form-control\" id=\"new-form-name\" data-identifier=\"newFormName\" value=\"'+securityUtility.encodeHtml(a.formName)+'\" />',setTimeout((function(){MultiStepWizard.unlockNextStep()}),200)):r+='<input class=\"form-control has-error\" id=\"new-form-name\" data-identifier=\"newFormName\" />',r+=\"</div></div></div>\",i&&(r+='<div class=\"mb-3\"><label for=\"new-form-save-path\"><strong>'+TYPO3.lang[\"formManager.form_save_path\"]+'</strong></label><div class=\"formengine-field-item t3js-formengine-field-item\"><div class=\"form-description\">'+TYPO3.lang[\"formManager.form_save_path_description\"]+'</div><div class=\"form-control-wrap\">'+$(i)[0].outerHTML+\"</div></div></div>\"),r+=\"</div>\",t.html(r),a.savePath&&$(Identifiers.newFormSavePath,o).val(a.savePath),a.templatePath&&$(Identifiers.newFormTemplate,o).val(a.templatePath),s.length>1?$(Identifiers.newFormPrototypeName,o).focus():c.length>1&&$(Identifiers.newFormTemplate,o).focus();const p=function(){$(Identifiers.newFormTemplate,o).on(\"change\",(function(){MultiStepWizard.set(\"templatePath\",$(Identifiers.newFormTemplate+\" option:selected\",o).val()),MultiStepWizard.set(\"templatePathName\",$(Identifiers.newFormTemplate+\" option:selected\",o).text()),MultiStepWizard.set(\"templatePathOnPrev\",$(Identifiers.newFormTemplate+\" option:selected\",o).val())}))};$(Identifiers.newFormPrototypeName,o).on(\"change\",(function(t){MultiStepWizard.set(\"prototypeName\",$(Identifiers.newFormPrototypeName+\" option:selected\",o).val()),MultiStepWizard.set(\"prototypeNameName\",$(Identifiers.newFormPrototypeName+\" option:selected\",o).text()),c=e.getTemplatesForPrototype($(t.currentTarget).val()),$(Identifiers.newFormTemplate,o).off().empty();for(let e=0,t=c.length;e<t;++e){const t=new Option(c[e].label,c[e].value);$(Identifiers.newFormTemplate,o).append(t),MultiStepWizard.set(\"templatePath\",c[0].value),MultiStepWizard.set(\"templatePathName\",c[0].label)}p()})),p(),a.prototypeName&&($(Identifiers.newFormPrototypeName,o).val(a.prototypeName),$(Identifiers.newFormPrototypeName,o).trigger(\"change\"),a.templatePathOnPrev&&($(Identifiers.newFormTemplate,o).find(selector`option[value=\"${a.templatePathOnPrev}\"]`).prop(\"selected\",!0),$(Identifiers.newFormTemplate,o).trigger(\"change\"))),$(Identifiers.newFormName,o).focus(),$(Identifiers.newFormName,o).on(\"keyup paste\",(function(e){$(e.currentTarget).val().length>0?($(e.currentTarget).removeClass(\"has-error\"),MultiStepWizard.unlockNextStep(),MultiStepWizard.set(\"formName\",$(e.currentTarget).val()),\"code\"in e&&\"Enter\"===e.code&&MultiStepWizard.triggerStepButton(\"next\")):($(e.currentTarget).addClass(\"has-error\"),MultiStepWizard.lockNextStep())})),$(Identifiers.newFormSavePath,o).on(\"change\",(function(){MultiStepWizard.set(\"savePath\",$(Identifiers.newFormSavePath+\" option:selected\",o).val()),MultiStepWizard.set(\"savePathName\",$(Identifiers.newFormSavePath+\" option:selected\",o).text())})),\"blank\"===a.newFormMode||a.templatePathName||MultiStepWizard.set(\"templatePathName\",$(Identifiers.newFormTemplate+\" option:selected\",o).text()),n.on(\"click\",(async function(){MultiStepWizard.setup.forceSelection=!1,t.html($(\"<div />\",{class:\"text-center\"}).append(await Icons.getIcon(\"spinner-circle\",Icons.sizes.default,null,null)).prop(\"outerHTML\"))}))})),MultiStepWizard.addSlide(\"new-form-step-3\",TYPO3.lang[\"formManager.newFormWizard.step3.title\"],\"\",Severity.notice,TYPO3.lang[\"formManager.newFormWizard.step3.progressLabel\"],(async function(e,t){const a=await Icons.getIcon(\"actions-cog\",Icons.sizes.small),r=await Icons.getIcon(\"actions-file-t3d\",Icons.sizes.small),i=await Icons.getIcon(\"actions-tag\",Icons.sizes.small),o=await Icons.getIcon(\"actions-database\",Icons.sizes.small),n=MultiStepWizard.setup.$carousel.closest(\".modal\").find(\".modal-footer\").find('button[name=\"next\"]');let l='<div class=\"new-form-modal\">';l+='<div class=\"mb-3\"><h5 class=\"form-section-headline\">'+TYPO3.lang[\"formManager.newFormWizard.step3.check\"]+\"</h5><p>\"+TYPO3.lang[\"formManager.newFormWizard.step3.message\"]+'</p></div><div class=\"alert alert-notice\">',t.prototypeNameName&&(l+='<div class=\"row my-1\"><div class=\"col col-sm-6\">'+a+\" \"+TYPO3.lang[\"formManager.form_prototype\"]+'</div><div class=\"col\">'+securityUtility.encodeHtml(t.prototypeNameName)+\"</div></div>\"),t.templatePathName&&(l+='<div class=\"row my-1\"><div class=\"col col-sm-6\">'+r+\" \"+TYPO3.lang[\"formManager.form_template\"]+'</div><div class=\"col\">'+securityUtility.encodeHtml(t.templatePathName)+\"</div></div>\"),l+='<div class=\"row my-1\"><div class=\"col col-sm-6\">'+i+\" \"+TYPO3.lang[\"formManager.form_name\"]+'</div><div class=\"col\">'+securityUtility.encodeHtml(t.formName)+'</div></div><div class=\"row my-1\"><div class=\"col col-sm-6\">'+o+\" \"+TYPO3.lang[\"formManager.form_save_path\"]+'</div><div class=\"col\">'+securityUtility.encodeHtml(t.savePathName)+\"</div></div>\",l+=\"</div></div>\",e.html(l),n.focus(),n.on(\"click\",(async function(){MultiStepWizard.setup.forceSelection=!1,e.html($(\"<div />\",{class:\"text-center\"}).append(await Icons.getIcon(\"spinner-circle\",Icons.sizes.default,null,null)).prop(\"outerHTML\"))}))})),MultiStepWizard.addFinalProcessingSlide((function(){$.post(e.getAjaxEndpoint(\"create\"),{formName:MultiStepWizard.setup.settings.formName,templatePath:MultiStepWizard.setup.settings.templatePath,prototypeName:MultiStepWizard.setup.settings.prototypeName,savePath:MultiStepWizard.setup.settings.savePath},(function(e){\"success\"===e.status?document.location=e.url:Notification.error(TYPO3.lang[\"formManager.newFormWizard.step4.errorTitle\"],TYPO3.lang[\"formManager.newFormWizard.step4.errorMessage\"]+\" \"+e.message),MultiStepWizard.dismiss()})).fail((function(e,t,a){const r=(new DOMParser).parseFromString(e.responseText,\"text/html\"),i=$(r.body);Notification.error(t,a,2),MultiStepWizard.dismiss(),$(Identifiers.t3Logo,i).remove(),$(Identifiers.t3Footer,i).remove(),$(Identifiers.moduleBody).html(i.html())}))})).then((function(){MultiStepWizard.show()}))}))}function removeFormSetup(e){$(Identifiers.removeFormModalTrigger).on(\"click\",(function(t){const a=[];t.preventDefault();const r=$(t.currentTarget);a.push({text:TYPO3.lang[\"formManager.cancel\"],active:!0,btnClass:\"btn-default\",name:\"cancel\",trigger:function(e,t){t.hideModal()}}),a.push({text:TYPO3.lang[\"formManager.remove_form\"],active:!0,btnClass:\"btn-danger\",name:\"createform\",trigger:function(t,a){document.location=e.getAjaxEndpoint(\"delete\")+\"&formPersistenceIdentifier=\"+r.data(\"formPersistenceIdentifier\"),a.hideModal()}}),Modal.show(TYPO3.lang[\"formManager.remove_form_title\"],TYPO3.lang[\"formManager.remove_form_message\"].replace(\"{0}\",r.data(\"formName\")),Severity.error,a)}))}function duplicateFormSetup(e){$(Identifiers.duplicateFormModalTrigger).on(\"click\",(function(t){t.preventDefault();const a=$(t.currentTarget);MultiStepWizard.addSlide(\"duplicate-form-step-1\",TYPO3.lang[\"formManager.duplicateFormWizard.step1.title\"].replace(\"{0}\",a.data(\"formName\")),\"\",Severity.notice,top.TYPO3.lang[\"wizard.progressStep.configure\"],(function(t){let r,i;MultiStepWizard.lockPrevStep(),MultiStepWizard.lockNextStep();const o=MultiStepWizard.setup.$carousel.closest(\".modal\"),n=o.find(\".modal-footer\").find('button[name=\"next\"]'),l=e.getAccessibleFormStorageFolders();if(e.assert(l.length>0,\"No accessible form storage folders\",1477649539),MultiStepWizard.set(\"formPersistenceIdentifier\",a.data(\"formPersistenceIdentifier\")),MultiStepWizard.set(\"savePath\",l[0].value),l.length>1){i=$('<select id=\"duplicate-form-save-path\" class=\"form-select\" data-identifier=\"duplicateFormSavePath\" />');for(let e=0,t=l.length;e<t;++e){const t=new Option(l[e].label,l[e].value);$(i).append(t)}}r='<div class=\"duplicate-form-modal\"><h2 class=\"h3 form-section-headline\">'+TYPO3.lang[\"formManager.new_form_name\"]+'</h2><div class=\"mb-3\"><label for=\"duplicate-form-name\"><strong>'+TYPO3.lang[\"formManager.form_name\"]+'</strong></label><div class=\"formengine-field-item t3js-formengine-field-item\"><div class=\"form-description\">'+TYPO3.lang[\"formManager.form_name_description\"]+'</div><div class=\"form-control-wrap\"><input id=\"duplicate-form-name\" class=\"form-control has-error\" data-identifier=\"duplicateFormName\" /></div></div></div>',i&&(r+='<div class=\"mb-3\"><label for=\"duplicate-form-save-path\"><strong>'+TYPO3.lang[\"formManager.form_save_path\"]+'</strong></label><div class=\"formengine-field-item t3js-formengine-field-item\"><div class=\"form-description\">'+TYPO3.lang[\"formManager.form_save_path_description\"]+'</div><div class=\"form-control-wrap\">'+$(i)[0].outerHTML+\"</div></div></div>\"),r+=\"</div>\",t.html(r),$(Identifiers.duplicateFormName,o).focus(),$(Identifiers.duplicateFormName,o).on(\"keyup paste\",(function(e){const t=$(event.currentTarget);t.val().length>0?(t.removeClass(\"has-error\"),MultiStepWizard.unlockNextStep(),MultiStepWizard.set(\"formName\",t.val()),\"code\"in e&&\"Enter\"===e.code&&MultiStepWizard.triggerStepButton(\"next\")):(t.addClass(\"has-error\"),MultiStepWizard.lockNextStep())})),n.on(\"click\",(async function(){MultiStepWizard.setup.forceSelection=!1,MultiStepWizard.set(\"confirmationDuplicateFormName\",a.data(\"formName\")),l.length>1?(MultiStepWizard.set(\"savePath\",$(Identifiers.duplicateFormSavePath+\" option:selected\",o).val()),MultiStepWizard.set(\"confirmationDuplicateFormSavePath\",$(Identifiers.duplicateFormSavePath+\" option:selected\",o).text())):(MultiStepWizard.set(\"savePath\",l[0].value),MultiStepWizard.set(\"confirmationDuplicateFormSavePath\",l[0].label)),t.html($(\"<div />\",{class:\"text-center\"}).append(await Icons.getIcon(\"spinner-circle\",Icons.sizes.default,null,null)).prop(\"outerHTML\"))}))})),MultiStepWizard.addSlide(\"duplicate-form-step-2\",TYPO3.lang[\"formManager.duplicateFormWizard.step2.title\"],\"\",Severity.notice,TYPO3.lang[\"formManager.duplicateFormWizard.step2.progressLabel\"],(async function(e,t){const a=await Icons.getIcon(\"actions-file-t3d\",Icons.sizes.small),r=await Icons.getIcon(\"actions-tag\",Icons.sizes.small),i=await Icons.getIcon(\"actions-database\",Icons.sizes.small);MultiStepWizard.unlockPrevStep(),MultiStepWizard.unlockNextStep();const o=MultiStepWizard.setup.$carousel.closest(\".modal\").find(\".modal-footer\").find('button[name=\"next\"]');let n='<div class=\"new-form-modal\"><div class=\"row\"><div class=\"col\">';n+='<div class=\"mb-3\"><h5 class=\"form-section-headline\">'+TYPO3.lang[\"formManager.duplicateFormWizard.step2.check\"]+\"</h5><p>\"+TYPO3.lang[\"formManager.newFormWizard.step3.message\"]+'</p></div><div class=\"alert alert-notice\"><div class=\"dropdown-table-row\"><div class=\"dropdown-table-column dropdown-table-icon\">'+a+'</div><div class=\"dropdown-table-column dropdown-table-title\">'+TYPO3.lang[\"formManager.form_copied\"]+'</div><div class=\"dropdown-table-column dropdown-table-value\">'+securityUtility.encodeHtml(t.confirmationDuplicateFormName)+'</div></div><div class=\"dropdown-table-row\"><div class=\"dropdown-table-column dropdown-table-icon\">'+r+'</div><div class=\"dropdown-table-column dropdown-table-title\">'+TYPO3.lang[\"formManager.form_name\"]+'</div><div class=\"dropdown-table-column dropdown-table-value\">'+securityUtility.encodeHtml(t.formName)+'</div></div><div class=\"dropdown-table-row\"><div class=\"dropdown-table-column dropdown-table-icon\">'+i+'</div><div class=\"dropdown-table-column dropdown-table-title\">'+TYPO3.lang[\"formManager.form_save_path\"]+'</div><div class=\"dropdown-table-column dropdown-table-value\">'+securityUtility.encodeHtml(t.confirmationDuplicateFormSavePath)+\"</div></div></div>\",n+=\"</div></div></div>\",e.html(n),o.focus(),o.on(\"click\",(async function(){MultiStepWizard.setup.forceSelection=!1,e.html($(\"<div />\",{class:\"text-center\"}).append(await Icons.getIcon(\"spinner-circle\",Icons.sizes.default,null,null)).prop(\"outerHTML\"))}))})),MultiStepWizard.addFinalProcessingSlide((function(){$.post(e.getAjaxEndpoint(\"duplicate\"),{formName:MultiStepWizard.setup.settings.formName,formPersistenceIdentifier:MultiStepWizard.setup.settings.formPersistenceIdentifier,savePath:MultiStepWizard.setup.settings.savePath},(function(e){\"success\"===e.status?document.location=e.url:Notification.error(TYPO3.lang[\"formManager.duplicateFormWizard.step3.errorTitle\"],TYPO3.lang[\"formManager.duplicateFormWizard.step3.errorMessage\"]+\" \"+e.message),MultiStepWizard.dismiss()})).fail((function(e,t,a){const r=(new DOMParser).parseFromString(e.responseText,\"text/html\"),i=$(r.body);Notification.error(t,a,2),MultiStepWizard.dismiss(),$(Identifiers.t3Logo,i).remove(),$(Identifiers.t3Footer,i).remove(),$(Identifiers.moduleBody).html(i.html())}))})).then((function(){MultiStepWizard.show()}))}))}function showReferencesSetup(e){$(Identifiers.showReferences).on(\"click\",(t=>{t.preventDefault();const a=$(t.currentTarget),r=e.getAjaxEndpoint(\"references\")+\"&formPersistenceIdentifier=\"+a.data(\"formPersistenceIdentifier\");$.get(r,(async function(e){let t;const r=[];r.push({text:TYPO3.lang[\"formManager.cancel\"],active:!0,btnClass:\"btn-default\",name:\"cancel\",trigger:function(e,t){t.hideModal()}});const i=e.references.length,o=await Icons.getIcon(\"actions-open\",Icons.sizes.small);if(i>0){t='<div><h2 class=\"h3\">'+TYPO3.lang[\"formManager.references.headline\"].replace(\"{0}\",securityUtility.encodeHtml(a.data(\"formName\")))+'</h2></div><div class=\"table-fit\"><table id=\"forms\" class=\"table table-striped table-hover\"><thead><tr><th class=\"col-icon\"></th><th class=\"col-recordtitle\">'+TYPO3.lang[\"formManager.table.field.title\"]+\"</th><th>\"+TYPO3.lang[\"formManager.table.field.uid\"]+'</th><th class=\"col-control nowrap\"><span class=\"visually-hidden\">'+TYPO3.lang[\"formManager.table.field._CONTROL_\"]+\"</span></th></tr></thead><tbody>\";for(let a=0,r=e.references.length;a<r;++a)t+='<tr><td class=\"col-icon\">'+e.references[a].recordIcon+'</td><td class=\"col-recordtitle\"><a href=\"'+securityUtility.encodeHtml(e.references[a].recordEditUrl)+'\" data-identifier=\"referenceLink\">'+securityUtility.encodeHtml(e.references[a].recordTitle)+\"</a></td><td>\"+securityUtility.encodeHtml(e.references[a].recordUid)+'</td><td class=\"col-control\"><div class=\"btn-group\" role=\"group\"><a href=\"'+securityUtility.encodeHtml(e.references[a].recordEditUrl)+'\" data-identifier=\"referenceLink\" class=\"btn btn-default\" title=\"'+TYPO3.lang[\"formManager.btn.edit.title\"]+'\">'+o+\"</a></div></td></tr>\";t+=\"</tbody></table></div>\"}else t=\"<div><h1>\"+TYPO3.lang[\"formManager.references.title\"].replace(\"{0}\",securityUtility.encodeHtml(e.formPersistenceIdentifier))+\"</h1></div><div>\"+TYPO3.lang[\"formManager.no_references\"]+\"</div>\";t=$(t),$(Identifiers.referenceLink,t).on(\"click\",(function(e){e.preventDefault(),Modal.currentModal.hideModal(),document.location=$(e.currentTarget).prop(\"href\")})),Modal.show(TYPO3.lang[\"formManager.references.title\"].replace(\"{0}\",a.data(\"formName\")),t,Severity.notice,r)})).fail((function(e,t,a){0!==e.status&&Notification.error(t,a,2)}))}))}function initializeSortable(){const e=document.querySelector(Identifiers.formsTable);null!==e&&new SortableTable(e)}!function(e){e.newFormModalTrigger='[data-identifier=\"newForm\"]',e.duplicateFormModalTrigger='[data-identifier=\"duplicateForm\"]',e.removeFormModalTrigger='[data-identifier=\"removeForm\"]',e.newFormModeButton='[data-identifier=\"newFormModeButton\"]',e.newFormName='[data-identifier=\"newFormName\"]',e.newFormSavePath='[data-identifier=\"newFormSavePath\"]',e.newFormPrototypeName='[data-identifier=\"newFormPrototypeName\"]',e.newFormTemplate='[data-identifier=\"newFormTemplate\"]',e.duplicateFormName='[data-identifier=\"duplicateFormName\"]',e.duplicateFormSavePath='[data-identifier=\"duplicateFormSavePath\"]',e.showReferences='[data-identifier=\"showReferences\"]',e.referenceLink='[data-identifier=\"referenceLink\"]',e.moduleBody=\".module-body.t3js-module-body\",e.t3Logo=\".t3-message-page-logo\",e.t3Footer=\"#t3-footer\",e.formsTable=\"#forms\"}(Identifiers||(Identifiers={}));export function bootstrap(e){removeFormSetup(e),newFormSetup(e),duplicateFormSetup(e),showReferencesSetup(e),initializeSortable()}",
          "",
          "[Added Lines]",
          "[None]",
          "",
          "---------------"
        ]
      }
    }
  ]
}