{
  "cve_id": "CVE-2024-55920",
  "cve_desc": "TYPO3 is a free and open source Content Management Framework. A vulnerability has been identified in the backend user interface functionality involving deep links. Specifically, this functionality is susceptible to Cross-Site Request Forgery (CSRF). Additionally, state-changing actions in downstream components incorrectly accepted submissions via HTTP GET and did not enforce the appropriate HTTP method. Successful exploitation of this vulnerability requires the victim to have an active session on the backend user interface and to be deceived into interacting with a malicious URL targeting the backend, which can occur under the following conditions: The user opens a malicious link, such as one sent via email. The user visits a compromised or manipulated website while the following settings are misconfigured: 1. `security.backend.enforceReferrer` feature is disabled, 2. `BE/cookieSameSite` configuration is set to lax or none. The vulnerability in the affected downstream component \u201cDashboard Module\u201d allows attackers to manipulate the victim\u2019s dashboard configuration. Users are advised to update to TYPO3 versions 11.5.42 ELTS, 12.4.25 LTS, 13.4.3 LTS which fix the problem described. There are no known workarounds for this vulnerability.",
  "repo": "TYPO3-CMS/dashboard",
  "patch_hash": "c2e5dbdda87387ad9ee2ff8ca986d41dd9424875",
  "patch_info": {
    "commit_hash": "c2e5dbdda87387ad9ee2ff8ca986d41dd9424875",
    "repo": "TYPO3-CMS/dashboard",
    "commit_url": "https://github.com/TYPO3-CMS/dashboard/commit/c2e5dbdda87387ad9ee2ff8ca986d41dd9424875",
    "files": [
      "Classes/Controller/DashboardController.php",
      "Classes/WidgetGroupInitializationService.php",
      "Resources/Private/Layouts/Module.html",
      "Resources/Private/Templates/Dashboard/Main.html",
      "Resources/Public/Css/dashboard.css",
      "Resources/Public/JavaScript/dashboard-delete.js",
      "Resources/Public/JavaScript/widget-remover.js",
      "Resources/Public/JavaScript/widget-selector.js"
    ],
    "message": "[SECURITY] Enforce HTTP method assertions for backend modules\n\nResolves: #104456\nReleases: main, 13.4, 12.4\nChange-Id: Ic679584a343b6d35e81325a03148b0cff81f1d27\nSecurity-Bulletin: TYPO3-CORE-SA-2025-003\nSecurity-Bulletin: TYPO3-CORE-SA-2025-004\nSecurity-Bulletin: TYPO3-CORE-SA-2025-005\nSecurity-Bulletin: TYPO3-CORE-SA-2025-006\nSecurity-Bulletin: TYPO3-CORE-SA-2025-007\nSecurity-Bulletin: TYPO3-CORE-SA-2025-008\nSecurity-References: CVE-2024-55893\nSecurity-References: CVE-2024-55894\nSecurity-References: CVE-2024-55920\nSecurity-References: CVE-2024-55921\nSecurity-References: CVE-2024-55922\nSecurity-References: CVE-2024-55923\nReviewed-on: https://review.typo3.org/c/Packages/TYPO3.CMS/+/87744\nTested-by: Oliver Hader <oliver.hader@typo3.org>\nReviewed-by: Oliver Hader <oliver.hader@typo3.org>",
    "before_after_code_files": [
      "Classes/Controller/DashboardController.php||Classes/Controller/DashboardController.php",
      "Classes/WidgetGroupInitializationService.php||Classes/WidgetGroupInitializationService.php",
      "Resources/Private/Layouts/Module.html||Resources/Private/Layouts/Module.html",
      "Resources/Private/Templates/Dashboard/Main.html||Resources/Private/Templates/Dashboard/Main.html",
      "Resources/Public/Css/dashboard.css||Resources/Public/Css/dashboard.css",
      "Resources/Public/JavaScript/dashboard-delete.js||Resources/Public/JavaScript/dashboard-delete.js",
      "Resources/Public/JavaScript/widget-remover.js||Resources/Public/JavaScript/widget-remover.js",
      "Resources/Public/JavaScript/widget-selector.js||Resources/Public/JavaScript/widget-selector.js"
    ]
  },
  "patch_diff": {
    "Classes/Controller/DashboardController.php||Classes/Controller/DashboardController.php": [
      "File: Classes/Controller/DashboardController.php -> Classes/Controller/DashboardController.php",
      "--- Hunk 1 ---",
      "[Context before]",
      "20: use Psr\\Http\\Message\\ResponseInterface;",
      "21: use Psr\\Http\\Message\\ServerRequestInterface;",
      "22: use TYPO3\\CMS\\Backend\\Attribute\\AsController;",
      "23: use TYPO3\\CMS\\Backend\\Routing\\UriBuilder;",
      "24: use TYPO3\\CMS\\Backend\\Template\\ModuleTemplateFactory;",
      "25: use TYPO3\\CMS\\Core\\Authentication\\BackendUserAuthentication;",
      "26: use TYPO3\\CMS\\Core\\Http\\RedirectResponse;",
      "27: use TYPO3\\CMS\\Core\\Localization\\LanguageService;",
      "28: use TYPO3\\CMS\\Core\\Page\\PageRenderer;",
      "",
      "[Removed Lines]",
      "[None]",
      "",
      "[Added Lines]",
      "23: use TYPO3\\CMS\\Backend\\Domain\\Model\\Element\\ImmediateActionElement;",
      "27: use TYPO3\\CMS\\Core\\Http\\AllowedMethodsTrait;",
      "28: use TYPO3\\CMS\\Core\\Http\\HtmlResponse;",
      "",
      "---------------",
      "--- Hunk 2 ---",
      "[Context before]",
      "40: #[AsController]",
      "41: class DashboardController",
      "42: {",
      "43:     protected Dashboard $currentDashboard;",
      "45:     public function __construct(",
      "",
      "[Removed Lines]",
      "[None]",
      "",
      "[Added Lines]",
      "46:     use AllowedMethodsTrait;",
      "",
      "---------------",
      "--- Hunk 3 ---",
      "[Context before]",
      "91:     protected function configureDashboardAction(ServerRequestInterface $request): ResponseInterface",
      "92:     {",
      "93:         $parameters = $request->getParsedBody();",
      "94:         $currentDashboard = $parameters['currentDashboard'] ?? '';",
      "95:         $route = $this->uriBuilder->buildUriFromRoute('dashboard', ['action' => 'main'], UriBuilder::ABSOLUTE_URL);",
      "",
      "[Removed Lines]",
      "[None]",
      "",
      "[Added Lines]",
      "98:         $this->assertAllowedHttpMethod($request, 'POST');",
      "",
      "---------------",
      "--- Hunk 4 ---",
      "[Context before]",
      "102:     protected function setActiveDashboardAction(ServerRequestInterface $request): ResponseInterface",
      "103:     {",
      "105:         $route = $this->uriBuilder->buildUriFromRoute('dashboard', ['action' => 'main']);",
      "106:         return new RedirectResponse($route);",
      "107:     }",
      "109:     protected function addDashboardAction(ServerRequestInterface $request): ResponseInterface",
      "110:     {",
      "111:         $parameters = $request->getParsedBody();",
      "112:         $dashboardIdentifier = (string)($parameters['dashboard'] ?? '');",
      "113:         $dashboardPreset = $this->dashboardPresetRepository->getDashboardPresets()[$dashboardIdentifier] ?? null;",
      "",
      "[Removed Lines]",
      "104:         $this->saveCurrentDashboard((string)($request->getQueryParams()['currentDashboard'] ?? ''));",
      "",
      "[Added Lines]",
      "110:         $this->assertAllowedHttpMethod($request, 'POST');",
      "111:         $this->saveCurrentDashboard((string)($request->getParsedBody()['currentDashboard'] ?? ''));",
      "118:         $this->assertAllowedHttpMethod($request, 'POST');",
      "",
      "---------------",
      "--- Hunk 5 ---",
      "[Context before]",
      "124:         return new RedirectResponse($this->uriBuilder->buildUriFromRoute('dashboard', ['action' => 'main']));",
      "125:     }",
      "128:     {",
      "129:         $this->dashboardRepository->delete($this->currentDashboard);",
      "130:         return new RedirectResponse($this->uriBuilder->buildUriFromRoute('dashboard', ['action' => 'main']));",
      "131:     }",
      "133:     protected function addWidgetAction(ServerRequestInterface $request): ResponseInterface",
      "134:     {",
      "135:         $widgetKey = (string)($request->getQueryParams()['widget'] ?? '');",
      "136:         if ($widgetKey === '') {",
      "137:             throw new RequiredArgumentMissingException('Argument \"widget\" not set.', 1624436360);",
      "",
      "[Removed Lines]",
      "127:     protected function deleteDashboardAction(): ResponseInterface",
      "",
      "[Added Lines]",
      "135:     protected function deleteDashboardAction(ServerRequestInterface $request): ResponseInterface",
      "137:         $this->assertAllowedHttpMethod($request, 'POST');",
      "144:         $this->assertAllowedHttpMethod($request, 'POST');",
      "",
      "---------------",
      "--- Hunk 6 ---",
      "[Context before]",
      "140:         $hash = sha1($widgetKey . '-' . time());",
      "141:         $widgets[$hash] = ['identifier' => $widgetKey];",
      "142:         $this->dashboardRepository->updateWidgetConfig($this->currentDashboard, $widgets);",
      "145:     }",
      "147:     protected function removeWidgetAction(ServerRequestInterface $request): ResponseInterface",
      "148:     {",
      "150:         $widgetHash = $parameters['widgetHash'] ?? '';",
      "151:         $widgets = $this->currentDashboard->getWidgetConfig();",
      "152:         if ($widgetHash !== '' && array_key_exists($widgetHash, $widgets)) {",
      "",
      "[Removed Lines]",
      "143:         $route = $this->uriBuilder->buildUriFromRoute('dashboard', ['action' => 'main']);",
      "144:         return new RedirectResponse($route);",
      "149:         $parameters = $request->getQueryParams();",
      "",
      "[Added Lines]",
      "153:         return new HtmlResponse((string)ImmediateActionElement::dispatchCustomEvent('typo3.dashboard.addWidgetDone'));",
      "158:         $this->assertAllowedHttpMethod($request, 'POST');",
      "159:         $parameters = $request->getParsedBody();",
      "",
      "---------------"
    ],
    "Classes/WidgetGroupInitializationService.php||Classes/WidgetGroupInitializationService.php": [
      "File: Classes/WidgetGroupInitializationService.php -> Classes/WidgetGroupInitializationService.php",
      "--- Hunk 1 ---",
      "[Context before]",
      "51:                     'label' => $this->getLanguageService()->sL($widgetConfiguration->getTitle()),",
      "52:                     'description' => $this->getLanguageService()->sL($widgetConfiguration->getDescription()),",
      "53:                     'url' => (string)$this->uriBuilder->buildUriFromRoute('dashboard', ['action' => 'addWidget', 'widget' => $widgetIdentifier]),",
      "55:                 ];",
      "56:             }",
      "",
      "[Removed Lines]",
      "54:                     'requestType' => 'location',",
      "",
      "[Added Lines]",
      "54:                     'requestType' => 'ajax',",
      "55:                     'defaultValues' => [],",
      "56:                     'saveAndClose' => true,",
      "",
      "---------------"
    ],
    "Resources/Private/Layouts/Module.html||Resources/Private/Layouts/Module.html": [
      "File: Resources/Private/Layouts/Module.html -> Resources/Private/Layouts/Module.html",
      "--- Hunk 1 ---",
      "[Context before]",
      "20:                     <ul class=\"dashboard-tabs-menu\" role=\"menubar\">",
      "21:                         <f:for each=\"{availableDashboards}\" as=\"dashboard\" key=\"dashboardKey\">",
      "22:                             <li class=\"dashboard-tabs-menuitem\" role=\"menuitem\">",
      "28:                                     {dashboard.title}",
      "30:                             </li>",
      "31:                         </f:for>",
      "32:                     </ul>",
      "",
      "[Removed Lines]",
      "23:                                 <f:be.link",
      "24:                                     route=\"dashboard\"",
      "25:                                     parameters=\"{action: 'setActiveDashboard', currentDashboard: dashboardKey}\"",
      "26:                                     class=\"dashboard-tab {f:if(condition: '{dashboardKey} == {currentDashboard.identifier}', then: 'dashboard-tab--active')}\"",
      "27:                                 >",
      "29:                                 </f:be.link>",
      "",
      "[Added Lines]",
      "23:                                 <button",
      "24:                                     name=\"currentDashboard\"",
      "25:                                     value=\"{dashboardKey}\"",
      "26:                                     form=\"form-set-active-dashboard\"",
      "27:                                     class=\"dashboard-tab {f:if(condition: '{dashboardKey} == {currentDashboard.identifier}', then: 'dashboard-tab--active')}\">",
      "29:                                 </button>",
      "",
      "---------------",
      "--- Hunk 2 ---",
      "[Context before]",
      "42:                     >",
      "43:                         <core:icon identifier=\"actions-plus\" alternativeMarkupIdentifier=\"inline\" /><span class=\"visually-hidden\"><f:translate key=\"dashboard.add\" extensionName=\"dashboard\"/></span>",
      "44:                     </a>",
      "45:                 </div>",
      "47:                 <div class=\"dashboard-configuration btn-toolbar\" role=\"toolbar\">",
      "",
      "[Removed Lines]",
      "[None]",
      "",
      "[Added Lines]",
      "45:                     <form id=\"form-set-active-dashboard\" class=\"hidden\" action=\"{f:be.uri(route: 'dashboard', parameters: '{action: \\'setActiveDashboard\\'}')}\" method=\"post\"></form>",
      "",
      "---------------",
      "--- Hunk 3 ---",
      "[Context before]",
      "57:                     >",
      "58:                         <core:icon identifier=\"actions-cog\" alternativeMarkupIdentifier=\"inline\" /><span class=\"visually-hidden\"><f:translate key=\"dashboard.configure\" extensionName=\"dashboard\"/></span>",
      "59:                     </a>",
      "72:                 </div>",
      "73:             </div>",
      "74:         </div>",
      "",
      "[Removed Lines]",
      "60:                     <a",
      "61:                         href=\"{deleteDashboardUri}\"",
      "62:                         class=\"js-dashboard-delete btn btn-default btn-sm\"",
      "63:                         title=\"{f:translate(key: 'dashboard.delete', extensionName: 'dashboard')}\"",
      "64:                         data-modal-title=\"{f:translate(key: 'dashboard.delete', extensionName: 'dashboard')}\"",
      "65:                         data-modal-question=\"{f:translate(key: 'dashboard.delete.sure', extensionName: 'dashboard')}\"",
      "66:                         data-modal-ok=\"{f:translate(key: 'dashboard.delete.ok', extensionName: 'dashboard')}\"",
      "67:                         data-modal-cancel=\"{f:translate(key: 'dashboard.delete.cancel', extensionName: 'dashboard')}\"",
      "68:                         role=\"button\"",
      "69:                     >",
      "70:                         <core:icon identifier=\"actions-delete\" alternativeMarkupIdentifier=\"inline\" /><span class=\"visually-hidden\"><f:translate key=\"dashboard.delete\" extensionName=\"dashboard\"/></span>",
      "71:                     </a>",
      "",
      "[Added Lines]",
      "61:                     <form action=\"{deleteDashboardUri}\" method=\"post\" class=\"form-inline\">",
      "62:                         <button",
      "63:                             class=\"js-dashboard-delete btn btn-default btn-sm\"",
      "64:                             title=\"{f:translate(key: 'dashboard.delete', extensionName: 'dashboard')}\"",
      "65:                             data-modal-title=\"{f:translate(key: 'dashboard.delete', extensionName: 'dashboard')}\"",
      "66:                             data-modal-question=\"{f:translate(key: 'dashboard.delete.sure', extensionName: 'dashboard')}\"",
      "67:                             data-modal-ok=\"{f:translate(key: 'dashboard.delete.ok', extensionName: 'dashboard')}\"",
      "68:                             data-modal-cancel=\"{f:translate(key: 'dashboard.delete.cancel', extensionName: 'dashboard')}\"",
      "69:                             role=\"button\"",
      "70:                         >",
      "71:                             <core:icon identifier=\"actions-delete\" alternativeMarkupIdentifier=\"inline\" /><span class=\"visually-hidden\"><f:translate key=\"dashboard.delete\" extensionName=\"dashboard\"/></span>",
      "72:                         </button>",
      "73:                     </form>",
      "",
      "---------------"
    ],
    "Resources/Private/Templates/Dashboard/Main.html||Resources/Private/Templates/Dashboard/Main.html": [
      "File: Resources/Private/Templates/Dashboard/Main.html -> Resources/Private/Templates/Dashboard/Main.html",
      "--- Hunk 1 ---",
      "[Context before]",
      "41:                                             <core:icon identifier=\"actions-refresh\" alternativeMarkupIdentifier=\"inline\"/>",
      "42:                                         </typo3-dashboard-widget-refresh>",
      "43:                                     </f:if>",
      "56:                                 </div>",
      "57:                             </div>",
      "58:                         </div>",
      "",
      "[Removed Lines]",
      "44:                                     <f:be.link",
      "45:                                         class=\"widget-action widget-action-remove js-dashboard-remove-widget\"",
      "46:                                         route=\"dashboard\" parameters=\"{action: 'removeWidget', widgetHash: widgetHash}\"",
      "47:                                         data=\"{",
      "48:                                             modal-title: '{f:translate(key: \\'LLL:EXT:dashboard/Resources/Private/Language/locallang.xlf:widget.remove.confirm.title\\')}',",
      "49:                                             modal-question: '{f:translate(key: \\'LLL:EXT:dashboard/Resources/Private/Language/locallang.xlf:widget.remove.confirm.message\\')}',",
      "50:                                             modal-ok: '{f:translate(key: \\'LLL:EXT:dashboard/Resources/Private/Language/locallang.xlf:widget.remove.button.ok\\')}',",
      "51:                                             modal-cancel: '{f:translate(key: \\'LLL:EXT:dashboard/Resources/Private/Language/locallang.xlf:widget.remove.button.close\\')}'",
      "52:                                         }\"",
      "53:                                     >",
      "54:                                         <core:icon identifier=\"actions-delete\" alternativeMarkupIdentifier=\"inline\"/>",
      "55:                                     </f:be.link>",
      "",
      "[Added Lines]",
      "44:                                     <form action=\"{f:be.uri(route: 'dashboard', parameters: '{action: \\'removeWidget\\'}')}\" method=\"post\" class=\"form-inline\">",
      "45:                                         <input type=\"hidden\" name=\"widgetHash\" value=\"{widgetHash}\">",
      "46:                                         <button",
      "47:                                             class=\"widget-action widget-action-remove js-dashboard-remove-widget\"",
      "48:                                             data-modal-title=\"{f:translate(key: 'LLL:EXT:dashboard/Resources/Private/Language/locallang.xlf:widget.remove.confirm.title')}\"",
      "49:                                             data-modal-question=\"{f:translate(key: 'LLL:EXT:dashboard/Resources/Private/Language/locallang.xlf:widget.remove.confirm.message')}\"",
      "50:                                             data-modal-ok=\"{f:translate(key: 'LLL:EXT:dashboard/Resources/Private/Language/locallang.xlf:widget.remove.button.ok')}\"",
      "51:                                             data-modal-cancel=\"{f:translate(key: 'LLL:EXT:dashboard/Resources/Private/Language/locallang.xlf:widget.remove.button.close')}\"",
      "52:                                         >",
      "53:                                             <core:icon identifier=\"actions-delete\" alternativeMarkupIdentifier=\"inline\"/>",
      "54:                                         </button>",
      "55:                                     </form>",
      "",
      "---------------"
    ],
    "Resources/Public/Css/dashboard.css||Resources/Public/Css/dashboard.css": [
      "File: Resources/Public/Css/dashboard.css -> Resources/Public/Css/dashboard.css",
      "--- Hunk 1 ---",
      "[Context before]",
      "70: .widget-content-main{flex-grow:1;overflow-y:auto;padding:var(--widget-padding)}",
      "71: .widget-content-footer{padding:var(--widget-padding);padding-top:0}",
      "72: .widget-actions{color:var(--widget-title-color-state,var(--widget-title-color));position:absolute;display:flex;top:calc(var(--widget-title-font-size) * var(--widget-title-line-height)/ 2 + var(--widget-padding)/ 2);inset-inline-end:calc(var(--widget-padding)/ 2);transform:translate(0,-50%)}",
      "74: .widget-action:focus,.widget-action:hover{opacity:1!important}",
      "75: .widget-action:focus-visible{outline:var(--typo3-outline-width) var(--typo3-outline-style) color-mix(in srgb,currentColor,transparent 25%)}",
      "76: .widget-action .icon{position:absolute;top:50%;inset-inline-start:50%;transform:translate(calc(-50% * var(--typo3-position-modifier)),-50%)}",
      "",
      "[Removed Lines]",
      "73: .widget-action{width:var(--widget-action-size);height:var(--widget-action-size);position:relative;color:inherit;text-align:center;opacity:.5;border-radius:4px;transition:opacity .2s ease-in-out}",
      "",
      "[Added Lines]",
      "73: .widget-action{width:var(--widget-action-size);height:var(--widget-action-size);position:relative;color:inherit;text-align:center;opacity:.5;border-radius:4px;transition:opacity .2s ease-in-out;background:0 0;border:none;-webkit-appearance:none;-moz-appearance:none;appearance:none}",
      "",
      "---------------"
    ],
    "Resources/Public/JavaScript/dashboard-delete.js||Resources/Public/JavaScript/dashboard-delete.js": [
      "File: Resources/Public/JavaScript/dashboard-delete.js -> Resources/Public/JavaScript/dashboard-delete.js",
      "--- Hunk 1 ---",
      "[Context before]",
      "[No context available]",
      "",
      "[Removed Lines]",
      "13: import Modal from\"@typo3/backend/modal.js\";import{SeverityEnum}from\"@typo3/backend/enum/severity.js\";import RegularEvent from\"@typo3/core/event/regular-event.js\";class DashboardDelete{constructor(){this.selector=\".js-dashboard-delete\",this.initialize()}initialize(){new RegularEvent(\"click\",(function(e){e.preventDefault();Modal.confirm(this.dataset.modalTitle,this.dataset.modalQuestion,SeverityEnum.warning,[{text:this.dataset.modalCancel,active:!0,btnClass:\"btn-default\",name:\"cancel\"},{text:this.dataset.modalOk,btnClass:\"btn-warning\",name:\"delete\"}]).addEventListener(\"button.clicked\",(e=>{\"delete\"===e.target.getAttribute(\"name\")&&(window.location.href=this.getAttribute(\"href\")),Modal.dismiss()}))})).delegateTo(document,this.selector)}}export default new DashboardDelete;",
      "",
      "[Added Lines]",
      "[None]",
      "",
      "---------------"
    ],
    "Resources/Public/JavaScript/widget-remover.js||Resources/Public/JavaScript/widget-remover.js": [
      "File: Resources/Public/JavaScript/widget-remover.js -> Resources/Public/JavaScript/widget-remover.js",
      "--- Hunk 1 ---",
      "[Context before]",
      "[No context available]",
      "",
      "[Removed Lines]",
      "13: import Modal from\"@typo3/backend/modal.js\";import{SeverityEnum}from\"@typo3/backend/enum/severity.js\";import RegularEvent from\"@typo3/core/event/regular-event.js\";class WidgetRemover{constructor(){this.selector=\".js-dashboard-remove-widget\",this.initialize()}initialize(){new RegularEvent(\"click\",(function(e){e.preventDefault();const t=Modal.confirm(this.dataset.modalTitle,this.dataset.modalQuestion,SeverityEnum.warning,[{text:this.dataset.modalCancel,active:!0,btnClass:\"btn-default\",name:\"cancel\"},{text:this.dataset.modalOk,btnClass:\"btn-warning\",name:\"delete\"}]);t.addEventListener(\"button.clicked\",(e=>{\"delete\"===e.target.getAttribute(\"name\")&&(window.location.href=this.getAttribute(\"href\")),t.hideModal()}))})).delegateTo(document,this.selector)}}export default new WidgetRemover;",
      "",
      "[Added Lines]",
      "[None]",
      "",
      "---------------"
    ],
    "Resources/Public/JavaScript/widget-selector.js||Resources/Public/JavaScript/widget-selector.js": [
      "File: Resources/Public/JavaScript/widget-selector.js -> Resources/Public/JavaScript/widget-selector.js",
      "--- Hunk 1 ---",
      "[Context before]",
      "[No context available]",
      "",
      "[Removed Lines]",
      "13: import{default as Modal}from\"@typo3/backend/modal.js\";import{SeverityEnum}from\"@typo3/backend/enum/severity.js\";import RegularEvent from\"@typo3/core/event/regular-event.js\";class WidgetSelector{constructor(){this.selector=\".js-dashboard-addWidget\",this.initialize()}initialize(){new RegularEvent(\"click\",(function(e){e.preventDefault();const t=new DocumentFragment;t.append(document.getElementById(\"widgetSelector\").content.cloneNode(!0));const a={type:Modal.types.default,title:this.dataset.modalTitle,size:Modal.sizes.medium,severity:SeverityEnum.notice,content:t,buttons:[{text:TYPO3?.lang?.[\"button.cancel\"]||\"Cancel\",active:!1,btnClass:\"btn-default\",name:\"cancel\"}],additionalCssClasses:[\"dashboard-modal\"],callback:e=>{new RegularEvent(\"click\",(()=>e.hideModal())).delegateTo(e,\"a.dashboard-modal-item-block\")}},o=Modal.advanced(a);o.addEventListener(\"button.clicked\",(e=>{\"cancel\"===e.target.getAttribute(\"name\")&&o.hideModal()}))})).delegateTo(document,this.selector),document.querySelectorAll(this.selector).forEach((e=>{e.classList.remove(\"hide\")}))}}export default new WidgetSelector;",
      "",
      "[Added Lines]",
      "[None]",
      "",
      "---------------"
    ]
  },
  "candidates": [
    {
      "candidate_hash": "2ebc2983c5df78e62b634570f4d70f24ff08fd69",
      "candidate_info": {
        "commit_hash": "2ebc2983c5df78e62b634570f4d70f24ff08fd69",
        "repo": "TYPO3-CMS/dashboard",
        "commit_url": "https://github.com/TYPO3-CMS/dashboard/commit/2ebc2983c5df78e62b634570f4d70f24ff08fd69",
        "files": [
          "Classes/WidgetGroupInitializationService.php",
          "Resources/Private/Language/locallang.xlf",
          "Resources/Private/Templates/Dashboard/Main.html"
        ],
        "message": "[TASK] Use \"new record wizard\" to render dashboard widgets\n\nIn order to streamline the backend UI and to re-use introduced web\ncomponents, the \"Add widget\" wizard in the dashboard module now utilizes\nthe `@typo3/backend/new-record-wizard` module that is already known from\nthe Content Element creation wizard.\n\nAs a small quality-of-life change, the modal title now includes the name\nof the dashboard as well.\n\nResolves: #103697\nReleases: main\nChange-Id: I58f069e5d3f57484cba8e020f51ab82cf923d25a\nReviewed-on: https://review.typo3.org/c/Packages/TYPO3.CMS/+/83937\nReviewed-by: Nikita Hovratov <nikita.h@live.de>\nTested-by: Georg Ringer <georg.ringer@gmail.com>\nTested-by: Nikita Hovratov <nikita.h@live.de>\nTested-by: core-ci <typo3@b13.com>\nReviewed-by: Georg Ringer <georg.ringer@gmail.com>",
        "before_after_code_files": [
          "Classes/WidgetGroupInitializationService.php||Classes/WidgetGroupInitializationService.php",
          "Resources/Private/Language/locallang.xlf||Resources/Private/Language/locallang.xlf",
          "Resources/Private/Templates/Dashboard/Main.html||Resources/Private/Templates/Dashboard/Main.html"
        ]
      },
      "candidate_patch_features": {
        "candidate_earlier_than_patch": 1,
        "same_branch_evolution": 1,
        "olp_code_files": {
          "patch": [
            "Classes/WidgetGroupInitializationService.php||Classes/WidgetGroupInitializationService.php",
            "Resources/Private/Templates/Dashboard/Main.html||Resources/Private/Templates/Dashboard/Main.html"
          ],
          "candidate": [
            "Classes/WidgetGroupInitializationService.php||Classes/WidgetGroupInitializationService.php",
            "Resources/Private/Templates/Dashboard/Main.html||Resources/Private/Templates/Dashboard/Main.html"
          ]
        }
      },
      "candidate_diff": {
        "Classes/WidgetGroupInitializationService.php||Classes/WidgetGroupInitializationService.php": [
          "File: Classes/WidgetGroupInitializationService.php -> Classes/WidgetGroupInitializationService.php",
          "--- Hunk 1 ---",
          "[Context before]",
          "18: namespace TYPO3\\CMS\\Dashboard;",
          "20: use TYPO3\\CMS\\Core\\Localization\\LanguageService;",
          "",
          "[Removed Lines]",
          "[None]",
          "",
          "[Added Lines]",
          "20: use TYPO3\\CMS\\Backend\\Routing\\UriBuilder;",
          "",
          "---------------",
          "--- Hunk 2 ---",
          "[Context before]",
          "26: {",
          "27:     public function __construct(",
          "28:         private readonly WidgetGroupRegistry $widgetGroupRegistry,",
          "30:     ) {}",
          "",
          "[Removed Lines]",
          "29:         private readonly WidgetRegistry $widgetRegistry",
          "",
          "[Added Lines]",
          "30:         private readonly WidgetRegistry $widgetRegistry,",
          "31:         private readonly UriBuilder $uriBuilder,",
          "",
          "---------------",
          "--- Hunk 3 ---",
          "[Context before]",
          "42:             $widgetsForGroup = $this->widgetRegistry->getAvailableWidgetsForWidgetGroup($widgetGroupIdentifier);",
          "43:             foreach ($widgetsForGroup as $widgetConfiguration) {",
          "47:                     'description' => $this->getLanguageService()->sL($widgetConfiguration->getDescription()),",
          "48:                 ];",
          "49:             }",
          "51:             $groupConfigurations[$widgetGroupIdentifier] = [",
          "52:                 'identifier' => $widgetGroupIdentifier,",
          "55:             ];",
          "56:         }",
          "",
          "[Removed Lines]",
          "44:                 $widgets[$widgetConfiguration->getIdentifier()] = [",
          "45:                     'iconIdentifier' => $widgetConfiguration->getIconIdentifier(),",
          "46:                     'title' => $this->getLanguageService()->sL($widgetConfiguration->getTitle()),",
          "53:                 'title' => $widgetGroup->getTitle(),",
          "54:                 'widgets' => $widgets,",
          "",
          "[Added Lines]",
          "46:                 $widgetIdentifier = $widgetConfiguration->getIdentifier();",
          "48:                 $widgets[] = [",
          "49:                     'identifier' => $widgetIdentifier,",
          "50:                     'icon' => $widgetConfiguration->getIconIdentifier(),",
          "51:                     'label' => $this->getLanguageService()->sL($widgetConfiguration->getTitle()),",
          "53:                     'url' => (string)$this->uriBuilder->buildUriFromRoute('dashboard', ['action' => 'addWidget', 'widget' => $widgetIdentifier]),",
          "54:                     'requestType' => 'location',",
          "58:             if ($widgets === []) {",
          "59:                 continue;",
          "60:             }",
          "64:                 'label' => $widgetGroup->getTitle(),",
          "65:                 'items' => $widgets,",
          "",
          "---------------"
        ],
        "Resources/Private/Language/locallang.xlf||Resources/Private/Language/locallang.xlf": [
          "File: Resources/Private/Language/locallang.xlf -> Resources/Private/Language/locallang.xlf",
          "--- Hunk 1 ---",
          "[Context before]",
          "12:    <trans-unit id=\"widget.add\" resname=\"widget.add\" xml:space=\"preserve\">",
          "13:     <source>Add widget</source>",
          "14:    </trans-unit>",
          "15:    <trans-unit id=\"widget.add.button.close\" resname=\"widget.add.button.close\" xml:space=\"preserve\">",
          "16:     <source>Close</source>",
          "17:    </trans-unit>",
          "",
          "[Removed Lines]",
          "[None]",
          "",
          "[Added Lines]",
          "15:    <trans-unit id=\"widget.addToDashboard\" resname=\"widget.addToDashboard\" xml:space=\"preserve\">",
          "16:     <source>Add widget to \"%s\"</source>",
          "17:    </trans-unit>",
          "18:    <trans-unit id=\"widget.addToDashboard.searchLabel\" resname=\"widget.addToDashboard.searchLabel\" xml:space=\"preserve\">",
          "19:     <source>Search for dashboard widgets</source>",
          "20:    </trans-unit>",
          "21:    <trans-unit id=\"widget.addToDashboard.searchNotFound\" resname=\"widget.addToDashboard.searchNotFound\" xml:space=\"preserve\">",
          "22:     <source>Unfortunately no dashboard widget matches your query, please try a different one.</source>",
          "23:    </trans-unit>",
          "",
          "---------------"
        ],
        "Resources/Private/Templates/Dashboard/Main.html||Resources/Private/Templates/Dashboard/Main.html": [
          "File: Resources/Private/Templates/Dashboard/Main.html -> Resources/Private/Templates/Dashboard/Main.html",
          "--- Hunk 1 ---",
          "[Context before]",
          "9: <f:section name=\"Content\">",
          "11:     <f:if condition=\"{currentDashboard.widgets}\">",
          "12:         <f:then>",
          "13:             <div class=\"dashboard-grid\">",
          "",
          "[Removed Lines]",
          "[None]",
          "",
          "[Added Lines]",
          "11:     <f:be.pageRenderer",
          "12:         includeJavaScriptModules=\"{",
          "13:             0: '@typo3/backend/new-record-wizard.js'",
          "14:         }\"",
          "15:     />",
          "",
          "---------------",
          "--- Hunk 2 ---",
          "[Context before]",
          "79:     <div class=\"dashboard-add-item\">",
          "80:         <button",
          "81:             class=\"js-dashboard-addWidget btn dashboard-button dashboard-button-add hide\"",
          "84:             data-button-close-text=\"{f:translate(key: 'LLL:EXT:dashboard/Resources/Private/Language/locallang.xlf:widget.add.button.close')}\"",
          "85:             data-button-ok-text=\"{f:translate(key: 'LLL:EXT:dashboard/Resources/Private/Language/locallang.xlf:widget.add.button.ok')}\"",
          "86:         >",
          "",
          "[Removed Lines]",
          "82:             title=\"{f:translate(key: 'LLL:EXT:dashboard/Resources/Private/Language/locallang.xlf:widget.add')}\"",
          "83:             data-modal-title=\"{f:translate(key: 'LLL:EXT:dashboard/Resources/Private/Language/locallang.xlf:widget.add')}\"",
          "",
          "[Added Lines]",
          "88:             title=\"{f:translate(key: 'LLL:EXT:dashboard/Resources/Private/Language/locallang.xlf:widget.addToDashboard', arguments: {0: currentDashboard.title})}\"",
          "89:             data-modal-title=\"{f:translate(key: 'LLL:EXT:dashboard/Resources/Private/Language/locallang.xlf:widget.addToDashboard', arguments: {0: currentDashboard.title})}\"",
          "",
          "---------------",
          "--- Hunk 3 ---",
          "[Context before]",
          "89:     </div>",
          "91:     <template id=\"widgetSelector\">",
          "151:     </template>",
          "153:     <template id=\"dashboardModal-add\">",
          "",
          "[Removed Lines]",
          "92:         <div class=\"dashboard-modal-tabpanel\" role=\"tabpanel\">",
          "93:             <ul class=\"nav nav-tabs t3js-tabs\" id=\"widget-selector\" role=\"tablist\">",
          "94:                 <f:variable name=\"firstGroupActive\" value=\"false\" />",
          "95:                 <f:for each=\"{widgetGroups}\" as=\"groupConfiguration\" iteration=\"iterator\">",
          "96:                     <f:if condition=\"{groupConfiguration.widgets}\">",
          "97:                         <li class=\"t3js-tabmenu-item nav-item\">",
          "98:                             <a",
          "99:                                 id=\"dashboard-widgetgroup-tab-{groupConfiguration.identifier}\"",
          "100:                                 class=\"nav-link {f:if(condition: '{firstGroupActive} == \\'false\\'', then: 'active')}\"",
          "101:                                 data-bs-toggle=\"tab\"",
          "102:                                 href=\"#dashboard-widgetgroup-{groupConfiguration.identifier}\"",
          "103:                                 role=\"tab\"",
          "104:                                 aria-controls=\"dashboard-widgetgroup-{groupConfiguration.identifier}\"",
          "105:                                 aria-selected=\"true\"",
          "106:                             >{groupConfiguration.title}</a>",
          "107:                         </li>",
          "108:                         <f:variable name=\"firstGroupActive\" value=\"true\" />",
          "109:                     </f:if>",
          "110:                 </f:for>",
          "111:             </ul>",
          "112:             <div class=\"tab-content\">",
          "113:                 <f:variable name=\"firstGroupActive\" value=\"false\" />",
          "114:                 <f:for each=\"{widgetGroups}\" as=\"groupConfiguration\" iteration=\"iterator\">",
          "115:                     <f:if condition=\"{groupConfiguration.widgets}\">",
          "116:                         <div",
          "117:                             class=\"tab-pane {f:if(condition: '{firstGroupActive} == \\'false\\'', then: 'active')}\"",
          "118:                             id=\"dashboard-widgetgroup-{groupConfiguration.identifier}\"",
          "119:                             role=\"tabpanel\"",
          "120:                             aria-labelledby=\"dashboard-widgetgroup-{groupConfiguration.identifier}-tab\"",
          "121:                         >",
          "122:                             <div class=\"dashboard-modal-items \">",
          "123:                                 <f:for each=\"{groupConfiguration.widgets}\" as=\"widgetConfiguration\" key=\"widgetIdentifier\">",
          "124:                                     <div class=\"dashboard-modal-item\">",
          "125:                                         <f:be.link class=\"dashboard-modal-item-block\" route=\"dashboard\" target=\"list_frame\" parameters=\"{action: 'addWidget', widget: widgetIdentifier}\">",
          "126:                                             <f:if condition=\"{widgetConfiguration.iconIdentifier}\">",
          "127:                                                 <div class=\"dashboard-modal-item-icon\">",
          "128:                                                     <core:icon size=\"medium\" alternativeMarkupIdentifier=\"inline\" identifier=\"{widgetConfiguration.iconIdentifier}\"/>",
          "129:                                                 </div>",
          "130:                                             </f:if>",
          "131:                                             <div class=\"dashboard-modal-item-details\">",
          "132:                                                 <div class=\"dashboard-modal-item-title\">",
          "133:                                                     {widgetConfiguration.title}",
          "134:                                                 </div>",
          "135:                                                 <f:if condition=\"{widgetConfiguration.description}\">",
          "136:                                                     <div class=\"dashboard-modal-item-description\">",
          "137:                                                         {widgetConfiguration.description}",
          "138:                                                     </div>",
          "139:                                                 </f:if>",
          "140:                                             </div>",
          "141:                                         </f:be.link>",
          "142:                                     </div>",
          "143:                                 </f:for>",
          "144:                             </div>",
          "145:                         </div>",
          "146:                         <f:variable name=\"firstGroupActive\" value=\"true\" />",
          "147:                     </f:if>",
          "148:                 </f:for>",
          "149:             </div>",
          "150:         </div>",
          "",
          "[Added Lines]",
          "98:         <typo3-backend-new-record-wizard",
          "99:             categories=\"{widgetGroups -> f:format.json()}\"",
          "100:             searchplaceholder=\"{f:translate(key: 'LLL:EXT:dashboard/Resources/Private/Language/locallang.xlf:widget.addToDashboard.searchLabel')}\"",
          "101:             searchnothingfoundlabel=\"{f:translate(key: 'LLL:EXT:dashboard/Resources/Private/Language/locallang.xlf:widget.addToDashboard.searchNotFound')}\"",
          "102:         ></typo3-backend-new-record-wizard>",
          "",
          "---------------"
        ]
      }
    },
    {
      "candidate_hash": "e75ce0ecaef7fa3a6317546919fe716b83d8b0e5",
      "candidate_info": {
        "commit_hash": "e75ce0ecaef7fa3a6317546919fe716b83d8b0e5",
        "repo": "TYPO3-CMS/dashboard",
        "commit_url": "https://github.com/TYPO3-CMS/dashboard/commit/e75ce0ecaef7fa3a6317546919fe716b83d8b0e5",
        "files": [
          "Resources/Private/Templates/Dashboard/Main.html",
          "Resources/Public/Css/dashboard.css",
          "Resources/Public/JavaScript/widget-refresh.js"
        ],
        "message": "[BUGFIX] Correct dashboard widget action colors\n\nResolves: #105284\nReleases: main\nChange-Id: I2495a0ef619e1ac90a7555ddd9fd9311d6406fe9\nReviewed-on: https://review.typo3.org/c/Packages/TYPO3.CMS/+/86582\nReviewed-by: Andreas Kienast <akienast@scripting-base.de>\nReviewed-by: Benjamin Franzke <ben@bnf.dev>\nTested-by: core-ci <typo3@b13.com>\nTested-by: Andreas Kienast <akienast@scripting-base.de>\nTested-by: Benjamin Franzke <ben@bnf.dev>",
        "before_after_code_files": [
          "Resources/Private/Templates/Dashboard/Main.html||Resources/Private/Templates/Dashboard/Main.html",
          "Resources/Public/Css/dashboard.css||Resources/Public/Css/dashboard.css",
          "Resources/Public/JavaScript/widget-refresh.js||Resources/Public/JavaScript/widget-refresh.js"
        ]
      },
      "candidate_patch_features": {
        "candidate_earlier_than_patch": 1,
        "same_branch_evolution": 1,
        "olp_code_files": {
          "patch": [
            "Resources/Private/Templates/Dashboard/Main.html||Resources/Private/Templates/Dashboard/Main.html",
            "Resources/Public/Css/dashboard.css||Resources/Public/Css/dashboard.css"
          ],
          "candidate": [
            "Resources/Private/Templates/Dashboard/Main.html||Resources/Private/Templates/Dashboard/Main.html",
            "Resources/Public/Css/dashboard.css||Resources/Public/Css/dashboard.css"
          ]
        }
      },
      "candidate_diff": {
        "Resources/Private/Templates/Dashboard/Main.html||Resources/Private/Templates/Dashboard/Main.html": [
          "File: Resources/Private/Templates/Dashboard/Main.html -> Resources/Private/Templates/Dashboard/Main.html",
          "--- Hunk 1 ---",
          "[Context before]",
          "33:                                     <f:translate key=\"LLL:EXT:dashboard/Resources/Private/Language/locallang.xlf:widget.error\" />",
          "34:                                 </div>",
          "35:                                 <div class=\"widget-actions\">",
          "43:                                     <div class=\"widget-action widget-action-move js-dashboard-move-widget\">",
          "44:                                         <core:icon identifier=\"actions-move\" alternativeMarkupIdentifier=\"inline\"/>",
          "45:                                     </div>",
          "46:                                     <f:be.link",
          "47:                                         class=\"widget-action widget-action-remove js-dashboard-remove-widget\"",
          "48:                                         route=\"dashboard\" parameters=\"{action: 'removeWidget', widgetHash: widgetHash}\"",
          "",
          "[Removed Lines]",
          "36:                                     <f:if condition=\"{currentDashboard.widgetOptions.{widgetHash}.refreshAvailable}\">",
          "37:                                         <typo3-dashboard-widget-refresh>",
          "38:                                             <button type=\"button\" class=\"widget-action widget-action-refresh btn btn-link\">",
          "39:                                                 <core:icon identifier=\"actions-refresh\" alternativeMarkupIdentifier=\"inline\"/>",
          "40:                                             </button>",
          "41:                                         </typo3-dashboard-widget-refresh>",
          "42:                                     </f:if>",
          "",
          "[Added Lines]",
          "39:                                     <f:if condition=\"{currentDashboard.widgetOptions.{widgetHash}.refreshAvailable}\">",
          "40:                                         <typo3-dashboard-widget-refresh class=\"widget-action\">",
          "41:                                             <core:icon identifier=\"actions-refresh\" alternativeMarkupIdentifier=\"inline\"/>",
          "42:                                         </typo3-dashboard-widget-refresh>",
          "43:                                     </f:if>",
          "",
          "---------------"
        ],
        "Resources/Public/Css/dashboard.css||Resources/Public/Css/dashboard.css": [
          "File: Resources/Public/Css/dashboard.css -> Resources/Public/Css/dashboard.css",
          "--- Hunk 1 ---",
          "[Context before]",
          "61: .dashboard-button .dashboard-button-icon .icon{display:block}",
          "62: .dashboard-button .dashboard-button-icon+.dashboard-button-text{margin-left:.25em;margin-right:.25em}",
          "63: .btn-dashboard-add{--typo3-btn-padding-y:1rem;--typo3-btn-padding-x:1rem;position:fixed;inset-inline-end:24px;bottom:24px;z-index:2;box-shadow:var(--typo3-component-box-shadow-flyout)}",
          "66: .widget-content{display:flex;flex-direction:column;height:100%}",
          "68: .widget-content-title span{overflow:hidden;display:block;white-space:nowrap;text-overflow:ellipsis}",
          "69: .widget-content-title h2{margin-bottom:0}",
          "75: .widget-content-main{flex-grow:1;overflow-y:auto;padding:var(--widget-padding)}",
          "76: .widget-content-footer{padding:var(--widget-padding);padding-top:0}",
          "81: .widget-action .icon{position:absolute;top:50%;inset-inline-start:50%;transform:translate(calc(-50% * var(--typo3-position-modifier)),-50%)}",
          "82: .widget-action-move{cursor:grab}",
          "83: .widget-waiting{position:absolute;top:50%;left:50%;line-height:300px;margin-inline-end:-50%;transform:translate(calc(-50% * var(--typo3-position-modifier)),-50%)}",
          "84: .widget-error{padding:var(--widget-padding);position:absolute;top:50%;text-align:center;transform:translateY(-50%);color:var(--typo3-text-color-danger)}",
          "85: .widget-chart{width:100%;height:100%}",
          "86: .widget-edit{width:45px;text-align:center}",
          "89: .widget-table-wrapper{margin:calc(-1 * var(--widget-padding))}",
          "90: .widget-table{margin:0}",
          "91: .widget-table td:first-child,.widget-table th:first-child{padding-inline-start:var(--widget-padding)}",
          "",
          "[Removed Lines]",
          "64: .widget{--widget-title-font-size:1rem;--widget-title-line-height:1.25;--widget-title-font-family:var(--typo3-header-font-family);--widget-action-size:28px;--widget-padding:1.25rem;--widget-color:var(--typo3-component-color);--widget-bg:var(--typo3-component-bg);--widget-border-width:1px;--widget-border-radius:var(--typo3-component-border-radius);--widget-border-color:color-mix(in srgb, var(--widget-bg), var(--widget-color) var(--typo3-border-mix));--widget-box-shadow:var(--typo3-component-box-shadow);height:100%;border-radius:var(--widget-border-radius);border:var(--widget-border-width) solid var(--widget-border-color);overflow:hidden;color:var(--widget-color);background-color:var(--widget-bg);box-shadow:var(--widget-box-shadow)}",
          "65: .widget:hover .widget-actions{opacity:1}",
          "67: .widget-content-title{padding:calc(var(--widget-padding)/ 2) var(--widget-padding);padding-inline-end:calc(var(--widget-action-size) + var(--widget-padding) * 2);border-bottom:var(--widget-border-width) solid var(--widget-border-color);font-family:var(--widget-title-font-family);font-size:var(--widget-title-font-size);font-weight:700;line-height:var(--widget-title-line-height)}",
          "70: div[data-widget-key=sys_note_default] .widget-content-title{background-color:var(--typo3-state-default-bg);color:var(--typo3-state-default-color)}",
          "71: div[data-widget-key=sys_note_todos] .widget-content-title{background-color:var(--typo3-state-success-bg);color:var(--typo3-state-success-color)}",
          "72: div[data-widget-key=sys_note_instructions] .widget-content-title{background-color:var(--typo3-state-info-bg);color:var(--typo3-state-info-color)}",
          "73: div[data-widget-key=sys_note_notes] .widget-content-title{background-color:var(--typo3-state-notice-bg);color:var(--typo3-state-notice-color)}",
          "74: div[data-widget-key=sys_note_template] .widget-content-title{background-color:var(--typo3-state-warning-bg);color:var(--typo3-state-warning-color)}",
          "77: .widget-actions{position:absolute;display:flex;top:calc(var(--widget-title-font-size) * var(--widget-title-line-height)/ 2 + var(--widget-padding)/ 2);inset-inline-end:calc(var(--widget-padding)/ 2);transform:translate(0,-50%);opacity:.5;transition:opacity .2s ease-in-out}",
          "78: .widget-action{--widget-action-size:28px;--widget-action-color:var(--typo3-text-color-variant);--widget-action-hover-color:var(--typo3-state-default-hover-color);--widget-action-focus-color:var(--typo3-state-default-focus-color);width:var(--widget-action-size);height:var(--widget-action-size);position:relative;color:var(--widget-action-color);text-align:center}",
          "79: .widget-action:hover{color:var(--widget-action-hover-color)}",
          "80: .widget-action:focus{color:var(--widget-action-focus-color)}",
          "87: .widget-editIcon{color:#000}",
          "88: .widget-editIcon:focus,.widget-editIcon:hover{color:#ff8700}",
          "",
          "[Added Lines]",
          "64: .widget{--widget-padding:1.25rem;--widget-color:var(--typo3-component-color);--widget-bg:var(--typo3-component-bg);--widget-border-width:1px;--widget-border-radius:var(--typo3-component-border-radius);--widget-border-color:color-mix(in srgb, var(--widget-bg), var(--widget-color) var(--typo3-border-mix));--widget-box-shadow:var(--typo3-component-box-shadow);--widget-title-font-size:1rem;--widget-title-line-height:1.25;--widget-title-font-family:var(--typo3-header-font-family);--widget-title-color-state:initial;--widget-title-bg-state:initial;--widget-title-color:var(--widget-color);--widget-title-bg:var(--widget-bg);--widget-action-size:28px;height:100%;border-radius:var(--widget-border-radius);border:var(--widget-border-width) solid var(--widget-border-color);overflow:hidden;color:var(--widget-color);background-color:var(--widget-bg);box-shadow:var(--widget-box-shadow)}",
          "65: .widget:focus-within .widget-action,.widget:hover .widget-action{opacity:.75}",
          "67: .widget-content-title{color:var(--widget-title-color-state,var(--widget-title-color));background-color:var(--widget-title-bg-state,var(--widget-title-bg));padding:calc(var(--widget-padding)/ 2) var(--widget-padding);padding-inline-end:calc(var(--widget-action-size) * 3 + var(--widget-padding));border-bottom:var(--widget-border-width) solid var(--widget-border-color);font-family:var(--widget-title-font-family);font-size:var(--widget-title-font-size);font-weight:700;line-height:var(--widget-title-line-height)}",
          "72: .widget-actions{color:var(--widget-title-color-state,var(--widget-title-color));position:absolute;display:flex;top:calc(var(--widget-title-font-size) * var(--widget-title-line-height)/ 2 + var(--widget-padding)/ 2);inset-inline-end:calc(var(--widget-padding)/ 2);transform:translate(0,-50%)}",
          "73: .widget-action{width:var(--widget-action-size);height:var(--widget-action-size);position:relative;color:inherit;text-align:center;opacity:.5;border-radius:4px;transition:opacity .2s ease-in-out}",
          "74: .widget-action:focus,.widget-action:hover{opacity:1!important}",
          "75: .widget-action:focus-visible{outline:var(--typo3-outline-width) var(--typo3-outline-style) color-mix(in srgb,currentColor,transparent 25%)}",
          "82: .widget-identifier-sys_note_default{--widget-title-bg:var(--typo3-state-default-bg);--widget-title-color:var(--typo3-state-default-color)}",
          "83: .widget-identifier-sys_note_todos{--widget-title-bg:var(--typo3-state-success-bg);--widget-title-color:var(--typo3-state-success-color)}",
          "84: .widget-identifier-sys_note_instructions{--widget-title-bg:var(--typo3-state-info-bg);--widget-title-color:var(--typo3-state-info-color)}",
          "85: .widget-identifier-sys_note_notes{--widget-title-bg:var(--typo3-state-notice-bg);--widget-title-color:var(--typo3-state-notice-color)}",
          "86: .widget-identifier-sys_note_template{--widget-title-bg:var(--typo3-state-warning-bg);--widget-title-color:var(--typo3-state-warning-color)}",
          "",
          "---------------"
        ],
        "Resources/Public/JavaScript/widget-refresh.js||Resources/Public/JavaScript/widget-refresh.js": [
          "File: Resources/Public/JavaScript/widget-refresh.js -> Resources/Public/JavaScript/widget-refresh.js",
          "--- Hunk 1 ---",
          "[Context before]",
          "[No context available]",
          "",
          "[Removed Lines]",
          "13: var Selectors,__decorate=function(e,t,r,o){var s,c=arguments.length,l=c<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,r):o;if(\"object\"==typeof Reflect&&\"function\"==typeof Reflect.decorate)l=Reflect.decorate(e,t,r,o);else for(var n=e.length-1;n>=0;n--)(s=e[n])&&(l=(c<3?s(l):c>3?s(t,r,l):s(t,r))||l);return c>3&&l&&Object.defineProperty(t,r,l),l};import{html,LitElement}from\"lit\";import{customElement}from\"lit/decorators.js\";!function(e){e.dashboardItem=\".dashboard-item\"}(Selectors||(Selectors={}));let WidgetRefresh=class extends LitElement{connectedCallback(){super.connectedCallback(),this.addEventListener(\"click\",this.onRefresh)}disconnectedCallback(){this.removeEventListener(\"click\",this.onRefresh),super.disconnectedCallback()}render(){return html`<slot></slot>`}onRefresh(e){e.preventDefault(),this.closest(Selectors.dashboardItem).dispatchEvent(new Event(\"widgetRefresh\",{bubbles:!0})),this.querySelector(\"button\").blur()}};WidgetRefresh=__decorate([customElement(\"typo3-dashboard-widget-refresh\")],WidgetRefresh);export{WidgetRefresh};",
          "",
          "[Added Lines]",
          "[None]",
          "",
          "---------------"
        ]
      }
    },
    {
      "candidate_hash": "2c04ab04c9819de23c5efc8aebcd295ea3da46ed",
      "candidate_info": {
        "commit_hash": "2c04ab04c9819de23c5efc8aebcd295ea3da46ed",
        "repo": "TYPO3-CMS/dashboard",
        "commit_url": "https://github.com/TYPO3-CMS/dashboard/commit/2c04ab04c9819de23c5efc8aebcd295ea3da46ed",
        "files": [
          "Resources/Public/Css/dashboard.css"
        ],
        "message": "[TASK] Update `sass`\n\nExecuted commands:\n\n    npm install --save-dev sass@^1.17.0\n    npm run build\n\nResolves: #103065\nReleases: main, 12.4\nChange-Id: Id8d3ad111a751299266bdc3abe59c54a15df010c\nReviewed-on: https://review.typo3.org/c/Packages/TYPO3.CMS/+/82824\nReviewed-by: Oliver Klee <typo3-coding@oliverklee.de>\nReviewed-by: Andreas Kienast <a.fernandez@scripting-base.de>\nTested-by: Benjamin Franzke <ben@bnf.dev>\nReviewed-by: Simon Schaufelberger <simonschaufi+typo3@gmail.com>\nTested-by: Andreas Kienast <a.fernandez@scripting-base.de>\nReviewed-by: Benjamin Franzke <ben@bnf.dev>\nTested-by: core-ci <typo3@b13.com>",
        "before_after_code_files": [
          "Resources/Public/Css/dashboard.css||Resources/Public/Css/dashboard.css"
        ]
      },
      "candidate_patch_features": {
        "candidate_earlier_than_patch": 1,
        "same_branch_evolution": 1,
        "olp_code_files": {
          "patch": [
            "Resources/Public/Css/dashboard.css||Resources/Public/Css/dashboard.css"
          ],
          "candidate": [
            "Resources/Public/Css/dashboard.css||Resources/Public/Css/dashboard.css"
          ]
        }
      },
      "candidate_diff": {
        "Resources/Public/Css/dashboard.css||Resources/Public/Css/dashboard.css": [
          "File: Resources/Public/Css/dashboard.css -> Resources/Public/Css/dashboard.css",
          "--- Hunk 1 ---",
          "[Context before]",
          "68: .widget-content-title span{overflow:hidden;display:block;white-space:nowrap;text-overflow:ellipsis}",
          "69: .widget-content-main{flex-grow:1;overflow-y:auto;padding:20px}",
          "70: .widget-content-footer{padding:20px;padding-top:0}",
          "72: .widget-action{width:28px;height:28px;position:relative;color:#737373;text-align:center}",
          "73: .widget-action:focus,.widget-action:hover{color:#ff8700}",
          "74: .widget-action .icon{position:absolute;top:50%;inset-inline-start:50%;transform:translate(calc(-50% * var(--typo3-position-modifier)),-50%)}",
          "",
          "[Removed Lines]",
          "71: .widget-actions{position:absolute;display:flex;top:calc((16px * 1.25)/ 2 + (20px / 2));inset-inline-end:10px;transform:translate(0,-50%);opacity:0;transition:opacity .2s ease-in-out}",
          "",
          "[Added Lines]",
          "71: .widget-actions{position:absolute;display:flex;top:calc(16px * 1.25 / 2 + 20px / 2);inset-inline-end:10px;transform:translate(0,-50%);opacity:0;transition:opacity .2s ease-in-out}",
          "",
          "---------------"
        ]
      }
    },
    {
      "candidate_hash": "ad677f2a73b2835fc52a6113a648412a0b69ed66",
      "candidate_info": {
        "commit_hash": "ad677f2a73b2835fc52a6113a648412a0b69ed66",
        "repo": "TYPO3-CMS/dashboard",
        "commit_url": "https://github.com/TYPO3-CMS/dashboard/commit/ad677f2a73b2835fc52a6113a648412a0b69ed66",
        "files": [
          "Classes/Controller/DashboardController.php",
          "Classes/WidgetGroupInitializationService.php",
          "Resources/Private/Layouts/Module.html",
          "Resources/Private/Templates/Dashboard/Main.html",
          "Resources/Public/Css/Modal/style.css",
          "Resources/Public/Css/dashboard.css",
          "Resources/Public/JavaScript/dashboard-delete.js",
          "Resources/Public/JavaScript/widget-remover.js",
          "Resources/Public/JavaScript/widget-selector.js"
        ],
        "message": "[SECURITY] Enforce HTTP method assertions for backend modules\n\nResolves: #104456\nReleases: main, 13.4, 12.4\nChange-Id: Ic679584a343b6d35e81325a03148b0cff81f1d27\nSecurity-Bulletin: TYPO3-CORE-SA-2025-003\nSecurity-Bulletin: TYPO3-CORE-SA-2025-004\nSecurity-Bulletin: TYPO3-CORE-SA-2025-005\nSecurity-Bulletin: TYPO3-CORE-SA-2025-006\nSecurity-Bulletin: TYPO3-CORE-SA-2025-007\nSecurity-Bulletin: TYPO3-CORE-SA-2025-008\nSecurity-References: CVE-2024-55893\nSecurity-References: CVE-2024-55894\nSecurity-References: CVE-2024-55920\nSecurity-References: CVE-2024-55921\nSecurity-References: CVE-2024-55922\nSecurity-References: CVE-2024-55923\nReviewed-on: https://review.typo3.org/c/Packages/TYPO3.CMS/+/87738\nTested-by: Oliver Hader <oliver.hader@typo3.org>\nReviewed-by: Oliver Hader <oliver.hader@typo3.org>",
        "before_after_code_files": [
          "Classes/Controller/DashboardController.php||Classes/Controller/DashboardController.php",
          "Classes/WidgetGroupInitializationService.php||Classes/WidgetGroupInitializationService.php",
          "Resources/Private/Layouts/Module.html||Resources/Private/Layouts/Module.html",
          "Resources/Private/Templates/Dashboard/Main.html||Resources/Private/Templates/Dashboard/Main.html",
          "Resources/Public/Css/Modal/style.css||Resources/Public/Css/Modal/style.css",
          "Resources/Public/Css/dashboard.css||Resources/Public/Css/dashboard.css",
          "Resources/Public/JavaScript/dashboard-delete.js||Resources/Public/JavaScript/dashboard-delete.js",
          "Resources/Public/JavaScript/widget-remover.js||Resources/Public/JavaScript/widget-remover.js",
          "Resources/Public/JavaScript/widget-selector.js||Resources/Public/JavaScript/widget-selector.js"
        ]
      },
      "candidate_patch_features": {
        "candidate_earlier_than_patch": 1,
        "diff_branch_message": 1,
        "olp_code_files": {
          "patch": [
            "Classes/Controller/DashboardController.php||Classes/Controller/DashboardController.php",
            "Classes/WidgetGroupInitializationService.php||Classes/WidgetGroupInitializationService.php",
            "Resources/Private/Layouts/Module.html||Resources/Private/Layouts/Module.html",
            "Resources/Private/Templates/Dashboard/Main.html||Resources/Private/Templates/Dashboard/Main.html",
            "Resources/Public/Css/dashboard.css||Resources/Public/Css/dashboard.css",
            "Resources/Public/JavaScript/dashboard-delete.js||Resources/Public/JavaScript/dashboard-delete.js",
            "Resources/Public/JavaScript/widget-remover.js||Resources/Public/JavaScript/widget-remover.js",
            "Resources/Public/JavaScript/widget-selector.js||Resources/Public/JavaScript/widget-selector.js"
          ],
          "candidate": [
            "Classes/Controller/DashboardController.php||Classes/Controller/DashboardController.php",
            "Classes/WidgetGroupInitializationService.php||Classes/WidgetGroupInitializationService.php",
            "Resources/Private/Layouts/Module.html||Resources/Private/Layouts/Module.html",
            "Resources/Private/Templates/Dashboard/Main.html||Resources/Private/Templates/Dashboard/Main.html",
            "Resources/Public/Css/dashboard.css||Resources/Public/Css/dashboard.css",
            "Resources/Public/JavaScript/dashboard-delete.js||Resources/Public/JavaScript/dashboard-delete.js",
            "Resources/Public/JavaScript/widget-remover.js||Resources/Public/JavaScript/widget-remover.js",
            "Resources/Public/JavaScript/widget-selector.js||Resources/Public/JavaScript/widget-selector.js"
          ]
        }
      },
      "candidate_diff": {
        "Classes/Controller/DashboardController.php||Classes/Controller/DashboardController.php": [
          "File: Classes/Controller/DashboardController.php -> Classes/Controller/DashboardController.php",
          "--- Hunk 1 ---",
          "[Context before]",
          "22: use TYPO3\\CMS\\Backend\\Routing\\UriBuilder;",
          "23: use TYPO3\\CMS\\Backend\\Template\\ModuleTemplateFactory;",
          "24: use TYPO3\\CMS\\Core\\Authentication\\BackendUserAuthentication;",
          "25: use TYPO3\\CMS\\Core\\Http\\RedirectResponse;",
          "26: use TYPO3\\CMS\\Core\\Localization\\LanguageService;",
          "27: use TYPO3\\CMS\\Core\\Page\\JavaScriptModuleInstruction;",
          "",
          "[Removed Lines]",
          "[None]",
          "",
          "[Added Lines]",
          "25: use TYPO3\\CMS\\Core\\Http\\AllowedMethodsTrait;",
          "",
          "---------------",
          "--- Hunk 2 ---",
          "[Context before]",
          "40: class DashboardController",
          "41: {",
          "42:     protected Dashboard $currentDashboard;",
          "44:     public function __construct(",
          "",
          "[Removed Lines]",
          "[None]",
          "",
          "[Added Lines]",
          "43:     use AllowedMethodsTrait;",
          "",
          "---------------",
          "--- Hunk 3 ---",
          "[Context before]",
          "90:     protected function configureDashboardAction(ServerRequestInterface $request): ResponseInterface",
          "91:     {",
          "92:         $parameters = $request->getParsedBody();",
          "93:         $currentDashboard = $parameters['currentDashboard'] ?? '';",
          "94:         $route = $this->uriBuilder->buildUriFromRoute('dashboard', ['action' => 'main'], UriBuilder::ABSOLUTE_URL);",
          "",
          "[Removed Lines]",
          "[None]",
          "",
          "[Added Lines]",
          "95:         $this->assertAllowedHttpMethod($request, 'POST');",
          "",
          "---------------",
          "--- Hunk 4 ---",
          "[Context before]",
          "101:     protected function setActiveDashboardAction(ServerRequestInterface $request): ResponseInterface",
          "102:     {",
          "104:         $route = $this->uriBuilder->buildUriFromRoute('dashboard', ['action' => 'main']);",
          "105:         return new RedirectResponse($route);",
          "106:     }",
          "108:     protected function addDashboardAction(ServerRequestInterface $request): ResponseInterface",
          "109:     {",
          "110:         $parameters = $request->getParsedBody();",
          "111:         $dashboardIdentifier = (string)($parameters['dashboard'] ?? '');",
          "112:         $dashboardPreset = $this->dashboardPresetRepository->getDashboardPresets()[$dashboardIdentifier] ?? null;",
          "",
          "[Removed Lines]",
          "103:         $this->saveCurrentDashboard((string)($request->getQueryParams()['currentDashboard'] ?? ''));",
          "",
          "[Added Lines]",
          "107:         $this->assertAllowedHttpMethod($request, 'POST');",
          "108:         $this->saveCurrentDashboard((string)($request->getParsedBody()['currentDashboard'] ?? ''));",
          "115:         $this->assertAllowedHttpMethod($request, 'POST');",
          "",
          "---------------",
          "--- Hunk 5 ---",
          "[Context before]",
          "123:         return new RedirectResponse($this->uriBuilder->buildUriFromRoute('dashboard', ['action' => 'main']));",
          "124:     }",
          "127:     {",
          "128:         $this->dashboardRepository->delete($this->currentDashboard);",
          "129:         return new RedirectResponse($this->uriBuilder->buildUriFromRoute('dashboard', ['action' => 'main']));",
          "130:     }",
          "132:     protected function addWidgetAction(ServerRequestInterface $request): ResponseInterface",
          "133:     {",
          "135:         if ($widgetKey === '') {",
          "136:             throw new RequiredArgumentMissingException('Argument \"widget\" not set.', 1624436360);",
          "137:         }",
          "",
          "[Removed Lines]",
          "126:     protected function deleteDashboardAction(): ResponseInterface",
          "134:         $widgetKey = (string)($request->getQueryParams()['widget'] ?? '');",
          "",
          "[Added Lines]",
          "132:     protected function deleteDashboardAction(ServerRequestInterface $request): ResponseInterface",
          "134:         $this->assertAllowedHttpMethod($request, 'POST');",
          "141:         $this->assertAllowedHttpMethod($request, 'POST');",
          "142:         $widgetKey = (string)($request->getParsedBody()['widget'] ?? '');",
          "",
          "---------------",
          "--- Hunk 6 ---",
          "[Context before]",
          "146:     protected function removeWidgetAction(ServerRequestInterface $request): ResponseInterface",
          "147:     {",
          "149:         $widgetHash = $parameters['widgetHash'] ?? '';",
          "150:         $widgets = $this->currentDashboard->getWidgetConfig();",
          "151:         if ($widgetHash !== '' && array_key_exists($widgetHash, $widgets)) {",
          "",
          "[Removed Lines]",
          "148:         $parameters = $request->getQueryParams();",
          "",
          "[Added Lines]",
          "156:         $this->assertAllowedHttpMethod($request, 'POST');",
          "157:         $parameters = $request->getParsedBody();",
          "",
          "---------------"
        ],
        "Classes/WidgetGroupInitializationService.php||Classes/WidgetGroupInitializationService.php": [
          "File: Classes/WidgetGroupInitializationService.php -> Classes/WidgetGroupInitializationService.php",
          "--- Hunk 1 ---",
          "[Context before]",
          "45:                     'iconIdentifier' => $widgetConfiguration->getIconIdentifier(),",
          "46:                     'title' => $this->getLanguageService()->sL($widgetConfiguration->getTitle()),",
          "47:                     'description' => $this->getLanguageService()->sL($widgetConfiguration->getDescription()),",
          "48:                 ];",
          "49:             }",
          "",
          "[Removed Lines]",
          "[None]",
          "",
          "[Added Lines]",
          "49:                     'url' => (string)$this->uriBuilder->buildUriFromRoute('dashboard', ['action' => 'addWidget', 'widget' => $widgetIdentifier]),",
          "50:                     'requestType' => 'ajax',",
          "51:                     'defaultValues' => [],",
          "52:                     'saveAndClose' => true,",
          "",
          "---------------"
        ],
        "Resources/Private/Layouts/Module.html||Resources/Private/Layouts/Module.html": [
          "File: Resources/Private/Layouts/Module.html -> Resources/Private/Layouts/Module.html",
          "--- Hunk 1 ---",
          "[Context before]",
          "20:                     <ul class=\"dashboard-tabs-menu\" role=\"menubar\">",
          "21:                         <f:for each=\"{availableDashboards}\" as=\"dashboard\" key=\"dashboardKey\">",
          "22:                             <li class=\"dashboard-tabs-menuitem\" role=\"menuitem\">",
          "28:                                     {dashboard.title}",
          "30:                             </li>",
          "31:                         </f:for>",
          "32:                     </ul>",
          "",
          "[Removed Lines]",
          "23:                                 <f:be.link",
          "24:                                     route=\"dashboard\"",
          "25:                                     parameters=\"{action: 'setActiveDashboard', currentDashboard: dashboardKey}\"",
          "26:                                     class=\"dashboard-tab {f:if(condition: '{dashboardKey} == {currentDashboard.identifier}', then: 'dashboard-tab--active')}\"",
          "27:                                 >",
          "29:                                 </f:be.link>",
          "",
          "[Added Lines]",
          "23:                                 <button",
          "24:                                     name=\"currentDashboard\"",
          "25:                                     value=\"{dashboardKey}\"",
          "26:                                     form=\"form-set-active-dashboard\"",
          "27:                                     class=\"dashboard-tab {f:if(condition: '{dashboardKey} == {currentDashboard.identifier}', then: 'dashboard-tab--active')}\">",
          "29:                                 </button>",
          "",
          "---------------",
          "--- Hunk 2 ---",
          "[Context before]",
          "42:                     >",
          "43:                         <core:icon identifier=\"actions-plus\" alternativeMarkupIdentifier=\"inline\" /><span class=\"visually-hidden\"><f:translate key=\"dashboard.add\" extensionName=\"dashboard\"/></span>",
          "44:                     </a>",
          "45:                 </div>",
          "47:                 <div class=\"dashboard-configuration btn-toolbar\" role=\"toolbar\">",
          "",
          "[Removed Lines]",
          "[None]",
          "",
          "[Added Lines]",
          "45:                     <form id=\"form-set-active-dashboard\" class=\"hidden\" action=\"{f:be.uri(route: 'dashboard', parameters: '{action: \\'setActiveDashboard\\'}')}\" method=\"post\"></form>",
          "",
          "---------------",
          "--- Hunk 3 ---",
          "[Context before]",
          "57:                     >",
          "58:                         <core:icon identifier=\"actions-cog\" alternativeMarkupIdentifier=\"inline\" /><span class=\"visually-hidden\"><f:translate key=\"dashboard.configure\" extensionName=\"dashboard\"/></span>",
          "59:                     </a>",
          "72:                 </div>",
          "73:             </div>",
          "74:         </div>",
          "",
          "[Removed Lines]",
          "60:                     <a",
          "61:                         href=\"{deleteDashboardUri}\"",
          "62:                         class=\"js-dashboard-delete btn btn-default btn-sm\"",
          "63:                         title=\"{f:translate(key: 'dashboard.delete', extensionName: 'dashboard')}\"",
          "64:                         data-modal-title=\"{f:translate(key: 'dashboard.delete', extensionName: 'dashboard')}\"",
          "65:                         data-modal-question=\"{f:translate(key: 'dashboard.delete.sure', extensionName: 'dashboard')}\"",
          "66:                         data-modal-ok=\"{f:translate(key: 'dashboard.delete.ok', extensionName: 'dashboard')}\"",
          "67:                         data-modal-cancel=\"{f:translate(key: 'dashboard.delete.cancel', extensionName: 'dashboard')}\"",
          "68:                         role=\"button\"",
          "69:                     >",
          "70:                         <core:icon identifier=\"actions-delete\" alternativeMarkupIdentifier=\"inline\" /><span class=\"visually-hidden\"><f:translate key=\"dashboard.delete\" extensionName=\"dashboard\"/></span>",
          "71:                     </a>",
          "",
          "[Added Lines]",
          "61:                     <form action=\"{deleteDashboardUri}\" method=\"post\" class=\"form-inline\">",
          "62:                         <button",
          "63:                             class=\"js-dashboard-delete btn btn-default btn-sm\"",
          "64:                             title=\"{f:translate(key: 'dashboard.delete', extensionName: 'dashboard')}\"",
          "65:                             data-modal-title=\"{f:translate(key: 'dashboard.delete', extensionName: 'dashboard')}\"",
          "66:                             data-modal-question=\"{f:translate(key: 'dashboard.delete.sure', extensionName: 'dashboard')}\"",
          "67:                             data-modal-ok=\"{f:translate(key: 'dashboard.delete.ok', extensionName: 'dashboard')}\"",
          "68:                             data-modal-cancel=\"{f:translate(key: 'dashboard.delete.cancel', extensionName: 'dashboard')}\"",
          "69:                             role=\"button\"",
          "70:                         >",
          "71:                             <core:icon identifier=\"actions-delete\" alternativeMarkupIdentifier=\"inline\" /><span class=\"visually-hidden\"><f:translate key=\"dashboard.delete\" extensionName=\"dashboard\"/></span>",
          "72:                         </button>",
          "73:                     </form>",
          "",
          "---------------"
        ],
        "Resources/Private/Templates/Dashboard/Main.html||Resources/Private/Templates/Dashboard/Main.html": [
          "File: Resources/Private/Templates/Dashboard/Main.html -> Resources/Private/Templates/Dashboard/Main.html",
          "--- Hunk 1 ---",
          "[Context before]",
          "37:                                     <div class=\"widget-action widget-action-move js-dashboard-move-widget\">",
          "38:                                         <core:icon identifier=\"actions-move\" alternativeMarkupIdentifier=\"inline\"/>",
          "39:                                     </div>",
          "52:                                 </div>",
          "53:                             </div>",
          "54:                         </div>",
          "",
          "[Removed Lines]",
          "40:                                     <f:be.link",
          "41:                                         class=\"widget-action widget-action-remove js-dashboard-remove-widget\"",
          "42:                                         route=\"dashboard\" parameters=\"{action: 'removeWidget', widgetHash: widgetHash}\"",
          "43:                                         data=\"{",
          "44:                                             modal-title: '{f:translate(key: \\'LLL:EXT:dashboard/Resources/Private/Language/locallang.xlf:widget.remove.confirm.title\\')}',",
          "45:                                             modal-question: '{f:translate(key: \\'LLL:EXT:dashboard/Resources/Private/Language/locallang.xlf:widget.remove.confirm.message\\')}',",
          "46:                                             modal-ok: '{f:translate(key: \\'LLL:EXT:dashboard/Resources/Private/Language/locallang.xlf:widget.remove.button.ok\\')}',",
          "47:                                             modal-cancel: '{f:translate(key: \\'LLL:EXT:dashboard/Resources/Private/Language/locallang.xlf:widget.remove.button.close\\')}'",
          "48:                                         }\"",
          "49:                                     >",
          "50:                                         <core:icon identifier=\"actions-delete\" alternativeMarkupIdentifier=\"inline\"/>",
          "51:                                     </f:be.link>",
          "",
          "[Added Lines]",
          "40:                                     <form action=\"{f:be.uri(route: 'dashboard', parameters: '{action: \\'removeWidget\\'}')}\" method=\"post\" class=\"form-inline\">",
          "41:                                         <input type=\"hidden\" name=\"widgetHash\" value=\"{widgetHash}\">",
          "42:                                         <button",
          "43:                                             class=\"widget-action widget-action-remove js-dashboard-remove-widget\"",
          "44:                                             data-modal-title=\"{f:translate(key: 'LLL:EXT:dashboard/Resources/Private/Language/locallang.xlf:widget.remove.confirm.title')}\"",
          "45:                                             data-modal-question=\"{f:translate(key: 'LLL:EXT:dashboard/Resources/Private/Language/locallang.xlf:widget.remove.confirm.message')}\"",
          "46:                                             data-modal-ok=\"{f:translate(key: 'LLL:EXT:dashboard/Resources/Private/Language/locallang.xlf:widget.remove.button.ok')}\"",
          "47:                                             data-modal-cancel=\"{f:translate(key: 'LLL:EXT:dashboard/Resources/Private/Language/locallang.xlf:widget.remove.button.close')}\"",
          "48:                                         >",
          "49:                                             <core:icon identifier=\"actions-delete\" alternativeMarkupIdentifier=\"inline\"/>",
          "50:                                         </button>",
          "51:                                     </form>",
          "",
          "---------------",
          "--- Hunk 2 ---",
          "[Context before]",
          "122:                             <div class=\"dashboard-modal-items \">",
          "123:                                 <f:for each=\"{groupConfiguration.widgets}\" as=\"widgetConfiguration\" key=\"widgetIdentifier\">",
          "124:                                     <div class=\"dashboard-modal-item\">",
          "126:                                             <f:if condition=\"{widgetConfiguration.iconIdentifier}\">",
          "127:                                                 <div class=\"dashboard-modal-item-icon\">",
          "128:                                                     <core:icon size=\"medium\" alternativeMarkupIdentifier=\"inline\" identifier=\"{widgetConfiguration.iconIdentifier}\"/>",
          "",
          "[Removed Lines]",
          "125:                                         <f:be.link class=\"dashboard-modal-item-block\" route=\"dashboard\" target=\"list_frame\" parameters=\"{action: 'addWidget', widget: widgetIdentifier}\">",
          "",
          "[Added Lines]",
          "125:                                         <button",
          "126:                                             form=\"form-dashboard-widget-add\"",
          "127:                                             name=\"widget\"",
          "128:                                             value=\"{widgetIdentifier}\"",
          "129:                                             type=\"submit\"",
          "130:                                             class=\"dashboard-modal-item-block\"",
          "131:                                             >",
          "",
          "---------------",
          "--- Hunk 3 ---",
          "[Context before]",
          "138:                                                     </div>",
          "139:                                                 </f:if>",
          "140:                                             </div>",
          "142:                                     </div>",
          "143:                                 </f:for>",
          "144:                             </div>",
          "",
          "[Removed Lines]",
          "141:                                         </f:be.link>",
          "",
          "[Added Lines]",
          "147:                                         </button>",
          "",
          "---------------",
          "--- Hunk 4 ---",
          "[Context before]",
          "148:                 </f:for>",
          "149:             </div>",
          "150:         </div>",
          "151:     </template>",
          "153:     <template id=\"dashboardModal-add\">",
          "",
          "[Removed Lines]",
          "[None]",
          "",
          "[Added Lines]",
          "157:         <form id=\"form-dashboard-widget-add\" action=\"{f:be.uri(route: 'dashboard', parameters: '{action: \\'addWidget\\'}')}\" method=\"post\" target=\"list_frame\" class=\"hidden\"></form>",
          "",
          "---------------"
        ],
        "Resources/Public/Css/Modal/style.css||Resources/Public/Css/Modal/style.css": [
          "File: Resources/Public/Css/Modal/style.css -> Resources/Public/Css/Modal/style.css",
          "--- Hunk 1 ---",
          "[Context before]",
          "16: @media screen and (min-width:768px){",
          "17: .dashboard-modal-item{width:50%}",
          "18: }",
          "20: .dashboard-modal-item-checkBox{position:absolute;width:0;height:0;opacity:0;cursor:pointer}",
          "21: .dashboard-modal-item-checkBox:checked~.dashboard-modal-item-block{border:1px solid #313131}",
          "22: .dashboard-modal-item-icon{margin-inline-end:20px}",
          "",
          "[Removed Lines]",
          "19: .dashboard-modal-item-block{display:flex;font-weight:inherit;align-items:center;height:100%;padding:20px;border:1px solid #cacaca;background-color:#fff;box-shadow:0 2px 2px 0 rgba(0,0,0,.15);cursor:pointer}",
          "",
          "[Added Lines]",
          "19: .dashboard-modal-item-block{display:flex;font-weight:inherit;align-items:center;text-align:start;height:100%;padding:20px;border:1px solid #cacaca;background-color:#fff;box-shadow:0 2px 2px 0 rgba(0,0,0,.15);cursor:pointer}",
          "",
          "---------------"
        ],
        "Resources/Public/Css/dashboard.css||Resources/Public/Css/dashboard.css": [
          "File: Resources/Public/Css/dashboard.css -> Resources/Public/Css/dashboard.css",
          "--- Hunk 1 ---",
          "[Context before]",
          "16: .dashboard-tabs{display:flex;flex-wrap:wrap;align-items:center}",
          "17: .dashboard-tabs-menu{display:flex;list-style:none;margin:0;padding:0}",
          "18: .dashboard-tabs-menu .dashboard-tabs-menuitem{margin-inline-end:2px}",
          "20: .dashboard-tab:focus,.dashboard-tab:hover{text-decoration:none;background:#adadad;color:#000}",
          "21: .dashboard-tab--active{background:#ff8700;color:#fff}",
          "22: .dashboard-tab--active:focus,.dashboard-tab--active:hover{text-decoration:none;background:#e67a00;color:#f2f2f2}",
          "",
          "[Removed Lines]",
          "19: .dashboard-tab{border-radius:5px 5px 0 0;display:inline-block;padding:12px;background:#bababa;color:#000}",
          "",
          "[Added Lines]",
          "19: .dashboard-tab{border-radius:5px 5px 0 0;display:inline-block;padding:12px;background:#bababa;color:#000;border:0}",
          "",
          "---------------",
          "--- Hunk 2 ---",
          "[Context before]",
          "72: .widget-content-main{flex-grow:1;overflow-y:auto;padding:20px}",
          "73: .widget-content-footer{padding:20px;padding-top:0}",
          "74: .widget-actions{position:absolute;display:flex;top:calc(16px * 1.25 / 2 + 20px / 2);inset-inline-end:10px;transform:translate(0,-50%);opacity:0;transition:opacity .2s ease-in-out}",
          "76: .widget-action:focus,.widget-action:hover{color:#ff8700}",
          "77: .widget-action .icon{position:absolute;top:50%;inset-inline-start:50%;transform:translate(calc(-50% * var(--typo3-position-modifier)),-50%)}",
          "78: .widget-action-move{cursor:grab}",
          "",
          "[Removed Lines]",
          "75: .widget-action{width:28px;height:28px;position:relative;color:#737373;text-align:center}",
          "",
          "[Added Lines]",
          "75: .widget-action{width:28px;height:28px;position:relative;color:#737373;text-align:center;background:0 0;border:none;-webkit-appearance:none;-moz-appearance:none;appearance:none}",
          "",
          "---------------"
        ],
        "Resources/Public/JavaScript/dashboard-delete.js||Resources/Public/JavaScript/dashboard-delete.js": [
          "File: Resources/Public/JavaScript/dashboard-delete.js -> Resources/Public/JavaScript/dashboard-delete.js",
          "--- Hunk 1 ---",
          "[Context before]",
          "[No context available]",
          "",
          "[Removed Lines]",
          "13: import Modal from\"@typo3/backend/modal.js\";import{SeverityEnum}from\"@typo3/backend/enum/severity.js\";import RegularEvent from\"@typo3/core/event/regular-event.js\";class DashboardDelete{constructor(){this.selector=\".js-dashboard-delete\",this.initialize()}initialize(){new RegularEvent(\"click\",(function(e){e.preventDefault();Modal.confirm(this.dataset.modalTitle,this.dataset.modalQuestion,SeverityEnum.warning,[{text:this.dataset.modalCancel,active:!0,btnClass:\"btn-default\",name:\"cancel\"},{text:this.dataset.modalOk,btnClass:\"btn-warning\",name:\"delete\"}]).addEventListener(\"button.clicked\",(e=>{\"delete\"===e.target.getAttribute(\"name\")&&(window.location.href=this.getAttribute(\"href\")),Modal.dismiss()}))})).delegateTo(document,this.selector)}}export default new DashboardDelete;",
          "",
          "[Added Lines]",
          "[None]",
          "",
          "---------------"
        ],
        "Resources/Public/JavaScript/widget-remover.js||Resources/Public/JavaScript/widget-remover.js": [
          "File: Resources/Public/JavaScript/widget-remover.js -> Resources/Public/JavaScript/widget-remover.js",
          "--- Hunk 1 ---",
          "[Context before]",
          "[No context available]",
          "",
          "[Removed Lines]",
          "13: import Modal from\"@typo3/backend/modal.js\";import{SeverityEnum}from\"@typo3/backend/enum/severity.js\";import RegularEvent from\"@typo3/core/event/regular-event.js\";class WidgetRemover{constructor(){this.selector=\".js-dashboard-remove-widget\",this.initialize()}initialize(){new RegularEvent(\"click\",(function(e){e.preventDefault();const t=Modal.confirm(this.dataset.modalTitle,this.dataset.modalQuestion,SeverityEnum.warning,[{text:this.dataset.modalCancel,active:!0,btnClass:\"btn-default\",name:\"cancel\"},{text:this.dataset.modalOk,btnClass:\"btn-warning\",name:\"delete\"}]);t.addEventListener(\"button.clicked\",(e=>{\"delete\"===e.target.getAttribute(\"name\")&&(window.location.href=this.getAttribute(\"href\")),t.hideModal()}))})).delegateTo(document,this.selector)}}export default new WidgetRemover;",
          "",
          "[Added Lines]",
          "[None]",
          "",
          "---------------"
        ],
        "Resources/Public/JavaScript/widget-selector.js||Resources/Public/JavaScript/widget-selector.js": [
          "File: Resources/Public/JavaScript/widget-selector.js -> Resources/Public/JavaScript/widget-selector.js",
          "--- Hunk 1 ---",
          "[Context before]",
          "[No context available]",
          "",
          "[Removed Lines]",
          "13: import{default as Modal}from\"@typo3/backend/modal.js\";import{SeverityEnum}from\"@typo3/backend/enum/severity.js\";import RegularEvent from\"@typo3/core/event/regular-event.js\";class WidgetSelector{constructor(){this.selector=\".js-dashboard-addWidget\",this.initialize()}initialize(){new RegularEvent(\"click\",(function(e){e.preventDefault();const t=new DocumentFragment;t.append(document.getElementById(\"widgetSelector\").content.cloneNode(!0));const a={type:Modal.types.default,title:this.dataset.modalTitle,size:Modal.sizes.medium,severity:SeverityEnum.notice,content:t,buttons:[{text:TYPO3?.lang?.[\"button.cancel\"]||\"Cancel\",active:!1,btnClass:\"btn-default\",name:\"cancel\"}],additionalCssClasses:[\"dashboard-modal\"],callback:e=>{new RegularEvent(\"click\",(()=>e.hideModal())).delegateTo(e,\"a.dashboard-modal-item-block\")}},o=Modal.advanced(a);o.addEventListener(\"button.clicked\",(e=>{\"cancel\"===e.target.getAttribute(\"name\")&&o.hideModal()}))})).delegateTo(document,this.selector),document.querySelectorAll(this.selector).forEach((e=>{e.classList.remove(\"hide\")}))}}export default new WidgetSelector;",
          "",
          "[Added Lines]",
          "[None]",
          "",
          "---------------"
        ]
      }
    },
    {
      "candidate_hash": "b07c8accd20a4b34f7d811fa1a952d6674b8c0fb",
      "candidate_info": {
        "commit_hash": "b07c8accd20a4b34f7d811fa1a952d6674b8c0fb",
        "repo": "TYPO3-CMS/dashboard",
        "commit_url": "https://github.com/TYPO3-CMS/dashboard/commit/b07c8accd20a4b34f7d811fa1a952d6674b8c0fb",
        "files": [
          "Classes/Controller/DashboardController.php",
          "Classes/WidgetGroupInitializationService.php",
          "Resources/Private/Layouts/Module.html",
          "Resources/Private/Templates/Dashboard/Main.html",
          "Resources/Public/Css/dashboard.css",
          "Resources/Public/JavaScript/dashboard-delete.js",
          "Resources/Public/JavaScript/widget-remover.js",
          "Resources/Public/JavaScript/widget-selector.js"
        ],
        "message": "[SECURITY] Enforce HTTP method assertions for backend modules\n\nResolves: #104456\nReleases: main, 13.4, 12.4\nChange-Id: Ic679584a343b6d35e81325a03148b0cff81f1d27\nSecurity-Bulletin: TYPO3-CORE-SA-2025-003\nSecurity-Bulletin: TYPO3-CORE-SA-2025-004\nSecurity-Bulletin: TYPO3-CORE-SA-2025-005\nSecurity-Bulletin: TYPO3-CORE-SA-2025-006\nSecurity-Bulletin: TYPO3-CORE-SA-2025-007\nSecurity-Bulletin: TYPO3-CORE-SA-2025-008\nSecurity-References: CVE-2024-55893\nSecurity-References: CVE-2024-55894\nSecurity-References: CVE-2024-55920\nSecurity-References: CVE-2024-55921\nSecurity-References: CVE-2024-55922\nSecurity-References: CVE-2024-55923\nReviewed-on: https://review.typo3.org/c/Packages/TYPO3.CMS/+/87741\nTested-by: Oliver Hader <oliver.hader@typo3.org>\nReviewed-by: Oliver Hader <oliver.hader@typo3.org>",
        "before_after_code_files": [
          "Classes/Controller/DashboardController.php||Classes/Controller/DashboardController.php",
          "Classes/WidgetGroupInitializationService.php||Classes/WidgetGroupInitializationService.php",
          "Resources/Private/Layouts/Module.html||Resources/Private/Layouts/Module.html",
          "Resources/Private/Templates/Dashboard/Main.html||Resources/Private/Templates/Dashboard/Main.html",
          "Resources/Public/Css/dashboard.css||Resources/Public/Css/dashboard.css",
          "Resources/Public/JavaScript/dashboard-delete.js||Resources/Public/JavaScript/dashboard-delete.js",
          "Resources/Public/JavaScript/widget-remover.js||Resources/Public/JavaScript/widget-remover.js",
          "Resources/Public/JavaScript/widget-selector.js||Resources/Public/JavaScript/widget-selector.js"
        ]
      },
      "candidate_patch_features": {
        "candidate_earlier_than_patch": 1,
        "diff_branch_message": 1,
        "olp_code_files": {
          "patch": [
            "Classes/Controller/DashboardController.php||Classes/Controller/DashboardController.php",
            "Classes/WidgetGroupInitializationService.php||Classes/WidgetGroupInitializationService.php",
            "Resources/Private/Layouts/Module.html||Resources/Private/Layouts/Module.html",
            "Resources/Private/Templates/Dashboard/Main.html||Resources/Private/Templates/Dashboard/Main.html",
            "Resources/Public/Css/dashboard.css||Resources/Public/Css/dashboard.css",
            "Resources/Public/JavaScript/dashboard-delete.js||Resources/Public/JavaScript/dashboard-delete.js",
            "Resources/Public/JavaScript/widget-remover.js||Resources/Public/JavaScript/widget-remover.js",
            "Resources/Public/JavaScript/widget-selector.js||Resources/Public/JavaScript/widget-selector.js"
          ],
          "candidate": [
            "Classes/Controller/DashboardController.php||Classes/Controller/DashboardController.php",
            "Classes/WidgetGroupInitializationService.php||Classes/WidgetGroupInitializationService.php",
            "Resources/Private/Layouts/Module.html||Resources/Private/Layouts/Module.html",
            "Resources/Private/Templates/Dashboard/Main.html||Resources/Private/Templates/Dashboard/Main.html",
            "Resources/Public/Css/dashboard.css||Resources/Public/Css/dashboard.css",
            "Resources/Public/JavaScript/dashboard-delete.js||Resources/Public/JavaScript/dashboard-delete.js",
            "Resources/Public/JavaScript/widget-remover.js||Resources/Public/JavaScript/widget-remover.js",
            "Resources/Public/JavaScript/widget-selector.js||Resources/Public/JavaScript/widget-selector.js"
          ]
        }
      },
      "candidate_diff": {
        "Classes/Controller/DashboardController.php||Classes/Controller/DashboardController.php": [
          "File: Classes/Controller/DashboardController.php -> Classes/Controller/DashboardController.php",
          "--- Hunk 1 ---",
          "[Context before]",
          "20: use Psr\\Http\\Message\\ResponseInterface;",
          "21: use Psr\\Http\\Message\\ServerRequestInterface;",
          "22: use TYPO3\\CMS\\Backend\\Attribute\\AsController;",
          "23: use TYPO3\\CMS\\Backend\\Routing\\UriBuilder;",
          "24: use TYPO3\\CMS\\Backend\\Template\\ModuleTemplateFactory;",
          "25: use TYPO3\\CMS\\Core\\Authentication\\BackendUserAuthentication;",
          "26: use TYPO3\\CMS\\Core\\Http\\RedirectResponse;",
          "27: use TYPO3\\CMS\\Core\\Localization\\LanguageService;",
          "28: use TYPO3\\CMS\\Core\\Page\\PageRenderer;",
          "",
          "[Removed Lines]",
          "[None]",
          "",
          "[Added Lines]",
          "23: use TYPO3\\CMS\\Backend\\Domain\\Model\\Element\\ImmediateActionElement;",
          "27: use TYPO3\\CMS\\Core\\Http\\AllowedMethodsTrait;",
          "28: use TYPO3\\CMS\\Core\\Http\\HtmlResponse;",
          "",
          "---------------",
          "--- Hunk 2 ---",
          "[Context before]",
          "40: #[AsController]",
          "41: class DashboardController",
          "42: {",
          "43:     protected Dashboard $currentDashboard;",
          "45:     public function __construct(",
          "",
          "[Removed Lines]",
          "[None]",
          "",
          "[Added Lines]",
          "46:     use AllowedMethodsTrait;",
          "",
          "---------------",
          "--- Hunk 3 ---",
          "[Context before]",
          "91:     protected function configureDashboardAction(ServerRequestInterface $request): ResponseInterface",
          "92:     {",
          "93:         $parameters = $request->getParsedBody();",
          "94:         $currentDashboard = $parameters['currentDashboard'] ?? '';",
          "95:         $route = $this->uriBuilder->buildUriFromRoute('dashboard', ['action' => 'main'], UriBuilder::ABSOLUTE_URL);",
          "",
          "[Removed Lines]",
          "[None]",
          "",
          "[Added Lines]",
          "98:         $this->assertAllowedHttpMethod($request, 'POST');",
          "",
          "---------------",
          "--- Hunk 4 ---",
          "[Context before]",
          "102:     protected function setActiveDashboardAction(ServerRequestInterface $request): ResponseInterface",
          "103:     {",
          "105:         $route = $this->uriBuilder->buildUriFromRoute('dashboard', ['action' => 'main']);",
          "106:         return new RedirectResponse($route);",
          "107:     }",
          "109:     protected function addDashboardAction(ServerRequestInterface $request): ResponseInterface",
          "110:     {",
          "111:         $parameters = $request->getParsedBody();",
          "112:         $dashboardIdentifier = (string)($parameters['dashboard'] ?? '');",
          "113:         $dashboardPreset = $this->dashboardPresetRepository->getDashboardPresets()[$dashboardIdentifier] ?? null;",
          "",
          "[Removed Lines]",
          "104:         $this->saveCurrentDashboard((string)($request->getQueryParams()['currentDashboard'] ?? ''));",
          "",
          "[Added Lines]",
          "110:         $this->assertAllowedHttpMethod($request, 'POST');",
          "111:         $this->saveCurrentDashboard((string)($request->getParsedBody()['currentDashboard'] ?? ''));",
          "118:         $this->assertAllowedHttpMethod($request, 'POST');",
          "",
          "---------------",
          "--- Hunk 5 ---",
          "[Context before]",
          "124:         return new RedirectResponse($this->uriBuilder->buildUriFromRoute('dashboard', ['action' => 'main']));",
          "125:     }",
          "128:     {",
          "129:         $this->dashboardRepository->delete($this->currentDashboard);",
          "130:         return new RedirectResponse($this->uriBuilder->buildUriFromRoute('dashboard', ['action' => 'main']));",
          "131:     }",
          "133:     protected function addWidgetAction(ServerRequestInterface $request): ResponseInterface",
          "134:     {",
          "135:         $widgetKey = (string)($request->getQueryParams()['widget'] ?? '');",
          "136:         if ($widgetKey === '') {",
          "137:             throw new RequiredArgumentMissingException('Argument \"widget\" not set.', 1624436360);",
          "",
          "[Removed Lines]",
          "127:     protected function deleteDashboardAction(): ResponseInterface",
          "",
          "[Added Lines]",
          "135:     protected function deleteDashboardAction(ServerRequestInterface $request): ResponseInterface",
          "137:         $this->assertAllowedHttpMethod($request, 'POST');",
          "144:         $this->assertAllowedHttpMethod($request, 'POST');",
          "",
          "---------------",
          "--- Hunk 6 ---",
          "[Context before]",
          "140:         $hash = sha1($widgetKey . '-' . time());",
          "141:         $widgets[$hash] = ['identifier' => $widgetKey];",
          "142:         $this->dashboardRepository->updateWidgetConfig($this->currentDashboard, $widgets);",
          "145:     }",
          "147:     protected function removeWidgetAction(ServerRequestInterface $request): ResponseInterface",
          "148:     {",
          "150:         $widgetHash = $parameters['widgetHash'] ?? '';",
          "151:         $widgets = $this->currentDashboard->getWidgetConfig();",
          "152:         if ($widgetHash !== '' && array_key_exists($widgetHash, $widgets)) {",
          "",
          "[Removed Lines]",
          "143:         $route = $this->uriBuilder->buildUriFromRoute('dashboard', ['action' => 'main']);",
          "144:         return new RedirectResponse($route);",
          "149:         $parameters = $request->getQueryParams();",
          "",
          "[Added Lines]",
          "153:         return new HtmlResponse((string)ImmediateActionElement::dispatchCustomEvent('typo3.dashboard.addWidgetDone'));",
          "158:         $this->assertAllowedHttpMethod($request, 'POST');",
          "159:         $parameters = $request->getParsedBody();",
          "",
          "---------------"
        ],
        "Classes/WidgetGroupInitializationService.php||Classes/WidgetGroupInitializationService.php": [
          "File: Classes/WidgetGroupInitializationService.php -> Classes/WidgetGroupInitializationService.php",
          "--- Hunk 1 ---",
          "[Context before]",
          "51:                     'label' => $this->getLanguageService()->sL($widgetConfiguration->getTitle()),",
          "52:                     'description' => $this->getLanguageService()->sL($widgetConfiguration->getDescription()),",
          "53:                     'url' => (string)$this->uriBuilder->buildUriFromRoute('dashboard', ['action' => 'addWidget', 'widget' => $widgetIdentifier]),",
          "55:                 ];",
          "56:             }",
          "",
          "[Removed Lines]",
          "54:                     'requestType' => 'location',",
          "",
          "[Added Lines]",
          "54:                     'requestType' => 'ajax',",
          "55:                     'defaultValues' => [],",
          "56:                     'saveAndClose' => true,",
          "",
          "---------------"
        ],
        "Resources/Private/Layouts/Module.html||Resources/Private/Layouts/Module.html": [
          "File: Resources/Private/Layouts/Module.html -> Resources/Private/Layouts/Module.html",
          "--- Hunk 1 ---",
          "[Context before]",
          "20:                     <ul class=\"dashboard-tabs-menu\" role=\"menubar\">",
          "21:                         <f:for each=\"{availableDashboards}\" as=\"dashboard\" key=\"dashboardKey\">",
          "22:                             <li class=\"dashboard-tabs-menuitem\" role=\"menuitem\">",
          "28:                                     {dashboard.title}",
          "30:                             </li>",
          "31:                         </f:for>",
          "32:                     </ul>",
          "",
          "[Removed Lines]",
          "23:                                 <f:be.link",
          "24:                                     route=\"dashboard\"",
          "25:                                     parameters=\"{action: 'setActiveDashboard', currentDashboard: dashboardKey}\"",
          "26:                                     class=\"dashboard-tab {f:if(condition: '{dashboardKey} == {currentDashboard.identifier}', then: 'dashboard-tab--active')}\"",
          "27:                                 >",
          "29:                                 </f:be.link>",
          "",
          "[Added Lines]",
          "23:                                 <button",
          "24:                                     name=\"currentDashboard\"",
          "25:                                     value=\"{dashboardKey}\"",
          "26:                                     form=\"form-set-active-dashboard\"",
          "27:                                     class=\"dashboard-tab {f:if(condition: '{dashboardKey} == {currentDashboard.identifier}', then: 'dashboard-tab--active')}\">",
          "29:                                 </button>",
          "",
          "---------------",
          "--- Hunk 2 ---",
          "[Context before]",
          "42:                     >",
          "43:                         <core:icon identifier=\"actions-plus\" alternativeMarkupIdentifier=\"inline\" /><span class=\"visually-hidden\"><f:translate key=\"dashboard.add\" extensionName=\"dashboard\"/></span>",
          "44:                     </a>",
          "45:                 </div>",
          "47:                 <div class=\"dashboard-configuration btn-toolbar\" role=\"toolbar\">",
          "",
          "[Removed Lines]",
          "[None]",
          "",
          "[Added Lines]",
          "45:                     <form id=\"form-set-active-dashboard\" class=\"hidden\" action=\"{f:be.uri(route: 'dashboard', parameters: '{action: \\'setActiveDashboard\\'}')}\" method=\"post\"></form>",
          "",
          "---------------",
          "--- Hunk 3 ---",
          "[Context before]",
          "57:                     >",
          "58:                         <core:icon identifier=\"actions-cog\" alternativeMarkupIdentifier=\"inline\" /><span class=\"visually-hidden\"><f:translate key=\"dashboard.configure\" extensionName=\"dashboard\"/></span>",
          "59:                     </a>",
          "72:                 </div>",
          "73:             </div>",
          "74:         </div>",
          "",
          "[Removed Lines]",
          "60:                     <a",
          "61:                         href=\"{deleteDashboardUri}\"",
          "62:                         class=\"js-dashboard-delete btn btn-default btn-sm\"",
          "63:                         title=\"{f:translate(key: 'dashboard.delete', extensionName: 'dashboard')}\"",
          "64:                         data-modal-title=\"{f:translate(key: 'dashboard.delete', extensionName: 'dashboard')}\"",
          "65:                         data-modal-question=\"{f:translate(key: 'dashboard.delete.sure', extensionName: 'dashboard')}\"",
          "66:                         data-modal-ok=\"{f:translate(key: 'dashboard.delete.ok', extensionName: 'dashboard')}\"",
          "67:                         data-modal-cancel=\"{f:translate(key: 'dashboard.delete.cancel', extensionName: 'dashboard')}\"",
          "68:                         role=\"button\"",
          "69:                     >",
          "70:                         <core:icon identifier=\"actions-delete\" alternativeMarkupIdentifier=\"inline\" /><span class=\"visually-hidden\"><f:translate key=\"dashboard.delete\" extensionName=\"dashboard\"/></span>",
          "71:                     </a>",
          "",
          "[Added Lines]",
          "61:                     <form action=\"{deleteDashboardUri}\" method=\"post\" class=\"form-inline\">",
          "62:                         <button",
          "63:                             class=\"js-dashboard-delete btn btn-default btn-sm\"",
          "64:                             title=\"{f:translate(key: 'dashboard.delete', extensionName: 'dashboard')}\"",
          "65:                             data-modal-title=\"{f:translate(key: 'dashboard.delete', extensionName: 'dashboard')}\"",
          "66:                             data-modal-question=\"{f:translate(key: 'dashboard.delete.sure', extensionName: 'dashboard')}\"",
          "67:                             data-modal-ok=\"{f:translate(key: 'dashboard.delete.ok', extensionName: 'dashboard')}\"",
          "68:                             data-modal-cancel=\"{f:translate(key: 'dashboard.delete.cancel', extensionName: 'dashboard')}\"",
          "69:                             role=\"button\"",
          "70:                         >",
          "71:                             <core:icon identifier=\"actions-delete\" alternativeMarkupIdentifier=\"inline\" /><span class=\"visually-hidden\"><f:translate key=\"dashboard.delete\" extensionName=\"dashboard\"/></span>",
          "72:                         </button>",
          "73:                     </form>",
          "",
          "---------------"
        ],
        "Resources/Private/Templates/Dashboard/Main.html||Resources/Private/Templates/Dashboard/Main.html": [
          "File: Resources/Private/Templates/Dashboard/Main.html -> Resources/Private/Templates/Dashboard/Main.html",
          "--- Hunk 1 ---",
          "[Context before]",
          "41:                                             <core:icon identifier=\"actions-refresh\" alternativeMarkupIdentifier=\"inline\"/>",
          "42:                                         </typo3-dashboard-widget-refresh>",
          "43:                                     </f:if>",
          "56:                                 </div>",
          "57:                             </div>",
          "58:                         </div>",
          "",
          "[Removed Lines]",
          "44:                                     <f:be.link",
          "45:                                         class=\"widget-action widget-action-remove js-dashboard-remove-widget\"",
          "46:                                         route=\"dashboard\" parameters=\"{action: 'removeWidget', widgetHash: widgetHash}\"",
          "47:                                         data=\"{",
          "48:                                             modal-title: '{f:translate(key: \\'LLL:EXT:dashboard/Resources/Private/Language/locallang.xlf:widget.remove.confirm.title\\')}',",
          "49:                                             modal-question: '{f:translate(key: \\'LLL:EXT:dashboard/Resources/Private/Language/locallang.xlf:widget.remove.confirm.message\\')}',",
          "50:                                             modal-ok: '{f:translate(key: \\'LLL:EXT:dashboard/Resources/Private/Language/locallang.xlf:widget.remove.button.ok\\')}',",
          "51:                                             modal-cancel: '{f:translate(key: \\'LLL:EXT:dashboard/Resources/Private/Language/locallang.xlf:widget.remove.button.close\\')}'",
          "52:                                         }\"",
          "53:                                     >",
          "54:                                         <core:icon identifier=\"actions-delete\" alternativeMarkupIdentifier=\"inline\"/>",
          "55:                                     </f:be.link>",
          "",
          "[Added Lines]",
          "44:                                     <form action=\"{f:be.uri(route: 'dashboard', parameters: '{action: \\'removeWidget\\'}')}\" method=\"post\" class=\"form-inline\">",
          "45:                                         <input type=\"hidden\" name=\"widgetHash\" value=\"{widgetHash}\">",
          "46:                                         <button",
          "47:                                             class=\"widget-action widget-action-remove js-dashboard-remove-widget\"",
          "48:                                             data-modal-title=\"{f:translate(key: 'LLL:EXT:dashboard/Resources/Private/Language/locallang.xlf:widget.remove.confirm.title')}\"",
          "49:                                             data-modal-question=\"{f:translate(key: 'LLL:EXT:dashboard/Resources/Private/Language/locallang.xlf:widget.remove.confirm.message')}\"",
          "50:                                             data-modal-ok=\"{f:translate(key: 'LLL:EXT:dashboard/Resources/Private/Language/locallang.xlf:widget.remove.button.ok')}\"",
          "51:                                             data-modal-cancel=\"{f:translate(key: 'LLL:EXT:dashboard/Resources/Private/Language/locallang.xlf:widget.remove.button.close')}\"",
          "52:                                         >",
          "53:                                             <core:icon identifier=\"actions-delete\" alternativeMarkupIdentifier=\"inline\"/>",
          "54:                                         </button>",
          "55:                                     </form>",
          "",
          "---------------"
        ],
        "Resources/Public/Css/dashboard.css||Resources/Public/Css/dashboard.css": [
          "File: Resources/Public/Css/dashboard.css -> Resources/Public/Css/dashboard.css",
          "--- Hunk 1 ---",
          "[Context before]",
          "70: .widget-content-main{flex-grow:1;overflow-y:auto;padding:var(--widget-padding)}",
          "71: .widget-content-footer{padding:var(--widget-padding);padding-top:0}",
          "72: .widget-actions{color:var(--widget-title-color-state,var(--widget-title-color));position:absolute;display:flex;top:calc(var(--widget-title-font-size) * var(--widget-title-line-height)/ 2 + var(--widget-padding)/ 2);inset-inline-end:calc(var(--widget-padding)/ 2);transform:translate(0,-50%)}",
          "74: .widget-action:focus,.widget-action:hover{opacity:1!important}",
          "75: .widget-action:focus-visible{outline:var(--typo3-outline-width) var(--typo3-outline-style) color-mix(in srgb,currentColor,transparent 25%)}",
          "76: .widget-action .icon{position:absolute;top:50%;inset-inline-start:50%;transform:translate(calc(-50% * var(--typo3-position-modifier)),-50%)}",
          "",
          "[Removed Lines]",
          "73: .widget-action{width:var(--widget-action-size);height:var(--widget-action-size);position:relative;color:inherit;text-align:center;opacity:.5;border-radius:4px;transition:opacity .2s ease-in-out}",
          "",
          "[Added Lines]",
          "73: .widget-action{width:var(--widget-action-size);height:var(--widget-action-size);position:relative;color:inherit;text-align:center;opacity:.5;border-radius:4px;transition:opacity .2s ease-in-out;background:0 0;border:none;-webkit-appearance:none;-moz-appearance:none;appearance:none}",
          "",
          "---------------"
        ],
        "Resources/Public/JavaScript/dashboard-delete.js||Resources/Public/JavaScript/dashboard-delete.js": [
          "File: Resources/Public/JavaScript/dashboard-delete.js -> Resources/Public/JavaScript/dashboard-delete.js",
          "--- Hunk 1 ---",
          "[Context before]",
          "[No context available]",
          "",
          "[Removed Lines]",
          "13: import Modal from\"@typo3/backend/modal.js\";import{SeverityEnum}from\"@typo3/backend/enum/severity.js\";import RegularEvent from\"@typo3/core/event/regular-event.js\";class DashboardDelete{constructor(){this.selector=\".js-dashboard-delete\",this.initialize()}initialize(){new RegularEvent(\"click\",(function(e){e.preventDefault();Modal.confirm(this.dataset.modalTitle,this.dataset.modalQuestion,SeverityEnum.warning,[{text:this.dataset.modalCancel,active:!0,btnClass:\"btn-default\",name:\"cancel\"},{text:this.dataset.modalOk,btnClass:\"btn-warning\",name:\"delete\"}]).addEventListener(\"button.clicked\",(e=>{\"delete\"===e.target.getAttribute(\"name\")&&(window.location.href=this.getAttribute(\"href\")),Modal.dismiss()}))})).delegateTo(document,this.selector)}}export default new DashboardDelete;",
          "",
          "[Added Lines]",
          "[None]",
          "",
          "---------------"
        ],
        "Resources/Public/JavaScript/widget-remover.js||Resources/Public/JavaScript/widget-remover.js": [
          "File: Resources/Public/JavaScript/widget-remover.js -> Resources/Public/JavaScript/widget-remover.js",
          "--- Hunk 1 ---",
          "[Context before]",
          "[No context available]",
          "",
          "[Removed Lines]",
          "13: import Modal from\"@typo3/backend/modal.js\";import{SeverityEnum}from\"@typo3/backend/enum/severity.js\";import RegularEvent from\"@typo3/core/event/regular-event.js\";class WidgetRemover{constructor(){this.selector=\".js-dashboard-remove-widget\",this.initialize()}initialize(){new RegularEvent(\"click\",(function(e){e.preventDefault();const t=Modal.confirm(this.dataset.modalTitle,this.dataset.modalQuestion,SeverityEnum.warning,[{text:this.dataset.modalCancel,active:!0,btnClass:\"btn-default\",name:\"cancel\"},{text:this.dataset.modalOk,btnClass:\"btn-warning\",name:\"delete\"}]);t.addEventListener(\"button.clicked\",(e=>{\"delete\"===e.target.getAttribute(\"name\")&&(window.location.href=this.getAttribute(\"href\")),t.hideModal()}))})).delegateTo(document,this.selector)}}export default new WidgetRemover;",
          "",
          "[Added Lines]",
          "[None]",
          "",
          "---------------"
        ],
        "Resources/Public/JavaScript/widget-selector.js||Resources/Public/JavaScript/widget-selector.js": [
          "File: Resources/Public/JavaScript/widget-selector.js -> Resources/Public/JavaScript/widget-selector.js",
          "--- Hunk 1 ---",
          "[Context before]",
          "[No context available]",
          "",
          "[Removed Lines]",
          "13: import{default as Modal}from\"@typo3/backend/modal.js\";import{SeverityEnum}from\"@typo3/backend/enum/severity.js\";import RegularEvent from\"@typo3/core/event/regular-event.js\";class WidgetSelector{constructor(){this.selector=\".js-dashboard-addWidget\",this.initialize()}initialize(){new RegularEvent(\"click\",(function(e){e.preventDefault();const t=new DocumentFragment;t.append(document.getElementById(\"widgetSelector\").content.cloneNode(!0));const a={type:Modal.types.default,title:this.dataset.modalTitle,size:Modal.sizes.medium,severity:SeverityEnum.notice,content:t,buttons:[{text:TYPO3?.lang?.[\"button.cancel\"]||\"Cancel\",active:!1,btnClass:\"btn-default\",name:\"cancel\"}],additionalCssClasses:[\"dashboard-modal\"],callback:e=>{new RegularEvent(\"click\",(()=>e.hideModal())).delegateTo(e,\"a.dashboard-modal-item-block\")}},o=Modal.advanced(a);o.addEventListener(\"button.clicked\",(e=>{\"cancel\"===e.target.getAttribute(\"name\")&&o.hideModal()}))})).delegateTo(document,this.selector),document.querySelectorAll(this.selector).forEach((e=>{e.classList.remove(\"hide\")}))}}export default new WidgetSelector;",
          "",
          "[Added Lines]",
          "[None]",
          "",
          "---------------"
        ]
      }
    }
  ]
}